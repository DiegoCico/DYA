/*! For license information please see main.edb15615.js.LICENSE.txt */
(()=>{"use strict";var e={914:(e,t,n)=>{var i=n(483),r=n(557);function s(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,a={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(a[e]=t,e=0;e<t.length;e++)o.add(t[e])}var h=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),u=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function g(e,t,n,i,r,s,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var m={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){m[e]=new g(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];m[t]=new g(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){m[e]=new g(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){m[e]=new g(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){m[e]=new g(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){m[e]=new g(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){m[e]=new g(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){m[e]=new g(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){m[e]=new g(e,5,!1,e.toLowerCase(),null,!1,!1)}));var v=/[\-:]([a-z])/g;function y(e){return e[1].toUpperCase()}function w(e,t,n,i){var r=m.hasOwnProperty(t)?m[t]:null;(null!==r?0!==r.type:i||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,i){if(null===t||"undefined"===typeof t||function(e,t,n,i){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!i&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,i))return!0;if(i)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,r,i)&&(n=null),i||null===r?function(e){return!!u.call(p,e)||!u.call(f,e)&&(d.test(e)?p[e]=!0:(f[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):r.mustUseProperty?e[r.propertyName]=null===n?3!==r.type&&"":n:(t=r.attributeName,i=r.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(r=r.type)||4===r&&!0===n?"":""+n,i?e.setAttributeNS(i,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(v,y);m[t]=new g(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(v,y);m[t]=new g(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(v,y);m[t]=new g(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){m[e]=new g(e,1,!1,e.toLowerCase(),null,!1,!1)})),m.xlinkHref=new g("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){m[e]=new g(e,1,!1,e.toLowerCase(),null,!0,!0)}));var b=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,O=Symbol.for("react.element"),k=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),x=Symbol.for("react.strict_mode"),T=Symbol.for("react.profiler"),C=Symbol.for("react.provider"),E=Symbol.for("react.context"),_=Symbol.for("react.forward_ref"),A=Symbol.for("react.suspense"),P=Symbol.for("react.suspense_list"),N=Symbol.for("react.memo"),I=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var R=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var D=Symbol.iterator;function M(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=D&&e[D]||e["@@iterator"])?e:null}var L,Q=Object.assign;function z(e){if(void 0===L)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);L=t&&t[1]||""}return"\n"+L+e}var j=!1;function U(e,t){if(!e||j)return"";j=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var i=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){i=c}e.call(t.prototype)}else{try{throw Error()}catch(c){i=c}e()}}catch(c){if(c&&i&&"string"===typeof c.stack){for(var r=c.stack.split("\n"),s=i.stack.split("\n"),o=r.length-1,a=s.length-1;1<=o&&0<=a&&r[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(r[o]!==s[a]){if(1!==o||1!==a)do{if(o--,0>--a||r[o]!==s[a]){var l="\n"+r[o].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=o&&0<=a);break}}}finally{j=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?z(e):""}function V(e){switch(e.tag){case 5:return z(e.type);case 16:return z("Lazy");case 13:return z("Suspense");case 19:return z("SuspenseList");case 0:case 2:case 15:return e=U(e.type,!1);case 11:return e=U(e.type.render,!1);case 1:return e=U(e.type,!0);default:return""}}function F(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case S:return"Fragment";case k:return"Portal";case T:return"Profiler";case x:return"StrictMode";case A:return"Suspense";case P:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case E:return(e.displayName||"Context")+".Consumer";case C:return(e._context.displayName||"Context")+".Provider";case _:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case N:return null!==(t=e.displayName||null)?t:F(e.type)||"Memo";case I:t=e._payload,e=e._init;try{return F(e(t))}catch(n){}}return null}function q(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return F(t);case 8:return t===x?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function B(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function W(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function H(e){e._valueTracker||(e._valueTracker=function(e){var t=W(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),i=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var r=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return r.call(this)},set:function(e){i=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(e){i=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function $(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),i="";return e&&(i=W(e)?e.checked?"true":"false":e.value),(e=i)!==n&&(t.setValue(e),!0)}function X(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(lo){return e.body}}function G(e,t){var n=t.checked;return Q({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function K(e,t){var n=null==t.defaultValue?"":t.defaultValue,i=null!=t.checked?t.checked:t.defaultChecked;n=B(null!=t.value?t.value:n),e._wrapperState={initialChecked:i,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Y(e,t){null!=(t=t.checked)&&w(e,"checked",t,!1)}function J(e,t){Y(e,t);var n=B(t.value),i=t.type;if(null!=n)"number"===i?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===i||"reset"===i)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,B(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var i=t.type;if(!("submit"!==i&&"reset"!==i||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&X(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,i){if(e=e.options,t){t={};for(var r=0;r<n.length;r++)t["$"+n[r]]=!0;for(n=0;n<e.length;n++)r=t.hasOwnProperty("$"+e[n].value),e[n].selected!==r&&(e[n].selected=r),r&&i&&(e[n].defaultSelected=!0)}else{for(n=""+B(n),t=null,r=0;r<e.length;r++){if(e[r].value===n)return e[r].selected=!0,void(i&&(e[r].defaultSelected=!0));null!==t||e[r].disabled||(t=e[r])}null!==t&&(t.selected=!0)}}function ie(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(s(91));return Q({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function re(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(s(92));if(te(n)){if(1<n.length)throw Error(s(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:B(n)}}function se(e,t){var n=B(t.value),i=B(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=i&&(e.defaultValue=""+i)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ae(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ae(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,he,ue=(he=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,i){MSApp.execUnsafeLocalFunction((function(){return he(e,t)}))}:he);function de(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var fe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function ge(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||fe.hasOwnProperty(e)&&fe[e]?(""+t).trim():t+"px"}function me(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var i=0===n.indexOf("--"),r=ge(n,t[n],i);"float"===n&&(n="cssFloat"),i?e.setProperty(n,r):e[n]=r}}Object.keys(fe).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),fe[t]=fe[e]}))}));var ve=Q({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ye(e,t){if(t){if(ve[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(s(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(s(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(s(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(s(62))}}function we(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function Oe(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var ke=null,Se=null,xe=null;function Te(e){if(e=wr(e)){if("function"!==typeof ke)throw Error(s(280));var t=e.stateNode;t&&(t=Or(t),ke(e.stateNode,e.type,t))}}function Ce(e){Se?xe?xe.push(e):xe=[e]:Se=e}function Ee(){if(Se){var e=Se,t=xe;if(xe=Se=null,Te(e),t)for(e=0;e<t.length;e++)Te(t[e])}}function _e(e,t){return e(t)}function Ae(){}var Pe=!1;function Ne(e,t,n){if(Pe)return e(t,n);Pe=!0;try{return _e(e,t,n)}finally{Pe=!1,(null!==Se||null!==xe)&&(Ae(),Ee())}}function Ie(e,t){var n=e.stateNode;if(null===n)return null;var i=Or(n);if(null===i)return null;n=i[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(i=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!i;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(s(231,t,typeof n));return n}var Re=!1;if(h)try{var De={};Object.defineProperty(De,"passive",{get:function(){Re=!0}}),window.addEventListener("test",De,De),window.removeEventListener("test",De,De)}catch(he){Re=!1}function Me(e,t,n,i,r,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(h){this.onError(h)}}var Le=!1,Qe=null,ze=!1,je=null,Ue={onError:function(e){Le=!0,Qe=e}};function Ve(e,t,n,i,r,s,o,a,l){Le=!1,Qe=null,Me.apply(Ue,arguments)}function Fe(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function qe(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Be(e){if(Fe(e)!==e)throw Error(s(188))}function We(e){return e=function(e){var t=e.alternate;if(!t){if(null===(t=Fe(e)))throw Error(s(188));return t!==e?null:e}for(var n=e,i=t;;){var r=n.return;if(null===r)break;var o=r.alternate;if(null===o){if(null!==(i=r.return)){n=i;continue}break}if(r.child===o.child){for(o=r.child;o;){if(o===n)return Be(r),e;if(o===i)return Be(r),t;o=o.sibling}throw Error(s(188))}if(n.return!==i.return)n=r,i=o;else{for(var a=!1,l=r.child;l;){if(l===n){a=!0,n=r,i=o;break}if(l===i){a=!0,i=r,n=o;break}l=l.sibling}if(!a){for(l=o.child;l;){if(l===n){a=!0,n=o,i=r;break}if(l===i){a=!0,i=o,n=r;break}l=l.sibling}if(!a)throw Error(s(189))}}if(n.alternate!==i)throw Error(s(190))}if(3!==n.tag)throw Error(s(188));return n.stateNode.current===n?e:t}(e),null!==e?He(e):null}function He(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=He(e);if(null!==t)return t;e=e.sibling}return null}var $e=r.unstable_scheduleCallback,Xe=r.unstable_cancelCallback,Ge=r.unstable_shouldYield,Ke=r.unstable_requestPaint,Ye=r.unstable_now,Je=r.unstable_getCurrentPriorityLevel,Ze=r.unstable_ImmediatePriority,et=r.unstable_UserBlockingPriority,tt=r.unstable_NormalPriority,nt=r.unstable_LowPriority,it=r.unstable_IdlePriority,rt=null,st=null;var ot=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(at(e)/lt|0)|0},at=Math.log,lt=Math.LN2;var ct=64,ht=4194304;function ut(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function dt(e,t){var n=e.pendingLanes;if(0===n)return 0;var i=0,r=e.suspendedLanes,s=e.pingedLanes,o=268435455&n;if(0!==o){var a=o&~r;0!==a?i=ut(a):0!==(s&=o)&&(i=ut(s))}else 0!==(o=n&~r)?i=ut(o):0!==s&&(i=ut(s));if(0===i)return 0;if(0!==t&&t!==i&&0===(t&r)&&((r=i&-i)>=(s=t&-t)||16===r&&0!==(4194240&s)))return t;if(0!==(4&i)&&(i|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=i;0<t;)r=1<<(n=31-ot(t)),i|=e[n],t&=~r;return i}function ft(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function gt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function mt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function vt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function yt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var i=31-ot(n),r=1<<i;r&t|e[i]&t&&(e[i]|=t),n&=~r}}var wt=0;function bt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var Ot,kt,St,xt,Tt,Ct=!1,Et=[],_t=null,At=null,Pt=null,Nt=new Map,It=new Map,Rt=[],Dt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Mt(e,t){switch(e){case"focusin":case"focusout":_t=null;break;case"dragenter":case"dragleave":At=null;break;case"mouseover":case"mouseout":Pt=null;break;case"pointerover":case"pointerout":Nt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":It.delete(t.pointerId)}}function Lt(e,t,n,i,r,s){return null===e||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:i,nativeEvent:s,targetContainers:[r]},null!==t&&(null!==(t=wr(t))&&kt(t)),e):(e.eventSystemFlags|=i,t=e.targetContainers,null!==r&&-1===t.indexOf(r)&&t.push(r),e)}function Qt(e){var t=yr(e.target);if(null!==t){var n=Fe(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=qe(n)))return e.blockedOn=t,void Tt(e.priority,(function(){St(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function zt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Gt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=wr(n))&&kt(t),e.blockedOn=n,!1;var i=new(n=e.nativeEvent).constructor(n.type,n);be=i,n.target.dispatchEvent(i),be=null,t.shift()}return!0}function jt(e,t,n){zt(e)&&n.delete(t)}function Ut(){Ct=!1,null!==_t&&zt(_t)&&(_t=null),null!==At&&zt(At)&&(At=null),null!==Pt&&zt(Pt)&&(Pt=null),Nt.forEach(jt),It.forEach(jt)}function Vt(e,t){e.blockedOn===t&&(e.blockedOn=null,Ct||(Ct=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,Ut)))}function Ft(e){function t(t){return Vt(t,e)}if(0<Et.length){Vt(Et[0],e);for(var n=1;n<Et.length;n++){var i=Et[n];i.blockedOn===e&&(i.blockedOn=null)}}for(null!==_t&&Vt(_t,e),null!==At&&Vt(At,e),null!==Pt&&Vt(Pt,e),Nt.forEach(t),It.forEach(t),n=0;n<Rt.length;n++)(i=Rt[n]).blockedOn===e&&(i.blockedOn=null);for(;0<Rt.length&&null===(n=Rt[0]).blockedOn;)Qt(n),null===n.blockedOn&&Rt.shift()}var qt=b.ReactCurrentBatchConfig,Bt=!0;function Wt(e,t,n,i){var r=wt,s=qt.transition;qt.transition=null;try{wt=1,$t(e,t,n,i)}finally{wt=r,qt.transition=s}}function Ht(e,t,n,i){var r=wt,s=qt.transition;qt.transition=null;try{wt=4,$t(e,t,n,i)}finally{wt=r,qt.transition=s}}function $t(e,t,n,i){if(Bt){var r=Gt(e,t,n,i);if(null===r)Bi(e,t,i,Xt,n),Mt(e,i);else if(function(e,t,n,i,r){switch(t){case"focusin":return _t=Lt(_t,e,t,n,i,r),!0;case"dragenter":return At=Lt(At,e,t,n,i,r),!0;case"mouseover":return Pt=Lt(Pt,e,t,n,i,r),!0;case"pointerover":var s=r.pointerId;return Nt.set(s,Lt(Nt.get(s)||null,e,t,n,i,r)),!0;case"gotpointercapture":return s=r.pointerId,It.set(s,Lt(It.get(s)||null,e,t,n,i,r)),!0}return!1}(r,e,t,n,i))i.stopPropagation();else if(Mt(e,i),4&t&&-1<Dt.indexOf(e)){for(;null!==r;){var s=wr(r);if(null!==s&&Ot(s),null===(s=Gt(e,t,n,i))&&Bi(e,t,i,Xt,n),s===r)break;r=s}null!==r&&i.stopPropagation()}else Bi(e,t,i,null,n)}}var Xt=null;function Gt(e,t,n,i){if(Xt=null,null!==(e=yr(e=Oe(i))))if(null===(t=Fe(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=qe(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Xt=e,null}function Kt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Je()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case it:return 536870912;default:return 16}default:return 16}}var Yt=null,Jt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Jt,i=n.length,r="value"in Yt?Yt.value:Yt.textContent,s=r.length;for(e=0;e<i&&n[e]===r[e];e++);var o=i-e;for(t=1;t<=o&&n[i-t]===r[s-t];t++);return Zt=r.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function sn(e){function t(t,n,i,r,s){for(var o in this._reactName=t,this._targetInst=i,this.type=n,this.nativeEvent=r,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(r):r[o]);return this.isDefaultPrevented=(null!=r.defaultPrevented?r.defaultPrevented:!1===r.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return Q(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,an,ln,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},hn=sn(cn),un=Q({},cn,{view:0,detail:0}),dn=sn(un),fn=Q({},un,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Tn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(on=e.screenX-ln.screenX,an=e.screenY-ln.screenY):an=on=0,ln=e),on)},movementY:function(e){return"movementY"in e?e.movementY:an}}),pn=sn(fn),gn=sn(Q({},fn,{dataTransfer:0})),mn=sn(Q({},un,{relatedTarget:0})),vn=sn(Q({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),yn=Q({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),wn=sn(yn),bn=sn(Q({},cn,{data:0})),On={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},kn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Sn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function xn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Sn[e])&&!!t[e]}function Tn(){return xn}var Cn=Q({},un,{key:function(e){if(e.key){var t=On[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?kn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Tn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),En=sn(Cn),_n=sn(Q({},fn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),An=sn(Q({},un,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Tn})),Pn=sn(Q({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Nn=Q({},fn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),In=sn(Nn),Rn=[9,13,27,32],Dn=h&&"CompositionEvent"in window,Mn=null;h&&"documentMode"in document&&(Mn=document.documentMode);var Ln=h&&"TextEvent"in window&&!Mn,Qn=h&&(!Dn||Mn&&8<Mn&&11>=Mn),zn=String.fromCharCode(32),jn=!1;function Un(e,t){switch(e){case"keyup":return-1!==Rn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Vn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Fn=!1;var qn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Bn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!qn[e.type]:"textarea"===t}function Wn(e,t,n,i){Ce(i),0<(t=Hi(t,"onChange")).length&&(n=new hn("onChange","change",null,n,i),e.push({event:n,listeners:t}))}var Hn=null,$n=null;function Xn(e){zi(e,0)}function Gn(e){if($(br(e)))return e}function Kn(e,t){if("change"===e)return t}var Yn=!1;if(h){var Jn;if(h){var Zn="oninput"in document;if(!Zn){var ei=document.createElement("div");ei.setAttribute("oninput","return;"),Zn="function"===typeof ei.oninput}Jn=Zn}else Jn=!1;Yn=Jn&&(!document.documentMode||9<document.documentMode)}function ti(){Hn&&(Hn.detachEvent("onpropertychange",ni),$n=Hn=null)}function ni(e){if("value"===e.propertyName&&Gn($n)){var t=[];Wn(t,$n,e,Oe(e)),Ne(Xn,t)}}function ii(e,t,n){"focusin"===e?(ti(),$n=n,(Hn=t).attachEvent("onpropertychange",ni)):"focusout"===e&&ti()}function ri(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Gn($n)}function si(e,t){if("click"===e)return Gn(t)}function oi(e,t){if("input"===e||"change"===e)return Gn(t)}var ai="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function li(e,t){if(ai(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!u.call(t,r)||!ai(e[r],t[r]))return!1}return!0}function ci(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function hi(e,t){var n,i=ci(e);for(e=0;i;){if(3===i.nodeType){if(n=e+i.textContent.length,e<=t&&n>=t)return{node:i,offset:t-e};e=n}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=ci(i)}}function ui(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?ui(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function di(){for(var e=window,t=X();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(i){n=!1}if(!n)break;t=X((e=t.contentWindow).document)}return t}function fi(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pi(e){var t=di(),n=e.focusedElem,i=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&ui(n.ownerDocument.documentElement,n)){if(null!==i&&fi(n))if(t=i.start,void 0===(e=i.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var r=n.textContent.length,s=Math.min(i.start,r);i=void 0===i.end?s:Math.min(i.end,r),!e.extend&&s>i&&(r=i,i=s,s=r),r=hi(n,s);var o=hi(n,i);r&&o&&(1!==e.rangeCount||e.anchorNode!==r.node||e.anchorOffset!==r.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(r.node,r.offset),e.removeAllRanges(),s>i?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var gi=h&&"documentMode"in document&&11>=document.documentMode,mi=null,vi=null,yi=null,wi=!1;function bi(e,t,n){var i=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;wi||null==mi||mi!==X(i)||("selectionStart"in(i=mi)&&fi(i)?i={start:i.selectionStart,end:i.selectionEnd}:i={anchorNode:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset},yi&&li(yi,i)||(yi=i,0<(i=Hi(vi,"onSelect")).length&&(t=new hn("onSelect","select",null,t,n),e.push({event:t,listeners:i}),t.target=mi)))}function Oi(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var ki={animationend:Oi("Animation","AnimationEnd"),animationiteration:Oi("Animation","AnimationIteration"),animationstart:Oi("Animation","AnimationStart"),transitionend:Oi("Transition","TransitionEnd")},Si={},xi={};function Ti(e){if(Si[e])return Si[e];if(!ki[e])return e;var t,n=ki[e];for(t in n)if(n.hasOwnProperty(t)&&t in xi)return Si[e]=n[t];return e}h&&(xi=document.createElement("div").style,"AnimationEvent"in window||(delete ki.animationend.animation,delete ki.animationiteration.animation,delete ki.animationstart.animation),"TransitionEvent"in window||delete ki.transitionend.transition);var Ci=Ti("animationend"),Ei=Ti("animationiteration"),_i=Ti("animationstart"),Ai=Ti("transitionend"),Pi=new Map,Ni="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ii(e,t){Pi.set(e,t),l(t,[e])}for(var Ri=0;Ri<Ni.length;Ri++){var Di=Ni[Ri];Ii(Di.toLowerCase(),"on"+(Di[0].toUpperCase()+Di.slice(1)))}Ii(Ci,"onAnimationEnd"),Ii(Ei,"onAnimationIteration"),Ii(_i,"onAnimationStart"),Ii("dblclick","onDoubleClick"),Ii("focusin","onFocus"),Ii("focusout","onBlur"),Ii(Ai,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Mi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Li=new Set("cancel close invalid load scroll toggle".split(" ").concat(Mi));function Qi(e,t,n){var i=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,i,r,o,a,l,c){if(Ve.apply(this,arguments),Le){if(!Le)throw Error(s(198));var h=Qe;Le=!1,Qe=null,ze||(ze=!0,je=h)}}(i,t,void 0,e),e.currentTarget=null}function zi(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var i=e[n],r=i.event;i=i.listeners;e:{var s=void 0;if(t)for(var o=i.length-1;0<=o;o--){var a=i[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&r.isPropagationStopped())break e;Qi(r,a,c),s=l}else for(o=0;o<i.length;o++){if(l=(a=i[o]).instance,c=a.currentTarget,a=a.listener,l!==s&&r.isPropagationStopped())break e;Qi(r,a,c),s=l}}}if(ze)throw e=je,ze=!1,je=null,e}function ji(e,t){var n=t[gr];void 0===n&&(n=t[gr]=new Set);var i=e+"__bubble";n.has(i)||(qi(t,e,2,!1),n.add(i))}function Ui(e,t,n){var i=0;t&&(i|=4),qi(n,e,i,t)}var Vi="_reactListening"+Math.random().toString(36).slice(2);function Fi(e){if(!e[Vi]){e[Vi]=!0,o.forEach((function(t){"selectionchange"!==t&&(Li.has(t)||Ui(t,!1,e),Ui(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Vi]||(t[Vi]=!0,Ui("selectionchange",!1,t))}}function qi(e,t,n,i){switch(Kt(t)){case 1:var r=Wt;break;case 4:r=Ht;break;default:r=$t}n=r.bind(null,t,n,e),r=void 0,!Re||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(r=!0),i?void 0!==r?e.addEventListener(t,n,{capture:!0,passive:r}):e.addEventListener(t,n,!0):void 0!==r?e.addEventListener(t,n,{passive:r}):e.addEventListener(t,n,!1)}function Bi(e,t,n,i,r){var s=i;if(0===(1&t)&&0===(2&t)&&null!==i)e:for(;;){if(null===i)return;var o=i.tag;if(3===o||4===o){var a=i.stateNode.containerInfo;if(a===r||8===a.nodeType&&a.parentNode===r)break;if(4===o)for(o=i.return;null!==o;){var l=o.tag;if((3===l||4===l)&&((l=o.stateNode.containerInfo)===r||8===l.nodeType&&l.parentNode===r))return;o=o.return}for(;null!==a;){if(null===(o=yr(a)))return;if(5===(l=o.tag)||6===l){i=s=o;continue e}a=a.parentNode}}i=i.return}Ne((function(){var i=s,r=Oe(n),o=[];e:{var a=Pi.get(e);if(void 0!==a){var l=hn,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=En;break;case"focusin":c="focus",l=mn;break;case"focusout":c="blur",l=mn;break;case"beforeblur":case"afterblur":l=mn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=gn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=An;break;case Ci:case Ei:case _i:l=vn;break;case Ai:l=Pn;break;case"scroll":l=dn;break;case"wheel":l=In;break;case"copy":case"cut":case"paste":l=wn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=_n}var h=0!==(4&t),u=!h&&"scroll"===e,d=h?null!==a?a+"Capture":null:a;h=[];for(var f,p=i;null!==p;){var g=(f=p).stateNode;if(5===f.tag&&null!==g&&(f=g,null!==d&&(null!=(g=Ie(p,d))&&h.push(Wi(p,g,f)))),u)break;p=p.return}0<h.length&&(a=new l(a,c,null,n,r),o.push({event:a,listeners:h}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(a="mouseover"===e||"pointerover"===e)||n===be||!(c=n.relatedTarget||n.fromElement)||!yr(c)&&!c[pr])&&(l||a)&&(a=r.window===r?r:(a=r.ownerDocument)?a.defaultView||a.parentWindow:window,l?(l=i,null!==(c=(c=n.relatedTarget||n.toElement)?yr(c):null)&&(c!==(u=Fe(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=i),l!==c)){if(h=pn,g="onMouseLeave",d="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(h=_n,g="onPointerLeave",d="onPointerEnter",p="pointer"),u=null==l?a:br(l),f=null==c?a:br(c),(a=new h(g,p+"leave",l,n,r)).target=u,a.relatedTarget=f,g=null,yr(r)===i&&((h=new h(d,p+"enter",c,n,r)).target=f,h.relatedTarget=u,g=h),u=g,l&&c)e:{for(d=c,p=0,f=h=l;f;f=$i(f))p++;for(f=0,g=d;g;g=$i(g))f++;for(;0<p-f;)h=$i(h),p--;for(;0<f-p;)d=$i(d),f--;for(;p--;){if(h===d||null!==d&&h===d.alternate)break e;h=$i(h),d=$i(d)}h=null}else h=null;null!==l&&Xi(o,a,l,h,!1),null!==c&&null!==u&&Xi(o,u,c,h,!0)}if("select"===(l=(a=i?br(i):window).nodeName&&a.nodeName.toLowerCase())||"input"===l&&"file"===a.type)var m=Kn;else if(Bn(a))if(Yn)m=oi;else{m=ri;var v=ii}else(l=a.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===a.type||"radio"===a.type)&&(m=si);switch(m&&(m=m(e,i))?Wn(o,m,n,r):(v&&v(e,a,i),"focusout"===e&&(v=a._wrapperState)&&v.controlled&&"number"===a.type&&ee(a,"number",a.value)),v=i?br(i):window,e){case"focusin":(Bn(v)||"true"===v.contentEditable)&&(mi=v,vi=i,yi=null);break;case"focusout":yi=vi=mi=null;break;case"mousedown":wi=!0;break;case"contextmenu":case"mouseup":case"dragend":wi=!1,bi(o,n,r);break;case"selectionchange":if(gi)break;case"keydown":case"keyup":bi(o,n,r)}var y;if(Dn)e:{switch(e){case"compositionstart":var w="onCompositionStart";break e;case"compositionend":w="onCompositionEnd";break e;case"compositionupdate":w="onCompositionUpdate";break e}w=void 0}else Fn?Un(e,n)&&(w="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(w="onCompositionStart");w&&(Qn&&"ko"!==n.locale&&(Fn||"onCompositionStart"!==w?"onCompositionEnd"===w&&Fn&&(y=en()):(Jt="value"in(Yt=r)?Yt.value:Yt.textContent,Fn=!0)),0<(v=Hi(i,w)).length&&(w=new bn(w,e,null,n,r),o.push({event:w,listeners:v}),y?w.data=y:null!==(y=Vn(n))&&(w.data=y))),(y=Ln?function(e,t){switch(e){case"compositionend":return Vn(t);case"keypress":return 32!==t.which?null:(jn=!0,zn);case"textInput":return(e=t.data)===zn&&jn?null:e;default:return null}}(e,n):function(e,t){if(Fn)return"compositionend"===e||!Dn&&Un(e,t)?(e=en(),Zt=Jt=Yt=null,Fn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Qn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(i=Hi(i,"onBeforeInput")).length&&(r=new bn("onBeforeInput","beforeinput",null,n,r),o.push({event:r,listeners:i}),r.data=y))}zi(o,t)}))}function Wi(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Hi(e,t){for(var n=t+"Capture",i=[];null!==e;){var r=e,s=r.stateNode;5===r.tag&&null!==s&&(r=s,null!=(s=Ie(e,n))&&i.unshift(Wi(e,s,r)),null!=(s=Ie(e,t))&&i.push(Wi(e,s,r))),e=e.return}return i}function $i(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Xi(e,t,n,i,r){for(var s=t._reactName,o=[];null!==n&&n!==i;){var a=n,l=a.alternate,c=a.stateNode;if(null!==l&&l===i)break;5===a.tag&&null!==c&&(a=c,r?null!=(l=Ie(n,s))&&o.unshift(Wi(n,l,a)):r||null!=(l=Ie(n,s))&&o.push(Wi(n,l,a))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Gi=/\r\n?/g,Ki=/\u0000|\uFFFD/g;function Yi(e){return("string"===typeof e?e:""+e).replace(Gi,"\n").replace(Ki,"")}function Ji(e,t,n){if(t=Yi(t),Yi(e)!==t&&n)throw Error(s(425))}function Zi(){}var er=null,tr=null;function nr(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ir="function"===typeof setTimeout?setTimeout:void 0,rr="function"===typeof clearTimeout?clearTimeout:void 0,sr="function"===typeof Promise?Promise:void 0,or="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof sr?function(e){return sr.resolve(null).then(e).catch(ar)}:ir;function ar(e){setTimeout((function(){throw e}))}function lr(e,t){var n=t,i=0;do{var r=n.nextSibling;if(e.removeChild(n),r&&8===r.nodeType)if("/$"===(n=r.data)){if(0===i)return e.removeChild(r),void Ft(t);i--}else"$"!==n&&"$?"!==n&&"$!"!==n||i++;n=r}while(n);Ft(t)}function cr(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function hr(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var ur=Math.random().toString(36).slice(2),dr="__reactFiber$"+ur,fr="__reactProps$"+ur,pr="__reactContainer$"+ur,gr="__reactEvents$"+ur,mr="__reactListeners$"+ur,vr="__reactHandles$"+ur;function yr(e){var t=e[dr];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pr]||n[dr]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=hr(e);null!==e;){if(n=e[dr])return n;e=hr(e)}return t}n=(e=n).parentNode}return null}function wr(e){return!(e=e[dr]||e[pr])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function br(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(s(33))}function Or(e){return e[fr]||null}var kr=[],Sr=-1;function xr(e){return{current:e}}function Tr(e){0>Sr||(e.current=kr[Sr],kr[Sr]=null,Sr--)}function Cr(e,t){Sr++,kr[Sr]=e.current,e.current=t}var Er={},_r=xr(Er),Ar=xr(!1),Pr=Er;function Nr(e,t){var n=e.type.contextTypes;if(!n)return Er;var i=e.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===t)return i.__reactInternalMemoizedMaskedChildContext;var r,s={};for(r in n)s[r]=t[r];return i&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Ir(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Rr(){Tr(Ar),Tr(_r)}function Dr(e,t,n){if(_r.current!==Er)throw Error(s(168));Cr(_r,t),Cr(Ar,n)}function Mr(e,t,n){var i=e.stateNode;if(t=t.childContextTypes,"function"!==typeof i.getChildContext)return n;for(var r in i=i.getChildContext())if(!(r in t))throw Error(s(108,q(e)||"Unknown",r));return Q({},n,i)}function Lr(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Er,Pr=_r.current,Cr(_r,e),Cr(Ar,Ar.current),!0}function Qr(e,t,n){var i=e.stateNode;if(!i)throw Error(s(169));n?(e=Mr(e,t,Pr),i.__reactInternalMemoizedMergedChildContext=e,Tr(Ar),Tr(_r),Cr(_r,e)):Tr(Ar),Cr(Ar,n)}var zr=null,jr=!1,Ur=!1;function Vr(e){null===zr?zr=[e]:zr.push(e)}function Fr(){if(!Ur&&null!==zr){Ur=!0;var e=0,t=wt;try{var n=zr;for(wt=1;e<n.length;e++){var i=n[e];do{i=i(!0)}while(null!==i)}zr=null,jr=!1}catch(r){throw null!==zr&&(zr=zr.slice(e+1)),$e(Ze,Fr),r}finally{wt=t,Ur=!1}}return null}var qr=[],Br=0,Wr=null,Hr=0,$r=[],Xr=0,Gr=null,Kr=1,Yr="";function Jr(e,t){qr[Br++]=Hr,qr[Br++]=Wr,Wr=e,Hr=t}function Zr(e,t,n){$r[Xr++]=Kr,$r[Xr++]=Yr,$r[Xr++]=Gr,Gr=e;var i=Kr;e=Yr;var r=32-ot(i)-1;i&=~(1<<r),n+=1;var s=32-ot(t)+r;if(30<s){var o=r-r%5;s=(i&(1<<o)-1).toString(32),i>>=o,r-=o,Kr=1<<32-ot(t)+r|n<<r|i,Yr=s+e}else Kr=1<<s|n<<r|i,Yr=e}function es(e){null!==e.return&&(Jr(e,1),Zr(e,1,0))}function ts(e){for(;e===Wr;)Wr=qr[--Br],qr[Br]=null,Hr=qr[--Br],qr[Br]=null;for(;e===Gr;)Gr=$r[--Xr],$r[Xr]=null,Yr=$r[--Xr],$r[Xr]=null,Kr=$r[--Xr],$r[Xr]=null}var ns=null,is=null,rs=!1,ss=null;function os(e,t){var n=Rc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function as(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ns=e,is=cr(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ns=e,is=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Gr?{id:Kr,overflow:Yr}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Rc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,ns=e,is=null,!0);default:return!1}}function ls(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function cs(e){if(rs){var t=is;if(t){var n=t;if(!as(e,t)){if(ls(e))throw Error(s(418));t=cr(n.nextSibling);var i=ns;t&&as(e,t)?os(i,n):(e.flags=-4097&e.flags|2,rs=!1,ns=e)}}else{if(ls(e))throw Error(s(418));e.flags=-4097&e.flags|2,rs=!1,ns=e}}}function hs(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ns=e}function us(e){if(e!==ns)return!1;if(!rs)return hs(e),rs=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!nr(e.type,e.memoizedProps)),t&&(t=is)){if(ls(e))throw ds(),Error(s(418));for(;t;)os(e,t),t=cr(t.nextSibling)}if(hs(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){is=cr(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}is=null}}else is=ns?cr(e.stateNode.nextSibling):null;return!0}function ds(){for(var e=is;e;)e=cr(e.nextSibling)}function fs(){is=ns=null,rs=!1}function ps(e){null===ss?ss=[e]:ss.push(e)}var gs=b.ReactCurrentBatchConfig;function ms(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(s(309));var i=n.stateNode}if(!i)throw Error(s(147,e));var r=i,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=r.refs;null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(s(284));if(!n._owner)throw Error(s(290,e))}return e}function vs(e,t){throw e=Object.prototype.toString.call(t),Error(s(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function ys(e){return(0,e._init)(e._payload)}function ws(e){function t(t,n){if(e){var i=t.deletions;null===i?(t.deletions=[n],t.flags|=16):i.push(n)}}function n(n,i){if(!e)return null;for(;null!==i;)t(n,i),i=i.sibling;return null}function i(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function r(e,t){return(e=Mc(e,t)).index=0,e.sibling=null,e}function o(t,n,i){return t.index=i,e?null!==(i=t.alternate)?(i=i.index)<n?(t.flags|=2,n):i:(t.flags|=2,n):(t.flags|=1048576,n)}function a(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,i){return null===t||6!==t.tag?((t=jc(n,e.mode,i)).return=e,t):((t=r(t,n)).return=e,t)}function c(e,t,n,i){var s=n.type;return s===S?u(e,t,n.props.children,i,n.key):null!==t&&(t.elementType===s||"object"===typeof s&&null!==s&&s.$$typeof===I&&ys(s)===t.type)?((i=r(t,n.props)).ref=ms(e,t,n),i.return=e,i):((i=Lc(n.type,n.key,n.props,null,e.mode,i)).ref=ms(e,t,n),i.return=e,i)}function h(e,t,n,i){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Uc(n,e.mode,i)).return=e,t):((t=r(t,n.children||[])).return=e,t)}function u(e,t,n,i,s){return null===t||7!==t.tag?((t=Qc(n,e.mode,i,s)).return=e,t):((t=r(t,n)).return=e,t)}function d(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=jc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case O:return(n=Lc(t.type,t.key,t.props,null,e.mode,n)).ref=ms(e,null,t),n.return=e,n;case k:return(t=Uc(t,e.mode,n)).return=e,t;case I:return d(e,(0,t._init)(t._payload),n)}if(te(t)||M(t))return(t=Qc(t,e.mode,n,null)).return=e,t;vs(e,t)}return null}function f(e,t,n,i){var r=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==r?null:l(e,t,""+n,i);if("object"===typeof n&&null!==n){switch(n.$$typeof){case O:return n.key===r?c(e,t,n,i):null;case k:return n.key===r?h(e,t,n,i):null;case I:return f(e,t,(r=n._init)(n._payload),i)}if(te(n)||M(n))return null!==r?null:u(e,t,n,i,null);vs(e,n)}return null}function p(e,t,n,i,r){if("string"===typeof i&&""!==i||"number"===typeof i)return l(t,e=e.get(n)||null,""+i,r);if("object"===typeof i&&null!==i){switch(i.$$typeof){case O:return c(t,e=e.get(null===i.key?n:i.key)||null,i,r);case k:return h(t,e=e.get(null===i.key?n:i.key)||null,i,r);case I:return p(e,t,n,(0,i._init)(i._payload),r)}if(te(i)||M(i))return u(t,e=e.get(n)||null,i,r,null);vs(t,i)}return null}function g(r,s,a,l){for(var c=null,h=null,u=s,g=s=0,m=null;null!==u&&g<a.length;g++){u.index>g?(m=u,u=null):m=u.sibling;var v=f(r,u,a[g],l);if(null===v){null===u&&(u=m);break}e&&u&&null===v.alternate&&t(r,u),s=o(v,s,g),null===h?c=v:h.sibling=v,h=v,u=m}if(g===a.length)return n(r,u),rs&&Jr(r,g),c;if(null===u){for(;g<a.length;g++)null!==(u=d(r,a[g],l))&&(s=o(u,s,g),null===h?c=u:h.sibling=u,h=u);return rs&&Jr(r,g),c}for(u=i(r,u);g<a.length;g++)null!==(m=p(u,r,g,a[g],l))&&(e&&null!==m.alternate&&u.delete(null===m.key?g:m.key),s=o(m,s,g),null===h?c=m:h.sibling=m,h=m);return e&&u.forEach((function(e){return t(r,e)})),rs&&Jr(r,g),c}function m(r,a,l,c){var h=M(l);if("function"!==typeof h)throw Error(s(150));if(null==(l=h.call(l)))throw Error(s(151));for(var u=h=null,g=a,m=a=0,v=null,y=l.next();null!==g&&!y.done;m++,y=l.next()){g.index>m?(v=g,g=null):v=g.sibling;var w=f(r,g,y.value,c);if(null===w){null===g&&(g=v);break}e&&g&&null===w.alternate&&t(r,g),a=o(w,a,m),null===u?h=w:u.sibling=w,u=w,g=v}if(y.done)return n(r,g),rs&&Jr(r,m),h;if(null===g){for(;!y.done;m++,y=l.next())null!==(y=d(r,y.value,c))&&(a=o(y,a,m),null===u?h=y:u.sibling=y,u=y);return rs&&Jr(r,m),h}for(g=i(r,g);!y.done;m++,y=l.next())null!==(y=p(g,r,m,y.value,c))&&(e&&null!==y.alternate&&g.delete(null===y.key?m:y.key),a=o(y,a,m),null===u?h=y:u.sibling=y,u=y);return e&&g.forEach((function(e){return t(r,e)})),rs&&Jr(r,m),h}return function e(i,s,o,l){if("object"===typeof o&&null!==o&&o.type===S&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case O:e:{for(var c=o.key,h=s;null!==h;){if(h.key===c){if((c=o.type)===S){if(7===h.tag){n(i,h.sibling),(s=r(h,o.props.children)).return=i,i=s;break e}}else if(h.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===I&&ys(c)===h.type){n(i,h.sibling),(s=r(h,o.props)).ref=ms(i,h,o),s.return=i,i=s;break e}n(i,h);break}t(i,h),h=h.sibling}o.type===S?((s=Qc(o.props.children,i.mode,l,o.key)).return=i,i=s):((l=Lc(o.type,o.key,o.props,null,i.mode,l)).ref=ms(i,s,o),l.return=i,i=l)}return a(i);case k:e:{for(h=o.key;null!==s;){if(s.key===h){if(4===s.tag&&s.stateNode.containerInfo===o.containerInfo&&s.stateNode.implementation===o.implementation){n(i,s.sibling),(s=r(s,o.children||[])).return=i,i=s;break e}n(i,s);break}t(i,s),s=s.sibling}(s=Uc(o,i.mode,l)).return=i,i=s}return a(i);case I:return e(i,s,(h=o._init)(o._payload),l)}if(te(o))return g(i,s,o,l);if(M(o))return m(i,s,o,l);vs(i,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==s&&6===s.tag?(n(i,s.sibling),(s=r(s,o)).return=i,i=s):(n(i,s),(s=jc(o,i.mode,l)).return=i,i=s),a(i)):n(i,s)}}var bs=ws(!0),Os=ws(!1),ks=xr(null),Ss=null,xs=null,Ts=null;function Cs(){Ts=xs=Ss=null}function Es(e){var t=ks.current;Tr(ks),e._currentValue=t}function _s(e,t,n){for(;null!==e;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==i&&(i.childLanes|=t)):null!==i&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===n)break;e=e.return}}function As(e,t){Ss=e,Ts=xs=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(Oa=!0),e.firstContext=null)}function Ps(e){var t=e._currentValue;if(Ts!==e)if(e={context:e,memoizedValue:t,next:null},null===xs){if(null===Ss)throw Error(s(308));xs=e,Ss.dependencies={lanes:0,firstContext:e}}else xs=xs.next=e;return t}var Ns=null;function Is(e){null===Ns?Ns=[e]:Ns.push(e)}function Rs(e,t,n,i){var r=t.interleaved;return null===r?(n.next=n,Is(t)):(n.next=r.next,r.next=n),t.interleaved=n,Ds(e,i)}function Ds(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Ms=!1;function Ls(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Qs(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function zs(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function js(e,t,n){var i=e.updateQueue;if(null===i)return null;if(i=i.shared,0!==(2&Pl)){var r=i.pending;return null===r?t.next=t:(t.next=r.next,r.next=t),i.pending=t,Ds(e,n)}return null===(r=i.interleaved)?(t.next=t,Is(i)):(t.next=r.next,r.next=t),i.interleaved=t,Ds(e,n)}function Us(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var i=t.lanes;n|=i&=e.pendingLanes,t.lanes=n,yt(e,n)}}function Vs(e,t){var n=e.updateQueue,i=e.alternate;if(null!==i&&n===(i=i.updateQueue)){var r=null,s=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===s?r=s=o:s=s.next=o,n=n.next}while(null!==n);null===s?r=s=t:s=s.next=t}else r=s=t;return n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:i.shared,effects:i.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Fs(e,t,n,i){var r=e.updateQueue;Ms=!1;var s=r.firstBaseUpdate,o=r.lastBaseUpdate,a=r.shared.pending;if(null!==a){r.shared.pending=null;var l=a,c=l.next;l.next=null,null===o?s=c:o.next=c,o=l;var h=e.alternate;null!==h&&((a=(h=h.updateQueue).lastBaseUpdate)!==o&&(null===a?h.firstBaseUpdate=c:a.next=c,h.lastBaseUpdate=l))}if(null!==s){var u=r.baseState;for(o=0,h=c=l=null,a=s;;){var d=a.lane,f=a.eventTime;if((i&d)===d){null!==h&&(h=h.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=e,g=a;switch(d=t,f=n,g.tag){case 1:if("function"===typeof(p=g.payload)){u=p.call(f,u,d);break e}u=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(d="function"===typeof(p=g.payload)?p.call(f,u,d):p)||void 0===d)break e;u=Q({},u,d);break e;case 2:Ms=!0}}null!==a.callback&&0!==a.lane&&(e.flags|=64,null===(d=r.effects)?r.effects=[a]:d.push(a))}else f={eventTime:f,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===h?(c=h=f,l=u):h=h.next=f,o|=d;if(null===(a=a.next)){if(null===(a=r.shared.pending))break;a=(d=a).next,d.next=null,r.lastBaseUpdate=d,r.shared.pending=null}}if(null===h&&(l=u),r.baseState=l,r.firstBaseUpdate=c,r.lastBaseUpdate=h,null!==(t=r.shared.interleaved)){r=t;do{o|=r.lane,r=r.next}while(r!==t)}else null===s&&(r.shared.lanes=0);zl|=o,e.lanes=o,e.memoizedState=u}}function qs(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var i=e[t],r=i.callback;if(null!==r){if(i.callback=null,i=n,"function"!==typeof r)throw Error(s(191,r));r.call(i)}}}var Bs={},Ws=xr(Bs),Hs=xr(Bs),$s=xr(Bs);function Xs(e){if(e===Bs)throw Error(s(174));return e}function Gs(e,t){switch(Cr($s,t),Cr(Hs,e),Cr(Ws,Bs),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Tr(Ws),Cr(Ws,t)}function Ks(){Tr(Ws),Tr(Hs),Tr($s)}function Ys(e){Xs($s.current);var t=Xs(Ws.current),n=le(t,e.type);t!==n&&(Cr(Hs,e),Cr(Ws,n))}function Js(e){Hs.current===e&&(Tr(Ws),Tr(Hs))}var Zs=xr(0);function eo(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var to=[];function no(){for(var e=0;e<to.length;e++)to[e]._workInProgressVersionPrimary=null;to.length=0}var io=b.ReactCurrentDispatcher,ro=b.ReactCurrentBatchConfig,so=0,oo=null,ao=null,co=null,ho=!1,uo=!1,fo=0,po=0;function go(){throw Error(s(321))}function mo(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ai(e[n],t[n]))return!1;return!0}function vo(e,t,n,i,r,o){if(so=o,oo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,io.current=null===e||null===e.memoizedState?ta:na,e=n(i,r),uo){o=0;do{if(uo=!1,fo=0,25<=o)throw Error(s(301));o+=1,co=ao=null,t.updateQueue=null,io.current=ia,e=n(i,r)}while(uo)}if(io.current=ea,t=null!==ao&&null!==ao.next,so=0,co=ao=oo=null,ho=!1,t)throw Error(s(300));return e}function yo(){var e=0!==fo;return fo=0,e}function wo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===co?oo.memoizedState=co=e:co=co.next=e,co}function bo(){if(null===ao){var e=oo.alternate;e=null!==e?e.memoizedState:null}else e=ao.next;var t=null===co?oo.memoizedState:co.next;if(null!==t)co=t,ao=e;else{if(null===e)throw Error(s(310));e={memoizedState:(ao=e).memoizedState,baseState:ao.baseState,baseQueue:ao.baseQueue,queue:ao.queue,next:null},null===co?oo.memoizedState=co=e:co=co.next=e}return co}function Oo(e,t){return"function"===typeof t?t(e):t}function ko(e){var t=bo(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var i=ao,r=i.baseQueue,o=n.pending;if(null!==o){if(null!==r){var a=r.next;r.next=o.next,o.next=a}i.baseQueue=r=o,n.pending=null}if(null!==r){o=r.next,i=i.baseState;var l=a=null,c=null,h=o;do{var u=h.lane;if((so&u)===u)null!==c&&(c=c.next={lane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),i=h.hasEagerState?h.eagerState:e(i,h.action);else{var d={lane:u,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null};null===c?(l=c=d,a=i):c=c.next=d,oo.lanes|=u,zl|=u}h=h.next}while(null!==h&&h!==o);null===c?a=i:c.next=l,ai(i,t.memoizedState)||(Oa=!0),t.memoizedState=i,t.baseState=a,t.baseQueue=c,n.lastRenderedState=i}if(null!==(e=n.interleaved)){r=e;do{o=r.lane,oo.lanes|=o,zl|=o,r=r.next}while(r!==e)}else null===r&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function So(e){var t=bo(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var i=n.dispatch,r=n.pending,o=t.memoizedState;if(null!==r){n.pending=null;var a=r=r.next;do{o=e(o,a.action),a=a.next}while(a!==r);ai(o,t.memoizedState)||(Oa=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,i]}function xo(){}function To(e,t){var n=oo,i=bo(),r=t(),o=!ai(i.memoizedState,r);if(o&&(i.memoizedState=r,Oa=!0),i=i.queue,Qo(_o.bind(null,n,i,e),[e]),i.getSnapshot!==t||o||null!==co&&1&co.memoizedState.tag){if(n.flags|=2048,Io(9,Eo.bind(null,n,i,r,t),void 0,null),null===Nl)throw Error(s(349));0!==(30&so)||Co(n,t,r)}return r}function Co(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=oo.updateQueue)?(t={lastEffect:null,stores:null},oo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Eo(e,t,n,i){t.value=n,t.getSnapshot=i,Ao(t)&&Po(e)}function _o(e,t,n){return n((function(){Ao(t)&&Po(e)}))}function Ao(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ai(e,n)}catch(i){return!0}}function Po(e){var t=Ds(e,1);null!==t&&rc(t,e,1,-1)}function No(e){var t=wo();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Oo,lastRenderedState:e},t.queue=e,e=e.dispatch=Ko.bind(null,oo,e),[t.memoizedState,e]}function Io(e,t,n,i){return e={tag:e,create:t,destroy:n,deps:i,next:null},null===(t=oo.updateQueue)?(t={lastEffect:null,stores:null},oo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(i=n.next,n.next=e,e.next=i,t.lastEffect=e),e}function Ro(){return bo().memoizedState}function Do(e,t,n,i){var r=wo();oo.flags|=e,r.memoizedState=Io(1|t,n,void 0,void 0===i?null:i)}function Mo(e,t,n,i){var r=bo();i=void 0===i?null:i;var s=void 0;if(null!==ao){var o=ao.memoizedState;if(s=o.destroy,null!==i&&mo(i,o.deps))return void(r.memoizedState=Io(t,n,s,i))}oo.flags|=e,r.memoizedState=Io(1|t,n,s,i)}function Lo(e,t){return Do(8390656,8,e,t)}function Qo(e,t){return Mo(2048,8,e,t)}function zo(e,t){return Mo(4,2,e,t)}function jo(e,t){return Mo(4,4,e,t)}function Uo(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Vo(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Mo(4,4,Uo.bind(null,t,e),n)}function Fo(){}function qo(e,t){var n=bo();t=void 0===t?null:t;var i=n.memoizedState;return null!==i&&null!==t&&mo(t,i[1])?i[0]:(n.memoizedState=[e,t],e)}function Bo(e,t){var n=bo();t=void 0===t?null:t;var i=n.memoizedState;return null!==i&&null!==t&&mo(t,i[1])?i[0]:(e=e(),n.memoizedState=[e,t],e)}function Wo(e,t,n){return 0===(21&so)?(e.baseState&&(e.baseState=!1,Oa=!0),e.memoizedState=n):(ai(n,t)||(n=gt(),oo.lanes|=n,zl|=n,e.baseState=!0),t)}function $o(e,t){var n=wt;wt=0!==n&&4>n?n:4,e(!0);var i=ro.transition;ro.transition={};try{e(!1),t()}finally{wt=n,ro.transition=i}}function Xo(){return bo().memoizedState}function Go(e,t,n){var i=ic(e);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},Yo(e))Jo(t,n);else if(null!==(n=Rs(e,t,n,i))){rc(n,e,i,nc()),Zo(n,t,i)}}function Ko(e,t,n){var i=ic(e),r={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(Yo(e))Jo(t,r);else{var s=e.alternate;if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var o=t.lastRenderedState,a=s(o,n);if(r.hasEagerState=!0,r.eagerState=a,ai(a,o)){var l=t.interleaved;return null===l?(r.next=r,Is(t)):(r.next=l.next,l.next=r),void(t.interleaved=r)}}catch(c){}null!==(n=Rs(e,t,r,i))&&(rc(n,e,i,r=nc()),Zo(n,t,i))}}function Yo(e){var t=e.alternate;return e===oo||null!==t&&t===oo}function Jo(e,t){uo=ho=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Zo(e,t,n){if(0!==(4194240&n)){var i=t.lanes;n|=i&=e.pendingLanes,t.lanes=n,yt(e,n)}}var ea={readContext:Ps,useCallback:go,useContext:go,useEffect:go,useImperativeHandle:go,useInsertionEffect:go,useLayoutEffect:go,useMemo:go,useReducer:go,useRef:go,useState:go,useDebugValue:go,useDeferredValue:go,useTransition:go,useMutableSource:go,useSyncExternalStore:go,useId:go,unstable_isNewReconciler:!1},ta={readContext:Ps,useCallback:function(e,t){return wo().memoizedState=[e,void 0===t?null:t],e},useContext:Ps,useEffect:Lo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Do(4194308,4,Uo.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Do(4194308,4,e,t)},useInsertionEffect:function(e,t){return Do(4,2,e,t)},useMemo:function(e,t){var n=wo();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var i=wo();return t=void 0!==n?n(t):t,i.memoizedState=i.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},i.queue=e,e=e.dispatch=Go.bind(null,oo,e),[i.memoizedState,e]},useRef:function(e){return e={current:e},wo().memoizedState=e},useState:No,useDebugValue:Fo,useDeferredValue:function(e){return wo().memoizedState=e},useTransition:function(){var e=No(!1),t=e[0];return e=$o.bind(null,e[1]),wo().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var i=oo,r=wo();if(rs){if(void 0===n)throw Error(s(407));n=n()}else{if(n=t(),null===Nl)throw Error(s(349));0!==(30&so)||Co(i,t,n)}r.memoizedState=n;var o={value:n,getSnapshot:t};return r.queue=o,Lo(_o.bind(null,i,o,e),[e]),i.flags|=2048,Io(9,Eo.bind(null,i,o,n,t),void 0,null),n},useId:function(){var e=wo(),t=Nl.identifierPrefix;if(rs){var n=Yr;t=":"+t+"R"+(n=(Kr&~(1<<32-ot(Kr)-1)).toString(32)+n),0<(n=fo++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=po++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},na={readContext:Ps,useCallback:qo,useContext:Ps,useEffect:Qo,useImperativeHandle:Vo,useInsertionEffect:zo,useLayoutEffect:jo,useMemo:Bo,useReducer:ko,useRef:Ro,useState:function(){return ko(Oo)},useDebugValue:Fo,useDeferredValue:function(e){return Wo(bo(),ao.memoizedState,e)},useTransition:function(){return[ko(Oo)[0],bo().memoizedState]},useMutableSource:xo,useSyncExternalStore:To,useId:Xo,unstable_isNewReconciler:!1},ia={readContext:Ps,useCallback:qo,useContext:Ps,useEffect:Qo,useImperativeHandle:Vo,useInsertionEffect:zo,useLayoutEffect:jo,useMemo:Bo,useReducer:So,useRef:Ro,useState:function(){return So(Oo)},useDebugValue:Fo,useDeferredValue:function(e){var t=bo();return null===ao?t.memoizedState=e:Wo(t,ao.memoizedState,e)},useTransition:function(){return[So(Oo)[0],bo().memoizedState]},useMutableSource:xo,useSyncExternalStore:To,useId:Xo,unstable_isNewReconciler:!1};function ra(e,t){if(e&&e.defaultProps){for(var n in t=Q({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function sa(e,t,n,i){n=null===(n=n(i,t=e.memoizedState))||void 0===n?t:Q({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var oa={isMounted:function(e){return!!(e=e._reactInternals)&&Fe(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var i=nc(),r=ic(e),s=zs(i,r);s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=js(e,s,r))&&(rc(t,e,r,i),Us(t,e,r))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var i=nc(),r=ic(e),s=zs(i,r);s.tag=1,s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=js(e,s,r))&&(rc(t,e,r,i),Us(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=nc(),i=ic(e),r=zs(n,i);r.tag=2,void 0!==t&&null!==t&&(r.callback=t),null!==(t=js(e,r,i))&&(rc(t,e,i,n),Us(t,e,i))}};function aa(e,t,n,i,r,s,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(i,s,o):!t.prototype||!t.prototype.isPureReactComponent||(!li(n,i)||!li(r,s))}function la(e,t,n){var i=!1,r=Er,s=t.contextType;return"object"===typeof s&&null!==s?s=Ps(s):(r=Ir(t)?Pr:_r.current,s=(i=null!==(i=t.contextTypes)&&void 0!==i)?Nr(e,r):Er),t=new t(n,s),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=oa,e.stateNode=t,t._reactInternals=e,i&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=r,e.__reactInternalMemoizedMaskedChildContext=s),t}function ca(e,t,n,i){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,i),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,i),t.state!==e&&oa.enqueueReplaceState(t,t.state,null)}function ha(e,t,n,i){var r=e.stateNode;r.props=n,r.state=e.memoizedState,r.refs={},Ls(e);var s=t.contextType;"object"===typeof s&&null!==s?r.context=Ps(s):(s=Ir(t)?Pr:_r.current,r.context=Nr(e,s)),r.state=e.memoizedState,"function"===typeof(s=t.getDerivedStateFromProps)&&(sa(e,t,s,n),r.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof r.getSnapshotBeforeUpdate||"function"!==typeof r.UNSAFE_componentWillMount&&"function"!==typeof r.componentWillMount||(t=r.state,"function"===typeof r.componentWillMount&&r.componentWillMount(),"function"===typeof r.UNSAFE_componentWillMount&&r.UNSAFE_componentWillMount(),t!==r.state&&oa.enqueueReplaceState(r,r.state,null),Fs(e,n,r,i),r.state=e.memoizedState),"function"===typeof r.componentDidMount&&(e.flags|=4194308)}function ua(e,t){try{var n="",i=t;do{n+=V(i),i=i.return}while(i);var r=n}catch(s){r="\nError generating stack: "+s.message+"\n"+s.stack}return{value:e,source:t,stack:r,digest:null}}function da(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function fa(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var pa="function"===typeof WeakMap?WeakMap:Map;function ga(e,t,n){(n=zs(-1,n)).tag=3,n.payload={element:null};var i=t.value;return n.callback=function(){Hl||(Hl=!0,$l=i),fa(0,t)},n}function ma(e,t,n){(n=zs(-1,n)).tag=3;var i=e.type.getDerivedStateFromError;if("function"===typeof i){var r=t.value;n.payload=function(){return i(r)},n.callback=function(){fa(0,t)}}var s=e.stateNode;return null!==s&&"function"===typeof s.componentDidCatch&&(n.callback=function(){fa(0,t),"function"!==typeof i&&(null===Xl?Xl=new Set([this]):Xl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function va(e,t,n){var i=e.pingCache;if(null===i){i=e.pingCache=new pa;var r=new Set;i.set(t,r)}else void 0===(r=i.get(t))&&(r=new Set,i.set(t,r));r.has(n)||(r.add(n),e=Ec.bind(null,e,t,n),t.then(e,e))}function ya(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function wa(e,t,n,i,r){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=zs(-1,1)).tag=2,js(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=r,e)}var ba=b.ReactCurrentOwner,Oa=!1;function ka(e,t,n,i){t.child=null===e?Os(t,null,n,i):bs(t,e.child,n,i)}function Sa(e,t,n,i,r){n=n.render;var s=t.ref;return As(t,r),i=vo(e,t,n,i,s,r),n=yo(),null===e||Oa?(rs&&n&&es(t),t.flags|=1,ka(e,t,i,r),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r,Ha(e,t,r))}function xa(e,t,n,i,r){if(null===e){var s=n.type;return"function"!==typeof s||Dc(s)||void 0!==s.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Lc(n.type,null,i,t,t.mode,r)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,Ta(e,t,s,i,r))}if(s=e.child,0===(e.lanes&r)){var o=s.memoizedProps;if((n=null!==(n=n.compare)?n:li)(o,i)&&e.ref===t.ref)return Ha(e,t,r)}return t.flags|=1,(e=Mc(s,i)).ref=t.ref,e.return=t,t.child=e}function Ta(e,t,n,i,r){if(null!==e){var s=e.memoizedProps;if(li(s,i)&&e.ref===t.ref){if(Oa=!1,t.pendingProps=i=s,0===(e.lanes&r))return t.lanes=e.lanes,Ha(e,t,r);0!==(131072&e.flags)&&(Oa=!0)}}return _a(e,t,n,i,r)}function Ca(e,t,n){var i=t.pendingProps,r=i.children,s=null!==e?e.memoizedState:null;if("hidden"===i.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Cr(Ml,Dl),Dl|=n;else{if(0===(1073741824&n))return e=null!==s?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Cr(Ml,Dl),Dl|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=null!==s?s.baseLanes:n,Cr(Ml,Dl),Dl|=i}else null!==s?(i=s.baseLanes|n,t.memoizedState=null):i=n,Cr(Ml,Dl),Dl|=i;return ka(e,t,r,n),t.child}function Ea(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function _a(e,t,n,i,r){var s=Ir(n)?Pr:_r.current;return s=Nr(t,s),As(t,r),n=vo(e,t,n,i,s,r),i=yo(),null===e||Oa?(rs&&i&&es(t),t.flags|=1,ka(e,t,n,r),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r,Ha(e,t,r))}function Aa(e,t,n,i,r){if(Ir(n)){var s=!0;Lr(t)}else s=!1;if(As(t,r),null===t.stateNode)Wa(e,t),la(t,n,i),ha(t,n,i,r),i=!0;else if(null===e){var o=t.stateNode,a=t.memoizedProps;o.props=a;var l=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=Ps(c):c=Nr(t,c=Ir(n)?Pr:_r.current);var h=n.getDerivedStateFromProps,u="function"===typeof h||"function"===typeof o.getSnapshotBeforeUpdate;u||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(a!==i||l!==c)&&ca(t,o,i,c),Ms=!1;var d=t.memoizedState;o.state=d,Fs(t,i,o,r),l=t.memoizedState,a!==i||d!==l||Ar.current||Ms?("function"===typeof h&&(sa(t,n,h,i),l=t.memoizedState),(a=Ms||aa(t,n,a,i,d,l,c))?(u||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=l),o.props=i,o.state=l,o.context=c,i=a):("function"===typeof o.componentDidMount&&(t.flags|=4194308),i=!1)}else{o=t.stateNode,Qs(e,t),a=t.memoizedProps,c=t.type===t.elementType?a:ra(t.type,a),o.props=c,u=t.pendingProps,d=o.context,"object"===typeof(l=n.contextType)&&null!==l?l=Ps(l):l=Nr(t,l=Ir(n)?Pr:_r.current);var f=n.getDerivedStateFromProps;(h="function"===typeof f||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(a!==u||d!==l)&&ca(t,o,i,l),Ms=!1,d=t.memoizedState,o.state=d,Fs(t,i,o,r);var p=t.memoizedState;a!==u||d!==p||Ar.current||Ms?("function"===typeof f&&(sa(t,n,f,i),p=t.memoizedState),(c=Ms||aa(t,n,c,i,d,p,l)||!1)?(h||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(i,p,l),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(i,p,l)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=p),o.props=i,o.state=p,o.context=l,i=c):("function"!==typeof o.componentDidUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),i=!1)}return Pa(e,t,n,i,s,r)}function Pa(e,t,n,i,r,s){Ea(e,t);var o=0!==(128&t.flags);if(!i&&!o)return r&&Qr(t,n,!1),Ha(e,t,s);i=t.stateNode,ba.current=t;var a=o&&"function"!==typeof n.getDerivedStateFromError?null:i.render();return t.flags|=1,null!==e&&o?(t.child=bs(t,e.child,null,s),t.child=bs(t,null,a,s)):ka(e,t,a,s),t.memoizedState=i.state,r&&Qr(t,n,!0),t.child}function Na(e){var t=e.stateNode;t.pendingContext?Dr(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Dr(0,t.context,!1),Gs(e,t.containerInfo)}function Ia(e,t,n,i,r){return fs(),ps(r),t.flags|=256,ka(e,t,n,i),t.child}var Ra,Da,Ma,La,Qa={dehydrated:null,treeContext:null,retryLane:0};function za(e){return{baseLanes:e,cachePool:null,transitions:null}}function ja(e,t,n){var i,r=t.pendingProps,o=Zs.current,a=!1,l=0!==(128&t.flags);if((i=l)||(i=(null===e||null!==e.memoizedState)&&0!==(2&o)),i?(a=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),Cr(Zs,1&o),null===e)return cs(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=r.children,e=r.fallback,a?(r=t.mode,a=t.child,l={mode:"hidden",children:l},0===(1&r)&&null!==a?(a.childLanes=0,a.pendingProps=l):a=zc(l,r,0,null),e=Qc(e,r,n,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=za(n),t.memoizedState=Qa,e):Ua(t,l));if(null!==(o=e.memoizedState)&&null!==(i=o.dehydrated))return function(e,t,n,i,r,o,a){if(n)return 256&t.flags?(t.flags&=-257,Va(e,t,a,i=da(Error(s(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=i.fallback,r=t.mode,i=zc({mode:"visible",children:i.children},r,0,null),(o=Qc(o,r,a,null)).flags|=2,i.return=t,o.return=t,i.sibling=o,t.child=i,0!==(1&t.mode)&&bs(t,e.child,null,a),t.child.memoizedState=za(a),t.memoizedState=Qa,o);if(0===(1&t.mode))return Va(e,t,a,null);if("$!"===r.data){if(i=r.nextSibling&&r.nextSibling.dataset)var l=i.dgst;return i=l,Va(e,t,a,i=da(o=Error(s(419)),i,void 0))}if(l=0!==(a&e.childLanes),Oa||l){if(null!==(i=Nl)){switch(a&-a){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}0!==(r=0!==(r&(i.suspendedLanes|a))?0:r)&&r!==o.retryLane&&(o.retryLane=r,Ds(e,r),rc(i,e,r,-1))}return vc(),Va(e,t,a,i=da(Error(s(421))))}return"$?"===r.data?(t.flags|=128,t.child=e.child,t=Ac.bind(null,e),r._reactRetry=t,null):(e=o.treeContext,is=cr(r.nextSibling),ns=t,rs=!0,ss=null,null!==e&&($r[Xr++]=Kr,$r[Xr++]=Yr,$r[Xr++]=Gr,Kr=e.id,Yr=e.overflow,Gr=t),t=Ua(t,i.children),t.flags|=4096,t)}(e,t,l,r,i,o,n);if(a){a=r.fallback,l=t.mode,i=(o=e.child).sibling;var c={mode:"hidden",children:r.children};return 0===(1&l)&&t.child!==o?((r=t.child).childLanes=0,r.pendingProps=c,t.deletions=null):(r=Mc(o,c)).subtreeFlags=14680064&o.subtreeFlags,null!==i?a=Mc(i,a):(a=Qc(a,l,n,null)).flags|=2,a.return=t,r.return=t,r.sibling=a,t.child=r,r=a,a=t.child,l=null===(l=e.child.memoizedState)?za(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},a.memoizedState=l,a.childLanes=e.childLanes&~n,t.memoizedState=Qa,r}return e=(a=e.child).sibling,r=Mc(a,{mode:"visible",children:r.children}),0===(1&t.mode)&&(r.lanes=n),r.return=t,r.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function Ua(e,t){return(t=zc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Va(e,t,n,i){return null!==i&&ps(i),bs(t,e.child,null,n),(e=Ua(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Fa(e,t,n){e.lanes|=t;var i=e.alternate;null!==i&&(i.lanes|=t),_s(e.return,t,n)}function qa(e,t,n,i,r){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=n,s.tailMode=r)}function Ba(e,t,n){var i=t.pendingProps,r=i.revealOrder,s=i.tail;if(ka(e,t,i.children,n),0!==(2&(i=Zs.current)))i=1&i|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Fa(e,n,t);else if(19===e.tag)Fa(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}i&=1}if(Cr(Zs,i),0===(1&t.mode))t.memoizedState=null;else switch(r){case"forwards":for(n=t.child,r=null;null!==n;)null!==(e=n.alternate)&&null===eo(e)&&(r=n),n=n.sibling;null===(n=r)?(r=t.child,t.child=null):(r=n.sibling,n.sibling=null),qa(t,!1,r,n,s);break;case"backwards":for(n=null,r=t.child,t.child=null;null!==r;){if(null!==(e=r.alternate)&&null===eo(e)){t.child=r;break}e=r.sibling,r.sibling=n,n=r,r=e}qa(t,!0,n,null,s);break;case"together":qa(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Wa(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ha(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),zl|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(s(153));if(null!==t.child){for(n=Mc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Mc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function $a(e,t){if(!rs)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var i=null;null!==n;)null!==n.alternate&&(i=n),n=n.sibling;null===i?t||null===e.tail?e.tail=null:e.tail.sibling=null:i.sibling=null}}function Xa(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,i=0;if(t)for(var r=e.child;null!==r;)n|=r.lanes|r.childLanes,i|=14680064&r.subtreeFlags,i|=14680064&r.flags,r.return=e,r=r.sibling;else for(r=e.child;null!==r;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=e,r=r.sibling;return e.subtreeFlags|=i,e.childLanes=n,t}function Ga(e,t,n){var i=t.pendingProps;switch(ts(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Xa(t),null;case 1:case 17:return Ir(t.type)&&Rr(),Xa(t),null;case 3:return i=t.stateNode,Ks(),Tr(Ar),Tr(_r),no(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),null!==e&&null!==e.child||(us(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==ss&&(lc(ss),ss=null))),Da(e,t),Xa(t),null;case 5:Js(t);var r=Xs($s.current);if(n=t.type,null!==e&&null!=t.stateNode)Ma(e,t,n,i,r),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!i){if(null===t.stateNode)throw Error(s(166));return Xa(t),null}if(e=Xs(Ws.current),us(t)){i=t.stateNode,n=t.type;var o=t.memoizedProps;switch(i[dr]=t,i[fr]=o,e=0!==(1&t.mode),n){case"dialog":ji("cancel",i),ji("close",i);break;case"iframe":case"object":case"embed":ji("load",i);break;case"video":case"audio":for(r=0;r<Mi.length;r++)ji(Mi[r],i);break;case"source":ji("error",i);break;case"img":case"image":case"link":ji("error",i),ji("load",i);break;case"details":ji("toggle",i);break;case"input":K(i,o),ji("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!o.multiple},ji("invalid",i);break;case"textarea":re(i,o),ji("invalid",i)}for(var l in ye(n,o),r=null,o)if(o.hasOwnProperty(l)){var c=o[l];"children"===l?"string"===typeof c?i.textContent!==c&&(!0!==o.suppressHydrationWarning&&Ji(i.textContent,c,e),r=["children",c]):"number"===typeof c&&i.textContent!==""+c&&(!0!==o.suppressHydrationWarning&&Ji(i.textContent,c,e),r=["children",""+c]):a.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&ji("scroll",i)}switch(n){case"input":H(i),Z(i,o,!0);break;case"textarea":H(i),oe(i);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(i.onclick=Zi)}i=r,t.updateQueue=i,null!==i&&(t.flags|=4)}else{l=9===r.nodeType?r:r.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ae(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof i.is?e=l.createElement(n,{is:i.is}):(e=l.createElement(n),"select"===n&&(l=e,i.multiple?l.multiple=!0:i.size&&(l.size=i.size))):e=l.createElementNS(e,n),e[dr]=t,e[fr]=i,Ra(e,t,!1,!1),t.stateNode=e;e:{switch(l=we(n,i),n){case"dialog":ji("cancel",e),ji("close",e),r=i;break;case"iframe":case"object":case"embed":ji("load",e),r=i;break;case"video":case"audio":for(r=0;r<Mi.length;r++)ji(Mi[r],e);r=i;break;case"source":ji("error",e),r=i;break;case"img":case"image":case"link":ji("error",e),ji("load",e),r=i;break;case"details":ji("toggle",e),r=i;break;case"input":K(e,i),r=G(e,i),ji("invalid",e);break;case"option":default:r=i;break;case"select":e._wrapperState={wasMultiple:!!i.multiple},r=Q({},i,{value:void 0}),ji("invalid",e);break;case"textarea":re(e,i),r=ie(e,i),ji("invalid",e)}for(o in ye(n,r),c=r)if(c.hasOwnProperty(o)){var h=c[o];"style"===o?me(e,h):"dangerouslySetInnerHTML"===o?null!=(h=h?h.__html:void 0)&&ue(e,h):"children"===o?"string"===typeof h?("textarea"!==n||""!==h)&&de(e,h):"number"===typeof h&&de(e,""+h):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(a.hasOwnProperty(o)?null!=h&&"onScroll"===o&&ji("scroll",e):null!=h&&w(e,o,h,l))}switch(n){case"input":H(e),Z(e,i,!1);break;case"textarea":H(e),oe(e);break;case"option":null!=i.value&&e.setAttribute("value",""+B(i.value));break;case"select":e.multiple=!!i.multiple,null!=(o=i.value)?ne(e,!!i.multiple,o,!1):null!=i.defaultValue&&ne(e,!!i.multiple,i.defaultValue,!0);break;default:"function"===typeof r.onClick&&(e.onclick=Zi)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Xa(t),null;case 6:if(e&&null!=t.stateNode)La(e,t,e.memoizedProps,i);else{if("string"!==typeof i&&null===t.stateNode)throw Error(s(166));if(n=Xs($s.current),Xs(Ws.current),us(t)){if(i=t.stateNode,n=t.memoizedProps,i[dr]=t,(o=i.nodeValue!==n)&&null!==(e=ns))switch(e.tag){case 3:Ji(i.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Ji(i.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(i=(9===n.nodeType?n:n.ownerDocument).createTextNode(i))[dr]=t,t.stateNode=i}return Xa(t),null;case 13:if(Tr(Zs),i=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(rs&&null!==is&&0!==(1&t.mode)&&0===(128&t.flags))ds(),fs(),t.flags|=98560,o=!1;else if(o=us(t),null!==i&&null!==i.dehydrated){if(null===e){if(!o)throw Error(s(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(s(317));o[dr]=t}else fs(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Xa(t),o=!1}else null!==ss&&(lc(ss),ss=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((i=null!==i)!==(null!==e&&null!==e.memoizedState)&&i&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&Zs.current)?0===Ll&&(Ll=3):vc())),null!==t.updateQueue&&(t.flags|=4),Xa(t),null);case 4:return Ks(),Da(e,t),null===e&&Fi(t.stateNode.containerInfo),Xa(t),null;case 10:return Es(t.type._context),Xa(t),null;case 19:if(Tr(Zs),null===(o=t.memoizedState))return Xa(t),null;if(i=0!==(128&t.flags),null===(l=o.rendering))if(i)$a(o,!1);else{if(0!==Ll||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=eo(e))){for(t.flags|=128,$a(o,!1),null!==(i=l.updateQueue)&&(t.updateQueue=i,t.flags|=4),t.subtreeFlags=0,i=n,n=t.child;null!==n;)e=i,(o=n).flags&=14680066,null===(l=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=l.childLanes,o.lanes=l.lanes,o.child=l.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=l.memoizedProps,o.memoizedState=l.memoizedState,o.updateQueue=l.updateQueue,o.type=l.type,e=l.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Cr(Zs,1&Zs.current|2),t.child}e=e.sibling}null!==o.tail&&Ye()>Bl&&(t.flags|=128,i=!0,$a(o,!1),t.lanes=4194304)}else{if(!i)if(null!==(e=eo(l))){if(t.flags|=128,i=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),$a(o,!0),null===o.tail&&"hidden"===o.tailMode&&!l.alternate&&!rs)return Xa(t),null}else 2*Ye()-o.renderingStartTime>Bl&&1073741824!==n&&(t.flags|=128,i=!0,$a(o,!1),t.lanes=4194304);o.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=o.last)?n.sibling=l:t.child=l,o.last=l)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Ye(),t.sibling=null,n=Zs.current,Cr(Zs,i?1&n|2:1&n),t):(Xa(t),null);case 22:case 23:return fc(),i=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==i&&(t.flags|=8192),i&&0!==(1&t.mode)?0!==(1073741824&Dl)&&(Xa(t),6&t.subtreeFlags&&(t.flags|=8192)):Xa(t),null;case 24:case 25:return null}throw Error(s(156,t.tag))}function Ka(e,t){switch(ts(t),t.tag){case 1:return Ir(t.type)&&Rr(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Ks(),Tr(Ar),Tr(_r),no(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Js(t),null;case 13:if(Tr(Zs),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(s(340));fs()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Tr(Zs),null;case 4:return Ks(),null;case 10:return Es(t.type._context),null;case 22:case 23:return fc(),null;default:return null}}Ra=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Da=function(){},Ma=function(e,t,n,i){var r=e.memoizedProps;if(r!==i){e=t.stateNode,Xs(Ws.current);var s,o=null;switch(n){case"input":r=G(e,r),i=G(e,i),o=[];break;case"select":r=Q({},r,{value:void 0}),i=Q({},i,{value:void 0}),o=[];break;case"textarea":r=ie(e,r),i=ie(e,i),o=[];break;default:"function"!==typeof r.onClick&&"function"===typeof i.onClick&&(e.onclick=Zi)}for(h in ye(n,i),n=null,r)if(!i.hasOwnProperty(h)&&r.hasOwnProperty(h)&&null!=r[h])if("style"===h){var l=r[h];for(s in l)l.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else"dangerouslySetInnerHTML"!==h&&"children"!==h&&"suppressContentEditableWarning"!==h&&"suppressHydrationWarning"!==h&&"autoFocus"!==h&&(a.hasOwnProperty(h)?o||(o=[]):(o=o||[]).push(h,null));for(h in i){var c=i[h];if(l=null!=r?r[h]:void 0,i.hasOwnProperty(h)&&c!==l&&(null!=c||null!=l))if("style"===h)if(l){for(s in l)!l.hasOwnProperty(s)||c&&c.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in c)c.hasOwnProperty(s)&&l[s]!==c[s]&&(n||(n={}),n[s]=c[s])}else n||(o||(o=[]),o.push(h,n)),n=c;else"dangerouslySetInnerHTML"===h?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(o=o||[]).push(h,c)):"children"===h?"string"!==typeof c&&"number"!==typeof c||(o=o||[]).push(h,""+c):"suppressContentEditableWarning"!==h&&"suppressHydrationWarning"!==h&&(a.hasOwnProperty(h)?(null!=c&&"onScroll"===h&&ji("scroll",e),o||l===c||(o=[])):(o=o||[]).push(h,c))}n&&(o=o||[]).push("style",n);var h=o;(t.updateQueue=h)&&(t.flags|=4)}},La=function(e,t,n,i){n!==i&&(t.flags|=4)};var Ya=!1,Ja=!1,Za="function"===typeof WeakSet?WeakSet:Set,el=null;function tl(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(i){Cc(e,t,i)}else n.current=null}function nl(e,t,n){try{n()}catch(i){Cc(e,t,i)}}var il=!1;function rl(e,t,n){var i=t.updateQueue;if(null!==(i=null!==i?i.lastEffect:null)){var r=i=i.next;do{if((r.tag&e)===e){var s=r.destroy;r.destroy=void 0,void 0!==s&&nl(t,n,s)}r=r.next}while(r!==i)}}function sl(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var i=n.create;n.destroy=i()}n=n.next}while(n!==t)}}function ol(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function al(e){var t=e.alternate;null!==t&&(e.alternate=null,al(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[dr],delete t[fr],delete t[gr],delete t[mr],delete t[vr])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function ll(e){return 5===e.tag||3===e.tag||4===e.tag}function cl(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||ll(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function hl(e,t,n){var i=e.tag;if(5===i||6===i)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zi));else if(4!==i&&null!==(e=e.child))for(hl(e,t,n),e=e.sibling;null!==e;)hl(e,t,n),e=e.sibling}function ul(e,t,n){var i=e.tag;if(5===i||6===i)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==i&&null!==(e=e.child))for(ul(e,t,n),e=e.sibling;null!==e;)ul(e,t,n),e=e.sibling}var dl=null,fl=!1;function pl(e,t,n){for(n=n.child;null!==n;)gl(e,t,n),n=n.sibling}function gl(e,t,n){if(st&&"function"===typeof st.onCommitFiberUnmount)try{st.onCommitFiberUnmount(rt,n)}catch(a){}switch(n.tag){case 5:Ja||tl(n,t);case 6:var i=dl,r=fl;dl=null,pl(e,t,n),fl=r,null!==(dl=i)&&(fl?(e=dl,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):dl.removeChild(n.stateNode));break;case 18:null!==dl&&(fl?(e=dl,n=n.stateNode,8===e.nodeType?lr(e.parentNode,n):1===e.nodeType&&lr(e,n),Ft(e)):lr(dl,n.stateNode));break;case 4:i=dl,r=fl,dl=n.stateNode.containerInfo,fl=!0,pl(e,t,n),dl=i,fl=r;break;case 0:case 11:case 14:case 15:if(!Ja&&(null!==(i=n.updateQueue)&&null!==(i=i.lastEffect))){r=i=i.next;do{var s=r,o=s.destroy;s=s.tag,void 0!==o&&(0!==(2&s)||0!==(4&s))&&nl(n,t,o),r=r.next}while(r!==i)}pl(e,t,n);break;case 1:if(!Ja&&(tl(n,t),"function"===typeof(i=n.stateNode).componentWillUnmount))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(a){Cc(n,t,a)}pl(e,t,n);break;case 21:pl(e,t,n);break;case 22:1&n.mode?(Ja=(i=Ja)||null!==n.memoizedState,pl(e,t,n),Ja=i):pl(e,t,n);break;default:pl(e,t,n)}}function ml(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Za),t.forEach((function(t){var i=Pc.bind(null,e,t);n.has(t)||(n.add(t),t.then(i,i))}))}}function vl(e,t){var n=t.deletions;if(null!==n)for(var i=0;i<n.length;i++){var r=n[i];try{var o=e,a=t,l=a;e:for(;null!==l;){switch(l.tag){case 5:dl=l.stateNode,fl=!1;break e;case 3:case 4:dl=l.stateNode.containerInfo,fl=!0;break e}l=l.return}if(null===dl)throw Error(s(160));gl(o,a,r),dl=null,fl=!1;var c=r.alternate;null!==c&&(c.return=null),r.return=null}catch(h){Cc(r,t,h)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)yl(t,e),t=t.sibling}function yl(e,t){var n=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(vl(t,e),wl(e),4&i){try{rl(3,e,e.return),sl(3,e)}catch(Kk){Cc(e,e.return,Kk)}try{rl(5,e,e.return)}catch(Kk){Cc(e,e.return,Kk)}}break;case 1:vl(t,e),wl(e),512&i&&null!==n&&tl(n,n.return);break;case 5:if(vl(t,e),wl(e),512&i&&null!==n&&tl(n,n.return),32&e.flags){var r=e.stateNode;try{de(r,"")}catch(Kk){Cc(e,e.return,Kk)}}if(4&i&&null!=(r=e.stateNode)){var o=e.memoizedProps,a=null!==n?n.memoizedProps:o,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===o.type&&null!=o.name&&Y(r,o),we(l,a);var h=we(l,o);for(a=0;a<c.length;a+=2){var u=c[a],d=c[a+1];"style"===u?me(r,d):"dangerouslySetInnerHTML"===u?ue(r,d):"children"===u?de(r,d):w(r,u,d,h)}switch(l){case"input":J(r,o);break;case"textarea":se(r,o);break;case"select":var f=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!o.multiple;var p=o.value;null!=p?ne(r,!!o.multiple,p,!1):f!==!!o.multiple&&(null!=o.defaultValue?ne(r,!!o.multiple,o.defaultValue,!0):ne(r,!!o.multiple,o.multiple?[]:"",!1))}r[fr]=o}catch(Kk){Cc(e,e.return,Kk)}}break;case 6:if(vl(t,e),wl(e),4&i){if(null===e.stateNode)throw Error(s(162));r=e.stateNode,o=e.memoizedProps;try{r.nodeValue=o}catch(Kk){Cc(e,e.return,Kk)}}break;case 3:if(vl(t,e),wl(e),4&i&&null!==n&&n.memoizedState.isDehydrated)try{Ft(t.containerInfo)}catch(Kk){Cc(e,e.return,Kk)}break;case 4:default:vl(t,e),wl(e);break;case 13:vl(t,e),wl(e),8192&(r=e.child).flags&&(o=null!==r.memoizedState,r.stateNode.isHidden=o,!o||null!==r.alternate&&null!==r.alternate.memoizedState||(ql=Ye())),4&i&&ml(e);break;case 22:if(u=null!==n&&null!==n.memoizedState,1&e.mode?(Ja=(h=Ja)||u,vl(t,e),Ja=h):vl(t,e),wl(e),8192&i){if(h=null!==e.memoizedState,(e.stateNode.isHidden=h)&&!u&&0!==(1&e.mode))for(el=e,u=e.child;null!==u;){for(d=el=u;null!==el;){switch(p=(f=el).child,f.tag){case 0:case 11:case 14:case 15:rl(4,f,f.return);break;case 1:tl(f,f.return);var g=f.stateNode;if("function"===typeof g.componentWillUnmount){i=f,n=f.return;try{t=i,g.props=t.memoizedProps,g.state=t.memoizedState,g.componentWillUnmount()}catch(Kk){Cc(i,n,Kk)}}break;case 5:tl(f,f.return);break;case 22:if(null!==f.memoizedState){Sl(d);continue}}null!==p?(p.return=f,el=p):Sl(d)}u=u.sibling}e:for(u=null,d=e;;){if(5===d.tag){if(null===u){u=d;try{r=d.stateNode,h?"function"===typeof(o=r.style).setProperty?o.setProperty("display","none","important"):o.display="none":(l=d.stateNode,a=void 0!==(c=d.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=ge("display",a))}catch(Kk){Cc(e,e.return,Kk)}}}else if(6===d.tag){if(null===u)try{d.stateNode.nodeValue=h?"":d.memoizedProps}catch(Kk){Cc(e,e.return,Kk)}}else if((22!==d.tag&&23!==d.tag||null===d.memoizedState||d===e)&&null!==d.child){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;null===d.sibling;){if(null===d.return||d.return===e)break e;u===d&&(u=null),d=d.return}u===d&&(u=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:vl(t,e),wl(e),4&i&&ml(e);case 21:}}function wl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(ll(n)){var i=n;break e}n=n.return}throw Error(s(160))}switch(i.tag){case 5:var r=i.stateNode;32&i.flags&&(de(r,""),i.flags&=-33),ul(e,cl(e),r);break;case 3:case 4:var o=i.stateNode.containerInfo;hl(e,cl(e),o);break;default:throw Error(s(161))}}catch(a){Cc(e,e.return,a)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function bl(e,t,n){el=e,Ol(e,t,n)}function Ol(e,t,n){for(var i=0!==(1&e.mode);null!==el;){var r=el,s=r.child;if(22===r.tag&&i){var o=null!==r.memoizedState||Ya;if(!o){var a=r.alternate,l=null!==a&&null!==a.memoizedState||Ja;a=Ya;var c=Ja;if(Ya=o,(Ja=l)&&!c)for(el=r;null!==el;)l=(o=el).child,22===o.tag&&null!==o.memoizedState?xl(r):null!==l?(l.return=o,el=l):xl(r);for(;null!==s;)el=s,Ol(s,t,n),s=s.sibling;el=r,Ya=a,Ja=c}kl(e)}else 0!==(8772&r.subtreeFlags)&&null!==s?(s.return=r,el=s):kl(e)}}function kl(e){for(;null!==el;){var t=el;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Ja||sl(5,t);break;case 1:var i=t.stateNode;if(4&t.flags&&!Ja)if(null===n)i.componentDidMount();else{var r=t.elementType===t.type?n.memoizedProps:ra(t.type,n.memoizedProps);i.componentDidUpdate(r,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&qs(t,o,i);break;case 3:var a=t.updateQueue;if(null!==a){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}qs(t,a,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var h=t.alternate;if(null!==h){var u=h.memoizedState;if(null!==u){var d=u.dehydrated;null!==d&&Ft(d)}}}break;default:throw Error(s(163))}Ja||512&t.flags&&ol(t)}catch(f){Cc(t,t.return,f)}}if(t===e){el=null;break}if(null!==(n=t.sibling)){n.return=t.return,el=n;break}el=t.return}}function Sl(e){for(;null!==el;){var t=el;if(t===e){el=null;break}var n=t.sibling;if(null!==n){n.return=t.return,el=n;break}el=t.return}}function xl(e){for(;null!==el;){var t=el;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{sl(4,t)}catch(l){Cc(t,n,l)}break;case 1:var i=t.stateNode;if("function"===typeof i.componentDidMount){var r=t.return;try{i.componentDidMount()}catch(l){Cc(t,r,l)}}var s=t.return;try{ol(t)}catch(l){Cc(t,s,l)}break;case 5:var o=t.return;try{ol(t)}catch(l){Cc(t,o,l)}}}catch(l){Cc(t,t.return,l)}if(t===e){el=null;break}var a=t.sibling;if(null!==a){a.return=t.return,el=a;break}el=t.return}}var Tl,Cl=Math.ceil,El=b.ReactCurrentDispatcher,_l=b.ReactCurrentOwner,Al=b.ReactCurrentBatchConfig,Pl=0,Nl=null,Il=null,Rl=0,Dl=0,Ml=xr(0),Ll=0,Ql=null,zl=0,jl=0,Ul=0,Vl=null,Fl=null,ql=0,Bl=1/0,Wl=null,Hl=!1,$l=null,Xl=null,Gl=!1,Kl=null,Yl=0,Jl=0,Zl=null,ec=-1,tc=0;function nc(){return 0!==(6&Pl)?Ye():-1!==ec?ec:ec=Ye()}function ic(e){return 0===(1&e.mode)?1:0!==(2&Pl)&&0!==Rl?Rl&-Rl:null!==gs.transition?(0===tc&&(tc=gt()),tc):0!==(e=wt)?e:e=void 0===(e=window.event)?16:Kt(e.type)}function rc(e,t,n,i){if(50<Jl)throw Jl=0,Zl=null,Error(s(185));vt(e,n,i),0!==(2&Pl)&&e===Nl||(e===Nl&&(0===(2&Pl)&&(jl|=n),4===Ll&&cc(e,Rl)),sc(e,i),1===n&&0===Pl&&0===(1&t.mode)&&(Bl=Ye()+500,jr&&Fr()))}function sc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,i=e.pingedLanes,r=e.expirationTimes,s=e.pendingLanes;0<s;){var o=31-ot(s),a=1<<o,l=r[o];-1===l?0!==(a&n)&&0===(a&i)||(r[o]=ft(a,t)):l<=t&&(e.expiredLanes|=a),s&=~a}}(e,t);var i=dt(e,e===Nl?Rl:0);if(0===i)null!==n&&Xe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=i&-i,e.callbackPriority!==t){if(null!=n&&Xe(n),1===t)0===e.tag?function(e){jr=!0,Vr(e)}(hc.bind(null,e)):Vr(hc.bind(null,e)),or((function(){0===(6&Pl)&&Fr()})),n=null;else{switch(bt(i)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=it}n=Nc(n,oc.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function oc(e,t){if(ec=-1,tc=0,0!==(6&Pl))throw Error(s(327));var n=e.callbackNode;if(xc()&&e.callbackNode!==n)return null;var i=dt(e,e===Nl?Rl:0);if(0===i)return null;if(0!==(30&i)||0!==(i&e.expiredLanes)||t)t=yc(e,i);else{t=i;var r=Pl;Pl|=2;var o=mc();for(Nl===e&&Rl===t||(Wl=null,Bl=Ye()+500,pc(e,t));;)try{bc();break}catch(l){gc(e,l)}Cs(),El.current=o,Pl=r,null!==Il?t=0:(Nl=null,Rl=0,t=Ll)}if(0!==t){if(2===t&&(0!==(r=pt(e))&&(i=r,t=ac(e,r))),1===t)throw n=Ql,pc(e,0),cc(e,i),sc(e,Ye()),n;if(6===t)cc(e,i);else{if(r=e.current.alternate,0===(30&i)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var i=0;i<n.length;i++){var r=n[i],s=r.getSnapshot;r=r.value;try{if(!ai(s(),r))return!1}catch(a){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(r)&&(2===(t=yc(e,i))&&(0!==(o=pt(e))&&(i=o,t=ac(e,o))),1===t))throw n=Ql,pc(e,0),cc(e,i),sc(e,Ye()),n;switch(e.finishedWork=r,e.finishedLanes=i,t){case 0:case 1:throw Error(s(345));case 2:case 5:Sc(e,Fl,Wl);break;case 3:if(cc(e,i),(130023424&i)===i&&10<(t=ql+500-Ye())){if(0!==dt(e,0))break;if(((r=e.suspendedLanes)&i)!==i){nc(),e.pingedLanes|=e.suspendedLanes&r;break}e.timeoutHandle=ir(Sc.bind(null,e,Fl,Wl),t);break}Sc(e,Fl,Wl);break;case 4:if(cc(e,i),(4194240&i)===i)break;for(t=e.eventTimes,r=-1;0<i;){var a=31-ot(i);o=1<<a,(a=t[a])>r&&(r=a),i&=~o}if(i=r,10<(i=(120>(i=Ye()-i)?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*Cl(i/1960))-i)){e.timeoutHandle=ir(Sc.bind(null,e,Fl,Wl),i);break}Sc(e,Fl,Wl);break;default:throw Error(s(329))}}}return sc(e,Ye()),e.callbackNode===n?oc.bind(null,e):null}function ac(e,t){var n=Vl;return e.current.memoizedState.isDehydrated&&(pc(e,t).flags|=256),2!==(e=yc(e,t))&&(t=Fl,Fl=n,null!==t&&lc(t)),e}function lc(e){null===Fl?Fl=e:Fl.push.apply(Fl,e)}function cc(e,t){for(t&=~Ul,t&=~jl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),i=1<<n;e[n]=-1,t&=~i}}function hc(e){if(0!==(6&Pl))throw Error(s(327));xc();var t=dt(e,0);if(0===(1&t))return sc(e,Ye()),null;var n=yc(e,t);if(0!==e.tag&&2===n){var i=pt(e);0!==i&&(t=i,n=ac(e,i))}if(1===n)throw n=Ql,pc(e,0),cc(e,t),sc(e,Ye()),n;if(6===n)throw Error(s(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Sc(e,Fl,Wl),sc(e,Ye()),null}function uc(e,t){var n=Pl;Pl|=1;try{return e(t)}finally{0===(Pl=n)&&(Bl=Ye()+500,jr&&Fr())}}function dc(e){null!==Kl&&0===Kl.tag&&0===(6&Pl)&&xc();var t=Pl;Pl|=1;var n=Al.transition,i=wt;try{if(Al.transition=null,wt=1,e)return e()}finally{wt=i,Al.transition=n,0===(6&(Pl=t))&&Fr()}}function fc(){Dl=Ml.current,Tr(Ml)}function pc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,rr(n)),null!==Il)for(n=Il.return;null!==n;){var i=n;switch(ts(i),i.tag){case 1:null!==(i=i.type.childContextTypes)&&void 0!==i&&Rr();break;case 3:Ks(),Tr(Ar),Tr(_r),no();break;case 5:Js(i);break;case 4:Ks();break;case 13:case 19:Tr(Zs);break;case 10:Es(i.type._context);break;case 22:case 23:fc()}n=n.return}if(Nl=e,Il=e=Mc(e.current,null),Rl=Dl=t,Ll=0,Ql=null,Ul=jl=zl=0,Fl=Vl=null,null!==Ns){for(t=0;t<Ns.length;t++)if(null!==(i=(n=Ns[t]).interleaved)){n.interleaved=null;var r=i.next,s=n.pending;if(null!==s){var o=s.next;s.next=r,i.next=o}n.pending=i}Ns=null}return e}function gc(e,t){for(;;){var n=Il;try{if(Cs(),io.current=ea,ho){for(var i=oo.memoizedState;null!==i;){var r=i.queue;null!==r&&(r.pending=null),i=i.next}ho=!1}if(so=0,co=ao=oo=null,uo=!1,fo=0,_l.current=null,null===n||null===n.return){Ll=1,Ql=t,Il=null;break}e:{var o=e,a=n.return,l=n,c=t;if(t=Rl,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var h=c,u=l,d=u.tag;if(0===(1&u.mode)&&(0===d||11===d||15===d)){var f=u.alternate;f?(u.updateQueue=f.updateQueue,u.memoizedState=f.memoizedState,u.lanes=f.lanes):(u.updateQueue=null,u.memoizedState=null)}var p=ya(a);if(null!==p){p.flags&=-257,wa(p,a,l,0,t),1&p.mode&&va(o,h,t),c=h;var g=(t=p).updateQueue;if(null===g){var m=new Set;m.add(c),t.updateQueue=m}else g.add(c);break e}if(0===(1&t)){va(o,h,t),vc();break e}c=Error(s(426))}else if(rs&&1&l.mode){var v=ya(a);if(null!==v){0===(65536&v.flags)&&(v.flags|=256),wa(v,a,l,0,t),ps(ua(c,l));break e}}o=c=ua(c,l),4!==Ll&&(Ll=2),null===Vl?Vl=[o]:Vl.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,Vs(o,ga(0,c,t));break e;case 1:l=c;var y=o.type,w=o.stateNode;if(0===(128&o.flags)&&("function"===typeof y.getDerivedStateFromError||null!==w&&"function"===typeof w.componentDidCatch&&(null===Xl||!Xl.has(w)))){o.flags|=65536,t&=-t,o.lanes|=t,Vs(o,ma(o,l,t));break e}}o=o.return}while(null!==o)}kc(n)}catch(b){t=b,Il===n&&null!==n&&(Il=n=n.return);continue}break}}function mc(){var e=El.current;return El.current=ea,null===e?ea:e}function vc(){0!==Ll&&3!==Ll&&2!==Ll||(Ll=4),null===Nl||0===(268435455&zl)&&0===(268435455&jl)||cc(Nl,Rl)}function yc(e,t){var n=Pl;Pl|=2;var i=mc();for(Nl===e&&Rl===t||(Wl=null,pc(e,t));;)try{wc();break}catch(r){gc(e,r)}if(Cs(),Pl=n,El.current=i,null!==Il)throw Error(s(261));return Nl=null,Rl=0,Ll}function wc(){for(;null!==Il;)Oc(Il)}function bc(){for(;null!==Il&&!Ge();)Oc(Il)}function Oc(e){var t=Tl(e.alternate,e,Dl);e.memoizedProps=e.pendingProps,null===t?kc(e):Il=t,_l.current=null}function kc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Ga(n,t,Dl)))return void(Il=n)}else{if(null!==(n=Ka(n,t)))return n.flags&=32767,void(Il=n);if(null===e)return Ll=6,void(Il=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Il=t);Il=t=e}while(null!==t);0===Ll&&(Ll=5)}function Sc(e,t,n){var i=wt,r=Al.transition;try{Al.transition=null,wt=1,function(e,t,n,i){do{xc()}while(null!==Kl);if(0!==(6&Pl))throw Error(s(327));n=e.finishedWork;var r=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(s(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var i=e.eventTimes;for(e=e.expirationTimes;0<n;){var r=31-ot(n),s=1<<r;t[r]=0,i[r]=-1,e[r]=-1,n&=~s}}(e,o),e===Nl&&(Il=Nl=null,Rl=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Gl||(Gl=!0,Nc(tt,(function(){return xc(),null}))),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=Al.transition,Al.transition=null;var a=wt;wt=1;var l=Pl;Pl|=4,_l.current=null,function(e,t){if(er=Bt,fi(e=di())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var i=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(i&&0!==i.rangeCount){n=i.anchorNode;var r=i.anchorOffset,o=i.focusNode;i=i.focusOffset;try{n.nodeType,o.nodeType}catch(Ho){n=null;break e}var a=0,l=-1,c=-1,h=0,u=0,d=e,f=null;t:for(;;){for(var p;d!==n||0!==r&&3!==d.nodeType||(l=a+r),d!==o||0!==i&&3!==d.nodeType||(c=a+i),3===d.nodeType&&(a+=d.nodeValue.length),null!==(p=d.firstChild);)f=d,d=p;for(;;){if(d===e)break t;if(f===n&&++h===r&&(l=a),f===o&&++u===i&&(c=a),null!==(p=d.nextSibling))break;f=(d=f).parentNode}d=p}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(tr={focusedElem:e,selectionRange:n},Bt=!1,el=t;null!==el;)if(e=(t=el).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,el=e;else for(;null!==el;){t=el;try{var g=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==g){var m=g.memoizedProps,v=g.memoizedState,y=t.stateNode,w=y.getSnapshotBeforeUpdate(t.elementType===t.type?m:ra(t.type,m),v);y.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var b=t.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(s(163))}}catch(Ho){Cc(t,t.return,Ho)}if(null!==(e=t.sibling)){e.return=t.return,el=e;break}el=t.return}g=il,il=!1}(e,n),yl(n,e),pi(tr),Bt=!!er,tr=er=null,e.current=n,bl(n,e,r),Ke(),Pl=l,wt=a,Al.transition=o}else e.current=n;if(Gl&&(Gl=!1,Kl=e,Yl=r),o=e.pendingLanes,0===o&&(Xl=null),function(e){if(st&&"function"===typeof st.onCommitFiberRoot)try{st.onCommitFiberRoot(rt,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),sc(e,Ye()),null!==t)for(i=e.onRecoverableError,n=0;n<t.length;n++)r=t[n],i(r.value,{componentStack:r.stack,digest:r.digest});if(Hl)throw Hl=!1,e=$l,$l=null,e;0!==(1&Yl)&&0!==e.tag&&xc(),o=e.pendingLanes,0!==(1&o)?e===Zl?Jl++:(Jl=0,Zl=e):Jl=0,Fr()}(e,t,n,i)}finally{Al.transition=r,wt=i}return null}function xc(){if(null!==Kl){var e=bt(Yl),t=Al.transition,n=wt;try{if(Al.transition=null,wt=16>e?16:e,null===Kl)var i=!1;else{if(e=Kl,Kl=null,Yl=0,0!==(6&Pl))throw Error(s(331));var r=Pl;for(Pl|=4,el=e.current;null!==el;){var o=el,a=o.child;if(0!==(16&el.flags)){var l=o.deletions;if(null!==l){for(var c=0;c<l.length;c++){var h=l[c];for(el=h;null!==el;){var u=el;switch(u.tag){case 0:case 11:case 15:rl(8,u,o)}var d=u.child;if(null!==d)d.return=u,el=d;else for(;null!==el;){var f=(u=el).sibling,p=u.return;if(al(u),u===h){el=null;break}if(null!==f){f.return=p,el=f;break}el=p}}}var g=o.alternate;if(null!==g){var m=g.child;if(null!==m){g.child=null;do{var v=m.sibling;m.sibling=null,m=v}while(null!==m)}}el=o}}if(0!==(2064&o.subtreeFlags)&&null!==a)a.return=o,el=a;else e:for(;null!==el;){if(0!==(2048&(o=el).flags))switch(o.tag){case 0:case 11:case 15:rl(9,o,o.return)}var y=o.sibling;if(null!==y){y.return=o.return,el=y;break e}el=o.return}}var w=e.current;for(el=w;null!==el;){var b=(a=el).child;if(0!==(2064&a.subtreeFlags)&&null!==b)b.return=a,el=b;else e:for(a=w;null!==el;){if(0!==(2048&(l=el).flags))try{switch(l.tag){case 0:case 11:case 15:sl(9,l)}}catch(k){Cc(l,l.return,k)}if(l===a){el=null;break e}var O=l.sibling;if(null!==O){O.return=l.return,el=O;break e}el=l.return}}if(Pl=r,Fr(),st&&"function"===typeof st.onPostCommitFiberRoot)try{st.onPostCommitFiberRoot(rt,e)}catch(k){}i=!0}return i}finally{wt=n,Al.transition=t}}return!1}function Tc(e,t,n){e=js(e,t=ga(0,t=ua(n,t),1),1),t=nc(),null!==e&&(vt(e,1,t),sc(e,t))}function Cc(e,t,n){if(3===e.tag)Tc(e,e,n);else for(;null!==t;){if(3===t.tag){Tc(t,e,n);break}if(1===t.tag){var i=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof i.componentDidCatch&&(null===Xl||!Xl.has(i))){t=js(t,e=ma(t,e=ua(n,e),1),1),e=nc(),null!==t&&(vt(t,1,e),sc(t,e));break}}t=t.return}}function Ec(e,t,n){var i=e.pingCache;null!==i&&i.delete(t),t=nc(),e.pingedLanes|=e.suspendedLanes&n,Nl===e&&(Rl&n)===n&&(4===Ll||3===Ll&&(130023424&Rl)===Rl&&500>Ye()-ql?pc(e,0):Ul|=n),sc(e,t)}function _c(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ht,0===(130023424&(ht<<=1))&&(ht=4194304)));var n=nc();null!==(e=Ds(e,t))&&(vt(e,t,n),sc(e,n))}function Ac(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),_c(e,n)}function Pc(e,t){var n=0;switch(e.tag){case 13:var i=e.stateNode,r=e.memoizedState;null!==r&&(n=r.retryLane);break;case 19:i=e.stateNode;break;default:throw Error(s(314))}null!==i&&i.delete(t),_c(e,n)}function Nc(e,t){return $e(e,t)}function Ic(e,t,n,i){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Rc(e,t,n,i){return new Ic(e,t,n,i)}function Dc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Mc(e,t){var n=e.alternate;return null===n?((n=Rc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Lc(e,t,n,i,r,o){var a=2;if(i=e,"function"===typeof e)Dc(e)&&(a=1);else if("string"===typeof e)a=5;else e:switch(e){case S:return Qc(n.children,r,o,t);case x:a=8,r|=8;break;case T:return(e=Rc(12,n,t,2|r)).elementType=T,e.lanes=o,e;case A:return(e=Rc(13,n,t,r)).elementType=A,e.lanes=o,e;case P:return(e=Rc(19,n,t,r)).elementType=P,e.lanes=o,e;case R:return zc(n,r,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case C:a=10;break e;case E:a=9;break e;case _:a=11;break e;case N:a=14;break e;case I:a=16,i=null;break e}throw Error(s(130,null==e?e:typeof e,""))}return(t=Rc(a,n,t,r)).elementType=e,t.type=i,t.lanes=o,t}function Qc(e,t,n,i){return(e=Rc(7,e,i,t)).lanes=n,e}function zc(e,t,n,i){return(e=Rc(22,e,i,t)).elementType=R,e.lanes=n,e.stateNode={isHidden:!1},e}function jc(e,t,n){return(e=Rc(6,e,null,t)).lanes=n,e}function Uc(e,t,n){return(t=Rc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Vc(e,t,n,i,r){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mt(0),this.expirationTimes=mt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mt(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function Fc(e,t,n,i,r,s,o,a,l){return e=new Vc(e,t,n,a,l),1===t?(t=1,!0===s&&(t|=8)):t=0,s=Rc(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ls(s),e}function qc(e){if(!e)return Er;e:{if(Fe(e=e._reactInternals)!==e||1!==e.tag)throw Error(s(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ir(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(s(171))}if(1===e.tag){var n=e.type;if(Ir(n))return Mr(e,n,t)}return t}function Bc(e,t,n,i,r,s,o,a,l){return(e=Fc(n,i,!0,e,0,s,0,a,l)).context=qc(null),n=e.current,(s=zs(i=nc(),r=ic(n))).callback=void 0!==t&&null!==t?t:null,js(n,s,r),e.current.lanes=r,vt(e,r,i),sc(e,i),e}function Wc(e,t,n,i){var r=t.current,s=nc(),o=ic(r);return n=qc(n),null===t.context?t.context=n:t.pendingContext=n,(t=zs(s,o)).payload={element:e},null!==(i=void 0===i?null:i)&&(t.callback=i),null!==(e=js(r,t,o))&&(rc(e,r,o,s),Us(e,r,o)),o}function Hc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function $c(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Xc(e,t){$c(e,t),(e=e.alternate)&&$c(e,t)}Tl=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ar.current)Oa=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return Oa=!1,function(e,t,n){switch(t.tag){case 3:Na(t),fs();break;case 5:Ys(t);break;case 1:Ir(t.type)&&Lr(t);break;case 4:Gs(t,t.stateNode.containerInfo);break;case 10:var i=t.type._context,r=t.memoizedProps.value;Cr(ks,i._currentValue),i._currentValue=r;break;case 13:if(null!==(i=t.memoizedState))return null!==i.dehydrated?(Cr(Zs,1&Zs.current),t.flags|=128,null):0!==(n&t.child.childLanes)?ja(e,t,n):(Cr(Zs,1&Zs.current),null!==(e=Ha(e,t,n))?e.sibling:null);Cr(Zs,1&Zs.current);break;case 19:if(i=0!==(n&t.childLanes),0!==(128&e.flags)){if(i)return Ba(e,t,n);t.flags|=128}if(null!==(r=t.memoizedState)&&(r.rendering=null,r.tail=null,r.lastEffect=null),Cr(Zs,Zs.current),i)break;return null;case 22:case 23:return t.lanes=0,Ca(e,t,n)}return Ha(e,t,n)}(e,t,n);Oa=0!==(131072&e.flags)}else Oa=!1,rs&&0!==(1048576&t.flags)&&Zr(t,Hr,t.index);switch(t.lanes=0,t.tag){case 2:var i=t.type;Wa(e,t),e=t.pendingProps;var r=Nr(t,_r.current);As(t,n),r=vo(null,t,i,e,r,n);var o=yo();return t.flags|=1,"object"===typeof r&&null!==r&&"function"===typeof r.render&&void 0===r.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ir(i)?(o=!0,Lr(t)):o=!1,t.memoizedState=null!==r.state&&void 0!==r.state?r.state:null,Ls(t),r.updater=oa,t.stateNode=r,r._reactInternals=t,ha(t,i,e,n),t=Pa(null,t,i,!0,o,n)):(t.tag=0,rs&&o&&es(t),ka(null,t,r,n),t=t.child),t;case 16:i=t.elementType;e:{switch(Wa(e,t),e=t.pendingProps,i=(r=i._init)(i._payload),t.type=i,r=t.tag=function(e){if("function"===typeof e)return Dc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===_)return 11;if(e===N)return 14}return 2}(i),e=ra(i,e),r){case 0:t=_a(null,t,i,e,n);break e;case 1:t=Aa(null,t,i,e,n);break e;case 11:t=Sa(null,t,i,e,n);break e;case 14:t=xa(null,t,i,ra(i.type,e),n);break e}throw Error(s(306,i,""))}return t;case 0:return i=t.type,r=t.pendingProps,_a(e,t,i,r=t.elementType===i?r:ra(i,r),n);case 1:return i=t.type,r=t.pendingProps,Aa(e,t,i,r=t.elementType===i?r:ra(i,r),n);case 3:e:{if(Na(t),null===e)throw Error(s(387));i=t.pendingProps,r=(o=t.memoizedState).element,Qs(e,t),Fs(t,i,null,n);var a=t.memoizedState;if(i=a.element,o.isDehydrated){if(o={element:i,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Ia(e,t,i,n,r=ua(Error(s(423)),t));break e}if(i!==r){t=Ia(e,t,i,n,r=ua(Error(s(424)),t));break e}for(is=cr(t.stateNode.containerInfo.firstChild),ns=t,rs=!0,ss=null,n=Os(t,null,i,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(fs(),i===r){t=Ha(e,t,n);break e}ka(e,t,i,n)}t=t.child}return t;case 5:return Ys(t),null===e&&cs(t),i=t.type,r=t.pendingProps,o=null!==e?e.memoizedProps:null,a=r.children,nr(i,r)?a=null:null!==o&&nr(i,o)&&(t.flags|=32),Ea(e,t),ka(e,t,a,n),t.child;case 6:return null===e&&cs(t),null;case 13:return ja(e,t,n);case 4:return Gs(t,t.stateNode.containerInfo),i=t.pendingProps,null===e?t.child=bs(t,null,i,n):ka(e,t,i,n),t.child;case 11:return i=t.type,r=t.pendingProps,Sa(e,t,i,r=t.elementType===i?r:ra(i,r),n);case 7:return ka(e,t,t.pendingProps,n),t.child;case 8:case 12:return ka(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(i=t.type._context,r=t.pendingProps,o=t.memoizedProps,a=r.value,Cr(ks,i._currentValue),i._currentValue=a,null!==o)if(ai(o.value,a)){if(o.children===r.children&&!Ar.current){t=Ha(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var l=o.dependencies;if(null!==l){a=o.child;for(var c=l.firstContext;null!==c;){if(c.context===i){if(1===o.tag){(c=zs(-1,n&-n)).tag=2;var h=o.updateQueue;if(null!==h){var u=(h=h.shared).pending;null===u?c.next=c:(c.next=u.next,u.next=c),h.pending=c}}o.lanes|=n,null!==(c=o.alternate)&&(c.lanes|=n),_s(o.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===o.tag)a=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(a=o.return))throw Error(s(341));a.lanes|=n,null!==(l=a.alternate)&&(l.lanes|=n),_s(a,n,t),a=o.sibling}else a=o.child;if(null!==a)a.return=o;else for(a=o;null!==a;){if(a===t){a=null;break}if(null!==(o=a.sibling)){o.return=a.return,a=o;break}a=a.return}o=a}ka(e,t,r.children,n),t=t.child}return t;case 9:return r=t.type,i=t.pendingProps.children,As(t,n),i=i(r=Ps(r)),t.flags|=1,ka(e,t,i,n),t.child;case 14:return r=ra(i=t.type,t.pendingProps),xa(e,t,i,r=ra(i.type,r),n);case 15:return Ta(e,t,t.type,t.pendingProps,n);case 17:return i=t.type,r=t.pendingProps,r=t.elementType===i?r:ra(i,r),Wa(e,t),t.tag=1,Ir(i)?(e=!0,Lr(t)):e=!1,As(t,n),la(t,i,r),ha(t,i,r,n),Pa(null,t,i,!0,e,n);case 19:return Ba(e,t,n);case 22:return Ca(e,t,n)}throw Error(s(156,t.tag))};var Gc="function"===typeof reportError?reportError:function(e){console.error(e)};function Kc(e){this._internalRoot=e}function Yc(e){this._internalRoot=e}function Jc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Zc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function eh(){}function th(e,t,n,i,r){var s=n._reactRootContainer;if(s){var o=s;if("function"===typeof r){var a=r;r=function(){var e=Hc(o);a.call(e)}}Wc(t,o,e,r)}else o=function(e,t,n,i,r){if(r){if("function"===typeof i){var s=i;i=function(){var e=Hc(o);s.call(e)}}var o=Bc(t,i,e,0,null,!1,0,"",eh);return e._reactRootContainer=o,e[pr]=o.current,Fi(8===e.nodeType?e.parentNode:e),dc(),o}for(;r=e.lastChild;)e.removeChild(r);if("function"===typeof i){var a=i;i=function(){var e=Hc(l);a.call(e)}}var l=Fc(e,0,!1,null,0,!1,0,"",eh);return e._reactRootContainer=l,e[pr]=l.current,Fi(8===e.nodeType?e.parentNode:e),dc((function(){Wc(t,l,n,i)})),l}(n,t,e,r,i);return Hc(o)}Yc.prototype.render=Kc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(s(409));Wc(e,t,null,null)},Yc.prototype.unmount=Kc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;dc((function(){Wc(null,e,null,null)})),t[pr]=null}},Yc.prototype.unstable_scheduleHydration=function(e){if(e){var t=xt();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Rt.length&&0!==t&&t<Rt[n].priority;n++);Rt.splice(n,0,e),0===n&&Qt(e)}},Ot=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ut(t.pendingLanes);0!==n&&(yt(t,1|n),sc(t,Ye()),0===(6&Pl)&&(Bl=Ye()+500,Fr()))}break;case 13:dc((function(){var t=Ds(e,1);if(null!==t){var n=nc();rc(t,e,1,n)}})),Xc(e,1)}},kt=function(e){if(13===e.tag){var t=Ds(e,134217728);if(null!==t)rc(t,e,134217728,nc());Xc(e,134217728)}},St=function(e){if(13===e.tag){var t=ic(e),n=Ds(e,t);if(null!==n)rc(n,e,t,nc());Xc(e,t)}},xt=function(){return wt},Tt=function(e,t){var n=wt;try{return wt=e,t()}finally{wt=n}},ke=function(e,t,n){switch(t){case"input":if(J(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var i=n[t];if(i!==e&&i.form===e.form){var r=Or(i);if(!r)throw Error(s(90));$(i),J(i,r)}}}break;case"textarea":se(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},_e=uc,Ae=dc;var nh={usingClientEntryPoint:!1,Events:[wr,br,Or,Ce,Ee,uc]},ih={findFiberByHostInstance:yr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},rh={bundleType:ih.bundleType,version:ih.version,rendererPackageName:ih.rendererPackageName,rendererConfig:ih.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=We(e))?null:e.stateNode},findFiberByHostInstance:ih.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var sh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!sh.isDisabled&&sh.supportsFiber)try{rt=sh.inject(rh),st=sh}catch(he){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=nh,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Jc(t))throw Error(s(200));return function(e,t,n){var i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:k,key:null==i?null:""+i,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Jc(e))throw Error(s(299));var n=!1,i="",r=Gc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(i=t.identifierPrefix),void 0!==t.onRecoverableError&&(r=t.onRecoverableError)),t=Fc(e,1,!1,null,0,n,0,i,r),e[pr]=t.current,Fi(8===e.nodeType?e.parentNode:e),new Kc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(s(188));throw e=Object.keys(e).join(","),Error(s(268,e))}return e=null===(e=We(t))?null:e.stateNode},t.flushSync=function(e){return dc(e)},t.hydrate=function(e,t,n){if(!Zc(t))throw Error(s(200));return th(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Jc(e))throw Error(s(405));var i=null!=n&&n.hydratedSources||null,r=!1,o="",a=Gc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(r=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(a=n.onRecoverableError)),t=Bc(t,null,e,1,null!=n?n:null,r,0,o,a),e[pr]=t.current,Fi(e),i)for(e=0;e<i.length;e++)r=(r=(n=i[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,r]:t.mutableSourceEagerHydrationData.push(n,r);return new Yc(t)},t.render=function(e,t,n){if(!Zc(t))throw Error(s(200));return th(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Zc(e))throw Error(s(40));return!!e._reactRootContainer&&(dc((function(){th(null,null,e,!1,(function(){e._reactRootContainer=null,e[pr]=null}))})),!0)},t.unstable_batchedUpdates=uc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,i){if(!Zc(n))throw Error(s(200));if(null==e||void 0===e._reactInternals)throw Error(s(38));return th(e,t,n,!1,i)},t.version="18.3.1-next-f1338f8080-20240426"},775:(e,t,n)=>{var i=n(998);t.createRoot=i.createRoot,t.hydrateRoot=i.hydrateRoot},998:(e,t,n)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(914)},9:(e,t,n)=>{var i=n(483),r=Symbol.for("react.element"),s=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,a=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var i,s={},c=null,h=null;for(i in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(h=t.ref),t)o.call(t,i)&&!l.hasOwnProperty(i)&&(s[i]=t[i]);if(e&&e.defaultProps)for(i in t=e.defaultProps)void 0===s[i]&&(s[i]=t[i]);return{$$typeof:r,type:e,key:c,ref:h,props:s,_owner:a.current}}t.Fragment=s,t.jsx=c,t.jsxs=c},146:(e,t)=>{var n=Symbol.for("react.element"),i=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),f=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g=Object.assign,m={};function v(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}function y(){}function w(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=v.prototype;var b=w.prototype=new y;b.constructor=w,g(b,v.prototype),b.isPureReactComponent=!0;var O=Array.isArray,k=Object.prototype.hasOwnProperty,S={current:null},x={key:!0,ref:!0,__self:!0,__source:!0};function T(e,t,i){var r,s={},o=null,a=null;if(null!=t)for(r in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(o=""+t.key),t)k.call(t,r)&&!x.hasOwnProperty(r)&&(s[r]=t[r]);var l=arguments.length-2;if(1===l)s.children=i;else if(1<l){for(var c=Array(l),h=0;h<l;h++)c[h]=arguments[h+2];s.children=c}if(e&&e.defaultProps)for(r in l=e.defaultProps)void 0===s[r]&&(s[r]=l[r]);return{$$typeof:n,type:e,key:o,ref:a,props:s,_owner:S.current}}function C(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var E=/\/+/g;function _(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function A(e,t,r,s,o){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var l=!1;if(null===e)l=!0;else switch(a){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case i:l=!0}}if(l)return o=o(l=e),e=""===s?"."+_(l,0):s,O(o)?(r="",null!=e&&(r=e.replace(E,"$&/")+"/"),A(o,t,r,"",(function(e){return e}))):null!=o&&(C(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,r+(!o.key||l&&l.key===o.key?"":(""+o.key).replace(E,"$&/")+"/")+e)),t.push(o)),1;if(l=0,s=""===s?".":s+":",O(e))for(var c=0;c<e.length;c++){var h=s+_(a=e[c],c);l+=A(a,t,r,h,o)}else if(h=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"===typeof h)for(e=h.call(e),c=0;!(a=e.next()).done;)l+=A(a=a.value,t,r,h=s+_(a,c++),o);else if("object"===a)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function P(e,t,n){if(null==e)return e;var i=[],r=0;return A(e,i,"","",(function(e){return t.call(n,e,r++)})),i}function N(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var I={current:null},R={transition:null},D={ReactCurrentDispatcher:I,ReactCurrentBatchConfig:R,ReactCurrentOwner:S};function M(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:P,forEach:function(e,t,n){P(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return P(e,(function(){t++})),t},toArray:function(e){return P(e,(function(e){return e}))||[]},only:function(e){if(!C(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=v,t.Fragment=r,t.Profiler=o,t.PureComponent=w,t.StrictMode=s,t.Suspense=h,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=D,t.act=M,t.cloneElement=function(e,t,i){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=g({},e.props),s=e.key,o=e.ref,a=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,a=S.current),void 0!==t.key&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)k.call(t,c)&&!x.hasOwnProperty(c)&&(r[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)r.children=i;else if(1<c){l=Array(c);for(var h=0;h<c;h++)l[h]=arguments[h+2];r.children=l}return{$$typeof:n,type:e.type,key:s,ref:o,props:r,_owner:a}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:a,_context:e},e.Consumer=e},t.createElement=T,t.createFactory=function(e){var t=T.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=C,t.lazy=function(e){return{$$typeof:d,_payload:{_status:-1,_result:e},_init:N}},t.memo=function(e,t){return{$$typeof:u,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=R.transition;R.transition={};try{e()}finally{R.transition=t}},t.unstable_act=M,t.useCallback=function(e,t){return I.current.useCallback(e,t)},t.useContext=function(e){return I.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return I.current.useDeferredValue(e)},t.useEffect=function(e,t){return I.current.useEffect(e,t)},t.useId=function(){return I.current.useId()},t.useImperativeHandle=function(e,t,n){return I.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return I.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return I.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return I.current.useMemo(e,t)},t.useReducer=function(e,t,n){return I.current.useReducer(e,t,n)},t.useRef=function(e){return I.current.useRef(e)},t.useState=function(e){return I.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return I.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return I.current.useTransition()},t.version="18.3.1"},483:(e,t,n)=>{e.exports=n(146)},723:(e,t,n)=>{e.exports=n(9)},122:(e,t)=>{function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var i=n-1>>>1,r=e[i];if(!(0<s(r,t)))break e;e[i]=t,e[n]=r,n=i}}function i(e){return 0===e.length?null:e[0]}function r(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var i=0,r=e.length,o=r>>>1;i<o;){var a=2*(i+1)-1,l=e[a],c=a+1,h=e[c];if(0>s(l,n))c<r&&0>s(h,l)?(e[i]=h,e[c]=n,i=c):(e[i]=l,e[a]=n,i=a);else{if(!(c<r&&0>s(h,n)))break e;e[i]=h,e[c]=n,i=c}}}return t}function s(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var c=[],h=[],u=1,d=null,f=3,p=!1,g=!1,m=!1,v="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,w="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=i(h);null!==t;){if(null===t.callback)r(h);else{if(!(t.startTime<=e))break;r(h),t.sortIndex=t.expirationTime,n(c,t)}t=i(h)}}function O(e){if(m=!1,b(e),!g)if(null!==i(c))g=!0,R(k);else{var t=i(h);null!==t&&D(O,t.startTime-e)}}function k(e,n){g=!1,m&&(m=!1,y(C),C=-1),p=!0;var s=f;try{for(b(n),d=i(c);null!==d&&(!(d.expirationTime>n)||e&&!A());){var o=d.callback;if("function"===typeof o){d.callback=null,f=d.priorityLevel;var a=o(d.expirationTime<=n);n=t.unstable_now(),"function"===typeof a?d.callback=a:d===i(c)&&r(c),b(n)}else r(c);d=i(c)}if(null!==d)var l=!0;else{var u=i(h);null!==u&&D(O,u.startTime-n),l=!1}return l}finally{d=null,f=s,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var S,x=!1,T=null,C=-1,E=5,_=-1;function A(){return!(t.unstable_now()-_<E)}function P(){if(null!==T){var e=t.unstable_now();_=e;var n=!0;try{n=T(!0,e)}finally{n?S():(x=!1,T=null)}}else x=!1}if("function"===typeof w)S=function(){w(P)};else if("undefined"!==typeof MessageChannel){var N=new MessageChannel,I=N.port2;N.port1.onmessage=P,S=function(){I.postMessage(null)}}else S=function(){v(P,0)};function R(e){T=e,x||(x=!0,S())}function D(e,n){C=v((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){g||p||(g=!0,R(k))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return i(c)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,r,s){var o=t.unstable_now();switch("object"===typeof s&&null!==s?s="number"===typeof(s=s.delay)&&0<s?o+s:o:s=o,e){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return e={id:u++,callback:r,priorityLevel:e,startTime:s,expirationTime:a=s+a,sortIndex:-1},s>o?(e.sortIndex=s,n(h,e),null===i(c)&&e===i(h)&&(m?(y(C),C=-1):m=!0,D(O,s-o))):(e.sortIndex=a,n(c,e),g||p||(g=!0,R(k))),e},t.unstable_shouldYield=A,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},557:(e,t,n)=>{e.exports=n(122)}},t={};function n(i){var r=t[i];if(void 0!==r)return r.exports;var s=t[i]={exports:{}};return e[i](s,s.exports,n),s.exports}n.m=e,(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(i,r){if(1&r&&(i=this(i)),8&r)return i;if("object"===typeof i&&i){if(4&r&&i.__esModule)return i;if(16&r&&"function"===typeof i.then)return i}var s=Object.create(null);n.r(s);var o={};e=e||[null,t({}),t([]),t(t)];for(var a=2&r&&i;"object"==typeof a&&!~e.indexOf(a);a=t(a))Object.getOwnPropertyNames(a).forEach((e=>o[e]=()=>i[e]));return o.default=()=>i,n.d(s,o),s}})(),n.d=(e,t)=>{for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.f={},n.e=e=>Promise.all(Object.keys(n.f).reduce(((t,i)=>(n.f[i](e,t),t)),[])),n.u=e=>"static/js/"+e+".7d0b3d8c.chunk.js",n.miniCssF=e=>{},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="DYA:";n.l=(i,r,s,o)=>{if(e[i])e[i].push(r);else{var a,l;if(void 0!==s)for(var c=document.getElementsByTagName("script"),h=0;h<c.length;h++){var u=c[h];if(u.getAttribute("src")==i||u.getAttribute("data-webpack")==t+s){a=u;break}}a||(l=!0,(a=document.createElement("script")).charset="utf-8",a.timeout=120,n.nc&&a.setAttribute("nonce",n.nc),a.setAttribute("data-webpack",t+s),a.src=i),e[i]=[r];var d=(t,n)=>{a.onerror=a.onload=null,clearTimeout(f);var r=e[i];if(delete e[i],a.parentNode&&a.parentNode.removeChild(a),r&&r.forEach((e=>e(n))),t)return t(n)},f=setTimeout(d.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=d.bind(null,a.onerror),a.onload=d.bind(null,a.onload),l&&document.head.appendChild(a)}}})(),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/DYA/",(()=>{var e={792:0};n.f.j=(t,i)=>{var r=n.o(e,t)?e[t]:void 0;if(0!==r)if(r)i.push(r[2]);else{var s=new Promise(((n,i)=>r=e[t]=[n,i]));i.push(r[2]=s);var o=n.p+n.u(t),a=new Error;n.l(o,(i=>{if(n.o(e,t)&&(0!==(r=e[t])&&(e[t]=void 0),r)){var s=i&&("load"===i.type?"missing":i.type),o=i&&i.target&&i.target.src;a.message="Loading chunk "+t+" failed.\n("+s+": "+o+")",a.name="ChunkLoadError",a.type=s,a.request=o,r[1](a)}}),"chunk-"+t,t)}};var t=(t,i)=>{var r,s,o=i[0],a=i[1],l=i[2],c=0;if(o.some((t=>0!==e[t]))){for(r in a)n.o(a,r)&&(n.m[r]=a[r]);if(l)l(n)}for(t&&t(i);c<o.length;c++)s=o[c],n.o(e,s)&&e[s]&&e[s][0](),e[s]=0},i=self.webpackChunkDYA=self.webpackChunkDYA||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))})();var i={};n.r(i),n.d(i,{hasBrowserEnv:()=>KQ,hasStandardBrowserEnv:()=>YQ,hasStandardBrowserWebWorkerEnv:()=>ZQ,origin:()=>ez});var r,s=n(483),o=n.t(s,2),a=n(775),l=n(998),c=n.t(l,2);function h(){return h=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},h.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(r||(r={}));const u="popstate";function d(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function f(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function p(e,t){return{usr:e.state,key:e.key,idx:t}}function g(e,t,n,i){return void 0===n&&(n=null),h({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?v(t):t,{state:n,key:t&&t.key||i||Math.random().toString(36).substr(2,8)})}function m(e){let{pathname:t="/",search:n="",hash:i=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),i&&"#"!==i&&(t+="#"===i.charAt(0)?i:"#"+i),t}function v(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let i=e.indexOf("?");i>=0&&(t.search=e.substr(i),e=e.substr(0,i)),e&&(t.pathname=e)}return t}function y(e,t,n,i){void 0===i&&(i={});let{window:s=document.defaultView,v5Compat:o=!1}=i,a=s.history,l=r.Pop,c=null,f=v();function v(){return(a.state||{idx:null}).idx}function y(){l=r.Pop;let e=v(),t=null==e?null:e-f;f=e,c&&c({action:l,location:b.location,delta:t})}function w(e){let t="null"!==s.location.origin?s.location.origin:s.location.href,n="string"===typeof e?e:m(e);return n=n.replace(/ $/,"%20"),d(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==f&&(f=0,a.replaceState(h({},a.state,{idx:f}),""));let b={get action(){return l},get location(){return e(s,a)},listen(e){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(u,y),c=e,()=>{s.removeEventListener(u,y),c=null}},createHref:e=>t(s,e),createURL:w,encodeLocation(e){let t=w(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){l=r.Push;let i=g(b.location,e,t);n&&n(i,e),f=v()+1;let h=p(i,f),u=b.createHref(i);try{a.pushState(h,"",u)}catch(d){if(d instanceof DOMException&&"DataCloneError"===d.name)throw d;s.location.assign(u)}o&&c&&c({action:l,location:b.location,delta:1})},replace:function(e,t){l=r.Replace;let i=g(b.location,e,t);n&&n(i,e),f=v();let s=p(i,f),h=b.createHref(i);a.replaceState(s,"",h),o&&c&&c({action:l,location:b.location,delta:0})},go:e=>a.go(e)};return b}var w;!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(w||(w={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function b(e,t,n){return void 0===n&&(n="/"),O(e,t,n,!1)}function O(e,t,n,i){let r=M(("string"===typeof t?v(t):t).pathname||"/",n);if(null==r)return null;let s=k(e);!function(e){e.sort(((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every(((e,n)=>e===t[n]));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((e=>e.childrenIndex)),t.routesMeta.map((e=>e.childrenIndex)))))}(s);let o=null;for(let a=0;null==o&&a<s.length;++a){let e=D(r);o=I(s[a],e,i)}return o}function k(e,t,n,i){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===i&&(i="");let r=(e,r,s)=>{let o={relativePath:void 0===s?e.path||"":s,caseSensitive:!0===e.caseSensitive,childrenIndex:r,route:e};o.relativePath.startsWith("/")&&(d(o.relativePath.startsWith(i),'Absolute route path "'+o.relativePath+'" nested under path "'+i+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),o.relativePath=o.relativePath.slice(i.length));let a=U([i,o.relativePath]),l=n.concat(o);e.children&&e.children.length>0&&(d(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+a+'".'),k(e.children,t,l,a)),(null!=e.path||e.index)&&t.push({path:a,score:N(a,e.index),routesMeta:l})};return e.forEach(((e,t)=>{var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?"))for(let i of S(e.path))r(e,t,i);else r(e,t)})),t}function S(e){let t=e.split("/");if(0===t.length)return[];let[n,...i]=t,r=n.endsWith("?"),s=n.replace(/\?$/,"");if(0===i.length)return r?[s,""]:[s];let o=S(i.join("/")),a=[];return a.push(...o.map((e=>""===e?s:[s,e].join("/")))),r&&a.push(...o),a.map((t=>e.startsWith("/")&&""===t?"/":t))}const x=/^:[\w-]+$/,T=3,C=2,E=1,_=10,A=-2,P=e=>"*"===e;function N(e,t){let n=e.split("/"),i=n.length;return n.some(P)&&(i+=A),t&&(i+=C),n.filter((e=>!P(e))).reduce(((e,t)=>e+(x.test(t)?T:""===t?E:_)),i)}function I(e,t,n){void 0===n&&(n=!1);let{routesMeta:i}=e,r={},s="/",o=[];for(let a=0;a<i.length;++a){let e=i[a],l=a===i.length-1,c="/"===s?t:t.slice(s.length)||"/",h=R({path:e.relativePath,caseSensitive:e.caseSensitive,end:l},c),u=e.route;if(!h&&l&&n&&!i[i.length-1].route.index&&(h=R({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},c)),!h)return null;Object.assign(r,h.params),o.push({params:r,pathname:U([s,h.pathname]),pathnameBase:V(U([s,h.pathnameBase])),route:u}),"/"!==h.pathnameBase&&(s=U([s,h.pathnameBase]))}return o}function R(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,i]=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);f("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let i=[],r="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,((e,t,n)=>(i.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)")));e.endsWith("*")?(i.push({paramName:"*"}),r+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?r+="\\/*$":""!==e&&"/"!==e&&(r+="(?:(?=\\/|$))");let s=new RegExp(r,t?void 0:"i");return[s,i]}(e.path,e.caseSensitive,e.end),r=t.match(n);if(!r)return null;let s=r[0],o=s.replace(/(.)\/+$/,"$1"),a=r.slice(1);return{params:i.reduce(((e,t,n)=>{let{paramName:i,isOptional:r}=t;if("*"===i){let e=a[n]||"";o=s.slice(0,s.length-e.length).replace(/(.)\/+$/,"$1")}const l=a[n];return e[i]=r&&!l?void 0:(l||"").replace(/%2F/g,"/"),e}),{}),pathname:s,pathnameBase:o,pattern:e}}function D(e){try{return e.split("/").map((e=>decodeURIComponent(e).replace(/\//g,"%2F"))).join("/")}catch(t){return f(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function M(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,i=e.charAt(n);return i&&"/"!==i?null:e.slice(n)||"/"}function L(e,t,n,i){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(i)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function Q(e){return e.filter(((e,t)=>0===t||e.route.path&&e.route.path.length>0))}function z(e,t){let n=Q(e);return t?n.map(((e,t)=>t===n.length-1?e.pathname:e.pathnameBase)):n.map((e=>e.pathnameBase))}function j(e,t,n,i){let r;void 0===i&&(i=!1),"string"===typeof e?r=v(e):(r=h({},e),d(!r.pathname||!r.pathname.includes("?"),L("?","pathname","search",r)),d(!r.pathname||!r.pathname.includes("#"),L("#","pathname","hash",r)),d(!r.search||!r.search.includes("#"),L("#","search","hash",r)));let s,o=""===e||""===r.pathname,a=o?"/":r.pathname;if(null==a)s=n;else{let e=t.length-1;if(!i&&a.startsWith("..")){let t=a.split("/");for(;".."===t[0];)t.shift(),e-=1;r.pathname=t.join("/")}s=e>=0?t[e]:"/"}let l=function(e,t){void 0===t&&(t="/");let{pathname:n,search:i="",hash:r=""}="string"===typeof e?v(e):e,s=n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(n,t):t;return{pathname:s,search:F(i),hash:q(r)}}(r,s),c=a&&"/"!==a&&a.endsWith("/"),u=(o||"."===a)&&n.endsWith("/");return l.pathname.endsWith("/")||!c&&!u||(l.pathname+="/"),l}const U=e=>e.join("/").replace(/\/\/+/g,"/"),V=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),F=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",q=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";Error;function B(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}const W=["post","put","patch","delete"],H=(new Set(W),["get",...W]);new Set(H),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function $(){return $=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},$.apply(this,arguments)}const X=s.createContext(null);const G=s.createContext(null);const K=s.createContext(null);const Y=s.createContext(null);const J=s.createContext({outlet:null,matches:[],isDataRoute:!1});const Z=s.createContext(null);function ee(){return null!=s.useContext(Y)}function te(){return ee()||d(!1),s.useContext(Y).location}function ne(e){s.useContext(K).static||s.useLayoutEffect(e)}function ie(){let{isDataRoute:e}=s.useContext(J);return e?function(){let{router:e}=fe(ue.UseNavigateStable),t=ge(de.UseNavigateStable),n=s.useRef(!1);ne((()=>{n.current=!0}));let i=s.useCallback((function(i,r){void 0===r&&(r={}),n.current&&("number"===typeof i?e.navigate(i):e.navigate(i,$({fromRouteId:t},r)))}),[e,t]);return i}():function(){ee()||d(!1);let e=s.useContext(X),{basename:t,future:n,navigator:i}=s.useContext(K),{matches:r}=s.useContext(J),{pathname:o}=te(),a=JSON.stringify(z(r,n.v7_relativeSplatPath)),l=s.useRef(!1);return ne((()=>{l.current=!0})),s.useCallback((function(n,r){if(void 0===r&&(r={}),!l.current)return;if("number"===typeof n)return void i.go(n);let s=j(n,JSON.parse(a),o,"path"===r.relative);null==e&&"/"!==t&&(s.pathname="/"===s.pathname?t:U([t,s.pathname])),(r.replace?i.replace:i.push)(s,r.state,r)}),[t,i,a,o,e])}()}function re(){let{matches:e}=s.useContext(J),t=e[e.length-1];return t?t.params:{}}function se(e,t,n,i){ee()||d(!1);let{navigator:o}=s.useContext(K),{matches:a}=s.useContext(J),l=a[a.length-1],c=l?l.params:{},h=(l&&l.pathname,l?l.pathnameBase:"/");l&&l.route;let u,f=te();if(t){var p;let e="string"===typeof t?v(t):t;"/"===h||(null==(p=e.pathname)?void 0:p.startsWith(h))||d(!1),u=e}else u=f;let g=u.pathname||"/",m=g;if("/"!==h){let e=h.replace(/^\//,"").split("/");m="/"+g.replace(/^\//,"").split("/").slice(e.length).join("/")}let y=b(e,{pathname:m});let w=he(y&&y.map((e=>Object.assign({},e,{params:Object.assign({},c,e.params),pathname:U([h,o.encodeLocation?o.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?h:U([h,o.encodeLocation?o.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])}))),a,n,i);return t&&w?s.createElement(Y.Provider,{value:{location:$({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:r.Pop}},w):w}function oe(){let e=function(){var e;let t=s.useContext(Z),n=pe(de.UseRouteError),i=ge(de.UseRouteError);if(void 0!==t)return t;return null==(e=n.errors)?void 0:e[i]}(),t=B(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,i="rgba(200,200,200, 0.5)",r={padding:"0.5rem",backgroundColor:i};return s.createElement(s.Fragment,null,s.createElement("h2",null,"Unexpected Application Error!"),s.createElement("h3",{style:{fontStyle:"italic"}},t),n?s.createElement("pre",{style:r},n):null,null)}const ae=s.createElement(oe,null);class le extends s.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?s.createElement(J.Provider,{value:this.props.routeContext},s.createElement(Z.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function ce(e){let{routeContext:t,match:n,children:i}=e,r=s.useContext(X);return r&&r.static&&r.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=n.route.id),s.createElement(J.Provider,{value:t},i)}function he(e,t,n,i){var r;if(void 0===t&&(t=[]),void 0===n&&(n=null),void 0===i&&(i=null),null==e){var o;if(null==(o=n)||!o.errors)return null;e=n.matches}let a=e,l=null==(r=n)?void 0:r.errors;if(null!=l){let e=a.findIndex((e=>e.route.id&&void 0!==(null==l?void 0:l[e.route.id])));e>=0||d(!1),a=a.slice(0,Math.min(a.length,e+1))}let c=!1,h=-1;if(n&&i&&i.v7_partialHydration)for(let s=0;s<a.length;s++){let e=a[s];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(h=s),e.route.id){let{loaderData:t,errors:i}=n,r=e.route.loader&&void 0===t[e.route.id]&&(!i||void 0===i[e.route.id]);if(e.route.lazy||r){c=!0,a=h>=0?a.slice(0,h+1):[a[0]];break}}}return a.reduceRight(((e,i,r)=>{let o,u=!1,d=null,f=null;var p;n&&(o=l&&i.route.id?l[i.route.id]:void 0,d=i.route.errorElement||ae,c&&(h<0&&0===r?(p="route-fallback",!1||me[p]||(me[p]=!0),u=!0,f=null):h===r&&(u=!0,f=i.route.hydrateFallbackElement||null)));let g=t.concat(a.slice(0,r+1)),m=()=>{let t;return t=o?d:u?f:i.route.Component?s.createElement(i.route.Component,null):i.route.element?i.route.element:e,s.createElement(ce,{match:i,routeContext:{outlet:e,matches:g,isDataRoute:null!=n},children:t})};return n&&(i.route.ErrorBoundary||i.route.errorElement||0===r)?s.createElement(le,{location:n.location,revalidation:n.revalidation,component:d,error:o,children:m(),routeContext:{outlet:null,matches:g,isDataRoute:!0}}):m()}),null)}var ue=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(ue||{}),de=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(de||{});function fe(e){let t=s.useContext(X);return t||d(!1),t}function pe(e){let t=s.useContext(G);return t||d(!1),t}function ge(e){let t=function(){let e=s.useContext(J);return e||d(!1),e}(),n=t.matches[t.matches.length-1];return n.route.id||d(!1),n.route.id}const me={};o.startTransition;function ve(e){d(!1)}function ye(e){let{basename:t="/",children:n=null,location:i,navigationType:o=r.Pop,navigator:a,static:l=!1,future:c}=e;ee()&&d(!1);let h=t.replace(/^\/*/,"/"),u=s.useMemo((()=>({basename:h,navigator:a,static:l,future:$({v7_relativeSplatPath:!1},c)})),[h,c,a,l]);"string"===typeof i&&(i=v(i));let{pathname:f="/",search:p="",hash:g="",state:m=null,key:y="default"}=i,w=s.useMemo((()=>{let e=M(f,h);return null==e?null:{location:{pathname:e,search:p,hash:g,state:m,key:y},navigationType:o}}),[h,f,p,g,m,y,o]);return null==w?null:s.createElement(K.Provider,{value:u},s.createElement(Y.Provider,{children:n,value:w}))}function we(e){let{children:t,location:n}=e;return se(be(t),n)}new Promise((()=>{}));s.Component;function be(e,t){void 0===t&&(t=[]);let n=[];return s.Children.forEach(e,((e,i)=>{if(!s.isValidElement(e))return;let r=[...t,i];if(e.type===s.Fragment)return void n.push.apply(n,be(e.props.children,r));e.type!==ve&&d(!1),e.props.index&&e.props.children&&d(!1);let o={id:e.props.id||r.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(o.children=be(e.props.children,r)),n.push(o)})),n}new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);try{window.__reactRouterVersion="6"}catch(kj){}new Map;const Oe=o.startTransition;c.flushSync,o.useId;function ke(e){let{basename:t,children:n,future:i,window:r}=e,o=s.useRef();var a;null==o.current&&(o.current=(void 0===(a={window:r,v5Compat:!0})&&(a={}),y((function(e,t){let{pathname:n,search:i,hash:r}=e.location;return g("",{pathname:n,search:i,hash:r},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){return"string"===typeof t?t:m(t)}),null,a)));let l=o.current,[c,h]=s.useState({action:l.action,location:l.location}),{v7_startTransition:u}=i||{},d=s.useCallback((e=>{u&&Oe?Oe((()=>h(e))):h(e)}),[h,u]);return s.useLayoutEffect((()=>l.listen(d)),[l,d]),s.createElement(ye,{basename:t,children:n,location:c.location,navigationType:c.action,navigator:l,future:i})}"undefined"!==typeof window&&"undefined"!==typeof window.document&&window.document.createElement;var Se,xe;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Se||(Se={})),function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(xe||(xe={}));const Te=function(e){const t=[];let n=0;for(let i=0;i<e.length;i++){let r=e.charCodeAt(i);r<128?t[n++]=r:r<2048?(t[n++]=r>>6|192,t[n++]=63&r|128):55296===(64512&r)&&i+1<e.length&&56320===(64512&e.charCodeAt(i+1))?(r=65536+((1023&r)<<10)+(1023&e.charCodeAt(++i)),t[n++]=r>>18|240,t[n++]=r>>12&63|128,t[n++]=r>>6&63|128,t[n++]=63&r|128):(t[n++]=r>>12|224,t[n++]=r>>6&63|128,t[n++]=63&r|128)}return t},Ce={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<e.length;r+=3){const t=e[r],s=r+1<e.length,o=s?e[r+1]:0,a=r+2<e.length,l=a?e[r+2]:0,c=t>>2,h=(3&t)<<4|o>>4;let u=(15&o)<<2|l>>6,d=63&l;a||(d=64,s||(u=64)),i.push(n[c],n[h],n[u],n[d])}return i.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(Te(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,i=0;for(;n<e.length;){const r=e[n++];if(r<128)t[i++]=String.fromCharCode(r);else if(r>191&&r<224){const s=e[n++];t[i++]=String.fromCharCode((31&r)<<6|63&s)}else if(r>239&&r<365){const s=((7&r)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[i++]=String.fromCharCode(55296+(s>>10)),t[i++]=String.fromCharCode(56320+(1023&s))}else{const s=e[n++],o=e[n++];t[i++]=String.fromCharCode((15&r)<<12|(63&s)<<6|63&o)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<e.length;){const t=n[e.charAt(r++)],s=r<e.length?n[e.charAt(r)]:0;++r;const o=r<e.length?n[e.charAt(r)]:64;++r;const a=r<e.length?n[e.charAt(r)]:64;if(++r,null==t||null==s||null==o||null==a)throw new Ee;const l=t<<2|s>>4;if(i.push(l),64!==o){const e=s<<4&240|o>>2;if(i.push(e),64!==a){const e=o<<6&192|a;i.push(e)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class Ee extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const _e=function(e){return function(e){const t=Te(e);return Ce.encodeByteArray(t,!0)}(e).replace(/\./g,"")},Ae=function(e){try{return Ce.decodeString(e,!0)}catch(kj){console.error("base64Decode failed: ",kj)}return null};const Pe=()=>function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,Ne=()=>{try{return Pe()||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"/DYA",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(kj){return}const t=e&&Ae(e[1]);return t&&JSON.parse(t)})()}catch(kj){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(kj))}},Ie=e=>{var t,n;return null===(n=null===(t=Ne())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]},Re=()=>{var e;return null===(e=Ne())||void 0===e?void 0:e.config},De=e=>{var t;return null===(t=Ne())||void 0===t?void 0:t["_".concat(e)]};class Me{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch((()=>{})),1===e.length?e(t):e(t,n))}}}function Le(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function Qe(){return!function(){var e;const t=null===(e=Ne())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(kj){return!1}}()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ze(){try{return"object"===typeof indexedDB}catch(kj){return!1}}class je extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,je.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ue.prototype.create)}}class Ue{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),i=this.errors[e],r=i?function(e,t){return e.replace(Ve,((e,n)=>{const i=t[n];return null!=i?String(i):"<".concat(n,"?>")}))}(i,t):"Error",s="".concat(this.serviceName,": ").concat(r," (").concat(n,").");return new je(n,s,t)}}const Ve=/\{\$([^}]+)}/g;function Fe(e,t){if(e===t)return!0;const n=Object.keys(e),i=Object.keys(t);for(const r of n){if(!i.includes(r))return!1;const n=e[r],s=t[r];if(qe(n)&&qe(s)){if(!Fe(n,s))return!1}else if(n!==s)return!1}for(const r of i)if(!n.includes(r))return!1;return!0}function qe(e){return null!==e&&"object"===typeof e}function Be(e){const t=[];for(const[n,i]of Object.entries(e))Array.isArray(i)?i.forEach((e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return t.length?"&"+t.join("&"):""}function We(e){const t={};return e.replace(/^\?/,"").split("&").forEach((e=>{if(e){const[n,i]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(i)}})),t}function He(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}class $e{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then((()=>{e(this)})).catch((e=>{this.error(e)}))}next(e){this.forEachObserver((t=>{t.next(e)}))}error(e){this.forEachObserver((t=>{t.error(e)})),this.close(e)}complete(){this.forEachObserver((e=>{e.complete()})),this.close()}subscribe(e,t,n){let i;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");i=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===i.next&&(i.next=Xe),void 0===i.error&&(i.error=Xe),void 0===i.complete&&(i.complete=Xe);const r=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch(kj){}})),this.observers.push(i),r}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(kj){"undefined"!==typeof console&&console.error&&console.error(kj)}}))}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function Xe(){}function Ge(e){return e&&e._delegate?e._delegate:e}class Ke{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Ye="[DEFAULT]";class Je{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new Me;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(kj){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),i=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(i)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(kj){if(i)return null;throw kj}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:Ye})}catch(kj){}for(const[e,t]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:n});t.resolve(e)}catch(kj){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ye;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter((e=>"INTERNAL"in e)).map((e=>e.INTERNAL.delete())),...e.filter((e=>"_delete"in e)).map((e=>e._delete()))])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ye;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ye;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error("".concat(this.name,"(").concat(n,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));const i=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[r,s]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(r)&&s.resolve(i)}return i}onInit(e,t){var n;const i=this.normalizeInstanceIdentifier(t),r=null!==(n=this.onInitCallbacks.get(i))&&void 0!==n?n:new Set;r.add(e),this.onInitCallbacks.set(i,r);const s=this.instances.get(i);return s&&e(s,i),()=>{r.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch(dS){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,i=this.instances.get(t);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:(r=t,r===Ye?void 0:r),options:n}),this.instances.set(t,i),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(i,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,i)}catch(dS){}var r;return i||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ye;return this.component?this.component.multipleInstances?e:Ye:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Ze{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new Je(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const et=[];var tt;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(tt||(tt={}));const nt={debug:tt.DEBUG,verbose:tt.VERBOSE,info:tt.INFO,warn:tt.WARN,error:tt.ERROR,silent:tt.SILENT},it=tt.INFO,rt={[tt.DEBUG]:"log",[tt.VERBOSE]:"log",[tt.INFO]:"info",[tt.WARN]:"warn",[tt.ERROR]:"error"},st=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),i=rt[t];if(!i)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var r=arguments.length,s=new Array(r>2?r-2:0),o=2;o<r;o++)s[o-2]=arguments[o];console[i]("[".concat(n,"]  ").concat(e.name,":"),...s)};class ot{constructor(e){this.name=e,this._logLevel=it,this._logHandler=st,this._userLogHandler=null,et.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in tt))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?nt[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,tt.DEBUG,...t),this._logHandler(this,tt.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,tt.VERBOSE,...t),this._logHandler(this,tt.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,tt.INFO,...t),this._logHandler(this,tt.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,tt.WARN,...t),this._logHandler(this,tt.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,tt.ERROR,...t),this._logHandler(this,tt.ERROR,...t)}}const at=(e,t)=>t.some((t=>e instanceof t));let lt,ct;const ht=new WeakMap,ut=new WeakMap,dt=new WeakMap,ft=new WeakMap,pt=new WeakMap;let gt={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return ut.get(e);if("objectStoreNames"===t)return e.objectStoreNames||dt.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return yt(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function mt(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(ct||(ct=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return e.apply(wt(this),n),yt(ht.get(this))}:function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return yt(e.apply(wt(this),n))}:function(t){for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];const s=e.call(wt(this),t,...i);return dt.set(s,t.sort?t.sort():[t]),yt(s)}}function vt(e){return"function"===typeof e?mt(e):(e instanceof IDBTransaction&&function(e){if(ut.has(e))return;const t=new Promise(((t,n)=>{const i=()=>{e.removeEventListener("complete",r),e.removeEventListener("error",s),e.removeEventListener("abort",s)},r=()=>{t(),i()},s=()=>{n(e.error||new DOMException("AbortError","AbortError")),i()};e.addEventListener("complete",r),e.addEventListener("error",s),e.addEventListener("abort",s)}));ut.set(e,t)}(e),at(e,lt||(lt=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,gt):e)}function yt(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const i=()=>{e.removeEventListener("success",r),e.removeEventListener("error",s)},r=()=>{t(yt(e.result)),i()},s=()=>{n(e.error),i()};e.addEventListener("success",r),e.addEventListener("error",s)}));return t.then((t=>{t instanceof IDBCursor&&ht.set(t,e)})).catch((()=>{})),pt.set(t,e),t}(e);if(ft.has(e))return ft.get(e);const t=vt(e);return t!==e&&(ft.set(e,t),pt.set(t,e)),t}const wt=e=>pt.get(e);const bt=["get","getKey","getAll","getAllKeys","count"],Ot=["put","add","delete","clear"],kt=new Map;function St(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(kt.get(t))return kt.get(t);const n=t.replace(/FromIndex$/,""),i=t!==n,r=Ot.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!r&&!bt.includes(n))return;const s=async function(e){const t=this.transaction(e,r?"readwrite":"readonly");let s=t.store;for(var o=arguments.length,a=new Array(o>1?o-1:0),l=1;l<o;l++)a[l-1]=arguments[l];return i&&(s=s.index(a.shift())),(await Promise.all([s[n](...a),r&&t.done]))[0]};return kt.set(t,s),s}gt=(e=>({...e,get:(t,n,i)=>St(t,n)||e.get(t,n,i),has:(t,n)=>!!St(t,n)||e.has(t,n)}))(gt);class xt{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map((e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((e=>e)).join(" ")}}const Tt="@firebase/app",Ct="0.10.7",Et=new ot("@firebase/app"),_t="@firebase/app-compat",At="@firebase/analytics-compat",Pt="@firebase/analytics",Nt="@firebase/app-check-compat",It="@firebase/app-check",Rt="@firebase/auth",Dt="@firebase/auth-compat",Mt="@firebase/database",Lt="@firebase/database-compat",Qt="@firebase/functions",zt="@firebase/functions-compat",jt="@firebase/installations",Ut="@firebase/installations-compat",Vt="@firebase/messaging",Ft="@firebase/messaging-compat",qt="@firebase/performance",Bt="@firebase/performance-compat",Wt="@firebase/remote-config",Ht="@firebase/remote-config-compat",$t="@firebase/storage",Xt="@firebase/storage-compat",Gt="@firebase/firestore",Kt="@firebase/vertexai-preview",Yt="@firebase/firestore-compat",Jt="firebase",Zt="[DEFAULT]",en={[Tt]:"fire-core",[_t]:"fire-core-compat",[Pt]:"fire-analytics",[At]:"fire-analytics-compat",[It]:"fire-app-check",[Nt]:"fire-app-check-compat",[Rt]:"fire-auth",[Dt]:"fire-auth-compat",[Mt]:"fire-rtdb",[Lt]:"fire-rtdb-compat",[Qt]:"fire-fn",[zt]:"fire-fn-compat",[jt]:"fire-iid",[Ut]:"fire-iid-compat",[Vt]:"fire-fcm",[Ft]:"fire-fcm-compat",[qt]:"fire-perf",[Bt]:"fire-perf-compat",[Wt]:"fire-rc",[Ht]:"fire-rc-compat",[$t]:"fire-gcs",[Xt]:"fire-gcs-compat",[Gt]:"fire-fst",[Yt]:"fire-fst-compat",[Kt]:"fire-vertex","fire-js":"fire-js",[Jt]:"fire-js-all"},tn=new Map,nn=new Map,rn=new Map;function sn(e,t){try{e.container.addComponent(t)}catch(kj){Et.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),kj)}}function on(e){const t=e.name;if(rn.has(t))return Et.debug("There were multiple attempts to register component ".concat(t,".")),!1;rn.set(t,e);for(const n of tn.values())sn(n,e);for(const n of nn.values())sn(n,e);return!0}function an(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function ln(e){return void 0!==e.settings}const cn=new Ue("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class hn{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new Ke("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw cn.create("app-deleted",{appName:this._name})}}const un="10.12.4";function dn(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const i=Object.assign({name:Zt,automaticDataCollectionEnabled:!1},t),r=i.name;if("string"!==typeof r||!r)throw cn.create("bad-app-name",{appName:String(r)});if(n||(n=Re()),!n)throw cn.create("no-options");const s=tn.get(r);if(s){if(Fe(n,s.options)&&Fe(i,s.config))return s;throw cn.create("duplicate-app",{appName:r})}const o=new Ze(r);for(const l of rn.values())o.addComponent(l);const a=new hn(n,i,o);return tn.set(r,a),a}function fn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Zt;const t=tn.get(e);if(!t&&e===Zt&&Re())return dn();if(!t)throw cn.create("no-app",{appName:e});return t}function pn(e,t,n){var i;let r=null!==(i=en[e])&&void 0!==i?i:e;n&&(r+="-".concat(n));const s=r.match(/\s|\//),o=t.match(/\s|\//);if(s||o){const e=['Unable to register library "'.concat(r,'" with version "').concat(t,'":')];return s&&e.push('library name "'.concat(r,'" contains illegal characters (whitespace or "/")')),s&&o&&e.push("and"),o&&e.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void Et.warn(e.join(" "))}on(new Ke("".concat(r,"-version"),(()=>({library:r,version:t})),"VERSION"))}const gn="firebase-heartbeat-database",mn=1,vn="firebase-heartbeat-store";let yn=null;function wn(){return yn||(yn=function(e,t){let{blocked:n,upgrade:i,blocking:r,terminated:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const o=indexedDB.open(e,t),a=yt(o);return i&&o.addEventListener("upgradeneeded",(e=>{i(yt(o.result),e.oldVersion,e.newVersion,yt(o.transaction),e)})),n&&o.addEventListener("blocked",(e=>n(e.oldVersion,e.newVersion,e))),a.then((e=>{s&&e.addEventListener("close",(()=>s())),r&&e.addEventListener("versionchange",(e=>r(e.oldVersion,e.newVersion,e)))})).catch((()=>{})),a}(gn,mn,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(vn)}catch(kj){console.warn(kj)}}}).catch((e=>{throw cn.create("idb-open",{originalErrorMessage:e.message})}))),yn}async function bn(e,t){try{const n=(await wn()).transaction(vn,"readwrite"),i=n.objectStore(vn);await i.put(t,On(e)),await n.done}catch(kj){if(kj instanceof je)Et.warn(kj.message);else{const t=cn.create("idb-set",{originalErrorMessage:null===kj||void 0===kj?void 0:kj.message});Et.warn(t.message)}}}function On(e){return"".concat(e.name,"!").concat(e.options.appId)}class kn{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new xn(t),this._heartbeatsCachePromise=this._storage.read().then((e=>(this._heartbeatsCache=e,e)))}async triggerHeartbeat(){var e,t;const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Sn();if((null!=(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||(this._heartbeatsCache=await this._heartbeatsCachePromise,null!=(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)))&&this._heartbeatsCache.lastSentHeartbeatDate!==i&&!this._heartbeatsCache.heartbeats.some((e=>e.date===i)))return this._heartbeatsCache.heartbeats.push({date:i,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var e;if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=Sn(),{heartbeatsToSend:n,unsentEntries:i}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let i=e.slice();for(const r of e){const e=n.find((e=>e.agent===r.agent));if(e){if(e.dates.push(r.date),Tn(n)>t){e.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),Tn(n)>t){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}(this._heartbeatsCache.heartbeats),r=_e(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}}function Sn(){return(new Date).toISOString().substring(0,10)}class xn{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!ze()&&new Promise(((e,t)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),e(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var e;t((null===(e=r.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}})).then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await wn()).transaction(vn),n=await t.objectStore(vn).get(On(e));return await t.done,n}catch(kj){if(kj instanceof je)Et.warn(kj.message);else{const t=cn.create("idb-get",{originalErrorMessage:null===kj||void 0===kj?void 0:kj.message});Et.warn(t.message)}}}(this.app);return(null===e||void 0===e?void 0:e.heartbeats)?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return bn(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return bn(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function Tn(e){return _e(JSON.stringify({version:2,heartbeats:e})).length}var Cn;Cn="",on(new Ke("platform-logger",(e=>new xt(e)),"PRIVATE")),on(new Ke("heartbeat",(e=>new kn(e)),"PRIVATE")),pn(Tt,Ct,Cn),pn(Tt,Ct,"esm2017"),pn("fire-js","");pn("firebase","10.12.4","app");function En(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n}Object.create;Object.create;"function"===typeof SuppressedError&&SuppressedError;function _n(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const An=_n,Pn=new Ue("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Nn=new ot("@firebase/auth");function In(e){if(Nn.logLevel<=tt.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];Nn.error("Auth (".concat(un,"): ").concat(e),...n)}}function Rn(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];throw zn(e,...n)}function Dn(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return zn(e,...n)}function Mn(e,t,n){const i=Object.assign(Object.assign({},An()),{[t]:n});return new Ue("auth","Firebase",i).create(t,{appName:e.name})}function Ln(e){return Mn(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Qn(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&Rn(e,"argument-error"),Mn(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function zn(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];if("string"!==typeof e){const t=n[0],i=[...n.slice(1)];return i[0]&&(i[0].appName=e.name),e._errorFactory.create(t,...i)}return Pn.create(e,...n)}function jn(e,t){if(!e){for(var n=arguments.length,i=new Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];throw zn(t,...i)}}function Un(e){const t="INTERNAL ASSERTION FAILED: "+e;throw In(t),new Error(t)}function Vn(e,t){e||Un(t)}function Fn(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function qn(){return"http:"===Bn()||"https:"===Bn()}function Bn(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}function Wn(){return!("undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(qn()||function(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}()||"connection"in navigator))||navigator.onLine}class Hn{constructor(e,t){this.shortDelay=e,this.longDelay=t,Vn(t>e,"Short delay should be less than long delay!"),this.isMobile="undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Le())||"object"===typeof navigator&&"ReactNative"===navigator.product}get(){return Wn()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function $n(e,t){Vn(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}class Xn{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:"undefined"!==typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!==typeof fetch?fetch:void Un("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:"undefined"!==typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!==typeof Headers?Headers:void Un("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:"undefined"!==typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!==typeof Response?Response:void Un("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Gn={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Kn=new Hn(3e4,6e4);function Yn(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function Jn(e,t,n,i){return Zn(e,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},(async()=>{let r={},s={};i&&("GET"===t?s=i:r={body:JSON.stringify(i)});const o=Be(Object.assign({key:e.config.apiKey},s)).slice(1),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/json",e.languageCode&&(a["X-Firebase-Locale"]=e.languageCode),Xn.fetch()(ti(e,e.config.apiHost,n,o),Object.assign({method:t,headers:a,referrerPolicy:"no-referrer"},r))}))}async function Zn(e,t,n){e._canInitEmulator=!1;const i=Object.assign(Object.assign({},Gn),t);try{const t=new ii(e),r=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const s=await r.json();if("needConfirmation"in s)throw ri(e,"account-exists-with-different-credential",s);if(r.ok&&!("errorMessage"in s))return s;{const t=r.ok?s.errorMessage:s.error.message,[n,o]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw ri(e,"credential-already-in-use",s);if("EMAIL_EXISTS"===n)throw ri(e,"email-already-in-use",s);if("USER_DISABLED"===n)throw ri(e,"user-disabled",s);const a=i[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(o)throw Mn(e,a,o);Rn(e,a)}}catch(kj){if(kj instanceof je)throw kj;Rn(e,"network-request-failed",{message:String(kj)})}}async function ei(e,t,n,i){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const s=await Jn(e,t,n,i,r);return"mfaPendingCredential"in s&&Rn(e,"multi-factor-auth-required",{_serverResponse:s}),s}function ti(e,t,n,i){const r="".concat(t).concat(n,"?").concat(i);return e.config.emulator?$n(e.config,r):"".concat(e.config.apiScheme,"://").concat(r)}function ni(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class ii{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise(((e,t)=>{this.timer=setTimeout((()=>t(Dn(this.auth,"network-request-failed"))),Kn.get())}))}clearNetworkTimeout(){clearTimeout(this.timer)}}function ri(e,t,n){const i={appName:e.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const r=Dn(e,t,i);return r.customData._tokenResponse=n,r}function si(e){return void 0!==e&&void 0!==e.enterprise}class oi{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return ni(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}}async function ai(e,t){return Jn(e,"GET","/v2/recaptchaConfig",Yn(e,t))}async function li(e,t){return Jn(e,"POST","/v1/accounts:lookup",t)}function ci(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(kj){}}function hi(e){return 1e3*Number(e)}function ui(e){const[t,n,i]=e.split(".");if(void 0===t||void 0===n||void 0===i)return In("JWT malformed, contained fewer than 3 sections"),null;try{const e=Ae(n);return e?JSON.parse(e):(In("Failed to decode base64 JWT payload"),null)}catch(kj){return In("Caught error parsing JWT payload as JSON",null===kj||void 0===kj?void 0:kj.toString()),null}}function di(e){const t=ui(e);return jn(t,"internal-error"),jn("undefined"!==typeof t.exp,"internal-error"),jn("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}async function fi(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return t;try{return await t}catch(kj){throw kj instanceof je&&function(e){let{code:t}=e;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}(kj)&&e.auth.currentUser===e&&await e.auth.signOut(),kj}}class pi{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout((async()=>{await this.iteration()}),t)}async iteration(){try{await this.user.getIdToken(!0)}catch(kj){return void((null===kj||void 0===kj?void 0:kj.code)==="auth/".concat("network-request-failed")&&this.schedule(!0))}this.schedule()}}class gi{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=ci(this.lastLoginAt),this.creationTime=ci(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function mi(e){var t;const n=e.auth,i=await e.getIdToken(),r=await fi(e,li(n,{idToken:i}));jn(null===r||void 0===r?void 0:r.users.length,n,"internal-error");const s=r.users[0];e._notifyReloadListener(s);const o=(null===(t=s.providerUserInfo)||void 0===t?void 0:t.length)?vi(s.providerUserInfo):[],a=(l=e.providerData,c=o,[...l.filter((e=>!c.some((t=>t.providerId===e.providerId)))),...c]);var l,c;const h=e.isAnonymous,u=!(e.email&&s.passwordHash)&&!(null===a||void 0===a?void 0:a.length),d=!!h&&u,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new gi(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(e,f)}function vi(e){return e.map((e=>{var{providerId:t}=e,n=En(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}}))}class yi{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){jn(e.idToken,"internal-error"),jn("undefined"!==typeof e.idToken,"internal-error"),jn("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):di(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){jn(0!==e.length,"internal-error");const t=di(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]||!this.accessToken||this.isExpired?(jn(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null):this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:i,expiresIn:r}=await async function(e,t){const n=await Zn(e,{},(async()=>{const n=Be({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:i,apiKey:r}=e.config,s=ti(e,i,"/v1/token","key=".concat(r)),o=await e._getAdditionalHeaders();return o["Content-Type"]="application/x-www-form-urlencoded",Xn.fetch()(s,{method:"POST",headers:o,body:n})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,i,Number(r))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:i,expirationTime:r}=t,s=new yi;return n&&(jn("string"===typeof n,"internal-error",{appName:e}),s.refreshToken=n),i&&(jn("string"===typeof i,"internal-error",{appName:e}),s.accessToken=i),r&&(jn("number"===typeof r,"internal-error",{appName:e}),s.expirationTime=r),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new yi,this.toJSON())}_performRefresh(){return Un("not implemented")}}function wi(e,t){jn("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class bi{constructor(e){var{uid:t,auth:n,stsTokenManager:i}=e,r=En(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new pi(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new gi(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(e){const t=await fi(this,this.stsTokenManager.getToken(this.auth,e));return jn(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=Ge(e),i=await n.getIdToken(t),r=ui(i);jn(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const s="object"===typeof r.firebase?r.firebase:void 0,o=null===s||void 0===s?void 0:s.sign_in_provider;return{claims:r,token:i,authTime:ci(hi(r.auth_time)),issuedAtTime:ci(hi(r.iat)),expirationTime:ci(hi(r.exp)),signInProvider:o||null,signInSecondFactor:(null===s||void 0===s?void 0:s.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=Ge(e);await mi(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(jn(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((e=>Object.assign({},e))),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new bi(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){jn(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await mi(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ln(this.auth.app))return Promise.reject(Ln(this.auth));const e=await this.getIdToken();return await fi(this,async function(e,t){return Jn(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((e=>Object.assign({},e))),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,i,r,s,o,a,l,c;const h=null!==(n=t.displayName)&&void 0!==n?n:void 0,u=null!==(i=t.email)&&void 0!==i?i:void 0,d=null!==(r=t.phoneNumber)&&void 0!==r?r:void 0,f=null!==(s=t.photoURL)&&void 0!==s?s:void 0,p=null!==(o=t.tenantId)&&void 0!==o?o:void 0,g=null!==(a=t._redirectEventId)&&void 0!==a?a:void 0,m=null!==(l=t.createdAt)&&void 0!==l?l:void 0,v=null!==(c=t.lastLoginAt)&&void 0!==c?c:void 0,{uid:y,emailVerified:w,isAnonymous:b,providerData:O,stsTokenManager:k}=t;jn(y&&k,e,"internal-error");const S=yi.fromJSON(this.name,k);jn("string"===typeof y,e,"internal-error"),wi(h,e.name),wi(u,e.name),jn("boolean"===typeof w,e,"internal-error"),jn("boolean"===typeof b,e,"internal-error"),wi(d,e.name),wi(f,e.name),wi(p,e.name),wi(g,e.name),wi(m,e.name),wi(v,e.name);const x=new bi({uid:y,auth:e,email:u,emailVerified:w,displayName:h,isAnonymous:b,photoURL:f,phoneNumber:d,tenantId:p,stsTokenManager:S,createdAt:m,lastLoginAt:v});return O&&Array.isArray(O)&&(x.providerData=O.map((e=>Object.assign({},e)))),g&&(x._redirectEventId=g),x}static async _fromIdTokenResponse(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const i=new yi;i.updateFromServerResponse(t);const r=new bi({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:n});return await mi(r),r}static async _fromGetAccountInfoResponse(e,t,n){const i=t.users[0];jn(void 0!==i.localId,"internal-error");const r=void 0!==i.providerUserInfo?vi(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!(null===r||void 0===r?void 0:r.length),o=new yi;o.updateFromIdToken(n);const a=new bi({uid:i.localId,auth:e,stsTokenManager:o,isAnonymous:s}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:r,metadata:new gi(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(null===r||void 0===r?void 0:r.length)};return Object.assign(a,l),a}}const Oi=new Map;function ki(e){Vn(e instanceof Function,"Expected a class definition");let t=Oi.get(e);return t?(Vn(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,Oi.set(e,t),t)}class Si{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Si.type="NONE";const xi=Si;function Ti(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}class Ci{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:i,name:r}=this.auth;this.fullUserKey=Ti(this.userKey,i.apiKey,r),this.fullPersistenceKey=Ti("persistence",i.apiKey,r),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?bi._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!t.length)return new Ci(ki(xi),e,n);const i=(await Promise.all(t.map((async e=>{if(await e._isAvailable())return e})))).filter((e=>e));let r=i[0]||ki(xi);const s=Ti(n,e.config.apiKey,e.name);let o=null;for(const l of t)try{const t=await l._get(s);if(t){const n=bi._fromJSON(e,t);l!==r&&(o=n),r=l;break}}catch(dS){}const a=i.filter((e=>e._shouldAllowMigration));return r._shouldAllowMigration&&a.length?(r=a[0],o&&await r._set(s,o.toJSON()),await Promise.all(t.map((async e=>{if(e!==r)try{await e._remove(s)}catch(dS){}}))),new Ci(r,e,n)):new Ci(r,e,n)}}function Ei(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(Ni(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(_i(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(Ri(t))return"Blackberry";if(Di(t))return"Webos";if(Ai(t))return"Safari";if((t.includes("chrome/")||Pi(t))&&!t.includes("edge/"))return"Chrome";if(Ii(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function _i(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Le();return/firefox\//i.test(e)}function Ai(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:Le()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Pi(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Le();return/crios\//i.test(e)}function Ni(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Le();return/iemobile/i.test(e)}function Ii(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Le();return/android/i.test(e)}function Ri(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Le();return/blackberry/i.test(e)}function Di(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Le();return/webos/i.test(e)}function Mi(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Le();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function Li(){return function(){const e=Le();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}()&&10===document.documentMode}function Qi(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Le();return Mi(e)||Ii(e)||Di(e)||Ri(e)||/windows phone/i.test(e)||Ni(e)}function zi(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=Ei(Le());break;case"Worker":t="".concat(Ei(Le()),"-").concat(e);break;default:t=e}const i=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(un,"/").concat(i)}class ji{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise(((n,i)=>{try{n(e(t))}catch(kj){i(kj)}}));n.onAbort=t,this.queue.push(n);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(kj){t.reverse();for(const i of t)try{i()}catch(n){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===kj||void 0===kj?void 0:kj.message})}}}class Ui{constructor(e){var t,n,i,r;const s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=s.minPasswordLength)&&void 0!==t?t:6,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),void 0!==s.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),void 0!==s.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),void 0!==s.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),void 0!==s.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(i=null===(n=e.allowedNonAlphanumericCharacters)||void 0===n?void 0:n.join(""))&&void 0!==i?i:"",this.forceUpgradeOnSignin=null!==(r=e.forceUpgradeOnSignin)&&void 0!==r&&r,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,i,r,s,o;const a={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,a),this.validatePasswordCharacterOptions(e,a),a.isValid&&(a.isValid=null===(t=a.meetsMinPasswordLength)||void 0===t||t),a.isValid&&(a.isValid=null===(n=a.meetsMaxPasswordLength)||void 0===n||n),a.isValid&&(a.isValid=null===(i=a.containsLowercaseLetter)||void 0===i||i),a.isValid&&(a.isValid=null===(r=a.containsUppercaseLetter)||void 0===r||r),a.isValid&&(a.isValid=null===(s=a.containsNumericCharacter)||void 0===s||s),a.isValid&&(a.isValid=null===(o=a.containsNonAlphanumericCharacter)||void 0===o||o),a}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){let n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let i=0;i<e.length;i++)n=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,i,r){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=r))}}class Vi{constructor(e,t,n,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new qi(this),this.idTokenSubscription=new qi(this),this.beforeStateQueue=new ji(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Pn,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=ki(t)),this._initializationPromise=this.queue((async()=>{var n,i;if(!this._deleted&&(this.persistenceManager=await Ci.create(this,e),!this._deleted)){if(null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(kj){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(i=this.currentUser)||void 0===i?void 0:i.uid)||null,this._deleted||(this._isInitialized=!0)}})),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUserFromIdToken(e){try{const t=await li(this,{idToken:e}),n=await bi._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(ln(this.app)){const e=this.app.settings.authIdToken;return e?new Promise((t=>{setTimeout((()=>this.initializeCurrentUserFromIdToken(e).then(t,t)))})):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let i=n,r=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,s=null===i||void 0===i?void 0:i._redirectEventId,o=await this.tryRedirectSignIn(e);n&&n!==s||!(null===o||void 0===o?void 0:o.user)||(i=o.user,r=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(i)}catch(kj){i=n,this._popupRedirectResolver._overrideRedirectResult(this,(()=>Promise.reject(kj)))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return jn(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(kj){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await mi(e)}catch(kj){if((null===kj||void 0===kj?void 0:kj.code)!=="auth/".concat("network-request-failed"))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ln(this.app))return Promise.reject(Ln(this));const t=e?Ge(e):null;return t&&jn(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return e&&jn(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue((async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()}))}async signOut(){return ln(this.app)?Promise.reject(Ln(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ln(this.app)?Promise.reject(Ln(this)):this.queue((async()=>{await this.assertedPersistence.setPersistence(ki(e))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e){return Jn(e,"GET","/v2/passwordPolicy",Yn(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}(this),t=new Ui(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Ue("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise(((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged((()=>{n(),e()}),t)}}))}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await async function(e,t){return Jn(e,"POST","/v2/accounts:revokeToken",Yn(e,t))}(this,t)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&ki(e)||this._popupRedirectResolver;jn(t,this,"argument-error"),this.redirectPersistenceManager=await Ci.create(this,[ki(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue((async()=>{})),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue((async()=>this.directlySetCurrentUser(e)))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,i){if(this._deleted)return()=>{};const r="function"===typeof t?t:t.next.bind(t);let s=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(jn(o,this,"internal-error"),o.then((()=>{s||r(this.currentUser)})),"function"===typeof t){const r=e.addObserver(t,n,i);return()=>{s=!0,r()}}{const n=e.addObserver(t);return()=>{s=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return jn(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=zi(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const i=await this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t}async _getAppCheckToken(){var e;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return(null===t||void 0===t?void 0:t.error)&&function(e){if(Nn.logLevel<=tt.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];Nn.warn("Auth (".concat(un,"): ").concat(e),...n)}}("Error while retrieving App Check token: ".concat(t.error)),null===t||void 0===t?void 0:t.token}}function Fi(e){return Ge(e)}class qi{constructor(e){this.auth=e,this.observer=null,this.addObserver=function(e,t){const n=new $e(e,t);return n.subscribe.bind(n)}((e=>this.observer=e))}get next(){return jn(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Bi={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Wi(e){return Bi.loadJS(e)}function Hi(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}class $i{constructor(e){this.type="recaptcha-enterprise",this.auth=Fi(e)}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(t,n,i){const r=window.grecaptcha;si(r)?r.enterprise.ready((()=>{r.enterprise.execute(t,{action:e}).then((e=>{n(e)})).catch((()=>{n("NO_RECAPTCHA")}))})):i(Error("No reCAPTCHA enterprise script loaded."))}return new Promise(((e,i)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise((async(t,n)=>{ai(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then((i=>{if(void 0!==i.recaptchaKey){const n=new oi(i);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))})).catch((e=>{n(e)}))}))})(this.auth).then((r=>{if(!t&&si(window.grecaptcha))n(r,e,i);else{if("undefined"===typeof window)return void i(new Error("RecaptchaVerifier is only supported in browser"));let t=Bi.recaptchaEnterpriseScript;0!==t.length&&(t+=r),Wi(t).then((()=>{n(r,e,i)})).catch((e=>{i(e)}))}})).catch((e=>{i(e)}))}))}}async function Xi(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const r=new $i(e);let s;try{s=await r.verify(n)}catch(a){s=await r.verify(n,!0)}const o=Object.assign({},t);return i?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function Gi(e,t,n,i){var r;if(null===(r=e._getRecaptchaConfig())||void 0===r?void 0:r.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const r=await Xi(e,t,n,"getOobCode"===n);return i(e,r)}return i(e,t).catch((async r=>{if(r.code==="auth/".concat("missing-recaptcha-token")){console.log("".concat(n," is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow."));const r=await Xi(e,t,n,"getOobCode"===n);return i(e,r)}return Promise.reject(r)}))}function Ki(e,t,n){const i=Fi(e);jn(i._canInitEmulator,i,"emulator-config-failed"),jn(/^https?:\/\//.test(t),i,"invalid-emulator-scheme");const r=!!(null===n||void 0===n?void 0:n.disableWarnings),s=Yi(t),{host:o,port:a}=function(e){const t=Yi(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){const e=r[1];return{host:e,port:Ji(i.substr(e.length+1))}}{const[e,t]=i.split(":");return{host:e,port:Ji(t)}}}(t),l=null===a?"":":".concat(a);i.config.emulator={url:"".concat(s,"//").concat(o).concat(l,"/")},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:r})}),r||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function Yi(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function Ji(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class Zi{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Un("not implemented")}_getIdTokenResponse(e){return Un("not implemented")}_linkToIdToken(e,t){return Un("not implemented")}_getReauthenticationResolver(e){return Un("not implemented")}}async function er(e,t){return Jn(e,"POST","/v1/accounts:signUp",t)}async function tr(e,t){return ei(e,"POST","/v1/accounts:signInWithPassword",Yn(e,t))}class nr extends Zi{constructor(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",n),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new nr(e,t,"password")}static _fromEmailAndCode(e,t){return new nr(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return Gi(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",tr);case"emailLink":return async function(e,t){return ei(e,"POST","/v1/accounts:signInWithEmailLink",Yn(e,t))}(e,{email:this._email,oobCode:this._password});default:Rn(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return Gi(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",er);case"emailLink":return async function(e,t){return ei(e,"POST","/v1/accounts:signInWithEmailLink",Yn(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:Rn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function ir(e,t){return ei(e,"POST","/v1/accounts:signInWithIdp",Yn(e,t))}class rr extends Zi{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new rr(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Rn("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:i}=t,r=En(t,["providerId","signInMethod"]);if(!n||!i)return null;const s=new rr(n,i);return s.idToken=r.idToken||void 0,s.accessToken=r.accessToken||void 0,s.secret=r.secret,s.nonce=r.nonce,s.pendingToken=r.pendingToken||null,s}_getIdTokenResponse(e){return ir(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,ir(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,ir(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Be(t)}return e}}const sr={USER_NOT_FOUND:"user-not-found"};class or extends Zi{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new or({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new or({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return ei(e,"POST","/v1/accounts:signInWithPhoneNumber",Yn(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await ei(e,"POST","/v1/accounts:signInWithPhoneNumber",Yn(e,t));if(n.temporaryProof)throw ri(e,"account-exists-with-different-credential",n);return n}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return ei(e,"POST","/v1/accounts:signInWithPhoneNumber",Yn(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),sr)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:i}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:i}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:i,temporaryProof:r}=e;return n||t||i||r?new or({verificationId:t,verificationCode:n,phoneNumber:i,temporaryProof:r}):null}}class ar{constructor(e){var t,n,i,r,s,o;const a=We(He(e)),l=null!==(t=a.apiKey)&&void 0!==t?t:null,c=null!==(n=a.oobCode)&&void 0!==n?n:null,h=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(i=a.mode)&&void 0!==i?i:null);jn(l&&c&&h,"argument-error"),this.apiKey=l,this.operation=h,this.code=c,this.continueUrl=null!==(r=a.continueUrl)&&void 0!==r?r:null,this.languageCode=null!==(s=a.languageCode)&&void 0!==s?s:null,this.tenantId=null!==(o=a.tenantId)&&void 0!==o?o:null}static parseLink(e){const t=function(e){const t=We(He(e)).link,n=t?We(He(t)).deep_link_id:null,i=We(He(e)).deep_link_id;return(i?We(He(i)).link:null)||i||n||t||e}(e);try{return new ar(t)}catch(dS){return null}}}class lr{constructor(){this.providerId=lr.PROVIDER_ID}static credential(e,t){return nr._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=ar.parseLink(t);return jn(n,"argument-error"),nr._fromEmailAndCode(e,n.code,n.tenantId)}}lr.PROVIDER_ID="password",lr.EMAIL_PASSWORD_SIGN_IN_METHOD="password",lr.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class cr{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class hr extends cr{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class ur extends hr{constructor(){super("facebook.com")}static credential(e){return rr._fromParams({providerId:ur.PROVIDER_ID,signInMethod:ur.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ur.credentialFromTaggedObject(e)}static credentialFromError(e){return ur.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return ur.credential(t.oauthAccessToken)}catch(dS){return null}}}ur.FACEBOOK_SIGN_IN_METHOD="facebook.com",ur.PROVIDER_ID="facebook.com";class dr extends hr{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return rr._fromParams({providerId:dr.PROVIDER_ID,signInMethod:dr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return dr.credentialFromTaggedObject(e)}static credentialFromError(e){return dr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:i}=t;if(!n&&!i)return null;try{return dr.credential(n,i)}catch(dS){return null}}}dr.GOOGLE_SIGN_IN_METHOD="google.com",dr.PROVIDER_ID="google.com";class fr extends hr{constructor(){super("github.com")}static credential(e){return rr._fromParams({providerId:fr.PROVIDER_ID,signInMethod:fr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return fr.credentialFromTaggedObject(e)}static credentialFromError(e){return fr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return fr.credential(t.oauthAccessToken)}catch(dS){return null}}}fr.GITHUB_SIGN_IN_METHOD="github.com",fr.PROVIDER_ID="github.com";class pr extends hr{constructor(){super("twitter.com")}static credential(e,t){return rr._fromParams({providerId:pr.PROVIDER_ID,signInMethod:pr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return pr.credentialFromTaggedObject(e)}static credentialFromError(e){return pr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=t;if(!n||!i)return null;try{return pr.credential(n,i)}catch(dS){return null}}}async function gr(e,t){return ei(e,"POST","/v1/accounts:signUp",Yn(e,t))}pr.TWITTER_SIGN_IN_METHOD="twitter.com",pr.PROVIDER_ID="twitter.com";class mr{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const r=await bi._fromIdTokenResponse(e,n,i),s=vr(n);return new mr({user:r,providerId:s,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const i=vr(n);return new mr({user:e,providerId:i,_tokenResponse:n,operationType:t})}}function vr(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class yr extends je{constructor(e,t,n,i){var r;super(t.code,t.message),this.operationType=n,this.user=i,Object.setPrototypeOf(this,yr.prototype),this.customData={appName:e.name,tenantId:null!==(r=e.tenantId)&&void 0!==r?r:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,i){return new yr(e,t,n,i)}}function wr(e,t,n,i){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((n=>{if(n.code==="auth/".concat("multi-factor-auth-required"))throw yr._fromErrorAndOperation(e,n,t,i);throw n}))}async function br(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const i=await fi(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return mr._forOperation(e,"link",i)}async function Or(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:i}=e;if(ln(i.app))return Promise.reject(Ln(i));const r="reauthenticate";try{const s=await fi(e,wr(i,r,t,e),n);jn(s.idToken,i,"internal-error");const o=ui(s.idToken);jn(o,i,"internal-error");const{sub:a}=o;return jn(e.uid===a,i,"user-mismatch"),mr._forOperation(e,r,s)}catch(kj){throw(null===kj||void 0===kj?void 0:kj.code)==="auth/".concat("user-not-found")&&Rn(i,"user-mismatch"),kj}}async function kr(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(ln(e.app))return Promise.reject(Ln(e));const i="signIn",r=await wr(e,i,t),s=await mr._fromIdTokenResponse(e,i,r);return n||await e._updateCurrentUser(s.user),s}async function Sr(e,t){return kr(Fi(e),t)}async function xr(e){const t=Fi(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}new WeakMap;const Tr="__sak";class Cr{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Tr,"1"),this.storage.removeItem(Tr),Promise.resolve(!0)):Promise.resolve(!1)}catch(dS){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class Er extends Cr{constructor(){super((()=>window.localStorage),"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const e=Le();return Ai(e)||Mi(e)}()&&function(){try{return!(!window||window===window.top)}catch(kj){return!1}}(),this.fallbackToPolling=Qi(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),i=this.localCache[t];n!==i&&e(t,i,n)}}onStorageEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.key)return void this.forAllChangedKeys(((e,t,n)=>{this.notifyListeners(e,n)}));const n=e.key;if(t?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const i=this.storage.getItem(n);if(e.newValue!==i)null!==e.newValue?this.storage.setItem(n,e.newValue):this.storage.removeItem(n);else if(this.localCache[n]===e.newValue&&!t)return}const i=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},r=this.storage.getItem(n);Li()&&r!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,10):i()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const i of Array.from(n))i(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((()=>{this.forAllChangedKeys(((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)}))}),1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Er.type="LOCAL";const _r=Er;class Ar extends Cr{constructor(){super((()=>window.sessionStorage),"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Ar.type="SESSION";const Pr=Ar;class Nr{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find((t=>t.isListeningto(e)));if(t)return t;const n=new Nr(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:i,data:r}=t.data,s=this.handlersMap[i];if(!(null===s||void 0===s?void 0:s.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:i});const o=Array.from(s).map((async e=>e(t.origin,r))),a=await function(e){return Promise.all(e.map((async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}})))}(o);t.ports[0].postMessage({status:"done",eventId:n,eventType:i,response:a})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function Ir(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="";for(let i=0;i<t;i++)n+=Math.floor(10*Math.random());return e+n}Nr.receivers=[];class Rr{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const i="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let r,s;return new Promise(((o,a)=>{const l=Ir("",20);i.port1.start();const c=setTimeout((()=>{a(new Error("unsupported_event"))}),n);s={messageChannel:i,onMessage(e){const t=e;if(t.data.eventId===l)switch(t.data.status){case"ack":clearTimeout(c),r=setTimeout((()=>{a(new Error("timeout"))}),3e3);break;case"done":clearTimeout(r),o(t.data.response);break;default:clearTimeout(c),clearTimeout(r),a(new Error("invalid_response"))}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[i.port2])})).finally((()=>{s&&this.removeMessageHandler(s)}))}}function Dr(){return window}function Mr(){return"undefined"!==typeof Dr().WorkerGlobalScope&&"function"===typeof Dr().importScripts}const Lr="firebaseLocalStorageDb",Qr="firebaseLocalStorage",zr="fbase_key";class jr{constructor(e){this.request=e}toPromise(){return new Promise(((e,t)=>{this.request.addEventListener("success",(()=>{e(this.request.result)})),this.request.addEventListener("error",(()=>{t(this.request.error)}))}))}}function Ur(e,t){return e.transaction([Qr],t?"readwrite":"readonly").objectStore(Qr)}function Vr(){const e=indexedDB.open(Lr,1);return new Promise(((t,n)=>{e.addEventListener("error",(()=>{n(e.error)})),e.addEventListener("upgradeneeded",(()=>{const t=e.result;try{t.createObjectStore(Qr,{keyPath:zr})}catch(kj){n(kj)}})),e.addEventListener("success",(async()=>{const n=e.result;n.objectStoreNames.contains(Qr)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(Lr);return new jr(e).toPromise()}(),t(await Vr()))}))}))}async function Fr(e,t,n){const i=Ur(e,!0).put({[zr]:t,value:n});return new jr(i).toPromise()}function qr(e,t){const n=Ur(e,!0).delete(t);return new jr(n).toPromise()}class Br{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((()=>{}),(()=>{}))}async _openDb(){return this.db||(this.db=await Vr()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(kj){if(t++>3)throw kj;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Mr()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Nr._getInstance(Mr()?self:null),this.receiver._subscribe("keyChanged",(async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)}))),this.receiver._subscribe("ping",(async(e,t)=>["keyChanged"]))}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new Rr(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(dS){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Vr();return await Fr(e,Tr,"1"),await qr(e,Tr),!0}catch(dS){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite((async()=>(await this._withRetries((n=>Fr(n,e,t))),this.localCache[e]=t,this.notifyServiceWorker(e))))}async _get(e){const t=await this._withRetries((t=>async function(e,t){const n=Ur(e,!1).get(t),i=await new jr(n).toPromise();return void 0===i?null:i.value}(t,e)));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite((async()=>(await this._withRetries((t=>qr(t,e))),delete this.localCache[e],this.notifyServiceWorker(e))))}async _poll(){const e=await this._withRetries((e=>{const t=Ur(e,!1).getAll();return new jr(t).toPromise()}));if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;if(0!==e.length)for(const{fbase_key:i,value:r}of e)n.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(r)&&(this.notifyListeners(i,r),t.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!n.has(i)&&(this.notifyListeners(i,null),t.push(i));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const i of Array.from(n))i(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((async()=>this._poll()),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}Br.type="LOCAL";const Wr=Br;Hi("rcb"),new Hn(3e4,6e4);const Hr="recaptcha";async function $r(e,t,n){var i;const r=await n.verify();try{let s;if(jn("string"===typeof r,e,"argument-error"),jn(n.type===Hr,e,"argument-error"),s="string"===typeof t?{phoneNumber:t}:t,"session"in s){const t=s.session;if("phoneNumber"in s){jn("enroll"===t.type,e,"internal-error");const n=await function(e,t){return Jn(e,"POST","/v2/accounts/mfaEnrollment:start",Yn(e,t))}(e,{idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,recaptchaToken:r}});return n.phoneSessionInfo.sessionInfo}{jn("signin"===t.type,e,"internal-error");const n=(null===(i=s.multiFactorHint)||void 0===i?void 0:i.uid)||s.multiFactorUid;jn(n,e,"missing-multi-factor-info");const o=await function(e,t){return Jn(e,"POST","/v2/accounts/mfaSignIn:start",Yn(e,t))}(e,{mfaPendingCredential:t.credential,mfaEnrollmentId:n,phoneSignInInfo:{recaptchaToken:r}});return o.phoneResponseInfo.sessionInfo}}{const{sessionInfo:t}=await async function(e,t){return Jn(e,"POST","/v1/accounts:sendVerificationCode",Yn(e,t))}(e,{phoneNumber:s.phoneNumber,recaptchaToken:r});return t}}finally{n._reset()}}class Xr{constructor(e){this.providerId=Xr.PROVIDER_ID,this.auth=Fi(e)}verifyPhoneNumber(e,t){return $r(this.auth,e,Ge(t))}static credential(e,t){return or._fromVerification(e,t)}static credentialFromResult(e){const t=e;return Xr.credentialFromTaggedObject(t)}static credentialFromError(e){return Xr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{phoneNumber:n,temporaryProof:i}=t;return n&&i?or._fromTokenResponse(n,i):null}}function Gr(e,t){return t?ki(t):(jn(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}Xr.PROVIDER_ID="phone",Xr.PHONE_SIGN_IN_METHOD="phone";class Kr extends Zi{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ir(e,this._buildIdpRequest())}_linkToIdToken(e,t){return ir(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return ir(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function Yr(e){return kr(e.auth,new Kr(e),e.bypassAuthState)}function Jr(e){const{auth:t,user:n}=e;return jn(n,t,"internal-error"),Or(n,new Kr(e),e.bypassAuthState)}async function Zr(e){const{auth:t,user:n}=e;return jn(n,t,"internal-error"),br(n,new Kr(e),e.bypassAuthState)}class es{constructor(e,t,n,i){let r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=e,this.resolver=n,this.user=i,this.bypassAuthState=r,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(kj){this.reject(kj)}}))}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:i,tenantId:r,error:s,type:o}=e;if(s)return void this.reject(s);const a={auth:this.auth,requestUri:t,sessionId:n,tenantId:r||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(a))}catch(kj){this.reject(kj)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Yr;case"linkViaPopup":case"linkViaRedirect":return Zr;case"reauthViaPopup":case"reauthViaRedirect":return Jr;default:Rn(this.auth,"internal-error")}}resolve(e){Vn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Vn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const ts=new Hn(2e3,1e4);async function ns(e,t,n){if(ln(e.app))return Promise.reject(Dn(e,"operation-not-supported-in-this-environment"));const i=Fi(e);Qn(e,t,cr);const r=Gr(i,n);return new is(i,"signInViaPopup",t,r).executeNotNull()}class is extends es{constructor(e,t,n,i,r){super(e,t,i,r),this.provider=n,this.authWindow=null,this.pollId=null,is.currentPopupAction&&is.currentPopupAction.cancel(),is.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return jn(e,this.auth,"internal-error"),e}async onExecution(){Vn(1===this.filter.length,"Popup operations only handle one event");const e=Ir();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch((e=>{this.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(e=>{e||this.reject(Dn(this.auth,"web-storage-unsupported"))})),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(Dn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,is.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout((()=>{this.pollId=null,this.reject(Dn(this.auth,"popup-closed-by-user"))}),8e3):this.pollId=window.setTimeout(e,ts.get())};e()}}is.currentPopupAction=null;const rs="pendingRedirect",ss=new Map;class os extends es{constructor(e,t){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.eventId=null}async execute(){let e=ss.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=cs(t),i=ls(e);if(!await i._isAvailable())return!1;const r="true"===await i._get(n);return await i._remove(n),r}(this.resolver,this.auth),n=t?await super.execute():null;e=()=>Promise.resolve(n)}catch(kj){e=()=>Promise.reject(kj)}ss.set(this.auth._key(),e)}return this.bypassAuthState||ss.set(this.auth._key(),(()=>Promise.resolve(null))),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function as(e,t){ss.set(e._key(),t)}function ls(e){return ki(e._redirectPersistence)}function cs(e){return Ti(rs,e.config.apiKey,e.name)}async function hs(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(ln(e.app))return Promise.reject(Ln(e));const i=Fi(e),r=Gr(i,t),s=new os(i,r,n),o=await s.execute();return o&&!n&&(delete o.user._redirectEventId,await i._persistUserIfCurrent(o.user),await i._setRedirectUser(null,t)),o}class us{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach((n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return fs(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!fs(e)){const i=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(Dn(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(ds(e))}saveEventToCache(e){this.cachedEventUids.add(ds(e)),this.lastProcessedEventTime=Date.now()}}function ds(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((e=>e)).join("-")}function fs(e){let{type:t,error:n}=e;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}const ps=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,gs=/^https?/;async function ms(e){if(e.config.emulator)return;const{authorizedDomains:t}=await async function(e){return Jn(e,"GET","/v1/projects",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}(e);for(const n of t)try{if(vs(n))return}catch(dS){}Rn(e,"unauthorized-domain")}function vs(e){const t=Fn(),{protocol:n,hostname:i}=new URL(t);if(e.startsWith("chrome-extension://")){const r=new URL(e);return""===r.hostname&&""===i?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&r.hostname===i}if(!gs.test(n))return!1;if(ps.test(e))return i===e;const r=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}const ys=new Hn(3e4,6e4);function ws(){const e=Dr().___jsl;if(null===e||void 0===e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}function bs(e){return new Promise(((t,n)=>{var i,r,s;function o(){ws(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{ws(),n(Dn(e,"network-request-failed"))},timeout:ys.get()})}if(null===(r=null===(i=Dr().gapi)||void 0===i?void 0:i.iframes)||void 0===r?void 0:r.Iframe)t(gapi.iframes.getContext());else{if(!(null===(s=Dr().gapi)||void 0===s?void 0:s.load)){const t=Hi("iframefcb");return Dr()[t]=()=>{gapi.load?o():n(Dn(e,"network-request-failed"))},Wi("".concat(Bi.gapiScript,"?onload=").concat(t)).catch((e=>n(e)))}o()}})).catch((e=>{throw Os=null,e}))}let Os=null;const ks=new Hn(5e3,15e3),Ss="__/auth/iframe",xs="emulator/auth/iframe",Ts={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Cs=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Es(e){const t=e.config;jn(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?$n(t,xs):"https://".concat(e.config.authDomain,"/").concat(Ss),i={apiKey:t.apiKey,appName:e.name,v:un},r=Cs.get(e.config.apiHost);r&&(i.eid=r);const s=e._getFrameworks();return s.length&&(i.fw=s.join(",")),"".concat(n,"?").concat(Be(i).slice(1))}async function _s(e){const t=await function(e){return Os=Os||bs(e),Os}(e),n=Dr().gapi;return jn(n,e,"internal-error"),t.open({where:document.body,url:Es(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Ts,dontclear:!0},(t=>new Promise((async(n,i)=>{await t.restyle({setHideOnLeave:!1});const r=Dn(e,"network-request-failed"),s=Dr().setTimeout((()=>{i(r)}),ks.get());function o(){Dr().clearTimeout(s),n(t)}t.ping(o).then(o,(()=>{i(r)}))}))))}const As={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Ps{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(kj){}}}function Ns(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;const s=Math.max((window.screen.availHeight-r)/2,0).toString(),o=Math.max((window.screen.availWidth-i)/2,0).toString();let a="";const l=Object.assign(Object.assign({},As),{width:i.toString(),height:r.toString(),top:s,left:o}),c=Le().toLowerCase();n&&(a=Pi(c)?"_blank":n),_i(c)&&(t=t||"http://localhost",l.scrollbars="yes");const h=Object.entries(l).reduce(((e,t)=>{let[n,i]=t;return"".concat(e).concat(n,"=").concat(i,",")}),"");if(function(){var e;return Mi(arguments.length>0&&void 0!==arguments[0]?arguments[0]:Le())&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(c)&&"_self"!==a)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}(t||"",a),new Ps(null);const u=window.open(t||"",a,h);jn(u,e,"popup-blocked");try{u.focus()}catch(kj){}return new Ps(u)}const Is="__/auth/handler",Rs="emulator/auth/handler",Ds=encodeURIComponent("fac");async function Ms(e,t,n,i,r,s){jn(e.config.authDomain,e,"auth-domain-config-required"),jn(e.config.apiKey,e,"invalid-api-key");const o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:i,v:un,eventId:r};if(t instanceof cr){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(s||{}))o[e]=t}if(t instanceof hr){const e=t.getScopes().filter((e=>""!==e));e.length>0&&(o.scopes=e.join(","))}e.tenantId&&(o.tid=e.tenantId);const a=o;for(const h of Object.keys(a))void 0===a[h]&&delete a[h];const l=await e._getAppCheckToken(),c=l?"#".concat(Ds,"=").concat(encodeURIComponent(l)):"";return"".concat(function(e){let{config:t}=e;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(Is);return $n(t,Rs)}(e),"?").concat(Be(a).slice(1)).concat(c)}const Ls="webStorageSupport";const Qs=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Pr,this._completeRedirectFn=hs,this._overrideRedirectResult=as}async _openPopup(e,t,n,i){var r;Vn(null===(r=this.eventManagers[e._key()])||void 0===r?void 0:r.manager,"_initialize() not called before _openPopup()");return Ns(e,await Ms(e,t,n,Fn(),i),Ir())}async _openRedirect(e,t,n,i){await this._originValidation(e);return function(e){Dr().location.href=e}(await Ms(e,t,n,Fn(),i)),new Promise((()=>{}))}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(Vn(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch((()=>{delete this.eventManagers[t]})),n}async initAndGetManager(e){const t=await _s(e),n=new us(e);return t.register("authEvent",(t=>{jn(null===t||void 0===t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Ls,{type:Ls},(n=>{var i;const r=null===(i=null===n||void 0===n?void 0:n[0])||void 0===i?void 0:i[Ls];void 0!==r&&t(!!r),Rn(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=ms(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Qi()||Ai()||Mi()}};var zs="@firebase/auth",js="1.7.5";class Us{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged((t=>{e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){jn(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const Vs=De("authIdTokenMaxAge")||300;let Fs=null;var qs,Bs;qs={loadJS:e=>new Promise(((t,n)=>{const i=document.createElement("script");i.setAttribute("src",e),i.onload=t,i.onerror=e=>{const t=Dn("internal-error");t.customData=e,n(t)},i.type="text/javascript",i.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(i)})),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="},Bi=qs,Bs="Browser",on(new Ke("auth",((e,t)=>{let{options:n}=t;const i=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=i.options;jn(o&&!o.includes(":"),"invalid-api-key",{appName:i.name});const l={apiKey:o,authDomain:a,clientPlatform:Bs,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:zi(Bs)},c=new Vi(i,r,s,l);return function(e,t){const n=(null===t||void 0===t?void 0:t.persistence)||[],i=(Array.isArray(n)?n:[n]).map(ki);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(i,null===t||void 0===t?void 0:t.popupRedirectResolver)}(c,n),c}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(((e,t,n)=>{e.getProvider("auth-internal").initialize()}))),on(new Ke("auth-internal",(e=>(e=>new Us(e))(Fi(e.getProvider("auth").getImmediate()))),"PRIVATE").setInstantiationMode("EXPLICIT")),pn(zs,js,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(Bs)),pn(zs,js,"esm2017");var Ws,Hs,$s="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},Xs={};(function(){var e;function t(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function n(e,t,n){n||(n=0);var i=Array(16);if("string"===typeof t)for(var r=0;16>r;++r)i[r]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(r=0;16>r;++r)i[r]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],r=e.g[2];var s=e.g[3],o=t+(s^n&(r^s))+i[0]+3614090360&4294967295;o=(n=(r=(s=(t=(n=(r=(s=(t=(n=(r=(s=(t=(n=(r=(s=(t=(n=(r=(s=(t=(n=(r=(s=(t=(n=(r=(s=(t=(n=(r=(s=(t=(n=(r=(s=(t=(n=(r=(s=(t=(n=(r=(s=(t=(n=(r=(s=(t=(n=(r=(s=(t=(n=(r=(s=(t=(n=(r=(s=(t=n+(o<<7&4294967295|o>>>25))+((o=s+(r^t&(n^r))+i[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=r+(n^s&(t^n))+i[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^r&(s^t))+i[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(r^s))+i[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=s+(r^t&(n^r))+i[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=r+(n^s&(t^n))+i[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^r&(s^t))+i[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(r^s))+i[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=s+(r^t&(n^r))+i[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=r+(n^s&(t^n))+i[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^r&(s^t))+i[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(r^s))+i[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=s+(r^t&(n^r))+i[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=r+(n^s&(t^n))+i[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^r&(s^t))+i[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=t+(r^s&(n^r))+i[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^r&(t^n))+i[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=r+(t^n&(s^t))+i[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(r^s))+i[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=t+(r^s&(n^r))+i[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^r&(t^n))+i[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=r+(t^n&(s^t))+i[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(r^s))+i[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=t+(r^s&(n^r))+i[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^r&(t^n))+i[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=r+(t^n&(s^t))+i[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(r^s))+i[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=t+(r^s&(n^r))+i[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^r&(t^n))+i[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=r+(t^n&(s^t))+i[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(r^s))+i[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=t+(n^r^s)+i[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^r)+i[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=r+(s^t^n)+i[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=n+(r^s^t)+i[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^r^s)+i[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^r)+i[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=r+(s^t^n)+i[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=n+(r^s^t)+i[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^r^s)+i[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^r)+i[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=r+(s^t^n)+i[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=n+(r^s^t)+i[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^r^s)+i[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^r)+i[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=r+(s^t^n)+i[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=n+(r^s^t)+i[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=t+(r^(n|~s))+i[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~r))+i[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=r+(t^(s|~n))+i[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(r|~t))+i[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=t+(r^(n|~s))+i[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~r))+i[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=r+(t^(s|~n))+i[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(r|~t))+i[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=t+(r^(n|~s))+i[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~r))+i[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=r+(t^(s|~n))+i[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(r|~t))+i[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((s=(t=n+((o=t+(r^(n|~s))+i[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~r))+i[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((r=s+((o=r+(t^(s|~n))+i[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~t))+i[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(r+(o<<21&4294967295|o>>>11))&4294967295,e.g[2]=e.g[2]+r&4294967295,e.g[3]=e.g[3]+s&4294967295}function i(e,t){this.h=t;for(var n=[],i=!0,r=e.length-1;0<=r;r--){var s=0|e[r];i&&s==t||(n[r]=s,i=!1)}this.g=n}!function(e,t){function n(){}n.prototype=t.prototype,e.D=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.C=function(e,n,i){for(var r=Array(arguments.length-2),s=2;s<arguments.length;s++)r[s-2]=arguments[s];return t.prototype[n].apply(e,r)}}(t,(function(){this.blockSize=-1})),t.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},t.prototype.u=function(e,t){void 0===t&&(t=e.length);for(var i=t-this.blockSize,r=this.B,s=this.h,o=0;o<t;){if(0==s)for(;o<=i;)n(this,e,o),o+=this.blockSize;if("string"===typeof e){for(;o<t;)if(r[s++]=e.charCodeAt(o++),s==this.blockSize){n(this,r),s=0;break}}else for(;o<t;)if(r[s++]=e[o++],s==this.blockSize){n(this,r),s=0;break}}this.h=s,this.o+=t},t.prototype.v=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.o;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.u(e),e=Array(16),t=n=0;4>t;++t)for(var i=0;32>i;i+=8)e[n++]=this.g[t]>>>i&255;return e};var r={};function s(e){return-128<=e&&128>e?function(e,t){var n=r;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,(function(e){return new i([0|e],0>e?-1:0)})):new i([0|e],0>e?-1:0)}function o(e){if(isNaN(e)||!isFinite(e))return a;if(0>e)return d(o(-e));for(var t=[],n=1,r=0;e>=n;r++)t[r]=e/n|0,n*=4294967296;return new i(t,0)}var a=s(0),l=s(1),c=s(16777216);function h(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function u(e){return-1==e.h}function d(e){for(var t=e.g.length,n=[],r=0;r<t;r++)n[r]=~e.g[r];return new i(n,~e.h).add(l)}function f(e,t){return e.add(d(t))}function p(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function g(e,t){this.g=e,this.h=t}function m(e,t){if(h(t))throw Error("division by zero");if(h(e))return new g(a,a);if(u(e))return t=m(d(e),t),new g(d(t.g),d(t.h));if(u(t))return t=m(e,d(t)),new g(d(t.g),t.h);if(30<e.g.length){if(u(e)||u(t))throw Error("slowDivide_ only works with positive integers.");for(var n=l,i=t;0>=i.l(e);)n=v(n),i=v(i);var r=y(n,1),s=y(i,1);for(i=y(i,2),n=y(n,2);!h(i);){var c=s.add(i);0>=c.l(e)&&(r=r.add(n),s=c),i=y(i,1),n=y(n,1)}return t=f(e,r.j(t)),new g(r,t)}for(r=a;0<=e.l(t);){for(n=Math.max(1,Math.floor(e.m()/t.m())),i=48>=(i=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,i-48),c=(s=o(n)).j(t);u(c)||0<c.l(e);)c=(s=o(n-=i)).j(t);h(s)&&(s=l),r=r.add(s),e=f(e,c)}return new g(r,e)}function v(e){for(var t=e.g.length+1,n=[],r=0;r<t;r++)n[r]=e.i(r)<<1|e.i(r-1)>>>31;return new i(n,e.h)}function y(e,t){var n=t>>5;t%=32;for(var r=e.g.length-n,s=[],o=0;o<r;o++)s[o]=0<t?e.i(o+n)>>>t|e.i(o+n+1)<<32-t:e.i(o+n);return new i(s,e.h)}(e=i.prototype).m=function(){if(u(this))return-d(this).m();for(var e=0,t=1,n=0;n<this.g.length;n++){var i=this.i(n);e+=(0<=i?i:4294967296+i)*t,t*=4294967296}return e},e.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(h(this))return"0";if(u(this))return"-"+d(this).toString(e);for(var t=o(Math.pow(e,6)),n=this,i="";;){var r=m(n,t).g,s=((0<(n=f(n,r.j(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(h(n=r))return s+i;for(;6>s.length;)s="0"+s;i=s+i}},e.i=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},e.l=function(e){return u(e=f(this,e))?-1:h(e)?0:1},e.abs=function(){return u(this)?d(this):this},e.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0,s=0;s<=t;s++){var o=r+(65535&this.i(s))+(65535&e.i(s)),a=(o>>>16)+(this.i(s)>>>16)+(e.i(s)>>>16);r=a>>>16,o&=65535,a&=65535,n[s]=a<<16|o}return new i(n,-2147483648&n[n.length-1]?-1:0)},e.j=function(e){if(h(this)||h(e))return a;if(u(this))return u(e)?d(this).j(d(e)):d(d(this).j(e));if(u(e))return d(this.j(d(e)));if(0>this.l(c)&&0>e.l(c))return o(this.m()*e.m());for(var t=this.g.length+e.g.length,n=[],r=0;r<2*t;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var s=0;s<e.g.length;s++){var l=this.i(r)>>>16,f=65535&this.i(r),g=e.i(s)>>>16,m=65535&e.i(s);n[2*r+2*s]+=f*m,p(n,2*r+2*s),n[2*r+2*s+1]+=l*m,p(n,2*r+2*s+1),n[2*r+2*s+1]+=f*g,p(n,2*r+2*s+1),n[2*r+2*s+2]+=l*g,p(n,2*r+2*s+2)}for(r=0;r<t;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=t;r<2*t;r++)n[r]=0;return new i(n,0)},e.A=function(e){return m(this,e).h},e.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.i(r)&e.i(r);return new i(n,this.h&e.h)},e.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.i(r)|e.i(r);return new i(n,this.h|e.h)},e.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.i(r)^e.i(r);return new i(n,this.h^e.h)},t.prototype.digest=t.prototype.v,t.prototype.reset=t.prototype.s,t.prototype.update=t.prototype.u,Hs=Xs.Md5=t,i.prototype.add=i.prototype.add,i.prototype.multiply=i.prototype.j,i.prototype.modulo=i.prototype.A,i.prototype.compare=i.prototype.l,i.prototype.toNumber=i.prototype.m,i.prototype.toString=i.prototype.toString,i.prototype.getBits=i.prototype.i,i.fromNumber=o,i.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return d(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var i=o(Math.pow(n,8)),r=a,s=0;s<t.length;s+=8){var l=Math.min(8,t.length-s),c=parseInt(t.substring(s,s+l),n);8>l?(l=o(Math.pow(n,l)),r=r.j(l).add(o(c))):r=(r=r.j(i)).add(o(c))}return r},Ws=Xs.Integer=i}).apply("undefined"!==typeof $s?$s:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});var Gs,Ks,Ys,Js,Zs,eo,to,no,io,ro="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},so={};(function(){var e,t="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e};var n=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof ro&&ro];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}(this);!function(e,i){if(i)e:{var r=n;e=e.split(".");for(var s=0;s<e.length-1;s++){var o=e[s];if(!(o in r))break e;r=r[o]}(i=i(s=r[e=e[e.length-1]]))!=s&&null!=i&&t(r,e,{configurable:!0,writable:!0,value:i})}}("Array.prototype.values",(function(e){return e||function(){return function(e,t){e instanceof String&&(e+="");var n=0,i=!1,r={next:function(){if(!i&&n<e.length){var r=n++;return{value:t(r,e[r]),done:!1}}return i=!0,{done:!0,value:void 0}}};return r[Symbol.iterator]=function(){return r},r}(this,(function(e,t){return t}))}}));var i=i||{},r=this||self;function s(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function o(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function a(e,t,n){return e.call.apply(e.bind,arguments)}function l(e,t,n){if(!e)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,i),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function c(e,t,n){return(c=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?a:l).apply(null,arguments)}function h(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function u(e,t){function n(){}n.prototype=t.prototype,e.aa=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Qb=function(e,n,i){for(var r=Array(arguments.length-2),s=2;s<arguments.length;s++)r[s-2]=arguments[s];return t.prototype[n].apply(e,r)}}function d(e){const t=e.length;if(0<t){const n=Array(t);for(let i=0;i<t;i++)n[i]=e[i];return n}return[]}function f(e,t){for(let n=1;n<arguments.length;n++){const t=arguments[n];if(s(t)){const n=e.length||0,i=t.length||0;e.length=n+i;for(let r=0;r<i;r++)e[n+r]=t[r]}else e.push(t)}}function p(e){return/^[\s\xa0]*$/.test(e)}function g(){var e=r.navigator;return e&&(e=e.userAgent)?e:""}function m(e){return m[" "](e),e}m[" "]=function(){};var v=-1!=g().indexOf("Gecko")&&!(-1!=g().toLowerCase().indexOf("webkit")&&-1==g().indexOf("Edge"))&&!(-1!=g().indexOf("Trident")||-1!=g().indexOf("MSIE"))&&-1==g().indexOf("Edge");function y(e,t,n){for(const i in e)t.call(n,e[i],i,e)}function w(e){const t={};for(const n in e)t[n]=e[n];return t}const b="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function O(e,t){let n,i;for(let r=1;r<arguments.length;r++){for(n in i=arguments[r],i)e[n]=i[n];for(let t=0;t<b.length;t++)n=b[t],Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}}function k(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function S(e){r.setTimeout((()=>{throw e}),0)}function x(){var e=A;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var T=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}((()=>new C),(e=>e.reset()));class C{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}let E,_=!1,A=new class{constructor(){this.h=this.g=null}add(e,t){const n=T.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},P=()=>{const e=r.Promise.resolve(void 0);E=()=>{e.then(N)}};var N=()=>{for(var e;e=x();){try{e.h.call(e.g)}catch(n){S(n)}var t=T;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}_=!1};function I(){this.s=this.s,this.C=this.C}function R(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}I.prototype.s=!1,I.prototype.ma=function(){this.s||(this.s=!0,this.N())},I.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},R.prototype.h=function(){this.defaultPrevented=!0};var D=function(){if(!r.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};r.addEventListener("test",e,t),r.removeEventListener("test",e,t)}catch(n){}return e}();function M(e,t){if(R.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,i=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(v){e:{try{m(t.nodeName);var r=!0;break e}catch(s){}r=!1}r||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,i?(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:L[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&M.aa.h.call(this)}}u(M,R);var L={2:"touch",3:"pen",4:"mouse"};M.prototype.h=function(){M.aa.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var Q="closure_listenable_"+(1e6*Math.random()|0),z=0;function j(e,t,n,i,r){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!i,this.ha=r,this.key=++z,this.da=this.fa=!1}function U(e){e.da=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function V(e){this.src=e,this.g={},this.h=0}function F(e,t){var n=t.type;if(n in e.g){var i,r=e.g[n],s=Array.prototype.indexOf.call(r,t,void 0);(i=0<=s)&&Array.prototype.splice.call(r,s,1),i&&(U(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function q(e,t,n,i){for(var r=0;r<e.length;++r){var s=e[r];if(!s.da&&s.listener==t&&s.capture==!!n&&s.ha==i)return r}return-1}V.prototype.add=function(e,t,n,i,r){var s=e.toString();(e=this.g[s])||(e=this.g[s]=[],this.h++);var o=q(e,t,i,r);return-1<o?(t=e[o],n||(t.fa=!1)):((t=new j(t,this.src,s,!!i,r)).fa=n,e.push(t)),t};var B="closure_lm_"+(1e6*Math.random()|0),W={};function H(e,t,n,i,r){if(i&&i.once)return X(e,t,n,i,r);if(Array.isArray(t)){for(var s=0;s<t.length;s++)H(e,t[s],n,i,r);return null}return n=te(n),e&&e[Q]?e.K(t,n,o(i)?!!i.capture:!!i,r):$(e,t,n,!1,i,r)}function $(e,t,n,i,r,s){if(!t)throw Error("Invalid event type");var a=o(r)?!!r.capture:!!r,l=Z(e);if(l||(e[B]=l=new V(e)),(n=l.add(t,n,i,a,s)).proxy)return n;if(i=function(){function e(n){return t.call(e.src,e.listener,n)}const t=J;return e}(),n.proxy=i,i.src=e,i.listener=n,e.addEventListener)D||(r=a),void 0===r&&(r=!1),e.addEventListener(t.toString(),i,r);else if(e.attachEvent)e.attachEvent(Y(t.toString()),i);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(i)}return n}function X(e,t,n,i,r){if(Array.isArray(t)){for(var s=0;s<t.length;s++)X(e,t[s],n,i,r);return null}return n=te(n),e&&e[Q]?e.L(t,n,o(i)?!!i.capture:!!i,r):$(e,t,n,!0,i,r)}function G(e,t,n,i,r){if(Array.isArray(t))for(var s=0;s<t.length;s++)G(e,t[s],n,i,r);else i=o(i)?!!i.capture:!!i,n=te(n),e&&e[Q]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=q(s=e.g[t],n,i,r))&&(U(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete e.g[t],e.h--)))):e&&(e=Z(e))&&(t=e.g[t.toString()],e=-1,t&&(e=q(t,n,i,r)),(n=-1<e?t[e]:null)&&K(n))}function K(e){if("number"!==typeof e&&e&&!e.da){var t=e.src;if(t&&t[Q])F(t.i,e);else{var n=e.type,i=e.proxy;t.removeEventListener?t.removeEventListener(n,i,e.capture):t.detachEvent?t.detachEvent(Y(n),i):t.addListener&&t.removeListener&&t.removeListener(i),(n=Z(t))?(F(n,e),0==n.h&&(n.src=null,t[B]=null)):U(e)}}}function Y(e){return e in W?W[e]:W[e]="on"+e}function J(e,t){if(e.da)e=!0;else{t=new M(t,this);var n=e.listener,i=e.ha||e.src;e.fa&&K(e),e=n.call(i,t)}return e}function Z(e){return(e=e[B])instanceof V?e:null}var ee="__closure_events_fn_"+(1e9*Math.random()>>>0);function te(e){return"function"===typeof e?e:(e[ee]||(e[ee]=function(t){return e.handleEvent(t)}),e[ee])}function ne(){I.call(this),this.i=new V(this),this.M=this,this.F=null}function ie(e,t){var n,i=e.F;if(i)for(n=[];i;i=i.F)n.push(i);if(e=e.M,i=t.type||t,"string"===typeof t)t=new R(t,e);else if(t instanceof R)t.target=t.target||e;else{var r=t;O(t=new R(i,e),r)}if(r=!0,n)for(var s=n.length-1;0<=s;s--){var o=t.g=n[s];r=re(o,i,!0,t)&&r}if(r=re(o=t.g=e,i,!0,t)&&r,r=re(o,i,!1,t)&&r,n)for(s=0;s<n.length;s++)r=re(o=t.g=n[s],i,!1,t)&&r}function re(e,t,n,i){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var r=!0,s=0;s<t.length;++s){var o=t[s];if(o&&!o.da&&o.capture==n){var a=o.listener,l=o.ha||o.src;o.fa&&F(e.i,o),r=!1!==a.call(l,i)&&r}}return r&&!i.defaultPrevented}function se(e,t,n){if("function"===typeof e)n&&(e=c(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=c(e.handleEvent,e)}return 2147483647<Number(t)?-1:r.setTimeout(e,t||0)}function oe(e){e.g=se((()=>{e.g=null,e.i&&(e.i=!1,oe(e))}),e.l);const t=e.h;e.h=null,e.m.apply(null,t)}u(ne,I),ne.prototype[Q]=!0,ne.prototype.removeEventListener=function(e,t,n,i){G(this,e,t,n,i)},ne.prototype.N=function(){if(ne.aa.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],i=0;i<n.length;i++)U(n[i]);delete t.g[e],t.h--}}this.F=null},ne.prototype.K=function(e,t,n,i){return this.i.add(String(e),t,!1,n,i)},ne.prototype.L=function(e,t,n,i){return this.i.add(String(e),t,!0,n,i)};class ae extends I{constructor(e,t){super(),this.m=e,this.l=t,this.h=null,this.i=!1,this.g=null}j(e){this.h=arguments,this.g?this.i=!0:oe(this)}N(){super.N(),this.g&&(r.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function le(e){I.call(this),this.h=e,this.g={}}u(le,I);var ce=[];function he(e){y(e.g,(function(e,t){this.g.hasOwnProperty(t)&&K(e)}),e),e.g={}}le.prototype.N=function(){le.aa.N.call(this),he(this)},le.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ue=r.JSON.stringify,de=r.JSON.parse,fe=class{stringify(e){return r.JSON.stringify(e,void 0)}parse(e){return r.JSON.parse(e,void 0)}};function pe(){}function ge(e){return e.h||(e.h=e.i())}function me(){}pe.prototype.h=null;var ve={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ye(){R.call(this,"d")}function we(){R.call(this,"c")}u(ye,R),u(we,R);var be={},Oe=null;function ke(){return Oe=Oe||new ne}function Se(e){R.call(this,be.La,e)}function xe(e){const t=ke();ie(t,new Se(t))}function Te(e,t){R.call(this,be.STAT_EVENT,e),this.stat=t}function Ce(e){const t=ke();ie(t,new Te(t,e))}function Ee(e,t){R.call(this,be.Ma,e),this.size=t}function _e(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return r.setTimeout((function(){e()}),t)}function Ae(){this.g=!0}function Pe(e,t,n,i){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var i=n[e];if(!(2>i.length)){var r=i[1];if(Array.isArray(r)&&!(1>r.length)){var s=r[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<r.length;o++)r[o]=""}}}return ue(n)}catch(a){return t}}(e,n)+(i?" "+i:"")}))}be.La="serverreachability",u(Se,R),be.STAT_EVENT="statevent",u(Te,R),be.Ma="timingevent",u(Ee,R),Ae.prototype.xa=function(){this.g=!1},Ae.prototype.info=function(){};var Ne,Ie={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Re={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function De(){}function Me(e,t,n,i){this.j=e,this.i=t,this.l=n,this.R=i||1,this.U=new le(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Le}function Le(){this.i=null,this.g="",this.h=!1}u(De,pe),De.prototype.g=function(){return new XMLHttpRequest},De.prototype.i=function(){return{}},Ne=new De;var Qe={},ze={};function je(e,t,n){e.L=1,e.v=ut(ot(t)),e.m=n,e.P=!0,Ue(e,null)}function Ue(e,t){e.F=Date.now(),qe(e),e.A=ot(e.v);var n=e.A,i=e.R;Array.isArray(i)||(i=[String(i)]),Tt(n.i,"t",i),e.C=0,n=e.j.J,e.h=new Le,e.g=fn(e.j,n?t:null,!e.m),0<e.O&&(e.M=new ae(c(e.Y,e,e.g),e.O)),t=e.U,n=e.g,i=e.ca;var r="readystatechange";Array.isArray(r)||(r&&(ce[0]=r.toString()),r=ce);for(var s=0;s<r.length;s++){var o=H(n,r[s],i||t.handleEvent,!1,t.h||t);if(!o)break;t.g[o.key]=o}t=e.H?w(e.H):{},e.m?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.m,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),xe(),function(e,t,n,i,r,s){e.info((function(){if(e.g)if(s)for(var o="",a=s.split("&"),l=0;l<a.length;l++){var c=a[l].split("=");if(1<c.length){var h=c[0];c=c[1];var u=h.split("_");o=2<=u.length&&"type"==u[1]?o+(h+"=")+c+"&":o+(h+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+i+") [attempt "+r+"]: "+t+"\n"+n+"\n"+o}))}(e.i,e.u,e.A,e.l,e.R,e.m)}function Ve(e){return!!e.g&&("GET"==e.u&&2!=e.L&&e.j.Ca)}function Fe(e,t){var n=e.C,i=t.indexOf("\n",n);return-1==i?ze:(n=Number(t.substring(n,i)),isNaN(n)?Qe:(i+=1)+n>t.length?ze:(t=t.slice(i,i+n),e.C=i+n,t))}function qe(e){e.S=Date.now()+e.I,Be(e,e.I)}function Be(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=_e(c(e.ba,e),t)}function We(e){e.B&&(r.clearTimeout(e.B),e.B=null)}function He(e){0==e.j.G||e.J||ln(e.j,e)}function $e(e){We(e);var t=e.M;t&&"function"==typeof t.ma&&t.ma(),e.M=null,he(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.ma())}function Xe(e,t){try{var n=e.j;if(0!=n.G&&(n.g==e||Ze(n.h,e)))if(!e.K&&Ze(n.h,e)&&3==n.G){try{var i=n.Da.g.parse(t)}catch(h){i=null}if(Array.isArray(i)&&3==i.length){var r=i;if(0==r[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;an(n),Kt(n)}rn(n),Ce(18)}}else n.za=r[1],0<n.za-n.T&&37500>r[2]&&n.F&&0==n.v&&!n.C&&(n.C=_e(c(n.Za,n),6e3));if(1>=Je(n.h)&&n.ca){try{n.ca()}catch(h){}n.ca=void 0}}else hn(n,11)}else if((e.K||n.g==e)&&an(n),!p(t))for(r=n.Da.g.parse(t),t=0;t<r.length;t++){let c=r[t];if(n.T=c[0],c=c[1],2==n.G)if("c"==c[0]){n.K=c[1],n.ia=c[2];const t=c[3];null!=t&&(n.la=t,n.j.info("VER="+n.la));const r=c[4];null!=r&&(n.Aa=r,n.j.info("SVER="+n.Aa));const h=c[5];null!=h&&"number"===typeof h&&0<h&&(i=1.5*h,n.L=i,n.j.info("backChannelRequestTimeoutMs_="+i)),i=n;const u=e.g;if(u){const e=u.g?u.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var s=i.h;s.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(et(s,s.h),s.h=null))}if(i.D){const e=u.g?u.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(i.ya=e,ht(i.I,i.D,e))}}n.G=3,n.l&&n.l.ua(),n.ba&&(n.R=Date.now()-e.F,n.j.info("Handshake RTT: "+n.R+"ms"));var o=e;if((i=n).qa=dn(i,i.J?i.ia:null,i.W),o.K){tt(i.h,o);var a=o,l=i.L;l&&(a.I=l),a.B&&(We(a),qe(a)),i.g=o}else nn(i);0<n.i.length&&Jt(n)}else"stop"!=c[0]&&"close"!=c[0]||hn(n,7);else 3==n.G&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?hn(n,7):Gt(n):"noop"!=c[0]&&n.l&&n.l.ta(c),n.v=0)}xe()}catch(h){}}Me.prototype.ca=function(e){e=e.target;const t=this.M;t&&3==Wt(e)?t.j():this.Y(e)},Me.prototype.Y=function(e){try{if(e==this.g)e:{const d=Wt(this.g);var t=this.g.Ba();this.g.Z();if(!(3>d)&&(3!=d||this.g&&(this.h.h||this.g.oa()||Ht(this.g)))){this.J||4!=d||7==t||xe(),We(this);var n=this.g.Z();this.X=n;t:if(Ve(this)){var i=Ht(this.g);e="";var s=i.length,o=4==Wt(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){$e(this),He(this);var a="";break t}this.h.i=new r.TextDecoder}for(t=0;t<s;t++)this.h.h=!0,e+=this.h.i.decode(i[t],{stream:!(o&&t==s-1)});i.length=0,this.h.g+=e,this.C=0,a=this.h.g}else a=this.g.oa();if(this.o=200==n,function(e,t,n,i,r,s,o){e.info((function(){return"XMLHTTP RESP ("+i+") [ attempt "+r+"]: "+t+"\n"+n+"\n"+s+" "+o}))}(this.i,this.u,this.A,this.l,this.R,d,n),this.o){if(this.T&&!this.K){t:{if(this.g){var l,c=this.g;if((l=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!p(l)){var h=l;break t}}h=null}if(!(n=h)){this.o=!1,this.s=3,Ce(12),$e(this),He(this);break e}Pe(this.i,this.l,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Xe(this,n)}if(this.P){let e;for(n=!0;!this.J&&this.C<a.length;){if(e=Fe(this,a),e==ze){4==d&&(this.s=4,Ce(14),n=!1),Pe(this.i,this.l,null,"[Incomplete Response]");break}if(e==Qe){this.s=4,Ce(15),Pe(this.i,this.l,a,"[Invalid Chunk]"),n=!1;break}Pe(this.i,this.l,e,null),Xe(this,e)}if(Ve(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=d||0!=a.length||this.h.h||(this.s=1,Ce(16),n=!1),this.o=this.o&&n,n){if(0<a.length&&!this.W){this.W=!0;var u=this.j;u.g==this&&u.ba&&!u.M&&(u.j.info("Great, no buffering proxy detected. Bytes received: "+a.length),sn(u),u.M=!0,Ce(11))}}else Pe(this.i,this.l,a,"[Invalid Chunked Response]"),$e(this),He(this)}else Pe(this.i,this.l,a,null),Xe(this,a);4==d&&$e(this),this.o&&!this.J&&(4==d?ln(this.j,this):(this.o=!1,qe(this)))}else(function(e){const t={};e=(e.g&&2<=Wt(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let i=0;i<e.length;i++){if(p(e[i]))continue;var n=k(e[i]);const r=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const s=t[r]||[];t[r]=s,s.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,(function(e){return e.join(", ")}))})(this.g),400==n&&0<a.indexOf("Unknown SID")?(this.s=3,Ce(12)):(this.s=0,Ce(13)),$e(this),He(this)}}}catch(d){}},Me.prototype.cancel=function(){this.J=!0,$e(this)},Me.prototype.ba=function(){this.B=null;const e=Date.now();0<=e-this.S?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.i,this.A),2!=this.L&&(xe(),Ce(17)),$e(this),this.s=2,He(this)):Be(this,this.S-e)};var Ge=class{constructor(e,t){this.g=e,this.map=t}};function Ke(e){this.l=e||10,r.PerformanceNavigationTiming?e=0<(e=r.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(r.chrome&&r.chrome.loadTimes&&r.chrome.loadTimes()&&r.chrome.loadTimes().wasFetchedViaSpdy),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Ye(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Je(e){return e.h?1:e.g?e.g.size:0}function Ze(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function et(e,t){e.g?e.g.add(t):e.h=t}function tt(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function nt(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.D);return t}return d(e.i)}function it(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(s(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.na&&"function"==typeof e.na)return e.na();if(!e.V||"function"!=typeof e.V){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(s(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const i in e)t[n++]=i;return t}}}(e),i=function(e){if(e.V&&"function"==typeof e.V)return e.V();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(s(e)){for(var t=[],n=e.length,i=0;i<n;i++)t.push(e[i]);return t}for(i in t=[],n=0,e)t[n++]=e[i];return t}(e),r=i.length,o=0;o<r;o++)t.call(void 0,i[o],n&&n[o],e)}Ke.prototype.cancel=function(){if(this.i=nt(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var rt=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function st(e){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,e instanceof st){this.h=e.h,at(this,e.j),this.o=e.o,this.g=e.g,lt(this,e.s),this.l=e.l;var t=e.i,n=new Ot;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),ct(this,n),this.m=e.m}else e&&(t=String(e).match(rt))?(this.h=!1,at(this,t[1]||"",!0),this.o=dt(t[2]||""),this.g=dt(t[3]||"",!0),lt(this,t[4]),this.l=dt(t[5]||"",!0),ct(this,t[6]||"",!0),this.m=dt(t[7]||"")):(this.h=!1,this.i=new Ot(null,this.h))}function ot(e){return new st(e)}function at(e,t,n){e.j=n?dt(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function lt(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.s=t}else e.s=null}function ct(e,t,n){t instanceof Ot?(e.i=t,function(e,t){t&&!e.j&&(kt(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(St(this,t),Tt(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=ft(t,wt)),e.i=new Ot(t,e.h))}function ht(e,t,n){e.i.set(t,n)}function ut(e){return ht(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function dt(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function ft(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,pt),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function pt(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}st.prototype.toString=function(){var e=[],t=this.j;t&&e.push(ft(t,mt,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.o)&&e.push(ft(t,mt,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.s)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(ft(n,"/"==n.charAt(0)?yt:vt,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.m)&&e.push("#",ft(n,bt)),e.join("")};var gt,mt=/[#\/\?@]/g,vt=/[#\?:]/g,yt=/[#\?]/g,wt=/[#\?@]/g,bt=/#/g;function Ot(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function kt(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var i=e[n].indexOf("="),r=null;if(0<=i){var s=e[n].substring(0,i);r=e[n].substring(i+1)}else s=e[n];t(s,r?decodeURIComponent(r.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function St(e,t){kt(e),t=Ct(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function xt(e,t){return kt(e),t=Ct(e,t),e.g.has(t)}function Tt(e,t,n){St(e,t),0<n.length&&(e.i=null,e.g.set(Ct(e,t),d(n)),e.h+=n.length)}function Ct(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function Et(e,t,n,i,r){try{r&&(r.onload=null,r.onerror=null,r.onabort=null,r.ontimeout=null),i(n)}catch(s){}}function _t(){this.g=new fe}function At(e,t,n){const i=n||"";try{it(e,(function(e,n){let r=e;o(e)&&(r=ue(e)),t.push(i+n+"="+encodeURIComponent(r))}))}catch(kj){throw t.push(i+"type="+encodeURIComponent("_badmap")),kj}}function Pt(e){this.l=e.Ub||null,this.j=e.eb||!1}function Nt(e,t){ne.call(this),this.D=e,this.o=t,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function It(e){e.j.read().then(e.Pa.bind(e)).catch(e.ga.bind(e))}function Rt(e){e.readyState=4,e.l=null,e.j=null,e.v=null,Dt(e)}function Dt(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function Mt(e){let t="";return y(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function Lt(e,t,n){e:{for(i in n){var i=!1;break e}i=!0}i||(n=Mt(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):ht(e,t,n))}function Qt(e){ne.call(this),this.headers=new Map,this.o=e||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(e=Ot.prototype).add=function(e,t){kt(this),this.i=null,e=Ct(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},e.forEach=function(e,t){kt(this),this.g.forEach((function(n,i){n.forEach((function(n){e.call(t,n,i,this)}),this)}),this)},e.na=function(){kt(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let i=0;i<t.length;i++){const r=e[i];for(let e=0;e<r.length;e++)n.push(t[i])}return n},e.V=function(e){kt(this);let t=[];if("string"===typeof e)xt(this,e)&&(t=t.concat(this.g.get(Ct(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},e.set=function(e,t){return kt(this),this.i=null,xt(this,e=Ct(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},e.get=function(e,t){return e&&0<(e=this.V(e)).length?String(e[0]):t},e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var i=t[n];const s=encodeURIComponent(String(i)),o=this.V(i);for(i=0;i<o.length;i++){var r=s;""!==o[i]&&(r+="="+encodeURIComponent(String(o[i]))),e.push(r)}}return this.i=e.join("&")},u(Pt,pe),Pt.prototype.g=function(){return new Nt(this.l,this.j)},Pt.prototype.i=(gt={},function(){return gt}),u(Nt,ne),(e=Nt.prototype).open=function(e,t){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=e,this.A=t,this.readyState=1,Dt(this)},e.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.u,method:this.B,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||r).fetch(new Request(this.A,t)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((()=>{})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Rt(this)),this.readyState=0},e.Sa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Dt(this)),this.g&&(this.readyState=3,Dt(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if("undefined"!==typeof r.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;It(this)}else e.text().then(this.Ra.bind(this),this.ga.bind(this))},e.Pa=function(e){if(this.g){if(this.o&&e.value)this.response.push(e.value);else if(!this.o){var t=e.value?e.value:new Uint8Array(0);(t=this.v.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Rt(this):Dt(this),3==this.readyState&&It(this)}},e.Ra=function(e){this.g&&(this.response=this.responseText=e,Rt(this))},e.Qa=function(e){this.g&&(this.response=e,Rt(this))},e.ga=function(){this.g&&Rt(this)},e.setRequestHeader=function(e,t){this.u.append(e,t)},e.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Nt.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}}),u(Qt,ne);var zt=/^https?$/i,jt=["POST","PUT"];function Ut(e,t){e.h=!1,e.g&&(e.j=!0,e.g.abort(),e.j=!1),e.l=t,e.m=5,Vt(e),qt(e)}function Vt(e){e.A||(e.A=!0,ie(e,"complete"),ie(e,"error"))}function Ft(e){if(e.h&&"undefined"!=typeof i&&(!e.v[1]||4!=Wt(e)||2!=e.Z()))if(e.u&&4==Wt(e))se(e.Ea,0,e);else if(ie(e,"readystatechange"),4==Wt(e)){e.h=!1;try{const i=e.Z();e:switch(i){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var s;if(s=0===i){var o=String(e.D).match(rt)[1]||null;!o&&r.self&&r.self.location&&(o=r.self.location.protocol.slice(0,-1)),s=!zt.test(o?o.toLowerCase():"")}n=s}if(n)ie(e,"complete"),ie(e,"success");else{e.m=6;try{var a=2<Wt(e)?e.g.statusText:""}catch(l){a=""}e.l=a+" ["+e.Z()+"]",Vt(e)}}finally{qt(e)}}}function qt(e,t){if(e.g){Bt(e);const n=e.g,i=e.v[0]?()=>{}:null;e.g=null,e.v=null,t||ie(e,"ready");try{n.onreadystatechange=i}catch(kj){}}}function Bt(e){e.I&&(r.clearTimeout(e.I),e.I=null)}function Wt(e){return e.g?e.g.readyState:0}function Ht(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.H){case"":case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(lo){return null}}function $t(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Xt(e){this.Aa=0,this.i=[],this.j=new Ae,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=$t("failFast",!1,e),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=$t("baseRetryDelayMs",5e3,e),this.cb=$t("retryDelaySeedMs",1e4,e),this.Wa=$t("forwardChannelMaxRetries",2,e),this.wa=$t("forwardChannelRequestTimeoutMs",2e4,e),this.pa=e&&e.xmlHttpFactory||void 0,this.Xa=e&&e.Tb||void 0,this.Ca=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.h=new Ke(e&&e.concurrentRequestLimit),this.Da=new _t,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=e&&e.Rb||!1,e&&e.xa&&this.j.xa(),e&&e.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&e&&e.detectBufferingProxy||!1,this.ja=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.ja=e.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function Gt(e){if(Yt(e),3==e.G){var t=e.U++,n=ot(e.I);if(ht(n,"SID",e.K),ht(n,"RID",t),ht(n,"TYPE","terminate"),en(e,n),(t=new Me(e,e.j,t)).L=2,t.v=ut(ot(n)),n=!1,r.navigator&&r.navigator.sendBeacon)try{n=r.navigator.sendBeacon(t.v.toString(),"")}catch(i){}!n&&r.Image&&((new Image).src=t.v,n=!0),n||(t.g=fn(t.j,null),t.g.ea(t.v)),t.F=Date.now(),qe(t)}un(e)}function Kt(e){e.g&&(sn(e),e.g.cancel(),e.g=null)}function Yt(e){Kt(e),e.u&&(r.clearTimeout(e.u),e.u=null),an(e),e.h.cancel(),e.s&&("number"===typeof e.s&&r.clearTimeout(e.s),e.s=null)}function Jt(e){if(!Ye(e.h)&&!e.s){e.s=!0;var t=e.Ga;E||P(),_||(E(),_=!0),A.add(t,e),e.B=0}}function Zt(e,t){var n;n=t?t.l:e.U++;const i=ot(e.I);ht(i,"SID",e.K),ht(i,"RID",n),ht(i,"AID",e.T),en(e,i),e.m&&e.o&&Lt(i,e.m,e.o),n=new Me(e,e.j,n,e.B+1),null===e.m&&(n.H=e.o),t&&(e.i=t.D.concat(e.i)),t=tn(e,n,1e3),n.I=Math.round(.5*e.wa)+Math.round(.5*e.wa*Math.random()),et(e.h,n),je(n,i,t)}function en(e,t){e.H&&y(e.H,(function(e,n){ht(t,n,e)})),e.l&&it({},(function(e,n){ht(t,n,e)}))}function tn(e,t,n){n=Math.min(e.i.length,n);var i=e.l?c(e.l.Na,e.l,e):null;e:{var r=e.i;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=r[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let o=!0;for(let a=0;a<n;a++){let n=r[a].g;const l=r[a].map;if(n-=t,0>n)t=Math.max(0,r[a].g-100),o=!1;else try{At(l,e,"req"+n+"_")}catch(s){i&&i(l)}}if(o){i=e.join("&");break e}}}return e=e.i.splice(0,n),t.D=e,i}function nn(e){if(!e.g&&!e.u){e.Y=1;var t=e.Fa;E||P(),_||(E(),_=!0),A.add(t,e),e.v=0}}function rn(e){return!(e.g||e.u||3<=e.v)&&(e.Y++,e.u=_e(c(e.Fa,e),cn(e,e.v)),e.v++,!0)}function sn(e){null!=e.A&&(r.clearTimeout(e.A),e.A=null)}function on(e){e.g=new Me(e,e.j,"rpc",e.Y),null===e.m&&(e.g.H=e.o),e.g.O=0;var t=ot(e.qa);ht(t,"RID","rpc"),ht(t,"SID",e.K),ht(t,"AID",e.T),ht(t,"CI",e.F?"0":"1"),!e.F&&e.ja&&ht(t,"TO",e.ja),ht(t,"TYPE","xmlhttp"),en(e,t),e.m&&e.o&&Lt(t,e.m,e.o),e.L&&(e.g.I=e.L);var n=e.g;e=e.ia,n.L=1,n.v=ut(ot(t)),n.m=null,n.P=!0,Ue(n,e)}function an(e){null!=e.C&&(r.clearTimeout(e.C),e.C=null)}function ln(e,t){var n=null;if(e.g==t){an(e),sn(e),e.g=null;var i=2}else{if(!Ze(e.h,t))return;n=t.D,tt(e.h,t),i=1}if(0!=e.G)if(t.o)if(1==i){n=t.m?t.m.length:0,t=Date.now()-t.F;var r=e.B;ie(i=ke(),new Ee(i,n)),Jt(e)}else nn(e);else if(3==(r=t.s)||0==r&&0<t.X||!(1==i&&function(e,t){return!(Je(e.h)>=e.h.j-(e.s?1:0))&&(e.s?(e.i=t.D.concat(e.i),!0):!(1==e.G||2==e.G||e.B>=(e.Va?0:e.Wa))&&(e.s=_e(c(e.Ga,e,t),cn(e,e.B)),e.B++,!0))}(e,t)||2==i&&rn(e)))switch(n&&0<n.length&&(t=e.h,t.i=t.i.concat(n)),r){case 1:hn(e,5);break;case 4:hn(e,10);break;case 3:hn(e,6);break;default:hn(e,2)}}function cn(e,t){let n=e.Ta+Math.floor(Math.random()*e.cb);return e.isActive()||(n*=2),n*t}function hn(e,t){if(e.j.info("Error code "+t),2==t){var n=c(e.fb,e),i=e.Xa;const t=!i;i=new st(i||"//www.google.com/images/cleardot.gif"),r.location&&"http"==r.location.protocol||at(i,"https"),ut(i),t?function(e,t){const n=new Ae;if(r.Image){const i=new Image;i.onload=h(Et,n,"TestLoadImage: loaded",!0,t,i),i.onerror=h(Et,n,"TestLoadImage: error",!1,t,i),i.onabort=h(Et,n,"TestLoadImage: abort",!1,t,i),i.ontimeout=h(Et,n,"TestLoadImage: timeout",!1,t,i),r.setTimeout((function(){i.ontimeout&&i.ontimeout()}),1e4),i.src=e}else t(!1)}(i.toString(),n):function(e,t){new Ae;const n=new AbortController,i=setTimeout((()=>{n.abort(),Et(0,0,!1,t)}),1e4);fetch(e,{signal:n.signal}).then((e=>{clearTimeout(i),e.ok?Et(0,0,!0,t):Et(0,0,!1,t)})).catch((()=>{clearTimeout(i),Et(0,0,!1,t)}))}(i.toString(),n)}else Ce(2);e.G=0,e.l&&e.l.sa(t),un(e),Yt(e)}function un(e){if(e.G=0,e.ka=[],e.l){const t=nt(e.h);0==t.length&&0==e.i.length||(f(e.ka,t),f(e.ka,e.i),e.h.i.length=0,d(e.i),e.i.length=0),e.l.ra()}}function dn(e,t,n){var i=n instanceof st?ot(n):new st(n);if(""!=i.g)t&&(i.g=t+"."+i.g),lt(i,i.s);else{var s=r.location;i=s.protocol,t=t?t+"."+s.hostname:s.hostname,s=+s.port;var o=new st(null);i&&at(o,i),t&&(o.g=t),s&&lt(o,s),n&&(o.l=n),i=o}return n=e.D,t=e.ya,n&&t&&ht(i,n,t),ht(i,"VER",e.la),en(e,i),i}function fn(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Ca&&!e.pa?new Qt(new Pt({eb:n})):new Qt(e.pa)).Ha(e.J),t}function pn(){}function gn(){}function mn(e,t){ne.call(this),this.g=new Xt(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.o=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.va&&(e?e["X-WebChannel-Client-Profile"]=t.va:e={"X-WebChannel-Client-Profile":t.va}),this.g.S=e,(e=t&&t.Sb)&&!p(e)&&(this.g.m=e),this.v=t&&t.supportsCrossDomainXhr||!1,this.u=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!p(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new wn(this)}function vn(e){ye.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function yn(){we.call(this),this.status=1}function wn(e){this.g=e}(e=Qt.prototype).Ha=function(e){this.J=e},e.ea=function(e,t,n,i){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+e);t=t?t.toUpperCase():"GET",this.D=e,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ne.g(),this.v=this.o?ge(this.o):ge(Ne),this.g.onreadystatechange=c(this.Ea,this);try{this.B=!0,this.g.open(t,String(e),!0),this.B=!1}catch(o){return void Ut(this,o)}if(e=n||"",n=new Map(this.headers),i)if(Object.getPrototypeOf(i)===Object.prototype)for(var s in i)n.set(s,i[s]);else{if("function"!==typeof i.keys||"function"!==typeof i.get)throw Error("Unknown input type for opt_headers: "+String(i));for(const e of i.keys())n.set(e,i.get(e))}i=Array.from(n.keys()).find((e=>"content-type"==e.toLowerCase())),s=r.FormData&&e instanceof r.FormData,!(0<=Array.prototype.indexOf.call(jt,t,void 0))||i||s||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[r,a]of n)this.g.setRequestHeader(r,a);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Bt(this),this.u=!0,this.g.send(e),this.u=!1}catch(o){Ut(this,o)}},e.abort=function(e){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=e||7,ie(this,"complete"),ie(this,"abort"),qt(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),qt(this,!0)),Qt.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?Ft(this):this.bb())},e.bb=function(){Ft(this)},e.isActive=function(){return!!this.g},e.Z=function(){try{return 2<Wt(this)?this.g.status:-1}catch(gt){return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch(gt){return""}},e.Oa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),de(t)}},e.Ba=function(){return this.m},e.Ka=function(){return"string"===typeof this.l?this.l:String(this.l)},(e=Xt.prototype).la=8,e.G=1,e.connect=function(e,t,n,i){Ce(0),this.W=e,this.H=t||{},n&&void 0!==i&&(this.H.OSID=n,this.H.OAID=i),this.F=this.X,this.I=dn(this,null,this.W),Jt(this)},e.Ga=function(e){if(this.s)if(this.s=null,1==this.G){if(!e){this.U=Math.floor(1e5*Math.random()),e=this.U++;const r=new Me(this,this.j,e);let s=this.o;if(this.S&&(s?(s=w(s),O(s,this.S)):s=this.S),null!==this.m||this.O||(r.H=s,s=null),this.P)e:{for(var t=0,n=0;n<this.i.length;n++){var i=this.i[n];if(void 0===(i="__data__"in i.map&&"string"===typeof(i=i.map.__data__)?i.length:void 0))break;if(4096<(t+=i)){t=n;break e}if(4096===t||n===this.i.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=tn(this,r,t),ht(n=ot(this.I),"RID",e),ht(n,"CVER",22),this.D&&ht(n,"X-HTTP-Session-Id",this.D),en(this,n),s&&(this.O?t="headers="+encodeURIComponent(String(Mt(s)))+"&"+t:this.m&&Lt(n,this.m,s)),et(this.h,r),this.Ua&&ht(n,"TYPE","init"),this.P?(ht(n,"$req",t),ht(n,"SID","null"),r.T=!0,je(r,n,null)):je(r,n,t),this.G=2}}else 3==this.G&&(e?Zt(this,e):0==this.i.length||Ye(this.h)||Zt(this))},e.Fa=function(){if(this.u=null,on(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var e=2*this.R;this.j.info("BP detection timer enabled: "+e),this.A=_e(c(this.ab,this),e)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ce(10),Kt(this),on(this))},e.Za=function(){null!=this.C&&(this.C=null,Kt(this),rn(this),Ce(19))},e.fb=function(e){e?(this.j.info("Successfully pinged google.com"),Ce(2)):(this.j.info("Failed to ping google.com"),Ce(1))},e.isActive=function(){return!!this.l&&this.l.isActive(this)},(e=pn.prototype).ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){},gn.prototype.g=function(e,t){return new mn(e,t)},u(mn,ne),mn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},mn.prototype.close=function(){Gt(this.g)},mn.prototype.o=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.u&&((n={}).__data__=ue(e),e=n);t.i.push(new Ge(t.Ya++,e)),3==t.G&&Jt(t)},mn.prototype.N=function(){this.g.l=null,delete this.j,Gt(this.g),delete this.g,mn.aa.N.call(this)},u(vn,ye),u(yn,we),u(wn,pn),wn.prototype.ua=function(){ie(this.g,"a")},wn.prototype.ta=function(e){ie(this.g,new vn(e))},wn.prototype.sa=function(e){ie(this.g,new yn)},wn.prototype.ra=function(){ie(this.g,"b")},gn.prototype.createWebChannel=gn.prototype.g,mn.prototype.send=mn.prototype.o,mn.prototype.open=mn.prototype.m,mn.prototype.close=mn.prototype.close,io=so.createWebChannelTransport=function(){return new gn},no=so.getStatEventTarget=function(){return ke()},to=so.Event=be,eo=so.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ie.NO_ERROR=0,Ie.TIMEOUT=8,Ie.HTTP_ERROR=6,Zs=so.ErrorCode=Ie,Re.COMPLETE="complete",Js=so.EventType=Re,me.EventType=ve,ve.OPEN="a",ve.CLOSE="b",ve.ERROR="c",ve.MESSAGE="d",ne.prototype.listen=ne.prototype.K,Ys=so.WebChannel=me,Ks=so.FetchXmlHttpFactory=Pt,Qt.prototype.listenOnce=Qt.prototype.L,Qt.prototype.getLastError=Qt.prototype.Ka,Qt.prototype.getLastErrorCode=Qt.prototype.Ba,Qt.prototype.getStatus=Qt.prototype.Z,Qt.prototype.getResponseJson=Qt.prototype.Oa,Qt.prototype.getResponseText=Qt.prototype.oa,Qt.prototype.send=Qt.prototype.ea,Qt.prototype.setWithCredentials=Qt.prototype.Ha,Gs=so.XhrIo=Qt}).apply("undefined"!==typeof ro?ro:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});const oo="@firebase/firestore";class ao{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ao.UNAUTHENTICATED=new ao(null),ao.GOOGLE_CREDENTIALS=new ao("google-credentials-uid"),ao.FIRST_PARTY=new ao("first-party-uid"),ao.MOCK_USER=new ao("mock-user");let lo="10.12.3";const co=new ot("@firebase/firestore");function ho(){return co.logLevel}function uo(e){if(co.logLevel<=tt.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];const r=n.map(go);co.debug("Firestore (".concat(lo,"): ").concat(e),...r)}}function fo(e){if(co.logLevel<=tt.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];const r=n.map(go);co.error("Firestore (".concat(lo,"): ").concat(e),...r)}}function po(e){if(co.logLevel<=tt.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];const r=n.map(go);co.warn("Firestore (".concat(lo,"): ").concat(e),...r)}}function go(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(Kk){return e}}function mo(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state";const t="FIRESTORE (".concat(lo,") INTERNAL ASSERTION FAILED: ")+e;throw fo(t),new Error(t)}function vo(e,t){e||mo()}function yo(e,t){return e}const wo={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class bo extends je{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>"".concat(this.name,": [code=").concat(this.code,"]: ").concat(this.message)}}class Oo{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class ko{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(e))}}class So{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(ao.UNAUTHENTICATED)))}shutdown(){}}class xo{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class To{constructor(e){this.t=e,this.currentUser=ao.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){let n=this.i;const i=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let r=new Oo;this.o=()=>{this.i++,this.currentUser=this.u(),r.resolve(),r=new Oo,e.enqueueRetryable((()=>i(this.currentUser)))};const s=()=>{const t=r;e.enqueueRetryable((async()=>{await t.promise,await i(this.currentUser)}))},o=e=>{uo("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.auth.addAuthTokenListener(this.o),s()};this.t.onInit((e=>o(e))),setTimeout((()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?o(e):(uo("FirebaseAuthCredentialsProvider","Auth not yet detected"),r.resolve(),r=new Oo)}}),0),s()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((t=>this.i!==e?(uo("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(vo("string"==typeof t.accessToken),new ko(t.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return vo(null===e||"string"==typeof e),new ao(e)}}class Co{constructor(e,t,n){this.l=e,this.h=t,this.P=n,this.type="FirstParty",this.user=ao.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class Eo{constructor(e,t,n){this.l=e,this.h=t,this.P=n}getToken(){return Promise.resolve(new Co(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable((()=>t(ao.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class _o{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Ao{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){const n=e=>{null!=e.error&&uo("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));const n=e.token!==this.R;return this.R=e.token,uo("FirebaseAppCheckTokenProvider","Received ".concat(n?"new":"existing"," token.")),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable((()=>n(t)))};const i=e=>{uo("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.appCheck.addTokenListener(this.o)};this.A.onInit((e=>i(e))),setTimeout((()=>{if(!this.appCheck){const e=this.A.getImmediate({optional:!0});e?i(e):uo("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((e=>e?(vo("string"==typeof e.token),this.R=e.token,new _o(e.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function Po(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let i=0;i<e;i++)n[i]=Math.floor(256*Math.random());return n}class No{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(256/62);let n="";for(;n.length<20;){const i=Po(40);for(let r=0;r<i.length;++r)n.length<20&&i[r]<t&&(n+=e.charAt(i[r]%62))}return n}}function Io(e,t){return e<t?-1:e>t?1:0}function Ro(e,t,n){return e.length===t.length&&e.every(((e,i)=>n(e,t[i])))}class Do{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new bo(wo.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new bo(wo.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new bo(wo.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new bo(wo.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Do.fromMillis(Date.now())}static fromDate(e){return Do.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*t));return new Do(t,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Io(this.nanoseconds,e.nanoseconds):Io(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Mo{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Mo(e)}static min(){return new Mo(new Do(0,0))}static max(){return new Mo(new Do(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Lo{constructor(e,t,n){void 0===t?t=0:t>e.length&&mo(),void 0===n?n=e.length-t:n>e.length-t&&mo(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===Lo.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Lo?e.forEach((e=>{t.push(e)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let i=0;i<n;i++){const n=e.get(i),r=t.get(i);if(n<r)return-1;if(n>r)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Qo extends Lo{construct(e,t,n){return new Qo(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];for(const r of n){if(r.indexOf("//")>=0)throw new bo(wo.INVALID_ARGUMENT,"Invalid segment (".concat(r,"). Paths must not contain // in them."));e.push(...r.split("/").filter((e=>e.length>0)))}return new Qo(e)}static emptyPath(){return new Qo([])}}const zo=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class jo extends Lo{construct(e,t,n){return new jo(e,t,n)}static isValidIdentifier(e){return zo.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),jo.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new jo(["__name__"])}static fromServerFormat(e){const t=[];let n="",i=0;const r=()=>{if(0===n.length)throw new bo(wo.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(n),n=""};let s=!1;for(;i<e.length;){const t=e[i];if("\\"===t){if(i+1===e.length)throw new bo(wo.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[i+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new bo(wo.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,i+=2}else"`"===t?(s=!s,i++):"."!==t||s?(n+=t,i++):(r(),i++)}if(r(),s)throw new bo(wo.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new jo(t)}static emptyPath(){return new jo([])}}class Uo{constructor(e){this.path=e}static fromPath(e){return new Uo(Qo.fromString(e))}static fromName(e){return new Uo(Qo.fromString(e).popFirst(5))}static empty(){return new Uo(Qo.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Qo.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Qo.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Uo(new Qo(e.slice()))}}class Vo{constructor(e,t,n,i){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=i}}Vo.UNKNOWN_ID=-1;function Fo(e,t){const n=e.toTimestamp().seconds,i=e.toTimestamp().nanoseconds+1,r=Mo.fromTimestamp(1e9===i?new Do(n+1,0):new Do(n,i));return new Bo(r,Uo.empty(),t)}function qo(e){return new Bo(e.readTime,e.key,-1)}class Bo{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new Bo(Mo.min(),Uo.empty(),-1)}static max(){return new Bo(Mo.max(),Uo.empty(),-1)}}function Wo(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=Uo.comparator(e.documentKey,t.documentKey),0!==n?n:Io(e.largestBatchId,t.largestBatchId))}const Ho="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class $o{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function Xo(e){if(e.code!==wo.FAILED_PRECONDITION||e.message!==Ho)throw e;uo("LocalStore","Unexpectedly lost primary lease")}class Go{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)}),(e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&mo(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Go(((n,i)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,i)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,i)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof Go?t:Go.resolve(t)}catch(e){return Go.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):Go.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):Go.reject(t)}static resolve(e){return new Go(((t,n)=>{t(e)}))}static reject(e){return new Go(((t,n)=>{n(e)}))}static waitFor(e){return new Go(((t,n)=>{let i=0,r=0,s=!1;e.forEach((e=>{++i,e.next((()=>{++r,s&&r===i&&t()}),(e=>n(e)))})),s=!0,r===i&&t()}))}static or(e){let t=Go.resolve(!1);for(const n of e)t=t.next((e=>e?Go.resolve(e):n()));return t}static forEach(e,t){const n=[];return e.forEach(((e,i)=>{n.push(t.call(this,e,i))})),this.waitFor(n)}static mapArray(e,t){return new Go(((n,i)=>{const r=e.length,s=new Array(r);let o=0;for(let a=0;a<r;a++){const l=a;t(e[l]).next((e=>{s[l]=e,++o,o===r&&n(s)}),(e=>i(e)))}}))}static doWhile(e,t){return new Go(((n,i)=>{const r=()=>{!0===e()?t().next((()=>{r()}),i):n()};r()}))}}function Ko(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Yo(e){return"IndexedDbTransactionError"===e.name}class Jo{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ie(e),this.se=e=>t.writeSequenceNumber(e))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}function Zo(e){return null==e}function ea(e){return 0===e&&1/e==-1/0}function ta(e){return"number"==typeof e&&Number.isInteger(e)&&!ea(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}Jo.oe=-1;const na=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],ia=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],ra=ia;function sa(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function oa(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function aa(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class la{constructor(e,t){this.comparator=e,this.root=t||ha.EMPTY}insert(e,t){return new la(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ha.BLACK,null,null))}remove(e){return new la(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ha.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(0===i)return t+n.left.size;i<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,n)=>(e(t,n),!1)))}toString(){const e=[];return this.inorderTraversal(((t,n)=>(e.push("".concat(t,":").concat(n)),!1))),"{".concat(e.join(", "),"}")}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ca(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ca(this.root,e,this.comparator,!1)}getReverseIterator(){return new ca(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ca(this.root,e,this.comparator,!0)}}class ca{constructor(e,t,n,i){this.isReverse=i,this.nodeStack=[];let r=1;for(;!e.isEmpty();)if(r=t?n(e.key,t):1,t&&i&&(r*=-1),r<0)e=this.isReverse?e.left:e.right;else{if(0===r){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ha{constructor(e,t,n,i,r){this.key=e,this.value=t,this.color=null!=n?n:ha.RED,this.left=null!=i?i:ha.EMPTY,this.right=null!=r?r:ha.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,i,r){return new ha(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=i?i:this.left,null!=r?r:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let i=this;const r=n(e,i.key);return i=r<0?i.copy(null,null,null,i.left.insert(e,t,n),null):0===r?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,n)),i.fixUp()}removeMin(){if(this.left.isEmpty())return ha.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return ha.EMPTY;n=i.right.min(),i=i.copy(n.key,n.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ha.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ha.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw mo();if(this.right.isRed())throw mo();const e=this.left.check();if(e!==this.right.check())throw mo();return e+(this.isRed()?0:1)}}ha.EMPTY=null,ha.RED=!0,ha.BLACK=!1,ha.EMPTY=new class{constructor(){this.size=0}get key(){throw mo()}get value(){throw mo()}get color(){throw mo()}get left(){throw mo()}get right(){throw mo()}copy(e,t,n,i,r){return this}insert(e,t,n){return new ha(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class ua{constructor(e){this.comparator=e,this.data=new la(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,n)=>(e(t),!1)))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const i=n.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new da(this.data.getIterator())}getIteratorFrom(e){return new da(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((e=>{t=t.add(e)})),t}isEqual(e){if(!(e instanceof ua))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,i=n.getNext().key;if(0!==this.comparator(e,i))return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new ua(this.comparator);return t.data=e,t}}class da{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class fa{constructor(e){this.fields=e,e.sort(jo.comparator)}static empty(){return new fa([])}unionWith(e){let t=new ua(jo.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new fa(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ro(this.fields,e.fields,((e,t)=>e.isEqual(t)))}}class pa extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class ga{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new pa("Invalid base64 string: "+e):e}}(e);return new ga(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new ga(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Io(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ga.EMPTY_BYTE_STRING=new ga("");const ma=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function va(e){if(vo(!!e),"string"==typeof e){let t=0;const n=ma.exec(e);if(vo(!!n),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:ya(e.seconds),nanos:ya(e.nanos)}}function ya(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function wa(e){return"string"==typeof e?ga.fromBase64String(e):ga.fromUint8Array(e)}function ba(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Oa(e){const t=e.mapValue.fields.__previous_value__;return ba(t)?Oa(t):t}function ka(e){const t=va(e.mapValue.fields.__local_write_time__.timestampValue);return new Do(t.seconds,t.nanos)}class Sa{constructor(e,t,n,i,r,s,o,a,l){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=i,this.ssl=r,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.longPollingOptions=a,this.useFetchStreams=l}}class xa{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new xa("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof xa&&e.projectId===this.projectId&&e.database===this.database}}const Ta={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Ca(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?ba(e)?4:Ua(e)?9007199254740991:10:mo()}function Ea(e,t){if(e===t)return!0;const n=Ca(e);if(n!==Ca(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return ka(e).isEqual(ka(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=va(e.timestampValue),i=va(t.timestampValue);return n.seconds===i.seconds&&n.nanos===i.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return wa(e.bytesValue).isEqual(wa(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return ya(e.geoPointValue.latitude)===ya(t.geoPointValue.latitude)&&ya(e.geoPointValue.longitude)===ya(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return ya(e.integerValue)===ya(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=ya(e.doubleValue),i=ya(t.doubleValue);return n===i?ea(n)===ea(i):isNaN(n)&&isNaN(i)}return!1}(e,t);case 9:return Ro(e.arrayValue.values||[],t.arrayValue.values||[],Ea);case 10:return function(e,t){const n=e.mapValue.fields||{},i=t.mapValue.fields||{};if(sa(n)!==sa(i))return!1;for(const r in n)if(n.hasOwnProperty(r)&&(void 0===i[r]||!Ea(n[r],i[r])))return!1;return!0}(e,t);default:return mo()}}function _a(e,t){return void 0!==(e.values||[]).find((e=>Ea(e,t)))}function Aa(e,t){if(e===t)return 0;const n=Ca(e),i=Ca(t);if(n!==i)return Io(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return Io(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=ya(e.integerValue||e.doubleValue),i=ya(t.integerValue||t.doubleValue);return n<i?-1:n>i?1:n===i?0:isNaN(n)?isNaN(i)?0:-1:1}(e,t);case 3:return Pa(e.timestampValue,t.timestampValue);case 4:return Pa(ka(e),ka(t));case 5:return Io(e.stringValue,t.stringValue);case 6:return function(e,t){const n=wa(e),i=wa(t);return n.compareTo(i)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),i=t.split("/");for(let r=0;r<n.length&&r<i.length;r++){const e=Io(n[r],i[r]);if(0!==e)return e}return Io(n.length,i.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=Io(ya(e.latitude),ya(t.latitude));return 0!==n?n:Io(ya(e.longitude),ya(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){const n=e.values||[],i=t.values||[];for(let r=0;r<n.length&&r<i.length;++r){const e=Aa(n[r],i[r]);if(e)return e}return Io(n.length,i.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===Ta.mapValue&&t===Ta.mapValue)return 0;if(e===Ta.mapValue)return 1;if(t===Ta.mapValue)return-1;const n=e.fields||{},i=Object.keys(n),r=t.fields||{},s=Object.keys(r);i.sort(),s.sort();for(let o=0;o<i.length&&o<s.length;++o){const e=Io(i[o],s[o]);if(0!==e)return e;const t=Aa(n[i[o]],r[s[o]]);if(0!==t)return t}return Io(i.length,s.length)}(e.mapValue,t.mapValue);default:throw mo()}}function Pa(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Io(e,t);const n=va(e),i=va(t),r=Io(n.seconds,i.seconds);return 0!==r?r:Io(n.nanos,i.nanos)}function Na(e){return Ia(e)}function Ia(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=va(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return wa(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return Uo.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return"geo(".concat(e.latitude,",").concat(e.longitude,")")}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const i of e.values||[])n?n=!1:t+=",",t+=Ia(i);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",i=!0;for(const r of t)i?i=!1:n+=",",n+="".concat(r,":").concat(Ia(e.fields[r]));return n+"}"}(e.mapValue):mo()}function Ra(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function Da(e){return!!e&&"integerValue"in e}function Ma(e){return!!e&&"arrayValue"in e}function La(e){return!!e&&"nullValue"in e}function Qa(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function za(e){return!!e&&"mapValue"in e}function ja(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return oa(e.mapValue.fields,((e,n)=>t.mapValue.fields[e]=ja(n))),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=ja(e.arrayValue.values[n]);return t}return Object.assign({},e)}function Ua(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}class Va{constructor(e){this.value=e}static empty(){return new Va({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!za(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=ja(t)}setAll(e){let t=jo.emptyPath(),n={},i=[];e.forEach(((e,r)=>{if(!t.isImmediateParentOf(r)){const e=this.getFieldsMap(t);this.applyChanges(e,n,i),n={},i=[],t=r.popLast()}e?n[r.lastSegment()]=ja(e):i.push(r.lastSegment())}));const r=this.getFieldsMap(t);this.applyChanges(r,n,i)}delete(e){const t=this.field(e.popLast());za(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ea(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let i=t.mapValue.fields[e.get(n)];za(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,n){oa(t,((t,n)=>e[t]=n));for(const i of n)delete e[i]}clone(){return new Va(ja(this.value))}}function Fa(e){const t=[];return oa(e.fields,((e,n)=>{const i=new jo([e]);if(za(n)){const e=Fa(n.mapValue).fields;if(0===e.length)t.push(i);else for(const n of e)t.push(i.child(n))}else t.push(i)})),new fa(t)}class qa{constructor(e,t,n,i,r,s,o){this.key=e,this.documentType=t,this.version=n,this.readTime=i,this.createTime=r,this.data=s,this.documentState=o}static newInvalidDocument(e){return new qa(e,0,Mo.min(),Mo.min(),Mo.min(),Va.empty(),0)}static newFoundDocument(e,t,n,i){return new qa(e,1,t,Mo.min(),n,i,0)}static newNoDocument(e,t){return new qa(e,2,t,Mo.min(),Mo.min(),Va.empty(),0)}static newUnknownDocument(e,t){return new qa(e,3,t,Mo.min(),Mo.min(),Va.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Mo.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Va.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Va.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Mo.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof qa&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new qa(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}class Ba{constructor(e,t){this.position=e,this.inclusive=t}}function Wa(e,t,n){let i=0;for(let r=0;r<e.position.length;r++){const s=t[r],o=e.position[r];if(i=s.field.isKeyField()?Uo.comparator(Uo.fromName(o.referenceValue),n.key):Aa(o,n.data.field(s.field)),"desc"===s.dir&&(i*=-1),0!==i)break}return i}function Ha(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Ea(e.position[n],t.position[n]))return!1;return!0}class $a{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function Xa(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class Ga{}class Ka extends Ga{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new rl(e,t,n):"array-contains"===t?new ll(e,n):"in"===t?new cl(e,n):"not-in"===t?new hl(e,n):"array-contains-any"===t?new ul(e,n):new Ka(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new sl(e,n):new ol(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Aa(t,this.value)):null!==t&&Ca(this.value)===Ca(t)&&this.matchesComparison(Aa(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return mo()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ya extends Ga{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new Ya(e,t)}matches(e){return Ja(this)?void 0===this.filters.find((t=>!t.matches(e))):void 0!==this.filters.find((t=>t.matches(e)))}getFlattenedFilters(){return null!==this.ae||(this.ae=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Ja(e){return"and"===e.op}function Za(e){return el(e)&&Ja(e)}function el(e){for(const t of e.filters)if(t instanceof Ya)return!1;return!0}function tl(e){if(e instanceof Ka)return e.field.canonicalString()+e.op.toString()+Na(e.value);if(Za(e))return e.filters.map((e=>tl(e))).join(",");{const t=e.filters.map((e=>tl(e))).join(",");return"".concat(e.op,"(").concat(t,")")}}function nl(e,t){return e instanceof Ka?function(e,t){return t instanceof Ka&&e.op===t.op&&e.field.isEqual(t.field)&&Ea(e.value,t.value)}(e,t):e instanceof Ya?function(e,t){return t instanceof Ya&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce(((e,n,i)=>e&&nl(n,t.filters[i])),!0)}(e,t):void mo()}function il(e){return e instanceof Ka?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(Na(e.value))}(e):e instanceof Ya?function(e){return e.op.toString()+" {"+e.getFilters().map(il).join(" ,")+"}"}(e):"Filter"}class rl extends Ka{constructor(e,t,n){super(e,t,n),this.key=Uo.fromName(n.referenceValue)}matches(e){const t=Uo.comparator(e.key,this.key);return this.matchesComparison(t)}}class sl extends Ka{constructor(e,t){super(e,"in",t),this.keys=al("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class ol extends Ka{constructor(e,t){super(e,"not-in",t),this.keys=al("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function al(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((e=>Uo.fromName(e.referenceValue)))}class ll extends Ka{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Ma(t)&&_a(t.arrayValue,this.value)}}class cl extends Ka{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&_a(this.value.arrayValue,t)}}class hl extends Ka{constructor(e,t){super(e,"not-in",t)}matches(e){if(_a(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!_a(this.value.arrayValue,t)}}class ul extends Ka{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Ma(t)||!t.arrayValue.values)&&t.arrayValue.values.some((e=>_a(this.value.arrayValue,e)))}}class dl{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=i,this.limit=r,this.startAt=s,this.endAt=o,this.ue=null}}function fl(e){return new dl(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function pl(e){const t=yo(e);if(null===t.ue){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map((e=>tl(e))).join(","),e+="|ob:",e+=t.orderBy.map((e=>function(e){return e.field.canonicalString()+e.dir}(e))).join(","),Zo(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((e=>Na(e))).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((e=>Na(e))).join(",")),t.ue=e}return t.ue}function gl(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!Xa(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!nl(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Ha(e.startAt,t.startAt)&&Ha(e.endAt,t.endAt)}function ml(e){return Uo.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}class vl{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=i,this.limit=r,this.limitType=s,this.startAt=o,this.endAt=a,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function yl(e,t,n,i,r,s,o,a){return new vl(e,t,n,i,r,s,o,a)}function wl(e){return new vl(e)}function bl(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function Ol(e){return null!==e.collectionGroup}function kl(e){const t=yo(e);if(null===t.ce){t.ce=[];const e=new Set;for(const r of t.explicitOrderBy)t.ce.push(r),e.add(r.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",i=function(e){let t=new ua(jo.comparator);return e.filters.forEach((e=>{e.getFlattenedFilters().forEach((e=>{e.isInequality()&&(t=t.add(e.field))}))})),t}(t);i.forEach((i=>{e.has(i.canonicalString())||i.isKeyField()||t.ce.push(new $a(i,n))})),e.has(jo.keyField().canonicalString())||t.ce.push(new $a(jo.keyField(),n))}return t.ce}function Sl(e){const t=yo(e);return t.le||(t.le=xl(t,kl(e))),t.le}function xl(e,t){if("F"===e.limitType)return fl(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map((e=>{const t="desc"===e.dir?"asc":"desc";return new $a(e.field,t)}));const n=e.endAt?new Ba(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new Ba(e.startAt.position,e.startAt.inclusive):null;return fl(e.path,e.collectionGroup,t,e.filters,e.limit,n,i)}}function Tl(e,t){const n=e.filters.concat([t]);return new vl(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function Cl(e,t,n){return new vl(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function El(e,t){return gl(Sl(e),Sl(t))&&e.limitType===t.limitType}function _l(e){return"".concat(pl(Sl(e)),"|lt:").concat(e.limitType)}function Al(e){return"Query(target=".concat(function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((e=>il(e))).join(", "),"]")),Zo(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((e=>function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e))).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((e=>Na(e))).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((e=>Na(e))).join(",")),"Target(".concat(t,")")}(Sl(e)),"; limitType=").concat(e.limitType,")")}function Pl(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):Uo.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of kl(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const i=Wa(e,t,n);return e.inclusive?i<=0:i<0}(e.startAt,kl(e),t))&&!(e.endAt&&!function(e,t,n){const i=Wa(e,t,n);return e.inclusive?i>=0:i>0}(e.endAt,kl(e),t))}(e,t)}function Nl(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Il(e){return(t,n)=>{let i=!1;for(const r of kl(e)){const e=Rl(r,t,n);if(0!==e)return e;i=i||r.field.isKeyField()}return 0}}function Rl(e,t,n){const i=e.field.isKeyField()?Uo.comparator(t.key,n.key):function(e,t,n){const i=t.data.field(e),r=n.data.field(e);return null!==i&&null!==r?Aa(i,r):mo()}(e.field,t,n);switch(e.dir){case"asc":return i;case"desc":return-1*i;default:return mo()}}class Dl{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[i,r]of n)if(this.equalsFn(i,e))return r}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),i=this.inner[n];if(void 0===i)return this.inner[n]=[[e,t]],void this.innerSize++;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return void(i[r]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let i=0;i<n.length;i++)if(this.equalsFn(n[i][0],e))return 1===n.length?delete this.inner[t]:n.splice(i,1),this.innerSize--,!0;return!1}forEach(e){oa(this.inner,((t,n)=>{for(const[i,r]of n)e(i,r)}))}isEmpty(){return aa(this.inner)}size(){return this.innerSize}}const Ml=new la(Uo.comparator);function Ll(){return Ml}const Ql=new la(Uo.comparator);function zl(){let e=Ql;for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];for(const r of n)e=e.insert(r.key,r);return e}function jl(e){let t=Ql;return e.forEach(((e,n)=>t=t.insert(e,n.overlayedDocument))),t}function Ul(){return Fl()}function Vl(){return Fl()}function Fl(){return new Dl((e=>e.toString()),((e,t)=>e.isEqual(t)))}const ql=new la(Uo.comparator),Bl=new ua(Uo.comparator);function Wl(){let e=Bl;for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];for(const r of n)e=e.add(r);return e}const Hl=new ua(Io);function $l(){return Hl}function Xl(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ea(t)?"-0":t}}function Gl(e){return{integerValue:""+e}}function Kl(e,t){return ta(t)?Gl(t):Xl(e,t)}class Yl{constructor(){this._=void 0}}function Jl(e,t,n){return e instanceof tc?function(e,t){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&ba(t)&&(t=Oa(t)),t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof nc?ic(e,t):e instanceof rc?sc(e,t):function(e,t){const n=ec(e,t),i=ac(n)+ac(e.Pe);return Da(n)&&Da(e.Pe)?Gl(i):Xl(e.serializer,i)}(e,t)}function Zl(e,t,n){return e instanceof nc?ic(e,t):e instanceof rc?sc(e,t):n}function ec(e,t){return e instanceof oc?function(e){return Da(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}class tc extends Yl{}class nc extends Yl{constructor(e){super(),this.elements=e}}function ic(e,t){const n=lc(t);for(const i of e.elements)n.some((e=>Ea(e,i)))||n.push(i);return{arrayValue:{values:n}}}class rc extends Yl{constructor(e){super(),this.elements=e}}function sc(e,t){let n=lc(t);for(const i of e.elements)n=n.filter((e=>!Ea(e,i)));return{arrayValue:{values:n}}}class oc extends Yl{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function ac(e){return ya(e.integerValue||e.doubleValue)}function lc(e){return Ma(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class cc{constructor(e,t){this.version=e,this.transformResults=t}}class hc{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new hc}static exists(e){return new hc(void 0,e)}static updateTime(e){return new hc(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function uc(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class dc{}function fc(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new Sc(e.key,hc.none()):new yc(e.key,e.data,hc.none());{const n=e.data,i=Va.empty();let r=new ua(jo.comparator);for(let e of t.fields)if(!r.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?i.delete(e):i.set(e,t),r=r.add(e)}return new wc(e.key,i,new fa(r.toArray()),hc.none())}}function pc(e,t,n){e instanceof yc?function(e,t,n){const i=e.value.clone(),r=Oc(e.fieldTransforms,t,n.transformResults);i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):e instanceof wc?function(e,t,n){if(!uc(e.precondition,t))return void t.convertToUnknownDocument(n.version);const i=Oc(e.fieldTransforms,t,n.transformResults),r=t.data;r.setAll(bc(e)),r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function gc(e,t,n,i){return e instanceof yc?function(e,t,n,i){if(!uc(e.precondition,t))return n;const r=e.value.clone(),s=kc(e.fieldTransforms,i,t);return r.setAll(s),t.convertToFoundDocument(t.version,r).setHasLocalMutations(),null}(e,t,n,i):e instanceof wc?function(e,t,n,i){if(!uc(e.precondition,t))return n;const r=kc(e.fieldTransforms,i,t),s=t.data;return s.setAll(bc(e)),s.setAll(r),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((e=>e.field)))}(e,t,n,i):function(e,t,n){return uc(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function mc(e,t){let n=null;for(const i of e.fieldTransforms){const e=t.data.field(i.field),r=ec(i.transform,e||null);null!=r&&(null===n&&(n=Va.empty()),n.set(i.field,r))}return n||null}function vc(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&Ro(e,t,((e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof nc&&t instanceof nc||e instanceof rc&&t instanceof rc?Ro(e.elements,t.elements,Ea):e instanceof oc&&t instanceof oc?Ea(e.Pe,t.Pe):e instanceof tc&&t instanceof tc}(e.transform,t.transform)}(e,t)))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class yc extends dc{constructor(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class wc extends dc{constructor(e,t,n,i){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=i,this.fieldTransforms=r,this.type=1}getFieldMask(){return this.fieldMask}}function bc(e){const t=new Map;return e.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const i=e.data.field(n);t.set(n,i)}})),t}function Oc(e,t,n){const i=new Map;vo(e.length===n.length);for(let r=0;r<n.length;r++){const s=e[r],o=s.transform,a=t.data.field(s.field);i.set(s.field,Zl(o,a,n[r]))}return i}function kc(e,t,n){const i=new Map;for(const r of e){const e=r.transform,s=n.data.field(r.field);i.set(r.field,Jl(e,s,t))}return i}class Sc extends dc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class xc extends dc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Tc{constructor(e,t,n,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=i}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const t=this.mutations[i];t.key.isEqual(e.key)&&pc(t,e,n[i])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=gc(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=gc(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=Vl();return this.mutations.forEach((i=>{const r=e.get(i.key),s=r.overlayedDocument;let o=this.applyToLocalView(s,r.mutatedFields);o=t.has(i.key)?null:o;const a=fc(s,o);null!==a&&n.set(i.key,a),s.isValidDocument()||s.convertToNoDocument(Mo.min())})),n}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Wl())}isEqual(e){return this.batchId===e.batchId&&Ro(this.mutations,e.mutations,((e,t)=>vc(e,t)))&&Ro(this.baseMutations,e.baseMutations,((e,t)=>vc(e,t)))}}class Cc{constructor(e,t,n,i){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=i}static from(e,t,n){vo(e.mutations.length===n.length);let i=ql;const r=e.mutations;for(let s=0;s<r.length;s++)i=i.insert(r[s].key,n[s].version);return new Cc(e,t,n,i)}}class Ec{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}class _c{constructor(e,t){this.count=e,this.unchangedNames=t}}var Ac,Pc;function Nc(e){switch(e){default:return mo();case wo.CANCELLED:case wo.UNKNOWN:case wo.DEADLINE_EXCEEDED:case wo.RESOURCE_EXHAUSTED:case wo.INTERNAL:case wo.UNAVAILABLE:case wo.UNAUTHENTICATED:return!1;case wo.INVALID_ARGUMENT:case wo.NOT_FOUND:case wo.ALREADY_EXISTS:case wo.PERMISSION_DENIED:case wo.FAILED_PRECONDITION:case wo.ABORTED:case wo.OUT_OF_RANGE:case wo.UNIMPLEMENTED:case wo.DATA_LOSS:return!0}}function Ic(e){if(void 0===e)return fo("GRPC error has no .code"),wo.UNKNOWN;switch(e){case Ac.OK:return wo.OK;case Ac.CANCELLED:return wo.CANCELLED;case Ac.UNKNOWN:return wo.UNKNOWN;case Ac.DEADLINE_EXCEEDED:return wo.DEADLINE_EXCEEDED;case Ac.RESOURCE_EXHAUSTED:return wo.RESOURCE_EXHAUSTED;case Ac.INTERNAL:return wo.INTERNAL;case Ac.UNAVAILABLE:return wo.UNAVAILABLE;case Ac.UNAUTHENTICATED:return wo.UNAUTHENTICATED;case Ac.INVALID_ARGUMENT:return wo.INVALID_ARGUMENT;case Ac.NOT_FOUND:return wo.NOT_FOUND;case Ac.ALREADY_EXISTS:return wo.ALREADY_EXISTS;case Ac.PERMISSION_DENIED:return wo.PERMISSION_DENIED;case Ac.FAILED_PRECONDITION:return wo.FAILED_PRECONDITION;case Ac.ABORTED:return wo.ABORTED;case Ac.OUT_OF_RANGE:return wo.OUT_OF_RANGE;case Ac.UNIMPLEMENTED:return wo.UNIMPLEMENTED;case Ac.DATA_LOSS:return wo.DATA_LOSS;default:return mo()}}(Pc=Ac||(Ac={}))[Pc.OK=0]="OK",Pc[Pc.CANCELLED=1]="CANCELLED",Pc[Pc.UNKNOWN=2]="UNKNOWN",Pc[Pc.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Pc[Pc.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Pc[Pc.NOT_FOUND=5]="NOT_FOUND",Pc[Pc.ALREADY_EXISTS=6]="ALREADY_EXISTS",Pc[Pc.PERMISSION_DENIED=7]="PERMISSION_DENIED",Pc[Pc.UNAUTHENTICATED=16]="UNAUTHENTICATED",Pc[Pc.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Pc[Pc.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Pc[Pc.ABORTED=10]="ABORTED",Pc[Pc.OUT_OF_RANGE=11]="OUT_OF_RANGE",Pc[Pc.UNIMPLEMENTED=12]="UNIMPLEMENTED",Pc[Pc.INTERNAL=13]="INTERNAL",Pc[Pc.UNAVAILABLE=14]="UNAVAILABLE",Pc[Pc.DATA_LOSS=15]="DATA_LOSS";let Rc=null;function Dc(){return new TextEncoder}const Mc=new Ws([4294967295,4294967295],0);function Lc(e){const t=Dc().encode(e),n=new Hs;return n.update(t),new Uint8Array(n.digest())}function Qc(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),i=t.getUint32(4,!0),r=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new Ws([n,i],0),new Ws([r,s],0)]}class zc{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new jc("Invalid padding: ".concat(t));if(n<0)throw new jc("Invalid hash count: ".concat(n));if(e.length>0&&0===this.hashCount)throw new jc("Invalid hash count: ".concat(n));if(0===e.length&&0!==t)throw new jc("Invalid padding when bitmap length is 0: ".concat(t));this.Ie=8*e.length-t,this.Te=Ws.fromNumber(this.Ie)}Ee(e,t,n){let i=e.add(t.multiply(Ws.fromNumber(n)));return 1===i.compare(Mc)&&(i=new Ws([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Ie)return!1;const t=Lc(e),[n,i]=Qc(t);for(let r=0;r<this.hashCount;r++){const e=this.Ee(n,i,r);if(!this.de(e))return!1}return!0}static create(e,t,n){const i=e%8==0?0:8-e%8,r=new Uint8Array(Math.ceil(e/8)),s=new zc(r,i,t);return n.forEach((e=>s.insert(e))),s}insert(e){if(0===this.Ie)return;const t=Lc(e),[n,i]=Qc(t);for(let r=0;r<this.hashCount;r++){const e=this.Ee(n,i,r);this.Ae(e)}}Ae(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class jc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Uc{constructor(e,t,n,i,r){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=i,this.resolvedLimboDocuments=r}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const i=new Map;return i.set(e,Vc.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new Uc(Mo.min(),i,new la(Io),Ll(),Wl())}}class Vc{constructor(e,t,n,i,r){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=i,this.removedDocuments=r}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new Vc(n,t,Wl(),Wl(),Wl())}}class Fc{constructor(e,t,n,i){this.Re=e,this.removedTargetIds=t,this.key=n,this.Ve=i}}class qc{constructor(e,t){this.targetId=e,this.me=t}}class Bc{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ga.EMPTY_BYTE_STRING,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=i}}class Wc{constructor(){this.fe=0,this.ge=Xc(),this.pe=ga.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return 0!==this.fe}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}Ce(){let e=Wl(),t=Wl(),n=Wl();return this.ge.forEach(((i,r)=>{switch(r){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:n=n.add(i);break;default:mo()}})),new Vc(this.pe,this.ye,e,t,n)}ve(){this.we=!1,this.ge=Xc()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,vo(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class Hc{constructor(e){this.Le=e,this.Be=new Map,this.ke=Ll(),this.qe=$c(),this.Qe=new la(Io)}Ke(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,(t=>{const n=this.Ge(t);switch(e.state){case 0:this.ze(t)&&n.De(e.resumeToken);break;case 1:n.Oe(),n.Se||n.ve(),n.De(e.resumeToken);break;case 2:n.Oe(),n.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(n.Ne(),n.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),n.De(e.resumeToken));break;default:mo()}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach(((e,n)=>{this.ze(n)&&t(n)}))}He(e){const t=e.targetId,n=e.me.count,i=this.Je(t);if(i){const r=i.target;if(ml(r))if(0===n){const e=new Uo(r.path);this.Ue(t,e,qa.newNoDocument(e,Mo.min()))}else vo(1===n);else{const i=this.Ye(t);if(i!==n){const n=this.Ze(e),r=n?this.Xe(n,e,i):1;if(0!==r){this.je(t);const e=2===r?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,e)}null==Rc||Rc.et(function(e,t,n,i,r){var s,o,a,l,c,h;const u={localCacheCount:e,existenceFilterCount:t.count,databaseId:n.database,projectId:n.projectId},d=t.unchangedNames;return d&&(u.bloomFilter={applied:0===r,hashCount:null!==(s=null==d?void 0:d.hashCount)&&void 0!==s?s:0,bitmapLength:null!==(l=null===(a=null===(o=null==d?void 0:d.bits)||void 0===o?void 0:o.bitmap)||void 0===a?void 0:a.length)&&void 0!==l?l:0,padding:null!==(h=null===(c=null==d?void 0:d.bits)||void 0===c?void 0:c.padding)&&void 0!==h?h:0,mightContain:e=>{var t;return null!==(t=null==i?void 0:i.mightContain(e))&&void 0!==t&&t}}),u}(i,e.me,this.Le.tt(),n,r))}}}}Ze(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:i=0},hashCount:r=0}=t;let s,o;try{s=wa(n).toUint8Array()}catch(e){if(e instanceof pa)return po("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{o=new zc(s,i,r)}catch(e){return po(e instanceof jc?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===o.Ie?null:o}Xe(e,t,n){return t.me.count===n-this.nt(e,t.targetId)?0:2}nt(e,t){const n=this.Le.getRemoteKeysForTarget(t);let i=0;return n.forEach((n=>{const r=this.Le.tt(),s="projects/".concat(r.projectId,"/databases/").concat(r.database,"/documents/").concat(n.path.canonicalString());e.mightContain(s)||(this.Ue(t,n,null),i++)})),i}rt(e){const t=new Map;this.Be.forEach(((n,i)=>{const r=this.Je(i);if(r){if(n.current&&ml(r.target)){const t=new Uo(r.target.path);null!==this.ke.get(t)||this.it(i,t)||this.Ue(i,t,qa.newNoDocument(t,e))}n.be&&(t.set(i,n.Ce()),n.ve())}}));let n=Wl();this.qe.forEach(((e,t)=>{let i=!0;t.forEachWhile((e=>{const t=this.Je(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(i=!1,!1)})),i&&(n=n.add(e))})),this.ke.forEach(((t,n)=>n.setReadTime(e)));const i=new Uc(e,t,this.Qe,this.ke,n);return this.ke=Ll(),this.qe=$c(),this.Qe=new la(Io),i}$e(e,t){if(!this.ze(e))return;const n=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,n),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,n){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,t)?i.Fe(t,1):i.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),n&&(this.ke=this.ke.insert(t,n))}removeTarget(e){this.Be.delete(e)}Ye(e){const t=this.Ge(e).Ce();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new Wc,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new ua(Io),this.qe=this.qe.insert(e,t)),t}ze(e){const t=null!==this.Je(e);return t||uo("WatchChangeAggregator","Detected inactive target",e),t}Je(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Wc),this.Le.getRemoteKeysForTarget(e).forEach((t=>{this.Ue(e,t,null)}))}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function $c(){return new la(Uo.comparator)}function Xc(){return new la(Uo.comparator)}const Gc={asc:"ASCENDING",desc:"DESCENDING"},Kc={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Yc={and:"AND",or:"OR"};class Jc{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Zc(e,t){return e.useProto3Json||Zo(t)?t:{value:t}}function eh(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function th(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function nh(e,t){return eh(e,t.toTimestamp())}function ih(e){return vo(!!e),Mo.fromTimestamp(function(e){const t=va(e);return new Do(t.seconds,t.nanos)}(e))}function rh(e,t){return sh(e,t).canonicalString()}function sh(e,t){const n=function(e){return new Qo(["projects",e.projectId,"databases",e.database])}(e).child("documents");return void 0===t?n:n.child(t)}function oh(e){const t=Qo.fromString(e);return vo(Ch(t)),t}function ah(e,t){return rh(e.databaseId,t.path)}function lh(e,t){const n=oh(t);if(n.get(1)!==e.databaseId.projectId)throw new bo(wo.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new bo(wo.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Uo(dh(n))}function ch(e,t){return rh(e.databaseId,t)}function hh(e){const t=oh(e);return 4===t.length?Qo.emptyPath():dh(t)}function uh(e){return new Qo(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function dh(e){return vo(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function fh(e,t,n){return{name:ah(e,t),fields:n.value.mapValue.fields}}function ph(e,t){let n;if(t instanceof yc)n={update:fh(e,t.key,t.value)};else if(t instanceof Sc)n={delete:ah(e,t.key)};else if(t instanceof wc)n={update:fh(e,t.key,t.data),updateMask:Th(t.fieldMask)};else{if(!(t instanceof xc))return mo();n={verify:ah(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((e=>function(e,t){const n=t.transform;if(n instanceof tc)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof nc)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof rc)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof oc)return{fieldPath:t.field.canonicalString(),increment:n.Pe};throw mo()}(0,e)))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:nh(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:mo()}(e,t.precondition)),n}function gh(e,t){return{documents:[ch(e,t.path)]}}function mh(e,t){const n={structuredQuery:{}},i=t.path;let r;null!==t.collectionGroup?(r=i,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(r=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=ch(e,r);const s=function(e){if(0!==e.length)return xh(Ya.create(e,"and"))}(t.filters);s&&(n.structuredQuery.where=s);const o=function(e){if(0!==e.length)return e.map((e=>function(e){return{field:kh(e.field),direction:wh(e.dir)}}(e)))}(t.orderBy);o&&(n.structuredQuery.orderBy=o);const a=Zc(e,t.limit);return null!==a&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{_t:n,parent:r}}function vh(e){let t=hh(e.parent);const n=e.structuredQuery,i=n.from?n.from.length:0;let r=null;if(i>0){vo(1===i);const e=n.from[0];e.allDescendants?r=e.collectionId:t=t.child(e.collectionId)}let s=[];n.where&&(s=function(e){const t=yh(e);return t instanceof Ya&&Za(t)?t.getFilters():[t]}(n.where));let o=[];n.orderBy&&(o=function(e){return e.map((e=>function(e){return new $a(Sh(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)))}(n.orderBy));let a=null;n.limit&&(a=function(e){let t;return t="object"==typeof e?e.value:e,Zo(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new Ba(n,t)}(n.startAt));let c=null;return n.endAt&&(c=function(e){const t=!e.before,n=e.values||[];return new Ba(n,t)}(n.endAt)),yl(t,r,o,s,a,"F",l,c)}function yh(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Sh(e.unaryFilter.field);return Ka.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=Sh(e.unaryFilter.field);return Ka.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Sh(e.unaryFilter.field);return Ka.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const r=Sh(e.unaryFilter.field);return Ka.create(r,"!=",{nullValue:"NULL_VALUE"});default:return mo()}}(e):void 0!==e.fieldFilter?function(e){return Ka.create(Sh(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return mo()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return Ya.create(e.compositeFilter.filters.map((e=>yh(e))),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return mo()}}(e.compositeFilter.op))}(e):mo()}function wh(e){return Gc[e]}function bh(e){return Kc[e]}function Oh(e){return Yc[e]}function kh(e){return{fieldPath:e.canonicalString()}}function Sh(e){return jo.fromServerFormat(e.fieldPath)}function xh(e){return e instanceof Ka?function(e){if("=="===e.op){if(Qa(e.value))return{unaryFilter:{field:kh(e.field),op:"IS_NAN"}};if(La(e.value))return{unaryFilter:{field:kh(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Qa(e.value))return{unaryFilter:{field:kh(e.field),op:"IS_NOT_NAN"}};if(La(e.value))return{unaryFilter:{field:kh(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:kh(e.field),op:bh(e.op),value:e.value}}}(e):e instanceof Ya?function(e){const t=e.getFilters().map((e=>xh(e)));return 1===t.length?t[0]:{compositeFilter:{op:Oh(e.op),filters:t}}}(e):mo()}function Th(e){const t=[];return e.fields.forEach((e=>t.push(e.canonicalString()))),{fieldPaths:t}}function Ch(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class Eh{constructor(e,t,n,i){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Mo.min(),s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Mo.min(),o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:ga.EMPTY_BYTE_STRING,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=i,this.snapshotVersion=r,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=o,this.expectedCount=a}withSequenceNumber(e){return new Eh(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Eh(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Eh(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Eh(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class _h{constructor(e){this.ct=e}}function Ah(e){const t=vh({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?Cl(t,t.limit,"L"):t}class Ph{constructor(){}Pt(e,t){this.It(e,t),t.Tt()}It(e,t){if("nullValue"in e)this.Et(t,5);else if("booleanValue"in e)this.Et(t,10),t.dt(e.booleanValue?1:0);else if("integerValue"in e)this.Et(t,15),t.dt(ya(e.integerValue));else if("doubleValue"in e){const n=ya(e.doubleValue);isNaN(n)?this.Et(t,13):(this.Et(t,15),ea(n)?t.dt(0):t.dt(n))}else if("timestampValue"in e){let n=e.timestampValue;this.Et(t,20),"string"==typeof n&&(n=va(n)),t.At("".concat(n.seconds||"")),t.dt(n.nanos||0)}else if("stringValue"in e)this.Rt(e.stringValue,t),this.Vt(t);else if("bytesValue"in e)this.Et(t,30),t.ft(wa(e.bytesValue)),this.Vt(t);else if("referenceValue"in e)this.gt(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.Et(t,45),t.dt(n.latitude||0),t.dt(n.longitude||0)}else"mapValue"in e?Ua(e)?this.Et(t,Number.MAX_SAFE_INTEGER):(this.yt(e.mapValue,t),this.Vt(t)):"arrayValue"in e?(this.wt(e.arrayValue,t),this.Vt(t)):mo()}Rt(e,t){this.Et(t,25),this.St(e,t)}St(e,t){t.At(e)}yt(e,t){const n=e.fields||{};this.Et(t,55);for(const i of Object.keys(n))this.Rt(i,t),this.It(n[i],t)}wt(e,t){const n=e.values||[];this.Et(t,50);for(const i of n)this.It(i,t)}gt(e,t){this.Et(t,37),Uo.fromName(e).path.forEach((e=>{this.Et(t,60),this.St(e,t)}))}Et(e,t){e.dt(t)}Vt(e){e.dt(2)}}Ph.bt=new Ph;class Nh{constructor(){this._n=new Ih}addToCollectionParentIndex(e,t){return this._n.add(t),Go.resolve()}getCollectionParents(e,t){return Go.resolve(this._n.getEntries(t))}addFieldIndex(e,t){return Go.resolve()}deleteFieldIndex(e,t){return Go.resolve()}deleteAllFieldIndexes(e){return Go.resolve()}createTargetIndexes(e,t){return Go.resolve()}getDocumentsMatchingTarget(e,t){return Go.resolve(null)}getIndexType(e,t){return Go.resolve(0)}getFieldIndexes(e,t){return Go.resolve([])}getNextCollectionGroupToUpdate(e){return Go.resolve(null)}getMinOffset(e,t){return Go.resolve(Bo.min())}getMinOffsetFromCollectionGroup(e,t){return Go.resolve(Bo.min())}updateCollectionGroup(e,t,n){return Go.resolve()}updateIndexEntries(e,t){return Go.resolve()}}class Ih{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),i=this.index[t]||new ua(Qo.comparator),r=!i.has(n);return this.index[t]=i.add(n),r}has(e){const t=e.lastSegment(),n=e.popLast(),i=this.index[t];return i&&i.has(n)}getEntries(e){return(this.index[e]||new ua(Qo.comparator)).toArray()}}new Uint8Array(0);class Rh{constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new Rh(e,Rh.DEFAULT_COLLECTION_PERCENTILE,Rh.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}Rh.DEFAULT_COLLECTION_PERCENTILE=10,Rh.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Rh.DEFAULT=new Rh(41943040,Rh.DEFAULT_COLLECTION_PERCENTILE,Rh.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Rh.DISABLED=new Rh(-1,0,0);class Dh{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new Dh(0)}static Ln(){return new Dh(-1)}}class Mh{constructor(){this.changes=new Dl((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,qa.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?Go.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Lh{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class Qh{constructor(e,t,n,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=i}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next((i=>(n=i,this.remoteDocumentCache.getEntry(e,t)))).next((e=>(null!==n&&gc(n.mutation,e,fa.empty(),Do.now()),e)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.getLocalViewOfDocuments(e,t,Wl()).next((()=>t))))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Wl();const i=Ul();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,n).next((e=>{let t=zl();return e.forEach(((e,n)=>{t=t.insert(e,n.overlayedDocument)})),t}))))}getOverlayedDocuments(e,t){const n=Ul();return this.populateOverlays(e,n,t).next((()=>this.computeViews(e,t,n,Wl())))}populateOverlays(e,t,n){const i=[];return n.forEach((e=>{t.has(e)||i.push(e)})),this.documentOverlayCache.getOverlays(e,i).next((e=>{e.forEach(((e,n)=>{t.set(e,n)}))}))}computeViews(e,t,n,i){let r=Ll();const s=Fl(),o=Fl();return t.forEach(((e,t)=>{const o=n.get(t.key);i.has(t.key)&&(void 0===o||o.mutation instanceof wc)?r=r.insert(t.key,t):void 0!==o?(s.set(t.key,o.mutation.getFieldMask()),gc(o.mutation,t,o.mutation.getFieldMask(),Do.now())):s.set(t.key,fa.empty())})),this.recalculateAndSaveOverlays(e,r).next((e=>(e.forEach(((e,t)=>s.set(e,t))),t.forEach(((e,t)=>{var n;return o.set(e,new Lh(t,null!==(n=s.get(e))&&void 0!==n?n:null))})),o)))}recalculateAndSaveOverlays(e,t){const n=Fl();let i=new la(((e,t)=>e-t)),r=Wl();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((e=>{for(const r of e)r.keys().forEach((e=>{const s=t.get(e);if(null===s)return;let o=n.get(e)||fa.empty();o=r.applyToLocalView(s,o),n.set(e,o);const a=(i.get(r.batchId)||Wl()).add(e);i=i.insert(r.batchId,a)}))})).next((()=>{const s=[],o=i.getReverseIterator();for(;o.hasNext();){const i=o.getNext(),a=i.key,l=i.value,c=Vl();l.forEach((e=>{if(!r.has(e)){const i=fc(t.get(e),n.get(e));null!==i&&c.set(e,i),r=r.add(e)}})),s.push(this.documentOverlayCache.saveOverlays(e,a,c))}return Go.waitFor(s)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.recalculateAndSaveOverlays(e,t)))}getDocumentsMatchingQuery(e,t,n,i){return function(e){return Uo.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Ol(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,i):this.getDocumentsMatchingCollectionQuery(e,t,n,i)}getNextDocuments(e,t,n,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,i).next((r=>{const s=i-r.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,i-r.size):Go.resolve(Ul());let o=-1,a=r;return s.next((t=>Go.forEach(t,((t,n)=>(o<n.largestBatchId&&(o=n.largestBatchId),r.get(t)?Go.resolve():this.remoteDocumentCache.getEntry(e,t).next((e=>{a=a.insert(t,e)}))))).next((()=>this.populateOverlays(e,t,r))).next((()=>this.computeViews(e,a,t,Wl()))).next((e=>({batchId:o,changes:jl(e)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Uo(t)).next((e=>{let t=zl();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}getDocumentsMatchingCollectionGroupQuery(e,t,n,i){const r=t.collectionGroup;let s=zl();return this.indexManager.getCollectionParents(e,r).next((o=>Go.forEach(o,(o=>{const a=function(e,t){return new vl(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(r));return this.getDocumentsMatchingCollectionQuery(e,a,n,i).next((e=>{e.forEach(((e,t)=>{s=s.insert(e,t)}))}))})).next((()=>s))))}getDocumentsMatchingCollectionQuery(e,t,n,i){let r;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((s=>(r=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,r,i)))).next((e=>{r.forEach(((t,n)=>{const i=n.getKey();null===e.get(i)&&(e=e.insert(i,qa.newInvalidDocument(i)))}));let n=zl();return e.forEach(((e,i)=>{const s=r.get(e);void 0!==s&&gc(s.mutation,i,fa.empty(),Do.now()),Pl(t,i)&&(n=n.insert(e,i))})),n}))}}class zh{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,t){return Go.resolve(this.cr.get(t))}saveBundleMetadata(e,t){return this.cr.set(t.id,function(e){return{id:e.id,version:e.version,createTime:ih(e.createTime)}}(t)),Go.resolve()}getNamedQuery(e,t){return Go.resolve(this.lr.get(t))}saveNamedQuery(e,t){return this.lr.set(t.name,function(e){return{name:e.name,query:Ah(e.bundledQuery),readTime:ih(e.readTime)}}(t)),Go.resolve()}}class jh{constructor(){this.overlays=new la(Uo.comparator),this.hr=new Map}getOverlay(e,t){return Go.resolve(this.overlays.get(t))}getOverlays(e,t){const n=Ul();return Go.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){return n.forEach(((n,i)=>{this.ht(e,t,i)})),Go.resolve()}removeOverlaysForBatchId(e,t,n){const i=this.hr.get(n);return void 0!==i&&(i.forEach((e=>this.overlays=this.overlays.remove(e))),this.hr.delete(n)),Go.resolve()}getOverlaysForCollection(e,t,n){const i=Ul(),r=t.length+1,s=new Uo(t.child("")),o=this.overlays.getIteratorFrom(s);for(;o.hasNext();){const e=o.getNext().value,s=e.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===r&&e.largestBatchId>n&&i.set(e.getKey(),e)}return Go.resolve(i)}getOverlaysForCollectionGroup(e,t,n,i){let r=new la(((e,t)=>e-t));const s=this.overlays.getIterator();for(;s.hasNext();){const e=s.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=r.get(e.largestBatchId);null===t&&(t=Ul(),r=r.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const o=Ul(),a=r.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach(((e,t)=>o.set(e,t))),!(o.size()>=i)););return Go.resolve(o)}ht(e,t,n){const i=this.overlays.get(n.key);if(null!==i){const e=this.hr.get(i.largestBatchId).delete(n.key);this.hr.set(i.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new Ec(t,n));let r=this.hr.get(t);void 0===r&&(r=Wl(),this.hr.set(t,r)),this.hr.set(t,r.add(n.key))}}class Uh{constructor(){this.Pr=new ua(Vh.Ir),this.Tr=new ua(Vh.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,t){const n=new Vh(e,t);this.Pr=this.Pr.add(n),this.Tr=this.Tr.add(n)}dr(e,t){e.forEach((e=>this.addReference(e,t)))}removeReference(e,t){this.Ar(new Vh(e,t))}Rr(e,t){e.forEach((e=>this.removeReference(e,t)))}Vr(e){const t=new Uo(new Qo([])),n=new Vh(t,e),i=new Vh(t,e+1),r=[];return this.Tr.forEachInRange([n,i],(e=>{this.Ar(e),r.push(e.key)})),r}mr(){this.Pr.forEach((e=>this.Ar(e)))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){const t=new Uo(new Qo([])),n=new Vh(t,e),i=new Vh(t,e+1);let r=Wl();return this.Tr.forEachInRange([n,i],(e=>{r=r.add(e.key)})),r}containsKey(e){const t=new Vh(e,0),n=this.Pr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class Vh{constructor(e,t){this.key=e,this.pr=t}static Ir(e,t){return Uo.comparator(e.key,t.key)||Io(e.pr,t.pr)}static Er(e,t){return Io(e.pr,t.pr)||Uo.comparator(e.key,t.key)}}class Fh{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.yr=1,this.wr=new ua(Vh.Ir)}checkEmpty(e){return Go.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,i){const r=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new Tc(r,t,n,i);this.mutationQueue.push(s);for(const o of i)this.wr=this.wr.add(new Vh(o.key,r)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return Go.resolve(s)}lookupMutationBatch(e,t){return Go.resolve(this.Sr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,i=this.br(n),r=i<0?0:i;return Go.resolve(this.mutationQueue.length>r?this.mutationQueue[r]:null)}getHighestUnacknowledgedBatchId(){return Go.resolve(0===this.mutationQueue.length?-1:this.yr-1)}getAllMutationBatches(e){return Go.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new Vh(t,0),i=new Vh(t,Number.POSITIVE_INFINITY),r=[];return this.wr.forEachInRange([n,i],(e=>{const t=this.Sr(e.pr);r.push(t)})),Go.resolve(r)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new ua(Io);return t.forEach((e=>{const t=new Vh(e,0),i=new Vh(e,Number.POSITIVE_INFINITY);this.wr.forEachInRange([t,i],(e=>{n=n.add(e.pr)}))})),Go.resolve(this.Dr(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,i=n.length+1;let r=n;Uo.isDocumentKey(r)||(r=r.child(""));const s=new Vh(new Uo(r),0);let o=new ua(Io);return this.wr.forEachWhile((e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===i&&(o=o.add(e.pr)),!0)}),s),Go.resolve(this.Dr(o))}Dr(e){const t=[];return e.forEach((e=>{const n=this.Sr(e);null!==n&&t.push(n)})),t}removeMutationBatch(e,t){vo(0===this.Cr(t.batchId,"removed")),this.mutationQueue.shift();let n=this.wr;return Go.forEach(t.mutations,(i=>{const r=new Vh(i.key,t.batchId);return n=n.delete(r),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((()=>{this.wr=n}))}Mn(e){}containsKey(e,t){const n=new Vh(t,0),i=this.wr.firstAfterOrEqual(n);return Go.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,Go.resolve()}Cr(e,t){return this.br(e)}br(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Sr(e){const t=this.br(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class qh{constructor(e){this.vr=e,this.docs=new la(Uo.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,i=this.docs.get(n),r=i?i.size:0,s=this.vr(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:s}),this.size+=s-r,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return Go.resolve(n?n.document.mutableCopy():qa.newInvalidDocument(t))}getEntries(e,t){let n=Ll();return t.forEach((e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():qa.newInvalidDocument(e))})),Go.resolve(n)}getDocumentsMatchingQuery(e,t,n,i){let r=Ll();const s=t.path,o=new Uo(s.child("")),a=this.docs.getIteratorFrom(o);for(;a.hasNext();){const{key:e,value:{document:o}}=a.getNext();if(!s.isPrefixOf(e.path))break;e.path.length>s.length+1||Wo(qo(o),n)<=0||(i.has(o.key)||Pl(t,o))&&(r=r.insert(o.key,o.mutableCopy()))}return Go.resolve(r)}getAllFromCollectionGroup(e,t,n,i){mo()}Fr(e,t){return Go.forEach(this.docs,(e=>t(e)))}newChangeBuffer(e){return new Bh(this)}getSize(e){return Go.resolve(this.size)}}class Bh extends Mh{constructor(e){super(),this.ar=e}applyChanges(e){const t=[];return this.changes.forEach(((n,i)=>{i.isValidDocument()?t.push(this.ar.addEntry(e,i)):this.ar.removeEntry(n)})),Go.waitFor(t)}getFromCache(e,t){return this.ar.getEntry(e,t)}getAllFromCache(e,t){return this.ar.getEntries(e,t)}}class Wh{constructor(e){this.persistence=e,this.Mr=new Dl((e=>pl(e)),gl),this.lastRemoteSnapshotVersion=Mo.min(),this.highestTargetId=0,this.Or=0,this.Nr=new Uh,this.targetCount=0,this.Lr=Dh.Nn()}forEachTarget(e,t){return this.Mr.forEach(((e,n)=>t(n))),Go.resolve()}getLastRemoteSnapshotVersion(e){return Go.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Go.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Lr.next(),Go.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Or&&(this.Or=t),Go.resolve()}qn(e){this.Mr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Lr=new Dh(t),this.highestTargetId=t),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,t){return this.qn(t),this.targetCount+=1,Go.resolve()}updateTargetData(e,t){return this.qn(t),Go.resolve()}removeTargetData(e,t){return this.Mr.delete(t.target),this.Nr.Vr(t.targetId),this.targetCount-=1,Go.resolve()}removeTargets(e,t,n){let i=0;const r=[];return this.Mr.forEach(((s,o)=>{o.sequenceNumber<=t&&null===n.get(o.targetId)&&(this.Mr.delete(s),r.push(this.removeMatchingKeysForTargetId(e,o.targetId)),i++)})),Go.waitFor(r).next((()=>i))}getTargetCount(e){return Go.resolve(this.targetCount)}getTargetData(e,t){const n=this.Mr.get(t)||null;return Go.resolve(n)}addMatchingKeys(e,t,n){return this.Nr.dr(t,n),Go.resolve()}removeMatchingKeys(e,t,n){this.Nr.Rr(t,n);const i=this.persistence.referenceDelegate,r=[];return i&&t.forEach((t=>{r.push(i.markPotentiallyOrphaned(e,t))})),Go.waitFor(r)}removeMatchingKeysForTargetId(e,t){return this.Nr.Vr(t),Go.resolve()}getMatchingKeysForTargetId(e,t){const n=this.Nr.gr(t);return Go.resolve(n)}containsKey(e,t){return Go.resolve(this.Nr.containsKey(t))}}class Hh{constructor(e,t){this.Br={},this.overlays={},this.kr=new Jo(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new Wh(this),this.indexManager=new Nh,this.remoteDocumentCache=function(e){return new qh(e)}((e=>this.referenceDelegate.Kr(e))),this.serializer=new _h(t),this.$r=new zh(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new jh,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.Br[e.toKey()];return n||(n=new Fh(t,this.referenceDelegate),this.Br[e.toKey()]=n),n}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,t,n){uo("MemoryPersistence","Starting transaction:",e);const i=new $h(this.kr.next());return this.referenceDelegate.Ur(),n(i).next((e=>this.referenceDelegate.Wr(i).next((()=>e)))).toPromise().then((e=>(i.raiseOnCommittedEvent(),e)))}Gr(e,t){return Go.or(Object.values(this.Br).map((n=>()=>n.containsKey(e,t))))}}class $h extends $o{constructor(e){super(),this.currentSequenceNumber=e}}class Xh{constructor(e){this.persistence=e,this.zr=new Uh,this.jr=null}static Hr(e){return new Xh(e)}get Jr(){if(this.jr)return this.jr;throw mo()}addReference(e,t,n){return this.zr.addReference(n,t),this.Jr.delete(n.toString()),Go.resolve()}removeReference(e,t,n){return this.zr.removeReference(n,t),this.Jr.add(n.toString()),Go.resolve()}markPotentiallyOrphaned(e,t){return this.Jr.add(t.toString()),Go.resolve()}removeTarget(e,t){this.zr.Vr(t.targetId).forEach((e=>this.Jr.add(e.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next((e=>{e.forEach((e=>this.Jr.add(e.toString())))})).next((()=>n.removeTargetData(e,t)))}Ur(){this.jr=new Set}Wr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Go.forEach(this.Jr,(n=>{const i=Uo.fromPath(n);return this.Yr(e,i).next((e=>{e||t.removeEntry(i,Mo.min())}))})).next((()=>(this.jr=null,t.apply(e))))}updateLimboDocument(e,t){return this.Yr(e,t).next((e=>{e?this.Jr.delete(t.toString()):this.Jr.add(t.toString())}))}Kr(e){return 0}Yr(e,t){return Go.or([()=>Go.resolve(this.zr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gr(e,t)])}}class Gh{constructor(e,t,n,i){this.targetId=e,this.fromCache=t,this.qi=n,this.Qi=i}static Ki(e,t){let n=Wl(),i=Wl();for(const r of t.docChanges)switch(r.type){case 0:n=n.add(r.doc.key);break;case 1:i=i.add(r.doc.key)}return new Gh(e,t.fromCache,n,i)}}class Kh{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class Yh{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=Qe()?8:Ko(Le())>0?6:4}initialize(e,t){this.zi=e,this.indexManager=t,this.$i=!0}getDocumentsMatchingQuery(e,t,n,i){const r={result:null};return this.ji(e,t).next((e=>{r.result=e})).next((()=>{if(!r.result)return this.Hi(e,t,i,n).next((e=>{r.result=e}))})).next((()=>{if(r.result)return;const n=new Kh;return this.Ji(e,t,n).next((i=>{if(r.result=i,this.Ui)return this.Yi(e,t,n,i.size)}))})).next((()=>r.result))}Yi(e,t,n,i){return n.documentReadCount<this.Wi?(ho()<=tt.DEBUG&&uo("QueryEngine","SDK will not create cache indexes for query:",Al(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),Go.resolve()):(ho()<=tt.DEBUG&&uo("QueryEngine","Query:",Al(t),"scans",n.documentReadCount,"local documents and returns",i,"documents as results."),n.documentReadCount>this.Gi*i?(ho()<=tt.DEBUG&&uo("QueryEngine","The SDK decides to create cache indexes for query:",Al(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Sl(t))):Go.resolve())}ji(e,t){if(bl(t))return Go.resolve(null);let n=Sl(t);return this.indexManager.getIndexType(e,n).next((i=>0===i?null:(null!==t.limit&&1===i&&(t=Cl(t,null,"F"),n=Sl(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next((i=>{const r=Wl(...i);return this.zi.getDocuments(e,r).next((i=>this.indexManager.getMinOffset(e,n).next((n=>{const s=this.Zi(t,i);return this.Xi(t,s,r,n.readTime)?this.ji(e,Cl(t,null,"F")):this.es(e,s,t,n)}))))})))))}Hi(e,t,n,i){return bl(t)||i.isEqual(Mo.min())?Go.resolve(null):this.zi.getDocuments(e,n).next((r=>{const s=this.Zi(t,r);return this.Xi(t,s,n,i)?Go.resolve(null):(ho()<=tt.DEBUG&&uo("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Al(t)),this.es(e,s,t,Fo(i,-1)).next((e=>e)))}))}Zi(e,t){let n=new ua(Il(e));return t.forEach(((t,i)=>{Pl(e,i)&&(n=n.add(i))})),n}Xi(e,t,n,i){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const r="F"===e.limitType?t.last():t.first();return!!r&&(r.hasPendingWrites||r.version.compareTo(i)>0)}Ji(e,t,n){return ho()<=tt.DEBUG&&uo("QueryEngine","Using full collection scan to execute query:",Al(t)),this.zi.getDocumentsMatchingQuery(e,t,Bo.min(),n)}es(e,t,n,i){return this.zi.getDocumentsMatchingQuery(e,n,i).next((e=>(t.forEach((t=>{e=e.insert(t.key,t)})),e)))}}class Jh{constructor(e,t,n,i){this.persistence=e,this.ts=t,this.serializer=i,this.ns=new la(Io),this.rs=new Dl((e=>pl(e)),gl),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(n)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Qh(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.ns)))}}function Zh(e,t,n,i){return new Jh(e,t,n,i)}async function eu(e,t){const n=yo(e);return await n.persistence.runTransaction("Handle user change","readonly",(e=>{let i;return n.mutationQueue.getAllMutationBatches(e).next((r=>(i=r,n._s(t),n.mutationQueue.getAllMutationBatches(e)))).next((t=>{const r=[],s=[];let o=Wl();for(const e of i){r.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}for(const e of t){s.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}return n.localDocuments.getDocuments(e,o).next((e=>({us:e,removedBatchIds:r,addedBatchIds:s})))}))}))}function tu(e){const t=yo(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(e=>t.Qr.getLastRemoteSnapshotVersion(e)))}function nu(e,t,n){let i=Wl(),r=Wl();return n.forEach((e=>i=i.add(e))),t.getEntries(e,i).next((e=>{let i=Ll();return n.forEach(((n,s)=>{const o=e.get(n);s.isFoundDocument()!==o.isFoundDocument()&&(r=r.add(n)),s.isNoDocument()&&s.version.isEqual(Mo.min())?(t.removeEntry(n,s.readTime),i=i.insert(n,s)):!o.isValidDocument()||s.version.compareTo(o.version)>0||0===s.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(s),i=i.insert(n,s)):uo("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",s.version)})),{cs:i,ls:r}}))}function iu(e,t){const n=yo(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(e=>(void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t))))}function ru(e,t){const n=yo(e);return n.persistence.runTransaction("Allocate target","readwrite",(e=>{let i;return n.Qr.getTargetData(e,t).next((r=>r?(i=r,Go.resolve(i)):n.Qr.allocateTargetId(e).next((r=>(i=new Eh(t,r,"TargetPurposeListen",e.currentSequenceNumber),n.Qr.addTargetData(e,i).next((()=>i)))))))})).then((e=>{const i=n.ns.get(e.targetId);return(null===i||e.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.ns=n.ns.insert(e.targetId,e),n.rs.set(t,e.targetId)),e}))}async function su(e,t,n){const i=yo(e),r=i.ns.get(t),s=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",s,(e=>i.persistence.referenceDelegate.removeTarget(e,r)))}catch(e){if(!Yo(e))throw e;uo("LocalStore","Failed to update sequence numbers for target ".concat(t,": ").concat(e))}i.ns=i.ns.remove(t),i.rs.delete(r.target)}function ou(e,t,n){const i=yo(e);let r=Mo.min(),s=Wl();return i.persistence.runTransaction("Execute query","readwrite",(e=>function(e,t,n){const i=yo(e),r=i.rs.get(n);return void 0!==r?Go.resolve(i.ns.get(r)):i.Qr.getTargetData(t,n)}(i,e,Sl(t)).next((t=>{if(t)return r=t.lastLimboFreeSnapshotVersion,i.Qr.getMatchingKeysForTargetId(e,t.targetId).next((e=>{s=e}))})).next((()=>i.ts.getDocumentsMatchingQuery(e,t,n?r:Mo.min(),n?s:Wl()))).next((e=>(au(i,Nl(t),e),{documents:e,hs:s})))))}function au(e,t,n){let i=e.ss.get(t)||Mo.min();n.forEach(((e,t)=>{t.readTime.compareTo(i)>0&&(i=t.readTime)})),e.ss.set(t,i)}class lu{constructor(){this.activeTargetIds=$l()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class cu{constructor(){this.no=new lu,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,t,n){this.ro[e]=t}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new lu,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class hu{io(e){}shutdown(){}}class uu{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){uo("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.uo)e(0)}ao(){uo("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.uo)e(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let du=null;function fu(){return null===du?du=268435456+Math.round(2147483648*Math.random()):du++,"0x"+du.toString(16)}const pu={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class gu{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}Ao(e){this.Ro=e}onMessage(e){this.Vo=e}close(){this.ho()}send(e){this.lo(e)}mo(){this.Io()}fo(){this.Eo()}po(e){this.Ro(e)}yo(e){this.Vo(e)}}const mu="WebChannelConnection";class vu extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.wo=t+"://"+e.host,this.So="projects/".concat(n,"/databases/").concat(i),this.bo="(default)"===this.databaseId.database?"project_id=".concat(n):"project_id=".concat(n,"&database_id=").concat(i)}get Do(){return!1}Co(e,t,n,i,r){const s=fu(),o=this.vo(e,t.toUriEncodedString());uo("RestConnection","Sending RPC '".concat(e,"' ").concat(s,":"),o,n);const a={"google-cloud-resource-prefix":this.So,"x-goog-request-params":this.bo};return this.Fo(a,i,r),this.Mo(e,o,a,n).then((t=>(uo("RestConnection","Received RPC '".concat(e,"' ").concat(s,": "),t),t)),(t=>{throw po("RestConnection","RPC '".concat(e,"' ").concat(s," failed with error: "),t,"url: ",o,"request:",n),t}))}xo(e,t,n,i,r,s){return this.Co(e,t,n,i,r)}Fo(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+lo,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((t,n)=>e[n]=t)),n&&n.headers.forEach(((t,n)=>e[n]=t))}vo(e,t){const n=pu[e];return"".concat(this.wo,"/v1/").concat(t,":").concat(n)}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Mo(e,t,n,i){const r=fu();return new Promise(((s,o)=>{const a=new Gs;a.setWithCredentials(!0),a.listenOnce(Js.COMPLETE,(()=>{try{switch(a.getLastErrorCode()){case Zs.NO_ERROR:const t=a.getResponseJson();uo(mu,"XHR for RPC '".concat(e,"' ").concat(r," received:"),JSON.stringify(t)),s(t);break;case Zs.TIMEOUT:uo(mu,"RPC '".concat(e,"' ").concat(r," timed out")),o(new bo(wo.DEADLINE_EXCEEDED,"Request time out"));break;case Zs.HTTP_ERROR:const n=a.getStatus();if(uo(mu,"RPC '".concat(e,"' ").concat(r," failed with status:"),n,"response text:",a.getResponseText()),n>0){let e=a.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=null==e?void 0:e.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(wo).indexOf(t)>=0?t:wo.UNKNOWN}(t.status);o(new bo(e,t.message))}else o(new bo(wo.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new bo(wo.UNAVAILABLE,"Connection failed."));break;default:mo()}}finally{uo(mu,"RPC '".concat(e,"' ").concat(r," completed."))}}));const l=JSON.stringify(i);uo(mu,"RPC '".concat(e,"' ").concat(r," sending request:"),i),a.send(t,"POST",l,n,15)}))}Oo(e,t,n){const i=fu(),r=[this.wo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=io(),o=no(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(a.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(a.xmlHttpFactory=new Ks({})),this.Fo(a.initMessageHeaders,t,n),a.encodeInitMessageHeaders=!0;const c=r.join("");uo(mu,"Creating RPC '".concat(e,"' stream ").concat(i,": ").concat(c),a);const h=s.createWebChannel(c,a);let u=!1,d=!1;const f=new gu({lo:t=>{d?uo(mu,"Not sending because RPC '".concat(e,"' stream ").concat(i," is closed:"),t):(u||(uo(mu,"Opening RPC '".concat(e,"' stream ").concat(i," transport.")),h.open(),u=!0),uo(mu,"RPC '".concat(e,"' stream ").concat(i," sending:"),t),h.send(t))},ho:()=>h.close()}),p=(e,t,n)=>{e.listen(t,(e=>{try{n(e)}catch(e){setTimeout((()=>{throw e}),0)}}))};return p(h,Ys.EventType.OPEN,(()=>{d||(uo(mu,"RPC '".concat(e,"' stream ").concat(i," transport opened.")),f.mo())})),p(h,Ys.EventType.CLOSE,(()=>{d||(d=!0,uo(mu,"RPC '".concat(e,"' stream ").concat(i," transport closed")),f.po())})),p(h,Ys.EventType.ERROR,(t=>{d||(d=!0,po(mu,"RPC '".concat(e,"' stream ").concat(i," transport errored:"),t),f.po(new bo(wo.UNAVAILABLE,"The operation could not be completed")))})),p(h,Ys.EventType.MESSAGE,(t=>{var n;if(!d){const r=t.data[0];vo(!!r);const s=r,o=s.error||(null===(n=s[0])||void 0===n?void 0:n.error);if(o){uo(mu,"RPC '".concat(e,"' stream ").concat(i," received error:"),o);const t=o.status;let n=function(e){const t=Ac[e];if(void 0!==t)return Ic(t)}(t),r=o.message;void 0===n&&(n=wo.INTERNAL,r="Unknown error status: "+t+" with message "+o.message),d=!0,f.po(new bo(n,r)),h.close()}else uo(mu,"RPC '".concat(e,"' stream ").concat(i," received:"),r),f.yo(r)}})),p(o,to.STAT_EVENT,(t=>{t.stat===eo.PROXY?uo(mu,"RPC '".concat(e,"' stream ").concat(i," detected buffering proxy")):t.stat===eo.NOPROXY&&uo(mu,"RPC '".concat(e,"' stream ").concat(i," detected no buffering proxy"))})),setTimeout((()=>{f.fo()}),0),f}}function yu(){return"undefined"!=typeof document?document:null}function wu(e){return new Jc(e,!0)}class bu{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.oi=e,this.timerId=t,this.No=n,this.Lo=i,this.Bo=r,this.ko=0,this.qo=null,this.Qo=Date.now(),this.reset()}reset(){this.ko=0}Ko(){this.ko=this.Bo}$o(e){this.cancel();const t=Math.floor(this.ko+this.Uo()),n=Math.max(0,Date.now()-this.Qo),i=Math.max(0,t-n);i>0&&uo("ExponentialBackoff","Backing off for ".concat(i," ms (base delay: ").concat(this.ko," ms, delay with jitter: ").concat(t," ms, last attempt: ").concat(n," ms ago)")),this.qo=this.oi.enqueueAfterDelay(this.timerId,i,(()=>(this.Qo=Date.now(),e()))),this.ko*=this.Lo,this.ko<this.No&&(this.ko=this.No),this.ko>this.Bo&&(this.ko=this.Bo)}Wo(){null!==this.qo&&(this.qo.skipDelay(),this.qo=null)}cancel(){null!==this.qo&&(this.qo.cancel(),this.qo=null)}Uo(){return(Math.random()-.5)*this.ko}}class Ou{constructor(e,t,n,i,r,s,o,a){this.oi=e,this.Go=n,this.zo=i,this.connection=r,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=o,this.listener=a,this.state=0,this.jo=0,this.Ho=null,this.Jo=null,this.stream=null,this.Yo=new bu(e,t)}Zo(){return 1===this.state||5===this.state||this.Xo()}Xo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.e_()}async stop(){this.Zo()&&await this.close(0)}t_(){this.state=0,this.Yo.reset()}n_(){this.Xo()&&null===this.Ho&&(this.Ho=this.oi.enqueueAfterDelay(this.Go,6e4,(()=>this.r_())))}i_(e){this.s_(),this.stream.send(e)}async r_(){if(this.Xo())return this.close(0)}s_(){this.Ho&&(this.Ho.cancel(),this.Ho=null)}o_(){this.Jo&&(this.Jo.cancel(),this.Jo=null)}async close(e,t){this.s_(),this.o_(),this.Yo.cancel(),this.jo++,4!==e?this.Yo.reset():t&&t.code===wo.RESOURCE_EXHAUSTED?(fo(t.toString()),fo("Using maximum backoff delay to prevent overloading the backend."),this.Yo.Ko()):t&&t.code===wo.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.__(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Ao(t)}__(){}auth(){this.state=1;const e=this.a_(this.jo),t=this.jo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((e=>{let[n,i]=e;this.jo===t&&this.u_(n,i)}),(t=>{e((()=>{const e=new bo(wo.UNKNOWN,"Fetching auth token failed: "+t.message);return this.c_(e)}))}))}u_(e,t){const n=this.a_(this.jo);this.stream=this.l_(e,t),this.stream.Po((()=>{n((()=>this.listener.Po()))})),this.stream.To((()=>{n((()=>(this.state=2,this.Jo=this.oi.enqueueAfterDelay(this.zo,1e4,(()=>(this.Xo()&&(this.state=3),Promise.resolve()))),this.listener.To())))})),this.stream.Ao((e=>{n((()=>this.c_(e)))})),this.stream.onMessage((e=>{n((()=>this.onMessage(e)))}))}e_(){this.state=5,this.Yo.$o((async()=>{this.state=0,this.start()}))}c_(e){return uo("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}a_(e){return t=>{this.oi.enqueueAndForget((()=>this.jo===e?t():(uo("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class ku extends Ou{constructor(e,t,n,i,r,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,i,s),this.serializer=r}l_(e,t){return this.connection.Oo("Listen",e,t)}onMessage(e){this.Yo.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const i=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:mo()}(t.targetChange.targetChangeType||"NO_CHANGE"),r=t.targetChange.targetIds||[],s=function(e,t){return e.useProto3Json?(vo(void 0===t||"string"==typeof t),ga.fromBase64String(t||"")):(vo(void 0===t||t instanceof Buffer||t instanceof Uint8Array),ga.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(e){const t=void 0===e.code?wo.UNKNOWN:Ic(e.code);return new bo(t,e.message||"")}(o);n=new Bc(i,r,s,a||null)}else if("documentChange"in t){t.documentChange;const i=t.documentChange;i.document,i.document.name,i.document.updateTime;const r=lh(e,i.document.name),s=ih(i.document.updateTime),o=i.document.createTime?ih(i.document.createTime):Mo.min(),a=new Va({mapValue:{fields:i.document.fields}}),l=qa.newFoundDocument(r,s,o,a),c=i.targetIds||[],h=i.removedTargetIds||[];n=new Fc(c,h,l.key,l)}else if("documentDelete"in t){t.documentDelete;const i=t.documentDelete;i.document;const r=lh(e,i.document),s=i.readTime?ih(i.readTime):Mo.min(),o=qa.newNoDocument(r,s),a=i.removedTargetIds||[];n=new Fc([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const i=t.documentRemove;i.document;const r=lh(e,i.document),s=i.removedTargetIds||[];n=new Fc([],s,r,null)}else{if(!("filter"in t))return mo();{t.filter;const e=t.filter;e.targetId;const{count:i=0,unchangedNames:r}=e,s=new _c(i,r),o=e.targetId;n=new qc(o,s)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return Mo.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?Mo.min():t.readTime?ih(t.readTime):Mo.min()}(e);return this.listener.h_(t,n)}P_(e){const t={};t.database=uh(this.serializer),t.addTarget=function(e,t){let n;const i=t.target;if(n=ml(i)?{documents:gh(e,i)}:{query:mh(e,i)._t},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=th(e,t.resumeToken);const i=Zc(e,t.expectedCount);null!==i&&(n.expectedCount=i)}else if(t.snapshotVersion.compareTo(Mo.min())>0){n.readTime=eh(e,t.snapshotVersion.toTimestamp());const i=Zc(e,t.expectedCount);null!==i&&(n.expectedCount=i)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return mo()}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.i_(t)}I_(e){const t={};t.database=uh(this.serializer),t.removeTarget=e,this.i_(t)}}class Su extends Ou{constructor(e,t,n,i,r,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,i,s),this.serializer=r,this.T_=!1}get E_(){return this.T_}start(){this.T_=!1,this.lastStreamToken=void 0,super.start()}__(){this.T_&&this.d_([])}l_(e,t){return this.connection.Oo("Write",e,t)}onMessage(e){if(vo(!!e.streamToken),this.lastStreamToken=e.streamToken,this.T_){this.Yo.reset();const t=function(e,t){return e&&e.length>0?(vo(void 0!==t),e.map((e=>function(e,t){let n=e.updateTime?ih(e.updateTime):ih(t);return n.isEqual(Mo.min())&&(n=ih(t)),new cc(n,e.transformResults||[])}(e,t)))):[]}(e.writeResults,e.commitTime),n=ih(e.commitTime);return this.listener.A_(n,t)}return vo(!e.writeResults||0===e.writeResults.length),this.T_=!0,this.listener.R_()}V_(){const e={};e.database=uh(this.serializer),this.i_(e)}d_(e){const t={streamToken:this.lastStreamToken,writes:e.map((e=>ph(this.serializer,e)))};this.i_(t)}}class xu extends class{}{constructor(e,t,n,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=i,this.m_=!1}f_(){if(this.m_)throw new bo(wo.FAILED_PRECONDITION,"The client has already been terminated.")}Co(e,t,n,i){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((r=>{let[s,o]=r;return this.connection.Co(e,sh(t,n),i,s,o)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===wo.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new bo(wo.UNKNOWN,e.toString())}))}xo(e,t,n,i,r){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((s=>{let[o,a]=s;return this.connection.xo(e,sh(t,n),i,o,a,r)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===wo.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new bo(wo.UNKNOWN,e.toString())}))}terminate(){this.m_=!0,this.connection.terminate()}}class Tu{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.g_=0,this.p_=null,this.y_=!0}w_(){0===this.g_&&(this.S_("Unknown"),this.p_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.p_=null,this.b_("Backend didn't respond within 10 seconds."),this.S_("Offline"),Promise.resolve()))))}D_(e){"Online"===this.state?this.S_("Unknown"):(this.g_++,this.g_>=1&&(this.C_(),this.b_("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.S_("Offline")))}set(e){this.C_(),this.g_=0,"Online"===e&&(this.y_=!1),this.S_(e)}S_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}b_(e){const t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.y_?(fo(t),this.y_=!1):uo("OnlineStateTracker",t)}C_(){null!==this.p_&&(this.p_.cancel(),this.p_=null)}}class Cu{constructor(e,t,n,i,r){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.v_=[],this.F_=new Map,this.M_=new Set,this.x_=[],this.O_=r,this.O_.io((e=>{n.enqueueAndForget((async()=>{Mu(this)&&(uo("RemoteStore","Restarting streams for network reachability change."),await async function(e){const t=yo(e);t.M_.add(4),await _u(t),t.N_.set("Unknown"),t.M_.delete(4),await Eu(t)}(this))}))})),this.N_=new Tu(n,i)}}async function Eu(e){if(Mu(e))for(const t of e.x_)await t(!0)}async function _u(e){for(const t of e.x_)await t(!1)}function Au(e,t){const n=yo(e);n.F_.has(t.targetId)||(n.F_.set(t.targetId,t),Du(n)?Ru(n):ed(n).Xo()&&Nu(n,t))}function Pu(e,t){const n=yo(e),i=ed(n);n.F_.delete(t),i.Xo()&&Iu(n,t),0===n.F_.size&&(i.Xo()?i.n_():Mu(n)&&n.N_.set("Unknown"))}function Nu(e,t){if(e.L_.xe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Mo.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}ed(e).P_(t)}function Iu(e,t){e.L_.xe(t),ed(e).I_(t)}function Ru(e){e.L_=new Hc({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),ot:t=>e.F_.get(t)||null,tt:()=>e.datastore.serializer.databaseId}),ed(e).start(),e.N_.w_()}function Du(e){return Mu(e)&&!ed(e).Zo()&&e.F_.size>0}function Mu(e){return 0===yo(e).M_.size}function Lu(e){e.L_=void 0}async function Qu(e){e.N_.set("Online")}async function zu(e){e.F_.forEach(((t,n)=>{Nu(e,t)}))}async function ju(e,t){Lu(e),Du(e)?(e.N_.D_(t),Ru(e)):e.N_.set("Unknown")}async function Uu(e,t,n){if(e.N_.set("Online"),t instanceof Bc&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const i of t.targetIds)e.F_.has(i)&&(await e.remoteSyncer.rejectListen(i,n),e.F_.delete(i),e.L_.removeTarget(i))}(e,t)}catch(n){uo("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),n),await Vu(e,n)}else if(t instanceof Fc?e.L_.Ke(t):t instanceof qc?e.L_.He(t):e.L_.We(t),!n.isEqual(Mo.min()))try{const t=await tu(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.L_.rt(t);return n.targetChanges.forEach(((n,i)=>{if(n.resumeToken.approximateByteSize()>0){const r=e.F_.get(i);r&&e.F_.set(i,r.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach(((t,n)=>{const i=e.F_.get(t);if(!i)return;e.F_.set(t,i.withResumeToken(ga.EMPTY_BYTE_STRING,i.snapshotVersion)),Iu(e,t);const r=new Eh(i.target,t,n,i.sequenceNumber);Nu(e,r)})),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){uo("RemoteStore","Failed to raise snapshot:",t),await Vu(e,t)}}async function Vu(e,t,n){if(!Yo(t))throw t;e.M_.add(1),await _u(e),e.N_.set("Offline"),n||(n=()=>tu(e.localStore)),e.asyncQueue.enqueueRetryable((async()=>{uo("RemoteStore","Retrying IndexedDB access"),await n(),e.M_.delete(1),await Eu(e)}))}function Fu(e,t){return t().catch((n=>Vu(e,n,t)))}async function qu(e){const t=yo(e),n=td(t);let i=t.v_.length>0?t.v_[t.v_.length-1].batchId:-1;for(;Bu(t);)try{const e=await iu(t.localStore,i);if(null===e){0===t.v_.length&&n.n_();break}i=e.batchId,Wu(t,e)}catch(e){await Vu(t,e)}Hu(t)&&$u(t)}function Bu(e){return Mu(e)&&e.v_.length<10}function Wu(e,t){e.v_.push(t);const n=td(e);n.Xo()&&n.E_&&n.d_(t.mutations)}function Hu(e){return Mu(e)&&!td(e).Zo()&&e.v_.length>0}function $u(e){td(e).start()}async function Xu(e){td(e).V_()}async function Gu(e){const t=td(e);for(const n of e.v_)t.d_(n.mutations)}async function Ku(e,t,n){const i=e.v_.shift(),r=Cc.from(i,t,n);await Fu(e,(()=>e.remoteSyncer.applySuccessfulWrite(r))),await qu(e)}async function Yu(e,t){t&&td(e).E_&&await async function(e,t){if(function(e){return Nc(e)&&e!==wo.ABORTED}(t.code)){const n=e.v_.shift();td(e).t_(),await Fu(e,(()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t))),await qu(e)}}(e,t),Hu(e)&&$u(e)}async function Ju(e,t){const n=yo(e);n.asyncQueue.verifyOperationInProgress(),uo("RemoteStore","RemoteStore received new credentials");const i=Mu(n);n.M_.add(3),await _u(n),i&&n.N_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.M_.delete(3),await Eu(n)}async function Zu(e,t){const n=yo(e);t?(n.M_.delete(2),await Eu(n)):t||(n.M_.add(2),await _u(n),n.N_.set("Unknown"))}function ed(e){return e.B_||(e.B_=function(e,t,n){const i=yo(e);return i.f_(),new ku(t,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,n)}(e.datastore,e.asyncQueue,{Po:Qu.bind(null,e),To:zu.bind(null,e),Ao:ju.bind(null,e),h_:Uu.bind(null,e)}),e.x_.push((async t=>{t?(e.B_.t_(),Du(e)?Ru(e):e.N_.set("Unknown")):(await e.B_.stop(),Lu(e))}))),e.B_}function td(e){return e.k_||(e.k_=function(e,t,n){const i=yo(e);return i.f_(),new Su(t,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,n)}(e.datastore,e.asyncQueue,{Po:()=>Promise.resolve(),To:Xu.bind(null,e),Ao:Yu.bind(null,e),R_:Gu.bind(null,e),A_:Ku.bind(null,e)}),e.x_.push((async t=>{t?(e.k_.t_(),await qu(e)):(await e.k_.stop(),e.v_.length>0&&(uo("RemoteStore","Stopping write stream with ".concat(e.v_.length," pending writes")),e.v_=[]))}))),e.k_}class nd{constructor(e,t,n,i,r){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=i,this.removalCallback=r,this.deferred=new Oo,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((e=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,i,r){const s=Date.now()+n,o=new nd(e,t,s,i,r);return o.start(n),o}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new bo(wo.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function id(e,t){if(fo("AsyncQueue","".concat(t,": ").concat(e)),Yo(e))return new bo(wo.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}class rd{constructor(e){this.comparator=e?(t,n)=>e(t,n)||Uo.comparator(t.key,n.key):(e,t)=>Uo.comparator(e.key,t.key),this.keyedMap=zl(),this.sortedSet=new la(this.comparator)}static emptySet(e){return new rd(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,n)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof rd))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,i=n.getNext().key;if(!e.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new rd;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class sd{constructor(){this.q_=new la(Uo.comparator)}track(e){const t=e.doc.key,n=this.q_.get(t);n?0!==e.type&&3===n.type?this.q_=this.q_.insert(t,e):3===e.type&&1!==n.type?this.q_=this.q_.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.q_=this.q_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.q_=this.q_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.q_=this.q_.remove(t):1===e.type&&2===n.type?this.q_=this.q_.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.q_=this.q_.insert(t,{type:2,doc:e.doc}):mo():this.q_=this.q_.insert(t,e)}Q_(){const e=[];return this.q_.inorderTraversal(((t,n)=>{e.push(n)})),e}}class od{constructor(e,t,n,i,r,s,o,a,l){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=i,this.mutatedKeys=r,this.fromCache=s,this.syncStateChanged=o,this.excludesMetadataChanges=a,this.hasCachedResults=l}static fromInitialDocuments(e,t,n,i,r){const s=[];return t.forEach((e=>{s.push({type:0,doc:e})})),new od(e,t,rd.emptySet(t),s,n,i,!0,!1,r)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&El(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==n[i].type||!t[i].doc.isEqual(n[i].doc))return!1;return!0}}class ad{constructor(){this.K_=void 0,this.U_=[]}W_(){return this.U_.some((e=>e.G_()))}}class ld{constructor(){this.queries=new Dl((e=>_l(e)),El),this.onlineState="Unknown",this.z_=new Set}}async function cd(e,t){const n=yo(e);let i=3;const r=t.query;let s=n.queries.get(r);s?!s.W_()&&t.G_()&&(i=2):(s=new ad,i=t.G_()?0:1);try{switch(i){case 0:s.K_=await n.onListen(r,!0);break;case 1:s.K_=await n.onListen(r,!1);break;case 2:await n.onFirstRemoteStoreListen(r)}}catch(e){const n=id(e,"Initialization of query '".concat(Al(t.query),"' failed"));return void t.onError(n)}n.queries.set(r,s),s.U_.push(t),t.j_(n.onlineState),s.K_&&t.H_(s.K_)&&fd(n)}async function hd(e,t){const n=yo(e),i=t.query;let r=3;const s=n.queries.get(i);if(s){const e=s.U_.indexOf(t);e>=0&&(s.U_.splice(e,1),0===s.U_.length?r=t.G_()?0:1:!s.W_()&&t.G_()&&(r=2))}switch(r){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function ud(e,t){const n=yo(e);let i=!1;for(const r of t){const e=r.query,t=n.queries.get(e);if(t){for(const e of t.U_)e.H_(r)&&(i=!0);t.K_=r}}i&&fd(n)}function dd(e,t,n){const i=yo(e),r=i.queries.get(t);if(r)for(const s of r.U_)s.onError(n);i.queries.delete(t)}function fd(e){e.z_.forEach((e=>{e.next()}))}var pd,gd;(gd=pd||(pd={})).J_="default",gd.Cache="cache";class md{constructor(e,t,n){this.query=e,this.Y_=t,this.Z_=!1,this.X_=null,this.onlineState="Unknown",this.options=n||{}}H_(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new od(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Z_?this.ea(e)&&(this.Y_.next(e),t=!0):this.ta(e,this.onlineState)&&(this.na(e),t=!0),this.X_=e,t}onError(e){this.Y_.error(e)}j_(e){this.onlineState=e;let t=!1;return this.X_&&!this.Z_&&this.ta(this.X_,e)&&(this.na(this.X_),t=!0),t}ta(e,t){if(!e.fromCache)return!0;if(!this.G_())return!0;const n="Offline"!==t;return(!this.options.ra||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}ea(e){if(e.docChanges.length>0)return!0;const t=this.X_&&this.X_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}na(e){e=od.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Z_=!0,this.Y_.next(e)}G_(){return this.options.source!==pd.Cache}}class vd{constructor(e){this.key=e}}class yd{constructor(e){this.key=e}}class wd{constructor(e,t){this.query=e,this.la=t,this.ha=null,this.hasCachedResults=!1,this.current=!1,this.Pa=Wl(),this.mutatedKeys=Wl(),this.Ia=Il(e),this.Ta=new rd(this.Ia)}get Ea(){return this.la}da(e,t){const n=t?t.Aa:new sd,i=t?t.Ta:this.Ta;let r=t?t.mutatedKeys:this.mutatedKeys,s=i,o=!1;const a="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,l="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal(((e,t)=>{const c=i.get(e),h=Pl(this.query,t)?t:null,u=!!c&&this.mutatedKeys.has(c.key),d=!!h&&(h.hasLocalMutations||this.mutatedKeys.has(h.key)&&h.hasCommittedMutations);let f=!1;c&&h?c.data.isEqual(h.data)?u!==d&&(n.track({type:3,doc:h}),f=!0):this.Ra(c,h)||(n.track({type:2,doc:h}),f=!0,(a&&this.Ia(h,a)>0||l&&this.Ia(h,l)<0)&&(o=!0)):!c&&h?(n.track({type:0,doc:h}),f=!0):c&&!h&&(n.track({type:1,doc:c}),f=!0,(a||l)&&(o=!0)),f&&(h?(s=s.add(h),r=d?r.add(e):r.delete(e)):(s=s.delete(e),r=r.delete(e)))})),null!==this.query.limit)for(;s.size>this.query.limit;){const e="F"===this.query.limitType?s.last():s.first();s=s.delete(e.key),r=r.delete(e.key),n.track({type:1,doc:e})}return{Ta:s,Aa:n,Xi:o,mutatedKeys:r}}Ra(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,i){const r=this.Ta;this.Ta=e.Ta,this.mutatedKeys=e.mutatedKeys;const s=e.Aa.Q_();s.sort(((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return mo()}};return n(e)-n(t)}(e.type,t.type)||this.Ia(e.doc,t.doc))),this.Va(n),i=null!=i&&i;const o=t&&!i?this.ma():[],a=0===this.Pa.size&&this.current&&!i?1:0,l=a!==this.ha;return this.ha=a,0!==s.length||l?{snapshot:new od(this.query,e.Ta,r,s,e.mutatedKeys,0===a,l,!1,!!n&&n.resumeToken.approximateByteSize()>0),fa:o}:{fa:o}}j_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Ta:this.Ta,Aa:new sd,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{fa:[]}}ga(e){return!this.la.has(e)&&!!this.Ta.has(e)&&!this.Ta.get(e).hasLocalMutations}Va(e){e&&(e.addedDocuments.forEach((e=>this.la=this.la.add(e))),e.modifiedDocuments.forEach((e=>{})),e.removedDocuments.forEach((e=>this.la=this.la.delete(e))),this.current=e.current)}ma(){if(!this.current)return[];const e=this.Pa;this.Pa=Wl(),this.Ta.forEach((e=>{this.ga(e.key)&&(this.Pa=this.Pa.add(e.key))}));const t=[];return e.forEach((e=>{this.Pa.has(e)||t.push(new yd(e))})),this.Pa.forEach((n=>{e.has(n)||t.push(new vd(n))})),t}pa(e){this.la=e.hs,this.Pa=Wl();const t=this.da(e.documents);return this.applyChanges(t,!0)}ya(){return od.fromInitialDocuments(this.query,this.Ta,this.mutatedKeys,0===this.ha,this.hasCachedResults)}}class bd{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class Od{constructor(e){this.key=e,this.wa=!1}}class kd{constructor(e,t,n,i,r,s){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=i,this.currentUser=r,this.maxConcurrentLimboResolutions=s,this.Sa={},this.ba=new Dl((e=>_l(e)),El),this.Da=new Map,this.Ca=new Set,this.va=new la(Uo.comparator),this.Fa=new Map,this.Ma=new Uh,this.xa={},this.Oa=new Map,this.Na=Dh.Ln(),this.onlineState="Unknown",this.La=void 0}get isPrimaryClient(){return!0===this.La}}async function Sd(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const i=Bd(e);let r;const s=i.ba.get(t);return s?(i.sharedClientState.addLocalQueryTarget(s.targetId),r=s.view.ya()):r=await Td(i,t,n,!0),r}async function xd(e,t){const n=Bd(e);await Td(n,t,!0,!1)}async function Td(e,t,n,i){const r=await ru(e.localStore,Sl(t)),s=r.targetId,o=n?e.sharedClientState.addLocalQueryTarget(s):"not-current";let a;return i&&(a=await Cd(e,t,s,"current"===o,r.resumeToken)),e.isPrimaryClient&&n&&Au(e.remoteStore,r),a}async function Cd(e,t,n,i,r){e.Ba=(t,n,i)=>async function(e,t,n,i){let r=t.view.da(n);r.Xi&&(r=await ou(e.localStore,t.query,!1).then((e=>{let{documents:n}=e;return t.view.da(n,r)})));const s=i&&i.targetChanges.get(t.targetId),o=i&&null!=i.targetMismatches.get(t.targetId),a=t.view.applyChanges(r,e.isPrimaryClient,s,o);return zd(e,t.targetId,a.fa),a.snapshot}(e,t,n,i);const s=await ou(e.localStore,t,!0),o=new wd(t,s.hs),a=o.da(s.documents),l=Vc.createSynthesizedTargetChangeForCurrentChange(n,i&&"Offline"!==e.onlineState,r),c=o.applyChanges(a,e.isPrimaryClient,l);zd(e,n,c.fa);const h=new bd(t,n,o);return e.ba.set(t,h),e.Da.has(n)?e.Da.get(n).push(t):e.Da.set(n,[t]),c.snapshot}async function Ed(e,t,n){const i=yo(e),r=i.ba.get(t),s=i.Da.get(r.targetId);if(s.length>1)return i.Da.set(r.targetId,s.filter((e=>!El(e,t)))),void i.ba.delete(t);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||await su(i.localStore,r.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(r.targetId),n&&Pu(i.remoteStore,r.targetId),Ld(i,r.targetId)})).catch(Xo)):(Ld(i,r.targetId),await su(i.localStore,r.targetId,!0))}async function _d(e,t){const n=yo(e),i=n.ba.get(t),r=n.Da.get(i.targetId);n.isPrimaryClient&&1===r.length&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),Pu(n.remoteStore,i.targetId))}async function Ad(e,t){const n=yo(e);try{const e=await function(e,t){const n=yo(e),i=t.snapshotVersion;let r=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(e=>{const s=n.os.newChangeBuffer({trackRemovals:!0});r=n.ns;const o=[];t.targetChanges.forEach(((s,a)=>{const l=r.get(a);if(!l)return;o.push(n.Qr.removeMatchingKeys(e,s.removedDocuments,a).next((()=>n.Qr.addMatchingKeys(e,s.addedDocuments,a))));let c=l.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(a)?c=c.withResumeToken(ga.EMPTY_BYTE_STRING,Mo.min()).withLastLimboFreeSnapshotVersion(Mo.min()):s.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(s.resumeToken,i)),r=r.insert(a,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(l,c,s)&&o.push(n.Qr.updateTargetData(e,c))}));let a=Ll(),l=Wl();if(t.documentUpdates.forEach((i=>{t.resolvedLimboDocuments.has(i)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,i))})),o.push(nu(e,s,t.documentUpdates).next((e=>{a=e.cs,l=e.ls}))),!i.isEqual(Mo.min())){const t=n.Qr.getLastRemoteSnapshotVersion(e).next((t=>n.Qr.setTargetsMetadata(e,e.currentSequenceNumber,i)));o.push(t)}return Go.waitFor(o).next((()=>s.apply(e))).next((()=>n.localDocuments.getLocalViewOfDocuments(e,a,l))).next((()=>a))})).then((e=>(n.ns=r,e)))}(n.localStore,t);t.targetChanges.forEach(((e,t)=>{const i=n.Fa.get(t);i&&(vo(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?i.wa=!0:e.modifiedDocuments.size>0?vo(i.wa):e.removedDocuments.size>0&&(vo(i.wa),i.wa=!1))})),await Vd(n,e,t)}catch(e){await Xo(e)}}function Pd(e,t,n){const i=yo(e);if(i.isPrimaryClient&&0===n||!i.isPrimaryClient&&1===n){const e=[];i.ba.forEach(((n,i)=>{const r=i.view.j_(t);r.snapshot&&e.push(r.snapshot)})),function(e,t){const n=yo(e);n.onlineState=t;let i=!1;n.queries.forEach(((e,n)=>{for(const r of n.U_)r.j_(t)&&(i=!0)})),i&&fd(n)}(i.eventManager,t),e.length&&i.Sa.h_(e),i.onlineState=t,i.isPrimaryClient&&i.sharedClientState.setOnlineState(t)}}async function Nd(e,t,n){const i=yo(e);i.sharedClientState.updateQueryState(t,"rejected",n);const r=i.Fa.get(t),s=r&&r.key;if(s){let e=new la(Uo.comparator);e=e.insert(s,qa.newNoDocument(s,Mo.min()));const n=Wl().add(s),r=new Uc(Mo.min(),new Map,new la(Io),e,n);await Ad(i,r),i.va=i.va.remove(s),i.Fa.delete(t),Ud(i)}else await su(i.localStore,t,!1).then((()=>Ld(i,t,n))).catch(Xo)}async function Id(e,t){const n=yo(e),i=t.batch.batchId;try{const e=await function(e,t){const n=yo(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(e=>{const i=t.batch.keys(),r=n.os.newChangeBuffer({trackRemovals:!0});return function(e,t,n,i){const r=n.batch,s=r.keys();let o=Go.resolve();return s.forEach((e=>{o=o.next((()=>i.getEntry(t,e))).next((t=>{const s=n.docVersions.get(e);vo(null!==s),t.version.compareTo(s)<0&&(r.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),i.addEntry(t)))}))})),o.next((()=>e.mutationQueue.removeMutationBatch(t,r)))}(n,e,t,r).next((()=>r.apply(e))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,i,t.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=Wl();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t)))).next((()=>n.localDocuments.getDocuments(e,i)))}))}(n.localStore,t);Md(n,i,null),Dd(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await Vd(n,e)}catch(e){await Xo(e)}}async function Rd(e,t,n){const i=yo(e);try{const e=await function(e,t){const n=yo(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(e=>{let i;return n.mutationQueue.lookupMutationBatch(e,t).next((t=>(vo(null!==t),i=t.keys(),n.mutationQueue.removeMutationBatch(e,t)))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,i,t))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,i))).next((()=>n.localDocuments.getDocuments(e,i)))}))}(i.localStore,t);Md(i,t,n),Dd(i,t),i.sharedClientState.updateMutationState(t,"rejected",n),await Vd(i,e)}catch(n){await Xo(n)}}function Dd(e,t){(e.Oa.get(t)||[]).forEach((e=>{e.resolve()})),e.Oa.delete(t)}function Md(e,t,n){const i=yo(e);let r=i.xa[i.currentUser.toKey()];if(r){const e=r.get(t);e&&(n?e.reject(n):e.resolve(),r=r.remove(t)),i.xa[i.currentUser.toKey()]=r}}function Ld(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);for(const i of e.Da.get(t))e.ba.delete(i),n&&e.Sa.ka(i,n);e.Da.delete(t),e.isPrimaryClient&&e.Ma.Vr(t).forEach((t=>{e.Ma.containsKey(t)||Qd(e,t)}))}function Qd(e,t){e.Ca.delete(t.path.canonicalString());const n=e.va.get(t);null!==n&&(Pu(e.remoteStore,n),e.va=e.va.remove(t),e.Fa.delete(n),Ud(e))}function zd(e,t,n){for(const i of n)i instanceof vd?(e.Ma.addReference(i.key,t),jd(e,i)):i instanceof yd?(uo("SyncEngine","Document no longer in limbo: "+i.key),e.Ma.removeReference(i.key,t),e.Ma.containsKey(i.key)||Qd(e,i.key)):mo()}function jd(e,t){const n=t.key,i=n.path.canonicalString();e.va.get(n)||e.Ca.has(i)||(uo("SyncEngine","New document in limbo: "+n),e.Ca.add(i),Ud(e))}function Ud(e){for(;e.Ca.size>0&&e.va.size<e.maxConcurrentLimboResolutions;){const t=e.Ca.values().next().value;e.Ca.delete(t);const n=new Uo(Qo.fromString(t)),i=e.Na.next();e.Fa.set(i,new Od(n)),e.va=e.va.insert(n,i),Au(e.remoteStore,new Eh(Sl(wl(n.path)),i,"TargetPurposeLimboResolution",Jo.oe))}}async function Vd(e,t,n){const i=yo(e),r=[],s=[],o=[];i.ba.isEmpty()||(i.ba.forEach(((e,a)=>{o.push(i.Ba(a,t,n).then((e=>{var t;if((e||n)&&i.isPrimaryClient){const r=e?!e.fromCache:null===(t=null==n?void 0:n.targetChanges.get(a.targetId))||void 0===t?void 0:t.current;i.sharedClientState.updateQueryState(a.targetId,r?"current":"not-current")}if(e){r.push(e);const t=Gh.Ki(a.targetId,e);s.push(t)}})))})),await Promise.all(o),i.Sa.h_(r),await async function(e,t){const n=yo(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(e=>Go.forEach(t,(t=>Go.forEach(t.qi,(i=>n.persistence.referenceDelegate.addReference(e,t.targetId,i))).next((()=>Go.forEach(t.Qi,(i=>n.persistence.referenceDelegate.removeReference(e,t.targetId,i)))))))))}catch(e){if(!Yo(e))throw e;uo("LocalStore","Failed to update sequence numbers: "+e)}for(const i of t){const e=i.targetId;if(!i.fromCache){const t=n.ns.get(e),i=t.snapshotVersion,r=t.withLastLimboFreeSnapshotVersion(i);n.ns=n.ns.insert(e,r)}}}(i.localStore,s))}async function Fd(e,t){const n=yo(e);if(!n.currentUser.isEqual(t)){uo("SyncEngine","User change. New user:",t.toKey());const e=await eu(n.localStore,t);n.currentUser=t,function(e,t){e.Oa.forEach((e=>{e.forEach((e=>{e.reject(new bo(wo.CANCELLED,t))}))})),e.Oa.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await Vd(n,e.us)}}function qd(e,t){const n=yo(e),i=n.Fa.get(t);if(i&&i.wa)return Wl().add(i.key);{let e=Wl();const i=n.Da.get(t);if(!i)return e;for(const t of i){const i=n.ba.get(t);e=e.unionWith(i.view.Ea)}return e}}function Bd(e){const t=yo(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Ad.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=qd.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Nd.bind(null,t),t.Sa.h_=ud.bind(null,t.eventManager),t.Sa.ka=dd.bind(null,t.eventManager),t}function Wd(e){const t=yo(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Id.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Rd.bind(null,t),t}class Hd{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=wu(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return Zh(this.persistence,new Yh,e.initialUser,this.serializer)}createPersistence(e){return new Hh(Xh.Hr,this.serializer)}createSharedClientState(e){return new cu}async terminate(){var e,t;null===(e=this.gcScheduler)||void 0===e||e.stop(),null===(t=this.indexBackfillerScheduler)||void 0===t||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class $d{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>Pd(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=Fd.bind(null,this.syncEngine),await Zu(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new ld}createDatastore(e){const t=wu(e.databaseInfo.databaseId),n=function(e){return new vu(e)}(e.databaseInfo);return function(e,t,n,i){return new xu(e,t,n,i)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,i,r){return new Cu(e,t,n,i,r)}(this.localStore,this.datastore,e.asyncQueue,(e=>Pd(this.syncEngine,e,0)),uu.D()?new uu:new hu)}createSyncEngine(e,t){return function(e,t,n,i,r,s,o){const a=new kd(e,t,n,i,r,s);return o&&(a.La=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e;await async function(e){const t=yo(e);uo("RemoteStore","RemoteStore shutting down."),t.M_.add(5),await _u(t),t.O_.shutdown(),t.N_.set("Unknown")}(this.remoteStore),null===(e=this.datastore)||void 0===e||e.terminate()}}class Xd{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ka(this.observer.next,e)}error(e){this.observer.error?this.Ka(this.observer.error,e):fo("Uncaught Error in snapshot listener:",e.toString())}$a(){this.muted=!0}Ka(e,t){this.muted||setTimeout((()=>{this.muted||e(t)}),0)}}class Gd{constructor(e,t,n,i){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=i,this.user=ao.UNAUTHENTICATED,this.clientId=No.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,(async e=>{uo("FirestoreClient","Received user=",e.uid),await this.authCredentialListener(e),this.user=e})),this.appCheckCredentials.start(n,(e=>(uo("FirestoreClient","Received new app check token=",e),this.appCheckCredentialListener(e,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new bo(wo.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Oo;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(Kk){const n=id(Kk,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}async function Kd(e,t){e.asyncQueue.verifyOperationInProgress(),uo("FirestoreClient","Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let i=n.initialUser;e.setCredentialChangeListener((async e=>{i.isEqual(e)||(await eu(t.localStore,e),i=e)})),t.persistence.setDatabaseDeletedListener((()=>e.terminate())),e._offlineComponents=t}async function Yd(e,t){e.asyncQueue.verifyOperationInProgress();const n=await Zd(e);uo("FirestoreClient","Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener((e=>Ju(t.remoteStore,e))),e.setAppCheckTokenChangeListener(((e,n)=>Ju(t.remoteStore,n))),e._onlineComponents=t}function Jd(e){return"FirebaseError"===e.name?e.code===wo.FAILED_PRECONDITION||e.code===wo.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}async function Zd(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){uo("FirestoreClient","Using user provided OfflineComponentProvider");try{await Kd(e,e._uninitializedComponentsProvider._offline)}catch(Kk){const n=Kk;if(!Jd(n))throw n;po("Error using user provided cache. Falling back to memory cache: "+n),await Kd(e,new Hd)}}else uo("FirestoreClient","Using default OfflineComponentProvider"),await Kd(e,new Hd);return e._offlineComponents}async function ef(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(uo("FirestoreClient","Using user provided OnlineComponentProvider"),await Yd(e,e._uninitializedComponentsProvider._online)):(uo("FirestoreClient","Using default OnlineComponentProvider"),await Yd(e,new $d))),e._onlineComponents}function tf(e){return ef(e).then((e=>e.syncEngine))}async function nf(e){const t=await ef(e),n=t.eventManager;return n.onListen=Sd.bind(null,t.syncEngine),n.onUnlisten=Ed.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=xd.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=_d.bind(null,t.syncEngine),n}function rf(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i=new Oo;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,i,r){const s=new Xd({next:s=>{t.enqueueAndForget((()=>hd(e,o)));const a=s.docs.has(n);!a&&s.fromCache?r.reject(new bo(wo.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&s.fromCache&&i&&"server"===i.source?r.reject(new bo(wo.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):r.resolve(s)},error:e=>r.reject(e)}),o=new md(wl(n.path),s,{includeMetadataChanges:!0,ra:!0});return cd(e,o)}(await nf(e),e.asyncQueue,t,n,i))),i.promise}function sf(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i=new Oo;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,i,r){const s=new Xd({next:n=>{t.enqueueAndForget((()=>hd(e,o))),n.fromCache&&"server"===i.source?r.reject(new bo(wo.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):r.resolve(n)},error:e=>r.reject(e)}),o=new md(n,s,{includeMetadataChanges:!0,ra:!0});return cd(e,o)}(await nf(e),e.asyncQueue,t,n,i))),i.promise}function of(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const af=new Map;function lf(e,t,n){if(!n)throw new bo(wo.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function cf(e){if(!Uo.isDocumentKey(e))throw new bo(wo.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function hf(e){if(Uo.isDocumentKey(e))throw new bo(wo.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function uf(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}}return"function"==typeof e?"a function":mo()}function df(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new bo(wo.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=uf(e);throw new bo(wo.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}}return e}class ff{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new bo(wo.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new bo(wo.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function(e,t,n,i){if(!0===t&&!0===i)throw new bo(wo.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=of(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new bo(wo.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (must not be NaN)"));if(e.timeoutSeconds<5)throw new bo(wo.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (minimum allowed value is 5)"));if(e.timeoutSeconds>30)throw new bo(wo.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class pf{constructor(e,t,n,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ff({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new bo(wo.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new bo(wo.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ff(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new So;switch(e.type){case"firstParty":return new Eo(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new bo(wo.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=af.get(e);t&&(uo("ComponentProvider","Removing Datastore"),af.delete(e),t.terminate())}(this),Promise.resolve()}}function gf(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};var r;const s=(e=df(e,pf))._getSettings(),o="".concat(t,":").concat(n);if("firestore.googleapis.com"!==s.host&&s.host!==o&&po("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),i.mockUserToken){let t,n;if("string"==typeof i.mockUserToken)t=i.mockUserToken,n=ao.MOCK_USER;else{t=function(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",i=e.iat||0,r=e.sub||e.user_id;if(!r)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:i,exp:i+3600,auth_time:i,sub:r,user_id:r,firebase:{sign_in_provider:"custom",identities:{}}},e);return[_e(JSON.stringify({alg:"none",type:"JWT"})),_e(JSON.stringify(s)),""].join(".")}(i.mockUserToken,null===(r=e._app)||void 0===r?void 0:r.options.projectId);const s=i.mockUserToken.sub||i.mockUserToken.user_id;if(!s)throw new bo(wo.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new ao(s)}e._authCredentials=new xo(new ko(t,n))}}class mf{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new mf(this.firestore,e,this._query)}}class vf{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new yf(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new vf(this.firestore,e,this._key)}}class yf extends mf{constructor(e,t,n){super(e,t,wl(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new vf(this.firestore,null,new Uo(e))}withConverter(e){return new yf(this.firestore,e,this._path)}}function wf(e,t){for(var n=arguments.length,i=new Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];if(e=Ge(e),lf("collection","path",t),e instanceof pf){const n=Qo.fromString(t,...i);return hf(n),new yf(e,null,n)}{if(!(e instanceof vf||e instanceof yf))throw new bo(wo.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(Qo.fromString(t,...i));return hf(n),new yf(e.firestore,null,n)}}function bf(e,t){for(var n=arguments.length,i=new Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];if(e=Ge(e),1===arguments.length&&(t=No.newId()),lf("doc","path",t),e instanceof pf){const n=Qo.fromString(t,...i);return cf(n),new vf(e,null,new Uo(n))}{if(!(e instanceof vf||e instanceof yf))throw new bo(wo.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(Qo.fromString(t,...i));return cf(n),new vf(e.firestore,e instanceof yf?e.converter:null,new Uo(n))}}class Of{constructor(){this.iu=Promise.resolve(),this.su=[],this.ou=!1,this._u=[],this.au=null,this.uu=!1,this.cu=!1,this.lu=[],this.Yo=new bu(this,"async_queue_retry"),this.hu=()=>{const e=yu();e&&uo("AsyncQueue","Visibility state changed to "+e.visibilityState),this.Yo.Wo()};const e=yu();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.hu)}get isShuttingDown(){return this.ou}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Pu(),this.Iu(e)}enterRestrictedMode(e){if(!this.ou){this.ou=!0,this.cu=e||!1;const t=yu();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.hu)}}enqueue(e){if(this.Pu(),this.ou)return new Promise((()=>{}));const t=new Oo;return this.Iu((()=>this.ou&&this.cu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.su.push(e),this.Tu())))}async Tu(){if(0!==this.su.length){try{await this.su[0](),this.su.shift(),this.Yo.reset()}catch(kj){if(!Yo(kj))throw kj;uo("AsyncQueue","Operation failed with retryable error: "+kj)}this.su.length>0&&this.Yo.$o((()=>this.Tu()))}}Iu(e){const t=this.iu.then((()=>(this.uu=!0,e().catch((e=>{this.au=e,this.uu=!1;const t=function(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw fo("INTERNAL UNHANDLED ERROR: ",t),e})).then((e=>(this.uu=!1,e))))));return this.iu=t,t}enqueueAfterDelay(e,t,n){this.Pu(),this.lu.indexOf(e)>-1&&(t=0);const i=nd.createAndSchedule(this,e,t,n,(e=>this.Eu(e)));return this._u.push(i),i}Pu(){this.au&&mo()}verifyOperationInProgress(){}async du(){let e;do{e=this.iu,await e}while(e!==this.iu)}Au(e){for(const t of this._u)if(t.timerId===e)return!0;return!1}Ru(e){return this.du().then((()=>{this._u.sort(((e,t)=>e.targetTimeMs-t.targetTimeMs));for(const t of this._u)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.du()}))}Vu(e){this.lu.push(e)}Eu(e){const t=this._u.indexOf(e);this._u.splice(t,1)}}class kf extends pf{constructor(e,t,n,i){super(e,t,n,i),this.type="firestore",this._queue=new Of,this._persistenceKey=(null==i?void 0:i.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||xf(this),this._firestoreClient.terminate()}}function Sf(e){return e._firestoreClient||xf(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function xf(e){var t,n,i;const r=e._freezeSettings(),s=function(e,t,n,i){return new Sa(e,t,n,i.host,i.ssl,i.experimentalForceLongPolling,i.experimentalAutoDetectLongPolling,of(i.experimentalLongPollingOptions),i.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,r);e._firestoreClient=new Gd(e._authCredentials,e._appCheckCredentials,e._queue,s),(null===(n=r.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(i=r.localCache)||void 0===i?void 0:i._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:r.localCache.kind,_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider})}class Tf{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Tf(ga.fromBase64String(e))}catch(e){throw new bo(wo.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new Tf(ga.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Cf{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let i=0;i<t.length;++i)if(0===t[i].length)throw new bo(wo.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new jo(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Ef{constructor(e){this._methodName=e}}class _f{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new bo(wo.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new bo(wo.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Io(this._lat,e._lat)||Io(this._long,e._long)}}const Af=/^__.*__$/;class Pf{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new wc(e,this.data,this.fieldMask,t,this.fieldTransforms):new yc(e,this.data,t,this.fieldTransforms)}}class Nf{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new wc(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function If(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw mo()}}class Rf{constructor(e,t,n,i,r,s){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=i,void 0===r&&this.mu(),this.fieldTransforms=r||[],this.fieldMask=s||[]}get path(){return this.settings.path}get fu(){return this.settings.fu}gu(e){return new Rf(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}pu(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.gu({path:n,yu:!1});return i.wu(e),i}Su(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.gu({path:n,yu:!1});return i.mu(),i}bu(e){return this.gu({path:void 0,yu:!0})}Du(e){return Xf(e,this.settings.methodName,this.settings.Cu||!1,this.path,this.settings.vu)}contains(e){return void 0!==this.fieldMask.find((t=>e.isPrefixOf(t)))||void 0!==this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))}mu(){if(this.path)for(let e=0;e<this.path.length;e++)this.wu(this.path.get(e))}wu(e){if(0===e.length)throw this.Du("Document fields must not be empty");if(If(this.fu)&&Af.test(e))throw this.Du('Document fields cannot begin and end with "__"')}}class Df{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||wu(e)}Fu(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new Rf({fu:e,methodName:t,vu:n,path:jo.emptyPath(),yu:!1,Cu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Mf(e){const t=e._freezeSettings(),n=wu(e._databaseId);return new Df(e._databaseId,!!t.ignoreUndefinedProperties,n)}function Lf(e,t,n,i,r){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const o=e.Fu(s.merge||s.mergeFields?2:0,t,n,r);Bf("Data must be an object, but it was:",o,i);const a=Ff(i,o);let l,c;if(s.merge)l=new fa(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const e=[];for(const i of s.mergeFields){const r=Wf(t,i,n);if(!o.contains(r))throw new bo(wo.INVALID_ARGUMENT,"Field '".concat(r,"' is specified in your field mask but missing from your input data."));Gf(e,r)||e.push(r)}l=new fa(e),c=o.fieldTransforms.filter((e=>l.covers(e.field)))}else l=null,c=o.fieldTransforms;return new Pf(new Va(a),l,c)}class Qf extends Ef{_toFieldTransform(e){if(2!==e.fu)throw 1===e.fu?e.Du("".concat(this._methodName,"() can only appear at the top level of your update data")):e.Du("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Qf}}function zf(e,t,n,i){const r=e.Fu(1,t,n);Bf("Data must be an object, but it was:",r,i);const s=[],o=Va.empty();oa(i,((e,i)=>{const a=$f(t,e,n);i=Ge(i);const l=r.Su(a);if(i instanceof Qf)s.push(a);else{const e=Vf(i,l);null!=e&&(s.push(a),o.set(a,e))}}));const a=new fa(s);return new Nf(o,a,r.fieldTransforms)}function jf(e,t,n,i,r,s){const o=e.Fu(1,t,n),a=[Wf(t,i,n)],l=[r];if(s.length%2!=0)throw new bo(wo.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(let d=0;d<s.length;d+=2)a.push(Wf(t,s[d])),l.push(s[d+1]);const c=[],h=Va.empty();for(let d=a.length-1;d>=0;--d)if(!Gf(c,a[d])){const e=a[d];let t=l[d];t=Ge(t);const n=o.Su(e);if(t instanceof Qf)c.push(e);else{const i=Vf(t,n);null!=i&&(c.push(e),h.set(e,i))}}const u=new fa(c);return new Nf(h,u,o.fieldTransforms)}function Uf(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return Vf(n,e.Fu(i?4:3,t))}function Vf(e,t){if(qf(e=Ge(e)))return Bf("Unsupported field value:",t,e),Ff(e,t);if(e instanceof Ef)return function(e,t){if(!If(t.fu))throw t.Du("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.Du("".concat(e._methodName,"() is not currently supported inside arrays"));const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.yu&&4!==t.fu)throw t.Du("Nested arrays are not supported");return function(e,t){const n=[];let i=0;for(const r of e){let e=Vf(r,t.bu(i));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),i++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=Ge(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return Kl(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=Do.fromDate(e);return{timestampValue:eh(t.serializer,n)}}if(e instanceof Do){const n=new Do(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:eh(t.serializer,n)}}if(e instanceof _f)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof Tf)return{bytesValue:th(t.serializer,e._byteString)};if(e instanceof vf){const n=t.databaseId,i=e.firestore._databaseId;if(!i.isEqual(n))throw t.Du("Document reference is for database ".concat(i.projectId,"/").concat(i.database," but should be for database ").concat(n.projectId,"/").concat(n.database));return{referenceValue:rh(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.Du("Unsupported field value: ".concat(uf(e)))}(e,t)}function Ff(e,t){const n={};return aa(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):oa(e,((e,i)=>{const r=Vf(i,t.pu(e));null!=r&&(n[e]=r)})),{mapValue:{fields:n}}}function qf(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Do||e instanceof _f||e instanceof Tf||e instanceof vf||e instanceof Ef)}function Bf(e,t,n){if(!qf(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){const i=uf(n);throw"an object"===i?t.Du(e+" a custom object"):t.Du(e+" "+i)}}function Wf(e,t,n){if((t=Ge(t))instanceof Cf)return t._internalPath;if("string"==typeof t)return $f(e,t);throw Xf("Field path arguments must be of type string or ",e,!1,void 0,n)}const Hf=new RegExp("[~\\*/\\[\\]]");function $f(e,t,n){if(t.search(Hf)>=0)throw Xf("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return new Cf(...t.split("."))._internalPath}catch(i){throw Xf("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function Xf(e,t,n,i,r){const s=i&&!i.isEmpty(),o=void 0!==r;let a="Function ".concat(t,"() called with invalid data");n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=" in field ".concat(i)),o&&(l+=" in document ".concat(r)),l+=")"),new bo(wo.INVALID_ARGUMENT,a+e+l)}function Gf(e,t){return e.some((e=>e.isEqual(t)))}class Kf{constructor(e,t,n,i,r){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=i,this._converter=r}get id(){return this._key.path.lastSegment()}get ref(){return new vf(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Yf(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Jf("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Yf extends Kf{data(){return super.data()}}function Jf(e,t){return"string"==typeof t?$f(e,t):t instanceof Cf?t._internalPath:t._delegate._internalPath}function Zf(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new bo(wo.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class ep{}class tp extends ep{}class np extends tp{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new np(e,t,n)}_apply(e){const t=this._parse(e);return ap(e._query,t),new mf(e.firestore,e.converter,Tl(e._query,t))}_parse(e){const t=Mf(e.firestore),n=function(e,t,n,i,r,s,o){let a;if(r.isKeyField()){if("array-contains"===s||"array-contains-any"===s)throw new bo(wo.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(s,"' queries on documentId()."));if("in"===s||"not-in"===s){op(o,s);const t=[];for(const n of o)t.push(sp(i,e,n));a={arrayValue:{values:t}}}else a=sp(i,e,o)}else"in"!==s&&"not-in"!==s&&"array-contains-any"!==s||op(o,s),a=Uf(n,t,o,"in"===s||"not-in"===s);return Ka.create(r,s,a)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value);return n}}class ip extends ep{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new ip(e,t)}_parse(e){const t=this._queryConstraints.map((t=>t._parse(e))).filter((e=>e.getFilters().length>0));return 1===t.length?t[0]:Ya.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const i=t.getFlattenedFilters();for(const r of i)ap(n,r),n=Tl(n,r)}(e._query,t),new mf(e.firestore,e.converter,Tl(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class rp extends tp{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new rp(e,t)}_apply(e){const t=function(e,t,n){if(null!==e.startAt)throw new bo(wo.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new bo(wo.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new $a(t,n)}(e._query,this._field,this._direction);return new mf(e.firestore,e.converter,function(e,t){const n=e.explicitOrderBy.concat([t]);return new vl(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}function sp(e,t,n){if("string"==typeof(n=Ge(n))){if(""===n)throw new bo(wo.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Ol(t)&&-1!==n.indexOf("/"))throw new bo(wo.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));const i=t.path.child(Qo.fromString(n));if(!Uo.isDocumentKey(i))throw new bo(wo.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(i,"' is not because it has an odd number of segments (").concat(i.length,")."));return Ra(e,new Uo(i))}if(n instanceof vf)return Ra(e,n._key);throw new bo(wo.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(uf(n),"."))}function op(e,t){if(!Array.isArray(e)||0===e.length)throw new bo(wo.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."))}function ap(e,t){const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new bo(wo.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new bo(wo.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(n.toString(),"' filters."))}class lp{convertValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(Ca(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ya(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(wa(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw mo()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const n={};return oa(e,((e,i)=>{n[e]=this.convertValue(i,t)})),n}convertGeoPoint(e){return new _f(ya(e.latitude),ya(e.longitude))}convertArray(e,t){return(e.values||[]).map((e=>this.convertValue(e,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const n=Oa(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(ka(e));default:return null}}convertTimestamp(e){const t=va(e);return new Do(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=Qo.fromString(e);vo(Ch(n));const i=new xa(n.get(1),n.get(3)),r=new Uo(n.popFirst(5));return i.isEqual(t)||fo("Document ".concat(r," contains a document reference within a different database (").concat(i.projectId,"/").concat(i.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),r}}function cp(e,t,n){let i;return i=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,i}class hp{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class up extends Kf{constructor(e,t,n,i,r,s){super(e,t,n,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=r}exists(){return super.exists()}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const t=new dp(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(Jf("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class dp extends up{data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(e)}}class fp{constructor(e,t,n,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new hp(i.hasPendingWrites,i.fromCache),this.query=n}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach((n=>{e.call(t,new dp(this._firestore,this._userDataWriter,n.key,n,new hp(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(){const e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new bo(wo.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map((n=>{const i=new dp(e._firestore,e._userDataWriter,n.doc.key,n.doc,new hp(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:i,oldIndex:-1,newIndex:t++}}))}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((e=>t||3!==e.type)).map((t=>{const i=new dp(e._firestore,e._userDataWriter,t.doc.key,t.doc,new hp(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let r=-1,s=-1;return 0!==t.type&&(r=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),s=n.indexOf(t.doc.key)),{type:pp(t.type),doc:i,oldIndex:r,newIndex:s}}))}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function pp(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return mo()}}function gp(e){e=df(e,vf);const t=df(e.firestore,kf);return rf(Sf(t),e._key).then((n=>Op(t,e,n)))}class mp extends lp{constructor(e){super(),this.firestore=e}convertBytes(e){return new Tf(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new vf(this.firestore,null,t)}}function vp(e){e=df(e,mf);const t=df(e.firestore,kf),n=Sf(t),i=new mp(t);return Zf(e._query),sf(n,e._query).then((n=>new fp(t,i,e,n)))}function yp(e,t,n){e=df(e,vf);const i=df(e.firestore,kf),r=cp(e.converter,t,n);return bp(i,[Lf(Mf(i),"setDoc",e._key,r,null!==e.converter,n).toMutation(e._key,hc.none())])}function wp(e,t,n){e=df(e,vf);const i=df(e.firestore,kf),r=Mf(i);let s;for(var o=arguments.length,a=new Array(o>3?o-3:0),l=3;l<o;l++)a[l-3]=arguments[l];return s="string"==typeof(t=Ge(t))||t instanceof Cf?jf(r,"updateDoc",e._key,t,n,a):zf(r,"updateDoc",e._key,t),bp(i,[s.toMutation(e._key,hc.exists(!0))])}function bp(e,t){return function(e,t){const n=new Oo;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){const i=Wd(e);try{const e=await function(e,t){const n=yo(e),i=Do.now(),r=t.reduce(((e,t)=>e.add(t.key)),Wl());let s,o;return n.persistence.runTransaction("Locally write mutations","readwrite",(e=>{let a=Ll(),l=Wl();return n.os.getEntries(e,r).next((e=>{a=e,a.forEach(((e,t)=>{t.isValidDocument()||(l=l.add(e))}))})).next((()=>n.localDocuments.getOverlayedDocuments(e,a))).next((r=>{s=r;const o=[];for(const e of t){const t=mc(e,s.get(e.key).overlayedDocument);null!=t&&o.push(new wc(e.key,t,Fa(t.value.mapValue),hc.exists(!0)))}return n.mutationQueue.addMutationBatch(e,i,o,t)})).next((t=>{o=t;const i=t.applyToLocalDocumentSet(s,l);return n.documentOverlayCache.saveOverlays(e,t.batchId,i)}))})).then((()=>({batchId:o.batchId,changes:jl(s)})))}(i.localStore,t);i.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let i=e.xa[e.currentUser.toKey()];i||(i=new la(Io)),i=i.insert(t,n),e.xa[e.currentUser.toKey()]=i}(i,e.batchId,n),await Vd(i,e.changes),await qu(i.remoteStore)}catch(e){const t=id(e,"Failed to persist write");n.reject(t)}}(await tf(e),t,n))),n.promise}(Sf(e),t)}function Op(e,t,n){const i=n.docs.get(t._key),r=new mp(e);return new up(e,r,t._key,i,new hp(n.hasPendingWrites,n.fromCache),t.converter)}new WeakMap;!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){lo=e}(un),on(new Ke("firestore",((e,n)=>{let{instanceIdentifier:i,options:r}=n;const s=e.getProvider("app").getImmediate(),o=new kf(new To(e.getProvider("auth-internal")),new Ao(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new bo(wo.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new xa(e.options.projectId,t)}(s,i),s);return r=Object.assign({useFetchStreams:t},r),o._setSettings(r),o}),"PUBLIC").setMultipleInstances(!0)),pn(oo,"4.6.4",e),pn(oo,"4.6.4","esm2017")}();const kp=JSON.parse('{"A":[{"title":"Basic Math Operations","description":"Complete these coding tasks to test basic math operations.","questions":[{"id":"q1","codingQuestion":"Write a Python function to add two numbers.","functionName":"add"},{"id":"q2","codingQuestion":"Write a Python function to subtract two numbers.","functionName":"subtract"},{"id":"q3","codingQuestion":"Write a Python function to multiply two numbers.","functionName":"multiply"},{"id":"q4","codingQuestion":"Write a Python function to divide two numbers.","functionName":"divide"},{"id":"q5","codingQuestion":"Write a Python function to find the power of a number.","functionName":"power"},{"id":"q6","codingQuestion":"Write a Python function to find the modulo of two numbers.","functionName":"mod"}]},{"title":"String Operations","description":"Complete these coding tasks to test string operations.","questions":[{"id":"q7","codingQuestion":"Write a Python function to concatenate two strings.","functionName":"concat_strings"}]},{"title":"Number Properties","description":"Complete these coding tasks to test number properties.","questions":[{"id":"q8","codingQuestion":"Write a Python function to find the maximum of two numbers.","functionName":"find_max"},{"id":"q9","codingQuestion":"Write a Python function to check if a number is even.","functionName":"is_even"},{"id":"q10","codingQuestion":"Write a Python function to calculate the factorial of a number.","functionName":"factorial"}]}]}'),Sp=dn({apiKey:"AIzaSyBI37lzWhWSv7VQif5mlNbZm0Bso5W05OA",authDomain:"dyakidswebsite-ab5f1.firebaseapp.com",projectId:"dyakidswebsite-ab5f1",storageBucket:"dyakidswebsite-ab5f1.appspot.com",messagingSenderId:"79577052767",appId:"1:79577052767:web:c68ca99c2a73b59f5ecdea"}),xp=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:fn();const t=an(e,"auth");if(t.isInitialized())return t.getImmediate();const n=function(e,t){const n=an(e,"auth");if(n.isInitialized()){const e=n.getImmediate();if(Fe(n.getOptions(),null!==t&&void 0!==t?t:{}))return e;Rn(e,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:Qs,persistence:[Wr,_r,Pr]}),i=De("authTokenSyncURL");if(i&&"boolean"===typeof isSecureContext&&isSecureContext){const e=new URL(i,location.origin);if(location.origin===e.origin){const t=(r=e.toString(),async e=>{const t=e&&await e.getIdTokenResult(),n=t&&((new Date).getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>Vs)return;const i=null===t||void 0===t?void 0:t.token;Fs!==i&&(Fs=i,await fetch(r,{method:i?"POST":"DELETE",headers:i?{Authorization:"Bearer ".concat(i)}:{}}))});!function(e,t,n){Ge(e).beforeAuthStateChanged(t,n)}(n,t,(()=>t(n.currentUser))),function(e,t,n,i){Ge(e).onIdTokenChanged(t,n,i)}(n,(e=>t(e)))}}var r;const s=Ie("auth");return s&&Ki(n,"http://".concat(s)),n}(Sp),Tp=function(e,t){const n="string"==typeof e?e:t||"(default)",i=an("object"==typeof e?e:fn(),"firestore").getImmediate({identifier:n});if(!i._initialized){const e=(e=>{const t=Ie(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error("Invalid host ".concat(t," with no separate hostname and port!"));const i=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),i]:[t.substring(0,n),i]})("firestore");e&&gf(i,...e)}return i}(Sp);(async()=>{try{const e=wf(Tp,"activities"),t=await vp(e);console.log("Found ".concat(t.docs.length," existing activities. Deleting them..."));const n=t.docs.map((e=>{return bp(df((t=e.ref).firestore,kf),[new Sc(t._key,hc.none())]);var t}));await Promise.all(n),console.log("All existing activities deleted");const i=kp.A.map(((t,n)=>{const i={...t,order:n};return function(e,t){const n=df(e.firestore,kf),i=bf(e),r=cp(e.converter,t);return bp(n,[Lf(Mf(e.firestore),"addDoc",i._key,r,null!==e.converter,{}).toMutation(i._key,hc.exists(!1))]).then((()=>i))}(e,i)}));await Promise.all(i),console.log("New activities added to Firestore")}catch(e){console.error("Error initializing activities:",e)}})();var Cp=n(723);function Ep(){const{uid:e}=re(),t=ie(),n=e=>{(function(e){return Ge(e).signOut()})(e).then((()=>{t("/login")})).catch((e=>{e.message}))};return(0,Cp.jsxs)("div",{className:"side-nav",children:[(0,Cp.jsx)("div",{className:"mascot-container",children:(0,Cp.jsx)("p",{children:"Add mascot here or something else"})}),(0,Cp.jsxs)("div",{className:"btn-container",children:[(0,Cp.jsx)("button",{onClick:()=>{return n="/roadmap/".concat(e),void t(n);var n},children:"Roadmap"}),(0,Cp.jsx)("button",{children:"Profile"}),(0,Cp.jsx)("button",{className:"logout-btn",onClick:()=>n(xp),children:(0,Cp.jsx)("i",{className:"fa-solid fa-arrow-right-from-bracket"})})]})]})}const _p=function(){const{uid:e}=re(),[t,n]=(0,s.useState)(null),[i,r]=(0,s.useState)([]),[o,a]=(0,s.useState)(!0),[l,c]=(0,s.useState)(null),[h,u]=(0,s.useState)(!1),d=ie();return(0,s.useEffect)((()=>{const t=setTimeout((async()=>{try{if(!e)return void c("Missing user ID");const t=bf(Tp,"users",e),i=await gp(t);if(!i.exists())return void c("User not found");const s=i.data(),o=function(e,t){let n=[];for(var i=arguments.length,r=new Array(i>2?i-2:0),s=2;s<i;s++)r[s-2]=arguments[s];t instanceof ep&&n.push(t),n=n.concat(r),function(e){const t=e.filter((e=>e instanceof ip)).length,n=e.filter((e=>e instanceof np)).length;if(t>1||t>0&&n>0)throw new bo(wo.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const o of n)e=o._apply(e);return e}(wf(Tp,"activities"),function(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=Jf("orderBy",e);return rp._create(n,t)}("order"));let a=(await vp(o)).docs.map((e=>({id:e.id,...e.data()})));a=a.sort(((e,t)=>e.order-t.order)),n(s),r(a);const l=s.currentActivity-1;if(l>=0&&l<a.length){const e=a[l];if(e&&!e.unlocked){u(!0);const t=bf(Tp,"activities",e.id);await wp(t,{unlocked:!0}),setTimeout((()=>u(!1)),3e3)}}}catch(t){c(t.message)}finally{a(!1)}}),500);return()=>clearTimeout(t)}),[e]),o?(0,Cp.jsx)("div",{className:"loading",children:"Loading..."}):l?(0,Cp.jsxs)("div",{className:"error",children:["Error: ",l]}):(0,Cp.jsxs)(Cp.Fragment,{children:[(0,Cp.jsx)(Ep,{}),(0,Cp.jsxs)("div",{className:"roadmap-page",children:[h&&(0,Cp.jsx)("div",{className:"unlock-animation",children:"New Activity Unlocked!"}),t&&(0,Cp.jsxs)(Cp.Fragment,{children:[(0,Cp.jsxs)("h2",{className:"roadmap-title",children:[t.username,"'s Roadmap"]}),(0,Cp.jsx)("div",{className:"roadmap-container",children:i.map((n=>(0,Cp.jsxs)("div",{className:"roadmap-item ".concat(n.order>t.currentActivity?"locked":""),onClick:()=>(n=>{if(!n||!n.title)return void console.error("Activity or activity title is undefined.");const i=n.title.replace(/\s+/g,"-");n.order<=t.currentActivity?d("/activity/".concat(e,"/").concat(i,"/").concat(n.order)):alert("You need to complete the previous activities first!")})(n),children:[(0,Cp.jsx)("h3",{className:"roadmap-item-title",children:n.title}),(0,Cp.jsx)("p",{className:"roadmap-item-description",children:n.description}),n.order>t.currentActivity&&(0,Cp.jsx)("p",{className:"locked-message",children:"Locked"})]},n.id)))})]})]})]})};function Ap(){return Ap=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Ap.apply(null,arguments)}class Pp{lineAt(e){if(e<0||e>this.length)throw new RangeError("Invalid position ".concat(e," in document of length ").concat(this.length));return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError("Invalid line number ".concat(e," in ").concat(this.lines,"-line document"));return this.lineInner(e,!0,1,0)}replace(e,t,n){[e,t]=jp(this,e,t);let i=[];return this.decompose(0,e,i,2),n.length&&n.decompose(0,n.length,i,3),this.decompose(t,this.length,i,1),Ip.from(i,this.length-(t-e)+n.length)}append(e){return this.replace(this.length,this.length,e)}slice(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.length;[e,t]=jp(this,e,t);let n=[];return this.decompose(e,t,n,0),Ip.from(n,t-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let t=this.scanIdentical(e,1),n=this.length-this.scanIdentical(e,-1),i=new Mp(this),r=new Mp(e);for(let s=t,o=t;;){if(i.next(s),r.next(s),s=0,i.lineBreak!=r.lineBreak||i.done!=r.done||i.value!=r.value)return!1;if(o+=i.value.length,i.done||o>=n)return!0}}iter(){return new Mp(this,arguments.length>0&&void 0!==arguments[0]?arguments[0]:1)}iterRange(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.length;return new Lp(this,e,t)}iterLines(e,t){let n;if(null==e)n=this.iter();else{null==t&&(t=this.lines+1);let i=this.line(e).from;n=this.iterRange(i,Math.max(i,t==this.lines+1?this.length:t<=1?0:this.line(t-1).to))}return new Qp(n)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}constructor(){}static of(e){if(0==e.length)throw new RangeError("A document must have at least one line");return 1!=e.length||e[0]?e.length<=32?new Np(e):Ip.from(Np.split(e,[])):Pp.empty}}class Np extends Pp{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e){let t=-1;for(let n of e)t+=n.length+1;return t}(e);super(),this.text=e,this.length=t}get lines(){return this.text.length}get children(){return null}lineInner(e,t,n,i){for(let r=0;;r++){let s=this.text[r],o=i+s.length;if((t?n:o)>=e)return new zp(i,o,n,s);i=o+1,n++}}decompose(e,t,n,i){let r=e<=0&&t>=this.length?this:new Np(Dp(this.text,e,t),Math.min(t,this.length)-Math.max(0,e));if(1&i){let e=n.pop(),t=Rp(r.text,e.text.slice(),0,r.length);if(t.length<=32)n.push(new Np(t,e.length+r.length));else{let e=t.length>>1;n.push(new Np(t.slice(0,e)),new Np(t.slice(e)))}}else n.push(r)}replace(e,t,n){if(!(n instanceof Np))return super.replace(e,t,n);[e,t]=jp(this,e,t);let i=Rp(this.text,Rp(n.text,Dp(this.text,0,e)),t),r=this.length+n.length-(t-e);return i.length<=32?new Np(i,r):Ip.from(Np.split(i,[]),r)}sliceString(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.length,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"\n";[e,t]=jp(this,e,t);let i="";for(let r=0,s=0;r<=t&&s<this.text.length;s++){let o=this.text[s],a=r+o.length;r>e&&s&&(i+=n),e<a&&t>r&&(i+=o.slice(Math.max(0,e-r),t-r)),r=a+1}return i}flatten(e){for(let t of this.text)e.push(t)}scanIdentical(){return 0}static split(e,t){let n=[],i=-1;for(let r of e)n.push(r),i+=r.length+1,32==n.length&&(t.push(new Np(n,i)),n=[],i=-1);return i>-1&&t.push(new Np(n,i)),t}}class Ip extends Pp{constructor(e,t){super(),this.children=e,this.length=t,this.lines=0;for(let n of e)this.lines+=n.lines}lineInner(e,t,n,i){for(let r=0;;r++){let s=this.children[r],o=i+s.length,a=n+s.lines-1;if((t?a:o)>=e)return s.lineInner(e,t,n,i);i=o+1,n=a+1}}decompose(e,t,n,i){for(let r=0,s=0;s<=t&&r<this.children.length;r++){let o=this.children[r],a=s+o.length;if(e<=a&&t>=s){let r=i&((s<=e?1:0)|(a>=t?2:0));s>=e&&a<=t&&!r?n.push(o):o.decompose(e-s,t-s,n,r)}s=a+1}}replace(e,t,n){if([e,t]=jp(this,e,t),n.lines<this.lines)for(let i=0,r=0;i<this.children.length;i++){let s=this.children[i],o=r+s.length;if(e>=r&&t<=o){let a=s.replace(e-r,t-r,n),l=this.lines-s.lines+a.lines;if(a.lines<l>>4&&a.lines>l>>6){let r=this.children.slice();return r[i]=a,new Ip(r,this.length-(t-e)+n.length)}return super.replace(r,o,a)}r=o+1}return super.replace(e,t,n)}sliceString(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.length,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"\n";[e,t]=jp(this,e,t);let i="";for(let r=0,s=0;r<this.children.length&&s<=t;r++){let o=this.children[r],a=s+o.length;s>e&&r&&(i+=n),e<a&&t>s&&(i+=o.sliceString(e-s,t-s,n)),s=a+1}return i}flatten(e){for(let t of this.children)t.flatten(e)}scanIdentical(e,t){if(!(e instanceof Ip))return 0;let n=0,[i,r,s,o]=t>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;i+=t,r+=t){if(i==s||r==o)return n;let a=this.children[i],l=e.children[r];if(a!=l)return n+a.scanIdentical(l,t);n+=a.length+1}}static from(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.reduce(((e,t)=>e+t.length+1),-1),n=0;for(let d of e)n+=d.lines;if(n<32){let n=[];for(let t of e)t.flatten(n);return new Np(n,t)}let i=Math.max(32,n>>5),r=i<<1,s=i>>1,o=[],a=0,l=-1,c=[];function h(e){let t;if(e.lines>r&&e instanceof Ip)for(let n of e.children)h(n);else e.lines>s&&(a>s||!a)?(u(),o.push(e)):e instanceof Np&&a&&(t=c[c.length-1])instanceof Np&&e.lines+t.lines<=32?(a+=e.lines,l+=e.length+1,c[c.length-1]=new Np(t.text.concat(e.text),t.length+1+e.length)):(a+e.lines>i&&u(),a+=e.lines,l+=e.length+1,c.push(e))}function u(){0!=a&&(o.push(1==c.length?c[0]:Ip.from(c,l)),l=-1,a=c.length=0)}for(let d of e)h(d);return u(),1==o.length?o[0]:new Ip(o,t)}}function Rp(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e9;for(let r=0,s=0,o=!0;s<e.length&&r<=i;s++){let a=e[s],l=r+a.length;l>=n&&(l>i&&(a=a.slice(0,i-r)),r<n&&(a=a.slice(n-r)),o?(t[t.length-1]+=a,o=!1):t.push(a)),r=l+1}return t}function Dp(e,t,n){return Rp(e,[""],t,n)}Pp.empty=new Np([""],0);class Mp{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this.dir=t,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[t>0?1:(e instanceof Np?e.text.length:e.children.length)<<1]}nextInner(e,t){for(this.done=this.lineBreak=!1;;){let n=this.nodes.length-1,i=this.nodes[n],r=this.offsets[n],s=r>>1,o=i instanceof Np?i.text.length:i.children.length;if(s==(t>0?o:0)){if(0==n)return this.done=!0,this.value="",this;t>0&&this.offsets[n-1]++,this.nodes.pop(),this.offsets.pop()}else if((1&r)==(t>0?0:1)){if(this.offsets[n]+=t,0==e)return this.lineBreak=!0,this.value="\n",this;e--}else if(i instanceof Np){let r=i.text[s+(t<0?-1:0)];if(this.offsets[n]+=t,r.length>Math.max(0,e))return this.value=0==e?r:t>0?r.slice(e):r.slice(0,r.length-e),this;e-=r.length}else{let r=i.children[s+(t<0?-1:0)];e>r.length?(e-=r.length,this.offsets[n]+=t):(t<0&&this.offsets[n]--,this.nodes.push(r),this.offsets.push(t>0?1:(r instanceof Np?r.text.length:r.children.length)<<1))}}}next(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}}class Lp{constructor(e,t,n){this.value="",this.done=!1,this.cursor=new Mp(e,t>n?-1:1),this.pos=t>n?e.length:0,this.from=Math.min(t,n),this.to=Math.max(t,n)}nextInner(e,t){if(t<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,t<0?this.pos-this.to:this.from-this.pos);let n=t<0?this.pos-this.from:this.to-this.pos;e>n&&(e=n),n-=e;let{value:i}=this.cursor.next(e);return this.pos+=(i.length+e)*t,this.value=i.length<=n?i:t<0?i.slice(i.length-n):i.slice(0,n),this.done=!this.value,this}next(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&""!=this.value}}class Qp{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,{done:t,lineBreak:n,value:i}=this.inner.next(e);return t&&this.afterBreak?(this.value="",this.afterBreak=!1):t?(this.done=!0,this.value=""):n?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=i,this.afterBreak=!1),this}get lineBreak(){return!1}}"undefined"!=typeof Symbol&&(Pp.prototype[Symbol.iterator]=function(){return this.iter()},Mp.prototype[Symbol.iterator]=Lp.prototype[Symbol.iterator]=Qp.prototype[Symbol.iterator]=function(){return this});class zp{constructor(e,t,n,i){this.from=e,this.to=t,this.number=n,this.text=i}get length(){return this.to-this.from}}function jp(e,t,n){return[t=Math.max(0,Math.min(e.length,t)),Math.max(t,Math.min(e.length,n))]}let Up="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map((e=>e?parseInt(e,36):1));for(let Sk=1;Sk<Up.length;Sk++)Up[Sk]+=Up[Sk-1];function Vp(e){for(let t=1;t<Up.length;t+=2)if(Up[t]>e)return Up[t-1]<=e;return!1}function Fp(e){return e>=127462&&e<=127487}const qp=8205;function Bp(e,t){return(!(arguments.length>2&&void 0!==arguments[2])||arguments[2]?Wp:Hp)(e,t,!(arguments.length>3&&void 0!==arguments[3])||arguments[3])}function Wp(e,t,n){if(t==e.length)return t;t&&$p(e.charCodeAt(t))&&Xp(e.charCodeAt(t-1))&&t--;let i=Gp(e,t);for(t+=Yp(i);t<e.length;){let r=Gp(e,t);if(i==qp||r==qp||n&&Vp(r))t+=Yp(r),i=r;else{if(!Fp(r))break;{let n=0,i=t-2;for(;i>=0&&Fp(Gp(e,i));)n++,i-=2;if(n%2==0)break;t+=2}}}return t}function Hp(e,t,n){for(;t>0;){let i=Wp(e,t-2,n);if(i<t)return i;t--}return 0}function $p(e){return e>=56320&&e<57344}function Xp(e){return e>=55296&&e<56320}function Gp(e,t){let n=e.charCodeAt(t);if(!Xp(n)||t+1==e.length)return n;let i=e.charCodeAt(t+1);return $p(i)?i-56320+(n-55296<<10)+65536:n}function Kp(e){return e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode(55296+(e>>10),56320+(1023&e)))}function Yp(e){return e<65536?1:2}const Jp=/\r\n?|\n/;var Zp=function(e){return e[e.Simple=0]="Simple",e[e.TrackDel=1]="TrackDel",e[e.TrackBefore=2]="TrackBefore",e[e.TrackAfter=3]="TrackAfter",e}(Zp||(Zp={}));class eg{constructor(e){this.sections=e}get length(){let e=0;for(let t=0;t<this.sections.length;t+=2)e+=this.sections[t];return e}get newLength(){let e=0;for(let t=0;t<this.sections.length;t+=2){let n=this.sections[t+1];e+=n<0?this.sections[t]:n}return e}get empty(){return 0==this.sections.length||2==this.sections.length&&this.sections[1]<0}iterGaps(e){for(let t=0,n=0,i=0;t<this.sections.length;){let r=this.sections[t++],s=this.sections[t++];s<0?(e(n,i,r),i+=r):i+=s,n+=r}}iterChangedRanges(e){rg(this,e,arguments.length>1&&void 0!==arguments[1]&&arguments[1])}get invertedDesc(){let e=[];for(let t=0;t<this.sections.length;){let n=this.sections[t++],i=this.sections[t++];i<0?e.push(n,i):e.push(i,n)}return new eg(e)}composeDesc(e){return this.empty?e:e.empty?this:og(this,e)}mapDesc(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e.empty?this:sg(this,e,t)}mapPos(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Zp.Simple,i=0,r=0;for(let s=0;s<this.sections.length;){let o=this.sections[s++],a=this.sections[s++],l=i+o;if(a<0){if(l>e)return r+(e-i);r+=o}else{if(n!=Zp.Simple&&l>=e&&(n==Zp.TrackDel&&i<e&&l>e||n==Zp.TrackBefore&&i<e||n==Zp.TrackAfter&&l>e))return null;if(l>e||l==e&&t<0&&!o)return e==i||t<0?r:r+a;r+=a}i=l}if(e>i)throw new RangeError("Position ".concat(e," is out of range for changeset of length ").concat(i));return r}touchesRange(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e;for(let n=0,i=0;n<this.sections.length&&i<=t;){let r=i+this.sections[n++];if(this.sections[n++]>=0&&i<=t&&r>=e)return!(i<e&&r>t)||"cover";i=r}return!1}toString(){let e="";for(let t=0;t<this.sections.length;){let n=this.sections[t++],i=this.sections[t++];e+=(e?" ":"")+n+(i>=0?":"+i:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some((e=>"number"!=typeof e)))throw new RangeError("Invalid JSON representation of ChangeDesc");return new eg(e)}static create(e){return new eg(e)}}class tg extends eg{constructor(e,t){super(e),this.inserted=t}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return rg(this,((t,n,i,r,s)=>e=e.replace(i,i+(n-t),s)),!1),e}mapDesc(e){return sg(this,e,arguments.length>1&&void 0!==arguments[1]&&arguments[1],!0)}invert(e){let t=this.sections.slice(),n=[];for(let i=0,r=0;i<t.length;i+=2){let s=t[i],o=t[i+1];if(o>=0){t[i]=o,t[i+1]=s;let a=i>>1;for(;n.length<a;)n.push(Pp.empty);n.push(s?e.slice(r,r+s):Pp.empty)}r+=s}return new tg(t,n)}compose(e){return this.empty?e:e.empty?this:og(this,e,!0)}map(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e.empty?this:sg(this,e,t,!0)}iterChanges(e){rg(this,e,arguments.length>1&&void 0!==arguments[1]&&arguments[1])}get desc(){return eg.create(this.sections)}filter(e){let t=[],n=[],i=[],r=new ag(this);e:for(let s=0,o=0;;){let a=s==e.length?1e9:e[s++];for(;o<a||o==a&&0==r.len;){if(r.done)break e;let e=Math.min(r.len,a-o);ng(i,e,-1);let s=-1==r.ins?-1:0==r.off?r.ins:0;ng(t,e,s),s>0&&ig(n,t,r.text),r.forward(e),o+=e}let l=e[s++];for(;o<l;){if(r.done)break e;let e=Math.min(r.len,l-o);ng(t,e,-1),ng(i,e,-1==r.ins?-1:0==r.off?r.ins:0),r.forward(e),o+=e}}return{changes:new tg(t,n),filtered:eg.create(i)}}toJSON(){let e=[];for(let t=0;t<this.sections.length;t+=2){let n=this.sections[t],i=this.sections[t+1];i<0?e.push(n):0==i?e.push([n]):e.push([n].concat(this.inserted[t>>1].toJSON()))}return e}static of(e,t,n){let i=[],r=[],s=0,o=null;function a(){if(!(arguments.length>0&&void 0!==arguments[0]&&arguments[0])&&!i.length)return;s<t&&ng(i,t-s,-1);let e=new tg(i,r);o=o?o.compose(e.map(o)):e,i=[],r=[],s=0}return function e(l){if(Array.isArray(l))for(let t of l)e(t);else if(l instanceof tg){if(l.length!=t)throw new RangeError("Mismatched change set length (got ".concat(l.length,", expected ").concat(t,")"));a(),o=o?o.compose(l.map(o)):l}else{let{from:e,to:o=e,insert:c}=l;if(e>o||e<0||o>t)throw new RangeError("Invalid change range ".concat(e," to ").concat(o," (in doc of length ").concat(t,")"));let h=c?"string"==typeof c?Pp.of(c.split(n||Jp)):c:Pp.empty,u=h.length;if(e==o&&0==u)return;e<s&&a(),e>s&&ng(i,e-s,-1),ng(i,o-e,u),ig(r,i,h),s=o}}(e),a(!o),o}static empty(e){return new tg(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let t=[],n=[];for(let i=0;i<e.length;i++){let r=e[i];if("number"==typeof r)t.push(r,-1);else{if(!Array.isArray(r)||"number"!=typeof r[0]||r.some(((e,t)=>t&&"string"!=typeof e)))throw new RangeError("Invalid JSON representation of ChangeSet");if(1==r.length)t.push(r[0],0);else{for(;n.length<i;)n.push(Pp.empty);n[i]=Pp.of(r.slice(1)),t.push(r[0],n[i].length)}}}return new tg(t,n)}static createSet(e,t){return new tg(e,t)}}function ng(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(0==t&&n<=0)return;let r=e.length-2;r>=0&&n<=0&&n==e[r+1]?e[r]+=t:0==t&&0==e[r]?e[r+1]+=n:i?(e[r]+=t,e[r+1]+=n):e.push(t,n)}function ig(e,t,n){if(0==n.length)return;let i=t.length-2>>1;if(i<e.length)e[e.length-1]=e[e.length-1].append(n);else{for(;e.length<i;)e.push(Pp.empty);e.push(n)}}function rg(e,t,n){let i=e.inserted;for(let r=0,s=0,o=0;o<e.sections.length;){let a=e.sections[o++],l=e.sections[o++];if(l<0)r+=a,s+=a;else{let c=r,h=s,u=Pp.empty;for(;c+=a,h+=l,l&&i&&(u=u.append(i[o-2>>1])),!(n||o==e.sections.length||e.sections[o+1]<0);)a=e.sections[o++],l=e.sections[o++];t(r,c,s,h,u),r=c,s=h}}}function sg(e,t,n){let i=[],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3]?[]:null,s=new ag(e),o=new ag(t);for(let a=-1;;)if(-1==s.ins&&-1==o.ins){let e=Math.min(s.len,o.len);ng(i,e,-1),s.forward(e),o.forward(e)}else if(o.ins>=0&&(s.ins<0||a==s.i||0==s.off&&(o.len<s.len||o.len==s.len&&!n))){let e=o.len;for(ng(i,o.ins,-1);e;){let t=Math.min(s.len,e);s.ins>=0&&a<s.i&&s.len<=t&&(ng(i,0,s.ins),r&&ig(r,i,s.text),a=s.i),s.forward(t),e-=t}o.next()}else{if(!(s.ins>=0)){if(s.done&&o.done)return r?tg.createSet(i,r):eg.create(i);throw new Error("Mismatched change set lengths")}{let e=0,t=s.len;for(;t;)if(-1==o.ins){let n=Math.min(t,o.len);e+=n,t-=n,o.forward(n)}else{if(!(0==o.ins&&o.len<t))break;t-=o.len,o.next()}ng(i,e,a<s.i?s.ins:0),r&&a<s.i&&ig(r,i,s.text),a=s.i,s.forward(s.len-t)}}}function og(e,t){let n=[],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2]?[]:null,r=new ag(e),s=new ag(t);for(let o=!1;;){if(r.done&&s.done)return i?tg.createSet(n,i):eg.create(n);if(0==r.ins)ng(n,r.len,0,o),r.next();else if(0!=s.len||s.done){if(r.done||s.done)throw new Error("Mismatched change set lengths");{let e=Math.min(r.len2,s.len),t=n.length;if(-1==r.ins){let t=-1==s.ins?-1:s.off?0:s.ins;ng(n,e,t,o),i&&t&&ig(i,n,s.text)}else-1==s.ins?(ng(n,r.off?0:r.len,e,o),i&&ig(i,n,r.textBit(e))):(ng(n,r.off?0:r.len,s.off?0:s.ins,o),i&&!s.off&&ig(i,n,s.text));o=(r.ins>e||s.ins>=0&&s.len>e)&&(o||n.length>t),r.forward2(e),s.forward(e)}}else ng(n,0,s.ins,o),i&&ig(i,n,s.text),s.next()}}class ag{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return-2==this.ins}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,t=this.i-2>>1;return t>=e.length?Pp.empty:e[t]}textBit(e){let{inserted:t}=this.set,n=this.i-2>>1;return n>=t.length&&!e?Pp.empty:t[n].slice(this.off,null==e?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){-1==this.ins?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}}class lg{constructor(e,t,n){this.from=e,this.to=t,this.flags=n}get anchor(){return 32&this.flags?this.to:this.from}get head(){return 32&this.flags?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return 8&this.flags?-1:16&this.flags?1:0}get bidiLevel(){let e=7&this.flags;return 7==e?null:e}get goalColumn(){let e=this.flags>>6;return 16777215==e?void 0:e}map(e){let t,n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;return this.empty?t=n=e.mapPos(this.from,i):(t=e.mapPos(this.from,1),n=e.mapPos(this.to,-1)),t==this.from&&n==this.to?this:new lg(t,n,this.flags)}extend(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e;if(e<=this.anchor&&t>=this.anchor)return cg.range(e,t);let n=Math.abs(e-this.anchor)>Math.abs(t-this.anchor)?e:t;return cg.range(this.anchor,n)}eq(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.anchor==e.anchor&&this.head==e.head&&(!t||!this.empty||this.assoc==e.assoc)}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||"number"!=typeof e.anchor||"number"!=typeof e.head)throw new RangeError("Invalid JSON representation for SelectionRange");return cg.range(e.anchor,e.head)}static create(e,t,n){return new lg(e,t,n)}}class cg{constructor(e,t){this.ranges=e,this.mainIndex=t}map(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;return e.empty?this:cg.create(this.ranges.map((n=>n.map(e,t))),this.mainIndex)}eq(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let n=0;n<this.ranges.length;n++)if(!this.ranges[n].eq(e.ranges[n],t))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return 1==this.ranges.length?this:new cg([this.main],0)}addRange(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return cg.create([e].concat(this.ranges),t?0:this.mainIndex+1)}replaceRange(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.mainIndex,n=this.ranges.slice();return n[t]=e,cg.create(n,this.mainIndex)}toJSON(){return{ranges:this.ranges.map((e=>e.toJSON())),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||"number"!=typeof e.main||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new cg(e.ranges.map((e=>lg.fromJSON(e))),e.main)}static single(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e;return new cg([cg.range(e,t)],0)}static create(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(0==e.length)throw new RangeError("A selection needs at least one range");for(let n=0,i=0;i<e.length;i++){let r=e[i];if(r.empty?r.from<=n:r.from<n)return cg.normalized(e.slice(),t);n=r.to}return new cg(e,t)}static cursor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0;return lg.create(e,e,(0==t?0:t<0?8:16)|(null==n?7:Math.min(6,n))|(null!==i&&void 0!==i?i:16777215)<<6)}static range(e,t,n,i){let r=(null!==n&&void 0!==n?n:16777215)<<6|(null==i?7:Math.min(6,i));return t<e?lg.create(t,e,48|r):lg.create(e,t,(t>e?8:0)|r)}static normalized(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=e[t];e.sort(((e,t)=>e.from-t.from)),t=e.indexOf(n);for(let i=1;i<e.length;i++){let n=e[i],r=e[i-1];if(n.empty?n.from<=r.to:n.from<r.to){let s=r.from,o=Math.max(n.to,r.to);i<=t&&t--,e.splice(--i,2,n.anchor>n.head?cg.range(o,s):cg.range(s,o))}}return new cg(e,t)}}function hg(e,t){for(let n of e.ranges)if(n.to>t)throw new RangeError("Selection points outside of document")}let ug=0;class dg{constructor(e,t,n,i,r){this.combine=e,this.compareInput=t,this.compare=n,this.isStatic=i,this.id=ug++,this.default=e([]),this.extensions="function"==typeof r?r(this):r}get reader(){return this}static define(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new dg(e.combine||(e=>e),e.compareInput||((e,t)=>e===t),e.compare||(e.combine?(e,t)=>e===t:fg),!!e.static,e.enables)}of(e){return new pg([],this,0,e)}compute(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new pg(e,this,1,t)}computeN(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new pg(e,this,2,t)}from(e,t){return t||(t=e=>e),this.compute([e],(n=>t(n.field(e))))}}function fg(e,t){return e==t||e.length==t.length&&e.every(((e,n)=>e===t[n]))}class pg{constructor(e,t,n,i){this.dependencies=e,this.facet=t,this.type=n,this.value=i,this.id=ug++}dynamicSlot(e){var t;let n=this.value,i=this.facet.compareInput,r=this.id,s=e[r]>>1,o=2==this.type,a=!1,l=!1,c=[];for(let h of this.dependencies)"doc"==h?a=!0:"selection"==h?l=!0:0==(1&(null!==(t=e[h.id])&&void 0!==t?t:1))&&c.push(e[h.id]);return{create:e=>(e.values[s]=n(e),1),update(e,t){if(a&&t.docChanged||l&&(t.docChanged||t.selection)||mg(e,c)){let t=n(e);if(o?!gg(t,e.values[s],i):!i(t,e.values[s]))return e.values[s]=t,1}return 0},reconfigure:(e,t)=>{let a,l=t.config.address[r];if(null!=l){let r=Ng(t,l);if(this.dependencies.every((n=>n instanceof dg?t.facet(n)===e.facet(n):!(n instanceof wg)||t.field(n,!1)==e.field(n,!1)))||(o?gg(a=n(e),r,i):i(a=n(e),r)))return e.values[s]=r,0}else a=n(e);return e.values[s]=a,1}}}}function gg(e,t,n){if(e.length!=t.length)return!1;for(let i=0;i<e.length;i++)if(!n(e[i],t[i]))return!1;return!0}function mg(e,t){let n=!1;for(let i of t)1&Pg(e,i)&&(n=!0);return n}function vg(e,t,n){let i=n.map((t=>e[t.id])),r=n.map((e=>e.type)),s=i.filter((e=>!(1&e))),o=e[t.id]>>1;function a(e){let n=[];for(let t=0;t<i.length;t++){let s=Ng(e,i[t]);if(2==r[t])for(let e of s)n.push(e);else n.push(s)}return t.combine(n)}return{create(e){for(let t of i)Pg(e,t);return e.values[o]=a(e),1},update(e,n){if(!mg(e,s))return 0;let i=a(e);return t.compare(i,e.values[o])?0:(e.values[o]=i,1)},reconfigure(e,r){let s=mg(e,i),l=r.config.facets[t.id],c=r.facet(t);if(l&&!s&&fg(n,l))return e.values[o]=c,0;let h=a(e);return t.compare(h,c)?(e.values[o]=c,0):(e.values[o]=h,1)}}}const yg=dg.define({static:!0});class wg{constructor(e,t,n,i,r){this.id=e,this.createF=t,this.updateF=n,this.compareF=i,this.spec=r,this.provides=void 0}static define(e){let t=new wg(ug++,e.create,e.update,e.compare||((e,t)=>e===t),e);return e.provide&&(t.provides=e.provide(t)),t}create(e){let t=e.facet(yg).find((e=>e.field==this));return((null===t||void 0===t?void 0:t.create)||this.createF)(e)}slot(e){let t=e[this.id]>>1;return{create:e=>(e.values[t]=this.create(e),1),update:(e,n)=>{let i=e.values[t],r=this.updateF(i,n);return this.compareF(i,r)?0:(e.values[t]=r,1)},reconfigure:(e,n)=>null!=n.config.address[this.id]?(e.values[t]=n.field(this),0):(e.values[t]=this.create(e),1)}}init(e){return[this,yg.of({field:this,create:e})]}get extension(){return this}}const bg=4,Og=3,kg=2,Sg=1;function xg(e){return t=>new Cg(t,e)}const Tg={highest:xg(0),high:xg(Sg),default:xg(kg),low:xg(Og),lowest:xg(bg)};class Cg{constructor(e,t){this.inner=e,this.prec=t}}class Eg{of(e){return new _g(this,e)}reconfigure(e){return Eg.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}}class _g{constructor(e,t){this.compartment=e,this.inner=t}}class Ag{constructor(e,t,n,i,r,s){for(this.base=e,this.compartments=t,this.dynamicSlots=n,this.address=i,this.staticValues=r,this.facets=s,this.statusTemplate=[];this.statusTemplate.length<n.length;)this.statusTemplate.push(0)}staticFacet(e){let t=this.address[e.id];return null==t?e.default:this.staticValues[t>>1]}static resolve(e,t,n){let i=[],r=Object.create(null),s=new Map;for(let u of function(e,t,n){let i=[[],[],[],[],[]],r=new Map;function s(e,o){let a=r.get(e);if(null!=a){if(a<=o)return;let t=i[a].indexOf(e);t>-1&&i[a].splice(t,1),e instanceof _g&&n.delete(e.compartment)}if(r.set(e,o),Array.isArray(e))for(let t of e)s(t,o);else if(e instanceof _g){if(n.has(e.compartment))throw new RangeError("Duplicate use of compartment in extensions");let i=t.get(e.compartment)||e.inner;n.set(e.compartment,i),s(i,o)}else if(e instanceof Cg)s(e.inner,e.prec);else if(e instanceof wg)i[o].push(e),e.provides&&s(e.provides,o);else if(e instanceof pg)i[o].push(e),e.facet.extensions&&s(e.facet.extensions,kg);else{let t=e.extension;if(!t)throw new Error("Unrecognized extension value in extension set (".concat(e,"). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks."));s(t,o)}}return s(e,kg),i.reduce(((e,t)=>e.concat(t)))}(e,t,s))u instanceof wg?i.push(u):(r[u.facet.id]||(r[u.facet.id]=[])).push(u);let o=Object.create(null),a=[],l=[];for(let u of i)o[u.id]=l.length<<1,l.push((e=>u.slot(e)));let c=null===n||void 0===n?void 0:n.config.facets;for(let u in r){let e=r[u],t=e[0].facet,i=c&&c[u]||[];if(e.every((e=>0==e.type)))if(o[t.id]=a.length<<1|1,fg(i,e))a.push(n.facet(t));else{let i=t.combine(e.map((e=>e.value)));a.push(n&&t.compare(i,n.facet(t))?n.facet(t):i)}else{for(let t of e)0==t.type?(o[t.id]=a.length<<1|1,a.push(t.value)):(o[t.id]=l.length<<1,l.push((e=>t.dynamicSlot(e))));o[t.id]=l.length<<1,l.push((n=>vg(n,t,e)))}}let h=l.map((e=>e(o)));return new Ag(e,s,h,o,a,r)}}function Pg(e,t){if(1&t)return 2;let n=t>>1,i=e.status[n];if(4==i)throw new Error("Cyclic dependency between fields and/or facets");if(2&i)return i;e.status[n]=4;let r=e.computeSlot(e,e.config.dynamicSlots[n]);return e.status[n]=2|r}function Ng(e,t){return 1&t?e.config.staticValues[t>>1]:e.values[t>>1]}const Ig=dg.define(),Rg=dg.define({combine:e=>e.some((e=>e)),static:!0}),Dg=dg.define({combine:e=>e.length?e[0]:void 0,static:!0}),Mg=dg.define(),Lg=dg.define(),Qg=dg.define(),zg=dg.define({combine:e=>!!e.length&&e[0]});class jg{constructor(e,t){this.type=e,this.value=t}static define(){return new Ug}}class Ug{of(e){return new jg(this,e)}}class Vg{constructor(e){this.map=e}of(e){return new Fg(this,e)}}class Fg{constructor(e,t){this.type=e,this.value=t}map(e){let t=this.type.map(this.value,e);return void 0===t?void 0:t==this.value?this:new Fg(this.type,t)}is(e){return this.type==e}static define(){return new Vg((arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).map||(e=>e))}static mapEffects(e,t){if(!e.length)return e;let n=[];for(let i of e){let e=i.map(t);e&&n.push(e)}return n}}Fg.reconfigure=Fg.define(),Fg.appendConfig=Fg.define();class qg{constructor(e,t,n,i,r,s){this.startState=e,this.changes=t,this.selection=n,this.effects=i,this.annotations=r,this.scrollIntoView=s,this._doc=null,this._state=null,n&&hg(n,t.newLength),r.some((e=>e.type==qg.time))||(this.annotations=r.concat(qg.time.of(Date.now())))}static create(e,t,n,i,r,s){return new qg(e,t,n,i,r,s)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let t of this.annotations)if(t.type==e)return t.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let t=this.annotation(qg.userEvent);return!(!t||!(t==e||t.length>e.length&&t.slice(0,e.length)==e&&"."==t[e.length]))}}function Bg(e,t){let n=[];for(let i=0,r=0;;){let s,o;if(i<e.length&&(r==t.length||t[r]>=e[i]))s=e[i++],o=e[i++];else{if(!(r<t.length))return n;s=t[r++],o=t[r++]}!n.length||n[n.length-1]<s?n.push(s,o):n[n.length-1]<o&&(n[n.length-1]=o)}}function Wg(e,t,n){var i;let r,s,o;return n?(r=t.changes,s=tg.empty(t.changes.length),o=e.changes.compose(t.changes)):(r=t.changes.map(e.changes),s=e.changes.mapDesc(t.changes,!0),o=e.changes.compose(r)),{changes:o,selection:t.selection?t.selection.map(s):null===(i=e.selection)||void 0===i?void 0:i.map(r),effects:Fg.mapEffects(e.effects,r).concat(Fg.mapEffects(t.effects,s)),annotations:e.annotations.length?e.annotations.concat(t.annotations):t.annotations,scrollIntoView:e.scrollIntoView||t.scrollIntoView}}function Hg(e,t,n){let i=t.selection,r=Gg(t.annotations);return t.userEvent&&(r=r.concat(qg.userEvent.of(t.userEvent))),{changes:t.changes instanceof tg?t.changes:tg.of(t.changes||[],n,e.facet(Dg)),selection:i&&(i instanceof cg?i:cg.single(i.anchor,i.head)),effects:Gg(t.effects),annotations:r,scrollIntoView:!!t.scrollIntoView}}function $g(e,t,n){let i=Hg(e,t.length?t[0]:{},e.doc.length);t.length&&!1===t[0].filter&&(n=!1);for(let s=1;s<t.length;s++){!1===t[s].filter&&(n=!1);let r=!!t[s].sequential;i=Wg(i,Hg(e,t[s],r?i.changes.newLength:e.doc.length),r)}let r=qg.create(e,i.changes,i.selection,i.effects,i.annotations,i.scrollIntoView);return function(e){let t=e.startState,n=t.facet(Qg),i=e;for(let r=n.length-1;r>=0;r--){let s=n[r](e);s&&Object.keys(s).length&&(i=Wg(i,Hg(t,s,e.changes.newLength),!0))}return i==e?e:qg.create(t,e.changes,e.selection,i.effects,i.annotations,i.scrollIntoView)}(n?function(e){let t=e.startState,n=!0;for(let r of t.facet(Mg)){let t=r(e);if(!1===t){n=!1;break}Array.isArray(t)&&(n=!0===n?t:Bg(n,t))}if(!0!==n){let i,r;if(!1===n)r=e.changes.invertedDesc,i=tg.empty(t.doc.length);else{let t=e.changes.filter(n);i=t.changes,r=t.filtered.mapDesc(t.changes).invertedDesc}e=qg.create(t,i,e.selection&&e.selection.map(r),Fg.mapEffects(e.effects,r),e.annotations,e.scrollIntoView)}let i=t.facet(Lg);for(let r=i.length-1;r>=0;r--){let n=i[r](e);e=n instanceof qg?n:Array.isArray(n)&&1==n.length&&n[0]instanceof qg?n[0]:$g(t,Gg(n),!1)}return e}(r):r)}qg.time=jg.define(),qg.userEvent=jg.define(),qg.addToHistory=jg.define(),qg.remote=jg.define();const Xg=[];function Gg(e){return null==e?Xg:Array.isArray(e)?e:[e]}var Kg=function(e){return e[e.Word=0]="Word",e[e.Space=1]="Space",e[e.Other=2]="Other",e}(Kg||(Kg={}));const Yg=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let Jg;try{Jg=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch(Sj){}function Zg(e){return t=>{if(!/\S/.test(t))return Kg.Space;if(function(e){if(Jg)return Jg.test(e);for(let t=0;t<e.length;t++){let n=e[t];if(/\w/.test(n)||n>"\x80"&&(n.toUpperCase()!=n.toLowerCase()||Yg.test(n)))return!0}return!1}(t))return Kg.Word;for(let n=0;n<e.length;n++)if(t.indexOf(e[n])>-1)return Kg.Word;return Kg.Other}}class em{constructor(e,t,n,i,r,s){this.config=e,this.doc=t,this.selection=n,this.values=i,this.status=e.statusTemplate.slice(),this.computeSlot=r,s&&(s._state=this);for(let o=0;o<this.config.dynamicSlots.length;o++)Pg(this,o<<1);this.computeSlot=null}field(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this.config.address[e.id];if(null!=n)return Pg(this,n),Ng(this,n);if(t)throw new RangeError("Field is not present in this state")}update(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return $g(this,t,!0)}applyTransaction(e){let t,n=this.config,{base:i,compartments:r}=n;for(let o of e.effects)o.is(Eg.reconfigure)?(n&&(r=new Map,n.compartments.forEach(((e,t)=>r.set(t,e))),n=null),r.set(o.value.compartment,o.value.extension)):o.is(Fg.reconfigure)?(n=null,i=o.value):o.is(Fg.appendConfig)&&(n=null,i=Gg(i).concat(o.value));if(n)t=e.startState.values.slice();else{n=Ag.resolve(i,r,this),t=new em(n,this.doc,this.selection,n.dynamicSlots.map((()=>null)),((e,t)=>t.reconfigure(e,this)),null).values}let s=e.startState.facet(Rg)?e.newSelection:e.newSelection.asSingle();new em(n,e.newDoc,s,t,((t,n)=>n.update(t,e)),e)}replaceSelection(e){return"string"==typeof e&&(e=this.toText(e)),this.changeByRange((t=>({changes:{from:t.from,to:t.to,insert:e},range:cg.cursor(t.from+e.length)})))}changeByRange(e){let t=this.selection,n=e(t.ranges[0]),i=this.changes(n.changes),r=[n.range],s=Gg(n.effects);for(let o=1;o<t.ranges.length;o++){let n=e(t.ranges[o]),a=this.changes(n.changes),l=a.map(i);for(let e=0;e<o;e++)r[e]=r[e].map(l);let c=i.mapDesc(a,!0);r.push(n.range.map(c)),i=i.compose(l),s=Fg.mapEffects(s,l).concat(Fg.mapEffects(Gg(n.effects),c))}return{changes:i,selection:cg.create(r,t.mainIndex),effects:s}}changes(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e instanceof tg?e:tg.of(e,this.doc.length,this.facet(em.lineSeparator))}toText(e){return Pp.of(e.split(this.facet(em.lineSeparator)||Jp))}sliceDoc(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.doc.length;return this.doc.sliceString(e,t,this.lineBreak)}facet(e){let t=this.config.address[e.id];return null==t?e.default:(Pg(this,t),Ng(this,t))}toJSON(e){let t={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let n in e){let i=e[n];i instanceof wg&&null!=this.config.address[i.id]&&(t[n]=i.spec.toJSON(this.field(e[n]),this))}return t}static fromJSON(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;if(!e||"string"!=typeof e.doc)throw new RangeError("Invalid JSON representation for EditorState");let i=[];if(n)for(let r in n)if(Object.prototype.hasOwnProperty.call(e,r)){let t=n[r],s=e[r];i.push(t.init((e=>t.spec.fromJSON(s,e))))}return em.create({doc:e.doc,selection:cg.fromJSON(e.selection),extensions:t.extensions?i.concat([t.extensions]):i})}static create(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Ag.resolve(e.extensions||[],new Map),n=e.doc instanceof Pp?e.doc:Pp.of((e.doc||"").split(t.staticFacet(em.lineSeparator)||Jp)),i=e.selection?e.selection instanceof cg?e.selection:cg.single(e.selection.anchor,e.selection.head):cg.single(0);return hg(i,n.length),t.staticFacet(Rg)||(i=i.asSingle()),new em(t,n,i,t.dynamicSlots.map((()=>null)),((e,t)=>t.create(e)),null)}get tabSize(){return this.facet(em.tabSize)}get lineBreak(){return this.facet(em.lineSeparator)||"\n"}get readOnly(){return this.facet(zg)}phrase(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];for(let r of this.facet(em.phrases))if(Object.prototype.hasOwnProperty.call(r,e)){e=r[e];break}return n.length&&(e=e.replace(/\$(\$|\d*)/g,((e,t)=>{if("$"==t)return"$";let i=+(t||1);return!i||i>n.length?e:n[i-1]}))),e}languageDataAt(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1,i=[];for(let r of this.facet(Ig))for(let s of r(this,t,n))Object.prototype.hasOwnProperty.call(s,e)&&i.push(s[e]);return i}charCategorizer(e){return Zg(this.languageDataAt("wordChars",e).join(""))}wordAt(e){let{text:t,from:n,length:i}=this.doc.lineAt(e),r=this.charCategorizer(e),s=e-n,o=e-n;for(;s>0;){let e=Bp(t,s,!1);if(r(t.slice(e,s))!=Kg.Word)break;s=e}for(;o<i;){let e=Bp(t,o);if(r(t.slice(o,e))!=Kg.Word)break;o=e}return s==o?null:cg.range(s+n,o+n)}}function tm(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i={};for(let r of e)for(let e of Object.keys(r)){let t=r[e],s=i[e];if(void 0===s)i[e]=t;else if(s===t||void 0===t);else{if(!Object.hasOwnProperty.call(n,e))throw new Error("Config merge conflict for field "+e);i[e]=n[e](s,t)}}for(let r in t)void 0===i[r]&&(i[r]=t[r]);return i}em.allowMultipleSelections=Rg,em.tabSize=dg.define({combine:e=>e.length?e[0]:4}),em.lineSeparator=Dg,em.readOnly=zg,em.phrases=dg.define({compare(e,t){let n=Object.keys(e),i=Object.keys(t);return n.length==i.length&&n.every((n=>e[n]==t[n]))}}),em.languageData=Ig,em.changeFilter=Mg,em.transactionFilter=Lg,em.transactionExtender=Qg,Eg.reconfigure=Fg.define();class nm{eq(e){return this==e}range(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e;return im.create(e,t,this)}}nm.prototype.startSide=nm.prototype.endSide=0,nm.prototype.point=!1,nm.prototype.mapMode=Zp.TrackDel;class im{constructor(e,t,n){this.from=e,this.to=t,this.value=n}static create(e,t,n){return new im(e,t,n)}}function rm(e,t){return e.from-t.from||e.value.startSide-t.value.startSide}class sm{constructor(e,t,n,i){this.from=e,this.to=t,this.value=n,this.maxPoint=i}get length(){return this.to[this.to.length-1]}findIndex(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=n?this.to:this.from;for(let s=i,o=r.length;;){if(s==o)return s;let i=s+o>>1,a=r[i]-e||(n?this.value[i].endSide:this.value[i].startSide)-t;if(i==s)return a>=0?s:o;a>=0?o=i:s=i+1}}between(e,t,n,i){for(let r=this.findIndex(t,-1e9,!0),s=this.findIndex(n,1e9,!1,r);r<s;r++)if(!1===i(this.from[r]+e,this.to[r]+e,this.value[r]))return!1}map(e,t){let n=[],i=[],r=[],s=-1,o=-1;for(let a=0;a<this.value.length;a++){let l,c,h=this.value[a],u=this.from[a]+e,d=this.to[a]+e;if(u==d){let e=t.mapPos(u,h.startSide,h.mapMode);if(null==e)continue;if(l=c=e,h.startSide!=h.endSide&&(c=t.mapPos(u,h.endSide),c<l))continue}else if(l=t.mapPos(u,h.startSide),c=t.mapPos(d,h.endSide),l>c||l==c&&h.startSide>0&&h.endSide<=0)continue;(c-l||h.endSide-h.startSide)<0||(s<0&&(s=l),h.point&&(o=Math.max(o,c-l)),n.push(h),i.push(l-s),r.push(c-s))}return{mapped:n.length?new sm(i,r,n,o):null,pos:s}}}class om{constructor(e,t,n,i){this.chunkPos=e,this.chunk=t,this.nextLayer=n,this.maxPoint=i}static create(e,t,n,i){return new om(e,t,n,i)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let t of this.chunk)e+=t.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:t=[],sort:n=!1,filterFrom:i=0,filterTo:r=this.length}=e,s=e.filter;if(0==t.length&&!s)return this;if(n&&(t=t.slice().sort(rm)),this.isEmpty)return t.length?om.of(t):this;let o=new cm(this,null,-1).goto(0),a=0,l=[],c=new am;for(;o.value||a<t.length;)if(a<t.length&&(o.from-t[a].from||o.startSide-t[a].value.startSide)>=0){let e=t[a++];c.addInner(e.from,e.to,e.value)||l.push(e)}else 1==o.rangeIndex&&o.chunkIndex<this.chunk.length&&(a==t.length||this.chunkEnd(o.chunkIndex)<t[a].from)&&(!s||i>this.chunkEnd(o.chunkIndex)||r<this.chunkPos[o.chunkIndex])&&c.addChunk(this.chunkPos[o.chunkIndex],this.chunk[o.chunkIndex])?o.nextChunk():((!s||i>o.to||r<o.from||s(o.from,o.to,o.value))&&(c.addInner(o.from,o.to,o.value)||l.push(im.create(o.from,o.to,o.value))),o.next());return c.finishInner(this.nextLayer.isEmpty&&!l.length?om.empty:this.nextLayer.update({add:l,filter:s,filterFrom:i,filterTo:r}))}map(e){if(e.empty||this.isEmpty)return this;let t=[],n=[],i=-1;for(let s=0;s<this.chunk.length;s++){let r=this.chunkPos[s],o=this.chunk[s],a=e.touchesRange(r,r+o.length);if(!1===a)i=Math.max(i,o.maxPoint),t.push(o),n.push(e.mapPos(r));else if(!0===a){let{mapped:s,pos:a}=o.map(r,e);s&&(i=Math.max(i,s.maxPoint),t.push(s),n.push(a))}}let r=this.nextLayer.map(e);return 0==t.length?r:new om(n,t,r||om.empty,i)}between(e,t,n){if(!this.isEmpty){for(let i=0;i<this.chunk.length;i++){let r=this.chunkPos[i],s=this.chunk[i];if(t>=r&&e<=r+s.length&&!1===s.between(r,e-r,t-r,n))return}this.nextLayer.between(e,t,n)}}iter(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return hm.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return hm.from(e).goto(t)}static compare(e,t,n,i){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:-1,s=e.filter((e=>e.maxPoint>0||!e.isEmpty&&e.maxPoint>=r)),o=t.filter((e=>e.maxPoint>0||!e.isEmpty&&e.maxPoint>=r)),a=lm(s,o,n),l=new dm(s,a,r),c=new dm(o,a,r);n.iterGaps(((e,t,n)=>fm(l,e,c,t,n,i))),n.empty&&0==n.length&&fm(l,0,c,0,0,i)}static eq(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3?arguments[3]:void 0;null==i&&(i=999999999);let r=e.filter((e=>!e.isEmpty&&t.indexOf(e)<0)),s=t.filter((t=>!t.isEmpty&&e.indexOf(t)<0));if(r.length!=s.length)return!1;if(!r.length)return!0;let o=lm(r,s),a=new dm(r,o,0).goto(n),l=new dm(s,o,0).goto(n);for(;;){if(a.to!=l.to||!pm(a.active,l.active)||a.point&&(!l.point||!a.point.eq(l.point)))return!1;if(a.to>i)return!0;a.next(),l.next()}}static spans(e,t,n,i){let r=new dm(e,null,arguments.length>4&&void 0!==arguments[4]?arguments[4]:-1).goto(t),s=t,o=r.openStart;for(;;){let e=Math.min(r.to,n);if(r.point){let n=r.activeForPoint(r.to),a=r.pointFrom<t?n.length+1:r.point.startSide<0?n.length:Math.min(n.length,o);i.point(s,e,r.point,n,a,r.pointRank),o=Math.min(r.openEnd(e),n.length)}else e>s&&(i.span(s,e,r.active,o),o=r.openEnd(e));if(r.to>n)return o+(r.point&&r.to>n?1:0);s=r.to,r.next()}}static of(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=new am;for(let i of e instanceof im?[e]:t?function(e){if(e.length>1)for(let t=e[0],n=1;n<e.length;n++){let i=e[n];if(rm(t,i)>0)return e.slice().sort(rm);t=i}return e}(e):e)n.add(i.from,i.to,i.value);return n.finish()}static join(e){if(!e.length)return om.empty;let t=e[e.length-1];for(let n=e.length-2;n>=0;n--)for(let i=e[n];i!=om.empty;i=i.nextLayer)t=new om(i.chunkPos,i.chunk,t,Math.max(i.maxPoint,t.maxPoint));return t}}om.empty=new om([],[],null,-1),om.empty.nextLayer=om.empty;class am{finishChunk(e){this.chunks.push(new sm(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(e,t,n){this.addInner(e,t,n)||(this.nextLayer||(this.nextLayer=new am)).add(e,t,n)}addInner(e,t,n){let i=e-this.lastTo||n.startSide-this.last.endSide;if(i<=0&&(e-this.lastFrom||n.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return!(i<0)&&(250==this.from.length&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(t-this.chunkStart),this.last=n,this.lastFrom=e,this.lastTo=t,this.value.push(n),n.point&&(this.maxPoint=Math.max(this.maxPoint,t-e)),!0)}addChunk(e,t){if((e-this.lastTo||t.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,t.maxPoint),this.chunks.push(t),this.chunkPos.push(e);let n=t.value.length-1;return this.last=t.value[n],this.lastFrom=t.from[n]+e,this.lastTo=t.to[n]+e,!0}finish(){return this.finishInner(om.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),0==this.chunks.length)return e;let t=om.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,t}}function lm(e,t,n){let i=new Map;for(let s of e)for(let e=0;e<s.chunk.length;e++)s.chunk[e].maxPoint<=0&&i.set(s.chunk[e],s.chunkPos[e]);let r=new Set;for(let s of t)for(let e=0;e<s.chunk.length;e++){let t=i.get(s.chunk[e]);null==t||(n?n.mapPos(t):t)!=s.chunkPos[e]||(null===n||void 0===n?void 0:n.touchesRange(t,t+s.chunk[e].length))||r.add(s.chunk[e])}return r}class cm{constructor(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;this.layer=e,this.skip=t,this.minPoint=n,this.rank=i}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1e9;return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,t,!1),this}gotoInner(e,t,n){for(;this.chunkIndex<this.layer.chunk.length;){let t=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(t)||this.layer.chunkEnd(this.chunkIndex)<e||t.maxPoint<this.minPoint))break;this.chunkIndex++,n=!1}if(this.chunkIndex<this.layer.chunk.length){let i=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],t,!0);(!n||this.rangeIndex<i)&&this.setRangeIndex(i)}this.next()}forward(e,t){(this.to-e||this.endSide-t)<0&&this.gotoInner(e,t,!0)}next(){for(;;){if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}{let e=this.layer.chunkPos[this.chunkIndex],t=this.layer.chunk[this.chunkIndex],n=e+t.from[this.rangeIndex];if(this.from=n,this.to=e+t.to[this.rangeIndex],this.value=t.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}}class hm{constructor(e){this.heap=e}static from(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1,i=[];for(let r=0;r<e.length;r++)for(let s=e[r];!s.isEmpty;s=s.nextLayer)s.maxPoint>=n&&i.push(new cm(s,t,n,r));return 1==i.length?i[0]:new hm(i)}get startSide(){return this.value?this.value.startSide:0}goto(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1e9;for(let n of this.heap)n.goto(e,t);for(let n=this.heap.length>>1;n>=0;n--)um(this.heap,n);return this.next(),this}forward(e,t){for(let n of this.heap)n.forward(e,t);for(let n=this.heap.length>>1;n>=0;n--)um(this.heap,n);(this.to-e||this.value.endSide-t)<0&&this.next()}next(){if(0==this.heap.length)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),um(this.heap,0)}}}function um(e,t){for(let n=e[t];;){let i=1+(t<<1);if(i>=e.length)break;let r=e[i];if(i+1<e.length&&r.compare(e[i+1])>=0&&(r=e[i+1],i++),n.compare(r)<0)break;e[i]=n,e[t]=r,t=i}}class dm{constructor(e,t,n){this.minPoint=n,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=hm.from(e,t,n)}goto(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1e9;return this.cursor.goto(e,t),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=t,this.openStart=-1,this.next(),this}forward(e,t){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-t)<0;)this.removeActive(this.minActive);this.cursor.forward(e,t)}removeActive(e){gm(this.active,e),gm(this.activeTo,e),gm(this.activeRank,e),this.minActive=vm(this.active,this.activeTo)}addActive(e){let t=0,{value:n,to:i,rank:r}=this.cursor;for(;t<this.activeRank.length&&(r-this.activeRank[t]||i-this.activeTo[t])>0;)t++;mm(this.active,t,n),mm(this.activeTo,t,i),mm(this.activeRank,t,r),e&&mm(e,t,this.cursor.from),this.minActive=vm(this.active,this.activeTo)}next(){let e=this.to,t=this.point;this.point=null;let n=this.openStart<0?[]:null;for(;;){let i=this.minActive;if(i>-1&&(this.activeTo[i]-this.cursor.from||this.active[i].endSide-this.cursor.startSide)<0){if(this.activeTo[i]>e){this.to=this.activeTo[i],this.endSide=this.active[i].endSide;break}this.removeActive(i),n&&gm(n,i)}else{if(!this.cursor.value){this.to=this.endSide=1e9;break}if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}{let e=this.cursor.value;if(e.point){if(!(t&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)){this.point=e,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=e.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}this.cursor.next()}else this.addActive(n),this.cursor.next()}}}if(n){this.openStart=0;for(let t=n.length-1;t>=0&&n[t]<e;t--)this.openStart++}}activeForPoint(e){if(!this.active.length)return this.active;let t=[];for(let n=this.active.length-1;n>=0&&!(this.activeRank[n]<this.pointRank);n--)(this.activeTo[n]>e||this.activeTo[n]==e&&this.active[n].endSide>=this.point.endSide)&&t.push(this.active[n]);return t.reverse()}openEnd(e){let t=0;for(let n=this.activeTo.length-1;n>=0&&this.activeTo[n]>e;n--)t++;return t}}function fm(e,t,n,i,r,s){e.goto(t),n.goto(i);let o=i+r,a=i,l=i-t;for(;;){let t=e.to+l-n.to||e.endSide-n.endSide,i=t<0?e.to+l:n.to,r=Math.min(i,o);if(e.point||n.point?e.point&&n.point&&(e.point==n.point||e.point.eq(n.point))&&pm(e.activeForPoint(e.to),n.activeForPoint(n.to))||s.comparePoint(a,r,e.point,n.point):r>a&&!pm(e.active,n.active)&&s.compareRange(a,r,e.active,n.active),i>o)break;a=i,t<=0&&e.next(),t>=0&&n.next()}}function pm(e,t){if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!=t[n]&&!e[n].eq(t[n]))return!1;return!0}function gm(e,t){for(let n=t,i=e.length-1;n<i;n++)e[n]=e[n+1];e.pop()}function mm(e,t,n){for(let i=e.length-1;i>=t;i--)e[i+1]=e[i];e[t]=n}function vm(e,t){let n=-1,i=1e9;for(let r=0;r<t.length;r++)(t[r]-i||e[r].endSide-e[n].endSide)<0&&(n=r,i=t[r]);return n}function ym(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.length,i=0;for(let r=0;r<n;)9==e.charCodeAt(r)?(i+=t-i%t,r++):(i++,r=Bp(e,r));return i}function wm(e,t,n,i){for(let r=0,s=0;;){if(s>=t)return r;if(r==e.length)break;s+=9==e.charCodeAt(r)?n-s%n:1,r=Bp(e,r)}return!0===i?-1:e.length}const bm="undefined"==typeof Symbol?"__\u037c":Symbol.for("\u037c"),Om="undefined"==typeof Symbol?"__styleSet"+Math.floor(1e8*Math.random()):Symbol("styleSet"),km="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:{};class Sm{constructor(e,t){this.rules=[];let{finish:n}=t||{};function i(e){return/^@/.test(e)?[e]:e.split(/,\s*/)}function r(e,t,s,o){let a=[],l=/^@(\w+)\b/.exec(e[0]),c=l&&"keyframes"==l[1];if(l&&null==t)return s.push(e[0]+";");for(let n in t){let o=t[n];if(/&/.test(n))r(n.split(/,\s*/).map((t=>e.map((e=>t.replace(/&/,e))))).reduce(((e,t)=>e.concat(t))),o,s);else if(o&&"object"==typeof o){if(!l)throw new RangeError("The value of a property ("+n+") should be a primitive value.");r(i(n),o,a,c)}else null!=o&&a.push(n.replace(/_.*/,"").replace(/[A-Z]/g,(e=>"-"+e.toLowerCase()))+": "+o+";")}(a.length||c)&&s.push((!n||l||o?e:e.map(n)).join(", ")+" {"+a.join(" ")+"}")}for(let s in e)r(i(s),e[s],this.rules)}getRules(){return this.rules.join("\n")}static newName(){let e=km[bm]||1;return km[bm]=e+1,"\u037c"+e.toString(36)}static mount(e,t,n){let i=e[Om],r=n&&n.nonce;i?r&&i.setNonce(r):i=new Tm(e,r),i.mount(Array.isArray(t)?t:[t],e)}}let xm=new Map;class Tm{constructor(e,t){let n=e.ownerDocument||e,i=n.defaultView;if(!e.head&&e.adoptedStyleSheets&&i.CSSStyleSheet){let t=xm.get(n);if(t)return e[Om]=t;this.sheet=new i.CSSStyleSheet,xm.set(n,this)}else this.styleTag=n.createElement("style"),t&&this.styleTag.setAttribute("nonce",t);this.modules=[],e[Om]=this}mount(e,t){let n=this.sheet,i=0,r=0;for(let s=0;s<e.length;s++){let t=e[s],o=this.modules.indexOf(t);if(o<r&&o>-1&&(this.modules.splice(o,1),r--,o=-1),-1==o){if(this.modules.splice(r++,0,t),n)for(let e=0;e<t.rules.length;e++)n.insertRule(t.rules[e],i++)}else{for(;r<o;)i+=this.modules[r++].rules.length;i+=t.rules.length,r++}}if(n)t.adoptedStyleSheets.indexOf(this.sheet)<0&&(t.adoptedStyleSheets=[this.sheet,...t.adoptedStyleSheets]);else{let e="";for(let t=0;t<this.modules.length;t++)e+=this.modules[t].getRules()+"\n";this.styleTag.textContent=e;let n=t.head||t;this.styleTag.parentNode!=n&&n.insertBefore(this.styleTag,n.firstChild)}}setNonce(e){this.styleTag&&this.styleTag.getAttribute("nonce")!=e&&this.styleTag.setAttribute("nonce",e)}}for(var Cm={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Em={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},_m="undefined"!=typeof navigator&&/Mac/.test(navigator.platform),Am="undefined"!=typeof navigator&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),Pm=0;Pm<10;Pm++)Cm[48+Pm]=Cm[96+Pm]=String(Pm);for(Pm=1;Pm<=24;Pm++)Cm[Pm+111]="F"+Pm;for(Pm=65;Pm<=90;Pm++)Cm[Pm]=String.fromCharCode(Pm+32),Em[Pm]=String.fromCharCode(Pm);for(var Nm in Cm)Em.hasOwnProperty(Nm)||(Em[Nm]=Cm[Nm]);function Im(e){let t;return t=11==e.nodeType?e.getSelection?e:e.ownerDocument:e,t.getSelection()}function Rm(e,t){return!!t&&(e==t||e.contains(1!=t.nodeType?t.parentNode:t))}function Dm(e,t){if(!t.anchorNode)return!1;try{return Rm(e,t.anchorNode)}catch(Sj){return!1}}function Mm(e){return 3==e.nodeType?Xm(e,0,e.nodeValue.length).getClientRects():1==e.nodeType?e.getClientRects():[]}function Lm(e,t,n,i){return!!n&&(jm(e,t,n,i,-1)||jm(e,t,n,i,1))}function Qm(e){for(var t=0;;t++)if(!(e=e.previousSibling))return t}function zm(e){return 1==e.nodeType&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(e.nodeName)}function jm(e,t,n,i,r){for(;;){if(e==n&&t==i)return!0;if(t==(r<0?0:Um(e))){if("DIV"==e.nodeName)return!1;let n=e.parentNode;if(!n||1!=n.nodeType)return!1;t=Qm(e)+(r<0?0:1),e=n}else{if(1!=e.nodeType)return!1;if(1==(e=e.childNodes[t+(r<0?-1:0)]).nodeType&&"false"==e.contentEditable)return!1;t=r<0?Um(e):0}}}function Um(e){return 3==e.nodeType?e.nodeValue.length:e.childNodes.length}function Vm(e,t){let n=t?e.left:e.right;return{left:n,right:n,top:e.top,bottom:e.bottom}}function Fm(e){let t=e.visualViewport;return t?{left:0,right:t.width,top:0,bottom:t.height}:{left:0,right:e.innerWidth,top:0,bottom:e.innerHeight}}function qm(e,t){let n=t.width/e.offsetWidth,i=t.height/e.offsetHeight;return(n>.995&&n<1.005||!isFinite(n)||Math.abs(t.width-e.offsetWidth)<1)&&(n=1),(i>.995&&i<1.005||!isFinite(i)||Math.abs(t.height-e.offsetHeight)<1)&&(i=1),{scaleX:n,scaleY:i}}class Bm{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){let{anchorNode:t,focusNode:n}=e;this.set(t,Math.min(e.anchorOffset,t?Um(t):0),n,Math.min(e.focusOffset,n?Um(n):0))}set(e,t,n,i){this.anchorNode=e,this.anchorOffset=t,this.focusNode=n,this.focusOffset=i}}let Wm,Hm=null;function $m(e){if(e.setActive)return e.setActive();if(Hm)return e.focus(Hm);let t=[];for(let n=e;n&&(t.push(n,n.scrollTop,n.scrollLeft),n!=n.ownerDocument);n=n.parentNode);if(e.focus(null==Hm?{get preventScroll(){return Hm={preventScroll:!0},!0}}:void 0),!Hm){Hm=!1;for(let e=0;e<t.length;){let n=t[e++],i=t[e++],r=t[e++];n.scrollTop!=i&&(n.scrollTop=i),n.scrollLeft!=r&&(n.scrollLeft=r)}}}function Xm(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t,i=Wm||(Wm=document.createRange());return i.setEnd(e,n),i.setStart(e,t),i}function Gm(e,t,n,i){let r={key:t,code:t,keyCode:n,which:n,cancelable:!0};i&&({altKey:r.altKey,ctrlKey:r.ctrlKey,shiftKey:r.shiftKey,metaKey:r.metaKey}=i);let s=new KeyboardEvent("keydown",r);s.synthetic=!0,e.dispatchEvent(s);let o=new KeyboardEvent("keyup",r);return o.synthetic=!0,e.dispatchEvent(o),s.defaultPrevented||o.defaultPrevented}function Km(e){for(;e.attributes.length;)e.removeAttributeNode(e.attributes[0])}function Ym(e){return e.scrollTop>Math.max(1,e.scrollHeight-e.clientHeight-4)}function Jm(e,t){for(let n=e,i=t;;){if(3==n.nodeType&&i>0)return{node:n,offset:i};if(1==n.nodeType&&i>0){if("false"==n.contentEditable)return null;n=n.childNodes[i-1],i=Um(n)}else{if(!n.parentNode||zm(n))return null;i=Qm(n),n=n.parentNode}}}function Zm(e,t){for(let n=e,i=t;;){if(3==n.nodeType&&i<n.nodeValue.length)return{node:n,offset:i};if(1==n.nodeType&&i<n.childNodes.length){if("false"==n.contentEditable)return null;n=n.childNodes[i],i=0}else{if(!n.parentNode||zm(n))return null;i=Qm(n)+1,n=n.parentNode}}}class ev{constructor(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];this.node=e,this.offset=t,this.precise=n}static before(e,t){return new ev(e.parentNode,Qm(e),t)}static after(e,t){return new ev(e.parentNode,Qm(e)+1,t)}}const tv=[];class nv{constructor(){this.parent=null,this.dom=null,this.flags=2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e){let t=this.posAtStart;for(let n of this.children){if(n==e)return t;t+=n.length+n.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}sync(e,t){if(2&this.flags){let n,i=this.dom,r=null;for(let s of this.children){if(7&s.flags){if(!s.dom&&(n=r?r.nextSibling:i.firstChild)){let e=nv.get(n);(!e||!e.parent&&e.canReuseDOM(s))&&s.reuseDOM(n)}s.sync(e,t),s.flags&=-8}if(n=r?r.nextSibling:i.firstChild,t&&!t.written&&t.node==i&&n!=s.dom&&(t.written=!0),s.dom.parentNode==i)for(;n&&n!=s.dom;)n=iv(n);else i.insertBefore(s.dom,n);r=s.dom}for(n=r?r.nextSibling:i.firstChild,n&&t&&t.node==i&&(t.written=!0);n;)n=iv(n)}else if(1&this.flags)for(let n of this.children)7&n.flags&&(n.sync(e,t),n.flags&=-8)}reuseDOM(e){}localPosFromDOM(e,t){let n;if(e==this.dom)n=this.dom.childNodes[t];else{let i=0==Um(e)?0:0==t?-1:1;for(;;){let t=e.parentNode;if(t==this.dom)break;0==i&&t.firstChild!=t.lastChild&&(i=e==t.firstChild?-1:1),e=t}n=i<0?e:e.nextSibling}if(n==this.dom.firstChild)return 0;for(;n&&!nv.get(n);)n=n.nextSibling;if(!n)return this.length;for(let i=0,r=0;;i++){let e=this.children[i];if(e.dom==n)return r;r+=e.length+e.breakAfter}}domBoundsAround(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=-1,r=-1,s=-1,o=-1;for(let a=0,l=n,c=n;a<this.children.length;a++){let n=this.children[a],h=l+n.length;if(l<e&&h>t)return n.domBoundsAround(e,t,l);if(h>=e&&-1==i&&(i=a,r=l),l>t&&n.dom.parentNode==this.dom){s=a,o=c;break}c=h,l=h+n.breakAfter}return{from:r,to:o<0?n+this.length:o,startDOM:(i?this.children[i-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:s<this.children.length&&s>=0?this.children[s].dom:null}}markDirty(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.flags|=2,this.markParentsDirty(e)}markParentsDirty(e){for(let t=this.parent;t;t=t.parent){if(e&&(t.flags|=2),1&t.flags)return;t.flags|=1,e=!1}}setParent(e){this.parent!=e&&(this.parent=e,7&this.flags&&this.markParentsDirty(!0))}setDOM(e){this.dom!=e&&(this.dom&&(this.dom.cmView=null),this.dom=e,e.cmView=this)}get rootView(){for(let e=this;;){let t=e.parent;if(!t)return e;e=t}}replaceChildren(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:tv;this.markDirty();for(let i=e;i<t;i++){let e=this.children[i];e.parent==this&&n.indexOf(e)<0&&e.destroy()}this.children.splice(e,t-e,...n);for(let i=0;i<n.length;i++)n[i].setParent(this)}ignoreMutation(e){return!1}ignoreEvent(e){return!1}childCursor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.length;return new rv(this.children,e,this.children.length)}childPos(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return this.childCursor().findPos(e,t)}toString(){let e=this.constructor.name.replace("View","");return e+(this.children.length?"("+this.children.join()+")":this.length?"["+("Text"==e?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(e){return e.cmView}get isEditable(){return!0}get isWidget(){return!1}get isHidden(){return!1}merge(e,t,n,i,r,s){return!1}become(e){return!1}canReuseDOM(e){return e.constructor==this.constructor&&!(8&(this.flags|e.flags))}getSide(){return 0}destroy(){for(let e of this.children)e.parent==this&&e.destroy();this.parent=null}}function iv(e){let t=e.nextSibling;return e.parentNode.removeChild(e),t}nv.prototype.breakAfter=0;class rv{constructor(e,t,n){this.children=e,this.pos=t,this.i=n,this.off=0}findPos(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;for(;;){if(e>this.pos||e==this.pos&&(t>0||0==this.i||this.children[this.i-1].breakAfter))return this.off=e-this.pos,this;let n=this.children[--this.i];this.pos-=n.length+n.breakAfter}}}function sv(e,t,n,i,r,s,o,a,l){let{children:c}=e,h=c.length?c[t]:null,u=s.length?s[s.length-1]:null,d=u?u.breakAfter:o;if(!(t==i&&h&&!o&&!d&&s.length<2&&h.merge(n,r,s.length?u:null,0==n,a,l))){if(i<c.length){let e=c[i];e&&(r<e.length||e.breakAfter&&(null===u||void 0===u?void 0:u.breakAfter))?(t==i&&(e=e.split(r),r=0),!d&&u&&e.merge(0,r,u,!0,0,l)?s[s.length-1]=e:((r||e.children.length&&!e.children[0].length)&&e.merge(0,r,null,!1,0,l),s.push(e))):(null===e||void 0===e?void 0:e.breakAfter)&&(u?u.breakAfter=1:o=1),i++}for(h&&(h.breakAfter=o,n>0&&(!o&&s.length&&h.merge(n,h.length,s[0],!1,a,0)?h.breakAfter=s.shift().breakAfter:(n<h.length||h.children.length&&0==h.children[h.children.length-1].length)&&h.merge(n,h.length,null,!1,a,0),t++));t<i&&s.length;)if(c[i-1].become(s[s.length-1]))i--,s.pop(),l=s.length?0:a;else{if(!c[t].become(s[0]))break;t++,s.shift(),a=s.length?0:l}!s.length&&t&&i<c.length&&!c[t-1].breakAfter&&c[i].merge(0,0,c[t-1],!1,a,l)&&t--,(t<i||s.length)&&e.replaceChildren(t,i,s)}}function ov(e,t,n,i,r,s){let o=e.childCursor(),{i:a,off:l}=o.findPos(n,1),{i:c,off:h}=o.findPos(t,-1),u=t-n;for(let d of i)u+=d.length;e.length+=u,sv(e,c,h,a,l,i,0,r,s)}let av="undefined"!=typeof navigator?navigator:{userAgent:"",vendor:"",platform:""},lv="undefined"!=typeof document?document:{documentElement:{style:{}}};const cv=/Edge\/(\d+)/.exec(av.userAgent),hv=/MSIE \d/.test(av.userAgent),uv=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(av.userAgent),dv=!!(hv||uv||cv),fv=!dv&&/gecko\/(\d+)/i.test(av.userAgent),pv=!dv&&/Chrome\/(\d+)/.exec(av.userAgent),gv="webkitFontSmoothing"in lv.documentElement.style,mv=!dv&&/Apple Computer/.test(av.vendor),vv=mv&&(/Mobile\/\w+/.test(av.userAgent)||av.maxTouchPoints>2);var yv={mac:vv||/Mac/.test(av.platform),windows:/Win/.test(av.platform),linux:/Linux|X11/.test(av.platform),ie:dv,ie_version:hv?lv.documentMode||6:uv?+uv[1]:cv?+cv[1]:0,gecko:fv,gecko_version:fv?+(/Firefox\/(\d+)/.exec(av.userAgent)||[0,0])[1]:0,chrome:!!pv,chrome_version:pv?+pv[1]:0,ios:vv,android:/Android\b/.test(av.userAgent),webkit:gv,safari:mv,webkit_version:gv?+(/\bAppleWebKit\/(\d+)/.exec(av.userAgent)||[0,0])[1]:0,tabSize:null!=lv.documentElement.style.tabSize?"tab-size":"-moz-tab-size"};class wv extends nv{constructor(e){super(),this.text=e}get length(){return this.text.length}createDOM(e){this.setDOM(e||document.createTextNode(this.text))}sync(e,t){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(t&&t.node==this.dom&&(t.written=!0),this.dom.nodeValue=this.text)}reuseDOM(e){3==e.nodeType&&this.createDOM(e)}merge(e,t,n){return!(8&this.flags||n&&(!(n instanceof wv)||this.length-(t-e)+n.length>256||8&n.flags))&&(this.text=this.text.slice(0,e)+(n?n.text:"")+this.text.slice(t),this.markDirty(),!0)}split(e){let t=new wv(this.text.slice(e));return this.text=this.text.slice(0,e),this.markDirty(),t.flags|=8&this.flags,t}localPosFromDOM(e,t){return e==this.dom?t:t?this.text.length:0}domAtPos(e){return new ev(this.dom,e)}domBoundsAround(e,t,n){return{from:n,to:n+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(e,t){return function(e,t,n){let i=e.nodeValue.length;t>i&&(t=i);let r=t,s=t,o=0;0==t&&n<0||t==i&&n>=0?yv.chrome||yv.gecko||(t?(r--,o=1):s<i&&(s++,o=-1)):n<0?r--:s<i&&s++;let a=Xm(e,r,s).getClientRects();if(!a.length)return null;let l=a[(o?o<0:n>=0)?0:a.length-1];yv.safari&&!o&&0==l.width&&(l=Array.prototype.find.call(a,(e=>e.width))||l);return o?Vm(l,o<0):l||null}(this.dom,e,t)}}class bv extends nv{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;super(),this.mark=e,this.children=t,this.length=n;for(let i of t)i.setParent(this)}setAttrs(e){if(Km(e),this.mark.class&&(e.className=this.mark.class),this.mark.attrs)for(let t in this.mark.attrs)e.setAttribute(t,this.mark.attrs[t]);return e}canReuseDOM(e){return super.canReuseDOM(e)&&!(8&(this.flags|e.flags))}reuseDOM(e){e.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(e),this.flags|=6)}sync(e,t){this.dom?4&this.flags&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(e,t)}merge(e,t,n,i,r,s){return(!n||!(!(n instanceof bv&&n.mark.eq(this.mark))||e&&r<=0||t<this.length&&s<=0))&&(ov(this,e,t,n?n.children.slice():[],r-1,s-1),this.markDirty(),!0)}split(e){let t=[],n=0,i=-1,r=0;for(let o of this.children){let s=n+o.length;s>e&&t.push(n<e?o.split(e-n):o),i<0&&n>=e&&(i=r),n=s,r++}let s=this.length-e;return this.length=e,i>-1&&(this.children.length=i,this.markDirty()),new bv(this.mark,t,s)}domAtPos(e){return Sv(this,e)}coordsAt(e,t){return Tv(this,e,t)}}class Ov extends nv{static create(e,t,n){return new Ov(e,t,n)}constructor(e,t,n){super(),this.widget=e,this.length=t,this.side=n,this.prevWidget=null}split(e){let t=Ov.create(this.widget,this.length-e,this.side);return this.length-=e,t}sync(e){this.dom&&this.widget.updateDOM(this.dom,e)||(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}getSide(){return this.side}merge(e,t,n,i,r,s){return!(n&&(!(n instanceof Ov&&this.widget.compare(n.widget))||e>0&&r<=0||t<this.length&&s<=0))&&(this.length=e+(n?n.length:0)+(this.length-t),!0)}become(e){return e instanceof Ov&&e.side==this.side&&this.widget.constructor==e.widget.constructor&&(this.widget.compare(e.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,!0)}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get overrideDOMText(){if(0==this.length)return Pp.empty;let e=this;for(;e.parent;)e=e.parent;let{view:t}=e,n=t&&t.state.doc,i=this.posAtStart;return n?n.slice(i,i+this.length):Pp.empty}domAtPos(e){return(this.length?0==e:this.side>0)?ev.before(this.dom):ev.after(this.dom,e==this.length)}domBoundsAround(){return null}coordsAt(e,t){let n=this.widget.coordsAt(this.dom,e,t);if(n)return n;let i=this.dom.getClientRects(),r=null;if(!i.length)return null;let s=this.side?this.side<0:e>0;for(let o=s?i.length-1:0;r=i[o],!(e>0?0==o:o==i.length-1||r.top<r.bottom);o+=s?-1:1);return Vm(r,!s)}get isEditable(){return!1}get isWidget(){return!0}get isHidden(){return this.widget.isHidden}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class kv extends nv{constructor(e){super(),this.side=e}get length(){return 0}merge(){return!1}become(e){return e instanceof kv&&e.side==this.side}split(){return new kv(this.side)}sync(){if(!this.dom){let e=document.createElement("img");e.className="cm-widgetBuffer",e.setAttribute("aria-hidden","true"),this.setDOM(e)}}getSide(){return this.side}domAtPos(e){return this.side>0?ev.before(this.dom):ev.after(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(e){return this.dom.getBoundingClientRect()}get overrideDOMText(){return Pp.empty}get isHidden(){return!0}}function Sv(e,t){let n=e.dom,{children:i}=e,r=0;for(let s=0;r<i.length;r++){let e=i[r],o=s+e.length;if(!(o==s&&e.getSide()<=0)){if(t>s&&t<o&&e.dom.parentNode==n)return e.domAtPos(t-s);if(t<=s)break;s=o}}for(let s=r;s>0;s--){let e=i[s-1];if(e.dom.parentNode==n)return e.domAtPos(e.length)}for(let s=r;s<i.length;s++){let e=i[s];if(e.dom.parentNode==n)return e.domAtPos(0)}return new ev(n,0)}function xv(e,t,n){let i,{children:r}=e;n>0&&t instanceof bv&&r.length&&(i=r[r.length-1])instanceof bv&&i.mark.eq(t.mark)?xv(i,t.children[0],n-1):(r.push(t),t.setParent(e)),e.length+=t.length}function Tv(e,t,n){let i=null,r=-1,s=null,o=-1;!function e(t,a){for(let l=0,c=0;l<t.children.length&&c<=a;l++){let h=t.children[l],u=c+h.length;u>=a&&(h.children.length?e(h,a-c):(!s||s.isHidden&&n>0)&&(u>a||c==u&&h.getSide()>0)?(s=h,o=a-c):(c<a||c==u&&h.getSide()<0&&!h.isHidden)&&(i=h,r=a-c)),c=u}}(e,t);let a=(n<0?i:s)||i||s;return a?a.coordsAt(Math.max(0,a==i?r:o),n):function(e){let t=e.dom.lastChild;if(!t)return e.dom.getBoundingClientRect();let n=Mm(t);return n[n.length-1]||null}(e)}function Cv(e,t){for(let n in e)"class"==n&&t.class?t.class+=" "+e.class:"style"==n&&t.style?t.style+=";"+e.style:t[n]=e[n];return t}wv.prototype.children=Ov.prototype.children=kv.prototype.children=tv;const Ev=Object.create(null);function _v(e,t,n){if(e==t)return!0;e||(e=Ev),t||(t=Ev);let i=Object.keys(e),r=Object.keys(t);if(i.length-(n&&i.indexOf(n)>-1?1:0)!=r.length-(n&&r.indexOf(n)>-1?1:0))return!1;for(let s of i)if(s!=n&&(-1==r.indexOf(s)||e[s]!==t[s]))return!1;return!0}function Av(e,t,n){let i=!1;if(t)for(let r in t)n&&r in n||(i=!0,"style"==r?e.style.cssText="":e.removeAttribute(r));if(n)for(let r in n)t&&t[r]==n[r]||(i=!0,"style"==r?e.style.cssText=n[r]:e.setAttribute(r,n[r]));return i}function Pv(e){let t=Object.create(null);for(let n=0;n<e.attributes.length;n++){let i=e.attributes[n];t[i.name]=i.value}return t}class Nv extends nv{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(e,t,n,i,r,s){if(n){if(!(n instanceof Nv))return!1;this.dom||n.transferDOM(this)}return i&&this.setDeco(n?n.attrs:null),ov(this,e,t,n?n.children.slice():[],r,s),!0}split(e){let t=new Nv;if(t.breakAfter=this.breakAfter,0==this.length)return t;let{i:n,off:i}=this.childPos(e);i&&(t.append(this.children[n].split(i),0),this.children[n].merge(i,this.children[n].length,null,!1,0,0),n++);for(let r=n;r<this.children.length;r++)t.append(this.children[r],0);for(;n>0&&0==this.children[n-1].length;)this.children[--n].destroy();return this.children.length=n,this.markDirty(),this.length=e,t}transferDOM(e){this.dom&&(this.markDirty(),e.setDOM(this.dom),e.prevAttrs=void 0===this.prevAttrs?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(e){_v(this.attrs,e)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=e)}append(e,t){xv(this,e,t)}addLineDeco(e){let t=e.spec.attributes,n=e.spec.class;t&&(this.attrs=Cv(t,this.attrs||{})),n&&(this.attrs=Cv({class:n},this.attrs||{}))}domAtPos(e){return Sv(this,e)}reuseDOM(e){"DIV"==e.nodeName&&(this.setDOM(e),this.flags|=6)}sync(e,t){var n;this.dom?4&this.flags&&(Km(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),void 0!==this.prevAttrs&&(Av(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(e,t);let i=this.dom.lastChild;for(;i&&nv.get(i)instanceof bv;)i=i.lastChild;if(!i||!this.length||"BR"!=i.nodeName&&0==(null===(n=nv.get(i))||void 0===n?void 0:n.isEditable)&&(!yv.ios||!this.children.some((e=>e instanceof wv)))){let e=document.createElement("BR");e.cmIgnore=!0,this.dom.appendChild(e)}}measureTextSize(){if(0==this.children.length||this.length>20)return null;let e,t=0;for(let n of this.children){if(!(n instanceof wv)||/[^ -~]/.test(n.text))return null;let i=Mm(n.dom);if(1!=i.length)return null;t+=i[0].width,e=i[0].height}return t?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:t/this.length,textHeight:e}:null}coordsAt(e,t){let n=Tv(this,e,t);if(!this.children.length&&n&&this.parent){let{heightOracle:e}=this.parent.view.viewState,t=n.bottom-n.top;if(Math.abs(t-e.lineHeight)<2&&e.textHeight<t){let i=(t-e.textHeight)/2;return{top:n.top+i,bottom:n.bottom-i,left:n.left,right:n.left}}}return n}become(e){return e instanceof Nv&&0==this.children.length&&0==e.children.length&&_v(this.attrs,e.attrs)&&this.breakAfter==e.breakAfter}covers(){return!0}static find(e,t){for(let n=0,i=0;n<e.children.length;n++){let r=e.children[n],s=i+r.length;if(s>=t){if(r instanceof Nv)return r;if(s>t)break}i=s+r.breakAfter}return null}}class Iv extends nv{constructor(e,t,n){super(),this.widget=e,this.length=t,this.deco=n,this.breakAfter=0,this.prevWidget=null}merge(e,t,n,i,r,s){return!(n&&(!(n instanceof Iv&&this.widget.compare(n.widget))||e>0&&r<=0||t<this.length&&s<=0))&&(this.length=e+(n?n.length:0)+(this.length-t),!0)}domAtPos(e){return 0==e?ev.before(this.dom):ev.after(this.dom,e==this.length)}split(e){let t=this.length-e;this.length=e;let n=new Iv(this.widget,t,this.deco);return n.breakAfter=this.breakAfter,n}get children(){return tv}sync(e){this.dom&&this.widget.updateDOM(this.dom,e)||(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):Pp.empty}domBoundsAround(){return null}become(e){return e instanceof Iv&&e.widget.constructor==this.widget.constructor&&(e.widget.compare(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,this.deco=e.deco,this.breakAfter=e.breakAfter,!0)}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get isEditable(){return!1}get isWidget(){return!0}coordsAt(e,t){return this.widget.coordsAt(this.dom,e,t)}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}covers(e){let{startSide:t,endSide:n}=this.deco;return t!=n&&(e<0?t<0:n>0)}}class Rv{eq(e){return!1}updateDOM(e,t){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(e){return!0}coordsAt(e,t,n){return null}get isHidden(){return!1}get editable(){return!1}destroy(e){}}var Dv=function(e){return e[e.Text=0]="Text",e[e.WidgetBefore=1]="WidgetBefore",e[e.WidgetAfter=2]="WidgetAfter",e[e.WidgetRange=3]="WidgetRange",e}(Dv||(Dv={}));class Mv extends nm{constructor(e,t,n,i){super(),this.startSide=e,this.endSide=t,this.widget=n,this.spec=i}get heightRelevant(){return!1}static mark(e){return new Lv(e)}static widget(e){let t=Math.max(-1e4,Math.min(1e4,e.side||0)),n=!!e.block;return t+=n&&!e.inlineOrder?t>0?3e8:-4e8:t>0?1e8:-1e8,new zv(e,t,t,n,e.widget||null,!1)}static replace(e){let t,n,i=!!e.block;if(e.isBlockGap)t=-5e8,n=4e8;else{let{start:r,end:s}=jv(e,i);t=(r?i?-3e8:-1:5e8)-1,n=1+(s?i?2e8:1:-6e8)}return new zv(e,t,n,i,e.widget||null,!0)}static line(e){return new Qv(e)}static set(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return om.of(e,t)}hasHeight(){return!!this.widget&&this.widget.estimatedHeight>-1}}Mv.none=om.empty;class Lv extends Mv{constructor(e){let{start:t,end:n}=jv(e);super(t?-1:5e8,n?1:-6e8,null,e),this.tagName=e.tagName||"span",this.class=e.class||"",this.attrs=e.attributes||null}eq(e){var t,n;return this==e||e instanceof Lv&&this.tagName==e.tagName&&(this.class||(null===(t=this.attrs)||void 0===t?void 0:t.class))==(e.class||(null===(n=e.attrs)||void 0===n?void 0:n.class))&&_v(this.attrs,e.attrs,"class")}range(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e;if(e>=t)throw new RangeError("Mark decorations may not be empty");return super.range(e,t)}}Lv.prototype.point=!1;class Qv extends Mv{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof Qv&&this.spec.class==e.spec.class&&_v(this.spec.attributes,e.spec.attributes)}range(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e;if(t!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,t)}}Qv.prototype.mapMode=Zp.TrackBefore,Qv.prototype.point=!0;class zv extends Mv{constructor(e,t,n,i,r,s){super(t,n,r,e),this.block=i,this.isReplace=s,this.mapMode=i?t<=0?Zp.TrackBefore:Zp.TrackAfter:Zp.TrackDel}get type(){return this.startSide!=this.endSide?Dv.WidgetRange:this.startSide<=0?Dv.WidgetBefore:Dv.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(e){return e instanceof zv&&function(e,t){return e==t||!!(e&&t&&e.compare(t))}(this.widget,e.widget)&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide}range(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e;if(this.isReplace&&(e>t||e==t&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&t!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,t)}}function jv(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],{inclusiveStart:n,inclusiveEnd:i}=e;return null==n&&(n=e.inclusive),null==i&&(i=e.inclusive),{start:null!==n&&void 0!==n?n:t,end:null!==i&&void 0!==i?i:t}}function Uv(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=n.length-1;r>=0&&n[r]+i>=e?n[r]=Math.max(n[r],t):n.push(e,t)}zv.prototype.point=!0;class Vv{constructor(e,t,n,i){this.doc=e,this.pos=t,this.end=n,this.disallowBlockEffectsFor=i,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=e.iter(),this.skip=t}posCovered(){if(0==this.content.length)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let e=this.content[this.content.length-1];return!(e.breakAfter||e instanceof Iv&&e.deco.endSide<0)}getLine(){return this.curLine||(this.content.push(this.curLine=new Nv),this.atCursorPos=!0),this.curLine}flushBuffer(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.bufferMarks;this.pendingBuffer&&(this.curLine.append(Fv(new kv(-1),e),e.length),this.pendingBuffer=0)}addBlockWidget(e){this.flushBuffer(),this.curLine=null,this.content.push(e)}finish(e){this.pendingBuffer&&e<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,this.posCovered()||e&&this.content.length&&this.content[this.content.length-1]instanceof Iv||this.getLine()}buildText(e,t,n){for(;e>0;){if(this.textOff==this.text.length){let{value:t,lineBreak:n,done:i}=this.cursor.next(this.skip);if(this.skip=0,i)throw new Error("Ran out of text content when drawing inline views");if(n){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,e--;continue}this.text=t,this.textOff=0}let i=Math.min(this.text.length-this.textOff,e,512);this.flushBuffer(t.slice(t.length-n)),this.getLine().append(Fv(new wv(this.text.slice(this.textOff,this.textOff+i)),t),n),this.atCursorPos=!0,this.textOff+=i,e-=i,n=0}}span(e,t,n,i){this.buildText(t-e,n,i),this.pos=t,this.openStart<0&&(this.openStart=i)}point(e,t,n,i,r,s){if(this.disallowBlockEffectsFor[s]&&n instanceof zv){if(n.block)throw new RangeError("Block decorations may not be specified via plugins");if(t>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let o=t-e;if(n instanceof zv)if(n.block)n.startSide>0&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new Iv(n.widget||qv.block,o,n));else{let s=Ov.create(n.widget||qv.inline,o,o?0:n.startSide),a=this.atCursorPos&&!s.isEditable&&r<=i.length&&(e<t||n.startSide>0),l=!s.isEditable&&(e<t||r>i.length||n.startSide<=0),c=this.getLine();2!=this.pendingBuffer||a||s.isEditable||(this.pendingBuffer=0),this.flushBuffer(i),a&&(c.append(Fv(new kv(1),i),r),r=i.length+Math.max(0,r-i.length)),c.append(Fv(s,i),r),this.atCursorPos=l,this.pendingBuffer=l?e<t||r>i.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=i.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(n);o&&(this.textOff+o<=this.text.length?this.textOff+=o:(this.skip+=o-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=t),this.openStart<0&&(this.openStart=r)}static build(e,t,n,i,r){let s=new Vv(e,t,n,r);return s.openEnd=om.spans(i,t,n,s),s.openStart<0&&(s.openStart=s.openEnd),s.finish(s.openEnd),s}}function Fv(e,t){for(let n of t)e=new bv(n,[e],e.length);return e}class qv extends Rv{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}qv.inline=new qv("span"),qv.block=new qv("div");var Bv=function(e){return e[e.LTR=0]="LTR",e[e.RTL=1]="RTL",e}(Bv||(Bv={}));const Wv=Bv.LTR,Hv=Bv.RTL;function $v(e){let t=[];for(let n=0;n<e.length;n++)t.push(1<<+e[n]);return t}const Xv=$v("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),Gv=$v("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),Kv=Object.create(null),Yv=[];for(let Sk of["()","[]","{}"]){let e=Sk.charCodeAt(0),t=Sk.charCodeAt(1);Kv[e]=t,Kv[t]=-e}function Jv(e){return e<=247?Xv[e]:1424<=e&&e<=1524?2:1536<=e&&e<=1785?Gv[e-1536]:1774<=e&&e<=2220?4:8192<=e&&e<=8204?256:64336<=e&&e<=65023?4:1}const Zv=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class ey{get dir(){return this.level%2?Hv:Wv}constructor(e,t,n){this.from=e,this.to=t,this.level=n}side(e,t){return this.dir==t==e?this.to:this.from}forward(e,t){return e==(this.dir==t)}static find(e,t,n,i){let r=-1;for(let s=0;s<e.length;s++){let o=e[s];if(o.from<=t&&o.to>=t){if(o.level==n)return s;(r<0||(0!=i?i<0?o.from<t:o.to>t:e[r].level>o.level))&&(r=s)}}if(r<0)throw new RangeError("Index out of range");return r}}function ty(e,t){if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++){let i=e[n],r=t[n];if(i.from!=r.from||i.to!=r.to||i.direction!=r.direction||!ty(i.inner,r.inner))return!1}return!0}const ny=[];function iy(e,t,n,i,r,s,o){let a=i%2?2:1;if(i%2==r%2)for(let l=t,c=0;l<n;){let t=!0,h=!1;if(c==s.length||l<s[c].from){let e=ny[l];e!=a&&(t=!1,h=16==e)}let u=t||1!=a?null:[],d=t?i:i+1,f=l;e:for(;;)if(c<s.length&&f==s[c].from){if(h)break e;let p=s[c];if(!t)for(let e=p.to,t=c+1;;){if(e==n)break e;if(!(t<s.length&&s[t].from==e)){if(ny[e]==a)break e;break}e=s[t++].to}if(c++,u)u.push(p);else{p.from>l&&o.push(new ey(l,p.from,d)),ry(e,p.direction==Wv!=!(d%2)?i+1:i,r,p.inner,p.from,p.to,o),l=p.to}f=p.to}else{if(f==n||(t?ny[f]!=a:ny[f]==a))break;f++}u?iy(e,l,f,i+1,r,u,o):l<f&&o.push(new ey(l,f,d)),l=f}else for(let l=n,c=s.length;l>t;){let n=!0,h=!1;if(!c||l>s[c-1].to){let e=ny[l-1];e!=a&&(n=!1,h=16==e)}let u=n||1!=a?null:[],d=n?i:i+1,f=l;e:for(;;)if(c&&f==s[c-1].to){if(h)break e;let p=s[--c];if(!n)for(let e=p.from,n=c;;){if(e==t)break e;if(!n||s[n-1].to!=e){if(ny[e-1]==a)break e;break}e=s[--n].from}if(u)u.push(p);else{p.to<l&&o.push(new ey(p.to,l,d)),ry(e,p.direction==Wv!=!(d%2)?i+1:i,r,p.inner,p.from,p.to,o),l=p.from}f=p.from}else{if(f==t||(n?ny[f-1]!=a:ny[f-1]==a))break;f--}u?iy(e,f,l,i+1,r,u,o):f<l&&o.push(new ey(f,l,d)),l=f}}function ry(e,t,n,i,r,s,o){let a=t%2?2:1;!function(e,t,n,i,r){for(let s=0;s<=i.length;s++){let o=s?i[s-1].to:t,a=s<i.length?i[s].from:n,l=s?256:r;for(let t=o,n=l,i=l;t<a;t++){let r=Jv(e.charCodeAt(t));512==r?r=n:8==r&&4==i&&(r=16),ny[t]=4==r?2:r,7&r&&(i=r),n=r}for(let e=o,t=l,i=l;e<a;e++){let r=ny[e];if(128==r)e<a-1&&t==ny[e+1]&&24&t?r=ny[e]=t:ny[e]=256;else if(64==r){let r=e+1;for(;r<a&&64==ny[r];)r++;let s=e&&8==t||r<n&&8==ny[r]?1==i?1:8:256;for(let t=e;t<r;t++)ny[t]=s;e=r-1}else 8==r&&1==i&&(ny[e]=1);t=r,7&r&&(i=r)}}}(e,r,s,i,a),function(e,t,n,i,r){let s=1==r?2:1;for(let o=0,a=0,l=0;o<=i.length;o++){let c=o?i[o-1].to:t,h=o<i.length?i[o].from:n;for(let t,n,i,o=c;o<h;o++)if(n=Kv[t=e.charCodeAt(o)])if(n<0){for(let e=a-3;e>=0;e-=3)if(Yv[e+1]==-n){let t=Yv[e+2],n=2&t?r:4&t?1&t?s:r:0;n&&(ny[o]=ny[Yv[e]]=n),a=e;break}}else{if(189==Yv.length)break;Yv[a++]=o,Yv[a++]=t,Yv[a++]=l}else if(2==(i=ny[o])||1==i){let e=i==r;l=e?0:1;for(let t=a-3;t>=0;t-=3){let n=Yv[t+2];if(2&n)break;if(e)Yv[t+2]|=2;else{if(4&n)break;Yv[t+2]|=4}}}}}(e,r,s,i,a),function(e,t,n,i){for(let r=0,s=i;r<=n.length;r++){let o=r?n[r-1].to:e,a=r<n.length?n[r].from:t;for(let l=o;l<a;){let o=ny[l];if(256==o){let o=l+1;for(;;)if(o==a){if(r==n.length)break;o=n[r++].to,a=r<n.length?n[r].from:t}else{if(256!=ny[o])break;o++}let c=1==s,h=c==(1==(o<t?ny[o]:i))?c?1:2:i;for(let t=o,i=r,s=i?n[i-1].to:e;t>l;)t==s&&(t=n[--i].from,s=i?n[i-1].to:e),ny[--t]=h;l=o}else s=o,l++}}}(r,s,i,a),iy(e,r,s,t,n,i,o)}function sy(e,t,n){if(!e)return[new ey(0,0,t==Hv?1:0)];if(t==Wv&&!n.length&&!Zv.test(e))return oy(e.length);if(n.length)for(;e.length>ny.length;)ny[ny.length]=256;let i=[],r=t==Wv?0:1;return ry(e,r,r,n,0,e.length,i),i}function oy(e){return[new ey(0,e,0)]}let ay="";function ly(e,t,n,i,r){var s;let o=i.head-e.from,a=ey.find(t,o,null!==(s=i.bidiLevel)&&void 0!==s?s:-1,i.assoc),l=t[a],c=l.side(r,n);if(o==c){let e=a+=r?1:-1;if(e<0||e>=t.length)return null;l=t[a=e],o=l.side(!r,n),c=l.side(r,n)}let h=Bp(e.text,o,l.forward(r,n));(h<l.from||h>l.to)&&(h=c),ay=e.text.slice(Math.min(o,h),Math.max(o,h));let u=a==(r?t.length-1:0)?null:t[a+(r?1:-1)];return u&&h==c&&u.level+(r?0:1)<l.level?cg.cursor(u.side(!r,n)+e.from,u.forward(r,n)?1:-1,u.level):cg.cursor(h+e.from,l.forward(r,n)?-1:1,l.level)}function cy(e,t,n){for(let i=t;i<n;i++){let t=Jv(e.charCodeAt(i));if(1==t)return Wv;if(2==t||4==t)return Hv}return Wv}const hy=dg.define(),uy=dg.define(),dy=dg.define(),fy=dg.define(),py=dg.define(),gy=dg.define(),my=dg.define(),vy=dg.define({combine:e=>e.some((e=>e))}),yy=dg.define({combine:e=>e.some((e=>e))}),wy=dg.define();class by{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"nearest",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"nearest",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:5,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:5,s=arguments.length>5&&void 0!==arguments[5]&&arguments[5];this.range=e,this.y=t,this.x=n,this.yMargin=i,this.xMargin=r,this.isSnapshot=s}map(e){return e.empty?this:new by(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}clip(e){return this.range.to<=e.doc.length?this:new by(cg.cursor(e.doc.length),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}}const Oy=Fg.define({map:(e,t)=>e.map(t)}),ky=Fg.define();function Sy(e,t,n){let i=e.facet(fy);i.length?i[0](t):window.onerror?window.onerror(String(t),n,void 0,void 0,t):n?console.error(n+":",t):console.error(t)}const xy=dg.define({combine:e=>!e.length||e[0]});let Ty=0;const Cy=dg.define();class Ey{constructor(e,t,n,i,r){this.id=e,this.create=t,this.domEventHandlers=n,this.domEventObservers=i,this.extension=r(this)}static define(e,t){const{eventHandlers:n,eventObservers:i,provide:r,decorations:s}=t||{};return new Ey(Ty++,e,n,i,(e=>{let t=[Cy.of(e)];return s&&t.push(Ny.of((t=>{let n=t.plugin(e);return n?s(n):Mv.none}))),r&&t.push(r(e)),t}))}static fromClass(e,t){return Ey.define((t=>new e(t)),t)}}class _y{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}update(e){if(this.value){if(this.mustUpdate){let e=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(e)}catch(kj){if(Sy(e.state,kj,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch(Sj){}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.create(e)}catch(kj){Sy(e.state,kj,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var t;if(null===(t=this.value)||void 0===t?void 0:t.destroy)try{this.value.destroy()}catch(kj){Sy(e.state,kj,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const Ay=dg.define(),Py=dg.define(),Ny=dg.define(),Iy=dg.define(),Ry=dg.define(),Dy=dg.define();function My(e,t){let n=e.state.facet(Dy);if(!n.length)return n;let i=n.map((t=>t instanceof Function?t(e):t)),r=[];return om.spans(i,t.from,t.to,{point(){},span(e,n,i,s){let o=e-t.from,a=n-t.from,l=r;for(let r=i.length-1;r>=0;r--,s--){let e,n=i[r].spec.bidiIsolate;if(null==n&&(n=cy(t.text,o,a)),s>0&&l.length&&(e=l[l.length-1]).to==o&&e.direction==n)e.to=a,l=e.inner;else{let e={from:o,to:a,direction:n,inner:[]};l.push(e),l=e.inner}}}}),r}const Ly=dg.define();function Qy(e){let t=0,n=0,i=0,r=0;for(let s of e.state.facet(Ly)){let o=s(e);o&&(null!=o.left&&(t=Math.max(t,o.left)),null!=o.right&&(n=Math.max(n,o.right)),null!=o.top&&(i=Math.max(i,o.top)),null!=o.bottom&&(r=Math.max(r,o.bottom)))}return{left:t,right:n,top:i,bottom:r}}const zy=dg.define();class jy{constructor(e,t,n,i){this.fromA=e,this.toA=t,this.fromB=n,this.toB=i}join(e){return new jy(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let t=e.length,n=this;for(;t>0;t--){let i=e[t-1];if(!(i.fromA>n.toA)){if(i.toA<n.fromA)break;n=n.join(i),e.splice(t-1,1)}}return e.splice(t,0,n),e}static extendWithRanges(e,t){if(0==t.length)return e;let n=[];for(let i=0,r=0,s=0,o=0;;i++){let a=i==e.length?null:e[i],l=s-o,c=a?a.fromB:1e9;for(;r<t.length&&t[r]<c;){let e=t[r],i=t[r+1],s=Math.max(o,e),a=Math.min(c,i);if(s<=a&&new jy(s+l,a+l,s,a).addToSet(n),i>c)break;r+=2}if(!a)return n;new jy(a.fromA,a.toA,a.fromB,a.toB).addToSet(n),s=a.toA,o=a.toB}}}class Uy{constructor(e,t,n){this.view=e,this.state=t,this.transactions=n,this.flags=0,this.startState=e.state,this.changes=tg.empty(this.startState.doc.length);for(let r of n)this.changes=this.changes.compose(r.changes);let i=[];this.changes.iterChangedRanges(((e,t,n,r)=>i.push(new jy(e,t,n,r)))),this.changedRanges=i}static create(e,t,n){return new Uy(e,t,n)}get viewportChanged(){return(4&this.flags)>0}get heightChanged(){return(2&this.flags)>0}get geometryChanged(){return this.docChanged||(10&this.flags)>0}get focusChanged(){return(1&this.flags)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some((e=>e.selection))}get empty(){return 0==this.flags&&0==this.transactions.length}}class Vy extends nv{get length(){return this.view.state.doc.length}constructor(e){super(),this.view=e,this.decorations=[],this.dynamicDecorationMap=[!1],this.domChanged=null,this.hasComposition=null,this.markedForComposition=new Set,this.editContextFormatting=Mv.none,this.lastCompositionAfterCursor=!1,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(e.contentDOM),this.children=[new Nv],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new jy(0,0,0,e.state.doc.length)],0,null)}update(e){var t;let n=e.changedRanges;this.minWidth>0&&n.length&&(n.every((e=>{let{fromA:t,toA:n}=e;return n<this.minWidthFrom||t>this.minWidthTo}))?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.updateEditContextFormatting(e);let i=-1;this.view.inputState.composing>=0&&!this.view.observer.editContext&&((null===(t=this.domChanged)||void 0===t?void 0:t.newSel)?i=this.domChanged.newSel.head:function(e,t){let n=!1;t&&e.iterChangedRanges(((e,i)=>{e<t.to&&i>t.from&&(n=!0)}));return n}(e.changes,this.hasComposition)||e.selectionSet||(i=e.state.selection.main.head));let r=i>-1?function(e,t,n){let i=qy(e,n);if(!i)return null;let{node:r,from:s,to:o}=i,a=r.nodeValue;if(/[\n\r]/.test(a))return null;if(e.state.doc.sliceString(i.from,i.to)!=a)return null;let l=t.invertedDesc,c=new jy(l.mapPos(s),l.mapPos(o),s,o),h=[];for(let u=r.parentNode;;u=u.parentNode){let t=nv.get(u);if(t instanceof bv)h.push({node:u,deco:t.mark});else{if(t instanceof Nv||"DIV"==u.nodeName&&u.parentNode==e.contentDOM)return{range:c,text:r,marks:h,line:u};if(u==e.contentDOM)return null;h.push({node:u,deco:new Lv({inclusive:!0,attributes:Pv(u),tagName:u.tagName.toLowerCase()})})}}}(this.view,e.changes,i):null;if(this.domChanged=null,this.hasComposition){this.markedForComposition.clear();let{from:t,to:i}=this.hasComposition;n=new jy(t,i,e.changes.mapPos(t,-1),e.changes.mapPos(i,1)).addToSet(n.slice())}this.hasComposition=r?{from:r.range.fromB,to:r.range.toB}:null,(yv.ie||yv.chrome)&&!r&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let s=function(e,t,n){let i=new By;return om.compare(e,t,n,i),i.changes}(this.decorations,this.updateDeco(),e.changes);return n=jy.extendWithRanges(n,s),!!(7&this.flags||0!=n.length)&&(this.updateInner(n,e.startState.doc.length,r),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,t,n){this.view.viewState.mustMeasureContent=!0,this.updateChildren(e,t,n);let{observer:i}=this.view;i.ignore((()=>{this.dom.style.height=this.view.viewState.contentHeight/this.view.scaleY+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let e=yv.chrome||yv.ios?{node:i.selectionRange.focusNode,written:!1}:void 0;this.sync(this.view,e),this.flags&=-8,e&&(e.written||i.selectionRange.focusNode!=e.node)&&(this.forceSelection=!0),this.dom.style.height=""})),this.markedForComposition.forEach((e=>e.flags&=-9));let r=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let s of this.children)s instanceof Iv&&s.widget instanceof Fy&&r.push(s.dom);i.updateGaps(r)}updateChildren(e,t,n){let i=n?n.range.addToSet(e.slice()):e,r=this.childCursor(t);for(let s=i.length-1;;s--){let e=s>=0?i[s]:null;if(!e)break;let t,o,a,l,{fromA:c,toA:h,fromB:u,toB:d}=e;if(n&&n.range.fromB<d&&n.range.toB>u){let e=Vv.build(this.view.state.doc,u,n.range.fromB,this.decorations,this.dynamicDecorationMap),i=Vv.build(this.view.state.doc,n.range.toB,d,this.decorations,this.dynamicDecorationMap);o=e.breakAtStart,a=e.openStart,l=i.openEnd;let r=this.compositionView(n);i.breakAtStart?r.breakAfter=1:i.content.length&&r.merge(r.length,r.length,i.content[0],!1,i.openStart,0)&&(r.breakAfter=i.content[0].breakAfter,i.content.shift()),e.content.length&&r.merge(0,0,e.content[e.content.length-1],!0,0,e.openEnd)&&e.content.pop(),t=e.content.concat(r).concat(i.content)}else({content:t,breakAtStart:o,openStart:a,openEnd:l}=Vv.build(this.view.state.doc,u,d,this.decorations,this.dynamicDecorationMap));let{i:f,off:p}=r.findPos(h,1),{i:g,off:m}=r.findPos(c,-1);sv(this,g,m,f,p,t,o,a,l)}n&&this.fixCompositionDOM(n)}updateEditContextFormatting(e){this.editContextFormatting=this.editContextFormatting.map(e.changes);for(let t of e.transactions)for(let e of t.effects)e.is(ky)&&(this.editContextFormatting=e.value)}compositionView(e){let t=new wv(e.text.nodeValue);t.flags|=8;for(let{deco:i}of e.marks)t=new bv(i,[t],t.length);let n=new Nv;return n.append(t,0),n}fixCompositionDOM(e){let t=(e,t)=>{t.flags|=8|(t.children.some((e=>7&e.flags))?1:0),this.markedForComposition.add(t);let n=nv.get(e);n&&n!=t&&(n.dom=null),t.setDOM(e)},n=this.childPos(e.range.fromB,1),i=this.children[n.i];t(e.line,i);for(let r=e.marks.length-1;r>=-1;r--)n=i.childPos(n.off,1),i=i.children[n.i],t(r>=0?e.marks[r].node:e.text,i)}updateSelection(){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];!(arguments.length>0&&void 0!==arguments[0]&&arguments[0])&&this.view.observer.selectionRange.focusNode||this.view.observer.readSelectionRange();let t=this.view.root.activeElement,n=t==this.dom,i=!n&&Dm(this.dom,this.view.observer.selectionRange)&&!(t&&this.dom.contains(t));if(!(n||e||i))return;let r=this.forceSelection;this.forceSelection=!1;let s=this.view.state.selection.main,o=this.moveToLine(this.domAtPos(s.anchor)),a=s.empty?o:this.moveToLine(this.domAtPos(s.head));if(yv.gecko&&s.empty&&!this.hasComposition&&(1==(l=o).node.nodeType&&l.node.firstChild&&(0==l.offset||"false"==l.node.childNodes[l.offset-1].contentEditable)&&(l.offset==l.node.childNodes.length||"false"==l.node.childNodes[l.offset].contentEditable))){let e=document.createTextNode("");this.view.observer.ignore((()=>o.node.insertBefore(e,o.node.childNodes[o.offset]||null))),o=a=new ev(e,0),r=!0}var l;let c=this.view.observer.selectionRange;!r&&c.focusNode&&(Lm(o.node,o.offset,c.anchorNode,c.anchorOffset)&&Lm(a.node,a.offset,c.focusNode,c.focusOffset)||this.suppressWidgetCursorChange(c,s))||(this.view.observer.ignore((()=>{yv.android&&yv.chrome&&this.dom.contains(c.focusNode)&&function(e,t){for(let n=e;n&&n!=t;n=n.assignedSlot||n.parentNode)if(1==n.nodeType&&"false"==n.contentEditable)return!0;return!1}(c.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let e=Im(this.view.root);if(e)if(s.empty){if(yv.gecko){let e=(n=o.node,r=o.offset,1!=n.nodeType?0:(r&&"false"==n.childNodes[r-1].contentEditable?1:0)|(r<n.childNodes.length&&"false"==n.childNodes[r].contentEditable?2:0));if(e&&3!=e){let t=(1==e?Jm:Zm)(o.node,o.offset);t&&(o=new ev(t.node,t.offset))}}e.collapse(o.node,o.offset),null!=s.bidiLevel&&void 0!==e.caretBidiLevel&&(e.caretBidiLevel=s.bidiLevel)}else if(e.extend){e.collapse(o.node,o.offset);try{e.extend(a.node,a.offset)}catch(Sj){}}else{let t=document.createRange();s.anchor>s.head&&([o,a]=[a,o]),t.setEnd(a.node,a.offset),t.setStart(o.node,o.offset),e.removeAllRanges(),e.addRange(t)}else;var n,r;i&&this.view.root.activeElement==this.dom&&(this.dom.blur(),t&&t.focus())})),this.view.observer.setSelectionRange(o,a)),this.impreciseAnchor=o.precise?null:new ev(c.anchorNode,c.anchorOffset),this.impreciseHead=a.precise?null:new ev(c.focusNode,c.focusOffset)}suppressWidgetCursorChange(e,t){return this.hasComposition&&t.empty&&Lm(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)&&this.posFromDOM(e.focusNode,e.focusOffset)==t.head}enforceCursorAssoc(){if(this.hasComposition)return;let{view:e}=this,t=e.state.selection.main,n=Im(e.root),{anchorNode:i,anchorOffset:r}=e.observer.selectionRange;if(!n||!t.empty||!t.assoc||!n.modify)return;let s=Nv.find(this,t.head);if(!s)return;let o=s.posAtStart;if(t.head==o||t.head==o+s.length)return;let a=this.coordsAt(t.head,-1),l=this.coordsAt(t.head,1);if(!a||!l||a.bottom>l.top)return;let c=this.domAtPos(t.head+t.assoc);n.collapse(c.node,c.offset),n.modify("move",t.assoc<0?"forward":"backward","lineboundary"),e.observer.readSelectionRange();let h=e.observer.selectionRange;e.docView.posFromDOM(h.anchorNode,h.anchorOffset)!=t.from&&n.collapse(i,r)}moveToLine(e){let t,n=this.dom;if(e.node!=n)return e;for(let i=e.offset;!t&&i<n.childNodes.length;i++){let e=nv.get(n.childNodes[i]);e instanceof Nv&&(t=e.domAtPos(0))}for(let i=e.offset-1;!t&&i>=0;i--){let e=nv.get(n.childNodes[i]);e instanceof Nv&&(t=e.domAtPos(e.length))}return t?new ev(t.node,t.offset,!0):e}nearest(e){for(let t=e;t;){let e=nv.get(t);if(e&&e.rootView==this)return e;t=t.parentNode}return null}posFromDOM(e,t){let n=this.nearest(e);if(!n)throw new RangeError("Trying to find position for a DOM position outside of the document");return n.localPosFromDOM(e,t)+n.posAtStart}domAtPos(e){let{i:t,off:n}=this.childCursor().findPos(e,-1);for(;t<this.children.length-1;){let e=this.children[t];if(n<e.length||e instanceof Nv)break;t++,n=0}return this.children[t].domAtPos(n)}coordsAt(e,t){let n=null,i=0;for(let r=this.length,s=this.children.length-1;s>=0;s--){let o=this.children[s],a=r-o.breakAfter,l=a-o.length;if(a<e)break;if(l<=e&&(l<e||o.covers(-1))&&(a>e||o.covers(1))&&(!n||o instanceof Nv&&!(n instanceof Nv&&t>=0)))n=o,i=l;else if(n&&l==e&&a==e&&o instanceof Iv&&Math.abs(t)<2){if(o.deco.startSide<0)break;s&&(n=null)}r=l}return n?n.coordsAt(e-i,t):null}coordsForChar(e){let{i:t,off:n}=this.childPos(e,1),i=this.children[t];if(!(i instanceof Nv))return null;for(;i.children.length;){let{i:e,off:t}=i.childPos(n,1);for(;;e++){if(e==i.children.length)return null;if((i=i.children[e]).length)break}n=t}if(!(i instanceof wv))return null;let r=Bp(i.text,n);if(r==n)return null;let s=Xm(i.dom,n,r).getClientRects();for(let o=0;o<s.length;o++){let e=s[o];if(o==s.length-1||e.top<e.bottom&&e.left<e.right)return e}return null}measureVisibleLineHeights(e){let t=[],{from:n,to:i}=e,r=this.view.contentDOM.clientWidth,s=r>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,o=-1,a=this.view.textDirection==Bv.LTR;for(let l=0,c=0;c<this.children.length;c++){let e=this.children[c],h=l+e.length;if(h>i)break;if(l>=n){let n=e.dom.getBoundingClientRect();if(t.push(n.height),s){let t=e.dom.lastChild,i=t?Mm(t):[];if(i.length){let e=i[i.length-1],t=a?e.right-n.left:n.right-e.left;t>o&&(o=t,this.minWidth=r,this.minWidthFrom=l,this.minWidthTo=h)}}}l=h+e.breakAfter}return t}textDirectionAt(e){let{i:t}=this.childPos(e,1);return"rtl"==getComputedStyle(this.children[t].dom).direction?Bv.RTL:Bv.LTR}measureTextSize(){for(let r of this.children)if(r instanceof Nv){let e=r.measureTextSize();if(e)return e}let e,t,n,i=document.createElement("div");return i.className="cm-line",i.style.width="99999px",i.style.position="absolute",i.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore((()=>{this.dom.appendChild(i);let r=Mm(i.firstChild)[0];e=i.getBoundingClientRect().height,t=r?r.width/27:7,n=r?r.height:e,i.remove()})),{lineHeight:e,charWidth:t,textHeight:n}}childCursor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.length,t=this.children.length;return t&&(e-=this.children[--t].length),new rv(this.children,e,t)}computeBlockGapDeco(){let e=[],t=this.view.viewState;for(let n=0,i=0;;i++){let r=i==t.viewports.length?null:t.viewports[i],s=r?r.from-1:this.length;if(s>n){let i=(t.lineBlockAt(s).bottom-t.lineBlockAt(n).top)/this.view.scaleY;e.push(Mv.replace({widget:new Fy(i),block:!0,inclusive:!0,isBlockGap:!0}).range(n,s))}if(!r)break;n=r.to+1}return Mv.set(e)}updateDeco(){let e=1,t=this.view.state.facet(Ny).map((t=>(this.dynamicDecorationMap[e++]="function"==typeof t)?t(this.view):t)),n=!1,i=this.view.state.facet(Iy).map(((e,t)=>{let i="function"==typeof e;return i&&(n=!0),i?e(this.view):e}));for(i.length&&(this.dynamicDecorationMap[e++]=n,t.push(om.join(i))),this.decorations=[this.editContextFormatting,...t,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco];e<this.decorations.length;)this.dynamicDecorationMap[e++]=!1;return this.decorations}scrollIntoView(e){if(e.isSnapshot){let t=this.view.viewState.lineBlockAt(e.range.head);return this.view.scrollDOM.scrollTop=t.top-e.yMargin,void(this.view.scrollDOM.scrollLeft=e.xMargin)}for(let l of this.view.state.facet(wy))try{if(l(this.view,e.range,e))return!0}catch(kj){Sy(this.view.state,kj,"scroll handler")}let t,{range:n}=e,i=this.coordsAt(n.head,n.empty?n.assoc:n.head>n.anchor?-1:1);if(!i)return;!n.empty&&(t=this.coordsAt(n.anchor,n.anchor>n.head?-1:1))&&(i={left:Math.min(i.left,t.left),top:Math.min(i.top,t.top),right:Math.max(i.right,t.right),bottom:Math.max(i.bottom,t.bottom)});let r=Qy(this.view),s={left:i.left-r.left,top:i.top-r.top,right:i.right+r.right,bottom:i.bottom+r.bottom},{offsetWidth:o,offsetHeight:a}=this.view.scrollDOM;!function(e,t,n,i,r,s,o,a){let l=e.ownerDocument,c=l.defaultView||window;for(let h=e,u=!1;h&&!u;)if(1==h.nodeType){let e,d=h==l.body,f=1,p=1;if(d)e=Fm(c);else{if(/^(fixed|sticky)$/.test(getComputedStyle(h).position)&&(u=!0),h.scrollHeight<=h.clientHeight&&h.scrollWidth<=h.clientWidth){h=h.assignedSlot||h.parentNode;continue}let t=h.getBoundingClientRect();({scaleX:f,scaleY:p}=qm(h,t)),e={left:t.left,right:t.left+h.clientWidth*f,top:t.top,bottom:t.top+h.clientHeight*p}}let g=0,m=0;if("nearest"==r)t.top<e.top?(m=-(e.top-t.top+o),n>0&&t.bottom>e.bottom+m&&(m=t.bottom-e.bottom+m+o)):t.bottom>e.bottom&&(m=t.bottom-e.bottom+o,n<0&&t.top-m<e.top&&(m=-(e.top+m-t.top+o)));else{let i=t.bottom-t.top,s=e.bottom-e.top;m=("center"==r&&i<=s?t.top+i/2-s/2:"start"==r||"center"==r&&n<0?t.top-o:t.bottom-s+o)-e.top}if("nearest"==i?t.left<e.left?(g=-(e.left-t.left+s),n>0&&t.right>e.right+g&&(g=t.right-e.right+g+s)):t.right>e.right&&(g=t.right-e.right+s,n<0&&t.left<e.left+g&&(g=-(e.left+g-t.left+s))):g=("center"==i?t.left+(t.right-t.left)/2-(e.right-e.left)/2:"start"==i==a?t.left-s:t.right-(e.right-e.left)+s)-e.left,g||m)if(d)c.scrollBy(g,m);else{let e=0,n=0;if(m){let e=h.scrollTop;h.scrollTop+=m/p,n=(h.scrollTop-e)*p}if(g){let t=h.scrollLeft;h.scrollLeft+=g/f,e=(h.scrollLeft-t)*f}t={left:t.left-e,top:t.top-n,right:t.right-e,bottom:t.bottom-n},e&&Math.abs(e-g)<1&&(i="nearest"),n&&Math.abs(n-m)<1&&(r="nearest")}if(d)break;h=h.assignedSlot||h.parentNode}else{if(11!=h.nodeType)break;h=h.host}}(this.view.scrollDOM,s,n.head<n.anchor?-1:1,e.x,e.y,Math.max(Math.min(e.xMargin,o),-o),Math.max(Math.min(e.yMargin,a),-a),this.view.textDirection==Bv.LTR)}}class Fy extends Rv{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return e.className="cm-gap",this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get editable(){return!0}get estimatedHeight(){return this.height}ignoreEvent(){return!1}}function qy(e,t){let n=e.observer.selectionRange;if(!n.focusNode)return null;let i=Jm(n.focusNode,n.focusOffset),r=Zm(n.focusNode,n.focusOffset),s=i||r;if(r&&i&&r.node!=i.node){let t=nv.get(r.node);if(!t||t instanceof wv&&t.text!=r.node.nodeValue)s=r;else if(e.docView.lastCompositionAfterCursor){let e=nv.get(i.node);!e||e instanceof wv&&e.text!=i.node.nodeValue||(s=r)}}if(e.docView.lastCompositionAfterCursor=s!=i,!s)return null;let o=t-s.offset;return{from:o,to:o+s.node.nodeValue.length,node:s.node}}let By=class{constructor(){this.changes=[]}compareRange(e,t){Uv(e,t,this.changes)}comparePoint(e,t){Uv(e,t,this.changes)}};function Wy(e,t){return t.left>e?t.left-e:Math.max(0,e-t.right)}function Hy(e,t){return t.top>e?t.top-e:Math.max(0,e-t.bottom)}function $y(e,t){return e.top<t.bottom-1&&e.bottom>t.top+1}function Xy(e,t){return t<e.top?{top:t,left:e.left,right:e.right,bottom:e.bottom}:e}function Gy(e,t){return t>e.bottom?{top:e.top,left:e.left,right:e.right,bottom:t}:e}function Ky(e,t,n){let i,r,s,o,a,l,c,h,u=!1;for(let f=e.firstChild;f;f=f.nextSibling){let e=Mm(f);for(let d=0;d<e.length;d++){let p=e[d];r&&$y(r,p)&&(p=Xy(Gy(p,r.bottom),r.top));let g=Wy(t,p),m=Hy(n,p);if(0==g&&0==m)return 3==f.nodeType?Yy(f,t,n):Ky(f,t,n);if(!i||o>m||o==m&&s>g){i=f,r=p,s=g,o=m;let a=m?n<p.top?-1:1:g?t<p.left?-1:1:0;u=!a||(a>0?d<e.length-1:d>0)}0==g?n>p.bottom&&(!c||c.bottom<p.bottom)?(a=f,c=p):n<p.top&&(!h||h.top>p.top)&&(l=f,h=p):c&&$y(c,p)?c=Gy(c,p.bottom):h&&$y(h,p)&&(h=Xy(h,p.top))}}if(c&&c.bottom>=n?(i=a,r=c):h&&h.top<=n&&(i=l,r=h),!i)return{node:e,offset:0};let d=Math.max(r.left,Math.min(r.right,t));return 3==i.nodeType?Yy(i,d,n):u&&"false"!=i.contentEditable?Ky(i,d,n):{node:e,offset:Array.prototype.indexOf.call(e.childNodes,i)+(t>=(r.left+r.right)/2?1:0)}}function Yy(e,t,n){let i=e.nodeValue.length,r=-1,s=1e9,o=0;for(let a=0;a<i;a++){let i=Xm(e,a,a+1).getClientRects();for(let l=0;l<i.length;l++){let c=i[l];if(c.top==c.bottom)continue;o||(o=t-c.left);let h=(c.top>n?c.top-n:n-c.bottom)-1;if(c.left-1<=t&&c.right+1>=t&&h<s){let n=t>=(c.left+c.right)/2,i=n;if(yv.chrome||yv.gecko){Xm(e,a).getBoundingClientRect().left==c.right&&(i=!n)}if(h<=0)return{node:e,offset:a+(i?1:0)};r=a+(i?1:0),s=h}}}return{node:e,offset:r>-1?r:o>0?e.nodeValue.length:0}}function Jy(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1;var r,s;let o,a=e.contentDOM.getBoundingClientRect(),l=a.top+e.viewState.paddingTop,{docHeight:c}=e.viewState,{x:h,y:u}=t,d=u-l;if(d<0)return 0;if(d>c)return e.state.doc.length;for(let b=e.viewState.heightOracle.textHeight/2,O=!1;o=e.elementAtHeight(d),o.type!=Dv.Text;)for(;d=i>0?o.bottom+b:o.top-b,!(d>=0&&d<=c);){if(O)return n?null:0;O=!0,i=-i}u=l+d;let f=o.from;if(f<e.viewport.from)return 0==e.viewport.from?0:n?null:Zy(e,a,o,h,u);if(f>e.viewport.to)return e.viewport.to==e.state.doc.length?e.state.doc.length:n?null:Zy(e,a,o,h,u);let p=e.dom.ownerDocument,g=e.root.elementFromPoint?e.root:p,m=g.elementFromPoint(h,u);m&&!e.contentDOM.contains(m)&&(m=null),m||(h=Math.max(a.left+1,Math.min(a.right-1,h)),m=g.elementFromPoint(h,u),m&&!e.contentDOM.contains(m)&&(m=null));let v,y=-1;if(m&&0!=(null===(r=e.docView.nearest(m))||void 0===r?void 0:r.isEditable))if(p.caretPositionFromPoint){let e=p.caretPositionFromPoint(h,u);e&&({offsetNode:v,offset:y}=e)}else if(p.caretRangeFromPoint){let t=p.caretRangeFromPoint(h,u);t&&(({startContainer:v,startOffset:y}=t),(!e.contentDOM.contains(v)||yv.safari&&function(e,t,n){let i;if(3!=e.nodeType||t!=(i=e.nodeValue.length))return!1;for(let r=e.nextSibling;r;r=r.nextSibling)if(1!=r.nodeType||"BR"!=r.nodeName)return!1;return Xm(e,i-1,i).getBoundingClientRect().left>n}(v,y,h)||yv.chrome&&function(e,t,n){if(0!=t)return!1;for(let r=e;;){let e=r.parentNode;if(!e||1!=e.nodeType||e.firstChild!=r)return!1;if(e.classList.contains("cm-line"))break;r=e}let i=1==e.nodeType?e.getBoundingClientRect():Xm(e,0,Math.max(e.nodeValue.length,1)).getBoundingClientRect();return n-i.left>5}(v,y,h))&&(v=void 0))}if(!v||!e.docView.dom.contains(v)){let t=Nv.find(e.docView,f);if(!t)return d>o.top+o.height/2?o.to:o.from;({node:v,offset:y}=Ky(t.dom,h,u))}let w=e.docView.nearest(v);if(!w)return null;if(w.isWidget&&1==(null===(s=w.dom)||void 0===s?void 0:s.nodeType)){let e=w.dom.getBoundingClientRect();return t.y<e.top||t.y<=e.bottom&&t.x<=(e.left+e.right)/2?w.posAtStart:w.posAtEnd}return w.localPosFromDOM(v,y)+w.posAtStart}function Zy(e,t,n,i,r){let s=Math.round((i-t.left)*e.defaultCharacterWidth);if(e.lineWrapping&&n.height>1.5*e.defaultLineHeight){let t=e.viewState.heightOracle.textHeight;s+=Math.floor((r-n.top-.5*(e.defaultLineHeight-t))/t)*e.viewState.heightOracle.lineLength}let o=e.state.sliceDoc(n.from,n.to);return n.from+wm(o,s,e.state.tabSize)}function ew(e,t){let n=e.lineBlockAt(t);if(Array.isArray(n.type))for(let i of n.type)if(i.to>t||i.to==t&&(i.to==n.to||i.type==Dv.Text))return i;return n}function tw(e,t,n,i){let r=e.state.doc.lineAt(t.head),s=e.bidiSpans(r),o=e.textDirectionAt(r.from);for(let a=t,l=null;;){let t=ly(r,s,o,a,n),c=ay;if(!t){if(r.number==(n?e.state.doc.lines:1))return a;c="\n",r=e.state.doc.line(r.number+(n?1:-1)),s=e.bidiSpans(r),t=e.visualLineSide(r,!n)}if(l){if(!l(c))return a}else{if(!i)return t;l=i(c)}a=t}}function nw(e,t,n){for(;;){let i=0;for(let r of e)r.between(t-1,t+1,((e,r,s)=>{if(t>e&&t<r){let s=i||n||(t-e<r-t?-1:1);t=s<0?e:r,i=s}}));if(!i)return t}}function iw(e,t,n){let i=nw(e.state.facet(Ry).map((t=>t(e))),n.from,t.head>n.from?-1:1);return i==n.from?n:cg.cursor(i,i<n.from?1:-1)}class rw{setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}constructor(e){this.view=e,this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.pendingIOSKey=void 0,this.tabFocusMode=-1,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastContextMenu=0,this.scrollHandlers=[],this.handlers=Object.create(null),this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.mouseSelection=null,this.draggedContent=null,this.handleEvent=this.handleEvent.bind(this),this.notifiedFocused=e.hasFocus,yv.safari&&e.contentDOM.addEventListener("input",(()=>null)),yv.gecko&&function(e){Nw.has(e)||(Nw.add(e),e.addEventListener("copy",(()=>{})),e.addEventListener("cut",(()=>{})))}(e.contentDOM.ownerDocument)}handleEvent(e){(function(e,t){if(!t.bubbles)return!0;if(t.defaultPrevented)return!1;for(let n,i=t.target;i!=e.contentDOM;i=i.parentNode)if(!i||11==i.nodeType||(n=nv.get(i))&&n.ignoreEvent(t))return!1;return!0})(this.view,e)&&!this.ignoreDuringComposition(e)&&("keydown"==e.type&&this.keydown(e)||this.runHandlers(e.type,e))}runHandlers(e,t){let n=this.handlers[e];if(n){for(let e of n.observers)e(this.view,t);for(let e of n.handlers){if(t.defaultPrevented)break;if(e(this.view,t)){t.preventDefault();break}}}}ensureHandlers(e){let t=ow(e),n=this.handlers,i=this.view.contentDOM;for(let r in t)if("scroll"!=r){let e=!t[r].handlers.length,s=n[r];s&&e!=!s.handlers.length&&(i.removeEventListener(r,this.handleEvent),s=null),s||i.addEventListener(r,this.handleEvent,{passive:e})}for(let r in n)"scroll"==r||t[r]||i.removeEventListener(r,this.handleEvent);this.handlers=t}keydown(e){if(this.lastKeyCode=e.keyCode,this.lastKeyTime=Date.now(),9==e.keyCode&&this.tabFocusMode>-1&&(!this.tabFocusMode||Date.now()<=this.tabFocusMode))return!0;if(this.tabFocusMode>0&&27!=e.keyCode&&cw.indexOf(e.keyCode)<0&&(this.tabFocusMode=-1),yv.android&&yv.chrome&&!e.synthetic&&(13==e.keyCode||8==e.keyCode))return this.view.observer.delayAndroidKey(e.key,e.keyCode),!0;let t;return!yv.ios||e.synthetic||e.altKey||e.metaKey||!((t=aw.find((t=>t.keyCode==e.keyCode)))&&!e.ctrlKey||lw.indexOf(e.key)>-1&&e.ctrlKey&&!e.shiftKey)?(229!=e.keyCode&&this.view.observer.forceFlush(),!1):(this.pendingIOSKey=t||e,setTimeout((()=>this.flushIOSKey()),250),!0)}flushIOSKey(e){let t=this.pendingIOSKey;return!!t&&(!("Enter"==t.key&&e&&e.from<e.to&&/^\S+$/.test(e.insert.toString()))&&(this.pendingIOSKey=void 0,Gm(this.view.contentDOM,t.key,t.keyCode,t instanceof KeyboardEvent?t:void 0)))}ignoreDuringComposition(e){return!!/^key/.test(e.type)&&(this.composing>0||!!(yv.safari&&!yv.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100)&&(this.compositionPendingKey=!1,!0))}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.view.observer.update(e),this.mouseSelection&&this.mouseSelection.update(e),this.draggedContent&&e.docChanged&&(this.draggedContent=this.draggedContent.map(e.changes)),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}function sw(e,t){return(n,i)=>{try{return t.call(e,i,n)}catch(kj){Sy(n.state,kj)}}}function ow(e){let t=Object.create(null);function n(e){return t[e]||(t[e]={observers:[],handlers:[]})}for(let i of e){let e=i.spec;if(e&&e.domEventHandlers)for(let t in e.domEventHandlers){let r=e.domEventHandlers[t];r&&n(t).handlers.push(sw(i.value,r))}if(e&&e.domEventObservers)for(let t in e.domEventObservers){let r=e.domEventObservers[t];r&&n(t).observers.push(sw(i.value,r))}}for(let i in dw)n(i).handlers.push(dw[i]);for(let i in fw)n(i).observers.push(fw[i]);return t}const aw=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],lw="dthko",cw=[16,17,18,20,91,92,224,225];function hw(e){return.7*Math.max(0,e)+8}class uw{constructor(e,t,n,i){this.view=e,this.startEvent=t,this.style=n,this.mustSelect=i,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=t,this.scrollParents=function(e){let t,n,i=e.ownerDocument;for(let r=e.parentNode;r&&!(r==i.body||t&&n);)if(1==r.nodeType)!n&&r.scrollHeight>r.clientHeight&&(n=r),!t&&r.scrollWidth>r.clientWidth&&(t=r),r=r.assignedSlot||r.parentNode;else{if(11!=r.nodeType)break;r=r.host}return{x:t,y:n}}(e.contentDOM),this.atoms=e.state.facet(Ry).map((t=>t(e)));let r=e.contentDOM.ownerDocument;r.addEventListener("mousemove",this.move=this.move.bind(this)),r.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=t.shiftKey,this.multiple=e.state.facet(em.allowMultipleSelections)&&function(e,t){let n=e.state.facet(hy);return n.length?n[0](t):yv.mac?t.metaKey:t.ctrlKey}(e,t),this.dragging=!(!function(e,t){let{main:n}=e.state.selection;if(n.empty)return!1;let i=Im(e.root);if(!i||0==i.rangeCount)return!0;let r=i.getRangeAt(0).getClientRects();for(let s=0;s<r.length;s++){let e=r[s];if(e.left<=t.clientX&&e.right>=t.clientX&&e.top<=t.clientY&&e.bottom>=t.clientY)return!0}return!1}(e,t)||1!=Tw(t))&&null}start(e){!1===this.dragging&&this.select(e)}move(e){if(0==e.buttons)return this.destroy();if(this.dragging||null==this.dragging&&function(e,t){return Math.max(Math.abs(e.clientX-t.clientX),Math.abs(e.clientY-t.clientY))}(this.startEvent,e)<10)return;this.select(this.lastEvent=e);let t=0,n=0,i=0,r=0,s=this.view.win.innerWidth,o=this.view.win.innerHeight;this.scrollParents.x&&({left:i,right:s}=this.scrollParents.x.getBoundingClientRect()),this.scrollParents.y&&({top:r,bottom:o}=this.scrollParents.y.getBoundingClientRect());let a=Qy(this.view);e.clientX-a.left<=i+6?t=-hw(i-e.clientX):e.clientX+a.right>=s-6&&(t=hw(e.clientX-s)),e.clientY-a.top<=r+6?n=-hw(r-e.clientY):e.clientY+a.bottom>=o-6&&(n=hw(e.clientY-o)),this.setScrollSpeed(t,n)}up(e){null==this.dragging&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=this.view.inputState.draggedContent=null}setScrollSpeed(e,t){this.scrollSpeed={x:e,y:t},e||t?this.scrolling<0&&(this.scrolling=setInterval((()=>this.scroll()),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){let{x:e,y:t}=this.scrollSpeed;e&&this.scrollParents.x&&(this.scrollParents.x.scrollLeft+=e,e=0),t&&this.scrollParents.y&&(this.scrollParents.y.scrollTop+=t,t=0),(e||t)&&this.view.win.scrollBy(e,t),!1===this.dragging&&this.select(this.lastEvent)}skipAtoms(e){let t=null;for(let n=0;n<e.ranges.length;n++){let i=e.ranges[n],r=null;if(i.empty){let e=nw(this.atoms,i.from,0);e!=i.from&&(r=cg.cursor(e,-1))}else{let e=nw(this.atoms,i.from,-1),t=nw(this.atoms,i.to,1);e==i.from&&t==i.to||(r=cg.range(i.from==i.anchor?e:t,i.from==i.head?e:t))}r&&(t||(t=e.ranges.slice()),t[n]=r)}return t?cg.create(t,e.mainIndex):e}select(e){let{view:t}=this,n=this.skipAtoms(this.style.get(e,this.extend,this.multiple));!this.mustSelect&&n.eq(t.state.selection,!1===this.dragging)||this.view.dispatch({selection:n,userEvent:"select.pointer"}),this.mustSelect=!1}update(e){e.transactions.some((e=>e.isUserEvent("input.type")))?this.destroy():this.style.update(e)&&setTimeout((()=>this.select(this.lastEvent)),20)}}const dw=Object.create(null),fw=Object.create(null),pw=yv.ie&&yv.ie_version<15||yv.ios&&yv.webkit_version<604;function gw(e,t){let n,{state:i}=e,r=1,s=i.toText(t),o=s.lines==i.selection.ranges.length;if(null!=Ew&&i.selection.ranges.every((e=>e.empty))&&Ew==s.toString()){let e=-1;n=i.changeByRange((n=>{let a=i.doc.lineAt(n.from);if(a.from==e)return{range:n};e=a.from;let l=i.toText((o?s.line(r++).text:t)+i.lineBreak);return{changes:{from:a.from,insert:l},range:cg.cursor(n.from+l.length)}}))}else n=o?i.changeByRange((e=>{let t=s.line(r++);return{changes:{from:e.from,to:e.to,insert:t.text},range:cg.cursor(e.from+t.length)}})):i.replaceSelection(s);e.dispatch(n,{userEvent:"input.paste",scrollIntoView:!0})}function mw(e,t,n,i){if(1==i)return cg.cursor(t,n);if(2==i)return function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=e.charCategorizer(t),r=e.doc.lineAt(t),s=t-r.from;if(0==r.length)return cg.cursor(t);0==s?n=1:s==r.length&&(n=-1);let o=s,a=s;n<0?o=Bp(r.text,s,!1):a=Bp(r.text,s);let l=i(r.text.slice(o,a));for(;o>0;){let e=Bp(r.text,o,!1);if(i(r.text.slice(e,o))!=l)break;o=e}for(;a<r.length;){let e=Bp(r.text,a);if(i(r.text.slice(a,e))!=l)break;a=e}return cg.range(o+r.from,a+r.from)}(e.state,t,n);{let n=Nv.find(e.docView,t),i=e.state.doc.lineAt(n?n.posAtEnd:t),r=n?n.posAtStart:i.from,s=n?n.posAtEnd:i.to;return s<e.state.doc.length&&s==i.to&&s++,cg.range(r,s)}}fw.scroll=e=>{e.inputState.lastScrollTop=e.scrollDOM.scrollTop,e.inputState.lastScrollLeft=e.scrollDOM.scrollLeft},dw.keydown=(e,t)=>(e.inputState.setSelectionOrigin("select"),27==t.keyCode&&0!=e.inputState.tabFocusMode&&(e.inputState.tabFocusMode=Date.now()+2e3),!1),fw.touchstart=(e,t)=>{e.inputState.lastTouchTime=Date.now(),e.inputState.setSelectionOrigin("select.pointer")},fw.touchmove=e=>{e.inputState.setSelectionOrigin("select.pointer")},dw.mousedown=(e,t)=>{if(e.observer.flush(),e.inputState.lastTouchTime>Date.now()-2e3)return!1;let n=null;for(let i of e.state.facet(dy))if(n=i(e,t),n)break;if(n||0!=t.button||(n=function(e,t){let n=bw(e,t),i=Tw(t),r=e.state.selection;return{update(e){e.docChanged&&(n.pos=e.changes.mapPos(n.pos),r=r.map(e.changes))},get(t,s,o){let a,l=bw(e,t),c=mw(e,l.pos,l.bias,i);if(n.pos!=l.pos&&!s){let t=mw(e,n.pos,n.bias,i),r=Math.min(t.from,c.from),s=Math.max(t.to,c.to);c=r<c.from?cg.range(r,s):cg.range(s,r)}return s?r.replaceRange(r.main.extend(c.from,c.to)):o&&1==i&&r.ranges.length>1&&(a=function(e,t){for(let n=0;n<e.ranges.length;n++){let{from:i,to:r}=e.ranges[n];if(i<=t&&r>=t)return cg.create(e.ranges.slice(0,n).concat(e.ranges.slice(n+1)),e.mainIndex==n?0:e.mainIndex-(e.mainIndex>n?1:0))}return null}(r,l.pos))?a:o?r.addRange(c):cg.create([c])}}}(e,t)),n){let i=!e.hasFocus;e.inputState.startMouseSelection(new uw(e,t,n,i)),i&&e.observer.ignore((()=>{$m(e.contentDOM);let t=e.root.activeElement;t&&!t.contains(e.contentDOM)&&t.blur()}));let r=e.inputState.mouseSelection;if(r)return r.start(t),!1===r.dragging}return!1};let vw=(e,t)=>e>=t.top&&e<=t.bottom,yw=(e,t,n)=>vw(t,n)&&e>=n.left&&e<=n.right;function ww(e,t,n,i){let r=Nv.find(e.docView,t);if(!r)return 1;let s=t-r.posAtStart;if(0==s)return 1;if(s==r.length)return-1;let o=r.coordsAt(s,-1);if(o&&yw(n,i,o))return-1;let a=r.coordsAt(s,1);return a&&yw(n,i,a)?1:o&&vw(i,o)?-1:1}function bw(e,t){let n=e.posAtCoords({x:t.clientX,y:t.clientY},!1);return{pos:n,bias:ww(e,n,t.clientX,t.clientY)}}const Ow=yv.ie&&yv.ie_version<=11;let kw=null,Sw=0,xw=0;function Tw(e){if(!Ow)return e.detail;let t=kw,n=xw;return kw=e,xw=Date.now(),Sw=!t||n>Date.now()-400&&Math.abs(t.clientX-e.clientX)<2&&Math.abs(t.clientY-e.clientY)<2?(Sw+1)%3:1}function Cw(e,t,n,i){if(!n)return;let r=e.posAtCoords({x:t.clientX,y:t.clientY},!1),{draggedContent:s}=e.inputState,o=i&&s&&function(e,t){let n=e.state.facet(uy);return n.length?n[0](t):yv.mac?!t.altKey:!t.ctrlKey}(e,t)?{from:s.from,to:s.to}:null,a={from:r,insert:n},l=e.state.changes(o?[o,a]:a);e.focus(),e.dispatch({changes:l,selection:{anchor:l.mapPos(r,-1),head:l.mapPos(r,1)},userEvent:o?"move.drop":"input.drop"}),e.inputState.draggedContent=null}dw.dragstart=(e,t)=>{let{selection:{main:n}}=e.state;if(t.target.draggable){let i=e.docView.nearest(t.target);if(i&&i.isWidget){let e=i.posAtStart,t=e+i.length;(e>=n.to||t<=n.from)&&(n=cg.range(e,t))}}let{inputState:i}=e;return i.mouseSelection&&(i.mouseSelection.dragging=!0),i.draggedContent=n,t.dataTransfer&&(t.dataTransfer.setData("Text",e.state.sliceDoc(n.from,n.to)),t.dataTransfer.effectAllowed="copyMove"),!1},dw.dragend=e=>(e.inputState.draggedContent=null,!1),dw.drop=(e,t)=>{if(!t.dataTransfer)return!1;if(e.state.readOnly)return!0;let n=t.dataTransfer.files;if(n&&n.length){let i=Array(n.length),r=0,s=()=>{++r==n.length&&Cw(e,t,i.filter((e=>null!=e)).join(e.state.lineBreak),!1)};for(let e=0;e<n.length;e++){let t=new FileReader;t.onerror=s,t.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(t.result)||(i[e]=t.result),s()},t.readAsText(n[e])}return!0}{let n=t.dataTransfer.getData("Text");if(n)return Cw(e,t,n,!0),!0}return!1},dw.paste=(e,t)=>{if(e.state.readOnly)return!0;e.observer.flush();let n=pw?null:t.clipboardData;return n?(gw(e,n.getData("text/plain")||n.getData("text/uri-list")),!0):(function(e){let t=e.dom.parentNode;if(!t)return;let n=t.appendChild(document.createElement("textarea"));n.style.cssText="position: fixed; left: -10000px; top: 10px",n.focus(),setTimeout((()=>{e.focus(),n.remove(),gw(e,n.value)}),50)}(e),!1)};let Ew=null;dw.copy=dw.cut=(e,t)=>{let{text:n,ranges:i,linewise:r}=function(e){let t=[],n=[],i=!1;for(let r of e.selection.ranges)r.empty||(t.push(e.sliceDoc(r.from,r.to)),n.push(r));if(!t.length){let r=-1;for(let{from:i}of e.selection.ranges){let s=e.doc.lineAt(i);s.number>r&&(t.push(s.text),n.push({from:s.from,to:Math.min(e.doc.length,s.to+1)})),r=s.number}i=!0}return{text:t.join(e.lineBreak),ranges:n,linewise:i}}(e.state);if(!n&&!r)return!1;Ew=r?n:null,"cut"!=t.type||e.state.readOnly||e.dispatch({changes:i,scrollIntoView:!0,userEvent:"delete.cut"});let s=pw?null:t.clipboardData;return s?(s.clearData(),s.setData("text/plain",n),!0):(function(e,t){let n=e.dom.parentNode;if(!n)return;let i=n.appendChild(document.createElement("textarea"));i.style.cssText="position: fixed; left: -10000px; top: 10px",i.value=t,i.focus(),i.selectionEnd=t.length,i.selectionStart=0,setTimeout((()=>{i.remove(),e.focus()}),50)}(e,n),!1)};const _w=jg.define();function Aw(e,t){let n=[];for(let i of e.facet(my)){let r=i(e,t);r&&n.push(r)}return n?e.update({effects:n,annotations:_w.of(!0)}):null}function Pw(e){setTimeout((()=>{let t=e.hasFocus;if(t!=e.inputState.notifiedFocused){let n=Aw(e.state,t);n?e.dispatch(n):e.update([])}}),10)}fw.focus=e=>{e.inputState.lastFocusTime=Date.now(),e.scrollDOM.scrollTop||!e.inputState.lastScrollTop&&!e.inputState.lastScrollLeft||(e.scrollDOM.scrollTop=e.inputState.lastScrollTop,e.scrollDOM.scrollLeft=e.inputState.lastScrollLeft),Pw(e)},fw.blur=e=>{e.observer.clearSelectionRange(),Pw(e)},fw.compositionstart=fw.compositionupdate=e=>{e.observer.editContext||(null==e.inputState.compositionFirstChange&&(e.inputState.compositionFirstChange=!0),e.inputState.composing<0&&(e.inputState.composing=0))},fw.compositionend=e=>{e.observer.editContext||(e.inputState.composing=-1,e.inputState.compositionEndedAt=Date.now(),e.inputState.compositionPendingKey=!0,e.inputState.compositionPendingChange=e.observer.pendingRecords().length>0,e.inputState.compositionFirstChange=null,yv.chrome&&yv.android?e.observer.flushSoon():e.inputState.compositionPendingChange?Promise.resolve().then((()=>e.observer.flush())):setTimeout((()=>{e.inputState.composing<0&&e.docView.hasComposition&&e.update([])}),50))},fw.contextmenu=e=>{e.inputState.lastContextMenu=Date.now()},dw.beforeinput=(e,t)=>{var n;let i;if(yv.chrome&&yv.android&&(i=aw.find((e=>e.inputType==t.inputType)))&&(e.observer.delayAndroidKey(i.key,i.keyCode),"Backspace"==i.key||"Delete"==i.key)){let t=(null===(n=window.visualViewport)||void 0===n?void 0:n.height)||0;setTimeout((()=>{var n;((null===(n=window.visualViewport)||void 0===n?void 0:n.height)||0)>t+10&&e.hasFocus&&(e.contentDOM.blur(),e.focus())}),100)}return yv.ios&&"deleteContentForward"==t.inputType&&e.observer.flushSoon(),yv.safari&&"insertText"==t.inputType&&e.inputState.composing>=0&&setTimeout((()=>fw.compositionend(e,t)),20),!1};const Nw=new Set;const Iw=["pre-wrap","normal","pre-line","break-spaces"];class Rw{constructor(e){this.lineWrapping=e,this.doc=Pp.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30,this.heightChanged=!1}heightForGap(e,t){let n=this.doc.lineAt(t).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(n+=Math.max(0,Math.ceil((t-e-n*this.lineLength*.5)/this.lineLength))),this.lineHeight*n}heightForLine(e){if(!this.lineWrapping)return this.lineHeight;return(1+Math.max(0,Math.ceil((e-this.lineLength)/(this.lineLength-5))))*this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return Iw.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let t=!1;for(let n=0;n<e.length;n++){let i=e[n];i<0?n++:this.heightSamples[Math.floor(10*i)]||(t=!0,this.heightSamples[Math.floor(10*i)]=!0)}return t}refresh(e,t,n,i,r,s){let o=Iw.indexOf(e)>-1,a=Math.round(t)!=Math.round(this.lineHeight)||this.lineWrapping!=o;if(this.lineWrapping=o,this.lineHeight=t,this.charWidth=n,this.textHeight=i,this.lineLength=r,a){this.heightSamples={};for(let e=0;e<s.length;e++){let t=s[e];t<0?e++:this.heightSamples[Math.floor(10*t)]=!0}}return a}}class Dw{constructor(e,t){this.from=e,this.heights=t,this.index=0}get more(){return this.index<this.heights.length}}class Mw{constructor(e,t,n,i,r){this.from=e,this.length=t,this.top=n,this.height=i,this._content=r}get type(){return"number"==typeof this._content?Dv.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof zv?this._content.widget:null}get widgetLineBreaks(){return"number"==typeof this._content?this._content:0}join(e){let t=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(e._content)?e._content:[e]);return new Mw(this.from,this.length+e.length,this.top,this.height+e.height,t)}}var Lw=function(e){return e[e.ByPos=0]="ByPos",e[e.ByHeight=1]="ByHeight",e[e.ByPosNoHeight=2]="ByPosNoHeight",e}(Lw||(Lw={}));const Qw=.001;class zw{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2;this.length=e,this.height=t,this.flags=n}get outdated(){return(2&this.flags)>0}set outdated(e){this.flags=(e?2:0)|-3&this.flags}setHeight(e,t){this.height!=t&&(Math.abs(this.height-t)>Qw&&(e.heightChanged=!0),this.height=t)}replace(e,t,n){return zw.of(n)}decomposeLeft(e,t){t.push(this)}decomposeRight(e,t){t.push(this)}applyChanges(e,t,n,i){let r=this,s=n.doc;for(let o=i.length-1;o>=0;o--){let{fromA:a,toA:l,fromB:c,toB:h}=i[o],u=r.lineAt(a,Lw.ByPosNoHeight,n.setDoc(t),0,0),d=u.to>=l?u:r.lineAt(l,Lw.ByPosNoHeight,n,0,0);for(h+=d.to-l,l=d.to;o>0&&u.from<=i[o-1].toA;)a=i[o-1].fromA,c=i[o-1].fromB,o--,a<u.from&&(u=r.lineAt(a,Lw.ByPosNoHeight,n,0,0));c+=u.from-a,a=u.from;let f=Bw.build(n.setDoc(s),e,c,h);r=r.replace(a,l,f)}return r.updateHeight(n,0)}static empty(){return new Uw(0,0)}static of(e){if(1==e.length)return e[0];let t=0,n=e.length,i=0,r=0;for(;;)if(t==n)if(i>2*r){let r=e[t-1];r.break?e.splice(--t,1,r.left,null,r.right):e.splice(--t,1,r.left,r.right),n+=1+r.break,i-=r.size}else{if(!(r>2*i))break;{let t=e[n];t.break?e.splice(n,1,t.left,null,t.right):e.splice(n,1,t.left,t.right),n+=2+t.break,r-=t.size}}else if(i<r){let n=e[t++];n&&(i+=n.size)}else{let t=e[--n];t&&(r+=t.size)}let s=0;return null==e[t-1]?(s=1,t--):null==e[t]&&(s=1,n++),new Fw(zw.of(e.slice(0,t)),s,zw.of(e.slice(n)))}}zw.prototype.size=1;class jw extends zw{constructor(e,t,n){super(e,t),this.deco=n}blockAt(e,t,n,i){return new Mw(i,this.length,n,this.height,this.deco||0)}lineAt(e,t,n,i,r){return this.blockAt(0,n,i,r)}forEachLine(e,t,n,i,r,s){e<=r+this.length&&t>=r&&s(this.blockAt(0,n,i,r))}updateHeight(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>3?arguments[3]:void 0;return n&&n.from<=t&&n.more&&this.setHeight(e,n.heights[n.index++]),this.outdated=!1,this}toString(){return"block(".concat(this.length,")")}}class Uw extends jw{constructor(e,t){super(e,t,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0}blockAt(e,t,n,i){return new Mw(i,this.length,n,this.height,this.breaks)}replace(e,t,n){let i=n[0];return 1==n.length&&(i instanceof Uw||i instanceof Vw&&4&i.flags)&&Math.abs(this.length-i.length)<10?(i instanceof Vw?i=new Uw(i.length,this.height):i.height=this.height,this.outdated||(i.outdated=!1),i):zw.of(n)}updateHeight(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3?arguments[3]:void 0;return i&&i.from<=t&&i.more?this.setHeight(e,i.heights[i.index++]):(n||this.outdated)&&this.setHeight(e,Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))+this.breaks*e.lineHeight),this.outdated=!1,this}toString(){return"line(".concat(this.length).concat(this.collapsed?-this.collapsed:"").concat(this.widgetHeight?":"+this.widgetHeight:"",")")}}class Vw extends zw{constructor(e){super(e,0)}heightMetrics(e,t){let n,i=e.doc.lineAt(t).number,r=e.doc.lineAt(t+this.length).number,s=r-i+1,o=0;if(e.lineWrapping){let t=Math.min(this.height,e.lineHeight*s);n=t/s,this.length>s+1&&(o=(this.height-t)/(this.length-s-1))}else n=this.height/s;return{firstLine:i,lastLine:r,perLine:n,perChar:o}}blockAt(e,t,n,i){let{firstLine:r,lastLine:s,perLine:o,perChar:a}=this.heightMetrics(t,i);if(t.lineWrapping){let r=i+(e<t.lineHeight?0:Math.round(Math.max(0,Math.min(1,(e-n)/this.height))*this.length)),s=t.doc.lineAt(r),l=o+s.length*a,c=Math.max(n,e-l/2);return new Mw(s.from,s.length,c,l,0)}{let i=Math.max(0,Math.min(s-r,Math.floor((e-n)/o))),{from:a,length:l}=t.doc.line(r+i);return new Mw(a,l,n+o*i,o,0)}}lineAt(e,t,n,i,r){if(t==Lw.ByHeight)return this.blockAt(e,n,i,r);if(t==Lw.ByPosNoHeight){let{from:t,to:i}=n.doc.lineAt(e);return new Mw(t,i-t,0,0,0)}let{firstLine:s,perLine:o,perChar:a}=this.heightMetrics(n,r),l=n.doc.lineAt(e),c=o+l.length*a,h=l.number-s,u=i+o*h+a*(l.from-r-h);return new Mw(l.from,l.length,Math.max(i,Math.min(u,i+this.height-c)),c,0)}forEachLine(e,t,n,i,r,s){e=Math.max(e,r),t=Math.min(t,r+this.length);let{firstLine:o,perLine:a,perChar:l}=this.heightMetrics(n,r);for(let c=e,h=i;c<=t;){let t=n.doc.lineAt(c);if(c==e){let n=t.number-o;h+=a*n+l*(e-r-n)}let i=a+l*t.length;s(new Mw(t.from,t.length,h,i,0)),h+=i,c=t.to+1}}replace(e,t,n){let i=this.length-t;if(i>0){let e=n[n.length-1];e instanceof Vw?n[n.length-1]=new Vw(e.length+i):n.push(null,new Vw(i-1))}if(e>0){let t=n[0];t instanceof Vw?n[0]=new Vw(e+t.length):n.unshift(new Vw(e-1),null)}return zw.of(n)}decomposeLeft(e,t){t.push(new Vw(e-1),null)}decomposeRight(e,t){t.push(null,new Vw(this.length-e-1))}updateHeight(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3?arguments[3]:void 0,r=t+this.length;if(i&&i.from<=t+this.length&&i.more){let n=[],s=Math.max(t,i.from),o=-1;for(i.from>t&&n.push(new Vw(i.from-t-1).updateHeight(e,t));s<=r&&i.more;){let t=e.doc.lineAt(s).length;n.length&&n.push(null);let r=i.heights[i.index++];-1==o?o=r:Math.abs(r-o)>=Qw&&(o=-2);let a=new Uw(t,r);a.outdated=!1,n.push(a),s+=t+1}s<=r&&n.push(null,new Vw(r-s).updateHeight(e,s));let a=zw.of(n);return(o<0||Math.abs(a.height-this.height)>=Qw||Math.abs(o-this.heightMetrics(e,t).perLine)>=Qw)&&(e.heightChanged=!0),a}return(n||this.outdated)&&(this.setHeight(e,e.heightForGap(t,t+this.length)),this.outdated=!1),this}toString(){return"gap(".concat(this.length,")")}}class Fw extends zw{constructor(e,t,n){super(e.length+t+n.length,e.height+n.height,t|(e.outdated||n.outdated?2:0)),this.left=e,this.right=n,this.size=e.size+n.size}get break(){return 1&this.flags}blockAt(e,t,n,i){let r=n+this.left.height;return e<r?this.left.blockAt(e,t,n,i):this.right.blockAt(e,t,r,i+this.left.length+this.break)}lineAt(e,t,n,i,r){let s=i+this.left.height,o=r+this.left.length+this.break,a=t==Lw.ByHeight?e<s:e<o,l=a?this.left.lineAt(e,t,n,i,r):this.right.lineAt(e,t,n,s,o);if(this.break||(a?l.to<o:l.from>o))return l;let c=t==Lw.ByPosNoHeight?Lw.ByPosNoHeight:Lw.ByPos;return a?l.join(this.right.lineAt(o,c,n,s,o)):this.left.lineAt(o,c,n,i,r).join(l)}forEachLine(e,t,n,i,r,s){let o=i+this.left.height,a=r+this.left.length+this.break;if(this.break)e<a&&this.left.forEachLine(e,t,n,i,r,s),t>=a&&this.right.forEachLine(e,t,n,o,a,s);else{let l=this.lineAt(a,Lw.ByPos,n,i,r);e<l.from&&this.left.forEachLine(e,l.from-1,n,i,r,s),l.to>=e&&l.from<=t&&s(l),t>l.to&&this.right.forEachLine(l.to+1,t,n,o,a,s)}}replace(e,t,n){let i=this.left.length+this.break;if(t<i)return this.balanced(this.left.replace(e,t,n),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-i,t-i,n));let r=[];e>0&&this.decomposeLeft(e,r);let s=r.length;for(let o of n)r.push(o);if(e>0&&qw(r,s-1),t<this.length){let e=r.length;this.decomposeRight(t,r),qw(r,e)}return zw.of(r)}decomposeLeft(e,t){let n=this.left.length;if(e<=n)return this.left.decomposeLeft(e,t);t.push(this.left),this.break&&(n++,e>=n&&t.push(null)),e>n&&this.right.decomposeLeft(e-n,t)}decomposeRight(e,t){let n=this.left.length,i=n+this.break;if(e>=i)return this.right.decomposeRight(e-i,t);e<n&&this.left.decomposeRight(e,t),this.break&&e<i&&t.push(null),t.push(this.right)}balanced(e,t){return e.size>2*t.size||t.size>2*e.size?zw.of(this.break?[e,null,t]:[e,t]):(this.left=e,this.right=t,this.height=e.height+t.height,this.outdated=e.outdated||t.outdated,this.size=e.size+t.size,this.length=e.length+this.break+t.length,this)}updateHeight(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3?arguments[3]:void 0,{left:r,right:s}=this,o=t+r.length+this.break,a=null;return i&&i.from<=t+r.length&&i.more?a=r=r.updateHeight(e,t,n,i):r.updateHeight(e,t,n),i&&i.from<=o+s.length&&i.more?a=s=s.updateHeight(e,o,n,i):s.updateHeight(e,o,n),a?this.balanced(r,s):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function qw(e,t){let n,i;null==e[t]&&(n=e[t-1])instanceof Vw&&(i=e[t+1])instanceof Vw&&e.splice(t-1,3,new Vw(n.length+1+i.length))}class Bw{constructor(e,t){this.pos=e,this.oracle=t,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,t){if(this.lineStart>-1){let e=Math.min(t,this.lineEnd),n=this.nodes[this.nodes.length-1];n instanceof Uw?n.length+=e-this.pos:(e>this.pos||!this.isCovered)&&this.nodes.push(new Uw(e-this.pos,-1)),this.writtenTo=e,t>e&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=t}point(e,t,n){if(e<t||n.heightRelevant){let i=n.widget?n.widget.estimatedHeight:0,r=n.widget?n.widget.lineBreaks:0;i<0&&(i=this.oracle.lineHeight);let s=t-e;n.block?this.addBlock(new jw(s,i,n)):(s||r||i>=5)&&this.addLineDeco(i,r,s)}else t>e&&this.span(e,t);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:t}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=t,this.writtenTo<e&&((this.writtenTo<e-1||null==this.nodes[this.nodes.length-1])&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new Uw(this.pos-e,-1)),this.writtenTo=this.pos}blankContent(e,t){let n=new Vw(t-e);return this.oracle.doc.lineAt(e).to==t&&(n.flags|=4),n}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof Uw)return e;let t=new Uw(0,-1);return this.nodes.push(t),t}addBlock(e){this.enterLine();let t=e.deco;t&&t.startSide>0&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,t&&t.endSide>0&&(this.covering=e)}addLineDeco(e,t,n){let i=this.ensureLine();i.length+=n,i.collapsed+=n,i.widgetHeight=Math.max(i.widgetHeight,e),i.breaks+=t,this.writtenTo=this.pos=this.pos+n}finish(e){let t=0==this.nodes.length?null:this.nodes[this.nodes.length-1];!(this.lineStart>-1)||t instanceof Uw||this.isCovered?(this.writtenTo<this.pos||null==t)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos)):this.nodes.push(new Uw(0,-1));let n=e;for(let i of this.nodes)i instanceof Uw&&i.updateHeight(this.oracle,n),n+=i?i.length:1;return this.nodes}static build(e,t,n,i){let r=new Bw(n,e);return om.spans(t,n,i,r,0),r.finish(n)}}class Ww{constructor(){this.changes=[]}compareRange(){}comparePoint(e,t,n,i){(e<t||n&&n.heightRelevant||i&&i.heightRelevant)&&Uv(e,t,this.changes,5)}}function Hw(e,t){let n=e.getBoundingClientRect(),i=e.ownerDocument,r=i.defaultView||window,s=Math.max(0,n.left),o=Math.min(r.innerWidth,n.right),a=Math.max(0,n.top),l=Math.min(r.innerHeight,n.bottom);for(let c=e.parentNode;c&&c!=i.body;)if(1==c.nodeType){let t=c,n=window.getComputedStyle(t);if((t.scrollHeight>t.clientHeight||t.scrollWidth>t.clientWidth)&&"visible"!=n.overflow){let n=t.getBoundingClientRect();s=Math.max(s,n.left),o=Math.min(o,n.right),a=Math.max(a,n.top),l=c==e.parentNode?n.bottom:Math.min(l,n.bottom)}c="absolute"==n.position||"fixed"==n.position?t.offsetParent:t.parentNode}else{if(11!=c.nodeType)break;c=c.host}return{left:s-n.left,right:Math.max(s,o)-n.left,top:a-(n.top+t),bottom:Math.max(a,l)-(n.top+t)}}function $w(e,t){let n=e.getBoundingClientRect();return{left:0,right:n.right-n.left,top:t,bottom:n.bottom-(n.top+t)}}class Xw{constructor(e,t,n){this.from=e,this.to=t,this.size=n}static same(e,t){if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++){let i=e[n],r=t[n];if(i.from!=r.from||i.to!=r.to||i.size!=r.size)return!1}return!0}draw(e,t){return Mv.replace({widget:new Gw(this.size*(t?e.scaleY:e.scaleX),t)}).range(this.from,this.to)}}class Gw extends Rv{constructor(e,t){super(),this.size=e,this.vertical=t}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class Kw{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!1,this.scaleX=1,this.scaleY=1,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=eb,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=Bv.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let t=e.facet(Py).some((e=>"function"!=typeof e&&"cm-lineWrapping"==e.class));this.heightOracle=new Rw(t),this.stateDeco=e.facet(Ny).filter((e=>"function"!=typeof e)),this.heightMap=zw.empty().applyChanges(this.stateDeco,Pp.empty,this.heightOracle.setDoc(e.doc),[new jy(0,0,0,e.doc.length)]);for(let n=0;n<2&&(this.viewport=this.getViewport(0,null),this.updateForViewport());n++);this.updateViewportLines(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=Mv.set(this.lineGaps.map((e=>e.draw(this,!1)))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:t}=this.state.selection;for(let n=0;n<=1;n++){let i=n?t.head:t.anchor;if(!e.some((e=>{let{from:t,to:n}=e;return i>=t&&i<=n}))){let{from:t,to:n}=this.lineBlockAt(i);e.push(new Yw(t,n))}}return this.viewports=e.sort(((e,t)=>e.from-t.from)),this.updateScaler()}updateScaler(){let e=this.scaler;return this.scaler=this.heightMap.height<=7e6?eb:new tb(this.heightOracle,this.heightMap,this.viewports),e.eq(this.scaler)?0:2}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,(e=>{this.viewportLines.push(nb(e,this.scaler))}))}update(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.state=e.state;let n=this.stateDeco;this.stateDeco=this.state.facet(Ny).filter((e=>"function"!=typeof e));let i=e.changedRanges,r=jy.extendWithRanges(i,function(e,t,n){let i=new Ww;return om.compare(e,t,n,i,0),i.changes}(n,this.stateDeco,e?e.changes:tg.empty(this.state.doc.length))),s=this.heightMap.height,o=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),r),this.heightMap.height!=s&&(e.flags|=2),o?(this.scrollAnchorPos=e.changes.mapPos(o.from,-1),this.scrollAnchorHeight=o.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=this.heightMap.height);let a=r.length?this.mapViewport(this.viewport,e.changes):this.viewport;(t&&(t.range.head<a.from||t.range.head>a.to)||!this.viewportIsAppropriate(a))&&(a=this.getViewport(0,t));let l=a.from!=this.viewport.from||a.to!=this.viewport.to;this.viewport=a,e.flags|=this.updateForViewport(),(l||!e.changes.empty||2&e.flags)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(),t&&(this.scrollTarget=t),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&!e.state.facet(yy)&&(this.mustEnforceCursorAssoc=!0)}measure(e){let t=e.contentDOM,n=window.getComputedStyle(t),i=this.heightOracle,r=n.whiteSpace;this.defaultTextDirection="rtl"==n.direction?Bv.RTL:Bv.LTR;let s=this.heightOracle.mustRefreshForWrapping(r),o=t.getBoundingClientRect(),a=s||this.mustMeasureContent||this.contentDOMHeight!=o.height;this.contentDOMHeight=o.height,this.mustMeasureContent=!1;let l=0,c=0;if(o.width&&o.height){let{scaleX:e,scaleY:n}=qm(t,o);(e>.005&&Math.abs(this.scaleX-e)>.005||n>.005&&Math.abs(this.scaleY-n)>.005)&&(this.scaleX=e,this.scaleY=n,l|=8,s=a=!0)}let h=(parseInt(n.paddingTop)||0)*this.scaleY,u=(parseInt(n.paddingBottom)||0)*this.scaleY;this.paddingTop==h&&this.paddingBottom==u||(this.paddingTop=h,this.paddingBottom=u,l|=10),this.editorWidth!=e.scrollDOM.clientWidth&&(i.lineWrapping&&(a=!0),this.editorWidth=e.scrollDOM.clientWidth,l|=8);let d=e.scrollDOM.scrollTop*this.scaleY;this.scrollTop!=d&&(this.scrollAnchorHeight=-1,this.scrollTop=d),this.scrolledToBottom=Ym(e.scrollDOM);let f=(this.printing?$w:Hw)(t,this.paddingTop),p=f.top-this.pixelViewport.top,g=f.bottom-this.pixelViewport.bottom;this.pixelViewport=f;let m=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(m!=this.inView&&(this.inView=m,m&&(a=!0)),!this.inView&&!this.scrollTarget)return 0;let v=o.width;if(this.contentDOMWidth==v&&this.editorHeight==e.scrollDOM.clientHeight||(this.contentDOMWidth=o.width,this.editorHeight=e.scrollDOM.clientHeight,l|=8),a){let t=e.docView.measureVisibleLineHeights(this.viewport);if(i.mustRefreshForHeights(t)&&(s=!0),s||i.lineWrapping&&Math.abs(v-this.contentDOMWidth)>i.charWidth){let{lineHeight:n,charWidth:o,textHeight:a}=e.docView.measureTextSize();s=n>0&&i.refresh(r,n,o,a,v/o,t),s&&(e.docView.minWidth=0,l|=8)}p>0&&g>0?c=Math.max(p,g):p<0&&g<0&&(c=Math.min(p,g)),i.heightChanged=!1;for(let n of this.viewports){let r=n.from==this.viewport.from?t:e.docView.measureVisibleLineHeights(n);this.heightMap=(s?zw.empty().applyChanges(this.stateDeco,Pp.empty,this.heightOracle,[new jy(0,0,0,e.state.doc.length)]):this.heightMap).updateHeight(i,0,s,new Dw(n.from,r))}i.heightChanged&&(l|=2)}let y=!this.viewportIsAppropriate(this.viewport,c)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return y&&(2&l&&(l|=this.updateScaler()),this.viewport=this.getViewport(c,this.scrollTarget),l|=this.updateForViewport()),(2&l||y)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(s?[]:this.lineGaps,e)),l|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),l}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,t){let n=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),i=this.heightMap,r=this.heightOracle,{visibleTop:s,visibleBottom:o}=this,a=new Yw(i.lineAt(s-1e3*n,Lw.ByHeight,r,0,0).from,i.lineAt(o+1e3*(1-n),Lw.ByHeight,r,0,0).to);if(t){let{head:e}=t.range;if(e<a.from||e>a.to){let n,s=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),o=i.lineAt(e,Lw.ByPos,r,0,0);n="center"==t.y?(o.top+o.bottom)/2-s/2:"start"==t.y||"nearest"==t.y&&e<a.from?o.top:o.bottom-s,a=new Yw(i.lineAt(n-500,Lw.ByHeight,r,0,0).from,i.lineAt(n+s+500,Lw.ByHeight,r,0,0).to)}}return a}mapViewport(e,t){let n=t.mapPos(e.from,-1),i=t.mapPos(e.to,1);return new Yw(this.heightMap.lineAt(n,Lw.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(i,Lw.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate(e){let{from:t,to:n}=e,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(!this.inView)return!0;let{top:r}=this.heightMap.lineAt(t,Lw.ByPos,this.heightOracle,0,0),{bottom:s}=this.heightMap.lineAt(n,Lw.ByPos,this.heightOracle,0,0),{visibleTop:o,visibleBottom:a}=this;return(0==t||r<=o-Math.max(10,Math.min(-i,250)))&&(n==this.state.doc.length||s>=a+Math.max(10,Math.min(i,250)))&&r>o-2e3&&s<a+2e3}mapLineGaps(e,t){if(!e.length||t.empty)return e;let n=[];for(let i of e)t.touchesRange(i.from,i.to)||n.push(new Xw(t.mapPos(i.from),t.mapPos(i.to),i.size));return n}ensureLineGaps(e,t){let n=this.heightOracle.lineWrapping,i=n?1e4:2e3,r=i>>1,s=i<<1;if(this.defaultTextDirection!=Bv.LTR&&!n)return[];let o=[],a=(i,s,l,c)=>{if(s-i<r)return;let h=this.state.selection.main,u=[h.from];h.empty||u.push(h.to);for(let e of u)if(e>i&&e<s)return a(i,e-10,l,c),void a(e+10,s,l,c);let d=function(e,t){for(let n of e)if(t(n))return n;return}(e,(e=>e.from>=l.from&&e.to<=l.to&&Math.abs(e.from-i)<r&&Math.abs(e.to-s)<r&&!u.some((t=>e.from<t&&e.to>t))));if(!d){if(s<l.to&&t&&n&&t.visibleRanges.some((e=>e.from<=s&&e.to>=s))){let e=t.moveToLineBoundary(cg.cursor(s),!1,!0).head;e>i&&(s=e)}d=new Xw(i,s,this.gapSize(l,i,s,c))}o.push(d)},l=e=>{if(e.length<s||e.type!=Dv.Text)return;let t=function(e,t,n){let i=[],r=e,s=0;om.spans(n,e,t,{span(){},point(e,t){e>r&&(i.push({from:r,to:e}),s+=e-r),r=t}},20),r<t&&(i.push({from:r,to:t}),s+=t-r);return{total:s,ranges:i}}(e.from,e.to,this.stateDeco);if(t.total<s)return;let r,o,l=this.scrollTarget?this.scrollTarget.range.head:null;if(n){let n,s,a=i/this.heightOracle.lineLength*this.heightOracle.lineHeight;if(null!=l){let i=Zw(t,l),r=((this.visibleBottom-this.visibleTop)/2+a)/e.height;n=i-r,s=i+r}else n=(this.visibleTop-e.top-a)/e.height,s=(this.visibleBottom-e.top+a)/e.height;r=Jw(t,n),o=Jw(t,s)}else{let e,n,s=t.total*this.heightOracle.charWidth,a=i*this.heightOracle.charWidth;if(null!=l){let i=Zw(t,l),r=((this.pixelViewport.right-this.pixelViewport.left)/2+a)/s;e=i-r,n=i+r}else e=(this.pixelViewport.left-a)/s,n=(this.pixelViewport.right+a)/s;r=Jw(t,e),o=Jw(t,n)}r>e.from&&a(e.from,r,e,t),o<e.to&&a(o,e.to,e,t)};for(let c of this.viewportLines)Array.isArray(c.type)?c.type.forEach(l):l(c);return o}gapSize(e,t,n,i){let r=Zw(i,n)-Zw(i,t);return this.heightOracle.lineWrapping?e.height*r:i.total*this.heightOracle.charWidth*r}updateLineGaps(e){Xw.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=Mv.set(e.map((e=>e.draw(this,this.heightOracle.lineWrapping)))))}computeVisibleRanges(){let e=this.stateDeco;this.lineGaps.length&&(e=e.concat(this.lineGapDeco));let t=[];om.spans(e,this.viewport.from,this.viewport.to,{span(e,n){t.push({from:e,to:n})},point(){}},20);let n=t.length!=this.visibleRanges.length||this.visibleRanges.some(((e,n)=>e.from!=t[n].from||e.to!=t[n].to));return this.visibleRanges=t,n?4:0}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find((t=>t.from<=e&&t.to>=e))||nb(this.heightMap.lineAt(e,Lw.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(e){return e>=this.viewportLines[0].top&&e<=this.viewportLines[this.viewportLines.length-1].bottom&&this.viewportLines.find((t=>t.top<=e&&t.bottom>=e))||nb(this.heightMap.lineAt(this.scaler.fromDOM(e),Lw.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(e){let t=this.lineBlockAtHeight(e+8);return t.from>=this.viewport.from||this.viewportLines[0].top-e>200?t:this.viewportLines[0]}elementAtHeight(e){return nb(this.heightMap.blockAt(this.scaler.fromDOM(e),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class Yw{constructor(e,t){this.from=e,this.to=t}}function Jw(e,t){let{total:n,ranges:i}=e;if(t<=0)return i[0].from;if(t>=1)return i[i.length-1].to;let r=Math.floor(n*t);for(let s=0;;s++){let{from:e,to:t}=i[s],n=t-e;if(r<=n)return e+r;r-=n}}function Zw(e,t){let n=0;for(let{from:i,to:r}of e.ranges){if(t<=r){n+=t-i;break}n+=r-i}return n/e.total}const eb={toDOM:e=>e,fromDOM:e=>e,scale:1,eq(e){return e==this}};class tb{constructor(e,t,n){let i=0,r=0,s=0;this.viewports=n.map((n=>{let{from:r,to:s}=n,o=t.lineAt(r,Lw.ByPos,e,0,0).top,a=t.lineAt(s,Lw.ByPos,e,0,0).bottom;return i+=a-o,{from:r,to:s,top:o,bottom:a,domTop:0,domBottom:0}})),this.scale=(7e6-i)/(t.height-i);for(let o of this.viewports)o.domTop=s+(o.top-r)*this.scale,s=o.domBottom=o.domTop+(o.bottom-o.top),r=o.bottom}toDOM(e){for(let t=0,n=0,i=0;;t++){let r=t<this.viewports.length?this.viewports[t]:null;if(!r||e<r.top)return i+(e-n)*this.scale;if(e<=r.bottom)return r.domTop+(e-r.top);n=r.bottom,i=r.domBottom}}fromDOM(e){for(let t=0,n=0,i=0;;t++){let r=t<this.viewports.length?this.viewports[t]:null;if(!r||e<r.domTop)return n+(e-i)/this.scale;if(e<=r.domBottom)return r.top+(e-r.domTop);n=r.bottom,i=r.domBottom}}eq(e){return e instanceof tb&&(this.scale==e.scale&&this.viewports.length==e.viewports.length&&this.viewports.every(((t,n)=>t.from==e.viewports[n].from&&t.to==e.viewports[n].to)))}}function nb(e,t){if(1==t.scale)return e;let n=t.toDOM(e.top),i=t.toDOM(e.bottom);return new Mw(e.from,e.length,n,i-n,Array.isArray(e._content)?e._content.map((e=>nb(e,t))):e._content)}const ib=dg.define({combine:e=>e.join(" ")}),rb=dg.define({combine:e=>e.indexOf(!0)>-1}),sb=Sm.newName(),ob=Sm.newName(),ab=Sm.newName(),lb={"&light":"."+ob,"&dark":"."+ab};function cb(e,t,n){return new Sm(t,{finish:t=>/&/.test(t)?t.replace(/&\w*/,(t=>{if("&"==t)return e;if(!n||!n[t])throw new RangeError("Unsupported selector: ".concat(t));return n[t]})):e+" "+t})}const hb=cb("."+sb,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",minHeight:"100%",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#444"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},".cm-iso":{unicodeBidi:"isolate"},".cm-announced":{position:"fixed",top:"-10000px"},"@media print":{".cm-announced":{display:"none"}},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",insetInlineStart:0,zIndex:200},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",borderRight:"1px solid #ddd"},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top"},".cm-highlightSpace:before":{content:"attr(data-display)",position:"absolute",pointerEvents:"none",color:"#888"},".cm-highlightTab":{backgroundImage:'url(\'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>\')',backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},lb),ub="\uffff";class db{constructor(e,t){this.points=e,this.text="",this.lineSeparator=t.facet(em.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=ub}readRange(e,t){if(!e)return this;let n=e.parentNode;for(let i=e;;){this.findPointBefore(n,i);let e=this.text.length;this.readNode(i);let r=i.nextSibling;if(r==t)break;let s=nv.get(i),o=nv.get(r);(s&&o?s.breakAfter:(s?s.breakAfter:zm(i))||zm(r)&&("BR"!=i.nodeName||i.cmIgnore)&&this.text.length>e)&&this.lineBreak(),i=r}return this.findPointBefore(n,t),this}readTextNode(e){let t=e.nodeValue;for(let n of this.points)n.node==e&&(n.pos=this.text.length+Math.min(n.offset,t.length));for(let n=0,i=this.lineSeparator?null:/\r\n?|\n/g;;){let r,s=-1,o=1;if(this.lineSeparator?(s=t.indexOf(this.lineSeparator,n),o=this.lineSeparator.length):(r=i.exec(t))&&(s=r.index,o=r[0].length),this.append(t.slice(n,s<0?t.length:s)),s<0)break;if(this.lineBreak(),o>1)for(let t of this.points)t.node==e&&t.pos>this.text.length&&(t.pos-=o-1);n=s+o}}readNode(e){if(e.cmIgnore)return;let t=nv.get(e),n=t&&t.overrideDOMText;if(null!=n){this.findPointInside(e,n.length);for(let e=n.iter();!e.next().done;)e.lineBreak?this.lineBreak():this.append(e.value)}else 3==e.nodeType?this.readTextNode(e):"BR"==e.nodeName?e.nextSibling&&this.lineBreak():1==e.nodeType&&this.readRange(e.firstChild,null)}findPointBefore(e,t){for(let n of this.points)n.node==e&&e.childNodes[n.offset]==t&&(n.pos=this.text.length)}findPointInside(e,t){for(let n of this.points)(3==e.nodeType?n.node==e:e.contains(n.node))&&(n.pos=this.text.length+(fb(e,n.node,n.offset)?t:0))}}function fb(e,t,n){for(;;){if(!t||n<Um(t))return!1;if(t==e)return!0;n=Qm(t)+1,t=t.parentNode}}class pb{constructor(e,t){this.node=e,this.offset=t,this.pos=-1}}class gb{constructor(e,t,n,i){this.typeOver=i,this.bounds=null,this.text="",this.domChanged=t>-1;let{impreciseHead:r,impreciseAnchor:s}=e.docView;if(e.state.readOnly&&t>-1)this.newSel=null;else if(t>-1&&(this.bounds=e.docView.domBoundsAround(t,n,0))){let t=r||s?[]:function(e){let t=[];if(e.root.activeElement!=e.contentDOM)return t;let{anchorNode:n,anchorOffset:i,focusNode:r,focusOffset:s}=e.observer.selectionRange;n&&(t.push(new pb(n,i)),r==n&&s==i||t.push(new pb(r,s)));return t}(e),n=new db(t,e.state);n.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=n.text,this.newSel=function(e,t){if(0==e.length)return null;let n=e[0].pos,i=2==e.length?e[1].pos:n;return n>-1&&i>-1?cg.single(n+t,i+t):null}(t,this.bounds.from)}else{let t=e.observer.selectionRange,n=r&&r.node==t.focusNode&&r.offset==t.focusOffset||!Rm(e.contentDOM,t.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(t.focusNode,t.focusOffset),i=s&&s.node==t.anchorNode&&s.offset==t.anchorOffset||!Rm(e.contentDOM,t.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(t.anchorNode,t.anchorOffset),o=e.viewport;if((yv.ios||yv.chrome)&&e.state.selection.main.empty&&n!=i&&(o.from>0||o.to<e.state.doc.length)){let t=Math.min(n,i),r=Math.max(n,i),s=o.from-t,a=o.to-r;0!=s&&1!=s&&0!=t||0!=a&&-1!=a&&r!=e.state.doc.length||(n=0,i=e.state.doc.length)}this.newSel=cg.single(i,n)}}}function mb(e,t){let n,{newSel:i}=t,r=e.state.selection.main,s=e.inputState.lastKeyTime>Date.now()-100?e.inputState.lastKeyCode:-1;if(t.bounds){let{from:i,to:o}=t.bounds,a=r.from,l=null;(8===s||yv.android&&t.text.length<o-i)&&(a=r.to,l="end");let c=function(e,t,n,i){let r=Math.min(e.length,t.length),s=0;for(;s<r&&e.charCodeAt(s)==t.charCodeAt(s);)s++;if(s==r&&e.length==t.length)return null;let o=e.length,a=t.length;for(;o>0&&a>0&&e.charCodeAt(o-1)==t.charCodeAt(a-1);)o--,a--;if("end"==i){n-=o+Math.max(0,s-Math.min(o,a))-s}if(o<s&&e.length<t.length){s-=n<=s&&n>=o?s-n:0,a=s+(a-o),o=s}else if(a<s){s-=n<=s&&n>=a?s-n:0,o=s+(o-a),a=s}return{from:s,toA:o,toB:a}}(e.state.doc.sliceString(i,o,ub),t.text,a-i,l);c&&(yv.chrome&&13==s&&c.toB==c.from+2&&t.text.slice(c.from,c.toB)==ub+ub&&c.toB--,n={from:i+c.from,to:i+c.toA,insert:Pp.of(t.text.slice(c.from,c.toB).split(ub))})}else i&&(!e.hasFocus&&e.state.facet(xy)||i.main.eq(r))&&(i=null);if(!n&&!i)return!1;if(!n&&t.typeOver&&!r.empty&&i&&i.main.empty?n={from:r.from,to:r.to,insert:e.state.doc.slice(r.from,r.to)}:n&&n.from>=r.from&&n.to<=r.to&&(n.from!=r.from||n.to!=r.to)&&r.to-r.from-(n.to-n.from)<=4?n={from:r.from,to:r.to,insert:e.state.doc.slice(r.from,n.from).append(n.insert).append(e.state.doc.slice(n.to,r.to))}:(yv.mac||yv.android)&&n&&n.from==n.to&&n.from==r.head-1&&/^\. ?$/.test(n.insert.toString())&&"off"==e.contentDOM.getAttribute("autocorrect")?(i&&2==n.insert.length&&(i=cg.single(i.main.anchor-1,i.main.head-1)),n={from:r.from,to:r.to,insert:Pp.of([" "])}):yv.chrome&&n&&n.from==n.to&&n.from==r.head&&"\n "==n.insert.toString()&&e.lineWrapping&&(i&&(i=cg.single(i.main.anchor-1,i.main.head-1)),n={from:r.from,to:r.to,insert:Pp.of([" "])}),n)return vb(e,n,i,s);if(i&&!i.main.eq(r)){let t=!1,n="select";return e.inputState.lastSelectionTime>Date.now()-50&&("select"==e.inputState.lastSelectionOrigin&&(t=!0),n=e.inputState.lastSelectionOrigin),e.dispatch({selection:i,scrollIntoView:t,userEvent:n}),!0}return!1}function vb(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1;if(yv.ios&&e.inputState.flushIOSKey(t))return!0;let r=e.state.selection.main;if(yv.android&&(t.to==r.to&&(t.from==r.from||t.from==r.from-1&&" "==e.state.sliceDoc(t.from,r.from))&&1==t.insert.length&&2==t.insert.lines&&Gm(e.contentDOM,"Enter",13)||(t.from==r.from-1&&t.to==r.to&&0==t.insert.length||8==i&&t.insert.length<t.to-t.from&&t.to>r.head)&&Gm(e.contentDOM,"Backspace",8)||t.from==r.from&&t.to==r.to+1&&0==t.insert.length&&Gm(e.contentDOM,"Delete",46)))return!0;let s,o=t.insert.toString();e.inputState.composing>=0&&e.inputState.composing++;let a=()=>s||(s=function(e,t,n){let i,r=e.state,s=r.selection.main;if(t.from>=s.from&&t.to<=s.to&&t.to-t.from>=(s.to-s.from)/3&&(!n||n.main.empty&&n.main.from==t.from+t.insert.length)&&e.inputState.composing<0){let n=s.from<t.from?r.sliceDoc(s.from,t.from):"",o=s.to>t.to?r.sliceDoc(t.to,s.to):"";i=r.replaceSelection(e.state.toText(n+t.insert.sliceString(0,void 0,e.state.lineBreak)+o))}else{let o=r.changes(t),a=n&&n.main.to<=o.newLength?n.main:void 0;if(r.selection.ranges.length>1&&e.inputState.composing>=0&&t.to<=s.to&&t.to>=s.to-10){let l,c=e.state.sliceDoc(t.from,t.to),h=n&&qy(e,n.main.head);if(h){let e=t.insert.length-(t.to-t.from);l={from:h.from,to:h.to-e}}else l=e.state.doc.lineAt(s.head);let u=s.to-t.to,d=s.to-s.from;i=r.changeByRange((n=>{if(n.from==s.from&&n.to==s.to)return{changes:o,range:a||n.map(o)};let i=n.to-u,h=i-c.length;if(n.to-n.from!=d||e.state.sliceDoc(h,i)!=c||n.to>=l.from&&n.from<=l.to)return{range:n};let f=r.changes({from:h,to:i,insert:t.insert}),p=n.to-s.to;return{changes:f,range:a?cg.range(Math.max(0,a.anchor+p),Math.max(0,a.head+p)):n.map(f)}}))}else i={changes:o,selection:a&&r.selection.replaceRange(a)}}let o="input.type";(e.composing||e.inputState.compositionPendingChange&&e.inputState.compositionEndedAt>Date.now()-50)&&(e.inputState.compositionPendingChange=!1,o+=".compose",e.inputState.compositionFirstChange&&(o+=".start",e.inputState.compositionFirstChange=!1));return r.update(i,{userEvent:o,scrollIntoView:!0})}(e,t,n));return e.state.facet(gy).some((n=>n(e,t.from,t.to,o,a)))||e.dispatch(a()),!0}const yb={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},wb=yv.ie&&yv.ie_version<=11;class bb{constructor(e){this.view=e,this.active=!1,this.editContext=null,this.selectionRange=new Bm,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.printQuery=null,this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver((t=>{for(let e of t)this.queue.push(e);(yv.ie&&yv.ie_version<=11||yv.ios&&e.composing)&&t.some((e=>"childList"==e.type&&e.removedNodes.length||"characterData"==e.type&&e.oldValue.length>e.target.nodeValue.length))?this.flushSoon():this.flush()})),!window.EditContext||!1===e.constructor.EDIT_CONTEXT||yv.chrome&&yv.chrome_version<126||(this.editContext=new Sb(e),e.state.facet(xy)&&(e.contentDOM.editContext=this.editContext.editContext)),wb&&(this.onCharData=e=>{this.queue.push({target:e.target,type:"characterData",oldValue:e.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),window.matchMedia&&(this.printQuery=window.matchMedia("print")),"function"==typeof ResizeObserver&&(this.resizeScroll=new ResizeObserver((()=>{var e;(null===(e=this.view.docView)||void 0===e?void 0:e.lastUpdate)<Date.now()-75&&this.onResize()})),this.resizeScroll.observe(e.scrollDOM)),this.addWindowListeners(this.win=e.win),this.start(),"function"==typeof IntersectionObserver&&(this.intersection=new IntersectionObserver((e=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),e.length>0&&e[e.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))}),{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver((e=>{e.length>0&&e[e.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))}),{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(e){this.view.inputState.runHandlers("scroll",e),this.intersecting&&this.view.measure()}onScroll(e){this.intersecting&&this.flush(!1),this.editContext&&this.view.requestMeasure(this.editContext.measureReq),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout((()=>{this.resizeTimeout=-1,this.view.requestMeasure()}),50))}onPrint(e){("change"!=e.type||e.matches)&&(this.view.viewState.printing=!0,this.view.measure(),setTimeout((()=>{this.view.viewState.printing=!1,this.view.requestMeasure()}),500))}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some(((t,n)=>t!=e[n])))){this.gapIntersection.disconnect();for(let t of e)this.gapIntersection.observe(t);this.gaps=e}}onSelectionChange(e){let t=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:n}=this,i=this.selectionRange;if(n.state.facet(xy)?n.root.activeElement!=this.dom:!Dm(n.dom,i))return;let r=i.anchorNode&&n.docView.nearest(i.anchorNode);r&&r.ignoreEvent(e)?t||(this.selectionChanged=!1):(yv.ie&&yv.ie_version<=11||yv.android&&yv.chrome)&&!n.state.selection.main.empty&&i.focusNode&&Lm(i.focusNode,i.focusOffset,i.anchorNode,i.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:e}=this,t=Im(e.root);if(!t)return!1;let n=yv.safari&&11==e.root.nodeType&&function(e){let t=e.activeElement;for(;t&&t.shadowRoot;)t=t.shadowRoot.activeElement;return t}(this.dom.ownerDocument)==this.dom&&function(e,t){if(t.getComposedRanges){let n=t.getComposedRanges(e.root)[0];if(n)return kb(e,n)}let n=null;function i(e){e.preventDefault(),e.stopImmediatePropagation(),n=e.getTargetRanges()[0]}return e.contentDOM.addEventListener("beforeinput",i,!0),e.dom.ownerDocument.execCommand("indent"),e.contentDOM.removeEventListener("beforeinput",i,!0),n?kb(e,n):null}(this.view,t)||t;if(!n||this.selectionRange.eq(n))return!1;let i=Dm(this.dom,n);return i&&!this.selectionChanged&&e.inputState.lastFocusTime>Date.now()-200&&e.inputState.lastTouchTime<Date.now()-300&&function(e,t){let n=t.focusNode,i=t.focusOffset;if(!n||t.anchorNode!=n||t.anchorOffset!=i)return!1;for(i=Math.min(i,Um(n));;)if(i){if(1!=n.nodeType)return!1;let e=n.childNodes[i-1];"false"==e.contentEditable?i--:(n=e,i=Um(n))}else{if(n==e)return!0;i=Qm(n),n=n.parentNode}}(this.dom,n)?(this.view.inputState.lastFocusTime=0,e.docView.updateSelection(),!1):(this.selectionRange.setRange(n),i&&(this.selectionChanged=!0),!0)}setSelectionRange(e,t){this.selectionRange.set(e.node,e.offset,t.node,t.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,t=null;for(let n=this.dom;n;)if(1==n.nodeType)!t&&e<this.scrollTargets.length&&this.scrollTargets[e]==n?e++:t||(t=this.scrollTargets.slice(0,e)),t&&t.push(n),n=n.assignedSlot||n.parentNode;else{if(11!=n.nodeType)break;n=n.host}if(e<this.scrollTargets.length&&!t&&(t=this.scrollTargets.slice(0,e)),t){for(let e of this.scrollTargets)e.removeEventListener("scroll",this.onScroll);for(let e of this.scrollTargets=t)e.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,yb),wb&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),wb&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,t){var n;if(!this.delayedAndroidKey){let e=()=>{let e=this.delayedAndroidKey;if(e){this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=e.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&e.force&&Gm(this.dom,e.key,e.keyCode)}};this.flushingAndroidKey=this.view.win.requestAnimationFrame(e)}this.delayedAndroidKey&&"Enter"!=e||(this.delayedAndroidKey={key:e,keyCode:t,force:this.lastChange<Date.now()-50||!!(null===(n=this.delayedAndroidKey)||void 0===n?void 0:n.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame((()=>{this.delayedFlush=-1,this.flush()})))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}processRecords(){let e=this.pendingRecords();e.length&&(this.queue=[]);let t=-1,n=-1,i=!1;for(let r of e){let e=this.readMutation(r);e&&(e.typeOver&&(i=!0),-1==t?({from:t,to:n}=e):(t=Math.min(e.from,t),n=Math.max(e.to,n)))}return{from:t,to:n,typeOver:i}}readChange(){let{from:e,to:t,typeOver:n}=this.processRecords(),i=this.selectionChanged&&Dm(this.dom,this.selectionRange);if(e<0&&!i)return null;e>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let r=new gb(this.view,e,t,n);return this.view.docView.domChanged={newSel:r.newSel?r.newSel.main:null},r}flush(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;e&&this.readSelectionRange();let t=this.readChange();if(!t)return this.view.requestMeasure(),!1;let n=this.view.state,i=mb(this.view,t);return this.view.state==n&&(t.domChanged||t.newSel&&!t.newSel.main.eq(this.view.state.selection.main))&&this.view.update([]),i}readMutation(e){let t=this.view.docView.nearest(e.target);if(!t||t.ignoreMutation(e))return null;if(t.markDirty("attributes"==e.type),"attributes"==e.type&&(t.flags|=4),"childList"==e.type){let n=Ob(t,e.previousSibling||e.target.previousSibling,-1),i=Ob(t,e.nextSibling||e.target.nextSibling,1);return{from:n?t.posAfter(n):t.posAtStart,to:i?t.posBefore(i):t.posAtEnd,typeOver:!1}}return"characterData"==e.type?{from:t.posAtStart,to:t.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}setWindow(e){e!=this.win&&(this.removeWindowListeners(this.win),this.win=e,this.addWindowListeners(this.win))}addWindowListeners(e){e.addEventListener("resize",this.onResize),this.printQuery?this.printQuery.addEventListener("change",this.onPrint):e.addEventListener("beforeprint",this.onPrint),e.addEventListener("scroll",this.onScroll),e.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(e){e.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onResize),this.printQuery?this.printQuery.removeEventListener("change",this.onPrint):e.removeEventListener("beforeprint",this.onPrint),e.document.removeEventListener("selectionchange",this.onSelectionChange)}update(e){this.editContext&&(this.editContext.update(e),e.startState.facet(xy)!=e.state.facet(xy)&&(e.view.contentDOM.editContext=e.state.facet(xy)?this.editContext.editContext:null))}destroy(){var e,t,n;this.stop(),null===(e=this.intersection)||void 0===e||e.disconnect(),null===(t=this.gapIntersection)||void 0===t||t.disconnect(),null===(n=this.resizeScroll)||void 0===n||n.disconnect();for(let i of this.scrollTargets)i.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey),this.editContext&&(this.view.contentDOM.editContext=null,this.editContext.destroy())}}function Ob(e,t,n){for(;t;){let i=nv.get(t);if(i&&i.parent==e)return i;let r=t.parentNode;t=r!=e.dom?r:n>0?t.nextSibling:t.previousSibling}return null}function kb(e,t){let n=t.startContainer,i=t.startOffset,r=t.endContainer,s=t.endOffset,o=e.docView.domAtPos(e.state.selection.main.anchor);return Lm(o.node,o.offset,r,s)&&([n,i,r,s]=[r,s,n,i]),{anchorNode:n,anchorOffset:i,focusNode:r,focusOffset:s}}class Sb{constructor(e){this.from=0,this.to=0,this.pendingContextChange=null,this.handlers=Object.create(null),this.resetRange(e.state);let t=this.editContext=new window.EditContext({text:e.state.doc.sliceString(this.from,this.to),selectionStart:this.toContextPos(Math.max(this.from,Math.min(this.to,e.state.selection.main.anchor))),selectionEnd:this.toContextPos(e.state.selection.main.head)});this.handlers.textupdate=t=>{let{anchor:n}=e.state.selection.main,i={from:this.toEditorPos(t.updateRangeStart),to:this.toEditorPos(t.updateRangeEnd),insert:Pp.of(t.text.split("\n"))};i.from==this.from&&n<this.from?i.from=n:i.to==this.to&&n>this.to&&(i.to=n),(i.from!=i.to||i.insert.length)&&(this.pendingContextChange=i,vb(e,i,cg.single(this.toEditorPos(t.selectionStart),this.toEditorPos(t.selectionEnd))),this.pendingContextChange&&(this.revertPending(e.state),this.setSelection(e.state)))},this.handlers.characterboundsupdate=n=>{let i=[],r=null;for(let t=this.toEditorPos(n.rangeStart),s=this.toEditorPos(n.rangeEnd);t<s;t++){let n=e.coordsForChar(t);r=n&&new DOMRect(n.left,n.top,n.right-n.left,n.bottom-n.top)||r||new DOMRect,i.push(r)}t.updateCharacterBounds(n.rangeStart,i)},this.handlers.textformatupdate=t=>{let n=[];for(let e of t.getTextFormats()){let t=e.underlineStyle,i=e.underlineThickness;if("None"!=t&&"None"!=i){let r="text-decoration: underline ".concat("Dashed"==t?"dashed ":"Squiggle"==t?"wavy ":"").concat("Thin"==i?1:2,"px");n.push(Mv.mark({attributes:{style:r}}).range(this.toEditorPos(e.rangeStart),this.toEditorPos(e.rangeEnd)))}}e.dispatch({effects:ky.of(Mv.set(n))})},this.handlers.compositionstart=()=>{e.inputState.composing<0&&(e.inputState.composing=0,e.inputState.compositionFirstChange=!0)},this.handlers.compositionend=()=>{e.inputState.composing=-1,e.inputState.compositionFirstChange=null};for(let n in this.handlers)t.addEventListener(n,this.handlers[n]);this.measureReq={read:e=>{this.editContext.updateControlBounds(e.contentDOM.getBoundingClientRect());let t=Im(e.root);t&&t.rangeCount&&this.editContext.updateSelectionBounds(t.getRangeAt(0).getBoundingClientRect())}}}applyEdits(e){let t=0,n=!1,i=this.pendingContextChange;return e.changes.iterChanges(((r,s,o,a,l)=>{if(n)return;let c=l.length-(s-r);if(i&&s>=i.to){if(i.from==r&&i.to==s&&i.insert.eq(l))return i=this.pendingContextChange=null,t+=c,void(this.to+=c);i=null,this.revertPending(e.state)}if(r+=t,(s+=t)<=this.from)this.from+=c,this.to+=c;else if(r<this.to){if(r<this.from||s>this.to||this.to-this.from+l.length>3e4)return void(n=!0);this.editContext.updateText(this.toContextPos(r),this.toContextPos(s),l.toString()),this.to+=c}t+=c})),i&&!n&&this.revertPending(e.state),!n}update(e){let t=this.pendingContextChange;this.applyEdits(e)&&this.rangeIsValid(e.state)?(e.docChanged||e.selectionSet||t)&&this.setSelection(e.state):(this.pendingContextChange=null,this.resetRange(e.state),this.editContext.updateText(0,this.editContext.text.length,e.state.doc.sliceString(this.from,this.to)),this.setSelection(e.state)),(e.geometryChanged||e.docChanged||e.selectionSet)&&e.view.requestMeasure(this.measureReq)}resetRange(e){let{head:t}=e.selection.main;this.from=Math.max(0,t-1e4),this.to=Math.min(e.doc.length,t+1e4)}revertPending(e){let t=this.pendingContextChange;this.pendingContextChange=null,this.editContext.updateText(this.toContextPos(t.from),this.toContextPos(t.from+t.insert.length),e.doc.sliceString(t.from,t.to))}setSelection(e){let{main:t}=e.selection,n=this.toContextPos(Math.max(this.from,Math.min(this.to,t.anchor))),i=this.toContextPos(t.head);this.editContext.selectionStart==n&&this.editContext.selectionEnd==i||this.editContext.updateSelection(n,i)}rangeIsValid(e){let{head:t}=e.selection.main;return!(this.from>0&&t-this.from<500||this.to<e.doc.length&&this.to-t<500||this.to-this.from>3e4)}toEditorPos(e){return e+this.from}toContextPos(e){return e-this.from}destroy(){for(let e in this.handlers)this.editContext.removeEventListener(e,this.handlers[e])}}class xb{get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return this.inputState.composing>0}get compositionStarted(){return this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.className="cm-announced",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),e.parent&&e.parent.appendChild(this.dom);let{dispatch:t}=e;this.dispatchTransactions=e.dispatchTransactions||t&&(e=>e.forEach((e=>t(e,this))))||(e=>this.update(e)),this.dispatch=this.dispatch.bind(this),this._root=e.root||function(e){for(;e;){if(e&&(9==e.nodeType||11==e.nodeType&&e.host))return e;e=e.assignedSlot||e.parentNode}return null}(e.parent)||document,this.viewState=new Kw(e.state||em.create(e)),e.scrollTo&&e.scrollTo.is(Oy)&&(this.viewState.scrollTarget=e.scrollTo.value.clip(this.viewState.state)),this.plugins=this.state.facet(Cy).map((e=>new _y(e)));for(let n of this.plugins)n.update(this);this.observer=new bb(this),this.inputState=new rw(this),this.inputState.ensureHandlers(this.plugins),this.docView=new Vy(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure()}dispatch(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];let i=1==t.length&&t[0]instanceof qg?t:1==t.length&&Array.isArray(t[0])?t[0]:[this.state.update(...t)];this.dispatchTransactions(i,this)}update(e){if(0!=this.updateState)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let t,n=!1,i=!1,r=this.state;for(let u of e){if(u.startState!=r)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");r=u.state}if(this.destroyed)return void(this.viewState.state=r);let s=this.hasFocus,o=0,a=null;e.some((e=>e.annotation(_w)))?(this.inputState.notifiedFocused=s,o=1):s!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=s,a=Aw(r,s),a||(o=1));let l=this.observer.delayedAndroidKey,c=null;if(l?(this.observer.clearDelayedAndroidKey(),c=this.observer.readChange(),(c&&!this.state.doc.eq(r.doc)||!this.state.selection.eq(r.selection))&&(c=null)):this.observer.clear(),r.facet(em.phrases)!=this.state.facet(em.phrases))return this.setState(r);t=Uy.create(this,r,e),t.flags|=o;let h=this.viewState.scrollTarget;try{this.updateState=2;for(let t of e){if(h&&(h=h.map(t.changes)),t.scrollIntoView){let{main:e}=t.state.selection;h=new by(e.empty?e:cg.cursor(e.head,e.head>e.anchor?-1:1))}for(let e of t.effects)e.is(Oy)&&(h=e.value.clip(this.state))}this.viewState.update(t,h),this.bidiCache=Eb.update(this.bidiCache,t.changes),t.empty||(this.updatePlugins(t),this.inputState.update(t)),n=this.docView.update(t),this.state.facet(zy)!=this.styleModules&&this.mountStyles(),i=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(n,e.some((e=>e.isUserEvent("select.pointer"))))}finally{this.updateState=0}if(t.startState.facet(ib)!=t.state.facet(ib)&&(this.viewState.mustMeasureContent=!0),(n||i||h||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),n&&this.docViewUpdate(),!t.empty)for(let u of this.state.facet(py))try{u(t)}catch(kj){Sy(this.state,kj,"update listener")}(a||c)&&Promise.resolve().then((()=>{a&&this.state==a.startState&&this.dispatch(a),c&&!mb(this,c)&&l.force&&Gm(this.contentDOM,l.key,l.keyCode)}))}setState(e){if(0!=this.updateState)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed)return void(this.viewState.state=e);this.updateState=2;let t=this.hasFocus;try{for(let e of this.plugins)e.destroy(this);this.viewState=new Kw(e),this.plugins=e.facet(Cy).map((e=>new _y(e))),this.pluginMap.clear();for(let e of this.plugins)e.update(this);this.docView.destroy(),this.docView=new Vy(this),this.inputState.ensureHandlers(this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}t&&this.focus(),this.requestMeasure()}updatePlugins(e){let t=e.startState.facet(Cy),n=e.state.facet(Cy);if(t!=n){let i=[];for(let r of n){let n=t.indexOf(r);if(n<0)i.push(new _y(r));else{let t=this.plugins[n];t.mustUpdate=e,i.push(t)}}for(let t of this.plugins)t.mustUpdate!=e&&t.destroy(this);this.plugins=i,this.pluginMap.clear()}else for(let i of this.plugins)i.mustUpdate=e;for(let i=0;i<this.plugins.length;i++)this.plugins[i].update(this);t!=n&&this.inputState.ensureHandlers(this.plugins)}docViewUpdate(){for(let e of this.plugins){let t=e.value;if(t&&t.docViewUpdate)try{t.docViewUpdate(this)}catch(kj){Sy(this.state,kj,"doc view update listener")}}}measure(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(this.destroyed)return;if(this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.observer.delayedAndroidKey)return this.measureScheduled=-1,void this.requestMeasure();this.measureScheduled=0,e&&this.observer.forceFlush();let t=null,n=this.scrollDOM,i=n.scrollTop*this.scaleY,{scrollAnchorPos:r,scrollAnchorHeight:s}=this.viewState;Math.abs(i-this.viewState.scrollTop)>1&&(s=-1),this.viewState.scrollAnchorHeight=-1;try{for(let e=0;;e++){if(s<0)if(Ym(n))r=-1,s=this.viewState.heightMap.height;else{let e=this.viewState.scrollAnchorAt(i);r=e.from,s=e.top}this.updateState=1;let o=this.viewState.measure(this);if(!o&&!this.measureRequests.length&&null==this.viewState.scrollTarget)break;if(e>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let a=[];4&o||([this.measureRequests,a]=[a,this.measureRequests]);let l=a.map((e=>{try{return e.read(this)}catch(kj){return Sy(this.state,kj),Cb}})),c=Uy.create(this,this.state,[]),h=!1;c.flags|=o,t?t.flags|=o:t=c,this.updateState=2,c.empty||(this.updatePlugins(c),this.inputState.update(c),this.updateAttrs(),h=this.docView.update(c),h&&this.docViewUpdate());for(let e=0;e<a.length;e++)if(l[e]!=Cb)try{let t=a[e];t.write&&t.write(l[e],this)}catch(kj){Sy(this.state,kj)}if(h&&this.docView.updateSelection(!0),!c.viewportChanged&&0==this.measureRequests.length){if(this.viewState.editorHeight){if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,s=-1;continue}{let e=(r<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(r).top)-s;if(e>1||e<-1){i+=e,n.scrollTop=i/this.scaleY,s=-1;continue}}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(t&&!t.empty)for(let o of this.state.facet(py))o(t)}get themeClasses(){return sb+" "+(this.state.facet(rb)?ab:ob)+" "+this.state.facet(ib)}updateAttrs(){let e=_b(this,Ay,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),t={spellcheck:"false",autocorrect:"off",autocapitalize:"off",translate:"no",contenteditable:this.state.facet(xy)?"true":"false",class:"cm-content",style:"".concat(yv.tabSize,": ").concat(this.state.tabSize),role:"textbox","aria-multiline":"true"};this.state.readOnly&&(t["aria-readonly"]="true"),_b(this,Py,t);let n=this.observer.ignore((()=>{let n=Av(this.contentDOM,this.contentAttrs,t),i=Av(this.dom,this.editorAttrs,e);return n||i}));return this.editorAttrs=e,this.contentAttrs=t,n}showAnnouncements(e){let t=!0;for(let n of e)for(let e of n.effects)if(e.is(xb.announce)){t&&(this.announceDOM.textContent=""),t=!1,this.announceDOM.appendChild(document.createElement("div")).textContent=e.value}}mountStyles(){this.styleModules=this.state.facet(zy);let e=this.state.facet(xb.cspNonce);Sm.mount(this.root,this.styleModules.concat(hb).reverse(),e?{nonce:e}:void 0)}readMeasured(){if(2==this.updateState)throw new Error("Reading the editor layout isn't allowed during an update");0==this.updateState&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame((()=>this.measure()))),e){if(this.measureRequests.indexOf(e)>-1)return;if(null!=e.key)for(let t=0;t<this.measureRequests.length;t++)if(this.measureRequests[t].key===e.key)return void(this.measureRequests[t]=e);this.measureRequests.push(e)}}plugin(e){let t=this.pluginMap.get(e);return(void 0===t||t&&t.spec!=e)&&this.pluginMap.set(e,t=this.plugins.find((t=>t.spec==e))||null),t&&t.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}get scaleX(){return this.viewState.scaleX}get scaleY(){return this.viewState.scaleY}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,t,n){return iw(this,e,tw(this,e,t,n))}moveByGroup(e,t){return iw(this,e,tw(this,e,t,(t=>function(e,t,n){let i=e.state.charCategorizer(t),r=i(n);return e=>{let t=i(e);return r==Kg.Space&&(r=t),r==t}}(this,e.head,t))))}visualLineSide(e,t){let n=this.bidiSpans(e),i=this.textDirectionAt(e.from),r=n[t?n.length-1:0];return cg.cursor(r.side(t,i)+e.from,r.forward(!t,i)?1:-1)}moveToLineBoundary(e,t){return function(e,t,n,i){let r=ew(e,t.head),s=i&&r.type==Dv.Text&&(e.lineWrapping||r.widgetLineBreaks)?e.coordsAtPos(t.assoc<0&&t.head>r.from?t.head-1:t.head):null;if(s){let t=e.dom.getBoundingClientRect(),i=e.textDirectionAt(r.from),o=e.posAtCoords({x:n==(i==Bv.LTR)?t.right-1:t.left+1,y:(s.top+s.bottom)/2});if(null!=o)return cg.cursor(o,n?-1:1)}return cg.cursor(n?r.to:r.from,n?-1:1)}(this,e,t,!(arguments.length>2&&void 0!==arguments[2])||arguments[2])}moveVertically(e,t,n){return iw(this,e,function(e,t,n,i){let r=t.head,s=n?1:-1;if(r==(n?e.state.doc.length:0))return cg.cursor(r,t.assoc);let o,a=t.goalColumn,l=e.contentDOM.getBoundingClientRect(),c=e.coordsAtPos(r,t.assoc||-1),h=e.documentTop;if(c)null==a&&(a=c.left-l.left),o=s<0?c.top:c.bottom;else{let t=e.viewState.lineBlockAt(r);null==a&&(a=Math.min(l.right-l.left,e.defaultCharacterWidth*(r-t.from))),o=(s<0?t.top:t.bottom)+h}let u=l.left+a,d=null!==i&&void 0!==i?i:e.viewState.heightOracle.textHeight>>1;for(let f=0;;f+=10){let t=o+(d+f)*s,n=Jy(e,{x:u,y:t},!1,s);if(t<l.top||t>l.bottom||(s<0?n<r:n>r)){let i=e.docView.coordsForChar(n),r=!i||t<i.top?-1:1;return cg.cursor(n,r,void 0,a)}}}(this,e,t,n))}domAtPos(e){return this.docView.domAtPos(e)}posAtDOM(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.docView.posFromDOM(e,t)}posAtCoords(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return this.readMeasured(),Jy(this,e,t)}coordsAtPos(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this.readMeasured();let n=this.docView.coordsAt(e,t);if(!n||n.left==n.right)return n;let i=this.state.doc.lineAt(e),r=this.bidiSpans(i);return Vm(n,r[ey.find(r,e-i.from,-1,t)].dir==Bv.LTR==t>0)}coordsForChar(e){return this.readMeasured(),this.docView.coordsForChar(e)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet(vy)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>Tb)return oy(e.length);let t,n=this.textDirectionAt(e.from);for(let r of this.bidiCache)if(r.from==e.from&&r.dir==n&&(r.fresh||ty(r.isolates,t=My(this,e))))return r.order;t||(t=My(this,e));let i=sy(e.text,n,t);return this.bidiCache.push(new Eb(e.from,e.to,n,t,!0,i)),i}get hasFocus(){var e;return(this.dom.ownerDocument.hasFocus()||yv.safari&&(null===(e=this.inputState)||void 0===e?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore((()=>{$m(this.contentDOM),this.docView.updateSelection()}))}setRoot(e){this._root!=e&&(this._root=e,this.observer.setWindow((9==e.nodeType?e:e.ownerDocument).defaultView||window),this.mountStyles())}destroy(){this.root.activeElement==this.contentDOM&&this.contentDOM.blur();for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.docView.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Oy.of(new by("number"==typeof e?cg.cursor(e):e,t.y,t.x,t.yMargin,t.xMargin))}scrollSnapshot(){let{scrollTop:e,scrollLeft:t}=this.scrollDOM,n=this.viewState.scrollAnchorAt(e);return Oy.of(new by(cg.cursor(n.from),"start","start",n.top-e,t,!0))}setTabFocusMode(e){null==e?this.inputState.tabFocusMode=this.inputState.tabFocusMode<0?0:-1:"boolean"==typeof e?this.inputState.tabFocusMode=e?0:-1:0!=this.inputState.tabFocusMode&&(this.inputState.tabFocusMode=Date.now()+e)}static domEventHandlers(e){return Ey.define((()=>({})),{eventHandlers:e})}static domEventObservers(e){return Ey.define((()=>({})),{eventObservers:e})}static theme(e,t){let n=Sm.newName(),i=[ib.of(n),zy.of(cb(".".concat(n),e))];return t&&t.dark&&i.push(rb.of(!0)),i}static baseTheme(e){return Tg.lowest(zy.of(cb("."+sb,e,lb)))}static findFromDOM(e){var t;let n=e.querySelector(".cm-content"),i=n&&nv.get(n)||nv.get(e);return(null===(t=null===i||void 0===i?void 0:i.rootView)||void 0===t?void 0:t.view)||null}}xb.styleModule=zy,xb.inputHandler=gy,xb.scrollHandler=wy,xb.focusChangeEffect=my,xb.perLineTextDirection=vy,xb.exceptionSink=fy,xb.updateListener=py,xb.editable=xy,xb.mouseSelectionStyle=dy,xb.dragMovesSelection=uy,xb.clickAddsSelectionRange=hy,xb.decorations=Ny,xb.outerDecorations=Iy,xb.atomicRanges=Ry,xb.bidiIsolatedRanges=Dy,xb.scrollMargins=Ly,xb.darkTheme=rb,xb.cspNonce=dg.define({combine:e=>e.length?e[0]:""}),xb.contentAttributes=Py,xb.editorAttributes=Ay,xb.lineWrapping=xb.contentAttributes.of({class:"cm-lineWrapping"}),xb.announce=Fg.define();const Tb=4096,Cb={};class Eb{constructor(e,t,n,i,r,s){this.from=e,this.to=t,this.dir=n,this.isolates=i,this.fresh=r,this.order=s}static update(e,t){if(t.empty&&!e.some((e=>e.fresh)))return e;let n=[],i=e.length?e[e.length-1].dir:Bv.LTR;for(let r=Math.max(0,e.length-10);r<e.length;r++){let s=e[r];s.dir!=i||t.touchesRange(s.from,s.to)||n.push(new Eb(t.mapPos(s.from,1),t.mapPos(s.to,-1),s.dir,s.isolates,!1,s.order))}return n}}function _b(e,t,n){for(let i=e.state.facet(t),r=i.length-1;r>=0;r--){let t=i[r],s="function"==typeof t?t(e):t;s&&Cv(s,n)}return n}const Ab=yv.mac?"mac":yv.windows?"win":yv.linux?"linux":"key";function Pb(e,t,n){return t.altKey&&(e="Alt-"+e),t.ctrlKey&&(e="Ctrl-"+e),t.metaKey&&(e="Meta-"+e),!1!==n&&t.shiftKey&&(e="Shift-"+e),e}const Nb=Tg.default(xb.domEventHandlers({keydown:(e,t)=>zb(Db(t.state),e,t,"editor")})),Ib=dg.define({enables:Nb}),Rb=new WeakMap;function Db(e){let t=e.facet(Ib),n=Rb.get(t);return n||Rb.set(t,n=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ab,n=Object.create(null),i=Object.create(null),r=(e,t)=>{let n=i[e];if(null==n)i[e]=t;else if(n!=t)throw new Error("Key binding "+e+" is used both as a regular binding and as a multi-stroke prefix")},s=(e,i,s,o,a)=>{var l,c;let h=n[e]||(n[e]=Object.create(null)),u=i.split(/ (?!$)/).map((e=>function(e,t){const n=e.split(/-(?!$)/);let i,r,s,o,a=n[n.length-1];"Space"==a&&(a=" ");for(let l=0;l<n.length-1;++l){const e=n[l];if(/^(cmd|meta|m)$/i.test(e))o=!0;else if(/^a(lt)?$/i.test(e))i=!0;else if(/^(c|ctrl|control)$/i.test(e))r=!0;else if(/^s(hift)?$/i.test(e))s=!0;else{if(!/^mod$/i.test(e))throw new Error("Unrecognized modifier name: "+e);"mac"==t?o=!0:r=!0}}return i&&(a="Alt-"+a),r&&(a="Ctrl-"+a),o&&(a="Meta-"+a),s&&(a="Shift-"+a),a}(e,t)));for(let t=1;t<u.length;t++){let n=u.slice(0,t).join(" ");r(n,!0),h[n]||(h[n]={preventDefault:!0,stopPropagation:!1,run:[t=>{let i=Mb={view:t,prefix:n,scope:e};return setTimeout((()=>{Mb==i&&(Mb=null)}),Lb),!0}]})}let d=u.join(" ");r(d,!1);let f=h[d]||(h[d]={preventDefault:!1,stopPropagation:!1,run:(null===(c=null===(l=h._any)||void 0===l?void 0:l.run)||void 0===c?void 0:c.slice())||[]});s&&f.run.push(s),o&&(f.preventDefault=!0),a&&(f.stopPropagation=!0)};for(let o of e){let e=o.scope?o.scope.split(" "):["editor"];if(o.any)for(let t of e){let e=n[t]||(n[t]=Object.create(null));e._any||(e._any={preventDefault:!1,stopPropagation:!1,run:[]});let{any:i}=o;for(let t in e)e[t].run.push((e=>i(e,Qb)))}let i=o[t]||o.key;if(i)for(let t of e)s(t,i,o.run,o.preventDefault,o.stopPropagation),o.shift&&s(t,"Shift-"+i,o.shift,o.preventDefault,o.stopPropagation)}return n}(t.reduce(((e,t)=>e.concat(t)),[]))),n}let Mb=null;const Lb=4e3;let Qb=null;function zb(e,t,n,i){Qb=t;let r=function(e){var t=!(_m&&e.metaKey&&e.shiftKey&&!e.ctrlKey&&!e.altKey||Am&&e.shiftKey&&e.key&&1==e.key.length||"Unidentified"==e.key)&&e.key||(e.shiftKey?Em:Cm)[e.keyCode]||e.key||"Unidentified";return"Esc"==t&&(t="Escape"),"Del"==t&&(t="Delete"),"Left"==t&&(t="ArrowLeft"),"Up"==t&&(t="ArrowUp"),"Right"==t&&(t="ArrowRight"),"Down"==t&&(t="ArrowDown"),t}(t),s=Yp(Gp(r,0))==r.length&&" "!=r,o="",a=!1,l=!1,c=!1;Mb&&Mb.view==n&&Mb.scope==i&&(o=Mb.prefix+" ",cw.indexOf(t.keyCode)<0&&(l=!0,Mb=null));let h,u,d=new Set,f=e=>{if(e){for(let t of e.run)if(!d.has(t)&&(d.add(t),t(n)))return e.stopPropagation&&(c=!0),!0;e.preventDefault&&(e.stopPropagation&&(c=!0),l=!0)}return!1},p=e[i];return p&&(f(p[o+Pb(r,t,!s)])?a=!0:s&&(t.altKey||t.metaKey||t.ctrlKey)&&!(yv.windows&&t.ctrlKey&&t.altKey)&&(h=Cm[t.keyCode])&&h!=r?(f(p[o+Pb(h,t,!0)])||t.shiftKey&&(u=Em[t.keyCode])!=r&&u!=h&&f(p[o+Pb(u,t,!1)]))&&(a=!0):s&&t.shiftKey&&f(p[o+Pb(r,t,!0)])&&(a=!0),!a&&f(p._any)&&(a=!0)),l&&(a=!0),a&&c&&t.stopPropagation(),Qb=null,a}class jb{constructor(e,t,n,i,r){this.className=e,this.left=t,this.top=n,this.width=i,this.height=r}draw(){let e=document.createElement("div");return e.className=this.className,this.adjust(e),e}update(e,t){return t.className==this.className&&(this.adjust(e),!0)}adjust(e){e.style.left=this.left+"px",e.style.top=this.top+"px",null!=this.width&&(e.style.width=this.width+"px"),e.style.height=this.height+"px"}eq(e){return this.left==e.left&&this.top==e.top&&this.width==e.width&&this.height==e.height&&this.className==e.className}static forRange(e,t,n){if(n.empty){let i=e.coordsAtPos(n.head,n.assoc||1);if(!i)return[];let r=Ub(e);return[new jb(t,i.left-r.left,i.top-r.top,null,i.bottom-i.top)]}return function(e,t,n){if(n.to<=e.viewport.from||n.from>=e.viewport.to)return[];let i=Math.max(n.from,e.viewport.from),r=Math.min(n.to,e.viewport.to),s=e.textDirection==Bv.LTR,o=e.contentDOM,a=o.getBoundingClientRect(),l=Ub(e),c=o.querySelector(".cm-line"),h=c&&window.getComputedStyle(c),u=a.left+(h?parseInt(h.paddingLeft)+Math.min(0,parseInt(h.textIndent)):0),d=a.right-(h?parseInt(h.paddingRight):0),f=ew(e,i),p=ew(e,r),g=f.type==Dv.Text?f:null,m=p.type==Dv.Text?p:null;g&&(e.lineWrapping||f.widgetLineBreaks)&&(g=Vb(e,i,1,g));m&&(e.lineWrapping||p.widgetLineBreaks)&&(m=Vb(e,r,-1,m));if(g&&m&&g.from==m.from&&g.to==m.to)return y(w(n.from,n.to,g));{let t=g?w(n.from,null,g):b(f,!1),i=m?w(null,n.to,m):b(p,!0),r=[];return(g||f).to<(m||p).from-(g&&m?1:0)||f.widgetLineBreaks>1&&t.bottom+e.defaultLineHeight/2<i.top?r.push(v(u,t.bottom,d,i.top)):t.bottom<i.top&&e.elementAtHeight((t.bottom+i.top)/2).type==Dv.Text&&(t.bottom=i.top=(t.bottom+i.top)/2),y(t).concat(r).concat(y(i))}function v(e,n,i,r){return new jb(t,e-l.left,n-l.top-.01,i-e,r-n+.01)}function y(e){let{top:t,bottom:n,horizontal:i}=e,r=[];for(let s=0;s<i.length;s+=2)r.push(v(i[s],t,i[s+1],n));return r}function w(t,n,i){let r=1e9,o=-1e9,a=[];function l(t,n,l,c,h){let f=e.coordsAtPos(t,t==i.to?-2:2),p=e.coordsAtPos(l,l==i.from?2:-2);f&&p&&(r=Math.min(f.top,p.top,r),o=Math.max(f.bottom,p.bottom,o),h==Bv.LTR?a.push(s&&n?u:f.left,s&&c?d:p.right):a.push(!s&&c?u:p.left,!s&&n?d:f.right))}let c=null!==t&&void 0!==t?t:i.from,h=null!==n&&void 0!==n?n:i.to;for(let s of e.visibleRanges)if(s.to>c&&s.from<h)for(let i=Math.max(s.from,c),r=Math.min(s.to,h);;){let s=e.state.doc.lineAt(i);for(let o of e.bidiSpans(s)){let e=o.from+s.from,a=o.to+s.from;if(e>=r)break;a>i&&l(Math.max(e,i),null==t&&e<=c,Math.min(a,r),null==n&&a>=h,o.dir)}if(i=s.to+1,i>=r)break}return 0==a.length&&l(c,null==t,h,null==n,e.textDirection),{top:r,bottom:o,horizontal:a}}function b(e,t){let n=a.top+(t?e.top:e.bottom);return{top:n,bottom:n,horizontal:[]}}}(e,t,n)}}function Ub(e){let t=e.scrollDOM.getBoundingClientRect();return{left:(e.textDirection==Bv.LTR?t.left:t.right-e.scrollDOM.clientWidth*e.scaleX)-e.scrollDOM.scrollLeft*e.scaleX,top:t.top-e.scrollDOM.scrollTop*e.scaleY}}function Vb(e,t,n,i){let r=e.coordsAtPos(t,2*n);if(!r)return i;let s=e.dom.getBoundingClientRect(),o=(r.top+r.bottom)/2,a=e.posAtCoords({x:s.left+1,y:o}),l=e.posAtCoords({x:s.right-1,y:o});return null==a||null==l?i:{from:Math.max(i.from,Math.min(a,l)),to:Math.min(i.to,Math.max(a,l))}}class Fb{constructor(e,t){this.view=e,this.layer=t,this.drawn=[],this.scaleX=1,this.scaleY=1,this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=e.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),t.above&&this.dom.classList.add("cm-layer-above"),t.class&&this.dom.classList.add(t.class),this.scale(),this.dom.setAttribute("aria-hidden","true"),this.setOrder(e.state),e.requestMeasure(this.measureReq),t.mount&&t.mount(this.dom,e)}update(e){e.startState.facet(qb)!=e.state.facet(qb)&&this.setOrder(e.state),(this.layer.update(e,this.dom)||e.geometryChanged)&&(this.scale(),e.view.requestMeasure(this.measureReq))}docViewUpdate(e){!1!==this.layer.updateOnDocViewUpdate&&e.requestMeasure(this.measureReq)}setOrder(e){let t=0,n=e.facet(qb);for(;t<n.length&&n[t]!=this.layer;)t++;this.dom.style.zIndex=String((this.layer.above?150:-1)-t)}measure(){return this.layer.markers(this.view)}scale(){let{scaleX:e,scaleY:t}=this.view;e==this.scaleX&&t==this.scaleY||(this.scaleX=e,this.scaleY=t,this.dom.style.transform="scale(".concat(1/e,", ").concat(1/t,")"))}draw(e){if(e.length!=this.drawn.length||e.some(((e,t)=>!function(e,t){return e.constructor==t.constructor&&e.eq(t)}(e,this.drawn[t])))){let t=this.dom.firstChild,n=0;for(let i of e)i.update&&t&&i.constructor&&this.drawn[n].constructor&&i.update(t,this.drawn[n])?(t=t.nextSibling,n++):this.dom.insertBefore(i.draw(),t);for(;t;){let e=t.nextSibling;t.remove(),t=e}this.drawn=e}}destroy(){this.layer.destroy&&this.layer.destroy(this.dom,this.view),this.dom.remove()}}const qb=dg.define();function Bb(e){return[Ey.define((t=>new Fb(t,e))),qb.of(e)]}const Wb=!yv.ios,Hb=dg.define({combine:e=>tm(e,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(e,t)=>Math.min(e,t),drawRangeCursor:(e,t)=>e||t})});function $b(e){return e.startState.facet(Hb)!=e.state.facet(Hb)}const Xb=Bb({above:!0,markers(e){let{state:t}=e,n=t.facet(Hb),i=[];for(let r of t.selection.ranges){let s=r==t.selection.main;if(r.empty?!s||Wb:n.drawRangeCursor){let t=s?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",n=r.empty?r:cg.cursor(r.head,r.head>r.anchor?-1:1);for(let r of jb.forRange(e,t,n))i.push(r)}}return i},update(e,t){e.transactions.some((e=>e.selection))&&(t.style.animationName="cm-blink"==t.style.animationName?"cm-blink2":"cm-blink");let n=$b(e);return n&&Gb(e.state,t),e.docChanged||e.selectionSet||n},mount(e,t){Gb(t.state,e)},class:"cm-cursorLayer"});function Gb(e,t){t.style.animationDuration=e.facet(Hb).cursorBlinkRate+"ms"}const Kb=Bb({above:!1,markers:e=>e.state.selection.ranges.map((t=>t.empty?[]:jb.forRange(e,"cm-selectionBackground",t))).reduce(((e,t)=>e.concat(t))),update:(e,t)=>e.docChanged||e.selectionSet||e.viewportChanged||$b(e),class:"cm-selectionLayer"}),Yb={".cm-line":{"& ::selection, &::selection":{backgroundColor:"transparent !important"}},".cm-content":{"& :focus":{caretColor:"initial !important","&::selection, & ::selection":{backgroundColor:"Highlight !important"}}}};Wb&&(Yb[".cm-line"].caretColor=Yb[".cm-content"].caretColor="transparent !important");const Jb=Tg.highest(xb.theme(Yb)),Zb=Fg.define({map:(e,t)=>null==e?null:t.mapPos(e)}),eO=wg.define({create:()=>null,update:(e,t)=>(null!=e&&(e=t.changes.mapPos(e)),t.effects.reduce(((e,t)=>t.is(Zb)?t.value:e),e))}),tO=Ey.fromClass(class{constructor(e){this.view=e,this.cursor=null,this.measureReq={read:this.readPos.bind(this),write:this.drawCursor.bind(this)}}update(e){var t;let n=e.state.field(eO);null==n?null!=this.cursor&&(null===(t=this.cursor)||void 0===t||t.remove(),this.cursor=null):(this.cursor||(this.cursor=this.view.scrollDOM.appendChild(document.createElement("div")),this.cursor.className="cm-dropCursor"),(e.startState.field(eO)!=n||e.docChanged||e.geometryChanged)&&this.view.requestMeasure(this.measureReq))}readPos(){let{view:e}=this,t=e.state.field(eO),n=null!=t&&e.coordsAtPos(t);if(!n)return null;let i=e.scrollDOM.getBoundingClientRect();return{left:n.left-i.left+e.scrollDOM.scrollLeft*e.scaleX,top:n.top-i.top+e.scrollDOM.scrollTop*e.scaleY,height:n.bottom-n.top}}drawCursor(e){if(this.cursor){let{scaleX:t,scaleY:n}=this.view;e?(this.cursor.style.left=e.left/t+"px",this.cursor.style.top=e.top/n+"px",this.cursor.style.height=e.height/n+"px"):this.cursor.style.left="-100000px"}}destroy(){this.cursor&&this.cursor.remove()}setDropPos(e){this.view.state.field(eO)!=e&&this.view.dispatch({effects:Zb.of(e)})}},{eventObservers:{dragover(e){this.setDropPos(this.view.posAtCoords({x:e.clientX,y:e.clientY}))},dragleave(e){e.target!=this.view.contentDOM&&this.view.contentDOM.contains(e.relatedTarget)||this.setDropPos(null)},dragend(){this.setDropPos(null)},drop(){this.setDropPos(null)}}});function nO(e,t,n,i,r){t.lastIndex=0;for(let s,o=e.iterRange(n,i),a=n;!o.next().done;a+=o.value.length)if(!o.lineBreak)for(;s=t.exec(o.value);)r(a+s.index,s)}class iO{constructor(e){const{regexp:t,decoration:n,decorate:i,boundary:r,maxLength:s=1e3}=e;if(!t.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=t,i)this.addMatch=(e,t,n,r)=>i(r,n,n+e[0].length,e,t);else if("function"==typeof n)this.addMatch=(e,t,i,r)=>{let s=n(e,t,i);s&&r(i,i+e[0].length,s)};else{if(!n)throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.addMatch=(e,t,i,r)=>r(i,i+e[0].length,n)}this.boundary=r,this.maxLength=s}createDeco(e){let t=new am,n=t.add.bind(t);for(let{from:i,to:r}of function(e,t){let n=e.visibleRanges;if(1==n.length&&n[0].from==e.viewport.from&&n[0].to==e.viewport.to)return n;let i=[];for(let{from:r,to:s}of n)r=Math.max(e.state.doc.lineAt(r).from,r-t),s=Math.min(e.state.doc.lineAt(s).to,s+t),i.length&&i[i.length-1].to>=r?i[i.length-1].to=s:i.push({from:r,to:s});return i}(e,this.maxLength))nO(e.state.doc,this.regexp,i,r,((t,i)=>this.addMatch(i,e,t,n)));return t.finish()}updateDeco(e,t){let n=1e9,i=-1;return e.docChanged&&e.changes.iterChanges(((t,r,s,o)=>{o>e.view.viewport.from&&s<e.view.viewport.to&&(n=Math.min(s,n),i=Math.max(o,i))})),e.viewportChanged||i-n>1e3?this.createDeco(e.view):i>-1?this.updateRange(e.view,t.map(e.changes),n,i):t}updateRange(e,t,n,i){for(let r of e.visibleRanges){let s=Math.max(r.from,n),o=Math.min(r.to,i);if(o>s){let n=e.state.doc.lineAt(s),i=n.to<o?e.state.doc.lineAt(o):n,a=Math.max(r.from,n.from),l=Math.min(r.to,i.to);if(this.boundary){for(;s>n.from;s--)if(this.boundary.test(n.text[s-1-n.from])){a=s;break}for(;o<i.to;o++)if(this.boundary.test(i.text[o-i.from])){l=o;break}}let c,h=[],u=(e,t,n)=>h.push(n.range(e,t));if(n==i)for(this.regexp.lastIndex=a-n.from;(c=this.regexp.exec(n.text))&&c.index<l-n.from;)this.addMatch(c,e,c.index+n.from,u);else nO(e.state.doc,this.regexp,a,l,((t,n)=>this.addMatch(n,e,t,u)));t=t.update({filterFrom:a,filterTo:l,filter:(e,t)=>e<a||t>l,add:h})}}return t}}const rO=null!=/x/.unicode?"gu":"g",sO=new RegExp("[\0-\b\n-\x1f\x7f-\x9f\xad\u061c\u200b\u200e\u200f\u2028\u2029\u202d\u202e\u2066\u2067\u2069\ufeff\ufff9-\ufffc]",rO),oO={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};let aO=null;const lO=dg.define({combine(e){let t=tm(e,{render:null,specialChars:sO,addSpecialChars:null});return(t.replaceTabs=!function(){var e;if(null==aO&&"undefined"!=typeof document&&document.body){let t=document.body.style;aO=null!=(null!==(e=t.tabSize)&&void 0!==e?e:t.MozTabSize)}return aO||!1}())&&(t.specialChars=new RegExp("\t|"+t.specialChars.source,rO)),t.addSpecialChars&&(t.specialChars=new RegExp(t.specialChars.source+"|"+t.addSpecialChars.source,rO)),t}});let cO=null;class hO extends Rv{constructor(e,t){super(),this.options=e,this.code=t}eq(e){return e.code==this.code}toDOM(e){let t=function(e){return e>=32?"\u2022":10==e?"\u2424":String.fromCharCode(9216+e)}(this.code),n=e.state.phrase("Control character")+" "+(oO[this.code]||"0x"+this.code.toString(16)),i=this.options.render&&this.options.render(this.code,n,t);if(i)return i;let r=document.createElement("span");return r.textContent=t,r.title=n,r.setAttribute("aria-label",n),r.className="cm-specialChar",r}ignoreEvent(){return!1}}class uO extends Rv{constructor(e){super(),this.width=e}eq(e){return e.width==this.width}toDOM(){let e=document.createElement("span");return e.textContent="\t",e.className="cm-tab",e.style.width=this.width+"px",e}ignoreEvent(){return!1}}const dO=Mv.line({class:"cm-activeLine"}),fO=Ey.fromClass(class{constructor(e){this.decorations=this.getDeco(e)}update(e){(e.docChanged||e.selectionSet)&&(this.decorations=this.getDeco(e.view))}getDeco(e){let t=-1,n=[];for(let i of e.state.selection.ranges){let r=e.lineBlockAt(i.head);r.from>t&&(n.push(dO.range(r.from)),t=r.from)}return Mv.set(n)}},{decorations:e=>e.decorations});class pO extends Rv{constructor(e){super(),this.content=e}toDOM(){let e=document.createElement("span");return e.className="cm-placeholder",e.style.pointerEvents="none",e.appendChild("string"==typeof this.content?document.createTextNode(this.content):this.content),"string"==typeof this.content?e.setAttribute("aria-label","placeholder "+this.content):e.setAttribute("aria-hidden","true"),e}coordsAt(e){let t=e.firstChild?Mm(e.firstChild):[];if(!t.length)return null;let n=window.getComputedStyle(e.parentNode),i=Vm(t[0],"rtl"!=n.direction),r=parseInt(n.lineHeight);return i.bottom-i.top>1.5*r?{left:i.left,right:i.right,top:i.top,bottom:i.top+r}:i}ignoreEvent(){return!1}}const gO=2e3;function mO(e,t){let n=e.posAtCoords({x:t.clientX,y:t.clientY},!1),i=e.state.doc.lineAt(n),r=n-i.from,s=r>gO?-1:r==i.length?function(e,t){let n=e.coordsAtPos(e.viewport.from);return n?Math.round(Math.abs((n.left-t)/e.defaultCharacterWidth)):-1}(e,t.clientX):ym(i.text,e.state.tabSize,n-i.from);return{line:i.number,col:s,off:r}}function vO(e,t){let n=mO(e,t),i=e.state.selection;return n?{update(e){if(e.docChanged){let t=e.changes.mapPos(e.startState.doc.line(n.line).from),r=e.state.doc.lineAt(t);n={line:r.number,col:n.col,off:Math.min(n.off,r.length)},i=i.map(e.changes)}},get(t,r,s){let o=mO(e,t);if(!o)return i;let a=function(e,t,n){let i=Math.min(t.line,n.line),r=Math.max(t.line,n.line),s=[];if(t.off>gO||n.off>gO||t.col<0||n.col<0){let o=Math.min(t.off,n.off),a=Math.max(t.off,n.off);for(let t=i;t<=r;t++){let n=e.doc.line(t);n.length<=a&&s.push(cg.range(n.from+o,n.to+a))}}else{let o=Math.min(t.col,n.col),a=Math.max(t.col,n.col);for(let t=i;t<=r;t++){let n=e.doc.line(t),i=wm(n.text,o,e.tabSize,!0);if(i<0)s.push(cg.cursor(n.to));else{let t=wm(n.text,a,e.tabSize);s.push(cg.range(n.from+i,n.from+t))}}}return s}(e.state,n,o);return a.length?s?cg.create(a.concat(i.ranges)):cg.create(a):i}}:null}const yO={Alt:[18,e=>!!e.altKey],Control:[17,e=>!!e.ctrlKey],Shift:[16,e=>!!e.shiftKey],Meta:[91,e=>!!e.metaKey]},wO={style:"cursor: crosshair"};const bO="-10000px";class OO{constructor(e,t,n,i){this.facet=t,this.createTooltipView=n,this.removeTooltipView=i,this.input=e.state.facet(t),this.tooltips=this.input.filter((e=>e));let r=null;this.tooltipViews=this.tooltips.map((e=>r=n(e,r)))}update(e,t){var n;let i=e.state.facet(this.facet),r=i.filter((e=>e));if(i===this.input){for(let t of this.tooltipViews)t.update&&t.update(e);return!1}let s=[],o=t?[]:null;for(let a=0;a<r.length;a++){let n=r[a],i=-1;if(n){for(let e=0;e<this.tooltips.length;e++){let t=this.tooltips[e];t&&t.create==n.create&&(i=e)}if(i<0)s[a]=this.createTooltipView(n,a?s[a-1]:null),o&&(o[a]=!!n.above);else{let n=s[a]=this.tooltipViews[i];o&&(o[a]=t[i]),n.update&&n.update(e)}}}for(let a of this.tooltipViews)s.indexOf(a)<0&&(this.removeTooltipView(a),null===(n=a.destroy)||void 0===n||n.call(a));return t&&(o.forEach(((e,n)=>t[n]=e)),t.length=o.length),this.input=i,this.tooltips=r,this.tooltipViews=s,!0}}function kO(e){let{win:t}=e;return{top:0,left:0,bottom:t.innerHeight,right:t.innerWidth}}const SO=dg.define({combine:e=>{var t,n,i;return{position:yv.ios?"absolute":(null===(t=e.find((e=>e.position)))||void 0===t?void 0:t.position)||"fixed",parent:(null===(n=e.find((e=>e.parent)))||void 0===n?void 0:n.parent)||null,tooltipSpace:(null===(i=e.find((e=>e.tooltipSpace)))||void 0===i?void 0:i.tooltipSpace)||kO}}}),xO=new WeakMap,TO=Ey.fromClass(class{constructor(e){this.view=e,this.above=[],this.inView=!0,this.madeAbsolute=!1,this.lastTransaction=0,this.measureTimeout=-1;let t=e.state.facet(SO);this.position=t.position,this.parent=t.parent,this.classes=e.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.resizeObserver="function"==typeof ResizeObserver?new ResizeObserver((()=>this.measureSoon())):null,this.manager=new OO(e,_O,((e,t)=>this.createTooltip(e,t)),(e=>{this.resizeObserver&&this.resizeObserver.unobserve(e.dom),e.dom.remove()})),this.above=this.manager.tooltips.map((e=>!!e.above)),this.intersectionObserver="function"==typeof IntersectionObserver?new IntersectionObserver((e=>{Date.now()>this.lastTransaction-50&&e.length>0&&e[e.length-1].intersectionRatio<1&&this.measureSoon()}),{threshold:[1]}):null,this.observeIntersection(),e.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let e of this.manager.tooltipViews)this.intersectionObserver.observe(e.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout((()=>{this.measureTimeout=-1,this.maybeMeasure()}),50))}update(e){e.transactions.length&&(this.lastTransaction=Date.now());let t=this.manager.update(e,this.above);t&&this.observeIntersection();let n=t||e.geometryChanged,i=e.state.facet(SO);if(i.position!=this.position&&!this.madeAbsolute){this.position=i.position;for(let e of this.manager.tooltipViews)e.dom.style.position=this.position;n=!0}if(i.parent!=this.parent){this.parent&&this.container.remove(),this.parent=i.parent,this.createContainer();for(let e of this.manager.tooltipViews)this.container.appendChild(e.dom);n=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);n&&this.maybeMeasure()}createTooltip(e,t){let n=e.create(this.view),i=t?t.dom:null;if(n.dom.classList.add("cm-tooltip"),e.arrow&&!n.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let e=document.createElement("div");e.className="cm-tooltip-arrow",n.dom.appendChild(e)}return n.dom.style.position=this.position,n.dom.style.top=bO,n.dom.style.left="0px",this.container.insertBefore(n.dom,i),n.mount&&n.mount(this.view),this.resizeObserver&&this.resizeObserver.observe(n.dom),n}destroy(){var e,t,n;this.view.win.removeEventListener("resize",this.measureSoon);for(let i of this.manager.tooltipViews)i.dom.remove(),null===(e=i.destroy)||void 0===e||e.call(i);this.parent&&this.container.remove(),null===(t=this.resizeObserver)||void 0===t||t.disconnect(),null===(n=this.intersectionObserver)||void 0===n||n.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let e=this.view.dom.getBoundingClientRect(),t=1,n=1,i=!1;if("fixed"==this.position&&this.manager.tooltipViews.length){let{dom:e}=this.manager.tooltipViews[0];if(yv.gecko)i=e.offsetParent!=this.container.ownerDocument.body;else if(e.style.top==bO&&"0px"==e.style.left){let t=e.getBoundingClientRect();i=Math.abs(t.top+1e4)>1||Math.abs(t.left)>1}}if(i||"absolute"==this.position)if(this.parent){let e=this.parent.getBoundingClientRect();e.width&&e.height&&(t=e.width/this.parent.offsetWidth,n=e.height/this.parent.offsetHeight)}else({scaleX:t,scaleY:n}=this.view.viewState);return{editor:e,parent:this.parent?this.container.getBoundingClientRect():e,pos:this.manager.tooltips.map(((e,t)=>{let n=this.manager.tooltipViews[t];return n.getCoords?n.getCoords(e.pos):this.view.coordsAtPos(e.pos)})),size:this.manager.tooltipViews.map((e=>{let{dom:t}=e;return t.getBoundingClientRect()})),space:this.view.state.facet(SO).tooltipSpace(this.view),scaleX:t,scaleY:n,makeAbsolute:i}}writeMeasure(e){var t;if(e.makeAbsolute){this.madeAbsolute=!0,this.position="absolute";for(let e of this.manager.tooltipViews)e.dom.style.position="absolute"}let{editor:n,space:i,scaleX:r,scaleY:s}=e,o=[];for(let a=0;a<this.manager.tooltips.length;a++){let l=this.manager.tooltips[a],c=this.manager.tooltipViews[a],{dom:h}=c,u=e.pos[a],d=e.size[a];if(!u||u.bottom<=Math.max(n.top,i.top)||u.top>=Math.min(n.bottom,i.bottom)||u.right<Math.max(n.left,i.left)-.1||u.left>Math.min(n.right,i.right)+.1){h.style.top=bO;continue}let f=l.arrow?c.dom.querySelector(".cm-tooltip-arrow"):null,p=f?7:0,g=d.right-d.left,m=null!==(t=xO.get(c))&&void 0!==t?t:d.bottom-d.top,v=c.offset||EO,y=this.view.textDirection==Bv.LTR,w=d.width>i.right-i.left?y?i.left:i.right-d.width:y?Math.min(u.left-(f?14:0)+v.x,i.right-g):Math.max(i.left,u.left-g+(f?14:0)-v.x),b=this.above[a];!l.strictSide&&(b?u.top-(d.bottom-d.top)-v.y<i.top:u.bottom+(d.bottom-d.top)+v.y>i.bottom)&&b==i.bottom-u.bottom>u.top-i.top&&(b=this.above[a]=!b);let O=(b?u.top-i.top:i.bottom-u.bottom)-p;if(O<m&&!1!==c.resize){if(O<this.view.defaultLineHeight){h.style.top=bO;continue}xO.set(c,m),h.style.height=(m=O)/s+"px"}else h.style.height&&(h.style.height="");let k=b?u.top-m-p-v.y:u.bottom+p+v.y,S=w+g;if(!0!==c.overlap)for(let e of o)e.left<S&&e.right>w&&e.top<k+m&&e.bottom>k&&(k=b?e.top-m-2-p:e.bottom+p+2);if("absolute"==this.position?(h.style.top=(k-e.parent.top)/s+"px",h.style.left=(w-e.parent.left)/r+"px"):(h.style.top=k/s+"px",h.style.left=w/r+"px"),f){let e=u.left+(y?v.x:-v.x)-(w+14-7);f.style.left=e/r+"px"}!0!==c.overlap&&o.push({left:w,top:k,right:S,bottom:k+m}),h.classList.toggle("cm-tooltip-above",b),h.classList.toggle("cm-tooltip-below",!b),c.positioned&&c.positioned(e.space)}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let e of this.manager.tooltipViews)e.dom.style.top=bO}},{eventObservers:{scroll(){this.maybeMeasure()}}}),CO=xb.baseTheme({".cm-tooltip":{zIndex:100,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"".concat(7,"px"),width:"".concat(14,"px"),position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"".concat(7,"px solid transparent"),borderRight:"".concat(7,"px solid transparent")},".cm-tooltip-above &":{bottom:"-".concat(7,"px"),"&:before":{borderTop:"".concat(7,"px solid #bbb")},"&:after":{borderTop:"".concat(7,"px solid #f5f5f5"),bottom:"1px"}},".cm-tooltip-below &":{top:"-".concat(7,"px"),"&:before":{borderBottom:"".concat(7,"px solid #bbb")},"&:after":{borderBottom:"".concat(7,"px solid #f5f5f5"),top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),EO={x:0,y:0},_O=dg.define({enables:[TO,CO]}),AO=dg.define({combine:e=>e.reduce(((e,t)=>e.concat(t)),[])});class PO{static create(e){return new PO(e)}constructor(e){this.view=e,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new OO(e,AO,((e,t)=>this.createHostedView(e,t)),(e=>e.dom.remove()))}createHostedView(e,t){let n=e.create(this.view);return n.dom.classList.add("cm-tooltip-section"),this.dom.insertBefore(n.dom,t?t.dom.nextSibling:this.dom.firstChild),this.mounted&&n.mount&&n.mount(this.view),n}mount(e){for(let t of this.manager.tooltipViews)t.mount&&t.mount(e);this.mounted=!0}positioned(e){for(let t of this.manager.tooltipViews)t.positioned&&t.positioned(e)}update(e){this.manager.update(e)}destroy(){var e;for(let t of this.manager.tooltipViews)null===(e=t.destroy)||void 0===e||e.call(t)}passProp(e){let t;for(let n of this.manager.tooltipViews){let i=n[e];if(void 0!==i)if(void 0===t)t=i;else if(t!==i)return}return t}get offset(){return this.passProp("offset")}get getCoords(){return this.passProp("getCoords")}get overlap(){return this.passProp("overlap")}get resize(){return this.passProp("resize")}}const NO=_O.compute([AO],(e=>{let t=e.facet(AO);return 0===t.length?null:{pos:Math.min(...t.map((e=>e.pos))),end:Math.max(...t.map((e=>{var t;return null!==(t=e.end)&&void 0!==t?t:e.pos}))),create:PO.create,above:t[0].above,arrow:t.some((e=>e.arrow))}}));class IO{constructor(e,t,n,i,r){this.view=e,this.source=t,this.field=n,this.setHover=i,this.hoverTime=r,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:e.dom,time:0},this.checkHover=this.checkHover.bind(this),e.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),e.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout((()=>this.startHover()),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active.length)return;let e=Date.now()-this.lastMove.time;e<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-e):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{view:e,lastMove:t}=this,n=e.docView.nearest(t.target);if(!n)return;let i,r=1;if(n instanceof Ov)i=n.posAtStart;else{if(i=e.posAtCoords(t),null==i)return;let n=e.coordsAtPos(i);if(!n||t.y<n.top||t.y>n.bottom||t.x<n.left-e.defaultCharacterWidth||t.x>n.right+e.defaultCharacterWidth)return;let s=e.bidiSpans(e.state.doc.lineAt(i)).find((e=>e.from<=i&&e.to>=i)),o=s&&s.dir==Bv.RTL?-1:1;r=t.x<n.left?-o:o}let s=this.source(e,i,r);if(null===s||void 0===s?void 0:s.then){let t=this.pending={pos:i};s.then((n=>{this.pending==t&&(this.pending=null,!n||Array.isArray(n)&&!n.length||e.dispatch({effects:this.setHover.of(Array.isArray(n)?n:[n])}))}),(t=>Sy(e.state,t,"hover tooltip")))}else!s||Array.isArray(s)&&!s.length||e.dispatch({effects:this.setHover.of(Array.isArray(s)?s:[s])})}get tooltip(){let e=this.view.plugin(TO),t=e?e.manager.tooltips.findIndex((e=>e.create==PO.create)):-1;return t>-1?e.manager.tooltipViews[t]:null}mousemove(e){var t,n;this.lastMove={x:e.clientX,y:e.clientY,target:e.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let{active:i,tooltip:r}=this;if(i.length&&r&&!function(e,t){let n=e.getBoundingClientRect();return t.clientX>=n.left-RO&&t.clientX<=n.right+RO&&t.clientY>=n.top-RO&&t.clientY<=n.bottom+RO}(r.dom,e)||this.pending){let{pos:r}=i[0]||this.pending,s=null!==(n=null===(t=i[0])||void 0===t?void 0:t.end)&&void 0!==n?n:r;(r==s?this.view.posAtCoords(this.lastMove)==r:function(e,t,n,i,r){let s=e.scrollDOM.getBoundingClientRect(),o=e.documentTop+e.documentPadding.top+e.contentHeight;if(s.left>i||s.right<i||s.top>r||Math.min(s.bottom,o)<r)return!1;let a=e.posAtCoords({x:i,y:r},!1);return a>=t&&a<=n}(this.view,r,s,e.clientX,e.clientY))||(this.view.dispatch({effects:this.setHover.of([])}),this.pending=null)}}mouseleave(e){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1;let{active:t}=this;if(t.length){let{tooltip:t}=this;t&&t.dom.contains(e.relatedTarget)?this.watchTooltipLeave(t.dom):this.view.dispatch({effects:this.setHover.of([])})}}watchTooltipLeave(e){let t=n=>{e.removeEventListener("mouseleave",t),this.active.length&&!this.view.dom.contains(n.relatedTarget)&&this.view.dispatch({effects:this.setHover.of([])})};e.addEventListener("mouseleave",t)}destroy(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}const RO=4;function DO(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Fg.define(),i=wg.define({create:()=>[],update(e,i){if(e.length&&(t.hideOnChange&&(i.docChanged||i.selection)?e=[]:t.hideOn&&(e=e.filter((e=>!t.hideOn(i,e)))),i.docChanged)){let t=[];for(let n of e){let e=i.changes.mapPos(n.pos,-1,Zp.TrackDel);if(null!=e){let r=Object.assign(Object.create(null),n);r.pos=e,null!=r.end&&(r.end=i.changes.mapPos(r.end)),t.push(r)}}e=t}for(let t of i.effects)t.is(n)&&(e=t.value),t.is(LO)&&(e=[]);return e},provide:e=>AO.from(e)});return[i,Ey.define((r=>new IO(r,e,i,n,t.hoverTime||300))),NO]}function MO(e,t){let n=e.plugin(TO);if(!n)return null;let i=n.manager.tooltips.indexOf(t);return i<0?null:n.manager.tooltipViews[i]}const LO=Fg.define();const QO=dg.define({combine(e){let t,n;for(let i of e)t=t||i.topContainer,n=n||i.bottomContainer;return{topContainer:t,bottomContainer:n}}});function zO(e,t){let n=e.plugin(jO),i=n?n.specs.indexOf(t):-1;return i>-1?n.panels[i]:null}const jO=Ey.fromClass(class{constructor(e){this.input=e.state.facet(FO),this.specs=this.input.filter((e=>e)),this.panels=this.specs.map((t=>t(e)));let t=e.state.facet(QO);this.top=new UO(e,!0,t.topContainer),this.bottom=new UO(e,!1,t.bottomContainer),this.top.sync(this.panels.filter((e=>e.top))),this.bottom.sync(this.panels.filter((e=>!e.top)));for(let n of this.panels)n.dom.classList.add("cm-panel"),n.mount&&n.mount()}update(e){let t=e.state.facet(QO);this.top.container!=t.topContainer&&(this.top.sync([]),this.top=new UO(e.view,!0,t.topContainer)),this.bottom.container!=t.bottomContainer&&(this.bottom.sync([]),this.bottom=new UO(e.view,!1,t.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let n=e.state.facet(FO);if(n!=this.input){let t=n.filter((e=>e)),i=[],r=[],s=[],o=[];for(let n of t){let t,a=this.specs.indexOf(n);a<0?(t=n(e.view),o.push(t)):(t=this.panels[a],t.update&&t.update(e)),i.push(t),(t.top?r:s).push(t)}this.specs=t,this.panels=i,this.top.sync(r),this.bottom.sync(s);for(let e of o)e.dom.classList.add("cm-panel"),e.mount&&e.mount()}else for(let i of this.panels)i.update&&i.update(e)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:e=>xb.scrollMargins.of((t=>{let n=t.plugin(e);return n&&{top:n.top.scrollMargin(),bottom:n.bottom.scrollMargin()}}))});class UO{constructor(e,t,n){this.view=e,this.top=t,this.container=n,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(e){for(let t of this.panels)t.destroy&&e.indexOf(t)<0&&t.destroy();this.panels=e,this.syncDOM()}syncDOM(){if(0==this.panels.length)return void(this.dom&&(this.dom.remove(),this.dom=void 0));if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let e=this.container||this.view.dom;e.insertBefore(this.dom,this.top?e.firstChild:null)}let e=this.dom.firstChild;for(let t of this.panels)if(t.dom.parentNode==this.dom){for(;e!=t.dom;)e=VO(e);e=e.nextSibling}else this.dom.insertBefore(t.dom,e);for(;e;)e=VO(e)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(this.container&&this.classes!=this.view.themeClasses){for(let e of this.classes.split(" "))e&&this.container.classList.remove(e);for(let e of(this.classes=this.view.themeClasses).split(" "))e&&this.container.classList.add(e)}}}function VO(e){let t=e.nextSibling;return e.remove(),t}const FO=dg.define({enables:jO});class qO extends nm{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}}qO.prototype.elementClass="",qO.prototype.toDOM=void 0,qO.prototype.mapMode=Zp.TrackBefore,qO.prototype.startSide=qO.prototype.endSide=-1,qO.prototype.point=!0;const BO=dg.define(),WO={class:"",renderEmptyElements:!1,elementStyle:"",markers:()=>om.empty,lineMarker:()=>null,widgetMarker:()=>null,lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{}},HO=dg.define();function $O(e){return[GO(),HO.of(Object.assign(Object.assign({},WO),e))]}const XO=dg.define({combine:e=>e.some((e=>e))});function GO(e){let t=[KO];return e&&!1===e.fixed&&t.push(XO.of(!0)),t}const KO=Ey.fromClass(class{constructor(e){this.view=e,this.prevViewport=e.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.gutters=e.state.facet(HO).map((t=>new ek(e,t)));for(let t of this.gutters)this.dom.appendChild(t.dom);this.fixed=!e.state.facet(XO),this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),e.scrollDOM.insertBefore(this.dom,e.contentDOM)}update(e){if(this.updateGutters(e)){let t=this.prevViewport,n=e.view.viewport,i=Math.min(t.to,n.to)-Math.max(t.from,n.from);this.syncGutters(i<.8*(n.to-n.from))}e.geometryChanged&&(this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px"),this.view.state.facet(XO)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":""),this.prevViewport=e.view.viewport}syncGutters(e){let t=this.dom.nextSibling;e&&this.dom.remove();let n=om.iter(this.view.state.facet(BO),this.view.viewport.from),i=[],r=this.gutters.map((e=>new ZO(e,this.view.viewport,-this.view.documentPadding.top)));for(let s of this.view.viewportLineBlocks)if(i.length&&(i=[]),Array.isArray(s.type)){let e=!0;for(let t of s.type)if(t.type==Dv.Text&&e){JO(n,i,t.from);for(let e of r)e.line(this.view,t,i);e=!1}else if(t.widget)for(let e of r)e.widget(this.view,t)}else if(s.type==Dv.Text){JO(n,i,s.from);for(let e of r)e.line(this.view,s,i)}else if(s.widget)for(let e of r)e.widget(this.view,s);for(let s of r)s.finish();e&&this.view.scrollDOM.insertBefore(this.dom,t)}updateGutters(e){let t=e.startState.facet(HO),n=e.state.facet(HO),i=e.docChanged||e.heightChanged||e.viewportChanged||!om.eq(e.startState.facet(BO),e.state.facet(BO),e.view.viewport.from,e.view.viewport.to);if(t==n)for(let r of this.gutters)r.update(e)&&(i=!0);else{i=!0;let r=[];for(let i of n){let n=t.indexOf(i);n<0?r.push(new ek(this.view,i)):(this.gutters[n].update(e),r.push(this.gutters[n]))}for(let e of this.gutters)e.dom.remove(),r.indexOf(e)<0&&e.destroy();for(let e of r)this.dom.appendChild(e.dom);this.gutters=r}return i}destroy(){for(let e of this.gutters)e.destroy();this.dom.remove()}},{provide:e=>xb.scrollMargins.of((t=>{let n=t.plugin(e);return n&&0!=n.gutters.length&&n.fixed?t.textDirection==Bv.LTR?{left:n.dom.offsetWidth*t.scaleX}:{right:n.dom.offsetWidth*t.scaleX}:null}))});function YO(e){return Array.isArray(e)?e:[e]}function JO(e,t,n){for(;e.value&&e.from<=n;)e.from==n&&t.push(e.value),e.next()}class ZO{constructor(e,t,n){this.gutter=e,this.height=n,this.i=0,this.cursor=om.iter(e.markers,t.from)}addElement(e,t,n){let{gutter:i}=this,r=(t.top-this.height)/e.scaleY,s=t.height/e.scaleY;if(this.i==i.elements.length){let t=new tk(e,s,r,n);i.elements.push(t),i.dom.appendChild(t.dom)}else i.elements[this.i].update(e,s,r,n);this.height=t.bottom,this.i++}line(e,t,n){let i=[];JO(this.cursor,i,t.from),n.length&&(i=i.concat(n));let r=this.gutter.config.lineMarker(e,t,i);r&&i.unshift(r);let s=this.gutter;(0!=i.length||s.config.renderEmptyElements)&&this.addElement(e,t,i)}widget(e,t){let n=this.gutter.config.widgetMarker(e,t.widget,t);n&&this.addElement(e,t,[n])}finish(){let e=this.gutter;for(;e.elements.length>this.i;){let t=e.elements.pop();e.dom.removeChild(t.dom),t.destroy()}}}class ek{constructor(e,t){this.view=e,this.config=t,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let n in t.domEventHandlers)this.dom.addEventListener(n,(i=>{let r,s=i.target;if(s!=this.dom&&this.dom.contains(s)){for(;s.parentNode!=this.dom;)s=s.parentNode;let e=s.getBoundingClientRect();r=(e.top+e.bottom)/2}else r=i.clientY;let o=e.lineBlockAtHeight(r-e.documentTop);t.domEventHandlers[n](e,o,i)&&i.preventDefault()}));this.markers=YO(t.markers(e)),t.initialSpacer&&(this.spacer=new tk(e,0,0,[t.initialSpacer(e)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(e){let t=this.markers;if(this.markers=YO(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){let t=this.config.updateSpacer(this.spacer.markers[0],e);t!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[t])}let n=e.view.viewport;return!om.eq(this.markers,t,n.from,n.to)||!!this.config.lineMarkerChange&&this.config.lineMarkerChange(e)}destroy(){for(let e of this.elements)e.destroy()}}class tk{constructor(e,t,n,i){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(e,t,n,i)}update(e,t,n,i){this.height!=t&&(this.height=t,this.dom.style.height=t+"px"),this.above!=n&&(this.dom.style.marginTop=(this.above=n)?n+"px":""),function(e,t){if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++)if(!e[n].compare(t[n]))return!1;return!0}(this.markers,i)||this.setMarkers(e,i)}setMarkers(e,t){let n="cm-gutterElement",i=this.dom.firstChild;for(let r=0,s=0;;){let o=s,a=r<t.length?t[r++]:null,l=!1;if(a){let e=a.elementClass;e&&(n+=" "+e);for(let t=s;t<this.markers.length;t++)if(this.markers[t].compare(a)){o=t,l=!0;break}}else o=this.markers.length;for(;s<o;){let e=this.markers[s++];if(e.toDOM){e.destroy(i);let t=i.nextSibling;i.remove(),i=t}}if(!a)break;a.toDOM&&(l?i=i.nextSibling:this.dom.insertBefore(a.toDOM(e),i)),l&&s++}this.dom.className=n,this.markers=t}destroy(){this.setMarkers(null,[])}}const nk=dg.define(),ik=dg.define({combine:e=>tm(e,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(e,t){let n=Object.assign({},e);for(let i in t){let e=n[i],r=t[i];n[i]=e?(t,n,i)=>e(t,n,i)||r(t,n,i):r}return n}})});class rk extends qO{constructor(e){super(),this.number=e}eq(e){return this.number==e.number}toDOM(){return document.createTextNode(this.number)}}function sk(e,t){return e.state.facet(ik).formatNumber(t,e.state)}const ok=HO.compute([ik],(e=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers:e=>e.state.facet(nk),lineMarker:(e,t,n)=>n.some((e=>e.toDOM))?null:new rk(sk(e,e.state.doc.lineAt(t.from).number)),widgetMarker:()=>null,lineMarkerChange:e=>e.startState.facet(ik)!=e.state.facet(ik),initialSpacer:e=>new rk(sk(e,ak(e.state.doc.lines))),updateSpacer(e,t){let n=sk(t.view,ak(t.view.state.doc.lines));return n==e.number?e:new rk(n)},domEventHandlers:e.facet(ik).domEventHandlers})));function ak(e){let t=9;for(;t<e;)t=10*t+9;return t}const lk=new class extends qO{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},ck=BO.compute(["selection"],(e=>{let t=[],n=-1;for(let i of e.selection.ranges){let r=e.doc.lineAt(i.head).from;r>n&&(n=r,t.push(lk.range(r)))}return om.of(t)}));const hk=1024;let uk=0;class dk{constructor(e,t){this.from=e,this.to=t}}class fk{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.id=uk++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return"function"!=typeof e&&(e=mk.match(e)),t=>{let n=e(t);return void 0===n?null:[this,n]}}}fk.closedBy=new fk({deserialize:e=>e.split(" ")}),fk.openedBy=new fk({deserialize:e=>e.split(" ")}),fk.group=new fk({deserialize:e=>e.split(" ")}),fk.isolate=new fk({deserialize:e=>{if(e&&"rtl"!=e&&"ltr"!=e&&"auto"!=e)throw new RangeError("Invalid value for isolate: "+e);return e||"auto"}}),fk.contextHash=new fk({perNode:!0}),fk.lookAhead=new fk({perNode:!0}),fk.mounted=new fk({perNode:!0});class pk{constructor(e,t,n){this.tree=e,this.overlay=t,this.parser=n}static get(e){return e&&e.props&&e.props[fk.mounted.id]}}const gk=Object.create(null);class mk{constructor(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;this.name=e,this.props=t,this.id=n,this.flags=i}static define(e){let t=e.props&&e.props.length?Object.create(null):gk,n=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(null==e.name?8:0),i=new mk(e.name||"",t,e.id,n);if(e.props)for(let r of e.props)if(Array.isArray(r)||(r=r(i)),r){if(r[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");t[r[0].id]=r[1]}return i}prop(e){return this.props[e.id]}get isTop(){return(1&this.flags)>0}get isSkipped(){return(2&this.flags)>0}get isError(){return(4&this.flags)>0}get isAnonymous(){return(8&this.flags)>0}is(e){if("string"==typeof e){if(this.name==e)return!0;let t=this.prop(fk.group);return!!t&&t.indexOf(e)>-1}return this.id==e}static match(e){let t=Object.create(null);for(let n in e)for(let i of n.split(" "))t[i]=e[n];return e=>{for(let n=e.prop(fk.group),i=-1;i<(n?n.length:0);i++){let r=t[i<0?e.name:n[i]];if(r)return r}}}}mk.none=new mk("",Object.create(null),0,8);const vk=new WeakMap,yk=new WeakMap;var wk;!function(e){e[e.ExcludeBuffers=1]="ExcludeBuffers",e[e.IncludeAnonymous=2]="IncludeAnonymous",e[e.IgnoreMounts=4]="IgnoreMounts",e[e.IgnoreOverlays=8]="IgnoreOverlays"}(wk||(wk={}));class bk{constructor(e,t,n,i,r){if(this.type=e,this.children=t,this.positions=n,this.length=i,this.props=null,r&&r.length){this.props=Object.create(null);for(let[e,t]of r)this.props["number"==typeof e?e:e.id]=t}}toString(){let e=pk.get(this);if(e&&!e.overlay)return e.tree.toString();let t="";for(let n of this.children){let e=n.toString();e&&(t&&(t+=","),t+=e)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(t.length?"("+t+")":""):t}cursor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return new Dk(this.topNode,e)}cursorAt(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=vk.get(this)||this.topNode,i=new Dk(n);return i.moveTo(e,t),vk.set(this,i._tree),i}get topNode(){return new Ek(this,0,0,null)}resolve(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=Tk(vk.get(this)||this.topNode,e,t,!1);return vk.set(this,n),n}resolveInner(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=Tk(yk.get(this)||this.topNode,e,t,!0);return yk.set(this,n),n}resolveStack(e){return function(e,t,n){let i=e.resolveInner(t,n),r=null;for(let s=i instanceof Ek?i:i.context.parent;s;s=s.parent)if(s.index<0){let e=s.parent;(r||(r=[i])).push(e.resolve(t,n)),s=e}else{let e=pk.get(s.tree);if(e&&e.overlay&&e.overlay[0].from<=t&&e.overlay[e.overlay.length-1].to>=t){let o=new Ek(e.tree,e.overlay[0].from+s.from,-1,s);(r||(r=[i])).push(Tk(o,t,n,!1))}}return r?Ik(r):i}(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0)}iterate(e){let{enter:t,leave:n,from:i=0,to:r=this.length}=e,s=e.mode||0,o=(s&wk.IncludeAnonymous)>0;for(let a=this.cursor(s|wk.IncludeAnonymous);;){let e=!1;if(a.from<=r&&a.to>=i&&(!o&&a.type.isAnonymous||!1!==t(a))){if(a.firstChild())continue;e=!0}for(;e&&n&&(o||!a.type.isAnonymous)&&n(a),!a.nextSibling();){if(!a.parent())return;e=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let t in this.props)e.push([+t,this.props[t]]);return e}balance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.children.length<=8?this:zk(mk.none,this.children,this.positions,0,this.children.length,0,this.length,((e,t,n)=>new bk(this.type,e,t,n,this.propValues)),e.makeTree||((e,t,n)=>new bk(mk.none,e,t,n)))}static build(e){return function(e){var t;let{buffer:n,nodeSet:i,maxBufferLength:r=hk,reused:s=[],minRepeatType:o=i.types.length}=e,a=Array.isArray(n)?new Ok(n,n.length):n,l=i.types,c=0,h=0;function u(e,t,n,y,w,b){let{id:O,start:k,end:S,size:x}=a,T=h;for(;x<0;){if(a.next(),-1==x){let t=s[O];return n.push(t),void y.push(k-e)}if(-3==x)return void(c=O);if(-4==x)return void(h=O);throw new RangeError("Unrecognized record size: ".concat(x))}let C,E,_=l[O],A=k-e;if(S-k<=r&&(E=m(a.pos-t,w))){let t=new Uint16Array(E.size-E.skip),n=a.pos-E.size,r=t.length;for(;a.pos>n;)r=v(E.start,t,r);C=new kk(t,S-E.start,i),A=E.start-e}else{let e=a.pos-x;a.next();let t=[],n=[],i=O>=o?O:-1,s=0,l=S;for(;a.pos>e;)i>=0&&a.id==i&&a.size>=0?(a.end<=l-r&&(p(t,n,k,s,a.end,l,i,T),s=t.length,l=a.end),a.next()):b>2500?d(k,e,t,n):u(k,e,t,n,i,b+1);if(i>=0&&s>0&&s<t.length&&p(t,n,k,s,k,l,i,T),t.reverse(),n.reverse(),i>-1&&s>0){let e=f(_);C=zk(_,t,n,0,t.length,0,S-k,e,e)}else C=g(_,t,n,S-k,T-S)}n.push(C),y.push(A)}function d(e,t,n,s){let o=[],l=0,c=-1;for(;a.pos>t;){let{id:e,start:t,end:n,size:i}=a;if(i>4)a.next();else{if(c>-1&&t<c)break;c<0&&(c=n-r),o.push(e,t,n),l++,a.next()}}if(l){let t=new Uint16Array(4*l),r=o[o.length-2];for(let e=o.length-3,n=0;e>=0;e-=3)t[n++]=o[e],t[n++]=o[e+1]-r,t[n++]=o[e+2]-r,t[n++]=n;n.push(new kk(t,o[2]-r,i)),s.push(r-e)}}function f(e){return(t,n,i)=>{let r,s,o=0,a=t.length-1;if(a>=0&&(r=t[a])instanceof bk){if(!a&&r.type==e&&r.length==i)return r;(s=r.prop(fk.lookAhead))&&(o=n[a]+r.length+s)}return g(e,t,n,i,o)}}function p(e,t,n,r,s,o,a,l){let c=[],h=[];for(;e.length>r;)c.push(e.pop()),h.push(t.pop()+n-s);e.push(g(i.types[a],c,h,o-s,l-o)),t.push(s-n)}function g(e,t,n,i){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,s=arguments.length>5?arguments[5]:void 0;if(c){let e=[fk.contextHash,c];s=s?[e].concat(s):[e]}if(r>25){let e=[fk.lookAhead,r];s=s?[e].concat(s):[e]}return new bk(e,t,n,i,s)}function m(e,t){let n=a.fork(),i=0,s=0,l=0,c=n.end-r,h={size:0,start:0,skip:0};e:for(let r=n.pos-e;n.pos>r;){let e=n.size;if(n.id==t&&e>=0){h.size=i,h.start=s,h.skip=l,l+=4,i+=4,n.next();continue}let a=n.pos-e;if(e<0||a<r||n.start<c)break;let u=n.id>=o?4:0,d=n.start;for(n.next();n.pos>a;){if(n.size<0){if(-3!=n.size)break e;u+=4}else n.id>=o&&(u+=4);n.next()}s=d,i+=e,l+=u}return(t<0||i==e)&&(h.size=i,h.start=s,h.skip=l),h.size>4?h:void 0}function v(e,t,n){let{id:i,start:r,end:s,size:l}=a;if(a.next(),l>=0&&i<o){let o=n;if(l>4){let i=a.pos-(l-4);for(;a.pos>i;)n=v(e,t,n)}t[--n]=o,t[--n]=s-e,t[--n]=r-e,t[--n]=i}else-3==l?c=i:-4==l&&(h=i);return n}let y=[],w=[];for(;a.pos>0;)u(e.start||0,e.bufferStart||0,y,w,-1,0);let b=null!==(t=e.length)&&void 0!==t?t:y.length?w[0]+y[0].length:0;return new bk(l[e.topID],y.reverse(),w.reverse(),b)}(e)}}bk.empty=new bk(mk.none,[],[],0);class Ok{constructor(e,t){this.buffer=e,this.index=t}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new Ok(this.buffer,this.index)}}class kk{constructor(e,t,n){this.buffer=e,this.length=t,this.set=n}get type(){return mk.none}toString(){let e=[];for(let t=0;t<this.buffer.length;)e.push(this.childString(t)),t=this.buffer[t+3];return e.join(",")}childString(e){let t=this.buffer[e],n=this.buffer[e+3],i=this.set.types[t],r=i.name;if(/\W/.test(r)&&!i.isError&&(r=JSON.stringify(r)),n==(e+=4))return r;let s=[];for(;e<n;)s.push(this.childString(e)),e=this.buffer[e+3];return r+"("+s.join(",")+")"}findChild(e,t,n,i,r){let{buffer:s}=this,o=-1;for(let a=e;a!=t&&!(xk(r,i,s[a+1],s[a+2])&&(o=a,n>0));a=s[a+3]);return o}slice(e,t,n){let i=this.buffer,r=new Uint16Array(t-e),s=0;for(let o=e,a=0;o<t;){r[a++]=i[o++],r[a++]=i[o++]-n;let t=r[a++]=i[o++]-n;r[a++]=i[o++]-e,s=Math.max(s,t)}return new kk(r,s,this.set)}}function xk(e,t,n,i){switch(e){case-2:return n<t;case-1:return i>=t&&n<t;case 0:return n<t&&i>t;case 1:return n<=t&&i>t;case 2:return i>t;case 4:return!0}}function Tk(e,t,n,i){for(var r;e.from==e.to||(n<1?e.from>=t:e.from>t)||(n>-1?e.to<=t:e.to<t);){let t=!i&&e instanceof Ek&&e.index<0?null:e.parent;if(!t)return e;e=t}let s=i?0:wk.IgnoreOverlays;if(i)for(let o=e,a=o.parent;a;o=a,a=o.parent)o instanceof Ek&&o.index<0&&(null===(r=a.enter(t,n,s))||void 0===r?void 0:r.from)!=o.from&&(e=a);for(;;){let i=e.enter(t,n,s);if(!i)return e;e=i}}class Ck{cursor(){return new Dk(this,arguments.length>0&&void 0!==arguments[0]?arguments[0]:0)}getChild(e){let t=_k(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:null);return t.length?t[0]:null}getChildren(e){return _k(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}resolve(e){return Tk(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,!1)}resolveInner(e){return Tk(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,!0)}matchContext(e){return Ak(this,e)}enterUnfinishedNodesBefore(e){let t=this.childBefore(e),n=this;for(;t;){let e=t.lastChild;if(!e||e.to!=t.to)break;e.type.isError&&e.from==e.to?(n=t,t=e.prevSibling):t=e}return n}get node(){return this}get next(){return this.parent}}class Ek extends Ck{constructor(e,t,n,i){super(),this._tree=e,this.from=t,this.index=n,this._parent=i}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,t,n,i){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;for(let s=this;;){for(let{children:o,positions:a}=s._tree,l=t>0?o.length:-1;e!=l;e+=t){let l=o[e],c=a[e]+s.from;if(xk(i,n,c,c+l.length))if(l instanceof kk){if(r&wk.ExcludeBuffers)continue;let o=l.findChild(0,l.buffer.length,t,n-c,i);if(o>-1)return new Nk(new Pk(s,l,e,c),null,o)}else if(r&wk.IncludeAnonymous||!l.type.isAnonymous||Mk(l)){let o;if(!(r&wk.IgnoreMounts)&&(o=pk.get(l))&&!o.overlay)return new Ek(o.tree,c,e,s);let a=new Ek(l,c,e,s);return r&wk.IncludeAnonymous||!a.type.isAnonymous?a:a.nextChild(t<0?l.children.length-1:0,t,n,i)}}if(r&wk.IncludeAnonymous||!s.type.isAnonymous)return null;if(e=s.index>=0?s.index+t:t<0?-1:s._parent._tree.children.length,s=s._parent,!s)return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,t){let n,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(!(i&wk.IgnoreOverlays)&&(n=pk.get(this._tree))&&n.overlay){let i=e-this.from;for(let{from:e,to:r}of n.overlay)if((t>0?e<=i:e<i)&&(t<0?r>=i:r>i))return new Ek(n.tree,n.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,t,i)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}}function _k(e,t,n,i){let r=e.cursor(),s=[];if(!r.firstChild())return s;if(null!=n)for(let o=!1;!o;)if(o=r.type.is(n),!r.nextSibling())return s;for(;;){if(null!=i&&r.type.is(i))return s;if(r.type.is(t)&&s.push(r.node),!r.nextSibling())return null==i?s:[]}}function Ak(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.length-1;for(let i=e.parent;n>=0;i=i.parent){if(!i)return!1;if(!i.type.isAnonymous){if(t[n]&&t[n]!=i.name)return!1;n--}}return!0}class Pk{constructor(e,t,n,i){this.parent=e,this.buffer=t,this.index=n,this.start=i}}class Nk extends Ck{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,t,n){super(),this.context=e,this._parent=t,this.index=n,this.type=e.buffer.set.types[e.buffer.buffer[n]]}child(e,t,n){let{buffer:i}=this.context,r=i.findChild(this.index+4,i.buffer[this.index+3],e,t-this.context.start,n);return r<0?null:new Nk(this.context,this,r)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,t){if((arguments.length>2&&void 0!==arguments[2]?arguments[2]:0)&wk.ExcludeBuffers)return null;let{buffer:n}=this.context,i=n.findChild(this.index+4,n.buffer[this.index+3],t>0?1:-1,e-this.context.start,t);return i<0?null:new Nk(this.context,this,i)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,t=e.buffer[this.index+3];return t<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new Nk(this.context,this._parent,t):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,t=this._parent?this._parent.index+4:0;return this.index==t?this.externalSibling(-1):new Nk(this.context,this._parent,e.findChild(t,this.index,-1,0,4))}get tree(){return null}toTree(){let e=[],t=[],{buffer:n}=this.context,i=this.index+4,r=n.buffer[this.index+3];if(r>i){let s=n.buffer[this.index+1];e.push(n.slice(i,r,s)),t.push(0)}return new bk(this.type,e,t,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}}function Ik(e){if(!e.length)return null;let t=0,n=e[0];for(let s=1;s<e.length;s++){let i=e[s];(i.from>n.from||i.to<n.to)&&(n=i,t=s)}let i=n instanceof Ek&&n.index<0?null:n.parent,r=e.slice();return i?r[t]=i:r.splice(t,1),new Rk(r,n)}class Rk{constructor(e,t){this.heads=e,this.node=t}get next(){return Ik(this.heads)}}class Dk{get name(){return this.type.name}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(this.mode=t,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof Ek)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let t=e._parent;t;t=t._parent)this.stack.unshift(t.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return!!e&&(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0)}yieldBuf(e,t){this.index=e;let{start:n,buffer:i}=this.buffer;return this.type=t||i.set.types[i.buffer[e]],this.from=n+i.buffer[e+1],this.to=n+i.buffer[e+2],!0}yield(e){return!!e&&(e instanceof Ek?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)))}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,t,n){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,t,n,this.mode));let{buffer:i}=this.buffer,r=i.findChild(this.index+4,i.buffer[this.index+3],e,t-this.buffer.start,n);return!(r<0)&&(this.stack.push(this.index),this.yieldBuf(r))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.mode;return this.buffer?!(n&wk.ExcludeBuffers)&&this.enterChild(1,e,t):this.yield(this._tree.enter(e,t,n))}parent(){if(!this.buffer)return this.yieldNode(this.mode&wk.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&wk.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return!!this._tree._parent&&this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode));let{buffer:t}=this.buffer,n=this.stack.length-1;if(e<0){let e=n<0?0:this.stack[n]+4;if(this.index!=e)return this.yieldBuf(t.findChild(e,this.index,-1,0,4))}else{let e=t.buffer[this.index+3];if(e<(n<0?t.buffer.length:t.buffer[this.stack[n]+3]))return this.yieldBuf(e)}return n<0&&this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode))}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let t,n,{buffer:i}=this;if(i){if(e>0){if(this.index<i.buffer.buffer.length)return!1}else for(let e=0;e<this.index;e++)if(i.buffer.buffer[e+3]<this.index)return!1;({index:t,parent:n}=i)}else({index:t,_parent:n}=this._tree);for(;n;({index:t,_parent:n}=n))if(t>-1)for(let i=t+e,r=e<0?-1:n._tree.children.length;i!=r;i+=e){let e=n._tree.children[i];if(this.mode&wk.IncludeAnonymous||e instanceof kk||!e.type.isAnonymous||Mk(e))return!1}return!0}move(e,t){if(t&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.move(1,e)}prev(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.move(-1,e)}moveTo(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;for(;(this.from==this.to||(t<1?this.from>=e:this.from>e)||(t>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,t););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,t=null,n=0;if(e&&e.context==this.buffer)e:for(let i=this.index,r=this.stack.length;r>=0;){for(let s=e;s;s=s._parent)if(s.index==i){if(i==this.index)return s;t=s,n=r+1;break e}i=this.stack[--r]}for(let i=n;i<this.stack.length;i++)t=new Nk(this.buffer,t,this.stack[i]);return this.bufferNode=new Nk(this.buffer,t,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,t){for(let n=0;;){let i=!1;if(this.type.isAnonymous||!1!==e(this)){if(this.firstChild()){n++;continue}this.type.isAnonymous||(i=!0)}for(;i&&t&&t(this),i=this.type.isAnonymous,!this.nextSibling();){if(!n)return;this.parent(),n--,i=!0}}}matchContext(e){if(!this.buffer)return Ak(this.node,e);let{buffer:t}=this.buffer,{types:n}=t.set;for(let i=e.length-1,r=this.stack.length-1;i>=0;r--){if(r<0)return Ak(this.node,e,i);let s=n[t.buffer[this.stack[r]]];if(!s.isAnonymous){if(e[i]&&e[i]!=s.name)return!1;i--}}return!0}}function Mk(e){return e.children.some((e=>e instanceof kk||!e.type.isAnonymous||Mk(e)))}const Lk=new WeakMap;function Qk(e,t){if(!e.isAnonymous||t instanceof kk||t.type!=e)return 1;let n=Lk.get(t);if(null==n){n=1;for(let i of t.children){if(i.type!=e||!(i instanceof bk)){n=1;break}n+=Qk(e,i)}Lk.set(t,n)}return n}function zk(e,t,n,i,r,s,o,a,l){let c=0;for(let f=i;f<r;f++)c+=Qk(e,t[f]);let h=Math.ceil(1.5*c/8),u=[],d=[];return function t(n,i,r,o,a){for(let c=r;c<o;){let r=c,f=i[c],p=Qk(e,n[c]);for(c++;c<o;c++){let t=Qk(e,n[c]);if(p+t>=h)break;p+=t}if(c==r+1){if(p>h){let e=n[r];t(e.children,e.positions,0,e.children.length,i[r]+a);continue}u.push(n[r])}else{let t=i[c-1]+n[c-1].length-f;u.push(zk(e,n,i,r,c,f,t,null,l))}d.push(f+a-s)}}(t,n,i,r,0),(a||l)(u,d,o)}class jk{constructor(e,t,n,i){let r=arguments.length>4&&void 0!==arguments[4]&&arguments[4],s=arguments.length>5&&void 0!==arguments[5]&&arguments[5];this.from=e,this.to=t,this.tree=n,this.offset=i,this.open=(r?1:0)|(s?2:0)}get openStart(){return(1&this.open)>0}get openEnd(){return(2&this.open)>0}static addTree(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=[new jk(0,e.length,e,0,!1,n)];for(let r of t)r.to>e.length&&i.push(r);return i}static applyChanges(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:128;if(!t.length)return e;let i=[],r=1,s=e.length?e[0]:null;for(let o=0,a=0,l=0;;o++){let c=o<t.length?t[o]:null,h=c?c.fromA:1e9;if(h-a>=n)for(;s&&s.from<h;){let t=s;if(a>=t.from||h<=t.to||l){let e=Math.max(t.from,a)-l,n=Math.min(t.to,h)-l;t=e>=n?null:new jk(e,n,t.tree,t.offset+l,o>0,!!c)}if(t&&i.push(t),s.to>h)break;s=r<e.length?e[r++]:null}if(!c)break;a=c.toA,l=c.toA-c.toB}return i}}class Uk{startParse(e,t,n){return"string"==typeof e&&(e=new Vk(e)),n=n?n.length?n.map((e=>new dk(e.from,e.to))):[new dk(0,0)]:[new dk(0,e.length)],this.createParse(e,t||[],n)}parse(e,t,n){let i=this.startParse(e,t,n);for(;;){let e=i.advance();if(e)return e}}}class Vk{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,t){return this.string.slice(e,t)}}new fk({perNode:!0});let Fk=0;class qk{constructor(e,t,n){this.set=e,this.base=t,this.modified=n,this.id=Fk++}static define(e){if(null===e||void 0===e?void 0:e.base)throw new Error("Can not derive from a modified tag");let t=new qk([],null,[]);if(t.set.push(t),e)for(let n of e.set)t.set.push(n);return t}static defineModifier(){let e=new Wk;return t=>t.modified.indexOf(e)>-1?t:Wk.get(t.base||t,t.modified.concat(e).sort(((e,t)=>e.id-t.id)))}}let Bk=0;class Wk{constructor(){this.instances=[],this.id=Bk++}static get(e,t){if(!t.length)return e;let n=t[0].instances.find((n=>n.base==e&&function(e,t){return e.length==t.length&&e.every(((e,n)=>e==t[n]))}(t,n.modified)));if(n)return n;let i=[],r=new qk(i,e,t);for(let o of t)o.instances.push(r);let s=function(e){let t=[[]];for(let n=0;n<e.length;n++)for(let i=0,r=t.length;i<r;i++)t.push(t[i].concat(e[n]));return t.sort(((e,t)=>t.length-e.length))}(t);for(let o of e.set)if(!o.modified.length)for(let e of s)i.push(Wk.get(o,e));return r}}function Hk(e){let t=Object.create(null);for(let n in e){let i=e[n];Array.isArray(i)||(i=[i]);for(let e of n.split(" "))if(e){let n=[],r=2,s=e;for(let t=0;;){if("..."==s&&t>0&&t+3==e.length){r=1;break}let i=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(s);if(!i)throw new RangeError("Invalid path: "+e);if(n.push("*"==i[0]?"":'"'==i[0][0]?JSON.parse(i[0]):i[0]),t+=i[0].length,t==e.length)break;let o=e[t++];if(t==e.length&&"!"==o){r=0;break}if("/"!=o)throw new RangeError("Invalid path: "+e);s=e.slice(t)}let o=n.length-1,a=n[o];if(!a)throw new RangeError("Invalid path: "+e);let l=new Xk(i,r,o>0?n.slice(0,o):null);t[a]=l.sort(t[a])}}return $k.add(t)}const $k=new fk;class Xk{constructor(e,t,n,i){this.tags=e,this.mode=t,this.context=n,this.next=i}get opaque(){return 0==this.mode}get inherit(){return 1==this.mode}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}function Gk(e,t){let n=Object.create(null);for(let s of e)if(Array.isArray(s.tag))for(let e of s.tag)n[e.id]=s.class;else n[s.tag.id]=s.class;let{scope:i,all:r=null}=t||{};return{style:e=>{let t=r;for(let i of e)for(let e of i.set){let i=n[e.id];if(i){t=t?t+" "+i:i;break}}return t},scope:i}}Xk.empty=new Xk([],2,null);const Kk=qk.define,Yk=Kk(),Jk=Kk(),Zk=Kk(Jk),eS=Kk(Jk),tS=Kk(),nS=Kk(tS),iS=Kk(tS),rS=Kk(),sS=Kk(rS),oS=Kk(),aS=Kk(),lS=Kk(),cS=Kk(lS),hS=Kk(),uS={comment:Yk,lineComment:Kk(Yk),blockComment:Kk(Yk),docComment:Kk(Yk),name:Jk,variableName:Kk(Jk),typeName:Zk,tagName:Kk(Zk),propertyName:eS,attributeName:Kk(eS),className:Kk(Jk),labelName:Kk(Jk),namespace:Kk(Jk),macroName:Kk(Jk),literal:tS,string:nS,docString:Kk(nS),character:Kk(nS),attributeValue:Kk(nS),number:iS,integer:Kk(iS),float:Kk(iS),bool:Kk(tS),regexp:Kk(tS),escape:Kk(tS),color:Kk(tS),url:Kk(tS),keyword:oS,self:Kk(oS),null:Kk(oS),atom:Kk(oS),unit:Kk(oS),modifier:Kk(oS),operatorKeyword:Kk(oS),controlKeyword:Kk(oS),definitionKeyword:Kk(oS),moduleKeyword:Kk(oS),operator:aS,derefOperator:Kk(aS),arithmeticOperator:Kk(aS),logicOperator:Kk(aS),bitwiseOperator:Kk(aS),compareOperator:Kk(aS),updateOperator:Kk(aS),definitionOperator:Kk(aS),typeOperator:Kk(aS),controlOperator:Kk(aS),punctuation:lS,separator:Kk(lS),bracket:cS,angleBracket:Kk(cS),squareBracket:Kk(cS),paren:Kk(cS),brace:Kk(cS),content:rS,heading:sS,heading1:Kk(sS),heading2:Kk(sS),heading3:Kk(sS),heading4:Kk(sS),heading5:Kk(sS),heading6:Kk(sS),contentSeparator:Kk(rS),list:Kk(rS),quote:Kk(rS),emphasis:Kk(rS),strong:Kk(rS),link:Kk(rS),monospace:Kk(rS),strikethrough:Kk(rS),inserted:Kk(),deleted:Kk(),changed:Kk(),invalid:Kk(),meta:hS,documentMeta:Kk(hS),annotation:Kk(hS),processingInstruction:Kk(hS),definition:qk.defineModifier(),constant:qk.defineModifier(),function:qk.defineModifier(),standard:qk.defineModifier(),local:qk.defineModifier(),special:qk.defineModifier()};Gk([{tag:uS.link,class:"tok-link"},{tag:uS.heading,class:"tok-heading"},{tag:uS.emphasis,class:"tok-emphasis"},{tag:uS.strong,class:"tok-strong"},{tag:uS.keyword,class:"tok-keyword"},{tag:uS.atom,class:"tok-atom"},{tag:uS.bool,class:"tok-bool"},{tag:uS.url,class:"tok-url"},{tag:uS.labelName,class:"tok-labelName"},{tag:uS.inserted,class:"tok-inserted"},{tag:uS.deleted,class:"tok-deleted"},{tag:uS.literal,class:"tok-literal"},{tag:uS.string,class:"tok-string"},{tag:uS.number,class:"tok-number"},{tag:[uS.regexp,uS.escape,uS.special(uS.string)],class:"tok-string2"},{tag:uS.variableName,class:"tok-variableName"},{tag:uS.local(uS.variableName),class:"tok-variableName tok-local"},{tag:uS.definition(uS.variableName),class:"tok-variableName tok-definition"},{tag:uS.special(uS.variableName),class:"tok-variableName2"},{tag:uS.definition(uS.propertyName),class:"tok-propertyName tok-definition"},{tag:uS.typeName,class:"tok-typeName"},{tag:uS.namespace,class:"tok-namespace"},{tag:uS.className,class:"tok-className"},{tag:uS.macroName,class:"tok-macroName"},{tag:uS.propertyName,class:"tok-propertyName"},{tag:uS.operator,class:"tok-operator"},{tag:uS.comment,class:"tok-comment"},{tag:uS.meta,class:"tok-meta"},{tag:uS.invalid,class:"tok-invalid"},{tag:uS.punctuation,class:"tok-punctuation"}]);var dS;const fS=new fk;const pS=new fk;class gS{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";this.data=e,this.name=i,em.prototype.hasOwnProperty("tree")||Object.defineProperty(em.prototype,"tree",{get(){return vS(this)}}),this.parser=t,this.extension=[CS.of(this),em.languageData.of(((e,t,n)=>{let i=mS(e,t,n),r=i.type.prop(fS);if(!r)return[];let s=e.facet(r),o=i.type.prop(pS);if(o){let r=i.resolve(t-i.from,n);for(let t of o)if(t.test(r,e)){let n=e.facet(t.facet);return"replace"==t.type?n:n.concat(s)}}return s}))].concat(n)}isActiveAt(e,t){return mS(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1).type.prop(fS)==this.data}findRegions(e){let t=e.facet(CS);if((null===t||void 0===t?void 0:t.data)==this.data)return[{from:0,to:e.doc.length}];if(!t||!t.allowsNesting)return[];let n=[],i=(e,t)=>{if(e.prop(fS)==this.data)return void n.push({from:t,to:t+e.length});let r=e.prop(fk.mounted);if(r){if(r.tree.prop(fS)==this.data){if(r.overlay)for(let e of r.overlay)n.push({from:e.from+t,to:e.to+t});else n.push({from:t,to:t+e.length});return}if(r.overlay){let e=n.length;if(i(r.tree,r.overlay[0].from+t),n.length>e)return}}for(let n=0;n<e.children.length;n++){let r=e.children[n];r instanceof bk&&i(r,e.positions[n]+t)}};return i(vS(e),0),n}get allowsNesting(){return!0}}function mS(e,t,n){let i=e.facet(CS),r=vS(e).topNode;if(!i||i.allowsNesting)for(let s=r;s;s=s.enter(t,n,wk.ExcludeBuffers))s.type.isTop&&(r=s);return r}gS.setState=Fg.define();function vS(e){let t=e.field(gS.state,!1);return t?t.tree:bk.empty}class yS{constructor(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}get length(){return this.doc.length}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,t){let n=this.cursorPos-this.string.length;return e<n||t>=this.cursorPos?this.doc.sliceString(e,t):this.string.slice(e-n,t-n)}}let wS=null;class bS{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3?arguments[3]:void 0,r=arguments.length>4?arguments[4]:void 0,s=arguments.length>5?arguments[5]:void 0,o=arguments.length>6?arguments[6]:void 0,a=arguments.length>7?arguments[7]:void 0;this.parser=e,this.state=t,this.fragments=n,this.tree=i,this.treeLen=r,this.viewport=s,this.skipped=o,this.scheduleOn=a,this.parse=null,this.tempSkipped=[]}static create(e,t,n){return new bS(e,t,[],bk.empty,0,n,[],null)}startParse(){return this.parser.startParse(new yS(this.state.doc),this.fragments)}work(e,t){return null!=t&&t>=this.state.doc.length&&(t=void 0),this.tree!=bk.empty&&this.isDone(null!==t&&void 0!==t?t:this.state.doc.length)?(this.takeTree(),!0):this.withContext((()=>{var n;if("number"==typeof e){let t=Date.now()+e;e=()=>Date.now()>t}for(this.parse||(this.parse=this.startParse()),null!=t&&(null==this.parse.stoppedAt||this.parse.stoppedAt>t)&&t<this.state.doc.length&&this.parse.stopAt(t);;){let i=this.parse.advance();if(i){if(this.fragments=this.withoutTempSkipped(jk.addTree(i,this.fragments,null!=this.parse.stoppedAt)),this.treeLen=null!==(n=this.parse.stoppedAt)&&void 0!==n?n:this.state.doc.length,this.tree=i,this.parse=null,!(this.treeLen<(null!==t&&void 0!==t?t:this.state.doc.length)))return!0;this.parse=this.startParse()}if(e())return!1}}))}takeTree(){let e,t;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((null==this.parse.stoppedAt||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext((()=>{for(;!(t=this.parse.advance()););})),this.treeLen=e,this.tree=t,this.fragments=this.withoutTempSkipped(jk.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let t=wS;wS=this;try{return e()}finally{wS=t}}withoutTempSkipped(e){for(let t;t=this.tempSkipped.pop();)e=OS(e,t.from,t.to);return e}changes(e,t){let{fragments:n,tree:i,treeLen:r,viewport:s,skipped:o}=this;if(this.takeTree(),!e.empty){let t=[];if(e.iterChangedRanges(((e,n,i,r)=>t.push({fromA:e,toA:n,fromB:i,toB:r}))),n=jk.applyChanges(n,t),i=bk.empty,r=0,s={from:e.mapPos(s.from,-1),to:e.mapPos(s.to,1)},this.skipped.length){o=[];for(let t of this.skipped){let n=e.mapPos(t.from,1),i=e.mapPos(t.to,-1);n<i&&o.push({from:n,to:i})}}}return new bS(this.parser,t,n,i,r,s,o,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let t=this.skipped.length;for(let n=0;n<this.skipped.length;n++){let{from:t,to:i}=this.skipped[n];t<e.to&&i>e.from&&(this.fragments=OS(this.fragments,t,i),this.skipped.splice(n--,1))}return!(this.skipped.length>=t)&&(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,t){this.skipped.push({from:e,to:t})}static getSkippingParser(e){return new class extends Uk{createParse(t,n,i){let r=i[0].from,s=i[i.length-1].to;return{parsedPos:r,advance(){let t=wS;if(t){for(let e of i)t.tempSkipped.push(e);e&&(t.scheduleOn=t.scheduleOn?Promise.all([t.scheduleOn,e]):e)}return this.parsedPos=s,new bk(mk.none,[],[],s-r)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let t=this.fragments;return this.treeLen>=e&&t.length&&0==t[0].from&&t[0].to>=e}static get(){return wS}}function OS(e,t,n){return jk.applyChanges(e,[{fromA:t,toA:n,fromB:t,toB:n}])}class kS{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let t=this.context.changes(e.changes,e.state),n=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),t.viewport.to);return t.work(20,n)||t.takeTree(),new kS(t)}static init(e){let t=Math.min(3e3,e.doc.length),n=bS.create(e.facet(CS).parser,e,{from:0,to:t});return n.work(20,t)||n.takeTree(),new kS(n)}}gS.state=wg.define({create:kS.init,update(e,t){for(let n of t.effects)if(n.is(gS.setState))return n.value;return t.startState.facet(CS)!=t.state.facet(CS)?kS.init(t.state):e.apply(t)}});let SS=e=>{let t=setTimeout((()=>e()),500);return()=>clearTimeout(t)};"undefined"!=typeof requestIdleCallback&&(SS=e=>{let t=-1,n=setTimeout((()=>{t=requestIdleCallback(e,{timeout:400})}),100);return()=>t<0?clearTimeout(n):cancelIdleCallback(t)});const xS="undefined"!=typeof navigator&&(null===(dS=navigator.scheduling)||void 0===dS?void 0:dS.isInputPending)?()=>navigator.scheduling.isInputPending():null,TS=Ey.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let t=this.view.state.field(gS.state).context;(t.updateViewport(e.view.viewport)||this.view.viewport.to>t.treeLen)&&this.scheduleWork(),(e.docChanged||e.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(t)}scheduleWork(){if(this.working)return;let{state:e}=this.view,t=e.field(gS.state);t.tree==t.context.tree&&t.context.isDone(e.doc.length)||(this.working=SS(this.work))}work(e){this.working=null;let t=Date.now();if(this.chunkEnd<t&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=t+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:n,viewport:{to:i}}=this.view,r=n.field(gS.state);if(r.tree==r.context.tree&&r.context.isDone(i+1e5))return;let s=Date.now()+Math.min(this.chunkBudget,100,e&&!xS?Math.max(25,e.timeRemaining()-5):1e9),o=r.context.treeLen<i&&n.doc.length>i+1e3,a=r.context.work((()=>xS&&xS()||Date.now()>s),i+(o?0:1e5));this.chunkBudget-=Date.now()-t,(a||this.chunkBudget<=0)&&(r.context.takeTree(),this.view.dispatch({effects:gS.setState.of(new kS(r.context))})),this.chunkBudget>0&&(!a||o)&&this.scheduleWork(),this.checkAsyncSchedule(r.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then((()=>this.scheduleWork())).catch((e=>Sy(this.view.state,e))).then((()=>this.workScheduled--)),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),CS=dg.define({combine:e=>e.length?e[0]:null,enables:e=>[gS.state,TS,xb.contentAttributes.compute([e],(t=>{let n=t.facet(e);return n&&n.name?{"data-language":n.name}:{}}))]});const ES=dg.define({combine:e=>{if(!e.length)return"  ";let t=e[0];if(!t||/\S/.test(t)||Array.from(t).some((e=>e!=t[0])))throw new Error("Invalid indent unit: "+JSON.stringify(e[0]));return t}});function _S(e){let t=e.facet(ES);return 9==t.charCodeAt(0)?e.tabSize*t.length:t.length}function AS(e,t){let n="",i=e.tabSize,r=e.facet(ES)[0];if("\t"==r){for(;t>=i;)n+="\t",t-=i;r=" "}for(let s=0;s<t;s++)n+=r;return n}class PS{constructor(e,t){let n;function i(e){let t=Sm.newName();return(n||(n=Object.create(null)))["."+t]=e,t}this.specs=e;const r="string"==typeof t.all?t.all:t.all?i(t.all):void 0,s=t.scope;this.scope=s instanceof gS?e=>e.prop(fS)==s.data:s?e=>e==s:void 0,this.style=Gk(e.map((e=>({tag:e.tag,class:e.class||i(Object.assign({},e,{tag:null}))}))),{all:r}).style,this.module=n?new Sm(n):null,this.themeType=t.themeType}static define(e,t){return new PS(e,t||{})}}uS.meta,uS.link,uS.heading,uS.emphasis,uS.strong,uS.strikethrough,uS.keyword,uS.atom,uS.bool,uS.url,uS.contentSeparator,uS.labelName,uS.literal,uS.inserted,uS.string,uS.deleted,uS.regexp,uS.escape,uS.string,uS.variableName,uS.variableName,uS.typeName,uS.namespace,uS.className,uS.variableName,uS.macroName,uS.propertyName,uS.comment,uS.invalid;const NS=Object.create(null),IS=[mk.none],RS=[],DS=Object.create(null),MS=Object.create(null);for(let[Sk,xj]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])MS[Sk]=QS(NS,xj);function LS(e,t){RS.indexOf(e)>-1||(RS.push(e),console.warn(t))}function QS(e,t){let n=[];for(let a of t.split(" ")){let t=[];for(let n of a.split(".")){let i=e[n]||uS[n];i?"function"==typeof i?t.length?t=t.map(i):LS(n,"Modifier ".concat(n," used at start of tag")):t.length?LS(n,"Tag ".concat(n," used as modifier")):t=Array.isArray(i)?i:[i]:LS(n,"Unknown highlighting tag ".concat(n))}for(let e of t)n.push(e)}if(!n.length)return 0;let i=t.replace(/ /g,"_"),r=i+" "+n.map((e=>e.id)),s=DS[r];if(s)return s.id;let o=DS[r]=mk.define({id:IS.length,name:i,props:[Hk({[i]:n})]});return IS.push(o),o.id}Bv.RTL,Bv.LTR;const zS=jg.define(),jS=dg.define();class US{constructor(e,t,n,i,r){this.changes=e,this.effects=t,this.mapped=n,this.startSelection=i,this.selectionsAfter=r}setSelAfter(e){return new US(this.changes,this.effects,this.mapped,this.startSelection,e)}toJSON(){var e,t,n;return{changes:null===(e=this.changes)||void 0===e?void 0:e.toJSON(),mapped:null===(t=this.mapped)||void 0===t?void 0:t.toJSON(),startSelection:null===(n=this.startSelection)||void 0===n?void 0:n.toJSON(),selectionsAfter:this.selectionsAfter.map((e=>e.toJSON()))}}static fromJSON(e){return new US(e.changes&&tg.fromJSON(e.changes),[],e.mapped&&eg.fromJSON(e.mapped),e.startSelection&&cg.fromJSON(e.startSelection),e.selectionsAfter.map(cg.fromJSON))}static fromTransaction(e,t){let n=qS;for(let i of e.startState.facet(jS)){let t=i(e);t.length&&(n=n.concat(t))}return!n.length&&e.changes.empty?null:new US(e.changes.invert(e.startState.doc),n,void 0,t||e.startState.selection,qS)}static selection(e){return new US(void 0,qS,void 0,void 0,e)}}function VS(e,t,n,i){let r=t+1>n+20?t-n-1:0,s=e.slice(r,t);return s.push(i),s}function FS(e,t){return e.length?t.length?e.concat(t):e:t}const qS=[],BS=200;function WS(e,t){if(e.length){let n=e[e.length-1],i=n.selectionsAfter.slice(Math.max(0,n.selectionsAfter.length-BS));return i.length&&i[i.length-1].eq(t)?e:(i.push(t),VS(e,e.length-1,1e9,n.setSelAfter(i)))}return[US.selection([t])]}function HS(e){let t=e[e.length-1],n=e.slice();return n[e.length-1]=t.setSelAfter(t.selectionsAfter.slice(0,t.selectionsAfter.length-1)),n}function $S(e,t){if(!e.length)return e;let n=e.length,i=qS;for(;n;){let r=XS(e[n-1],t,i);if(r.changes&&!r.changes.empty||r.effects.length){let t=e.slice(0,n);return t[n-1]=r,t}t=r.mapped,n--,i=r.selectionsAfter}return i.length?[US.selection(i)]:qS}function XS(e,t,n){let i=FS(e.selectionsAfter.length?e.selectionsAfter.map((e=>e.map(t))):qS,n);if(!e.changes)return US.selection(i);let r=e.changes.map(t),s=t.mapDesc(e.changes,!0),o=e.mapped?e.mapped.composeDesc(s):s;return new US(r,Fg.mapEffects(e.effects,t),o,e.startSelection.map(s),i)}const GS=/^(input\.type|delete)($|\.)/;class KS{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0;this.done=e,this.undone=t,this.prevTime=n,this.prevUserEvent=i}isolate(){return this.prevTime?new KS(this.done,this.undone):this}addChanges(e,t,n,i,r){let s=this.done,o=s[s.length-1];return s=o&&o.changes&&!o.changes.empty&&e.changes&&(!n||GS.test(n))&&(!o.selectionsAfter.length&&t-this.prevTime<i.newGroupDelay&&i.joinToEvent(r,function(e,t){let n=[],i=!1;return e.iterChangedRanges(((e,t)=>n.push(e,t))),t.iterChangedRanges(((e,t,r,s)=>{for(let o=0;o<n.length;){let e=n[o++],t=n[o++];s>=e&&r<=t&&(i=!0)}})),i}(o.changes,e.changes))||"input.type.compose"==n)?VS(s,s.length-1,i.minDepth,new US(e.changes.compose(o.changes),FS(e.effects,o.effects),o.mapped,o.startSelection,qS)):VS(s,s.length,i.minDepth,e),new KS(s,qS,t,n)}addSelection(e,t,n,i){let r=this.done.length?this.done[this.done.length-1].selectionsAfter:qS;return r.length>0&&t-this.prevTime<i&&n==this.prevUserEvent&&n&&/^select($|\.)/.test(n)&&function(e,t){return e.ranges.length==t.ranges.length&&0===e.ranges.filter(((e,n)=>e.empty!=t.ranges[n].empty)).length}(r[r.length-1],e)?this:new KS(WS(this.done,e),this.undone,t,n)}addMapping(e){return new KS($S(this.done,e),$S(this.undone,e),this.prevTime,this.prevUserEvent)}pop(e,t,n){let i=0==e?this.done:this.undone;if(0==i.length)return null;let r=i[i.length-1],s=r.selectionsAfter[0]||t.selection;if(n&&r.selectionsAfter.length)return t.update({selection:r.selectionsAfter[r.selectionsAfter.length-1],annotations:zS.of({side:e,rest:HS(i),selection:s}),userEvent:0==e?"select.undo":"select.redo",scrollIntoView:!0});if(r.changes){let n=1==i.length?qS:i.slice(0,i.length-1);return r.mapped&&(n=$S(n,r.mapped)),t.update({changes:r.changes,selection:r.startSelection,effects:r.effects,annotations:zS.of({side:e,rest:n,selection:s}),filter:!1,userEvent:0==e?"undo":"redo",scrollIntoView:!0})}return null}}KS.empty=new KS(qS,qS);"undefined"!=typeof Intl&&Intl.Segmenter;function YS(e,t){let n=-1;return e.changeByRange((i=>{let r=[];for(let o=i.from;o<=i.to;){let s=e.doc.lineAt(o);s.number>n&&(i.empty||i.to>s.from)&&(t(s,r,i),n=s.number),o=s.to+1}let s=e.changes(r);return{changes:r,range:cg.range(s.mapPos(i.anchor,1),s.mapPos(i.head,1))}}))}const JS=e=>{let{state:t,dispatch:n}=e;return!t.readOnly&&(n(t.update(YS(t,((e,n)=>{n.push({from:e.from,insert:t.facet(ES)})})),{userEvent:"input.indent"})),!0)},ZS=e=>{let{state:t,dispatch:n}=e;return!t.readOnly&&(n(t.update(YS(t,((e,n)=>{let i=/^\s*/.exec(e.text)[0];if(!i)return;let r=ym(i,t.tabSize),s=0,o=AS(t,Math.max(0,r-_S(t)));for(;s<i.length&&s<o.length&&i.charCodeAt(s)==o.charCodeAt(s);)s++;n.push({from:e.from+s,to:e.from+i.length,insert:o.slice(s)})})),{userEvent:"delete.dedent"})),!0)},ex={key:"Tab",run:JS,shift:ZS},tx=1024;let nx=0;class ix{constructor(e,t){this.from=e,this.to=t}}class rx{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.id=nx++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return"function"!=typeof e&&(e=ax.match(e)),t=>{let n=e(t);return void 0===n?null:[this,n]}}}rx.closedBy=new rx({deserialize:e=>e.split(" ")}),rx.openedBy=new rx({deserialize:e=>e.split(" ")}),rx.group=new rx({deserialize:e=>e.split(" ")}),rx.isolate=new rx({deserialize:e=>{if(e&&"rtl"!=e&&"ltr"!=e&&"auto"!=e)throw new RangeError("Invalid value for isolate: "+e);return e||"auto"}}),rx.contextHash=new rx({perNode:!0}),rx.lookAhead=new rx({perNode:!0}),rx.mounted=new rx({perNode:!0});class sx{constructor(e,t,n){this.tree=e,this.overlay=t,this.parser=n}static get(e){return e&&e.props&&e.props[rx.mounted.id]}}const ox=Object.create(null);class ax{constructor(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;this.name=e,this.props=t,this.id=n,this.flags=i}static define(e){let t=e.props&&e.props.length?Object.create(null):ox,n=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(null==e.name?8:0),i=new ax(e.name||"",t,e.id,n);if(e.props)for(let r of e.props)if(Array.isArray(r)||(r=r(i)),r){if(r[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");t[r[0].id]=r[1]}return i}prop(e){return this.props[e.id]}get isTop(){return(1&this.flags)>0}get isSkipped(){return(2&this.flags)>0}get isError(){return(4&this.flags)>0}get isAnonymous(){return(8&this.flags)>0}is(e){if("string"==typeof e){if(this.name==e)return!0;let t=this.prop(rx.group);return!!t&&t.indexOf(e)>-1}return this.id==e}static match(e){let t=Object.create(null);for(let n in e)for(let i of n.split(" "))t[i]=e[n];return e=>{for(let n=e.prop(rx.group),i=-1;i<(n?n.length:0);i++){let r=t[i<0?e.name:n[i]];if(r)return r}}}}ax.none=new ax("",Object.create(null),0,8);const lx=new WeakMap,cx=new WeakMap;var hx;!function(e){e[e.ExcludeBuffers=1]="ExcludeBuffers",e[e.IncludeAnonymous=2]="IncludeAnonymous",e[e.IgnoreMounts=4]="IgnoreMounts",e[e.IgnoreOverlays=8]="IgnoreOverlays"}(hx||(hx={}));class ux{constructor(e,t,n,i,r){if(this.type=e,this.children=t,this.positions=n,this.length=i,this.props=null,r&&r.length){this.props=Object.create(null);for(let[e,t]of r)this.props["number"==typeof e?e:e.id]=t}}toString(){let e=sx.get(this);if(e&&!e.overlay)return e.tree.toString();let t="";for(let n of this.children){let e=n.toString();e&&(t&&(t+=","),t+=e)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(t.length?"("+t+")":""):t}cursor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return new xx(this.topNode,e)}cursorAt(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=lx.get(this)||this.topNode,i=new xx(n);return i.moveTo(e,t),lx.set(this,i._tree),i}get topNode(){return new vx(this,0,0,null)}resolve(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=gx(lx.get(this)||this.topNode,e,t,!1);return lx.set(this,n),n}resolveInner(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=gx(cx.get(this)||this.topNode,e,t,!0);return cx.set(this,n),n}resolveStack(e){return function(e,t,n){let i=e.resolveInner(t,n),r=null;for(let s=i instanceof vx?i:i.context.parent;s;s=s.parent)if(s.index<0){let e=s.parent;(r||(r=[i])).push(e.resolve(t,n)),s=e}else{let e=sx.get(s.tree);if(e&&e.overlay&&e.overlay[0].from<=t&&e.overlay[e.overlay.length-1].to>=t){let o=new vx(e.tree,e.overlay[0].from+s.from,-1,s);(r||(r=[i])).push(gx(o,t,n,!1))}}return r?kx(r):i}(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0)}iterate(e){let{enter:t,leave:n,from:i=0,to:r=this.length}=e,s=e.mode||0,o=(s&hx.IncludeAnonymous)>0;for(let a=this.cursor(s|hx.IncludeAnonymous);;){let e=!1;if(a.from<=r&&a.to>=i&&(!o&&a.type.isAnonymous||!1!==t(a))){if(a.firstChild())continue;e=!0}for(;e&&n&&(o||!a.type.isAnonymous)&&n(a),!a.nextSibling();){if(!a.parent())return;e=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let t in this.props)e.push([+t,this.props[t]]);return e}balance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.children.length<=8?this:_x(ax.none,this.children,this.positions,0,this.children.length,0,this.length,((e,t,n)=>new ux(this.type,e,t,n,this.propValues)),e.makeTree||((e,t,n)=>new ux(ax.none,e,t,n)))}static build(e){return function(e){var t;let{buffer:n,nodeSet:i,maxBufferLength:r=tx,reused:s=[],minRepeatType:o=i.types.length}=e,a=Array.isArray(n)?new dx(n,n.length):n,l=i.types,c=0,h=0;function u(e,t,n,y,w,b){let{id:O,start:k,end:S,size:x}=a,T=h;for(;x<0;){if(a.next(),-1==x){let t=s[O];return n.push(t),void y.push(k-e)}if(-3==x)return void(c=O);if(-4==x)return void(h=O);throw new RangeError("Unrecognized record size: ".concat(x))}let C,E,_=l[O],A=k-e;if(S-k<=r&&(E=m(a.pos-t,w))){let t=new Uint16Array(E.size-E.skip),n=a.pos-E.size,r=t.length;for(;a.pos>n;)r=v(E.start,t,r);C=new fx(t,S-E.start,i),A=E.start-e}else{let e=a.pos-x;a.next();let t=[],n=[],i=O>=o?O:-1,s=0,l=S;for(;a.pos>e;)i>=0&&a.id==i&&a.size>=0?(a.end<=l-r&&(p(t,n,k,s,a.end,l,i,T),s=t.length,l=a.end),a.next()):b>2500?d(k,e,t,n):u(k,e,t,n,i,b+1);if(i>=0&&s>0&&s<t.length&&p(t,n,k,s,k,l,i,T),t.reverse(),n.reverse(),i>-1&&s>0){let e=f(_);C=_x(_,t,n,0,t.length,0,S-k,e,e)}else C=g(_,t,n,S-k,T-S)}n.push(C),y.push(A)}function d(e,t,n,s){let o=[],l=0,c=-1;for(;a.pos>t;){let{id:e,start:t,end:n,size:i}=a;if(i>4)a.next();else{if(c>-1&&t<c)break;c<0&&(c=n-r),o.push(e,t,n),l++,a.next()}}if(l){let t=new Uint16Array(4*l),r=o[o.length-2];for(let e=o.length-3,n=0;e>=0;e-=3)t[n++]=o[e],t[n++]=o[e+1]-r,t[n++]=o[e+2]-r,t[n++]=n;n.push(new fx(t,o[2]-r,i)),s.push(r-e)}}function f(e){return(t,n,i)=>{let r,s,o=0,a=t.length-1;if(a>=0&&(r=t[a])instanceof ux){if(!a&&r.type==e&&r.length==i)return r;(s=r.prop(rx.lookAhead))&&(o=n[a]+r.length+s)}return g(e,t,n,i,o)}}function p(e,t,n,r,s,o,a,l){let c=[],h=[];for(;e.length>r;)c.push(e.pop()),h.push(t.pop()+n-s);e.push(g(i.types[a],c,h,o-s,l-o)),t.push(s-n)}function g(e,t,n,i){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,s=arguments.length>5?arguments[5]:void 0;if(c){let e=[rx.contextHash,c];s=s?[e].concat(s):[e]}if(r>25){let e=[rx.lookAhead,r];s=s?[e].concat(s):[e]}return new ux(e,t,n,i,s)}function m(e,t){let n=a.fork(),i=0,s=0,l=0,c=n.end-r,h={size:0,start:0,skip:0};e:for(let r=n.pos-e;n.pos>r;){let e=n.size;if(n.id==t&&e>=0){h.size=i,h.start=s,h.skip=l,l+=4,i+=4,n.next();continue}let a=n.pos-e;if(e<0||a<r||n.start<c)break;let u=n.id>=o?4:0,d=n.start;for(n.next();n.pos>a;){if(n.size<0){if(-3!=n.size)break e;u+=4}else n.id>=o&&(u+=4);n.next()}s=d,i+=e,l+=u}return(t<0||i==e)&&(h.size=i,h.start=s,h.skip=l),h.size>4?h:void 0}function v(e,t,n){let{id:i,start:r,end:s,size:l}=a;if(a.next(),l>=0&&i<o){let o=n;if(l>4){let i=a.pos-(l-4);for(;a.pos>i;)n=v(e,t,n)}t[--n]=o,t[--n]=s-e,t[--n]=r-e,t[--n]=i}else-3==l?c=i:-4==l&&(h=i);return n}let y=[],w=[];for(;a.pos>0;)u(e.start||0,e.bufferStart||0,y,w,-1,0);let b=null!==(t=e.length)&&void 0!==t?t:y.length?w[0]+y[0].length:0;return new ux(l[e.topID],y.reverse(),w.reverse(),b)}(e)}}ux.empty=new ux(ax.none,[],[],0);class dx{constructor(e,t){this.buffer=e,this.index=t}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new dx(this.buffer,this.index)}}class fx{constructor(e,t,n){this.buffer=e,this.length=t,this.set=n}get type(){return ax.none}toString(){let e=[];for(let t=0;t<this.buffer.length;)e.push(this.childString(t)),t=this.buffer[t+3];return e.join(",")}childString(e){let t=this.buffer[e],n=this.buffer[e+3],i=this.set.types[t],r=i.name;if(/\W/.test(r)&&!i.isError&&(r=JSON.stringify(r)),n==(e+=4))return r;let s=[];for(;e<n;)s.push(this.childString(e)),e=this.buffer[e+3];return r+"("+s.join(",")+")"}findChild(e,t,n,i,r){let{buffer:s}=this,o=-1;for(let a=e;a!=t&&!(px(r,i,s[a+1],s[a+2])&&(o=a,n>0));a=s[a+3]);return o}slice(e,t,n){let i=this.buffer,r=new Uint16Array(t-e),s=0;for(let o=e,a=0;o<t;){r[a++]=i[o++],r[a++]=i[o++]-n;let t=r[a++]=i[o++]-n;r[a++]=i[o++]-e,s=Math.max(s,t)}return new fx(r,s,this.set)}}function px(e,t,n,i){switch(e){case-2:return n<t;case-1:return i>=t&&n<t;case 0:return n<t&&i>t;case 1:return n<=t&&i>t;case 2:return i>t;case 4:return!0}}function gx(e,t,n,i){for(var r;e.from==e.to||(n<1?e.from>=t:e.from>t)||(n>-1?e.to<=t:e.to<t);){let t=!i&&e instanceof vx&&e.index<0?null:e.parent;if(!t)return e;e=t}let s=i?0:hx.IgnoreOverlays;if(i)for(let o=e,a=o.parent;a;o=a,a=o.parent)o instanceof vx&&o.index<0&&(null===(r=a.enter(t,n,s))||void 0===r?void 0:r.from)!=o.from&&(e=a);for(;;){let i=e.enter(t,n,s);if(!i)return e;e=i}}class mx{cursor(){return new xx(this,arguments.length>0&&void 0!==arguments[0]?arguments[0]:0)}getChild(e){let t=yx(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:null);return t.length?t[0]:null}getChildren(e){return yx(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}resolve(e){return gx(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,!1)}resolveInner(e){return gx(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,!0)}matchContext(e){return wx(this,e)}enterUnfinishedNodesBefore(e){let t=this.childBefore(e),n=this;for(;t;){let e=t.lastChild;if(!e||e.to!=t.to)break;e.type.isError&&e.from==e.to?(n=t,t=e.prevSibling):t=e}return n}get node(){return this}get next(){return this.parent}}class vx extends mx{constructor(e,t,n,i){super(),this._tree=e,this.from=t,this.index=n,this._parent=i}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,t,n,i){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;for(let s=this;;){for(let{children:o,positions:a}=s._tree,l=t>0?o.length:-1;e!=l;e+=t){let l=o[e],c=a[e]+s.from;if(px(i,n,c,c+l.length))if(l instanceof fx){if(r&hx.ExcludeBuffers)continue;let o=l.findChild(0,l.buffer.length,t,n-c,i);if(o>-1)return new Ox(new bx(s,l,e,c),null,o)}else if(r&hx.IncludeAnonymous||!l.type.isAnonymous||Tx(l)){let o;if(!(r&hx.IgnoreMounts)&&(o=sx.get(l))&&!o.overlay)return new vx(o.tree,c,e,s);let a=new vx(l,c,e,s);return r&hx.IncludeAnonymous||!a.type.isAnonymous?a:a.nextChild(t<0?l.children.length-1:0,t,n,i)}}if(r&hx.IncludeAnonymous||!s.type.isAnonymous)return null;if(e=s.index>=0?s.index+t:t<0?-1:s._parent._tree.children.length,s=s._parent,!s)return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,t){let n,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(!(i&hx.IgnoreOverlays)&&(n=sx.get(this._tree))&&n.overlay){let i=e-this.from;for(let{from:e,to:r}of n.overlay)if((t>0?e<=i:e<i)&&(t<0?r>=i:r>i))return new vx(n.tree,n.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,t,i)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}}function yx(e,t,n,i){let r=e.cursor(),s=[];if(!r.firstChild())return s;if(null!=n)for(let o=!1;!o;)if(o=r.type.is(n),!r.nextSibling())return s;for(;;){if(null!=i&&r.type.is(i))return s;if(r.type.is(t)&&s.push(r.node),!r.nextSibling())return null==i?s:[]}}function wx(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.length-1;for(let i=e.parent;n>=0;i=i.parent){if(!i)return!1;if(!i.type.isAnonymous){if(t[n]&&t[n]!=i.name)return!1;n--}}return!0}class bx{constructor(e,t,n,i){this.parent=e,this.buffer=t,this.index=n,this.start=i}}class Ox extends mx{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,t,n){super(),this.context=e,this._parent=t,this.index=n,this.type=e.buffer.set.types[e.buffer.buffer[n]]}child(e,t,n){let{buffer:i}=this.context,r=i.findChild(this.index+4,i.buffer[this.index+3],e,t-this.context.start,n);return r<0?null:new Ox(this.context,this,r)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,t){if((arguments.length>2&&void 0!==arguments[2]?arguments[2]:0)&hx.ExcludeBuffers)return null;let{buffer:n}=this.context,i=n.findChild(this.index+4,n.buffer[this.index+3],t>0?1:-1,e-this.context.start,t);return i<0?null:new Ox(this.context,this,i)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,t=e.buffer[this.index+3];return t<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new Ox(this.context,this._parent,t):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,t=this._parent?this._parent.index+4:0;return this.index==t?this.externalSibling(-1):new Ox(this.context,this._parent,e.findChild(t,this.index,-1,0,4))}get tree(){return null}toTree(){let e=[],t=[],{buffer:n}=this.context,i=this.index+4,r=n.buffer[this.index+3];if(r>i){let s=n.buffer[this.index+1];e.push(n.slice(i,r,s)),t.push(0)}return new ux(this.type,e,t,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}}function kx(e){if(!e.length)return null;let t=0,n=e[0];for(let s=1;s<e.length;s++){let i=e[s];(i.from>n.from||i.to<n.to)&&(n=i,t=s)}let i=n instanceof vx&&n.index<0?null:n.parent,r=e.slice();return i?r[t]=i:r.splice(t,1),new Sx(r,n)}class Sx{constructor(e,t){this.heads=e,this.node=t}get next(){return kx(this.heads)}}class xx{get name(){return this.type.name}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(this.mode=t,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof vx)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let t=e._parent;t;t=t._parent)this.stack.unshift(t.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return!!e&&(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0)}yieldBuf(e,t){this.index=e;let{start:n,buffer:i}=this.buffer;return this.type=t||i.set.types[i.buffer[e]],this.from=n+i.buffer[e+1],this.to=n+i.buffer[e+2],!0}yield(e){return!!e&&(e instanceof vx?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)))}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,t,n){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,t,n,this.mode));let{buffer:i}=this.buffer,r=i.findChild(this.index+4,i.buffer[this.index+3],e,t-this.buffer.start,n);return!(r<0)&&(this.stack.push(this.index),this.yieldBuf(r))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.mode;return this.buffer?!(n&hx.ExcludeBuffers)&&this.enterChild(1,e,t):this.yield(this._tree.enter(e,t,n))}parent(){if(!this.buffer)return this.yieldNode(this.mode&hx.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&hx.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return!!this._tree._parent&&this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode));let{buffer:t}=this.buffer,n=this.stack.length-1;if(e<0){let e=n<0?0:this.stack[n]+4;if(this.index!=e)return this.yieldBuf(t.findChild(e,this.index,-1,0,4))}else{let e=t.buffer[this.index+3];if(e<(n<0?t.buffer.length:t.buffer[this.stack[n]+3]))return this.yieldBuf(e)}return n<0&&this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode))}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let t,n,{buffer:i}=this;if(i){if(e>0){if(this.index<i.buffer.buffer.length)return!1}else for(let e=0;e<this.index;e++)if(i.buffer.buffer[e+3]<this.index)return!1;({index:t,parent:n}=i)}else({index:t,_parent:n}=this._tree);for(;n;({index:t,_parent:n}=n))if(t>-1)for(let i=t+e,r=e<0?-1:n._tree.children.length;i!=r;i+=e){let e=n._tree.children[i];if(this.mode&hx.IncludeAnonymous||e instanceof fx||!e.type.isAnonymous||Tx(e))return!1}return!0}move(e,t){if(t&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.move(1,e)}prev(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.move(-1,e)}moveTo(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;for(;(this.from==this.to||(t<1?this.from>=e:this.from>e)||(t>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,t););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,t=null,n=0;if(e&&e.context==this.buffer)e:for(let i=this.index,r=this.stack.length;r>=0;){for(let s=e;s;s=s._parent)if(s.index==i){if(i==this.index)return s;t=s,n=r+1;break e}i=this.stack[--r]}for(let i=n;i<this.stack.length;i++)t=new Ox(this.buffer,t,this.stack[i]);return this.bufferNode=new Ox(this.buffer,t,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,t){for(let n=0;;){let i=!1;if(this.type.isAnonymous||!1!==e(this)){if(this.firstChild()){n++;continue}this.type.isAnonymous||(i=!0)}for(;i&&t&&t(this),i=this.type.isAnonymous,!this.nextSibling();){if(!n)return;this.parent(),n--,i=!0}}}matchContext(e){if(!this.buffer)return wx(this.node,e);let{buffer:t}=this.buffer,{types:n}=t.set;for(let i=e.length-1,r=this.stack.length-1;i>=0;r--){if(r<0)return wx(this.node,e,i);let s=n[t.buffer[this.stack[r]]];if(!s.isAnonymous){if(e[i]&&e[i]!=s.name)return!1;i--}}return!0}}function Tx(e){return e.children.some((e=>e instanceof fx||!e.type.isAnonymous||Tx(e)))}const Cx=new WeakMap;function Ex(e,t){if(!e.isAnonymous||t instanceof fx||t.type!=e)return 1;let n=Cx.get(t);if(null==n){n=1;for(let i of t.children){if(i.type!=e||!(i instanceof ux)){n=1;break}n+=Ex(e,i)}Cx.set(t,n)}return n}function _x(e,t,n,i,r,s,o,a,l){let c=0;for(let f=i;f<r;f++)c+=Ex(e,t[f]);let h=Math.ceil(1.5*c/8),u=[],d=[];return function t(n,i,r,o,a){for(let c=r;c<o;){let r=c,f=i[c],p=Ex(e,n[c]);for(c++;c<o;c++){let t=Ex(e,n[c]);if(p+t>=h)break;p+=t}if(c==r+1){if(p>h){let e=n[r];t(e.children,e.positions,0,e.children.length,i[r]+a);continue}u.push(n[r])}else{let t=i[c-1]+n[c-1].length-f;u.push(_x(e,n,i,r,c,f,t,null,l))}d.push(f+a-s)}}(t,n,i,r,0),(a||l)(u,d,o)}class Ax{constructor(e,t,n,i){let r=arguments.length>4&&void 0!==arguments[4]&&arguments[4],s=arguments.length>5&&void 0!==arguments[5]&&arguments[5];this.from=e,this.to=t,this.tree=n,this.offset=i,this.open=(r?1:0)|(s?2:0)}get openStart(){return(1&this.open)>0}get openEnd(){return(2&this.open)>0}static addTree(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=[new Ax(0,e.length,e,0,!1,n)];for(let r of t)r.to>e.length&&i.push(r);return i}static applyChanges(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:128;if(!t.length)return e;let i=[],r=1,s=e.length?e[0]:null;for(let o=0,a=0,l=0;;o++){let c=o<t.length?t[o]:null,h=c?c.fromA:1e9;if(h-a>=n)for(;s&&s.from<h;){let t=s;if(a>=t.from||h<=t.to||l){let e=Math.max(t.from,a)-l,n=Math.min(t.to,h)-l;t=e>=n?null:new Ax(e,n,t.tree,t.offset+l,o>0,!!c)}if(t&&i.push(t),s.to>h)break;s=r<e.length?e[r++]:null}if(!c)break;a=c.toA,l=c.toA-c.toB}return i}}class Px{startParse(e,t,n){return"string"==typeof e&&(e=new Nx(e)),n=n?n.length?n.map((e=>new ix(e.from,e.to))):[new ix(0,0)]:[new ix(0,e.length)],this.createParse(e,t||[],n)}parse(e,t,n){let i=this.startParse(e,t,n);for(;;){let e=i.advance();if(e)return e}}}class Nx{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,t){return this.string.slice(e,t)}}new rx({perNode:!0});let Ix=0;class Rx{constructor(e,t,n){this.set=e,this.base=t,this.modified=n,this.id=Ix++}static define(e){if(null===e||void 0===e?void 0:e.base)throw new Error("Can not derive from a modified tag");let t=new Rx([],null,[]);if(t.set.push(t),e)for(let n of e.set)t.set.push(n);return t}static defineModifier(){let e=new Mx;return t=>t.modified.indexOf(e)>-1?t:Mx.get(t.base||t,t.modified.concat(e).sort(((e,t)=>e.id-t.id)))}}let Dx=0;class Mx{constructor(){this.instances=[],this.id=Dx++}static get(e,t){if(!t.length)return e;let n=t[0].instances.find((n=>n.base==e&&function(e,t){return e.length==t.length&&e.every(((e,n)=>e==t[n]))}(t,n.modified)));if(n)return n;let i=[],r=new Rx(i,e,t);for(let o of t)o.instances.push(r);let s=function(e){let t=[[]];for(let n=0;n<e.length;n++)for(let i=0,r=t.length;i<r;i++)t.push(t[i].concat(e[n]));return t.sort(((e,t)=>t.length-e.length))}(t);for(let o of e.set)if(!o.modified.length)for(let e of s)i.push(Mx.get(o,e));return r}}function Lx(e){let t=Object.create(null);for(let n in e){let i=e[n];Array.isArray(i)||(i=[i]);for(let e of n.split(" "))if(e){let n=[],r=2,s=e;for(let t=0;;){if("..."==s&&t>0&&t+3==e.length){r=1;break}let i=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(s);if(!i)throw new RangeError("Invalid path: "+e);if(n.push("*"==i[0]?"":'"'==i[0][0]?JSON.parse(i[0]):i[0]),t+=i[0].length,t==e.length)break;let o=e[t++];if(t==e.length&&"!"==o){r=0;break}if("/"!=o)throw new RangeError("Invalid path: "+e);s=e.slice(t)}let o=n.length-1,a=n[o];if(!a)throw new RangeError("Invalid path: "+e);let l=new zx(i,r,o>0?n.slice(0,o):null);t[a]=l.sort(t[a])}}return Qx.add(t)}const Qx=new rx;class zx{constructor(e,t,n,i){this.tags=e,this.mode=t,this.context=n,this.next=i}get opaque(){return 0==this.mode}get inherit(){return 1==this.mode}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}function jx(e,t){let n=Object.create(null);for(let s of e)if(Array.isArray(s.tag))for(let e of s.tag)n[e.id]=s.class;else n[s.tag.id]=s.class;let{scope:i,all:r=null}=t||{};return{style:e=>{let t=r;for(let i of e)for(let e of i.set){let i=n[e.id];if(i){t=t?t+" "+i:i;break}}return t},scope:i}}function Ux(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:e.length,s=new Vx(i,Array.isArray(t)?t:[t],n);s.highlightRange(e.cursor(),i,r,"",s.highlighters),s.flush(r)}zx.empty=new zx([],2,null);class Vx{constructor(e,t,n){this.at=e,this.highlighters=t,this.span=n,this.class=""}startSpan(e,t){t!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=t)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,t,n,i,r){let{type:s,from:o,to:a}=e;if(o>=n||a<=t)return;s.isTop&&(r=this.highlighters.filter((e=>!e.scope||e.scope(s))));let l=i,c=function(e){let t=e.type.prop(Qx);for(;t&&t.context&&!e.matchContext(t.context);)t=t.next;return t||null}(e)||zx.empty,h=function(e,t){let n=null;for(let i of e){let e=i.style(t);e&&(n=n?n+" "+e:e)}return n}(r,c.tags);if(h&&(l&&(l+=" "),l+=h,1==c.mode&&(i+=(i?" ":"")+h)),this.startSpan(Math.max(t,o),l),c.opaque)return;let u=e.tree&&e.tree.prop(rx.mounted);if(u&&u.overlay){let s=e.node.enter(u.overlay[0].from+o,1),c=this.highlighters.filter((e=>!e.scope||e.scope(u.tree.type))),h=e.firstChild();for(let d=0,f=o;;d++){let p=d<u.overlay.length?u.overlay[d]:null,g=p?p.from+o:a,m=Math.max(t,f),v=Math.min(n,g);if(m<v&&h)for(;e.from<v&&(this.highlightRange(e,m,v,i,r),this.startSpan(Math.min(v,e.to),l),!(e.to>=g)&&e.nextSibling()););if(!p||g>n)break;f=p.to+o,f>t&&(this.highlightRange(s.cursor(),Math.max(t,p.from+o),Math.min(n,f),"",c),this.startSpan(Math.min(n,f),l))}h&&e.parent()}else if(e.firstChild()){u&&(i="");do{if(!(e.to<=t)){if(e.from>=n)break;this.highlightRange(e,t,n,i,r),this.startSpan(Math.min(n,e.to),l)}}while(e.nextSibling());e.parent()}}}const Fx=Rx.define,qx=Fx(),Bx=Fx(),Wx=Fx(Bx),Hx=Fx(Bx),$x=Fx(),Xx=Fx($x),Gx=Fx($x),Kx=Fx(),Yx=Fx(Kx),Jx=Fx(),Zx=Fx(),eT=Fx(),tT=Fx(eT),nT=Fx(),iT={comment:qx,lineComment:Fx(qx),blockComment:Fx(qx),docComment:Fx(qx),name:Bx,variableName:Fx(Bx),typeName:Wx,tagName:Fx(Wx),propertyName:Hx,attributeName:Fx(Hx),className:Fx(Bx),labelName:Fx(Bx),namespace:Fx(Bx),macroName:Fx(Bx),literal:$x,string:Xx,docString:Fx(Xx),character:Fx(Xx),attributeValue:Fx(Xx),number:Gx,integer:Fx(Gx),float:Fx(Gx),bool:Fx($x),regexp:Fx($x),escape:Fx($x),color:Fx($x),url:Fx($x),keyword:Jx,self:Fx(Jx),null:Fx(Jx),atom:Fx(Jx),unit:Fx(Jx),modifier:Fx(Jx),operatorKeyword:Fx(Jx),controlKeyword:Fx(Jx),definitionKeyword:Fx(Jx),moduleKeyword:Fx(Jx),operator:Zx,derefOperator:Fx(Zx),arithmeticOperator:Fx(Zx),logicOperator:Fx(Zx),bitwiseOperator:Fx(Zx),compareOperator:Fx(Zx),updateOperator:Fx(Zx),definitionOperator:Fx(Zx),typeOperator:Fx(Zx),controlOperator:Fx(Zx),punctuation:eT,separator:Fx(eT),bracket:tT,angleBracket:Fx(tT),squareBracket:Fx(tT),paren:Fx(tT),brace:Fx(tT),content:Kx,heading:Yx,heading1:Fx(Yx),heading2:Fx(Yx),heading3:Fx(Yx),heading4:Fx(Yx),heading5:Fx(Yx),heading6:Fx(Yx),contentSeparator:Fx(Kx),list:Fx(Kx),quote:Fx(Kx),emphasis:Fx(Kx),strong:Fx(Kx),link:Fx(Kx),monospace:Fx(Kx),strikethrough:Fx(Kx),inserted:Fx(),deleted:Fx(),changed:Fx(),invalid:Fx(),meta:nT,documentMeta:Fx(nT),annotation:Fx(nT),processingInstruction:Fx(nT),definition:Rx.defineModifier(),constant:Rx.defineModifier(),function:Rx.defineModifier(),standard:Rx.defineModifier(),local:Rx.defineModifier(),special:Rx.defineModifier()};jx([{tag:iT.link,class:"tok-link"},{tag:iT.heading,class:"tok-heading"},{tag:iT.emphasis,class:"tok-emphasis"},{tag:iT.strong,class:"tok-strong"},{tag:iT.keyword,class:"tok-keyword"},{tag:iT.atom,class:"tok-atom"},{tag:iT.bool,class:"tok-bool"},{tag:iT.url,class:"tok-url"},{tag:iT.labelName,class:"tok-labelName"},{tag:iT.inserted,class:"tok-inserted"},{tag:iT.deleted,class:"tok-deleted"},{tag:iT.literal,class:"tok-literal"},{tag:iT.string,class:"tok-string"},{tag:iT.number,class:"tok-number"},{tag:[iT.regexp,iT.escape,iT.special(iT.string)],class:"tok-string2"},{tag:iT.variableName,class:"tok-variableName"},{tag:iT.local(iT.variableName),class:"tok-variableName tok-local"},{tag:iT.definition(iT.variableName),class:"tok-variableName tok-definition"},{tag:iT.special(iT.variableName),class:"tok-variableName2"},{tag:iT.definition(iT.propertyName),class:"tok-propertyName tok-definition"},{tag:iT.typeName,class:"tok-typeName"},{tag:iT.namespace,class:"tok-namespace"},{tag:iT.className,class:"tok-className"},{tag:iT.macroName,class:"tok-macroName"},{tag:iT.propertyName,class:"tok-propertyName"},{tag:iT.operator,class:"tok-operator"},{tag:iT.comment,class:"tok-comment"},{tag:iT.meta,class:"tok-meta"},{tag:iT.invalid,class:"tok-invalid"},{tag:iT.punctuation,class:"tok-punctuation"}]);var rT;const sT=new rx;const oT=new rx;class aT{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";this.data=e,this.name=i,em.prototype.hasOwnProperty("tree")||Object.defineProperty(em.prototype,"tree",{get(){return cT(this)}}),this.parser=t,this.extension=[yT.of(this),em.languageData.of(((e,t,n)=>{let i=lT(e,t,n),r=i.type.prop(sT);if(!r)return[];let s=e.facet(r),o=i.type.prop(oT);if(o){let r=i.resolve(t-i.from,n);for(let t of o)if(t.test(r,e)){let n=e.facet(t.facet);return"replace"==t.type?n:n.concat(s)}}return s}))].concat(n)}isActiveAt(e,t){return lT(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1).type.prop(sT)==this.data}findRegions(e){let t=e.facet(yT);if((null===t||void 0===t?void 0:t.data)==this.data)return[{from:0,to:e.doc.length}];if(!t||!t.allowsNesting)return[];let n=[],i=(e,t)=>{if(e.prop(sT)==this.data)return void n.push({from:t,to:t+e.length});let r=e.prop(rx.mounted);if(r){if(r.tree.prop(sT)==this.data){if(r.overlay)for(let e of r.overlay)n.push({from:e.from+t,to:e.to+t});else n.push({from:t,to:t+e.length});return}if(r.overlay){let e=n.length;if(i(r.tree,r.overlay[0].from+t),n.length>e)return}}for(let n=0;n<e.children.length;n++){let r=e.children[n];r instanceof ux&&i(r,e.positions[n]+t)}};return i(cT(e),0),n}get allowsNesting(){return!0}}function lT(e,t,n){let i=e.facet(yT),r=cT(e).topNode;if(!i||i.allowsNesting)for(let s=r;s;s=s.enter(t,n,hx.ExcludeBuffers))s.type.isTop&&(r=s);return r}aT.setState=Fg.define();function cT(e){let t=e.field(aT.state,!1);return t?t.tree:ux.empty}class hT{constructor(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}get length(){return this.doc.length}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,t){let n=this.cursorPos-this.string.length;return e<n||t>=this.cursorPos?this.doc.sliceString(e,t):this.string.slice(e-n,t-n)}}let uT=null;class dT{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3?arguments[3]:void 0,r=arguments.length>4?arguments[4]:void 0,s=arguments.length>5?arguments[5]:void 0,o=arguments.length>6?arguments[6]:void 0,a=arguments.length>7?arguments[7]:void 0;this.parser=e,this.state=t,this.fragments=n,this.tree=i,this.treeLen=r,this.viewport=s,this.skipped=o,this.scheduleOn=a,this.parse=null,this.tempSkipped=[]}static create(e,t,n){return new dT(e,t,[],ux.empty,0,n,[],null)}startParse(){return this.parser.startParse(new hT(this.state.doc),this.fragments)}work(e,t){return null!=t&&t>=this.state.doc.length&&(t=void 0),this.tree!=ux.empty&&this.isDone(null!==t&&void 0!==t?t:this.state.doc.length)?(this.takeTree(),!0):this.withContext((()=>{var n;if("number"==typeof e){let t=Date.now()+e;e=()=>Date.now()>t}for(this.parse||(this.parse=this.startParse()),null!=t&&(null==this.parse.stoppedAt||this.parse.stoppedAt>t)&&t<this.state.doc.length&&this.parse.stopAt(t);;){let i=this.parse.advance();if(i){if(this.fragments=this.withoutTempSkipped(Ax.addTree(i,this.fragments,null!=this.parse.stoppedAt)),this.treeLen=null!==(n=this.parse.stoppedAt)&&void 0!==n?n:this.state.doc.length,this.tree=i,this.parse=null,!(this.treeLen<(null!==t&&void 0!==t?t:this.state.doc.length)))return!0;this.parse=this.startParse()}if(e())return!1}}))}takeTree(){let e,t;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((null==this.parse.stoppedAt||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext((()=>{for(;!(t=this.parse.advance()););})),this.treeLen=e,this.tree=t,this.fragments=this.withoutTempSkipped(Ax.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let t=uT;uT=this;try{return e()}finally{uT=t}}withoutTempSkipped(e){for(let t;t=this.tempSkipped.pop();)e=fT(e,t.from,t.to);return e}changes(e,t){let{fragments:n,tree:i,treeLen:r,viewport:s,skipped:o}=this;if(this.takeTree(),!e.empty){let t=[];if(e.iterChangedRanges(((e,n,i,r)=>t.push({fromA:e,toA:n,fromB:i,toB:r}))),n=Ax.applyChanges(n,t),i=ux.empty,r=0,s={from:e.mapPos(s.from,-1),to:e.mapPos(s.to,1)},this.skipped.length){o=[];for(let t of this.skipped){let n=e.mapPos(t.from,1),i=e.mapPos(t.to,-1);n<i&&o.push({from:n,to:i})}}}return new dT(this.parser,t,n,i,r,s,o,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let t=this.skipped.length;for(let n=0;n<this.skipped.length;n++){let{from:t,to:i}=this.skipped[n];t<e.to&&i>e.from&&(this.fragments=fT(this.fragments,t,i),this.skipped.splice(n--,1))}return!(this.skipped.length>=t)&&(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,t){this.skipped.push({from:e,to:t})}static getSkippingParser(e){return new class extends Px{createParse(t,n,i){let r=i[0].from,s=i[i.length-1].to;return{parsedPos:r,advance(){let t=uT;if(t){for(let e of i)t.tempSkipped.push(e);e&&(t.scheduleOn=t.scheduleOn?Promise.all([t.scheduleOn,e]):e)}return this.parsedPos=s,new ux(ax.none,[],[],s-r)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let t=this.fragments;return this.treeLen>=e&&t.length&&0==t[0].from&&t[0].to>=e}static get(){return uT}}function fT(e,t,n){return Ax.applyChanges(e,[{fromA:t,toA:n,fromB:t,toB:n}])}class pT{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let t=this.context.changes(e.changes,e.state),n=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),t.viewport.to);return t.work(20,n)||t.takeTree(),new pT(t)}static init(e){let t=Math.min(3e3,e.doc.length),n=dT.create(e.facet(yT).parser,e,{from:0,to:t});return n.work(20,t)||n.takeTree(),new pT(n)}}aT.state=wg.define({create:pT.init,update(e,t){for(let n of t.effects)if(n.is(aT.setState))return n.value;return t.startState.facet(yT)!=t.state.facet(yT)?pT.init(t.state):e.apply(t)}});let gT=e=>{let t=setTimeout((()=>e()),500);return()=>clearTimeout(t)};"undefined"!=typeof requestIdleCallback&&(gT=e=>{let t=-1,n=setTimeout((()=>{t=requestIdleCallback(e,{timeout:400})}),100);return()=>t<0?clearTimeout(n):cancelIdleCallback(t)});const mT="undefined"!=typeof navigator&&(null===(rT=navigator.scheduling)||void 0===rT?void 0:rT.isInputPending)?()=>navigator.scheduling.isInputPending():null,vT=Ey.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let t=this.view.state.field(aT.state).context;(t.updateViewport(e.view.viewport)||this.view.viewport.to>t.treeLen)&&this.scheduleWork(),(e.docChanged||e.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(t)}scheduleWork(){if(this.working)return;let{state:e}=this.view,t=e.field(aT.state);t.tree==t.context.tree&&t.context.isDone(e.doc.length)||(this.working=gT(this.work))}work(e){this.working=null;let t=Date.now();if(this.chunkEnd<t&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=t+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:n,viewport:{to:i}}=this.view,r=n.field(aT.state);if(r.tree==r.context.tree&&r.context.isDone(i+1e5))return;let s=Date.now()+Math.min(this.chunkBudget,100,e&&!mT?Math.max(25,e.timeRemaining()-5):1e9),o=r.context.treeLen<i&&n.doc.length>i+1e3,a=r.context.work((()=>mT&&mT()||Date.now()>s),i+(o?0:1e5));this.chunkBudget-=Date.now()-t,(a||this.chunkBudget<=0)&&(r.context.takeTree(),this.view.dispatch({effects:aT.setState.of(new pT(r.context))})),this.chunkBudget>0&&(!a||o)&&this.scheduleWork(),this.checkAsyncSchedule(r.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then((()=>this.scheduleWork())).catch((e=>Sy(this.view.state,e))).then((()=>this.workScheduled--)),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),yT=dg.define({combine:e=>e.length?e[0]:null,enables:e=>[aT.state,vT,xb.contentAttributes.compute([e],(t=>{let n=t.facet(e);return n&&n.name?{"data-language":n.name}:{}}))]});const wT=dg.define(),bT=dg.define({combine:e=>{if(!e.length)return"  ";let t=e[0];if(!t||/\S/.test(t)||Array.from(t).some((e=>e!=t[0])))throw new Error("Invalid indent unit: "+JSON.stringify(e[0]));return t}});function OT(e){let t=e.facet(bT);return 9==t.charCodeAt(0)?e.tabSize*t.length:t.length}function kT(e,t){let n="",i=e.tabSize,r=e.facet(bT)[0];if("\t"==r){for(;t>=i;)n+="\t",t-=i;r=" "}for(let s=0;s<t;s++)n+=r;return n}function ST(e,t){e instanceof em&&(e=new xT(e));for(let i of e.state.facet(wT)){let n=i(e,t);if(void 0!==n)return n}let n=cT(e.state);return n.length>=t?function(e,t,n){let i=t.resolveStack(n),r=i.node.enterUnfinishedNodesBefore(n);if(r!=i.node){let e=[];for(let t=r;t!=i.node;t=t.parent)e.push(t);for(let t=e.length-1;t>=0;t--)i={node:e[t],next:i}}return CT(i,e,n)}(e,n,t):null}class xT{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.state=e,this.options=t,this.unit=OT(e)}lineAt(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=this.state.doc.lineAt(e),{simulateBreak:i,simulateDoubleBreak:r}=this.options;return null!=i&&i>=n.from&&i<=n.to?r&&i==e?{text:"",from:e}:(t<0?i<e:i<=e)?{text:n.text.slice(i-n.from),from:i}:{text:n.text.slice(0,i-n.from),from:n.from}:n}textAfterPos(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:n,from:i}=this.lineAt(e,t);return n.slice(e-i,Math.min(n.length,e+100-i))}column(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,{text:n,from:i}=this.lineAt(e,t),r=this.countColumn(n,e-i),s=this.options.overrideIndentation?this.options.overrideIndentation(i):-1;return s>-1&&(r+=s-this.countColumn(n,n.search(/\S|$/))),r}countColumn(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.length;return ym(e,this.state.tabSize,t)}lineIndent(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,{text:n,from:i}=this.lineAt(e,t),r=this.options.overrideIndentation;if(r){let e=r(i);if(e>-1)return e}return this.countColumn(n,n.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const TT=new rx;function CT(e,t,n){for(let i=e;i;i=i.next){let e=ET(i.node);if(e)return e(AT.create(t,n,i))}return 0}function ET(e){let t=e.type.prop(TT);if(t)return t;let n,i=e.firstChild;if(i&&(n=i.type.prop(rx.closedBy))){let t=e.lastChild,i=t&&n.indexOf(t.name)>-1;return e=>NT(e,!0,1,void 0,i&&!function(e){return e.pos==e.options.simulateBreak&&e.options.simulateDoubleBreak}(e)?t.from:void 0)}return null==e.parent?_T:null}function _T(){return 0}class AT extends xT{constructor(e,t,n){super(e.state,e.options),this.base=e,this.pos=t,this.context=n}get node(){return this.context.node}static create(e,t,n){return new AT(e,t,n)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(e){let t=this.state.doc.lineAt(e.from);for(;;){let n=e.resolve(t.from);for(;n.parent&&n.parent.from==n.from;)n=n.parent;if(PT(n,e))break;t=this.state.doc.lineAt(n.from)}return this.lineIndent(t.from)}continue(){return CT(this.context.next,this.base,this.pos)}}function PT(e,t){for(let n=t;n;n=n.parent)if(e==n)return!0;return!1}function NT(e,t,n,i,r){let s=e.textAfter,o=s.match(/^\s*/)[0].length,a=i&&s.slice(o,o+i.length)==i||r==e.pos+o,l=t?function(e){let t=e.node,n=t.childAfter(t.from),i=t.lastChild;if(!n)return null;let r=e.options.simulateBreak,s=e.state.doc.lineAt(n.from),o=null==r||r<=s.from?s.to:Math.min(s.to,r);for(let a=n.to;;){let e=t.childAfter(a);if(!e||e==i)return null;if(!e.type.isSkipped)return e.from<o?n:null;a=e.to}}(e):null;return l?a?e.column(l.from):e.column(l.to):e.baseIndent+(a?0:e.unit*n)}const IT=dg.define(),RT=new rx;function DT(e){let t=e.lastChild;return t&&t.to==e.to&&t.type.isError}function MT(e,t,n){for(let i of e.facet(IT)){let r=i(e,t,n);if(r)return r}return function(e,t,n){let i=cT(e);if(i.length<n)return null;let r=null;for(let s=i.resolveStack(n,1);s;s=s.next){let o=s.node;if(o.to<=n||o.from>n)continue;if(r&&o.from<t)break;let a=o.type.prop(RT);if(a&&(o.to<i.length-50||i.length==e.doc.length||!DT(o))){let i=a(o,e);i&&i.from<=n&&i.from>=t&&i.to>n&&(r=i)}}return r}(e,t,n)}function LT(e,t){let n=t.mapPos(e.from,1),i=t.mapPos(e.to,-1);return n>=i?void 0:{from:n,to:i}}const QT=Fg.define({map:LT}),zT=Fg.define({map:LT});function jT(e){let t=[];for(let{head:n}of e.state.selection.ranges)t.some((e=>e.from<=n&&e.to>=n))||t.push(e.lineBlockAt(n));return t}const UT=wg.define({create:()=>Mv.none,update(e,t){e=e.map(t.changes);for(let n of t.effects)if(n.is(QT)&&!FT(e,n.value.from,n.value.to)){let{preparePlaceholder:i}=t.state.facet($T),r=i?Mv.replace({widget:new YT(i(t.state,n.value))}):KT;e=e.update({add:[r.range(n.value.from,n.value.to)]})}else n.is(zT)&&(e=e.update({filter:(e,t)=>n.value.from!=e||n.value.to!=t,filterFrom:n.value.from,filterTo:n.value.to}));if(t.selection){let n=!1,{head:i}=t.selection.main;e.between(i,i,((e,t)=>{e<i&&t>i&&(n=!0)})),n&&(e=e.update({filterFrom:i,filterTo:i,filter:(e,t)=>t<=i||e>=i}))}return e},provide:e=>xb.decorations.from(e),toJSON(e,t){let n=[];return e.between(0,t.doc.length,((e,t)=>{n.push(e,t)})),n},fromJSON(e){if(!Array.isArray(e)||e.length%2)throw new RangeError("Invalid JSON for fold state");let t=[];for(let n=0;n<e.length;){let i=e[n++],r=e[n++];if("number"!=typeof i||"number"!=typeof r)throw new RangeError("Invalid JSON for fold state");t.push(KT.range(i,r))}return Mv.set(t,!0)}});function VT(e,t,n){var i;let r=null;return null===(i=e.field(UT,!1))||void 0===i||i.between(t,n,((e,t)=>{(!r||r.from>e)&&(r={from:e,to:t})})),r}function FT(e,t,n){let i=!1;return e.between(t,t,((e,r)=>{e==t&&r==n&&(i=!0)})),i}function qT(e,t){return e.field(UT,!1)?t:t.concat(Fg.appendConfig.of(XT()))}function BT(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=e.state.doc.lineAt(t.from).number,r=e.state.doc.lineAt(t.to).number;return xb.announce.of("".concat(e.state.phrase(n?"Folded lines":"Unfolded lines")," ").concat(i," ").concat(e.state.phrase("to")," ").concat(r,"."))}const WT=[{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:e=>{for(let t of jT(e)){let n=MT(e.state,t.from,t.to);if(n)return e.dispatch({effects:qT(e.state,[QT.of(n),BT(e,n)])}),!0}return!1}},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:e=>{if(!e.state.field(UT,!1))return!1;let t=[];for(let n of jT(e)){let i=VT(e.state,n.from,n.to);i&&t.push(zT.of(i),BT(e,i,!1))}return t.length&&e.dispatch({effects:t}),t.length>0}},{key:"Ctrl-Alt-[",run:e=>{let{state:t}=e,n=[];for(let i=0;i<t.doc.length;){let r=e.lineBlockAt(i),s=MT(t,r.from,r.to);s&&n.push(QT.of(s)),i=(s?e.lineBlockAt(s.to):r).to+1}return n.length&&e.dispatch({effects:qT(e.state,n)}),!!n.length}},{key:"Ctrl-Alt-]",run:e=>{let t=e.state.field(UT,!1);if(!t||!t.size)return!1;let n=[];return t.between(0,e.state.doc.length,((e,t)=>{n.push(zT.of({from:e,to:t}))})),e.dispatch({effects:n}),!0}}],HT={placeholderDOM:null,preparePlaceholder:null,placeholderText:"\u2026"},$T=dg.define({combine:e=>tm(e,HT)});function XT(e){let t=[UT,eC];return e&&t.push($T.of(e)),t}function GT(e,t){let{state:n}=e,i=n.facet($T),r=t=>{let n=e.lineBlockAt(e.posAtDOM(t.target)),i=VT(e.state,n.from,n.to);i&&e.dispatch({effects:zT.of(i)}),t.preventDefault()};if(i.placeholderDOM)return i.placeholderDOM(e,r,t);let s=document.createElement("span");return s.textContent=i.placeholderText,s.setAttribute("aria-label",n.phrase("folded code")),s.title=n.phrase("unfold"),s.className="cm-foldPlaceholder",s.onclick=r,s}const KT=Mv.replace({widget:new class extends Rv{toDOM(e){return GT(e,null)}}});class YT extends Rv{constructor(e){super(),this.value=e}eq(e){return this.value==e.value}toDOM(e){return GT(e,this.value)}}const JT={openText:"\u2304",closedText:"\u203a",markerDOM:null,domEventHandlers:{},foldingChanged:()=>!1};class ZT extends qO{constructor(e,t){super(),this.config=e,this.open=t}eq(e){return this.config==e.config&&this.open==e.open}toDOM(e){if(this.config.markerDOM)return this.config.markerDOM(this.open);let t=document.createElement("span");return t.textContent=this.open?this.config.openText:this.config.closedText,t.title=e.state.phrase(this.open?"Fold line":"Unfold line"),t}}const eC=xb.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class tC{constructor(e,t){let n;function i(e){let t=Sm.newName();return(n||(n=Object.create(null)))["."+t]=e,t}this.specs=e;const r="string"==typeof t.all?t.all:t.all?i(t.all):void 0,s=t.scope;this.scope=s instanceof aT?e=>e.prop(sT)==s.data:s?e=>e==s:void 0,this.style=jx(e.map((e=>({tag:e.tag,class:e.class||i(Object.assign({},e,{tag:null}))}))),{all:r}).style,this.module=n?new Sm(n):null,this.themeType=t.themeType}static define(e,t){return new tC(e,t||{})}}const nC=dg.define(),iC=dg.define({combine:e=>e.length?[e[0]]:null});function rC(e){let t=e.facet(nC);return t.length?t:e.facet(iC)}class sC{constructor(e){this.markCache=Object.create(null),this.tree=cT(e.state),this.decorations=this.buildDeco(e,rC(e.state)),this.decoratedTo=e.viewport.to}update(e){let t=cT(e.state),n=rC(e.state),i=n!=rC(e.startState),{viewport:r}=e.view,s=e.changes.mapPos(this.decoratedTo,1);t.length<r.to&&!i&&t.type==this.tree.type&&s>=r.to?(this.decorations=this.decorations.map(e.changes),this.decoratedTo=s):(t!=this.tree||e.viewportChanged||i)&&(this.tree=t,this.decorations=this.buildDeco(e.view,n),this.decoratedTo=r.to)}buildDeco(e,t){if(!t||!this.tree.length)return Mv.none;let n=new am;for(let{from:i,to:r}of e.visibleRanges)Ux(this.tree,t,((e,t,i)=>{n.add(e,t,this.markCache[i]||(this.markCache[i]=Mv.mark({class:i})))}),i,r);return n.finish()}}const oC=Tg.high(Ey.fromClass(sC,{decorations:e=>e.decorations})),aC=tC.define([{tag:iT.meta,color:"#404740"},{tag:iT.link,textDecoration:"underline"},{tag:iT.heading,textDecoration:"underline",fontWeight:"bold"},{tag:iT.emphasis,fontStyle:"italic"},{tag:iT.strong,fontWeight:"bold"},{tag:iT.strikethrough,textDecoration:"line-through"},{tag:iT.keyword,color:"#708"},{tag:[iT.atom,iT.bool,iT.url,iT.contentSeparator,iT.labelName],color:"#219"},{tag:[iT.literal,iT.inserted],color:"#164"},{tag:[iT.string,iT.deleted],color:"#a11"},{tag:[iT.regexp,iT.escape,iT.special(iT.string)],color:"#e40"},{tag:iT.definition(iT.variableName),color:"#00f"},{tag:iT.local(iT.variableName),color:"#30a"},{tag:[iT.typeName,iT.namespace],color:"#085"},{tag:iT.className,color:"#167"},{tag:[iT.special(iT.variableName),iT.macroName],color:"#256"},{tag:iT.definition(iT.propertyName),color:"#00c"},{tag:iT.comment,color:"#940"},{tag:iT.invalid,color:"#f00"}]),lC=xb.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),cC=1e4,hC="()[]{}",uC=dg.define({combine:e=>tm(e,{afterCursor:!0,brackets:hC,maxScanDistance:cC,renderMatch:pC})}),dC=Mv.mark({class:"cm-matchingBracket"}),fC=Mv.mark({class:"cm-nonmatchingBracket"});function pC(e){let t=[],n=e.matched?dC:fC;return t.push(n.range(e.start.from,e.start.to)),e.end&&t.push(n.range(e.end.from,e.end.to)),t}const gC=wg.define({create:()=>Mv.none,update(e,t){if(!t.docChanged&&!t.selection)return e;let n=[],i=t.state.facet(uC);for(let r of t.state.selection.ranges){if(!r.empty)continue;let e=bC(t.state,r.head,-1,i)||r.head>0&&bC(t.state,r.head-1,1,i)||i.afterCursor&&(bC(t.state,r.head,1,i)||r.head<t.state.doc.length&&bC(t.state,r.head+1,-1,i));e&&(n=n.concat(i.renderMatch(e,t.state)))}return Mv.set(n,!0)},provide:e=>xb.decorations.from(e)}),mC=[gC,lC];const vC=new rx;function yC(e,t,n){let i=e.prop(t<0?rx.openedBy:rx.closedBy);if(i)return i;if(1==e.name.length){let i=n.indexOf(e.name);if(i>-1&&i%2==(t<0?1:0))return[n[i+t]]}return null}function wC(e){let t=e.type.prop(vC);return t?t(e.node):e}function bC(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=i.maxScanDistance||cC,s=i.brackets||hC,o=cT(e),a=o.resolveInner(t,n);for(let l=a;l;l=l.parent){let i=yC(l.type,n,s);if(i&&l.from<l.to){let r=wC(l);if(r&&(n>0?t>=r.from&&t<r.to:t>r.from&&t<=r.to))return OC(e,t,n,l,r,i,s)}}return function(e,t,n,i,r,s,o){let a=n<0?e.sliceDoc(t-1,t):e.sliceDoc(t,t+1),l=o.indexOf(a);if(l<0||l%2==0!=n>0)return null;let c={from:n<0?t-1:t,to:n>0?t+1:t},h=e.doc.iterRange(t,n>0?e.doc.length:0),u=0;for(let d=0;!h.next().done&&d<=s;){let e=h.value;n<0&&(d+=e.length);let s=t+d*n;for(let t=n>0?0:e.length-1,a=n>0?e.length:-1;t!=a;t+=n){let a=o.indexOf(e[t]);if(!(a<0||i.resolveInner(s+t,1).type!=r))if(a%2==0==n>0)u++;else{if(1==u)return{start:c,end:{from:s+t,to:s+t+1},matched:a>>1==l>>1};u--}}n>0&&(d+=e.length)}return h.done?{start:c,matched:!1}:null}(e,t,n,o,a.type,r,s)}function OC(e,t,n,i,r,s,o){let a=i.parent,l={from:r.from,to:r.to},c=0,h=null===a||void 0===a?void 0:a.cursor();if(h&&(n<0?h.childBefore(i.from):h.childAfter(i.to)))do{if(n<0?h.to<=i.from:h.from>=i.to){if(0==c&&s.indexOf(h.type.name)>-1&&h.from<h.to){let e=wC(h);return{start:l,end:e?{from:e.from,to:e.to}:void 0,matched:!0}}if(yC(h.type,n,o))c++;else if(yC(h.type,-n,o)){if(0==c){let e=wC(h);return{start:l,end:e&&e.from<e.to?{from:e.from,to:e.to}:void 0,matched:!1}}c--}}}while(n<0?h.prevSibling():h.nextSibling());return{start:l,matched:!1}}const kC=Object.create(null),SC=[ax.none],xC=[],TC=Object.create(null),CC=Object.create(null);for(let[Sk,xj]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])CC[Sk]=_C(kC,xj);function EC(e,t){xC.indexOf(e)>-1||(xC.push(e),console.warn(t))}function _C(e,t){let n=[];for(let a of t.split(" ")){let t=[];for(let n of a.split(".")){let i=e[n]||iT[n];i?"function"==typeof i?t.length?t=t.map(i):EC(n,"Modifier ".concat(n," used at start of tag")):t.length?EC(n,"Tag ".concat(n," used as modifier")):t=Array.isArray(i)?i:[i]:EC(n,"Unknown highlighting tag ".concat(n))}for(let e of t)n.push(e)}if(!n.length)return 0;let i=t.replace(/ /g,"_"),r=i+" "+n.map((e=>e.id)),s=TC[r];if(s)return s.id;let o=TC[r]=ax.define({id:SC.length,name:i,props:[Lx({[i]:n})]});return SC.push(o),o.id}Bv.RTL,Bv.LTR;function AC(e,t){return n=>{let{state:i,dispatch:r}=n;if(i.readOnly)return!1;let s=e(t,i);return!!s&&(r(i.update(s)),!0)}}const PC=AC(LC,0),NC=AC(MC,0),IC=AC(((e,t)=>MC(e,t,function(e){let t=[];for(let n of e.selection.ranges){let i=e.doc.lineAt(n.from),r=n.to<=i.to?i:e.doc.lineAt(n.to),s=t.length-1;s>=0&&t[s].to>i.from?t[s].to=r.to:t.push({from:i.from+/^\s*/.exec(i.text)[0].length,to:r.to})}return t}(t))),0);function RC(e,t){let n=e.languageDataAt("commentTokens",t);return n.length?n[0]:{}}const DC=50;function MC(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.selection.ranges,i=n.map((e=>RC(t,e.from).block));if(!i.every((e=>e)))return null;let r=n.map(((e,n)=>function(e,t,n,i){let r,s,{open:o,close:a}=t,l=e.sliceDoc(n-DC,n),c=e.sliceDoc(i,i+DC),h=/\s*$/.exec(l)[0].length,u=/^\s*/.exec(c)[0].length,d=l.length-h;if(l.slice(d-o.length,d)==o&&c.slice(u,u+a.length)==a)return{open:{pos:n-h,margin:h&&1},close:{pos:i+u,margin:u&&1}};i-n<=2*DC?r=s=e.sliceDoc(n,i):(r=e.sliceDoc(n,n+DC),s=e.sliceDoc(i-DC,i));let f=/^\s*/.exec(r)[0].length,p=/\s*$/.exec(s)[0].length,g=s.length-p-a.length;return r.slice(f,f+o.length)==o&&s.slice(g,g+a.length)==a?{open:{pos:n+f+o.length,margin:/\s/.test(r.charAt(f+o.length))?1:0},close:{pos:i-p-a.length,margin:/\s/.test(s.charAt(g-1))?1:0}}:null}(t,i[n],e.from,e.to)));if(2!=e&&!r.every((e=>e)))return{changes:t.changes(n.map(((e,t)=>r[t]?[]:[{from:e.from,insert:i[t].open+" "},{from:e.to,insert:" "+i[t].close}])))};if(1!=e&&r.some((e=>e))){let e=[];for(let t,n=0;n<r.length;n++)if(t=r[n]){let r=i[n],{open:s,close:o}=t;e.push({from:s.pos-r.open.length,to:s.pos+s.margin},{from:o.pos-o.margin,to:o.pos+r.close.length})}return{changes:e}}return null}function LC(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.selection.ranges,i=[],r=-1;for(let{from:s,to:o}of n){let e=i.length,n=1e9,a=RC(t,s).line;if(a){for(let e=s;e<=o;){let l=t.doc.lineAt(e);if(l.from>r&&(s==o||o>l.from)){r=l.from;let e=/^\s*/.exec(l.text)[0].length,t=e==l.length,s=l.text.slice(e,e+a.length)==a?e:-1;e<l.text.length&&e<n&&(n=e),i.push({line:l,comment:s,token:a,indent:e,empty:t,single:!1})}e=l.to+1}if(n<1e9)for(let t=e;t<i.length;t++)i[t].indent<i[t].line.text.length&&(i[t].indent=n);i.length==e+1&&(i[e].single=!0)}}if(2!=e&&i.some((e=>e.comment<0&&(!e.empty||e.single)))){let e=[];for(let{line:t,token:r,indent:s,empty:o,single:a}of i)!a&&o||e.push({from:t.from+s,insert:r+" "});let n=t.changes(e);return{changes:n,selection:t.selection.map(n,1)}}if(1!=e&&i.some((e=>e.comment>=0))){let e=[];for(let{line:t,comment:n,token:r}of i)if(n>=0){let i=t.from+n,s=i+r.length;" "==t.text[s-t.from]&&s++,e.push({from:i,to:s})}return{changes:e}}return null}const QC=jg.define(),zC=jg.define(),jC=dg.define(),UC=dg.define({combine:e=>tm(e,{minDepth:100,newGroupDelay:500,joinToEvent:(e,t)=>t},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:(e,t)=>(n,i)=>e(n,i)||t(n,i)})}),VC=wg.define({create:()=>iE.empty,update(e,t){let n=t.state.facet(UC),i=t.annotation(QC);if(i){let r=$C.fromTransaction(t,i.selection),s=i.side,o=0==s?e.undone:e.done;return o=r?XC(o,o.length,n.minDepth,r):JC(o,t.startState.selection),new iE(0==s?i.rest:o,0==s?o:i.rest)}let r=t.annotation(zC);if("full"!=r&&"before"!=r||(e=e.isolate()),!1===t.annotation(qg.addToHistory))return t.changes.empty?e:e.addMapping(t.changes.desc);let s=$C.fromTransaction(t),o=t.annotation(qg.time),a=t.annotation(qg.userEvent);return s?e=e.addChanges(s,o,a,n,t):t.selection&&(e=e.addSelection(t.startState.selection,o,a,n.newGroupDelay)),"full"!=r&&"after"!=r||(e=e.isolate()),e},toJSON:e=>({done:e.done.map((e=>e.toJSON())),undone:e.undone.map((e=>e.toJSON()))}),fromJSON:e=>new iE(e.done.map($C.fromJSON),e.undone.map($C.fromJSON))});function FC(e,t){return function(n){let{state:i,dispatch:r}=n;if(!t&&i.readOnly)return!1;let s=i.field(VC,!1);if(!s)return!1;let o=s.pop(e,i,t);return!!o&&(r(o),!0)}}const qC=FC(0,!1),BC=FC(1,!1),WC=FC(0,!0),HC=FC(1,!0);class $C{constructor(e,t,n,i,r){this.changes=e,this.effects=t,this.mapped=n,this.startSelection=i,this.selectionsAfter=r}setSelAfter(e){return new $C(this.changes,this.effects,this.mapped,this.startSelection,e)}toJSON(){var e,t,n;return{changes:null===(e=this.changes)||void 0===e?void 0:e.toJSON(),mapped:null===(t=this.mapped)||void 0===t?void 0:t.toJSON(),startSelection:null===(n=this.startSelection)||void 0===n?void 0:n.toJSON(),selectionsAfter:this.selectionsAfter.map((e=>e.toJSON()))}}static fromJSON(e){return new $C(e.changes&&tg.fromJSON(e.changes),[],e.mapped&&eg.fromJSON(e.mapped),e.startSelection&&cg.fromJSON(e.startSelection),e.selectionsAfter.map(cg.fromJSON))}static fromTransaction(e,t){let n=KC;for(let i of e.startState.facet(jC)){let t=i(e);t.length&&(n=n.concat(t))}return!n.length&&e.changes.empty?null:new $C(e.changes.invert(e.startState.doc),n,void 0,t||e.startState.selection,KC)}static selection(e){return new $C(void 0,KC,void 0,void 0,e)}}function XC(e,t,n,i){let r=t+1>n+20?t-n-1:0,s=e.slice(r,t);return s.push(i),s}function GC(e,t){return e.length?t.length?e.concat(t):e:t}const KC=[],YC=200;function JC(e,t){if(e.length){let n=e[e.length-1],i=n.selectionsAfter.slice(Math.max(0,n.selectionsAfter.length-YC));return i.length&&i[i.length-1].eq(t)?e:(i.push(t),XC(e,e.length-1,1e9,n.setSelAfter(i)))}return[$C.selection([t])]}function ZC(e){let t=e[e.length-1],n=e.slice();return n[e.length-1]=t.setSelAfter(t.selectionsAfter.slice(0,t.selectionsAfter.length-1)),n}function eE(e,t){if(!e.length)return e;let n=e.length,i=KC;for(;n;){let r=tE(e[n-1],t,i);if(r.changes&&!r.changes.empty||r.effects.length){let t=e.slice(0,n);return t[n-1]=r,t}t=r.mapped,n--,i=r.selectionsAfter}return i.length?[$C.selection(i)]:KC}function tE(e,t,n){let i=GC(e.selectionsAfter.length?e.selectionsAfter.map((e=>e.map(t))):KC,n);if(!e.changes)return $C.selection(i);let r=e.changes.map(t),s=t.mapDesc(e.changes,!0),o=e.mapped?e.mapped.composeDesc(s):s;return new $C(r,Fg.mapEffects(e.effects,t),o,e.startSelection.map(s),i)}const nE=/^(input\.type|delete)($|\.)/;class iE{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0;this.done=e,this.undone=t,this.prevTime=n,this.prevUserEvent=i}isolate(){return this.prevTime?new iE(this.done,this.undone):this}addChanges(e,t,n,i,r){let s=this.done,o=s[s.length-1];return s=o&&o.changes&&!o.changes.empty&&e.changes&&(!n||nE.test(n))&&(!o.selectionsAfter.length&&t-this.prevTime<i.newGroupDelay&&i.joinToEvent(r,function(e,t){let n=[],i=!1;return e.iterChangedRanges(((e,t)=>n.push(e,t))),t.iterChangedRanges(((e,t,r,s)=>{for(let o=0;o<n.length;){let e=n[o++],t=n[o++];s>=e&&r<=t&&(i=!0)}})),i}(o.changes,e.changes))||"input.type.compose"==n)?XC(s,s.length-1,i.minDepth,new $C(e.changes.compose(o.changes),GC(e.effects,o.effects),o.mapped,o.startSelection,KC)):XC(s,s.length,i.minDepth,e),new iE(s,KC,t,n)}addSelection(e,t,n,i){let r=this.done.length?this.done[this.done.length-1].selectionsAfter:KC;return r.length>0&&t-this.prevTime<i&&n==this.prevUserEvent&&n&&/^select($|\.)/.test(n)&&function(e,t){return e.ranges.length==t.ranges.length&&0===e.ranges.filter(((e,n)=>e.empty!=t.ranges[n].empty)).length}(r[r.length-1],e)?this:new iE(JC(this.done,e),this.undone,t,n)}addMapping(e){return new iE(eE(this.done,e),eE(this.undone,e),this.prevTime,this.prevUserEvent)}pop(e,t,n){let i=0==e?this.done:this.undone;if(0==i.length)return null;let r=i[i.length-1],s=r.selectionsAfter[0]||t.selection;if(n&&r.selectionsAfter.length)return t.update({selection:r.selectionsAfter[r.selectionsAfter.length-1],annotations:QC.of({side:e,rest:ZC(i),selection:s}),userEvent:0==e?"select.undo":"select.redo",scrollIntoView:!0});if(r.changes){let n=1==i.length?KC:i.slice(0,i.length-1);return r.mapped&&(n=eE(n,r.mapped)),t.update({changes:r.changes,selection:r.startSelection,effects:r.effects,annotations:QC.of({side:e,rest:n,selection:s}),filter:!1,userEvent:0==e?"undo":"redo",scrollIntoView:!0})}return null}}iE.empty=new iE(KC,KC);const rE=[{key:"Mod-z",run:qC,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:BC,preventDefault:!0},{linux:"Ctrl-Shift-z",run:BC,preventDefault:!0},{key:"Mod-u",run:WC,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:HC,preventDefault:!0}];function sE(e,t){return cg.create(e.ranges.map(t),e.mainIndex)}function oE(e,t){return e.update({selection:t,scrollIntoView:!0,userEvent:"select"})}function aE(e,t){let{state:n,dispatch:i}=e,r=sE(n.selection,t);return!r.eq(n.selection,!0)&&(i(oE(n,r)),!0)}function lE(e,t){return cg.cursor(t?e.to:e.from)}function cE(e,t){return aE(e,(n=>n.empty?e.moveByChar(n,t):lE(n,t)))}function hE(e){return e.textDirectionAt(e.state.selection.main.head)==Bv.LTR}const uE=e=>cE(e,!hE(e)),dE=e=>cE(e,hE(e));function fE(e,t){return aE(e,(n=>n.empty?e.moveByGroup(n,t):lE(n,t)))}"undefined"!=typeof Intl&&Intl.Segmenter;function pE(e,t,n){if(t.type.prop(n))return!0;let i=t.to-t.from;return i&&(i>2||/[^\s,.;:]/.test(e.sliceDoc(t.from,t.to)))||t.firstChild}function gE(e,t,n){let i,r,s=cT(e).resolveInner(t.head),o=n?rx.closedBy:rx.openedBy;for(let a=t.head;;){let t=n?s.childAfter(a):s.childBefore(a);if(!t)break;pE(e,t,o)?s=t:a=n?t.to:t.from}return r=s.type.prop(o)&&(i=n?bC(e,s.from,1):bC(e,s.to,-1))&&i.matched?n?i.end.to:i.end.from:n?s.to:s.from,cg.cursor(r,n?-1:1)}function mE(e,t){return aE(e,(n=>{if(!n.empty)return lE(n,t);let i=e.moveVertically(n,t);return i.head!=n.head?i:e.moveToLineBoundary(n,t)}))}const vE=e=>mE(e,!1),yE=e=>mE(e,!0);function wE(e){let t,n=e.scrollDOM.clientHeight<e.scrollDOM.scrollHeight-2,i=0,r=0;if(n){for(let t of e.state.facet(xb.scrollMargins)){let n=t(e);(null===n||void 0===n?void 0:n.top)&&(i=Math.max(null===n||void 0===n?void 0:n.top,i)),(null===n||void 0===n?void 0:n.bottom)&&(r=Math.max(null===n||void 0===n?void 0:n.bottom,r))}t=e.scrollDOM.clientHeight-i-r}else t=(e.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:i,marginBottom:r,selfScroll:n,height:Math.max(e.defaultLineHeight,t-5)}}function bE(e,t){let n,i=wE(e),{state:r}=e,s=sE(r.selection,(n=>n.empty?e.moveVertically(n,t,i.height):lE(n,t)));if(s.eq(r.selection))return!1;if(i.selfScroll){let t=e.coordsAtPos(r.selection.main.head),o=e.scrollDOM.getBoundingClientRect(),a=o.top+i.marginTop,l=o.bottom-i.marginBottom;t&&t.top>a&&t.bottom<l&&(n=xb.scrollIntoView(s.main.head,{y:"start",yMargin:t.top-a}))}return e.dispatch(oE(r,s),{effects:n}),!0}const OE=e=>bE(e,!1),kE=e=>bE(e,!0);function SE(e,t,n){let i=e.lineBlockAt(t.head),r=e.moveToLineBoundary(t,n);if(r.head==t.head&&r.head!=(n?i.to:i.from)&&(r=e.moveToLineBoundary(t,n,!1)),!n&&r.head==i.from&&i.length){let n=/^\s*/.exec(e.state.sliceDoc(i.from,Math.min(i.from+100,i.to)))[0].length;n&&t.head!=i.from+n&&(r=cg.cursor(i.from+n))}return r}function xE(e,t,n){let i=!1,r=sE(e.selection,(t=>{let r=bC(e,t.head,-1)||bC(e,t.head,1)||t.head>0&&bC(e,t.head-1,1)||t.head<e.doc.length&&bC(e,t.head+1,-1);if(!r||!r.end)return t;i=!0;let s=r.start.from==t.head?r.end.to:r.end.from;return n?cg.range(t.anchor,s):cg.cursor(s)}));return!!i&&(t(oE(e,r)),!0)}function TE(e,t){let n=sE(e.state.selection,(e=>{let n=t(e);return cg.range(e.anchor,n.head,n.goalColumn,n.bidiLevel||void 0)}));return!n.eq(e.state.selection)&&(e.dispatch(oE(e.state,n)),!0)}function CE(e,t){return TE(e,(n=>e.moveByChar(n,t)))}const EE=e=>CE(e,!hE(e)),_E=e=>CE(e,hE(e));function AE(e,t){return TE(e,(n=>e.moveByGroup(n,t)))}function PE(e,t){return TE(e,(n=>e.moveVertically(n,t)))}const NE=e=>PE(e,!1),IE=e=>PE(e,!0);function RE(e,t){return TE(e,(n=>e.moveVertically(n,t,wE(e).height)))}const DE=e=>RE(e,!1),ME=e=>RE(e,!0),LE=e=>{let{state:t,dispatch:n}=e;return n(oE(t,{anchor:0})),!0},QE=e=>{let{state:t,dispatch:n}=e;return n(oE(t,{anchor:t.doc.length})),!0},zE=e=>{let{state:t,dispatch:n}=e;return n(oE(t,{anchor:t.selection.main.anchor,head:0})),!0},jE=e=>{let{state:t,dispatch:n}=e;return n(oE(t,{anchor:t.selection.main.anchor,head:t.doc.length})),!0};function UE(e,t){if(e.state.readOnly)return!1;let n="delete.selection",{state:i}=e,r=i.changeByRange((i=>{let{from:r,to:s}=i;if(r==s){let o=t(i);o<r?(n="delete.backward",o=VE(e,o,!1)):o>r&&(n="delete.forward",o=VE(e,o,!0)),r=Math.min(r,o),s=Math.max(s,o)}else r=VE(e,r,!1),s=VE(e,s,!0);return r==s?{range:i}:{changes:{from:r,to:s},range:cg.cursor(r,r<i.head?-1:1)}}));return!r.changes.empty&&(e.dispatch(i.update(r,{scrollIntoView:!0,userEvent:n,effects:"delete.selection"==n?xb.announce.of(i.phrase("Selection deleted")):void 0})),!0)}function VE(e,t,n){if(e instanceof xb)for(let i of e.state.facet(xb.atomicRanges).map((t=>t(e))))i.between(t,t,((e,i)=>{e<t&&i>t&&(t=n?i:e)}));return t}const FE=(e,t,n)=>UE(e,(i=>{let r,s,o=i.from,{state:a}=e,l=a.doc.lineAt(o);if(n&&!t&&o>l.from&&o<l.from+200&&!/[^ \t]/.test(r=l.text.slice(0,o-l.from))){if("\t"==r[r.length-1])return o-1;let e=ym(r,a.tabSize)%OT(a)||OT(a);for(let t=0;t<e&&" "==r[r.length-1-t];t++)o--;s=o}else s=Bp(l.text,o-l.from,t,t)+l.from,s==o&&l.number!=(t?a.doc.lines:1)?s+=t?1:-1:!t&&/[\ufe00-\ufe0f]/.test(l.text.slice(s-l.from,o-l.from))&&(s=Bp(l.text,s-l.from,!1,!1)+l.from);return s})),qE=e=>FE(e,!1,!0),BE=e=>FE(e,!0,!1),WE=(e,t)=>UE(e,(n=>{let i=n.head,{state:r}=e,s=r.doc.lineAt(i),o=r.charCategorizer(i);for(let e=null;;){if(i==(t?s.to:s.from)){i==n.head&&s.number!=(t?r.doc.lines:1)&&(i+=t?1:-1);break}let a=Bp(s.text,i-s.from,t)+s.from,l=s.text.slice(Math.min(i,a)-s.from,Math.max(i,a)-s.from),c=o(l);if(null!=e&&c!=e)break;" "==l&&i==n.head||(e=c),i=a}return i})),HE=e=>WE(e,!1);function $E(e){let t=[],n=-1;for(let i of e.selection.ranges){let r=e.doc.lineAt(i.from),s=e.doc.lineAt(i.to);if(i.empty||i.to!=s.from||(s=e.doc.lineAt(i.to-1)),n>=r.number){let e=t[t.length-1];e.to=s.to,e.ranges.push(i)}else t.push({from:r.from,to:s.to,ranges:[i]});n=s.number+1}return t}function XE(e,t,n){if(e.readOnly)return!1;let i=[],r=[];for(let s of $E(e)){if(n?s.to==e.doc.length:0==s.from)continue;let t=e.doc.lineAt(n?s.to+1:s.from-1),o=t.length+1;if(n){i.push({from:s.to,to:t.to},{from:s.from,insert:t.text+e.lineBreak});for(let t of s.ranges)r.push(cg.range(Math.min(e.doc.length,t.anchor+o),Math.min(e.doc.length,t.head+o)))}else{i.push({from:t.from,to:s.from},{from:s.to,insert:e.lineBreak+t.text});for(let e of s.ranges)r.push(cg.range(e.anchor-o,e.head-o))}}return!!i.length&&(t(e.update({changes:i,scrollIntoView:!0,selection:cg.create(r,e.selection.mainIndex),userEvent:"move.line"})),!0)}function GE(e,t,n){if(e.readOnly)return!1;let i=[];for(let r of $E(e))n?i.push({from:r.from,insert:e.doc.slice(r.from,r.to)+e.lineBreak}):i.push({from:r.to,insert:e.lineBreak+e.doc.slice(r.from,r.to)});return t(e.update({changes:i,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const KE=JE(!1),YE=JE(!0);function JE(e){return t=>{let{state:n,dispatch:i}=t;if(n.readOnly)return!1;let r=n.changeByRange((t=>{let{from:i,to:r}=t,s=n.doc.lineAt(i),o=!e&&i==r&&function(e,t){if(/\(\)|\[\]|\{\}/.test(e.sliceDoc(t-1,t+1)))return{from:t,to:t};let n,i=cT(e).resolveInner(t),r=i.childBefore(t),s=i.childAfter(t);return r&&s&&r.to<=t&&s.from>=t&&(n=r.type.prop(rx.closedBy))&&n.indexOf(s.name)>-1&&e.doc.lineAt(r.to).from==e.doc.lineAt(s.from).from&&!/\S/.test(e.sliceDoc(r.to,s.from))?{from:r.to,to:s.from}:null}(n,i);e&&(i=r=(r<=s.to?s:n.doc.lineAt(r)).to);let a=new xT(n,{simulateBreak:i,simulateDoubleBreak:!!o}),l=ST(a,i);for(null==l&&(l=ym(/^\s*/.exec(n.doc.lineAt(i).text)[0],n.tabSize));r<s.to&&/\s/.test(s.text[r-s.from]);)r++;o?({from:i,to:r}=o):i>s.from&&i<s.from+100&&!/\S/.test(s.text.slice(0,i))&&(i=s.from);let c=["",kT(n,l)];return o&&c.push(kT(n,a.lineIndent(s.from,-1))),{changes:{from:i,to:r,insert:Pp.of(c)},range:cg.cursor(i+1+c[1].length)}}));return i(n.update(r,{scrollIntoView:!0,userEvent:"input"})),!0}}function ZE(e,t){let n=-1;return e.changeByRange((i=>{let r=[];for(let o=i.from;o<=i.to;){let s=e.doc.lineAt(o);s.number>n&&(i.empty||i.to>s.from)&&(t(s,r,i),n=s.number),o=s.to+1}let s=e.changes(r);return{changes:r,range:cg.range(s.mapPos(i.anchor,1),s.mapPos(i.head,1))}}))}const e_=e=>{let{state:t,dispatch:n}=e;return!t.readOnly&&(n(t.update(ZE(t,((e,n)=>{n.push({from:e.from,insert:t.facet(bT)})})),{userEvent:"input.indent"})),!0)},t_=e=>{let{state:t,dispatch:n}=e;return!t.readOnly&&(n(t.update(ZE(t,((e,n)=>{let i=/^\s*/.exec(e.text)[0];if(!i)return;let r=ym(i,t.tabSize),s=0,o=kT(t,Math.max(0,r-OT(t)));for(;s<i.length&&s<o.length&&i.charCodeAt(s)==o.charCodeAt(s);)s++;n.push({from:e.from+s,to:e.from+i.length,insert:o.slice(s)})})),{userEvent:"delete.dedent"})),!0)},n_=[{key:"ArrowLeft",run:uE,shift:EE,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:e=>fE(e,!hE(e)),shift:e=>AE(e,!hE(e)),preventDefault:!0},{mac:"Cmd-ArrowLeft",run:e=>aE(e,(t=>SE(e,t,!hE(e)))),shift:e=>TE(e,(t=>SE(e,t,!hE(e)))),preventDefault:!0},{key:"ArrowRight",run:dE,shift:_E,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:e=>fE(e,hE(e)),shift:e=>AE(e,hE(e)),preventDefault:!0},{mac:"Cmd-ArrowRight",run:e=>aE(e,(t=>SE(e,t,hE(e)))),shift:e=>TE(e,(t=>SE(e,t,hE(e)))),preventDefault:!0},{key:"ArrowUp",run:vE,shift:NE,preventDefault:!0},{mac:"Cmd-ArrowUp",run:LE,shift:zE},{mac:"Ctrl-ArrowUp",run:OE,shift:DE},{key:"ArrowDown",run:yE,shift:IE,preventDefault:!0},{mac:"Cmd-ArrowDown",run:QE,shift:jE},{mac:"Ctrl-ArrowDown",run:kE,shift:ME},{key:"PageUp",run:OE,shift:DE},{key:"PageDown",run:kE,shift:ME},{key:"Home",run:e=>aE(e,(t=>SE(e,t,!1))),shift:e=>TE(e,(t=>SE(e,t,!1))),preventDefault:!0},{key:"Mod-Home",run:LE,shift:zE},{key:"End",run:e=>aE(e,(t=>SE(e,t,!0))),shift:e=>TE(e,(t=>SE(e,t,!0))),preventDefault:!0},{key:"Mod-End",run:QE,shift:jE},{key:"Enter",run:KE},{key:"Mod-a",run:e=>{let{state:t,dispatch:n}=e;return n(t.update({selection:{anchor:0,head:t.doc.length},userEvent:"select"})),!0}},{key:"Backspace",run:qE,shift:qE},{key:"Delete",run:BE},{key:"Mod-Backspace",mac:"Alt-Backspace",run:HE},{key:"Mod-Delete",mac:"Alt-Delete",run:e=>WE(e,!0)},{mac:"Mod-Backspace",run:e=>UE(e,(t=>{let n=e.moveToLineBoundary(t,!1).head;return t.head>n?n:Math.max(0,t.head-1)}))},{mac:"Mod-Delete",run:e=>UE(e,(t=>{let n=e.moveToLineBoundary(t,!0).head;return t.head<n?n:Math.min(e.state.doc.length,t.head+1)}))}].concat([{key:"Ctrl-b",run:uE,shift:EE,preventDefault:!0},{key:"Ctrl-f",run:dE,shift:_E},{key:"Ctrl-p",run:vE,shift:NE},{key:"Ctrl-n",run:yE,shift:IE},{key:"Ctrl-a",run:e=>aE(e,(t=>cg.cursor(e.lineBlockAt(t.head).from,1))),shift:e=>TE(e,(t=>cg.cursor(e.lineBlockAt(t.head).from)))},{key:"Ctrl-e",run:e=>aE(e,(t=>cg.cursor(e.lineBlockAt(t.head).to,-1))),shift:e=>TE(e,(t=>cg.cursor(e.lineBlockAt(t.head).to)))},{key:"Ctrl-d",run:BE},{key:"Ctrl-h",run:qE},{key:"Ctrl-k",run:e=>UE(e,(t=>{let n=e.lineBlockAt(t.head).to;return t.head<n?n:Math.min(e.state.doc.length,t.head+1)}))},{key:"Ctrl-Alt-h",run:HE},{key:"Ctrl-o",run:e=>{let{state:t,dispatch:n}=e;if(t.readOnly)return!1;let i=t.changeByRange((e=>({changes:{from:e.from,to:e.to,insert:Pp.of(["",""])},range:cg.cursor(e.from)})));return n(t.update(i,{scrollIntoView:!0,userEvent:"input"})),!0}},{key:"Ctrl-t",run:e=>{let{state:t,dispatch:n}=e;if(t.readOnly)return!1;let i=t.changeByRange((e=>{if(!e.empty||0==e.from||e.from==t.doc.length)return{range:e};let n=e.from,i=t.doc.lineAt(n),r=n==i.from?n-1:Bp(i.text,n-i.from,!1)+i.from,s=n==i.to?n+1:Bp(i.text,n-i.from,!0)+i.from;return{changes:{from:r,to:s,insert:t.doc.slice(n,s).append(t.doc.slice(r,n))},range:cg.cursor(s)}}));return!i.changes.empty&&(n(t.update(i,{scrollIntoView:!0,userEvent:"move.character"})),!0)}},{key:"Ctrl-v",run:kE}].map((e=>({mac:e.key,run:e.run,shift:e.shift})))),i_=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:e=>aE(e,(t=>gE(e.state,t,!hE(e)))),shift:e=>TE(e,(t=>gE(e.state,t,!hE(e))))},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:e=>aE(e,(t=>gE(e.state,t,hE(e)))),shift:e=>TE(e,(t=>gE(e.state,t,hE(e))))},{key:"Alt-ArrowUp",run:e=>{let{state:t,dispatch:n}=e;return XE(t,n,!1)}},{key:"Shift-Alt-ArrowUp",run:e=>{let{state:t,dispatch:n}=e;return GE(t,n,!1)}},{key:"Alt-ArrowDown",run:e=>{let{state:t,dispatch:n}=e;return XE(t,n,!0)}},{key:"Shift-Alt-ArrowDown",run:e=>{let{state:t,dispatch:n}=e;return GE(t,n,!0)}},{key:"Escape",run:e=>{let{state:t,dispatch:n}=e,i=t.selection,r=null;return i.ranges.length>1?r=cg.create([i.main]):i.main.empty||(r=cg.create([cg.cursor(i.main.head)])),!!r&&(n(oE(t,r)),!0)}},{key:"Mod-Enter",run:YE},{key:"Alt-l",mac:"Ctrl-l",run:e=>{let{state:t,dispatch:n}=e,i=$E(t).map((e=>{let{from:n,to:i}=e;return cg.range(n,Math.min(i+1,t.doc.length))}));return n(t.update({selection:cg.create(i),userEvent:"select"})),!0}},{key:"Mod-i",run:e=>{let{state:t,dispatch:n}=e,i=sE(t.selection,(e=>{var n;for(let i=cT(t).resolveStack(e.from,1);i;i=i.next){let{node:t}=i;if((t.from<e.from&&t.to>=e.to||t.to>e.to&&t.from<=e.from)&&(null===(n=t.parent)||void 0===n?void 0:n.parent))return cg.range(t.to,t.from)}return e}));return n(oE(t,i)),!0},preventDefault:!0},{key:"Mod-[",run:t_},{key:"Mod-]",run:e_},{key:"Mod-Alt-\\",run:e=>{let{state:t,dispatch:n}=e;if(t.readOnly)return!1;let i=Object.create(null),r=new xT(t,{overrideIndentation:e=>{let t=i[e];return null==t?-1:t}}),s=ZE(t,((e,n,s)=>{let o=ST(r,e.from);if(null==o)return;/\S/.test(e.text)||(o=0);let a=/^\s*/.exec(e.text)[0],l=kT(t,o);(a!=l||s.from<e.from+a.length)&&(i[e.from]=o,n.push({from:e.from,to:e.from+a.length,insert:l}))}));return s.changes.empty||n(t.update(s,{userEvent:"indent"})),!0}},{key:"Shift-Mod-k",run:e=>{if(e.state.readOnly)return!1;let{state:t}=e,n=t.changes($E(t).map((e=>{let{from:n,to:i}=e;return n>0?n--:i<t.doc.length&&i++,{from:n,to:i}}))),i=sE(t.selection,(t=>{let n;if(e.lineWrapping){let i=e.lineBlockAt(t.head),r=e.coordsAtPos(t.head,t.assoc||1);r&&(n=i.bottom+e.documentTop-r.bottom+e.defaultLineHeight/2)}return e.moveVertically(t,!0,n)})).map(n);return e.dispatch({changes:n,selection:i,scrollIntoView:!0,userEvent:"delete.line"}),!0}},{key:"Shift-Mod-\\",run:e=>{let{state:t,dispatch:n}=e;return xE(t,n,!1)}},{key:"Mod-/",run:e=>{let{state:t}=e,n=t.doc.lineAt(t.selection.main.from),i=RC(e.state,n.from);return i.line?PC(e):!!i.block&&IC(e)}},{key:"Alt-A",run:NC},{key:"Ctrl-m",mac:"Shift-Alt-m",run:e=>(e.setTabFocusMode(),!0)}].concat(n_);function r_(){var e=arguments[0];"string"==typeof e&&(e=document.createElement(e));var t=1,n=arguments[1];if(n&&"object"==typeof n&&null==n.nodeType&&!Array.isArray(n)){for(var i in n)if(Object.prototype.hasOwnProperty.call(n,i)){var r=n[i];"string"==typeof r?e.setAttribute(i,r):null!=r&&(e[i]=r)}t++}for(;t<arguments.length;t++)s_(e,arguments[t]);return e}function s_(e,t){if("string"==typeof t)e.appendChild(document.createTextNode(t));else if(null==t);else if(null!=t.nodeType)e.appendChild(t);else{if(!Array.isArray(t))throw new RangeError("Unsupported child node: "+t);for(var n=0;n<t.length;n++)s_(e,t[n])}}const o_="function"==typeof String.prototype.normalize?e=>e.normalize("NFKD"):e=>e;class a_{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length,r=arguments.length>4?arguments[4]:void 0,s=arguments.length>5?arguments[5]:void 0;this.test=s,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=e.iterRange(n,i),this.bufferStart=n,this.normalize=r?e=>r(o_(e)):o_,this.query=this.normalize(t)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return Gp(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let e=this.peek();if(e<0)return this.done=!0,this;let t=Kp(e),n=this.bufferStart+this.bufferPos;this.bufferPos+=Yp(e);let i=this.normalize(t);for(let r=0,s=n;;r++){let e=i.charCodeAt(r),o=this.match(e,s,this.bufferPos+this.bufferStart);if(r==i.length-1){if(o)return this.value=o,this;break}s==n&&r<t.length&&t.charCodeAt(r)==e&&s++}}}match(e,t,n){let i=null;for(let r=0;r<this.matches.length;r+=2){let t=this.matches[r],s=!1;this.query.charCodeAt(t)==e&&(t==this.query.length-1?i={from:this.matches[r+1],to:n}:(this.matches[r]++,s=!0)),s||(this.matches.splice(r,2),r-=2)}return this.query.charCodeAt(0)==e&&(1==this.query.length?i={from:t,to:n}:this.matches.push(1,t)),i&&this.test&&!this.test(i.from,i.to,this.buffer,this.bufferStart)&&(i=null),i}}"undefined"!=typeof Symbol&&(a_.prototype[Symbol.iterator]=function(){return this});const l_={from:-1,to:-1,match:/.*/.exec("")},c_="gm"+(null==/x/.unicode?"":"u");class h_{constructor(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:e.length;if(this.text=e,this.to=r,this.curLine="",this.done=!1,this.value=l_,/\\[sWDnr]|\n|\r|\[\^/.test(t))return new f_(e,t,n,i,r);this.re=new RegExp(t,c_+((null===n||void 0===n?void 0:n.ignoreCase)?"i":"")),this.test=null===n||void 0===n?void 0:n.test,this.iter=e.iter();let s=e.lineAt(i);this.curLineStart=s.from,this.matchPos=p_(e,i),this.getLine(this.curLineStart)}getLine(e){this.iter.next(e),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let e=this.matchPos-this.curLineStart;;){this.re.lastIndex=e;let t=this.matchPos<=this.to&&this.re.exec(this.curLine);if(t){let n=this.curLineStart+t.index,i=n+t[0].length;if(this.matchPos=p_(this.text,i+(n==i?1:0)),n==this.curLineStart+this.curLine.length&&this.nextLine(),(n<i||n>this.value.to)&&(!this.test||this.test(n,i,t)))return this.value={from:n,to:i,match:t},this;e=this.matchPos-this.curLineStart}else{if(!(this.curLineStart+this.curLine.length<this.to))return this.done=!0,this;this.nextLine(),e=0}}}}const u_=new WeakMap;class d_{constructor(e,t){this.from=e,this.text=t}get to(){return this.from+this.text.length}static get(e,t,n){let i=u_.get(e);if(!i||i.from>=n||i.to<=t){let i=new d_(t,e.sliceString(t,n));return u_.set(e,i),i}if(i.from==t&&i.to==n)return i;let{text:r,from:s}=i;return s>t&&(r=e.sliceString(t,s)+r,s=t),i.to<n&&(r+=e.sliceString(i.to,n)),u_.set(e,new d_(s,r)),new d_(t,r.slice(t-s,n-s))}}class f_{constructor(e,t,n,i,r){this.text=e,this.to=r,this.done=!1,this.value=l_,this.matchPos=p_(e,i),this.re=new RegExp(t,c_+((null===n||void 0===n?void 0:n.ignoreCase)?"i":"")),this.test=null===n||void 0===n?void 0:n.test,this.flat=d_.get(e,i,this.chunkEnd(i+5e3))}chunkEnd(e){return e>=this.to?this.to:this.text.lineAt(e).to}next(){for(;;){let e=this.re.lastIndex=this.matchPos-this.flat.from,t=this.re.exec(this.flat.text);if(t&&!t[0]&&t.index==e&&(this.re.lastIndex=e+1,t=this.re.exec(this.flat.text)),t){let e=this.flat.from+t.index,n=e+t[0].length;if((this.flat.to>=this.to||t.index+t[0].length<=this.flat.text.length-10)&&(!this.test||this.test(e,n,t)))return this.value={from:e,to:n,match:t},this.matchPos=p_(this.text,n+(e==n?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=d_.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+2*this.flat.text.length))}}}function p_(e,t){if(t>=e.length)return t;let n,i=e.lineAt(t);for(;t<i.to&&(n=i.text.charCodeAt(t-i.from))>=56320&&n<57344;)t++;return t}function g_(e){let t=r_("input",{class:"cm-textfield",name:"line",value:String(e.state.doc.lineAt(e.state.selection.main.head).number)});function n(){let n=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(t.value);if(!n)return;let{state:i}=e,r=i.doc.lineAt(i.selection.main.head),[,s,o,a,l]=n,c=a?+a.slice(1):0,h=o?+o:r.number;if(o&&l){let e=h/100;s&&(e=e*("-"==s?-1:1)+r.number/i.doc.lines),h=Math.round(i.doc.lines*e)}else o&&s&&(h=h*("-"==s?-1:1)+r.number);let u=i.doc.line(Math.max(1,Math.min(i.doc.lines,h))),d=cg.cursor(u.from+Math.max(0,Math.min(c,u.length)));e.dispatch({effects:[m_.of(!1),xb.scrollIntoView(d.from,{y:"center"})],selection:d}),e.focus()}return{dom:r_("form",{class:"cm-gotoLine",onkeydown:t=>{27==t.keyCode?(t.preventDefault(),e.dispatch({effects:m_.of(!1)}),e.focus()):13==t.keyCode&&(t.preventDefault(),n())},onsubmit:e=>{e.preventDefault(),n()}},r_("label",e.state.phrase("Go to line"),": ",t)," ",r_("button",{class:"cm-button",type:"submit"},e.state.phrase("go")))}}"undefined"!=typeof Symbol&&(h_.prototype[Symbol.iterator]=f_.prototype[Symbol.iterator]=function(){return this});const m_=Fg.define(),v_=wg.define({create:()=>!0,update(e,t){for(let n of t.effects)n.is(m_)&&(e=n.value);return e},provide:e=>FO.from(e,(e=>e?g_:null))}),y_=xb.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px","& label":{fontSize:"80%"}}}),w_={highlightWordAroundCursor:!1,minSelectionLength:1,maxMatches:100,wholeWords:!1},b_=dg.define({combine:e=>tm(e,w_,{highlightWordAroundCursor:(e,t)=>e||t,minSelectionLength:Math.min,maxMatches:Math.min})});const O_=Mv.mark({class:"cm-selectionMatch"}),k_=Mv.mark({class:"cm-selectionMatch cm-selectionMatch-main"});function S_(e,t,n,i){return(0==n||e(t.sliceDoc(n-1,n))!=Kg.Word)&&(i==t.doc.length||e(t.sliceDoc(i,i+1))!=Kg.Word)}const x_=Ey.fromClass(class{constructor(e){this.decorations=this.getDeco(e)}update(e){(e.selectionSet||e.docChanged||e.viewportChanged)&&(this.decorations=this.getDeco(e.view))}getDeco(e){let t=e.state.facet(b_),{state:n}=e,i=n.selection;if(i.ranges.length>1)return Mv.none;let r,s=i.main,o=null;if(s.empty){if(!t.highlightWordAroundCursor)return Mv.none;let e=n.wordAt(s.head);if(!e)return Mv.none;o=n.charCategorizer(s.head),r=n.sliceDoc(e.from,e.to)}else{let e=s.to-s.from;if(e<t.minSelectionLength||e>200)return Mv.none;if(t.wholeWords){if(r=n.sliceDoc(s.from,s.to),o=n.charCategorizer(s.head),!S_(o,n,s.from,s.to)||!function(e,t,n,i){return e(t.sliceDoc(n,n+1))==Kg.Word&&e(t.sliceDoc(i-1,i))==Kg.Word}(o,n,s.from,s.to))return Mv.none}else if(r=n.sliceDoc(s.from,s.to),!r)return Mv.none}let a=[];for(let l of e.visibleRanges){let e=new a_(n.doc,r,l.from,l.to);for(;!e.next().done;){let{from:i,to:r}=e.value;if((!o||S_(o,n,i,r))&&(s.empty&&i<=s.from&&r>=s.to?a.push(k_.range(i,r)):(i>=s.to||r<=s.from)&&a.push(O_.range(i,r)),a.length>t.maxMatches))return Mv.none}}return Mv.set(a)}},{decorations:e=>e.decorations}),T_=xb.baseTheme({".cm-selectionMatch":{backgroundColor:"#99ff7780"},".cm-searchMatch .cm-selectionMatch":{backgroundColor:"transparent"}});const C_=dg.define({combine:e=>tm(e,{top:!1,caseSensitive:!1,literal:!1,regexp:!1,wholeWord:!1,createPanel:e=>new tA(e),scrollToMatch:e=>xb.scrollIntoView(e)})});class E_{constructor(e){this.search=e.search,this.caseSensitive=!!e.caseSensitive,this.literal=!!e.literal,this.regexp=!!e.regexp,this.replace=e.replace||"",this.valid=!!this.search&&(!this.regexp||function(e){try{return new RegExp(e,c_),!0}catch(dS){return!1}}(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!e.wholeWord}unquote(e){return this.literal?e:e.replace(/\\([nrt\\])/g,((e,t)=>"n"==t?"\n":"r"==t?"\r":"t"==t?"\t":"\\"))}eq(e){return this.search==e.search&&this.replace==e.replace&&this.caseSensitive==e.caseSensitive&&this.regexp==e.regexp&&this.wholeWord==e.wholeWord}create(){return this.regexp?new D_(this):new P_(this)}getCursor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0,i=e.doc?e:em.create({doc:e});return null==n&&(n=i.doc.length),this.regexp?N_(this,i,t,n):A_(this,i,t,n)}}class __{constructor(e){this.spec=e}}function A_(e,t,n,i){return new a_(t.doc,e.unquoted,n,i,e.caseSensitive?void 0:e=>e.toLowerCase(),e.wholeWord?function(e,t){return(n,i,r,s)=>((s>n||s+r.length<i)&&(s=Math.max(0,n-2),r=e.sliceString(s,Math.min(e.length,i+2))),(t(I_(r,n-s))!=Kg.Word||t(R_(r,n-s))!=Kg.Word)&&(t(R_(r,i-s))!=Kg.Word||t(I_(r,i-s))!=Kg.Word))}(t.doc,t.charCategorizer(t.selection.main.head)):void 0)}class P_ extends __{constructor(e){super(e)}nextMatch(e,t,n){let i=A_(this.spec,e,n,e.doc.length).nextOverlapping();return i.done&&(i=A_(this.spec,e,0,t).nextOverlapping()),i.done?null:i.value}prevMatchInRange(e,t,n){for(let i=n;;){let n=Math.max(t,i-1e4-this.spec.unquoted.length),r=A_(this.spec,e,n,i),s=null;for(;!r.nextOverlapping().done;)s=r.value;if(s)return s;if(n==t)return null;i-=1e4}}prevMatch(e,t,n){return this.prevMatchInRange(e,0,t)||this.prevMatchInRange(e,n,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace)}matchAll(e,t){let n=A_(this.spec,e,0,e.doc.length),i=[];for(;!n.next().done;){if(i.length>=t)return null;i.push(n.value)}return i}highlight(e,t,n,i){let r=A_(this.spec,e,Math.max(0,t-this.spec.unquoted.length),Math.min(n+this.spec.unquoted.length,e.doc.length));for(;!r.next().done;)i(r.value.from,r.value.to)}}function N_(e,t,n,i){return new h_(t.doc,e.search,{ignoreCase:!e.caseSensitive,test:e.wholeWord?(r=t.charCategorizer(t.selection.main.head),(e,t,n)=>!n[0].length||(r(I_(n.input,n.index))!=Kg.Word||r(R_(n.input,n.index))!=Kg.Word)&&(r(R_(n.input,n.index+n[0].length))!=Kg.Word||r(I_(n.input,n.index+n[0].length))!=Kg.Word)):void 0},n,i);var r}function I_(e,t){return e.slice(Bp(e,t,!1),t)}function R_(e,t){return e.slice(t,Bp(e,t))}class D_ extends __{nextMatch(e,t,n){let i=N_(this.spec,e,n,e.doc.length).next();return i.done&&(i=N_(this.spec,e,0,t).next()),i.done?null:i.value}prevMatchInRange(e,t,n){for(let i=1;;i++){let r=Math.max(t,n-1e4*i),s=N_(this.spec,e,r,n),o=null;for(;!s.next().done;)o=s.value;if(o&&(r==t||o.from>r+10))return o;if(r==t)return null}}prevMatch(e,t,n){return this.prevMatchInRange(e,0,t)||this.prevMatchInRange(e,n,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace).replace(/\$([$&\d+])/g,((t,n)=>"$"==n?"$":"&"==n?e.match[0]:"0"!=n&&+n<e.match.length?e.match[n]:t))}matchAll(e,t){let n=N_(this.spec,e,0,e.doc.length),i=[];for(;!n.next().done;){if(i.length>=t)return null;i.push(n.value)}return i}highlight(e,t,n,i){let r=N_(this.spec,e,Math.max(0,t-250),Math.min(n+250,e.doc.length));for(;!r.next().done;)i(r.value.from,r.value.to)}}const M_=Fg.define(),L_=Fg.define(),Q_=wg.define({create:e=>new z_(G_(e).create(),null),update(e,t){for(let n of t.effects)n.is(M_)?e=new z_(n.value.create(),e.panel):n.is(L_)&&(e=new z_(e.query,n.value?X_:null));return e},provide:e=>FO.from(e,(e=>e.panel))});class z_{constructor(e,t){this.query=e,this.panel=t}}const j_=Mv.mark({class:"cm-searchMatch"}),U_=Mv.mark({class:"cm-searchMatch cm-searchMatch-selected"}),V_=Ey.fromClass(class{constructor(e){this.view=e,this.decorations=this.highlight(e.state.field(Q_))}update(e){let t=e.state.field(Q_);(t!=e.startState.field(Q_)||e.docChanged||e.selectionSet||e.viewportChanged)&&(this.decorations=this.highlight(t))}highlight(e){let{query:t,panel:n}=e;if(!n||!t.spec.valid)return Mv.none;let{view:i}=this,r=new am;for(let s=0,o=i.visibleRanges,a=o.length;s<a;s++){let{from:e,to:n}=o[s];for(;s<a-1&&n>o[s+1].from-500;)n=o[++s].to;t.highlight(i.state,e,n,((e,t)=>{let n=i.state.selection.ranges.some((n=>n.from==e&&n.to==t));r.add(e,t,n?U_:j_)}))}return r.finish()}},{decorations:e=>e.decorations});function F_(e){return t=>{let n=t.state.field(Q_,!1);return n&&n.query.spec.valid?e(t,n):J_(t)}}const q_=F_(((e,t)=>{let{query:n}=t,{to:i}=e.state.selection.main,r=n.nextMatch(e.state,i,i);if(!r)return!1;let s=cg.single(r.from,r.to),o=e.state.facet(C_);return e.dispatch({selection:s,effects:[sA(e,r),o.scrollToMatch(s.main,e)],userEvent:"select.search"}),Y_(e),!0})),B_=F_(((e,t)=>{let{query:n}=t,{state:i}=e,{from:r}=i.selection.main,s=n.prevMatch(i,r,r);if(!s)return!1;let o=cg.single(s.from,s.to),a=e.state.facet(C_);return e.dispatch({selection:o,effects:[sA(e,s),a.scrollToMatch(o.main,e)],userEvent:"select.search"}),Y_(e),!0})),W_=F_(((e,t)=>{let{query:n}=t,i=n.matchAll(e.state,1e3);return!(!i||!i.length)&&(e.dispatch({selection:cg.create(i.map((e=>cg.range(e.from,e.to)))),userEvent:"select.search.matches"}),!0)})),H_=F_(((e,t)=>{let{query:n}=t,{state:i}=e,{from:r,to:s}=i.selection.main;if(i.readOnly)return!1;let o=n.nextMatch(i,r,r);if(!o)return!1;let a,l,c=[],h=[];if(o.from==r&&o.to==s&&(l=i.toText(n.getReplacement(o)),c.push({from:o.from,to:o.to,insert:l}),o=n.nextMatch(i,o.from,o.to),h.push(xb.announce.of(i.phrase("replaced match on line $",i.doc.lineAt(r).number)+"."))),o){let t=0==c.length||c[0].from>=o.to?0:o.to-o.from-l.length;a=cg.single(o.from-t,o.to-t),h.push(sA(e,o)),h.push(i.facet(C_).scrollToMatch(a.main,e))}return e.dispatch({changes:c,selection:a,effects:h,userEvent:"input.replace"}),!0})),$_=F_(((e,t)=>{let{query:n}=t;if(e.state.readOnly)return!1;let i=n.matchAll(e.state,1e9).map((e=>{let{from:t,to:i}=e;return{from:t,to:i,insert:n.getReplacement(e)}}));if(!i.length)return!1;let r=e.state.phrase("replaced $ matches",i.length)+".";return e.dispatch({changes:i,effects:xb.announce.of(r),userEvent:"input.replace.all"}),!0}));function X_(e){return e.state.facet(C_).createPanel(e)}function G_(e,t){var n,i,r,s,o;let a=e.selection.main,l=a.empty||a.to>a.from+100?"":e.sliceDoc(a.from,a.to);if(t&&!l)return t;let c=e.facet(C_);return new E_({search:(null!==(n=null===t||void 0===t?void 0:t.literal)&&void 0!==n?n:c.literal)?l:l.replace(/\n/g,"\\n"),caseSensitive:null!==(i=null===t||void 0===t?void 0:t.caseSensitive)&&void 0!==i?i:c.caseSensitive,literal:null!==(r=null===t||void 0===t?void 0:t.literal)&&void 0!==r?r:c.literal,regexp:null!==(s=null===t||void 0===t?void 0:t.regexp)&&void 0!==s?s:c.regexp,wholeWord:null!==(o=null===t||void 0===t?void 0:t.wholeWord)&&void 0!==o?o:c.wholeWord})}function K_(e){let t=zO(e,X_);return t&&t.dom.querySelector("[main-field]")}function Y_(e){let t=K_(e);t&&t==e.root.activeElement&&t.select()}const J_=e=>{let t=e.state.field(Q_,!1);if(t&&t.panel){let n=K_(e);if(n&&n!=e.root.activeElement){let i=G_(e.state,t.query.spec);i.valid&&e.dispatch({effects:M_.of(i)}),n.focus(),n.select()}}else e.dispatch({effects:[L_.of(!0),t?M_.of(G_(e.state,t.query.spec)):Fg.appendConfig.of(aA)]});return!0},Z_=e=>{let t=e.state.field(Q_,!1);if(!t||!t.panel)return!1;let n=zO(e,X_);return n&&n.dom.contains(e.root.activeElement)&&e.focus(),e.dispatch({effects:L_.of(!1)}),!0},eA=[{key:"Mod-f",run:J_,scope:"editor search-panel"},{key:"F3",run:q_,shift:B_,scope:"editor search-panel",preventDefault:!0},{key:"Mod-g",run:q_,shift:B_,scope:"editor search-panel",preventDefault:!0},{key:"Escape",run:Z_,scope:"editor search-panel"},{key:"Mod-Shift-l",run:e=>{let{state:t,dispatch:n}=e,i=t.selection;if(i.ranges.length>1||i.main.empty)return!1;let{from:r,to:s}=i.main,o=[],a=0;for(let l=new a_(t.doc,t.sliceDoc(r,s));!l.next().done;){if(o.length>1e3)return!1;l.value.from==r&&(a=o.length),o.push(cg.range(l.value.from,l.value.to))}return n(t.update({selection:cg.create(o,a),userEvent:"select.search.matches"})),!0}},{key:"Mod-Alt-g",run:e=>{let t=zO(e,g_);if(!t){let n=[m_.of(!0)];null==e.state.field(v_,!1)&&n.push(Fg.appendConfig.of([v_,y_])),e.dispatch({effects:n}),t=zO(e,g_)}return t&&t.dom.querySelector("input").select(),!0}},{key:"Mod-d",run:e=>{let{state:t,dispatch:n}=e,{ranges:i}=t.selection;if(i.some((e=>e.from===e.to)))return(e=>{let{state:t,dispatch:n}=e,{selection:i}=t,r=cg.create(i.ranges.map((e=>t.wordAt(e.head)||cg.cursor(e.head))),i.mainIndex);return!r.eq(i)&&(n(t.update({selection:r})),!0)})({state:t,dispatch:n});let r=t.sliceDoc(i[0].from,i[0].to);if(t.selection.ranges.some((e=>t.sliceDoc(e.from,e.to)!=r)))return!1;let s=function(e,t){let{main:n,ranges:i}=e.selection,r=e.wordAt(n.head),s=r&&r.from==n.from&&r.to==n.to;for(let o=!1,a=new a_(e.doc,t,i[i.length-1].to);;){if(a.next(),!a.done){if(o&&i.some((e=>e.from==a.value.from)))continue;if(s){let t=e.wordAt(a.value.from);if(!t||t.from!=a.value.from||t.to!=a.value.to)continue}return a.value}if(o)return null;a=new a_(e.doc,t,0,Math.max(0,i[i.length-1].from-1)),o=!0}}(t,r);return!!s&&(n(t.update({selection:t.selection.addRange(cg.range(s.from,s.to),!1),effects:xb.scrollIntoView(s.to)})),!0)},preventDefault:!0}];class tA{constructor(e){this.view=e;let t=this.query=e.state.field(Q_).query.spec;function n(e,t,n){return r_("button",{class:"cm-button",name:e,onclick:t,type:"button"},n)}this.commit=this.commit.bind(this),this.searchField=r_("input",{value:t.search,placeholder:nA(e,"Find"),"aria-label":nA(e,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=r_("input",{value:t.replace,placeholder:nA(e,"Replace"),"aria-label":nA(e,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=r_("input",{type:"checkbox",name:"case",form:"",checked:t.caseSensitive,onchange:this.commit}),this.reField=r_("input",{type:"checkbox",name:"re",form:"",checked:t.regexp,onchange:this.commit}),this.wordField=r_("input",{type:"checkbox",name:"word",form:"",checked:t.wholeWord,onchange:this.commit}),this.dom=r_("div",{onkeydown:e=>this.keydown(e),class:"cm-search"},[this.searchField,n("next",(()=>q_(e)),[nA(e,"next")]),n("prev",(()=>B_(e)),[nA(e,"previous")]),n("select",(()=>W_(e)),[nA(e,"all")]),r_("label",null,[this.caseField,nA(e,"match case")]),r_("label",null,[this.reField,nA(e,"regexp")]),r_("label",null,[this.wordField,nA(e,"by word")]),...e.state.readOnly?[]:[r_("br"),this.replaceField,n("replace",(()=>H_(e)),[nA(e,"replace")]),n("replaceAll",(()=>$_(e)),[nA(e,"replace all")])],r_("button",{name:"close",onclick:()=>Z_(e),"aria-label":nA(e,"close"),type:"button"},["\xd7"])])}commit(){let e=new E_({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});e.eq(this.query)||(this.query=e,this.view.dispatch({effects:M_.of(e)}))}keydown(e){var t,n,i;t=this.view,n=e,i="search-panel",zb(Db(t.state),n,t,i)?e.preventDefault():13==e.keyCode&&e.target==this.searchField?(e.preventDefault(),(e.shiftKey?B_:q_)(this.view)):13==e.keyCode&&e.target==this.replaceField&&(e.preventDefault(),H_(this.view))}update(e){for(let t of e.transactions)for(let e of t.effects)e.is(M_)&&!e.value.eq(this.query)&&this.setQuery(e.value)}setQuery(e){this.query=e,this.searchField.value=e.search,this.replaceField.value=e.replace,this.caseField.checked=e.caseSensitive,this.reField.checked=e.regexp,this.wordField.checked=e.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(C_).top}}function nA(e,t){return e.state.phrase(t)}const iA=30,rA=/[\s\.,:;?!]/;function sA(e,t){let{from:n,to:i}=t,r=e.state.doc.lineAt(n),s=e.state.doc.lineAt(i).to,o=Math.max(r.from,n-iA),a=Math.min(s,i+iA),l=e.state.sliceDoc(o,a);if(o!=r.from)for(let c=0;c<iA;c++)if(!rA.test(l[c+1])&&rA.test(l[c])){l=l.slice(c);break}if(a!=s)for(let c=l.length-1;c>l.length-iA;c--)if(!rA.test(l[c-1])&&rA.test(l[c])){l=l.slice(0,c);break}return xb.announce.of("".concat(e.state.phrase("current match"),". ").concat(l," ").concat(e.state.phrase("on line")," ").concat(r.number,"."))}const oA=xb.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),aA=[Q_,Tg.low(V_),oA];class lA{constructor(e,t,n,i){this.state=e,this.pos=t,this.explicit=n,this.view=i,this.abortListeners=[]}tokenBefore(e){let t=cT(this.state).resolveInner(this.pos,-1);for(;t&&e.indexOf(t.name)<0;)t=t.parent;return t?{from:t.from,to:this.pos,text:this.state.sliceDoc(t.from,this.pos),type:t.type}:null}matchBefore(e){let t=this.state.doc.lineAt(this.pos),n=Math.max(t.from,this.pos-250),i=t.text.slice(n-t.from,this.pos-t.from),r=i.search(fA(e,!1));return r<0?null:{from:n+r,to:this.pos,text:i.slice(r)}}get aborted(){return null==this.abortListeners}addEventListener(e,t){"abort"==e&&this.abortListeners&&this.abortListeners.push(t)}}function cA(e){let t=Object.keys(e).join(""),n=/\w/.test(t);return n&&(t=t.replace(/\w/g,"")),"[".concat(n?"\\w":"").concat(t.replace(/[^\w\s]/g,"\\$&"),"]")}function hA(e){let t=e.map((e=>"string"==typeof e?{label:e}:e)),[n,i]=t.every((e=>/^\w+$/.test(e.label)))?[/\w*$/,/\w+$/]:function(e){let t=Object.create(null),n=Object.create(null);for(let{label:r}of e){t[r[0]]=!0;for(let e=1;e<r.length;e++)n[r[e]]=!0}let i=cA(t)+cA(n)+"*$";return[new RegExp("^"+i),new RegExp(i)]}(t);return e=>{let r=e.matchBefore(i);return r||e.explicit?{from:r?r.from:e.pos,options:t,validFor:n}:null}}class uA{constructor(e,t,n,i){this.completion=e,this.source=t,this.match=n,this.score=i}}function dA(e){return e.selection.main.from}function fA(e,t){var n;let{source:i}=e,r=t&&"^"!=i[0],s="$"!=i[i.length-1];return r||s?new RegExp("".concat(r?"^":"","(?:").concat(i,")").concat(s?"$":""),null!==(n=e.flags)&&void 0!==n?n:e.ignoreCase?"i":""):e}const pA=jg.define();const gA=new WeakMap;function mA(e){if(!Array.isArray(e))return e;let t=gA.get(e);return t||gA.set(e,t=hA(e)),t}const vA=Fg.define(),yA=Fg.define();class wA{constructor(e){this.pattern=e,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[],this.score=0,this.matched=[];for(let t=0;t<e.length;){let n=Gp(e,t),i=Yp(n);this.chars.push(n);let r=e.slice(t,t+i),s=r.toUpperCase();this.folded.push(Gp(s==r?r.toLowerCase():s,0)),t+=i}this.astral=e.length!=this.chars.length}ret(e,t){return this.score=e,this.matched=t,this}match(e){if(0==this.pattern.length)return this.ret(-100,[]);if(e.length<this.pattern.length)return null;let{chars:t,folded:n,any:i,precise:r,byWord:s}=this;if(1==t.length){let i=Gp(e,0),r=Yp(i),s=r==e.length?0:-100;if(i==t[0]);else{if(i!=n[0])return null;s+=-200}return this.ret(s,[0,r])}let o=e.indexOf(this.pattern);if(0==o)return this.ret(e.length==this.pattern.length?0:-100,[0,this.pattern.length]);let a=t.length,l=0;if(o<0){for(let r=0,s=Math.min(e.length,200);r<s&&l<a;){let s=Gp(e,r);s!=t[l]&&s!=n[l]||(i[l++]=r),r+=Yp(s)}if(l<a)return null}let c=0,h=0,u=!1,d=0,f=-1,p=-1,g=/[a-z]/.test(e),m=!0;for(let v=0,y=Math.min(e.length,200),w=0;v<y&&h<a;){let i=Gp(e,v);o<0&&(c<a&&i==t[c]&&(r[c++]=v),d<a&&(i==t[d]||i==n[d]?(0==d&&(f=v),p=v+1,d++):d=0));let l,y=i<255?i>=48&&i<=57||i>=97&&i<=122?2:i>=65&&i<=90?1:0:(l=Kp(i))!=l.toLowerCase()?1:l!=l.toUpperCase()?2:0;(!v||1==y&&g||0==w&&0!=y)&&(t[h]==i||n[h]==i&&(u=!0)?s[h++]=v:s.length&&(m=!1)),w=y,v+=Yp(i)}return h==a&&0==s[0]&&m?this.result((u?-200:0)-100,s,e):d==a&&0==f?this.ret(-200-e.length+(p==e.length?0:-100),[0,p]):o>-1?this.ret(-700-e.length,[o,o+this.pattern.length]):d==a?this.ret(-900-e.length,[f,p]):h==a?this.result((u?-200:0)-100-700+(m?0:-1100),s,e):2==t.length?null:this.result((i[0]?-700:0)-200-1100,i,e)}result(e,t,n){let i=[],r=0;for(let s of t){let e=s+(this.astral?Yp(Gp(n,s)):1);r&&i[r-1]==s?i[r-1]=e:(i[r++]=s,i[r++]=e)}return this.ret(e-n.length,i)}}class bA{constructor(e){this.pattern=e,this.matched=[],this.score=0,this.folded=e.toLowerCase()}match(e){if(e.length<this.pattern.length)return null;let t=e.slice(0,this.pattern.length),n=t==this.pattern?0:t.toLowerCase()==this.folded?-200:null;return null==n?null:(this.matched=[0,t.length],this.score=n+(e.length==this.pattern.length?0:-100),this)}}const OA=dg.define({combine:e=>tm(e,{activateOnTyping:!0,activateOnCompletion:()=>!1,activateOnTypingDelay:100,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,tooltipClass:()=>"",optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],positionInfo:SA,filterStrict:!1,compareCompletions:(e,t)=>e.label.localeCompare(t.label),interactionDelay:75,updateSyncTime:100},{defaultKeymap:(e,t)=>e&&t,closeOnBlur:(e,t)=>e&&t,icons:(e,t)=>e&&t,tooltipClass:(e,t)=>n=>kA(e(n),t(n)),optionClass:(e,t)=>n=>kA(e(n),t(n)),addToOptions:(e,t)=>e.concat(t),filterStrict:(e,t)=>e||t})});function kA(e,t){return e?t?e+" "+t:e:t}function SA(e,t,n,i,r,s){let o,a,l=e.textDirection==Bv.RTL,c=l,h=!1,u="top",d=t.left-r.left,f=r.right-t.right,p=i.right-i.left,g=i.bottom-i.top;if(c&&d<Math.min(p,f)?c=!1:!c&&f<Math.min(p,d)&&(c=!0),p<=(c?d:f))o=Math.max(r.top,Math.min(n.top,r.bottom-g))-t.top,a=Math.min(400,c?d:f);else{h=!0,a=Math.min(400,(l?t.right:r.right-t.left)-30);let e=r.bottom-t.bottom;e>=g||e>t.top?o=n.bottom-t.top:(u="bottom",o=t.bottom-n.top)}let m=(t.bottom-t.top)/s.offsetHeight,v=(t.right-t.left)/s.offsetWidth;return{style:"".concat(u,": ").concat(o/m,"px; max-width: ").concat(a/v,"px"),class:"cm-completionInfo-"+(h?l?"left-narrow":"right-narrow":c?"left":"right")}}function xA(e,t,n){if(e<=n)return{from:0,to:e};if(t<0&&(t=0),t<=e>>1){let e=Math.floor(t/n);return{from:e*n,to:(e+1)*n}}let i=Math.floor((e-t)/n);return{from:e-(i+1)*n,to:e-i*n}}class TA{constructor(e,t,n){this.view=e,this.stateField=t,this.applyCompletion=n,this.info=null,this.infoDestroy=null,this.placeInfoReq={read:()=>this.measureInfo(),write:e=>this.placeInfo(e),key:this},this.space=null,this.currentClass="";let i=e.state.field(t),{options:r,selected:s}=i.open,o=e.state.facet(OA);this.optionContent=function(e){let t=e.addToOptions.slice();return e.icons&&t.push({render(e){let t=document.createElement("div");return t.classList.add("cm-completionIcon"),e.type&&t.classList.add(...e.type.split(/\s+/g).map((e=>"cm-completionIcon-"+e))),t.setAttribute("aria-hidden","true"),t},position:20}),t.push({render(e,t,n,i){let r=document.createElement("span");r.className="cm-completionLabel";let s=e.displayLabel||e.label,o=0;for(let a=0;a<i.length;){let e=i[a++],t=i[a++];e>o&&r.appendChild(document.createTextNode(s.slice(o,e)));let n=r.appendChild(document.createElement("span"));n.appendChild(document.createTextNode(s.slice(e,t))),n.className="cm-completionMatchedText",o=t}return o<s.length&&r.appendChild(document.createTextNode(s.slice(o))),r},position:50},{render(e){if(!e.detail)return null;let t=document.createElement("span");return t.className="cm-completionDetail",t.textContent=e.detail,t},position:80}),t.sort(((e,t)=>e.position-t.position)).map((e=>e.render))}(o),this.optionClass=o.optionClass,this.tooltipClass=o.tooltipClass,this.range=xA(r.length,s,o.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.updateTooltipClass(e.state),this.dom.addEventListener("mousedown",(n=>{let{options:i}=e.state.field(t).open;for(let t,r=n.target;r&&r!=this.dom;r=r.parentNode)if("LI"==r.nodeName&&(t=/-(\d+)$/.exec(r.id))&&+t[1]<i.length)return this.applyCompletion(e,i[+t[1]]),void n.preventDefault()})),this.dom.addEventListener("focusout",(t=>{let n=e.state.field(this.stateField,!1);n&&n.tooltip&&e.state.facet(OA).closeOnBlur&&t.relatedTarget!=e.contentDOM&&e.dispatch({effects:yA.of(null)})})),this.showOptions(r,i.id)}mount(){this.updateSel()}showOptions(e,t){this.list&&this.list.remove(),this.list=this.dom.appendChild(this.createListBox(e,t,this.range)),this.list.addEventListener("scroll",(()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)}))}update(e){var t;let n=e.state.field(this.stateField),i=e.startState.field(this.stateField);if(this.updateTooltipClass(e.state),n!=i){let{options:r,selected:s,disabled:o}=n.open;i.open&&i.open.options==r||(this.range=xA(r.length,s,e.state.facet(OA).maxRenderedOptions),this.showOptions(r,n.id)),this.updateSel(),o!=(null===(t=i.open)||void 0===t?void 0:t.disabled)&&this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!!o)}}updateTooltipClass(e){let t=this.tooltipClass(e);if(t!=this.currentClass){for(let e of this.currentClass.split(" "))e&&this.dom.classList.remove(e);for(let e of t.split(" "))e&&this.dom.classList.add(e);this.currentClass=t}}positioned(e){this.space=e,this.info&&this.view.requestMeasure(this.placeInfoReq)}updateSel(){let e=this.view.state.field(this.stateField),t=e.open;if((t.selected>-1&&t.selected<this.range.from||t.selected>=this.range.to)&&(this.range=xA(t.options.length,t.selected,this.view.state.facet(OA).maxRenderedOptions),this.showOptions(t.options,e.id)),this.updateSelectedOption(t.selected)){this.destroyInfo();let{completion:n}=t.options[t.selected],{info:i}=n;if(!i)return;let r="string"===typeof i?document.createTextNode(i):i(n);if(!r)return;"then"in r?r.then((t=>{t&&this.view.state.field(this.stateField,!1)==e&&this.addInfoPane(t,n)})).catch((e=>Sy(this.view.state,e,"completion info"))):this.addInfoPane(r,n)}}addInfoPane(e,t){this.destroyInfo();let n=this.info=document.createElement("div");if(n.className="cm-tooltip cm-completionInfo",null!=e.nodeType)n.appendChild(e),this.infoDestroy=null;else{let{dom:t,destroy:i}=e;n.appendChild(t),this.infoDestroy=i||null}this.dom.appendChild(n),this.view.requestMeasure(this.placeInfoReq)}updateSelectedOption(e){let t=null;for(let n=this.list.firstChild,i=this.range.from;n;n=n.nextSibling,i++)"LI"==n.nodeName&&n.id?i==e?n.hasAttribute("aria-selected")||(n.setAttribute("aria-selected","true"),t=n):n.hasAttribute("aria-selected")&&n.removeAttribute("aria-selected"):i--;return t&&function(e,t){let n=e.getBoundingClientRect(),i=t.getBoundingClientRect(),r=n.height/e.offsetHeight;i.top<n.top?e.scrollTop-=(n.top-i.top)/r:i.bottom>n.bottom&&(e.scrollTop+=(i.bottom-n.bottom)/r)}(this.list,t),t}measureInfo(){let e=this.dom.querySelector("[aria-selected]");if(!e||!this.info)return null;let t=this.dom.getBoundingClientRect(),n=this.info.getBoundingClientRect(),i=e.getBoundingClientRect(),r=this.space;if(!r){let e=this.dom.ownerDocument.defaultView||window;r={left:0,top:0,right:e.innerWidth,bottom:e.innerHeight}}return i.top>Math.min(r.bottom,t.bottom)-10||i.bottom<Math.max(r.top,t.top)+10?null:this.view.state.facet(OA).positionInfo(this.view,t,i,n,r,this.dom)}placeInfo(e){this.info&&(e?(e.style&&(this.info.style.cssText=e.style),this.info.className="cm-tooltip cm-completionInfo "+(e.class||"")):this.info.style.cssText="top: -1e6px")}createListBox(e,t,n){const i=document.createElement("ul");i.id=t,i.setAttribute("role","listbox"),i.setAttribute("aria-expanded","true"),i.setAttribute("aria-label",this.view.state.phrase("Completions"));let r=null;for(let s=n.from;s<n.to;s++){let{completion:o,match:a}=e[s],{section:l}=o;if(l){let e="string"==typeof l?l:l.name;if(e!=r&&(s>n.from||0==n.from))if(r=e,"string"!=typeof l&&l.header)i.appendChild(l.header(l));else{i.appendChild(document.createElement("completion-section")).textContent=e}}const c=i.appendChild(document.createElement("li"));c.id=t+"-"+s,c.setAttribute("role","option");let h=this.optionClass(o);h&&(c.className=h);for(let e of this.optionContent){let t=e(o,this.view.state,this.view,a);t&&c.appendChild(t)}}return n.from&&i.classList.add("cm-completionListIncompleteTop"),n.to<e.length&&i.classList.add("cm-completionListIncompleteBottom"),i}destroyInfo(){this.info&&(this.infoDestroy&&this.infoDestroy(),this.info.remove(),this.info=null)}destroy(){this.destroyInfo()}}function CA(e,t){return n=>new TA(n,e,t)}function EA(e){return 100*(e.boost||0)+(e.apply?10:0)+(e.info?5:0)+(e.type?1:0)}class _A{constructor(e,t,n,i,r,s){this.options=e,this.attrs=t,this.tooltip=n,this.timestamp=i,this.selected=r,this.disabled=s}setSelected(e,t){return e==this.selected||e>=this.options.length?this:new _A(this.options,IA(t,e),this.tooltip,this.timestamp,e,this.disabled)}static build(e,t,n,i,r){let s=function(e,t){let n=[],i=null,r=e=>{n.push(e);let{section:t}=e.completion;if(t){i||(i=[]);let e="string"==typeof t?t:t.name;i.some((t=>t.name==e))||i.push("string"==typeof t?{name:e}:t)}},s=t.facet(OA);for(let c of e)if(c.hasResult()){let e=c.result.getMatch;if(!1===c.result.filter)for(let t of c.result.options)r(new uA(t,c.source,e?e(t):[],1e9-n.length));else{let n,i=t.sliceDoc(c.from,c.to),o=s.filterStrict?new bA(i):new wA(i);for(let t of c.result.options)if(n=o.match(t.label)){let i=t.displayLabel?e?e(t,n.matched):[]:n.matched;r(new uA(t,c.source,i,n.score+(t.boost||0)))}}}if(i){let e=Object.create(null),t=0,r=(e,t)=>{var n,i;return(null!==(n=e.rank)&&void 0!==n?n:1e9)-(null!==(i=t.rank)&&void 0!==i?i:1e9)||(e.name<t.name?-1:1)};for(let n of i.sort(r))t-=1e5,e[n.name]=t;for(let i of n){let{section:t}=i.completion;t&&(i.score+=e["string"==typeof t?t:t.name])}}let o=[],a=null,l=s.compareCompletions;for(let c of n.sort(((e,t)=>t.score-e.score||l(e.completion,t.completion)))){let e=c.completion;!a||a.label!=e.label||a.detail!=e.detail||null!=a.type&&null!=e.type&&a.type!=e.type||a.apply!=e.apply||a.boost!=e.boost?o.push(c):EA(c.completion)>EA(a)&&(o[o.length-1]=c),a=c.completion}return o}(e,t);if(!s.length)return i&&e.some((e=>1==e.state))?new _A(i.options,i.attrs,i.tooltip,i.timestamp,i.selected,!0):null;let o=t.facet(OA).selectOnOpen?0:-1;if(i&&i.selected!=o&&-1!=i.selected){let e=i.options[i.selected].completion;for(let t=0;t<s.length;t++)if(s[t].completion==e){o=t;break}}return new _A(s,IA(n,o),{pos:e.reduce(((e,t)=>t.hasResult()?Math.min(e,t.from):e),1e8),create:VA,above:r.aboveCursor},i?i.timestamp:Date.now(),o,!1)}map(e){return new _A(this.options,this.attrs,Object.assign(Object.assign({},this.tooltip),{pos:e.mapPos(this.tooltip.pos)}),this.timestamp,this.selected,this.disabled)}}class AA{constructor(e,t,n){this.active=e,this.id=t,this.open=n}static start(){return new AA(RA,"cm-ac-"+Math.floor(2e6*Math.random()).toString(36),null)}update(e){let{state:t}=e,n=t.facet(OA),i=(n.override||t.languageDataAt("autocomplete",dA(t)).map(mA)).map((t=>(this.active.find((e=>e.source==t))||new MA(t,this.active.some((e=>0!=e.state))?1:0)).update(e,n)));i.length==this.active.length&&i.every(((e,t)=>e==this.active[t]))&&(i=this.active);let r=this.open;r&&e.docChanged&&(r=r.map(e.changes)),e.selection||i.some((t=>t.hasResult()&&e.changes.touchesRange(t.from,t.to)))||!function(e,t){if(e==t)return!0;for(let n=0,i=0;;){for(;n<e.length&&!e[n].hasResult;)n++;for(;i<t.length&&!t[i].hasResult;)i++;let r=n==e.length,s=i==t.length;if(r||s)return r==s;if(e[n++].result!=t[i++].result)return!1}}(i,this.active)?r=_A.build(i,t,this.id,r,n):r&&r.disabled&&!i.some((e=>1==e.state))&&(r=null),!r&&i.every((e=>1!=e.state))&&i.some((e=>e.hasResult()))&&(i=i.map((e=>e.hasResult()?new MA(e.source,0):e)));for(let s of e.effects)s.is(zA)&&(r=r&&r.setSelected(s.value,this.id));return i==this.active&&r==this.open?this:new AA(i,this.id,r)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:this.active.length?PA:NA}}const PA={"aria-autocomplete":"list"},NA={};function IA(e,t){let n={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":e};return t>-1&&(n["aria-activedescendant"]=e+"-"+t),n}const RA=[];function DA(e,t){if(e.isUserEvent("input.complete")){let n=e.annotation(pA);if(n&&t.activateOnCompletion(n))return 12}let n=e.isUserEvent("input.type");return n&&t.activateOnTyping?5:n?1:e.isUserEvent("delete.backward")?2:e.selection?8:e.docChanged?16:0}class MA{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;this.source=e,this.state=t,this.explicitPos=n}hasResult(){return!1}update(e,t){let n=DA(e,t),i=this;(8&n||16&n&&this.touches(e))&&(i=new MA(i.source,0)),4&n&&0==i.state&&(i=new MA(this.source,1)),i=i.updateFor(e,n);for(let r of e.effects)if(r.is(vA))i=new MA(i.source,1,r.value?dA(e.state):-1);else if(r.is(yA))i=new MA(i.source,0);else if(r.is(QA))for(let e of r.value)e.source==i.source&&(i=e);return i}updateFor(e,t){return this.map(e.changes)}map(e){return e.empty||this.explicitPos<0?this:new MA(this.source,this.state,e.mapPos(this.explicitPos))}touches(e){return e.changes.touchesRange(dA(e.state))}}class LA extends MA{constructor(e,t,n,i,r){super(e,2,t),this.result=n,this.from=i,this.to=r}hasResult(){return!0}updateFor(e,t){var n;if(!(3&t))return this.map(e.changes);let i=this.result;i.map&&!e.changes.empty&&(i=i.map(i,e.changes));let r=e.changes.mapPos(this.from),s=e.changes.mapPos(this.to,1),o=dA(e.state);if((this.explicitPos<0?o<=r:o<this.from)||o>s||!i||2&t&&dA(e.startState)==this.from)return new MA(this.source,4&t?1:0);let a=this.explicitPos<0?-1:e.changes.mapPos(this.explicitPos);return function(e,t,n,i){if(!e)return!1;let r=t.sliceDoc(n,i);return"function"==typeof e?e(r,n,i,t):fA(e,!0).test(r)}(i.validFor,e.state,r,s)?new LA(this.source,a,i,r,s):i.update&&(i=i.update(i,r,s,new lA(e.state,o,a>=0)))?new LA(this.source,a,i,i.from,null!==(n=i.to)&&void 0!==n?n:dA(e.state)):new MA(this.source,1,a)}map(e){if(e.empty)return this;return(this.result.map?this.result.map(this.result,e):this.result)?new LA(this.source,this.explicitPos<0?-1:e.mapPos(this.explicitPos),this.result,e.mapPos(this.from),e.mapPos(this.to,1)):new MA(this.source,0)}touches(e){return e.changes.touchesRange(this.from,this.to)}}const QA=Fg.define({map:(e,t)=>e.map((e=>e.map(t)))}),zA=Fg.define(),jA=wg.define({create:()=>AA.start(),update:(e,t)=>e.update(t),provide:e=>[_O.from(e,(e=>e.tooltip)),xb.contentAttributes.from(e,(e=>e.attrs))]});function UA(e,t){const n=t.completion.apply||t.completion.label;let i=e.state.field(jA).active.find((e=>e.source==t.source));return i instanceof LA&&("string"==typeof n?e.dispatch(Object.assign(Object.assign({},function(e,t,n,i){let{main:r}=e.selection,s=n-r.from,o=i-r.from;return Object.assign(Object.assign({},e.changeByRange((a=>a!=r&&n!=i&&e.sliceDoc(a.from+s,a.from+o)!=e.sliceDoc(n,i)?{range:a}:{changes:{from:a.from+s,to:i==r.from?a.to:a.from+o,insert:t},range:cg.cursor(a.from+s+t.length)}))),{scrollIntoView:!0,userEvent:"input.complete"})}(e.state,n,i.from,i.to)),{annotations:pA.of(t.completion)})):n(e,t.completion,i.from,i.to),!0)}const VA=CA(jA,UA);function FA(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"option";return n=>{let i=n.state.field(jA,!1);if(!i||!i.open||i.open.disabled||Date.now()-i.open.timestamp<n.state.facet(OA).interactionDelay)return!1;let r,s=1;"page"==t&&(r=MO(n,i.open.tooltip))&&(s=Math.max(2,Math.floor(r.dom.offsetHeight/r.dom.querySelector("li").offsetHeight)-1));let{length:o}=i.open.options,a=i.open.selected>-1?i.open.selected+s*(e?1:-1):e?0:o-1;return a<0?a="page"==t?0:o-1:a>=o&&(a="page"==t?o-1:0),n.dispatch({effects:zA.of(a)}),!0}}class qA{constructor(e,t){this.active=e,this.context=t,this.time=Date.now(),this.updates=[],this.done=void 0}}const BA=Ey.fromClass(class{constructor(e){this.view=e,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.pendingStart=!1,this.composing=0;for(let t of e.state.field(jA).active)1==t.state&&this.startQuery(t)}update(e){let t=e.state.field(jA),n=e.state.facet(OA);if(!e.selectionSet&&!e.docChanged&&e.startState.field(jA)==t)return;let i=e.transactions.some((e=>{let t=DA(e,n);return 8&t||(e.selection||e.docChanged)&&!(3&t)}));for(let s=0;s<this.running.length;s++){let t=this.running[s];if(i||t.updates.length+e.transactions.length>50&&Date.now()-t.time>1e3){for(let e of t.context.abortListeners)try{e()}catch(kj){Sy(this.view.state,kj)}t.context.abortListeners=null,this.running.splice(s--,1)}else t.updates.push(...e.transactions)}this.debounceUpdate>-1&&clearTimeout(this.debounceUpdate),e.transactions.some((e=>e.effects.some((e=>e.is(vA)))))&&(this.pendingStart=!0);let r=this.pendingStart?50:n.activateOnTypingDelay;if(this.debounceUpdate=t.active.some((e=>1==e.state&&!this.running.some((t=>t.active.source==e.source))))?setTimeout((()=>this.startUpdate()),r):-1,0!=this.composing)for(let s of e.transactions)s.isUserEvent("input.type")?this.composing=2:2==this.composing&&s.selection&&(this.composing=3)}startUpdate(){this.debounceUpdate=-1,this.pendingStart=!1;let{state:e}=this.view,t=e.field(jA);for(let n of t.active)1!=n.state||this.running.some((e=>e.active.source==n.source))||this.startQuery(n)}startQuery(e){let{state:t}=this.view,n=dA(t),i=new lA(t,n,e.explicitPos==n,this.view),r=new qA(e,i);this.running.push(r),Promise.resolve(e.source(i)).then((e=>{r.context.aborted||(r.done=e||null,this.scheduleAccept())}),(e=>{this.view.dispatch({effects:yA.of(null)}),Sy(this.view.state,e)}))}scheduleAccept(){this.running.every((e=>void 0!==e.done))?this.accept():this.debounceAccept<0&&(this.debounceAccept=setTimeout((()=>this.accept()),this.view.state.facet(OA).updateSyncTime))}accept(){var e;this.debounceAccept>-1&&clearTimeout(this.debounceAccept),this.debounceAccept=-1;let t=[],n=this.view.state.facet(OA);for(let i=0;i<this.running.length;i++){let r=this.running[i];if(void 0===r.done)continue;if(this.running.splice(i--,1),r.done){let i=new LA(r.active.source,r.active.explicitPos,r.done,r.done.from,null!==(e=r.done.to)&&void 0!==e?e:dA(r.updates.length?r.updates[0].startState:this.view.state));for(let e of r.updates)i=i.update(e,n);if(i.hasResult()){t.push(i);continue}}let s=this.view.state.field(jA).active.find((e=>e.source==r.active.source));if(s&&1==s.state)if(null==r.done){let e=new MA(r.active.source,0);for(let t of r.updates)e=e.update(t,n);1!=e.state&&t.push(e)}else this.startQuery(s)}t.length&&this.view.dispatch({effects:QA.of(t)})}},{eventHandlers:{blur(e){let t=this.view.state.field(jA,!1);if(t&&t.tooltip&&this.view.state.facet(OA).closeOnBlur){let n=t.open&&MO(this.view,t.open.tooltip);n&&n.dom.contains(e.relatedTarget)||setTimeout((()=>this.view.dispatch({effects:yA.of(null)})),10)}},compositionstart(){this.composing=1},compositionend(){3==this.composing&&setTimeout((()=>this.view.dispatch({effects:vA.of(!1)})),20),this.composing=0}}}),WA="object"==typeof navigator&&/Win/.test(navigator.platform),HA=Tg.highest(xb.domEventHandlers({keydown(e,t){let n=t.state.field(jA,!1);if(!n||!n.open||n.open.disabled||n.open.selected<0||e.key.length>1||e.ctrlKey&&(!WA||!e.altKey)||e.metaKey)return!1;let i=n.open.options[n.open.selected],r=n.active.find((e=>e.source==i.source)),s=i.completion.commitCharacters||r.result.commitCharacters;return s&&s.indexOf(e.key)>-1&&UA(t,i),!1}})),$A=xb.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",height:"100%",listStyle:"none",margin:0,padding:0,"& > li, & > completion-section":{padding:"1px 3px",lineHeight:1.2},"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer"},"& > completion-section":{display:"list-item",borderBottom:"1px solid silver",paddingLeft:"0.5em",opacity:.7}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&light .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#777"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},"&dark .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#444"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'"\xb7\xb7\xb7"',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"".concat(400,"px"),boxSizing:"border-box"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},".cm-completionInfo.cm-completionInfo-left-narrow":{right:"".concat(30,"px")},".cm-completionInfo.cm-completionInfo-right-narrow":{left:"".concat(30,"px")},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",display:"inline-block",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6",boxSizing:"content-box"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"'\u0192'"}},".cm-completionIcon-class":{"&:after":{content:"'\u25cb'"}},".cm-completionIcon-interface":{"&:after":{content:"'\u25cc'"}},".cm-completionIcon-variable":{"&:after":{content:"'\ud835\udc65'"}},".cm-completionIcon-constant":{"&:after":{content:"'\ud835\udc36'"}},".cm-completionIcon-type":{"&:after":{content:"'\ud835\udc61'"}},".cm-completionIcon-enum":{"&:after":{content:"'\u222a'"}},".cm-completionIcon-property":{"&:after":{content:"'\u25a1'"}},".cm-completionIcon-keyword":{"&:after":{content:"'\ud83d\udd11\ufe0e'"}},".cm-completionIcon-namespace":{"&:after":{content:"'\u25a2'"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}});const XA={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},GA=Fg.define({map(e,t){let n=t.mapPos(e,-1,Zp.TrackAfter);return null==n?void 0:n}}),KA=new class extends nm{};KA.startSide=1,KA.endSide=-1;const YA=wg.define({create:()=>om.empty,update(e,t){if(e=e.map(t.changes),t.selection){let n=t.state.doc.lineAt(t.selection.main.head);e=e.update({filter:e=>e>=n.from&&e<=n.to})}for(let n of t.effects)n.is(GA)&&(e=e.update({add:[KA.range(n.value,n.value+1)]}));return e}});const JA="()[]{}<>";function ZA(e){for(let t=0;t<JA.length;t+=2)if(JA.charCodeAt(t)==e)return JA.charAt(t+1);return Kp(e<128?e:e+1)}function eP(e,t){return e.languageDataAt("closeBrackets",t)[0]||XA}const tP="object"==typeof navigator&&/Android\b/.test(navigator.userAgent),nP=xb.inputHandler.of(((e,t,n,i)=>{if((tP?e.composing:e.compositionStarted)||e.state.readOnly)return!1;let r=e.state.selection.main;if(i.length>2||2==i.length&&1==Yp(Gp(i,0))||t!=r.from||n!=r.to)return!1;let s=function(e,t){let n=eP(e,e.selection.main.head),i=n.brackets||XA.brackets;for(let r of i){let s=ZA(Gp(r,0));if(t==r)return s==r?lP(e,r,i.indexOf(r+r+r)>-1,n):oP(e,r,s,n.before||XA.before);if(t==s&&rP(e,e.selection.main.from))return aP(e,r,s)}return null}(e.state,i);return!!s&&(e.dispatch(s),!0)})),iP=[{key:"Backspace",run:e=>{let{state:t,dispatch:n}=e;if(t.readOnly)return!1;let i=eP(t,t.selection.main.head).brackets||XA.brackets,r=null,s=t.changeByRange((e=>{if(e.empty){let n=function(e,t){let n=e.sliceString(t-2,t);return Yp(Gp(n,0))==n.length?n:n.slice(1)}(t.doc,e.head);for(let r of i)if(r==n&&sP(t.doc,e.head)==ZA(Gp(r,0)))return{changes:{from:e.head-r.length,to:e.head+r.length},range:cg.cursor(e.head-r.length)}}return{range:r=e}}));return r||n(t.update(s,{scrollIntoView:!0,userEvent:"delete.backward"})),!r}}];function rP(e,t){let n=!1;return e.field(YA).between(0,e.doc.length,(e=>{e==t&&(n=!0)})),n}function sP(e,t){let n=e.sliceString(t,t+2);return n.slice(0,Yp(Gp(n,0)))}function oP(e,t,n,i){let r=null,s=e.changeByRange((s=>{if(!s.empty)return{changes:[{insert:t,from:s.from},{insert:n,from:s.to}],effects:GA.of(s.to+t.length),range:cg.range(s.anchor+t.length,s.head+t.length)};let o=sP(e.doc,s.head);return!o||/\s/.test(o)||i.indexOf(o)>-1?{changes:{insert:t+n,from:s.head},effects:GA.of(s.head+t.length),range:cg.cursor(s.head+t.length)}:{range:r=s}}));return r?null:e.update(s,{scrollIntoView:!0,userEvent:"input.type"})}function aP(e,t,n){let i=null,r=e.changeByRange((t=>t.empty&&sP(e.doc,t.head)==n?{changes:{from:t.head,to:t.head+n.length,insert:n},range:cg.cursor(t.head+n.length)}:i={range:t}));return i?null:e.update(r,{scrollIntoView:!0,userEvent:"input.type"})}function lP(e,t,n,i){let r=i.stringPrefixes||XA.stringPrefixes,s=null,o=e.changeByRange((i=>{if(!i.empty)return{changes:[{insert:t,from:i.from},{insert:t,from:i.to}],effects:GA.of(i.to+t.length),range:cg.range(i.anchor+t.length,i.head+t.length)};let o,a=i.head,l=sP(e.doc,a);if(l==t){if(cP(e,a))return{changes:{insert:t+t,from:a},effects:GA.of(a+t.length),range:cg.cursor(a+t.length)};if(rP(e,a)){let i=n&&e.sliceDoc(a,a+3*t.length)==t+t+t?t+t+t:t;return{changes:{from:a,to:a+i.length,insert:i},range:cg.cursor(a+i.length)}}}else{if(n&&e.sliceDoc(a-2*t.length,a)==t+t&&(o=hP(e,a-2*t.length,r))>-1&&cP(e,o))return{changes:{insert:t+t+t+t,from:a},effects:GA.of(a+t.length),range:cg.cursor(a+t.length)};if(e.charCategorizer(a)(l)!=Kg.Word&&hP(e,a,r)>-1&&!function(e,t,n,i){let r=cT(e).resolveInner(t,-1),s=i.reduce(((e,t)=>Math.max(e,t.length)),0);for(let o=0;o<5;o++){let o=e.sliceDoc(r.from,Math.min(r.to,r.from+n.length+s)),a=o.indexOf(n);if(!a||a>-1&&i.indexOf(o.slice(0,a))>-1){let t=r.firstChild;for(;t&&t.from==r.from&&t.to-t.from>n.length+a;){if(e.sliceDoc(t.to-n.length,t.to)==n)return!1;t=t.firstChild}return!0}let l=r.to==t&&r.parent;if(!l)break;r=l}return!1}(e,a,t,r))return{changes:{insert:t+t,from:a},effects:GA.of(a+t.length),range:cg.cursor(a+t.length)}}return{range:s=i}}));return s?null:e.update(o,{scrollIntoView:!0,userEvent:"input.type"})}function cP(e,t){let n=cT(e).resolveInner(t+1);return n.parent&&n.from==t}function hP(e,t,n){let i=e.charCategorizer(t);if(i(e.sliceDoc(t-1,t))!=Kg.Word)return t;for(let r of n){let n=t-r.length;if(e.sliceDoc(n,t)==r&&i(e.sliceDoc(n-1,n))!=Kg.Word)return n}return-1}const uP=[{key:"Ctrl-Space",run:e=>!!e.state.field(jA,!1)&&(e.dispatch({effects:vA.of(!0)}),!0)},{key:"Escape",run:e=>{let t=e.state.field(jA,!1);return!(!t||!t.active.some((e=>0!=e.state)))&&(e.dispatch({effects:yA.of(null)}),!0)}},{key:"ArrowDown",run:FA(!0)},{key:"ArrowUp",run:FA(!1)},{key:"PageDown",run:FA(!0,"page")},{key:"PageUp",run:FA(!1,"page")},{key:"Enter",run:e=>{let t=e.state.field(jA,!1);return!(e.state.readOnly||!t||!t.open||t.open.selected<0||t.open.disabled||Date.now()-t.open.timestamp<e.state.facet(OA).interactionDelay)&&UA(e,t.open.options[t.open.selected])}}],dP=Tg.highest(Ib.computeN([OA],(e=>e.facet(OA).defaultKeymap?[uP]:[])));class fP{constructor(e,t,n){this.from=e,this.to=t,this.diagnostic=n}}class pP{constructor(e,t,n){this.diagnostics=e,this.panel=t,this.selected=n}static init(e,t,n){let i=e,r=n.facet(EP).markerFilter;r&&(i=r(i,n));let s=Mv.set(i.map((e=>e.from==e.to||e.from==e.to-1&&n.doc.lineAt(e.from).to==e.from?Mv.widget({widget:new PP(e),diagnostic:e}).range(e.from):Mv.mark({attributes:{class:"cm-lintRange cm-lintRange-"+e.severity+(e.markClass?" "+e.markClass:"")},diagnostic:e}).range(e.from,e.to))),!0);return new pP(s,t,gP(s))}}function gP(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=null;return e.between(n,1e9,((e,n,r)=>{let{spec:s}=r;if(!t||s.diagnostic==t)return i=new fP(e,n,s.diagnostic),!1})),i}function mP(e,t){let n=t.pos,i=t.end||n,r=e.state.facet(EP).hideOn(e,n,i);if(null!=r)return r;let s=e.startState.doc.lineAt(t.pos);return!(!e.effects.some((e=>e.is(yP)))&&!e.changes.touchesRange(s.from,Math.max(s.to,i)))}function vP(e,t){return e.field(OP,!1)?t:t.concat(Fg.appendConfig.of(LP))}const yP=Fg.define(),wP=Fg.define(),bP=Fg.define(),OP=wg.define({create:()=>new pP(Mv.none,null,null),update(e,t){if(t.docChanged&&e.diagnostics.size){let n=e.diagnostics.map(t.changes),i=null,r=e.panel;if(e.selected){let r=t.changes.mapPos(e.selected.from,1);i=gP(n,e.selected.diagnostic,r)||gP(n,null,r)}!n.size&&r&&t.state.facet(EP).autoPanel&&(r=null),e=new pP(n,r,i)}for(let n of t.effects)if(n.is(yP)){let i=t.state.facet(EP).autoPanel?n.value.length?IP.open:null:e.panel;e=pP.init(n.value,i,t.state)}else n.is(wP)?e=new pP(e.diagnostics,n.value?IP.open:null,e.selected):n.is(bP)&&(e=new pP(e.diagnostics,e.panel,n.value));return e},provide:e=>[FO.from(e,(e=>e.panel)),xb.decorations.from(e,(e=>e.diagnostics))]});const kP=Mv.mark({class:"cm-lintRange cm-lintRange-active"});function SP(e,t,n){let{diagnostics:i}=e.state.field(OP),r=[],s=2e8,o=0;i.between(t-(n<0?1:0),t+(n>0?1:0),((e,i,a)=>{let{spec:l}=a;t>=e&&t<=i&&(e==i||(t>e||n>0)&&(t<i||n<0))&&(r.push(l.diagnostic),s=Math.min(e,s),o=Math.max(i,o))}));let a=e.state.facet(EP).tooltipFilter;return a&&(r=a(r,e.state)),r.length?{pos:s,end:o,above:e.state.doc.lineAt(s).to<o,create:()=>({dom:xP(e,r)})}:null}function xP(e,t){return r_("ul",{class:"cm-tooltip-lint"},t.map((t=>AP(e,t,!1))))}const TP=e=>{let t=e.state.field(OP,!1);return!(!t||!t.panel)&&(e.dispatch({effects:wP.of(!1)}),!0)},CP=[{key:"Mod-Shift-m",run:e=>{let t=e.state.field(OP,!1);t&&t.panel||e.dispatch({effects:vP(e.state,[wP.of(!0)])});let n=zO(e,IP.open);return n&&n.dom.querySelector(".cm-panel-lint ul").focus(),!0},preventDefault:!0},{key:"F8",run:e=>{let t=e.state.field(OP,!1);if(!t)return!1;let n=e.state.selection.main,i=t.diagnostics.iter(n.to+1);return!(!i.value&&(i=t.diagnostics.iter(0),!i.value||i.from==n.from&&i.to==n.to))&&(e.dispatch({selection:{anchor:i.from,head:i.to},scrollIntoView:!0}),!0)}}],EP=dg.define({combine:e=>Object.assign({sources:e.map((e=>e.source)).filter((e=>null!=e))},tm(e.map((e=>e.config)),{delay:750,markerFilter:null,tooltipFilter:null,needsRefresh:null,hideOn:()=>null},{needsRefresh:(e,t)=>e?t?n=>e(n)||t(n):e:t}))});function _P(e){let t=[];if(e)e:for(let{name:n}of e){for(let e=0;e<n.length;e++){let i=n[e];if(/[a-zA-Z]/.test(i)&&!t.some((e=>e.toLowerCase()==i.toLowerCase()))){t.push(i);continue e}}t.push("")}return t}function AP(e,t,n){var i;let r=n?_P(t.actions):[];return r_("li",{class:"cm-diagnostic cm-diagnostic-"+t.severity},r_("span",{class:"cm-diagnosticText"},t.renderMessage?t.renderMessage(e):t.message),null===(i=t.actions)||void 0===i?void 0:i.map(((n,i)=>{let s=!1,o=i=>{if(i.preventDefault(),s)return;s=!0;let r=gP(e.state.field(OP).diagnostics,t);r&&n.apply(e,r.from,r.to)},{name:a}=n,l=r[i]?a.indexOf(r[i]):-1,c=l<0?a:[a.slice(0,l),r_("u",a.slice(l,l+1)),a.slice(l+1)];return r_("button",{type:"button",class:"cm-diagnosticAction",onclick:o,onmousedown:o,"aria-label":" Action: ".concat(a).concat(l<0?"":' (access key "'.concat(r[i],')"'),".")},c)})),t.source&&r_("div",{class:"cm-diagnosticSource"},t.source))}class PP extends Rv{constructor(e){super(),this.diagnostic=e}eq(e){return e.diagnostic==this.diagnostic}toDOM(){return r_("span",{class:"cm-lintPoint cm-lintPoint-"+this.diagnostic.severity})}}class NP{constructor(e,t){this.diagnostic=t,this.id="item_"+Math.floor(4294967295*Math.random()).toString(16),this.dom=AP(e,t,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}}class IP{constructor(e){this.view=e,this.items=[];this.list=r_("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:t=>{if(27==t.keyCode)TP(this.view),this.view.focus();else if(38==t.keyCode||33==t.keyCode)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(40==t.keyCode||34==t.keyCode)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(36==t.keyCode)this.moveSelection(0);else if(35==t.keyCode)this.moveSelection(this.items.length-1);else if(13==t.keyCode)this.view.focus();else{if(!(t.keyCode>=65&&t.keyCode<=90&&this.selectedIndex>=0))return;{let{diagnostic:n}=this.items[this.selectedIndex],i=_P(n.actions);for(let r=0;r<i.length;r++)if(i[r].toUpperCase().charCodeAt(0)==t.keyCode){let t=gP(this.view.state.field(OP).diagnostics,n);t&&n.actions[r].apply(e,t.from,t.to)}}}t.preventDefault()},onclick:e=>{for(let t=0;t<this.items.length;t++)this.items[t].dom.contains(e.target)&&this.moveSelection(t)}}),this.dom=r_("div",{class:"cm-panel-lint"},this.list,r_("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>TP(this.view)},"\xd7")),this.update()}get selectedIndex(){let e=this.view.state.field(OP).selected;if(!e)return-1;for(let t=0;t<this.items.length;t++)if(this.items[t].diagnostic==e.diagnostic)return t;return-1}update(){let{diagnostics:e,selected:t}=this.view.state.field(OP),n=0,i=!1,r=null;for(e.between(0,this.view.state.doc.length,((e,s,o)=>{let a,{spec:l}=o,c=-1;for(let t=n;t<this.items.length;t++)if(this.items[t].diagnostic==l.diagnostic){c=t;break}c<0?(a=new NP(this.view,l.diagnostic),this.items.splice(n,0,a),i=!0):(a=this.items[c],c>n&&(this.items.splice(n,c-n),i=!0)),t&&a.diagnostic==t.diagnostic?a.dom.hasAttribute("aria-selected")||(a.dom.setAttribute("aria-selected","true"),r=a):a.dom.hasAttribute("aria-selected")&&a.dom.removeAttribute("aria-selected"),n++}));n<this.items.length&&!(1==this.items.length&&this.items[0].diagnostic.from<0);)i=!0,this.items.pop();0==this.items.length&&(this.items.push(new NP(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),i=!0),r?(this.list.setAttribute("aria-activedescendant",r.id),this.view.requestMeasure({key:this,read:()=>({sel:r.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:e=>{let{sel:t,panel:n}=e,i=n.height/this.list.offsetHeight;t.top<n.top?this.list.scrollTop-=(n.top-t.top)/i:t.bottom>n.bottom&&(this.list.scrollTop+=(t.bottom-n.bottom)/i)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),i&&this.sync()}sync(){let e=this.list.firstChild;function t(){let t=e;e=t.nextSibling,t.remove()}for(let n of this.items)if(n.dom.parentNode==this.list){for(;e!=n.dom;)t();e=n.dom.nextSibling}else this.list.insertBefore(n.dom,e);for(;e;)t()}moveSelection(e){if(this.selectedIndex<0)return;let t=gP(this.view.state.field(OP).diagnostics,this.items[e].diagnostic);t&&this.view.dispatch({selection:{anchor:t.from,head:t.to},scrollIntoView:!0,effects:bP.of(t)})}static open(e){return new IP(e)}}function RP(e){return'url(\'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" '.concat(arguments.length>1&&void 0!==arguments[1]?arguments[1]:'viewBox="0 0 40 40"',">").concat(encodeURIComponent(e),"</svg>')")}function DP(e){return RP('<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="'.concat(e,'" fill="none" stroke-width=".7"/>'),'width="6" height="3"')}const MP=xb.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnostic-hint":{borderLeft:"5px solid #66d"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px",cursor:"pointer"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:DP("#d11")},".cm-lintRange-warning":{backgroundImage:DP("orange")},".cm-lintRange-info":{backgroundImage:DP("#999")},".cm-lintRange-hint":{backgroundImage:DP("#66d")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-lintPoint-hint":{"&:after":{borderBottomColor:"#66d"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}});const LP=[OP,xb.decorations.compute([OP],(e=>{let{selected:t,panel:n}=e.field(OP);return t&&n&&t.from!=t.to?Mv.set([kP.range(t.from,t.to)]):Mv.none})),DO(SP,{hideOn:mP}),MP];var QP=function(e){void 0===e&&(e={});var{crosshairCursor:t=!1}=e,n=[];!1!==e.closeBracketsKeymap&&(n=n.concat(iP)),!1!==e.defaultKeymap&&(n=n.concat(i_)),!1!==e.searchKeymap&&(n=n.concat(eA)),!1!==e.historyKeymap&&(n=n.concat(rE)),!1!==e.foldKeymap&&(n=n.concat(WT)),!1!==e.completionKeymap&&(n=n.concat(uP)),!1!==e.lintKeymap&&(n=n.concat(CP));var i=[];return!1!==e.lineNumbers&&i.push(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return[ik.of(e),GO(),ok]}()),!1!==e.highlightActiveLineGutter&&i.push(ck),!1!==e.highlightSpecialChars&&i.push(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return[lO.of(e),cO||(cO=Ey.fromClass(class{constructor(e){this.view=e,this.decorations=Mv.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(e.state.facet(lO)),this.decorations=this.decorator.createDeco(e)}makeDecorator(e){return new iO({regexp:e.specialChars,decoration:(t,n,i)=>{let{doc:r}=n.state,s=Gp(t[0],0);if(9==s){let e=r.lineAt(i),t=n.state.tabSize,s=ym(e.text,t,i-e.from);return Mv.replace({widget:new uO((t-s%t)*this.view.defaultCharacterWidth/this.view.scaleX)})}return this.decorationCache[s]||(this.decorationCache[s]=Mv.replace({widget:new hO(e,s)}))},boundary:e.replaceTabs?void 0:/[^]/})}update(e){let t=e.state.facet(lO);e.startState.facet(lO)!=t?(this.decorator=this.makeDecorator(t),this.decorations=this.decorator.createDeco(e.view)):this.decorations=this.decorator.updateDeco(e,this.decorations)}},{decorations:e=>e.decorations}))]}()),!1!==e.history&&i.push(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return[VC,UC.of(e),xb.domEventHandlers({beforeinput(e,t){let n="historyUndo"==e.inputType?qC:"historyRedo"==e.inputType?BC:null;return!!n&&(e.preventDefault(),n(t))}})]}()),!1!==e.foldGutter&&i.push(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object.assign(Object.assign({},JT),e),n=new ZT(t,!0),i=new ZT(t,!1),r=Ey.fromClass(class{constructor(e){this.from=e.viewport.from,this.markers=this.buildMarkers(e)}update(e){(e.docChanged||e.viewportChanged||e.startState.facet(yT)!=e.state.facet(yT)||e.startState.field(UT,!1)!=e.state.field(UT,!1)||cT(e.startState)!=cT(e.state)||t.foldingChanged(e))&&(this.markers=this.buildMarkers(e.view))}buildMarkers(e){let t=new am;for(let r of e.viewportLineBlocks){let s=VT(e.state,r.from,r.to)?i:MT(e.state,r.from,r.to)?n:null;s&&t.add(r.from,r.from,s)}return t.finish()}}),{domEventHandlers:s}=t;return[r,$O({class:"cm-foldGutter",markers(e){var t;return(null===(t=e.plugin(r))||void 0===t?void 0:t.markers)||om.empty},initialSpacer:()=>new ZT(t,!1),domEventHandlers:Object.assign(Object.assign({},s),{click:(e,t,n)=>{if(s.click&&s.click(e,t,n))return!0;let i=VT(e.state,t.from,t.to);if(i)return e.dispatch({effects:zT.of(i)}),!0;let r=MT(e.state,t.from,t.to);return!!r&&(e.dispatch({effects:QT.of(r)}),!0)}})}),XT()]}()),!1!==e.drawSelection&&i.push(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return[Hb.of(e),Xb,Kb,Jb,yy.of(!0)]}()),!1!==e.dropCursor&&i.push([eO,tO]),!1!==e.allowMultipleSelections&&i.push(em.allowMultipleSelections.of(!0)),!1!==e.indentOnInput&&i.push(em.transactionFilter.of((e=>{if(!e.docChanged||!e.isUserEvent("input.type")&&!e.isUserEvent("input.complete"))return e;let t=e.startState.languageDataAt("indentOnInput",e.startState.selection.main.head);if(!t.length)return e;let n=e.newDoc,{head:i}=e.newSelection.main,r=n.lineAt(i);if(i>r.from+200)return e;let s=n.sliceString(r.from,i);if(!t.some((e=>e.test(s))))return e;let{state:o}=e,a=-1,l=[];for(let{head:c}of o.selection.ranges){let e=o.doc.lineAt(c);if(e.from==a)continue;a=e.from;let t=ST(o,e.from);if(null==t)continue;let n=/^\s*/.exec(e.text)[0],i=kT(o,t);n!=i&&l.push({from:e.from,to:e.from+n.length,insert:i})}return l.length?[e,{changes:l,sequential:!0}]:e}))),!1!==e.syntaxHighlighting&&i.push(function(e,t){let n,i=[oC];return e instanceof tC&&(e.module&&i.push(xb.styleModule.of(e.module)),n=e.themeType),(null===t||void 0===t?void 0:t.fallback)?i.push(iC.of(e)):n?i.push(nC.computeN([xb.darkTheme],(t=>t.facet(xb.darkTheme)==("dark"==n)?[e]:[]))):i.push(nC.of(e)),i}(aC,{fallback:!0})),!1!==e.bracketMatching&&i.push(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return[uC.of(e),mC]}()),!1!==e.closeBrackets&&i.push([nP,YA]),!1!==e.autocompletion&&i.push(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return[HA,jA,OA.of(e),BA,dP,$A]}()),!1!==e.rectangularSelection&&i.push(function(e){let t=(null===e||void 0===e?void 0:e.eventFilter)||(e=>e.altKey&&0==e.button);return xb.mouseSelectionStyle.of(((e,n)=>t(n)?vO(e,n):null))}()),!1!==t&&i.push(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},[t,n]=yO[e.key||"Alt"],i=Ey.fromClass(class{constructor(e){this.view=e,this.isDown=!1}set(e){this.isDown!=e&&(this.isDown=e,this.view.update([]))}},{eventObservers:{keydown(e){this.set(e.keyCode==t||n(e))},keyup(e){e.keyCode!=t&&n(e)||this.set(!1)},mousemove(e){this.set(n(e))}}});return[i,xb.contentAttributes.of((e=>{var t;return(null===(t=e.plugin(i))||void 0===t?void 0:t.isDown)?wO:null}))]}()),!1!==e.highlightActiveLine&&i.push(fO),!1!==e.highlightSelectionMatches&&i.push(function(e){let t=[T_,x_];return e&&t.push(b_.of(e)),t}()),e.tabSize&&"number"===typeof e.tabSize&&i.push(bT.of(" ".repeat(e.tabSize))),i.concat([Ib.of(n.flat())]).filter(Boolean)};const zP=1024;let jP=0;class UP{constructor(e,t){this.from=e,this.to=t}}class VP{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.id=jP++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return"function"!=typeof e&&(e=BP.match(e)),t=>{let n=e(t);return void 0===n?null:[this,n]}}}VP.closedBy=new VP({deserialize:e=>e.split(" ")}),VP.openedBy=new VP({deserialize:e=>e.split(" ")}),VP.group=new VP({deserialize:e=>e.split(" ")}),VP.isolate=new VP({deserialize:e=>{if(e&&"rtl"!=e&&"ltr"!=e&&"auto"!=e)throw new RangeError("Invalid value for isolate: "+e);return e||"auto"}}),VP.contextHash=new VP({perNode:!0}),VP.lookAhead=new VP({perNode:!0}),VP.mounted=new VP({perNode:!0});class FP{constructor(e,t,n){this.tree=e,this.overlay=t,this.parser=n}static get(e){return e&&e.props&&e.props[VP.mounted.id]}}const qP=Object.create(null);class BP{constructor(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;this.name=e,this.props=t,this.id=n,this.flags=i}static define(e){let t=e.props&&e.props.length?Object.create(null):qP,n=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(null==e.name?8:0),i=new BP(e.name||"",t,e.id,n);if(e.props)for(let r of e.props)if(Array.isArray(r)||(r=r(i)),r){if(r[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");t[r[0].id]=r[1]}return i}prop(e){return this.props[e.id]}get isTop(){return(1&this.flags)>0}get isSkipped(){return(2&this.flags)>0}get isError(){return(4&this.flags)>0}get isAnonymous(){return(8&this.flags)>0}is(e){if("string"==typeof e){if(this.name==e)return!0;let t=this.prop(VP.group);return!!t&&t.indexOf(e)>-1}return this.id==e}static match(e){let t=Object.create(null);for(let n in e)for(let i of n.split(" "))t[i]=e[n];return e=>{for(let n=e.prop(VP.group),i=-1;i<(n?n.length:0);i++){let r=t[i<0?e.name:n[i]];if(r)return r}}}}BP.none=new BP("",Object.create(null),0,8);const WP=new WeakMap,HP=new WeakMap;var $P;!function(e){e[e.ExcludeBuffers=1]="ExcludeBuffers",e[e.IncludeAnonymous=2]="IncludeAnonymous",e[e.IgnoreMounts=4]="IgnoreMounts",e[e.IgnoreOverlays=8]="IgnoreOverlays"}($P||($P={}));class XP{constructor(e,t,n,i,r){if(this.type=e,this.children=t,this.positions=n,this.length=i,this.props=null,r&&r.length){this.props=Object.create(null);for(let[e,t]of r)this.props["number"==typeof e?e:e.id]=t}}toString(){let e=FP.get(this);if(e&&!e.overlay)return e.tree.toString();let t="";for(let n of this.children){let e=n.toString();e&&(t&&(t+=","),t+=e)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(t.length?"("+t+")":""):t}cursor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return new aN(this.topNode,e)}cursorAt(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=WP.get(this)||this.topNode,i=new aN(n);return i.moveTo(e,t),WP.set(this,i._tree),i}get topNode(){return new eN(this,0,0,null)}resolve(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=JP(WP.get(this)||this.topNode,e,t,!1);return WP.set(this,n),n}resolveInner(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=JP(HP.get(this)||this.topNode,e,t,!0);return HP.set(this,n),n}resolveStack(e){return function(e,t,n){let i=e.resolveInner(t,n),r=null;for(let s=i instanceof eN?i:i.context.parent;s;s=s.parent)if(s.index<0){let e=s.parent;(r||(r=[i])).push(e.resolve(t,n)),s=e}else{let e=FP.get(s.tree);if(e&&e.overlay&&e.overlay[0].from<=t&&e.overlay[e.overlay.length-1].to>=t){let o=new eN(e.tree,e.overlay[0].from+s.from,-1,s);(r||(r=[i])).push(JP(o,t,n,!1))}}return r?sN(r):i}(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0)}iterate(e){let{enter:t,leave:n,from:i=0,to:r=this.length}=e,s=e.mode||0,o=(s&$P.IncludeAnonymous)>0;for(let a=this.cursor(s|$P.IncludeAnonymous);;){let e=!1;if(a.from<=r&&a.to>=i&&(!o&&a.type.isAnonymous||!1!==t(a))){if(a.firstChild())continue;e=!0}for(;e&&n&&(o||!a.type.isAnonymous)&&n(a),!a.nextSibling();){if(!a.parent())return;e=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let t in this.props)e.push([+t,this.props[t]]);return e}balance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.children.length<=8?this:uN(BP.none,this.children,this.positions,0,this.children.length,0,this.length,((e,t,n)=>new XP(this.type,e,t,n,this.propValues)),e.makeTree||((e,t,n)=>new XP(BP.none,e,t,n)))}static build(e){return function(e){var t;let{buffer:n,nodeSet:i,maxBufferLength:r=zP,reused:s=[],minRepeatType:o=i.types.length}=e,a=Array.isArray(n)?new GP(n,n.length):n,l=i.types,c=0,h=0;function u(e,t,n,y,w,b){let{id:O,start:k,end:S,size:x}=a,T=h;for(;x<0;){if(a.next(),-1==x){let t=s[O];return n.push(t),void y.push(k-e)}if(-3==x)return void(c=O);if(-4==x)return void(h=O);throw new RangeError("Unrecognized record size: ".concat(x))}let C,E,_=l[O],A=k-e;if(S-k<=r&&(E=m(a.pos-t,w))){let t=new Uint16Array(E.size-E.skip),n=a.pos-E.size,r=t.length;for(;a.pos>n;)r=v(E.start,t,r);C=new KP(t,S-E.start,i),A=E.start-e}else{let e=a.pos-x;a.next();let t=[],n=[],i=O>=o?O:-1,s=0,l=S;for(;a.pos>e;)i>=0&&a.id==i&&a.size>=0?(a.end<=l-r&&(p(t,n,k,s,a.end,l,i,T),s=t.length,l=a.end),a.next()):b>2500?d(k,e,t,n):u(k,e,t,n,i,b+1);if(i>=0&&s>0&&s<t.length&&p(t,n,k,s,k,l,i,T),t.reverse(),n.reverse(),i>-1&&s>0){let e=f(_);C=uN(_,t,n,0,t.length,0,S-k,e,e)}else C=g(_,t,n,S-k,T-S)}n.push(C),y.push(A)}function d(e,t,n,s){let o=[],l=0,c=-1;for(;a.pos>t;){let{id:e,start:t,end:n,size:i}=a;if(i>4)a.next();else{if(c>-1&&t<c)break;c<0&&(c=n-r),o.push(e,t,n),l++,a.next()}}if(l){let t=new Uint16Array(4*l),r=o[o.length-2];for(let e=o.length-3,n=0;e>=0;e-=3)t[n++]=o[e],t[n++]=o[e+1]-r,t[n++]=o[e+2]-r,t[n++]=n;n.push(new KP(t,o[2]-r,i)),s.push(r-e)}}function f(e){return(t,n,i)=>{let r,s,o=0,a=t.length-1;if(a>=0&&(r=t[a])instanceof XP){if(!a&&r.type==e&&r.length==i)return r;(s=r.prop(VP.lookAhead))&&(o=n[a]+r.length+s)}return g(e,t,n,i,o)}}function p(e,t,n,r,s,o,a,l){let c=[],h=[];for(;e.length>r;)c.push(e.pop()),h.push(t.pop()+n-s);e.push(g(i.types[a],c,h,o-s,l-o)),t.push(s-n)}function g(e,t,n,i){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,s=arguments.length>5?arguments[5]:void 0;if(c){let e=[VP.contextHash,c];s=s?[e].concat(s):[e]}if(r>25){let e=[VP.lookAhead,r];s=s?[e].concat(s):[e]}return new XP(e,t,n,i,s)}function m(e,t){let n=a.fork(),i=0,s=0,l=0,c=n.end-r,h={size:0,start:0,skip:0};e:for(let r=n.pos-e;n.pos>r;){let e=n.size;if(n.id==t&&e>=0){h.size=i,h.start=s,h.skip=l,l+=4,i+=4,n.next();continue}let a=n.pos-e;if(e<0||a<r||n.start<c)break;let u=n.id>=o?4:0,d=n.start;for(n.next();n.pos>a;){if(n.size<0){if(-3!=n.size)break e;u+=4}else n.id>=o&&(u+=4);n.next()}s=d,i+=e,l+=u}return(t<0||i==e)&&(h.size=i,h.start=s,h.skip=l),h.size>4?h:void 0}function v(e,t,n){let{id:i,start:r,end:s,size:l}=a;if(a.next(),l>=0&&i<o){let o=n;if(l>4){let i=a.pos-(l-4);for(;a.pos>i;)n=v(e,t,n)}t[--n]=o,t[--n]=s-e,t[--n]=r-e,t[--n]=i}else-3==l?c=i:-4==l&&(h=i);return n}let y=[],w=[];for(;a.pos>0;)u(e.start||0,e.bufferStart||0,y,w,-1,0);let b=null!==(t=e.length)&&void 0!==t?t:y.length?w[0]+y[0].length:0;return new XP(l[e.topID],y.reverse(),w.reverse(),b)}(e)}}XP.empty=new XP(BP.none,[],[],0);class GP{constructor(e,t){this.buffer=e,this.index=t}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new GP(this.buffer,this.index)}}class KP{constructor(e,t,n){this.buffer=e,this.length=t,this.set=n}get type(){return BP.none}toString(){let e=[];for(let t=0;t<this.buffer.length;)e.push(this.childString(t)),t=this.buffer[t+3];return e.join(",")}childString(e){let t=this.buffer[e],n=this.buffer[e+3],i=this.set.types[t],r=i.name;if(/\W/.test(r)&&!i.isError&&(r=JSON.stringify(r)),n==(e+=4))return r;let s=[];for(;e<n;)s.push(this.childString(e)),e=this.buffer[e+3];return r+"("+s.join(",")+")"}findChild(e,t,n,i,r){let{buffer:s}=this,o=-1;for(let a=e;a!=t&&!(YP(r,i,s[a+1],s[a+2])&&(o=a,n>0));a=s[a+3]);return o}slice(e,t,n){let i=this.buffer,r=new Uint16Array(t-e),s=0;for(let o=e,a=0;o<t;){r[a++]=i[o++],r[a++]=i[o++]-n;let t=r[a++]=i[o++]-n;r[a++]=i[o++]-e,s=Math.max(s,t)}return new KP(r,s,this.set)}}function YP(e,t,n,i){switch(e){case-2:return n<t;case-1:return i>=t&&n<t;case 0:return n<t&&i>t;case 1:return n<=t&&i>t;case 2:return i>t;case 4:return!0}}function JP(e,t,n,i){for(var r;e.from==e.to||(n<1?e.from>=t:e.from>t)||(n>-1?e.to<=t:e.to<t);){let t=!i&&e instanceof eN&&e.index<0?null:e.parent;if(!t)return e;e=t}let s=i?0:$P.IgnoreOverlays;if(i)for(let o=e,a=o.parent;a;o=a,a=o.parent)o instanceof eN&&o.index<0&&(null===(r=a.enter(t,n,s))||void 0===r?void 0:r.from)!=o.from&&(e=a);for(;;){let i=e.enter(t,n,s);if(!i)return e;e=i}}class ZP{cursor(){return new aN(this,arguments.length>0&&void 0!==arguments[0]?arguments[0]:0)}getChild(e){let t=tN(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:null);return t.length?t[0]:null}getChildren(e){return tN(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}resolve(e){return JP(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,!1)}resolveInner(e){return JP(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,!0)}matchContext(e){return nN(this,e)}enterUnfinishedNodesBefore(e){let t=this.childBefore(e),n=this;for(;t;){let e=t.lastChild;if(!e||e.to!=t.to)break;e.type.isError&&e.from==e.to?(n=t,t=e.prevSibling):t=e}return n}get node(){return this}get next(){return this.parent}}class eN extends ZP{constructor(e,t,n,i){super(),this._tree=e,this.from=t,this.index=n,this._parent=i}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,t,n,i){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;for(let s=this;;){for(let{children:o,positions:a}=s._tree,l=t>0?o.length:-1;e!=l;e+=t){let l=o[e],c=a[e]+s.from;if(YP(i,n,c,c+l.length))if(l instanceof KP){if(r&$P.ExcludeBuffers)continue;let o=l.findChild(0,l.buffer.length,t,n-c,i);if(o>-1)return new rN(new iN(s,l,e,c),null,o)}else if(r&$P.IncludeAnonymous||!l.type.isAnonymous||lN(l)){let o;if(!(r&$P.IgnoreMounts)&&(o=FP.get(l))&&!o.overlay)return new eN(o.tree,c,e,s);let a=new eN(l,c,e,s);return r&$P.IncludeAnonymous||!a.type.isAnonymous?a:a.nextChild(t<0?l.children.length-1:0,t,n,i)}}if(r&$P.IncludeAnonymous||!s.type.isAnonymous)return null;if(e=s.index>=0?s.index+t:t<0?-1:s._parent._tree.children.length,s=s._parent,!s)return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,t){let n,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(!(i&$P.IgnoreOverlays)&&(n=FP.get(this._tree))&&n.overlay){let i=e-this.from;for(let{from:e,to:r}of n.overlay)if((t>0?e<=i:e<i)&&(t<0?r>=i:r>i))return new eN(n.tree,n.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,t,i)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}}function tN(e,t,n,i){let r=e.cursor(),s=[];if(!r.firstChild())return s;if(null!=n)for(let o=!1;!o;)if(o=r.type.is(n),!r.nextSibling())return s;for(;;){if(null!=i&&r.type.is(i))return s;if(r.type.is(t)&&s.push(r.node),!r.nextSibling())return null==i?s:[]}}function nN(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.length-1;for(let i=e.parent;n>=0;i=i.parent){if(!i)return!1;if(!i.type.isAnonymous){if(t[n]&&t[n]!=i.name)return!1;n--}}return!0}class iN{constructor(e,t,n,i){this.parent=e,this.buffer=t,this.index=n,this.start=i}}class rN extends ZP{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,t,n){super(),this.context=e,this._parent=t,this.index=n,this.type=e.buffer.set.types[e.buffer.buffer[n]]}child(e,t,n){let{buffer:i}=this.context,r=i.findChild(this.index+4,i.buffer[this.index+3],e,t-this.context.start,n);return r<0?null:new rN(this.context,this,r)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,t){if((arguments.length>2&&void 0!==arguments[2]?arguments[2]:0)&$P.ExcludeBuffers)return null;let{buffer:n}=this.context,i=n.findChild(this.index+4,n.buffer[this.index+3],t>0?1:-1,e-this.context.start,t);return i<0?null:new rN(this.context,this,i)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,t=e.buffer[this.index+3];return t<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new rN(this.context,this._parent,t):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,t=this._parent?this._parent.index+4:0;return this.index==t?this.externalSibling(-1):new rN(this.context,this._parent,e.findChild(t,this.index,-1,0,4))}get tree(){return null}toTree(){let e=[],t=[],{buffer:n}=this.context,i=this.index+4,r=n.buffer[this.index+3];if(r>i){let s=n.buffer[this.index+1];e.push(n.slice(i,r,s)),t.push(0)}return new XP(this.type,e,t,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}}function sN(e){if(!e.length)return null;let t=0,n=e[0];for(let s=1;s<e.length;s++){let i=e[s];(i.from>n.from||i.to<n.to)&&(n=i,t=s)}let i=n instanceof eN&&n.index<0?null:n.parent,r=e.slice();return i?r[t]=i:r.splice(t,1),new oN(r,n)}class oN{constructor(e,t){this.heads=e,this.node=t}get next(){return sN(this.heads)}}class aN{get name(){return this.type.name}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(this.mode=t,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof eN)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let t=e._parent;t;t=t._parent)this.stack.unshift(t.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return!!e&&(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0)}yieldBuf(e,t){this.index=e;let{start:n,buffer:i}=this.buffer;return this.type=t||i.set.types[i.buffer[e]],this.from=n+i.buffer[e+1],this.to=n+i.buffer[e+2],!0}yield(e){return!!e&&(e instanceof eN?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)))}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,t,n){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,t,n,this.mode));let{buffer:i}=this.buffer,r=i.findChild(this.index+4,i.buffer[this.index+3],e,t-this.buffer.start,n);return!(r<0)&&(this.stack.push(this.index),this.yieldBuf(r))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.mode;return this.buffer?!(n&$P.ExcludeBuffers)&&this.enterChild(1,e,t):this.yield(this._tree.enter(e,t,n))}parent(){if(!this.buffer)return this.yieldNode(this.mode&$P.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&$P.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return!!this._tree._parent&&this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode));let{buffer:t}=this.buffer,n=this.stack.length-1;if(e<0){let e=n<0?0:this.stack[n]+4;if(this.index!=e)return this.yieldBuf(t.findChild(e,this.index,-1,0,4))}else{let e=t.buffer[this.index+3];if(e<(n<0?t.buffer.length:t.buffer[this.stack[n]+3]))return this.yieldBuf(e)}return n<0&&this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode))}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let t,n,{buffer:i}=this;if(i){if(e>0){if(this.index<i.buffer.buffer.length)return!1}else for(let e=0;e<this.index;e++)if(i.buffer.buffer[e+3]<this.index)return!1;({index:t,parent:n}=i)}else({index:t,_parent:n}=this._tree);for(;n;({index:t,_parent:n}=n))if(t>-1)for(let i=t+e,r=e<0?-1:n._tree.children.length;i!=r;i+=e){let e=n._tree.children[i];if(this.mode&$P.IncludeAnonymous||e instanceof KP||!e.type.isAnonymous||lN(e))return!1}return!0}move(e,t){if(t&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.move(1,e)}prev(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.move(-1,e)}moveTo(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;for(;(this.from==this.to||(t<1?this.from>=e:this.from>e)||(t>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,t););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,t=null,n=0;if(e&&e.context==this.buffer)e:for(let i=this.index,r=this.stack.length;r>=0;){for(let s=e;s;s=s._parent)if(s.index==i){if(i==this.index)return s;t=s,n=r+1;break e}i=this.stack[--r]}for(let i=n;i<this.stack.length;i++)t=new rN(this.buffer,t,this.stack[i]);return this.bufferNode=new rN(this.buffer,t,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,t){for(let n=0;;){let i=!1;if(this.type.isAnonymous||!1!==e(this)){if(this.firstChild()){n++;continue}this.type.isAnonymous||(i=!0)}for(;i&&t&&t(this),i=this.type.isAnonymous,!this.nextSibling();){if(!n)return;this.parent(),n--,i=!0}}}matchContext(e){if(!this.buffer)return nN(this.node,e);let{buffer:t}=this.buffer,{types:n}=t.set;for(let i=e.length-1,r=this.stack.length-1;i>=0;r--){if(r<0)return nN(this.node,e,i);let s=n[t.buffer[this.stack[r]]];if(!s.isAnonymous){if(e[i]&&e[i]!=s.name)return!1;i--}}return!0}}function lN(e){return e.children.some((e=>e instanceof KP||!e.type.isAnonymous||lN(e)))}const cN=new WeakMap;function hN(e,t){if(!e.isAnonymous||t instanceof KP||t.type!=e)return 1;let n=cN.get(t);if(null==n){n=1;for(let i of t.children){if(i.type!=e||!(i instanceof XP)){n=1;break}n+=hN(e,i)}cN.set(t,n)}return n}function uN(e,t,n,i,r,s,o,a,l){let c=0;for(let f=i;f<r;f++)c+=hN(e,t[f]);let h=Math.ceil(1.5*c/8),u=[],d=[];return function t(n,i,r,o,a){for(let c=r;c<o;){let r=c,f=i[c],p=hN(e,n[c]);for(c++;c<o;c++){let t=hN(e,n[c]);if(p+t>=h)break;p+=t}if(c==r+1){if(p>h){let e=n[r];t(e.children,e.positions,0,e.children.length,i[r]+a);continue}u.push(n[r])}else{let t=i[c-1]+n[c-1].length-f;u.push(uN(e,n,i,r,c,f,t,null,l))}d.push(f+a-s)}}(t,n,i,r,0),(a||l)(u,d,o)}class dN{constructor(e,t,n,i){let r=arguments.length>4&&void 0!==arguments[4]&&arguments[4],s=arguments.length>5&&void 0!==arguments[5]&&arguments[5];this.from=e,this.to=t,this.tree=n,this.offset=i,this.open=(r?1:0)|(s?2:0)}get openStart(){return(1&this.open)>0}get openEnd(){return(2&this.open)>0}static addTree(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=[new dN(0,e.length,e,0,!1,n)];for(let r of t)r.to>e.length&&i.push(r);return i}static applyChanges(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:128;if(!t.length)return e;let i=[],r=1,s=e.length?e[0]:null;for(let o=0,a=0,l=0;;o++){let c=o<t.length?t[o]:null,h=c?c.fromA:1e9;if(h-a>=n)for(;s&&s.from<h;){let t=s;if(a>=t.from||h<=t.to||l){let e=Math.max(t.from,a)-l,n=Math.min(t.to,h)-l;t=e>=n?null:new dN(e,n,t.tree,t.offset+l,o>0,!!c)}if(t&&i.push(t),s.to>h)break;s=r<e.length?e[r++]:null}if(!c)break;a=c.toA,l=c.toA-c.toB}return i}}class fN{startParse(e,t,n){return"string"==typeof e&&(e=new pN(e)),n=n?n.length?n.map((e=>new UP(e.from,e.to))):[new UP(0,0)]:[new UP(0,e.length)],this.createParse(e,t||[],n)}parse(e,t,n){let i=this.startParse(e,t,n);for(;;){let e=i.advance();if(e)return e}}}class pN{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,t){return this.string.slice(e,t)}}new VP({perNode:!0});let gN=0;class mN{constructor(e,t,n){this.set=e,this.base=t,this.modified=n,this.id=gN++}static define(e){if(null===e||void 0===e?void 0:e.base)throw new Error("Can not derive from a modified tag");let t=new mN([],null,[]);if(t.set.push(t),e)for(let n of e.set)t.set.push(n);return t}static defineModifier(){let e=new yN;return t=>t.modified.indexOf(e)>-1?t:yN.get(t.base||t,t.modified.concat(e).sort(((e,t)=>e.id-t.id)))}}let vN=0;class yN{constructor(){this.instances=[],this.id=vN++}static get(e,t){if(!t.length)return e;let n=t[0].instances.find((n=>n.base==e&&function(e,t){return e.length==t.length&&e.every(((e,n)=>e==t[n]))}(t,n.modified)));if(n)return n;let i=[],r=new mN(i,e,t);for(let o of t)o.instances.push(r);let s=function(e){let t=[[]];for(let n=0;n<e.length;n++)for(let i=0,r=t.length;i<r;i++)t.push(t[i].concat(e[n]));return t.sort(((e,t)=>t.length-e.length))}(t);for(let o of e.set)if(!o.modified.length)for(let e of s)i.push(yN.get(o,e));return r}}function wN(e){let t=Object.create(null);for(let n in e){let i=e[n];Array.isArray(i)||(i=[i]);for(let e of n.split(" "))if(e){let n=[],r=2,s=e;for(let t=0;;){if("..."==s&&t>0&&t+3==e.length){r=1;break}let i=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(s);if(!i)throw new RangeError("Invalid path: "+e);if(n.push("*"==i[0]?"":'"'==i[0][0]?JSON.parse(i[0]):i[0]),t+=i[0].length,t==e.length)break;let o=e[t++];if(t==e.length&&"!"==o){r=0;break}if("/"!=o)throw new RangeError("Invalid path: "+e);s=e.slice(t)}let o=n.length-1,a=n[o];if(!a)throw new RangeError("Invalid path: "+e);let l=new ON(i,r,o>0?n.slice(0,o):null);t[a]=l.sort(t[a])}}return bN.add(t)}const bN=new VP;class ON{constructor(e,t,n,i){this.tags=e,this.mode=t,this.context=n,this.next=i}get opaque(){return 0==this.mode}get inherit(){return 1==this.mode}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}function kN(e,t){let n=Object.create(null);for(let s of e)if(Array.isArray(s.tag))for(let e of s.tag)n[e.id]=s.class;else n[s.tag.id]=s.class;let{scope:i,all:r=null}=t||{};return{style:e=>{let t=r;for(let i of e)for(let e of i.set){let i=n[e.id];if(i){t=t?t+" "+i:i;break}}return t},scope:i}}function SN(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:e.length,s=new xN(i,Array.isArray(t)?t:[t],n);s.highlightRange(e.cursor(),i,r,"",s.highlighters),s.flush(r)}ON.empty=new ON([],2,null);class xN{constructor(e,t,n){this.at=e,this.highlighters=t,this.span=n,this.class=""}startSpan(e,t){t!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=t)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,t,n,i,r){let{type:s,from:o,to:a}=e;if(o>=n||a<=t)return;s.isTop&&(r=this.highlighters.filter((e=>!e.scope||e.scope(s))));let l=i,c=function(e){let t=e.type.prop(bN);for(;t&&t.context&&!e.matchContext(t.context);)t=t.next;return t||null}(e)||ON.empty,h=function(e,t){let n=null;for(let i of e){let e=i.style(t);e&&(n=n?n+" "+e:e)}return n}(r,c.tags);if(h&&(l&&(l+=" "),l+=h,1==c.mode&&(i+=(i?" ":"")+h)),this.startSpan(Math.max(t,o),l),c.opaque)return;let u=e.tree&&e.tree.prop(VP.mounted);if(u&&u.overlay){let s=e.node.enter(u.overlay[0].from+o,1),c=this.highlighters.filter((e=>!e.scope||e.scope(u.tree.type))),h=e.firstChild();for(let d=0,f=o;;d++){let p=d<u.overlay.length?u.overlay[d]:null,g=p?p.from+o:a,m=Math.max(t,f),v=Math.min(n,g);if(m<v&&h)for(;e.from<v&&(this.highlightRange(e,m,v,i,r),this.startSpan(Math.min(v,e.to),l),!(e.to>=g)&&e.nextSibling()););if(!p||g>n)break;f=p.to+o,f>t&&(this.highlightRange(s.cursor(),Math.max(t,p.from+o),Math.min(n,f),"",c),this.startSpan(Math.min(n,f),l))}h&&e.parent()}else if(e.firstChild()){u&&(i="");do{if(!(e.to<=t)){if(e.from>=n)break;this.highlightRange(e,t,n,i,r),this.startSpan(Math.min(n,e.to),l)}}while(e.nextSibling());e.parent()}}}const TN=mN.define,CN=TN(),EN=TN(),_N=TN(EN),AN=TN(EN),PN=TN(),NN=TN(PN),IN=TN(PN),RN=TN(),DN=TN(RN),MN=TN(),LN=TN(),QN=TN(),zN=TN(QN),jN=TN(),UN={comment:CN,lineComment:TN(CN),blockComment:TN(CN),docComment:TN(CN),name:EN,variableName:TN(EN),typeName:_N,tagName:TN(_N),propertyName:AN,attributeName:TN(AN),className:TN(EN),labelName:TN(EN),namespace:TN(EN),macroName:TN(EN),literal:PN,string:NN,docString:TN(NN),character:TN(NN),attributeValue:TN(NN),number:IN,integer:TN(IN),float:TN(IN),bool:TN(PN),regexp:TN(PN),escape:TN(PN),color:TN(PN),url:TN(PN),keyword:MN,self:TN(MN),null:TN(MN),atom:TN(MN),unit:TN(MN),modifier:TN(MN),operatorKeyword:TN(MN),controlKeyword:TN(MN),definitionKeyword:TN(MN),moduleKeyword:TN(MN),operator:LN,derefOperator:TN(LN),arithmeticOperator:TN(LN),logicOperator:TN(LN),bitwiseOperator:TN(LN),compareOperator:TN(LN),updateOperator:TN(LN),definitionOperator:TN(LN),typeOperator:TN(LN),controlOperator:TN(LN),punctuation:QN,separator:TN(QN),bracket:zN,angleBracket:TN(zN),squareBracket:TN(zN),paren:TN(zN),brace:TN(zN),content:RN,heading:DN,heading1:TN(DN),heading2:TN(DN),heading3:TN(DN),heading4:TN(DN),heading5:TN(DN),heading6:TN(DN),contentSeparator:TN(RN),list:TN(RN),quote:TN(RN),emphasis:TN(RN),strong:TN(RN),link:TN(RN),monospace:TN(RN),strikethrough:TN(RN),inserted:TN(),deleted:TN(),changed:TN(),invalid:TN(),meta:jN,documentMeta:TN(jN),annotation:TN(jN),processingInstruction:TN(jN),definition:mN.defineModifier(),constant:mN.defineModifier(),function:mN.defineModifier(),standard:mN.defineModifier(),local:mN.defineModifier(),special:mN.defineModifier()};kN([{tag:UN.link,class:"tok-link"},{tag:UN.heading,class:"tok-heading"},{tag:UN.emphasis,class:"tok-emphasis"},{tag:UN.strong,class:"tok-strong"},{tag:UN.keyword,class:"tok-keyword"},{tag:UN.atom,class:"tok-atom"},{tag:UN.bool,class:"tok-bool"},{tag:UN.url,class:"tok-url"},{tag:UN.labelName,class:"tok-labelName"},{tag:UN.inserted,class:"tok-inserted"},{tag:UN.deleted,class:"tok-deleted"},{tag:UN.literal,class:"tok-literal"},{tag:UN.string,class:"tok-string"},{tag:UN.number,class:"tok-number"},{tag:[UN.regexp,UN.escape,UN.special(UN.string)],class:"tok-string2"},{tag:UN.variableName,class:"tok-variableName"},{tag:UN.local(UN.variableName),class:"tok-variableName tok-local"},{tag:UN.definition(UN.variableName),class:"tok-variableName tok-definition"},{tag:UN.special(UN.variableName),class:"tok-variableName2"},{tag:UN.definition(UN.propertyName),class:"tok-propertyName tok-definition"},{tag:UN.typeName,class:"tok-typeName"},{tag:UN.namespace,class:"tok-namespace"},{tag:UN.className,class:"tok-className"},{tag:UN.macroName,class:"tok-macroName"},{tag:UN.propertyName,class:"tok-propertyName"},{tag:UN.operator,class:"tok-operator"},{tag:UN.comment,class:"tok-comment"},{tag:UN.meta,class:"tok-meta"},{tag:UN.invalid,class:"tok-invalid"},{tag:UN.punctuation,class:"tok-punctuation"}]);var VN;const FN=new VP;const qN=new VP;class BN{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";this.data=e,this.name=i,em.prototype.hasOwnProperty("tree")||Object.defineProperty(em.prototype,"tree",{get(){return HN(this)}}),this.parser=t,this.extension=[tI.of(this),em.languageData.of(((e,t,n)=>{let i=WN(e,t,n),r=i.type.prop(FN);if(!r)return[];let s=e.facet(r),o=i.type.prop(qN);if(o){let r=i.resolve(t-i.from,n);for(let t of o)if(t.test(r,e)){let n=e.facet(t.facet);return"replace"==t.type?n:n.concat(s)}}return s}))].concat(n)}isActiveAt(e,t){return WN(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1).type.prop(FN)==this.data}findRegions(e){let t=e.facet(tI);if((null===t||void 0===t?void 0:t.data)==this.data)return[{from:0,to:e.doc.length}];if(!t||!t.allowsNesting)return[];let n=[],i=(e,t)=>{if(e.prop(FN)==this.data)return void n.push({from:t,to:t+e.length});let r=e.prop(VP.mounted);if(r){if(r.tree.prop(FN)==this.data){if(r.overlay)for(let e of r.overlay)n.push({from:e.from+t,to:e.to+t});else n.push({from:t,to:t+e.length});return}if(r.overlay){let e=n.length;if(i(r.tree,r.overlay[0].from+t),n.length>e)return}}for(let n=0;n<e.children.length;n++){let r=e.children[n];r instanceof XP&&i(r,e.positions[n]+t)}};return i(HN(e),0),n}get allowsNesting(){return!0}}function WN(e,t,n){let i=e.facet(tI),r=HN(e).topNode;if(!i||i.allowsNesting)for(let s=r;s;s=s.enter(t,n,$P.ExcludeBuffers))s.type.isTop&&(r=s);return r}BN.setState=Fg.define();function HN(e){let t=e.field(BN.state,!1);return t?t.tree:XP.empty}class $N{constructor(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}get length(){return this.doc.length}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,t){let n=this.cursorPos-this.string.length;return e<n||t>=this.cursorPos?this.doc.sliceString(e,t):this.string.slice(e-n,t-n)}}let XN=null;class GN{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3?arguments[3]:void 0,r=arguments.length>4?arguments[4]:void 0,s=arguments.length>5?arguments[5]:void 0,o=arguments.length>6?arguments[6]:void 0,a=arguments.length>7?arguments[7]:void 0;this.parser=e,this.state=t,this.fragments=n,this.tree=i,this.treeLen=r,this.viewport=s,this.skipped=o,this.scheduleOn=a,this.parse=null,this.tempSkipped=[]}static create(e,t,n){return new GN(e,t,[],XP.empty,0,n,[],null)}startParse(){return this.parser.startParse(new $N(this.state.doc),this.fragments)}work(e,t){return null!=t&&t>=this.state.doc.length&&(t=void 0),this.tree!=XP.empty&&this.isDone(null!==t&&void 0!==t?t:this.state.doc.length)?(this.takeTree(),!0):this.withContext((()=>{var n;if("number"==typeof e){let t=Date.now()+e;e=()=>Date.now()>t}for(this.parse||(this.parse=this.startParse()),null!=t&&(null==this.parse.stoppedAt||this.parse.stoppedAt>t)&&t<this.state.doc.length&&this.parse.stopAt(t);;){let i=this.parse.advance();if(i){if(this.fragments=this.withoutTempSkipped(dN.addTree(i,this.fragments,null!=this.parse.stoppedAt)),this.treeLen=null!==(n=this.parse.stoppedAt)&&void 0!==n?n:this.state.doc.length,this.tree=i,this.parse=null,!(this.treeLen<(null!==t&&void 0!==t?t:this.state.doc.length)))return!0;this.parse=this.startParse()}if(e())return!1}}))}takeTree(){let e,t;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((null==this.parse.stoppedAt||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext((()=>{for(;!(t=this.parse.advance()););})),this.treeLen=e,this.tree=t,this.fragments=this.withoutTempSkipped(dN.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let t=XN;XN=this;try{return e()}finally{XN=t}}withoutTempSkipped(e){for(let t;t=this.tempSkipped.pop();)e=KN(e,t.from,t.to);return e}changes(e,t){let{fragments:n,tree:i,treeLen:r,viewport:s,skipped:o}=this;if(this.takeTree(),!e.empty){let t=[];if(e.iterChangedRanges(((e,n,i,r)=>t.push({fromA:e,toA:n,fromB:i,toB:r}))),n=dN.applyChanges(n,t),i=XP.empty,r=0,s={from:e.mapPos(s.from,-1),to:e.mapPos(s.to,1)},this.skipped.length){o=[];for(let t of this.skipped){let n=e.mapPos(t.from,1),i=e.mapPos(t.to,-1);n<i&&o.push({from:n,to:i})}}}return new GN(this.parser,t,n,i,r,s,o,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let t=this.skipped.length;for(let n=0;n<this.skipped.length;n++){let{from:t,to:i}=this.skipped[n];t<e.to&&i>e.from&&(this.fragments=KN(this.fragments,t,i),this.skipped.splice(n--,1))}return!(this.skipped.length>=t)&&(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,t){this.skipped.push({from:e,to:t})}static getSkippingParser(e){return new class extends fN{createParse(t,n,i){let r=i[0].from,s=i[i.length-1].to;return{parsedPos:r,advance(){let t=XN;if(t){for(let e of i)t.tempSkipped.push(e);e&&(t.scheduleOn=t.scheduleOn?Promise.all([t.scheduleOn,e]):e)}return this.parsedPos=s,new XP(BP.none,[],[],s-r)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let t=this.fragments;return this.treeLen>=e&&t.length&&0==t[0].from&&t[0].to>=e}static get(){return XN}}function KN(e,t,n){return dN.applyChanges(e,[{fromA:t,toA:n,fromB:t,toB:n}])}class YN{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let t=this.context.changes(e.changes,e.state),n=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),t.viewport.to);return t.work(20,n)||t.takeTree(),new YN(t)}static init(e){let t=Math.min(3e3,e.doc.length),n=GN.create(e.facet(tI).parser,e,{from:0,to:t});return n.work(20,t)||n.takeTree(),new YN(n)}}BN.state=wg.define({create:YN.init,update(e,t){for(let n of t.effects)if(n.is(BN.setState))return n.value;return t.startState.facet(tI)!=t.state.facet(tI)?YN.init(t.state):e.apply(t)}});let JN=e=>{let t=setTimeout((()=>e()),500);return()=>clearTimeout(t)};"undefined"!=typeof requestIdleCallback&&(JN=e=>{let t=-1,n=setTimeout((()=>{t=requestIdleCallback(e,{timeout:400})}),100);return()=>t<0?clearTimeout(n):cancelIdleCallback(t)});const ZN="undefined"!=typeof navigator&&(null===(VN=navigator.scheduling)||void 0===VN?void 0:VN.isInputPending)?()=>navigator.scheduling.isInputPending():null,eI=Ey.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let t=this.view.state.field(BN.state).context;(t.updateViewport(e.view.viewport)||this.view.viewport.to>t.treeLen)&&this.scheduleWork(),(e.docChanged||e.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(t)}scheduleWork(){if(this.working)return;let{state:e}=this.view,t=e.field(BN.state);t.tree==t.context.tree&&t.context.isDone(e.doc.length)||(this.working=JN(this.work))}work(e){this.working=null;let t=Date.now();if(this.chunkEnd<t&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=t+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:n,viewport:{to:i}}=this.view,r=n.field(BN.state);if(r.tree==r.context.tree&&r.context.isDone(i+1e5))return;let s=Date.now()+Math.min(this.chunkBudget,100,e&&!ZN?Math.max(25,e.timeRemaining()-5):1e9),o=r.context.treeLen<i&&n.doc.length>i+1e3,a=r.context.work((()=>ZN&&ZN()||Date.now()>s),i+(o?0:1e5));this.chunkBudget-=Date.now()-t,(a||this.chunkBudget<=0)&&(r.context.takeTree(),this.view.dispatch({effects:BN.setState.of(new YN(r.context))})),this.chunkBudget>0&&(!a||o)&&this.scheduleWork(),this.checkAsyncSchedule(r.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then((()=>this.scheduleWork())).catch((e=>Sy(this.view.state,e))).then((()=>this.workScheduled--)),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),tI=dg.define({combine:e=>e.length?e[0]:null,enables:e=>[BN.state,eI,xb.contentAttributes.compute([e],(t=>{let n=t.facet(e);return n&&n.name?{"data-language":n.name}:{}}))]});class nI{constructor(e,t){let n;function i(e){let t=Sm.newName();return(n||(n=Object.create(null)))["."+t]=e,t}this.specs=e;const r="string"==typeof t.all?t.all:t.all?i(t.all):void 0,s=t.scope;this.scope=s instanceof BN?e=>e.prop(FN)==s.data:s?e=>e==s:void 0,this.style=kN(e.map((e=>({tag:e.tag,class:e.class||i(Object.assign({},e,{tag:null}))}))),{all:r}).style,this.module=n?new Sm(n):null,this.themeType=t.themeType}static define(e,t){return new nI(e,t||{})}}const iI=dg.define(),rI=dg.define({combine:e=>e.length?[e[0]]:null});function sI(e){let t=e.facet(iI);return t.length?t:e.facet(rI)}function oI(e,t){let n,i=[lI];return e instanceof nI&&(e.module&&i.push(xb.styleModule.of(e.module)),n=e.themeType),(null===t||void 0===t?void 0:t.fallback)?i.push(rI.of(e)):n?i.push(iI.computeN([xb.darkTheme],(t=>t.facet(xb.darkTheme)==("dark"==n)?[e]:[]))):i.push(iI.of(e)),i}class aI{constructor(e){this.markCache=Object.create(null),this.tree=HN(e.state),this.decorations=this.buildDeco(e,sI(e.state)),this.decoratedTo=e.viewport.to}update(e){let t=HN(e.state),n=sI(e.state),i=n!=sI(e.startState),{viewport:r}=e.view,s=e.changes.mapPos(this.decoratedTo,1);t.length<r.to&&!i&&t.type==this.tree.type&&s>=r.to?(this.decorations=this.decorations.map(e.changes),this.decoratedTo=s):(t!=this.tree||e.viewportChanged||i)&&(this.tree=t,this.decorations=this.buildDeco(e.view,n),this.decoratedTo=r.to)}buildDeco(e,t){if(!t||!this.tree.length)return Mv.none;let n=new am;for(let{from:i,to:r}of e.visibleRanges)SN(this.tree,t,((e,t,i)=>{n.add(e,t,this.markCache[i]||(this.markCache[i]=Mv.mark({class:i})))}),i,r);return n.finish()}}const lI=Tg.high(Ey.fromClass(aI,{decorations:e=>e.decorations}));UN.meta,UN.link,UN.heading,UN.emphasis,UN.strong,UN.strikethrough,UN.keyword,UN.atom,UN.bool,UN.url,UN.contentSeparator,UN.labelName,UN.literal,UN.inserted,UN.string,UN.deleted,UN.regexp,UN.escape,UN.string,UN.variableName,UN.variableName,UN.typeName,UN.namespace,UN.className,UN.variableName,UN.macroName,UN.propertyName,UN.comment,UN.invalid;const cI=Object.create(null),hI=[BP.none],uI=[],dI=Object.create(null),fI=Object.create(null);for(let[Sk,xj]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])fI[Sk]=gI(cI,xj);function pI(e,t){uI.indexOf(e)>-1||(uI.push(e),console.warn(t))}function gI(e,t){let n=[];for(let a of t.split(" ")){let t=[];for(let n of a.split(".")){let i=e[n]||UN[n];i?"function"==typeof i?t.length?t=t.map(i):pI(n,"Modifier ".concat(n," used at start of tag")):t.length?pI(n,"Tag ".concat(n," used as modifier")):t=Array.isArray(i)?i:[i]:pI(n,"Unknown highlighting tag ".concat(n))}for(let e of t)n.push(e)}if(!n.length)return 0;let i=t.replace(/ /g,"_"),r=i+" "+n.map((e=>e.id)),s=dI[r];if(s)return s.id;let o=dI[r]=BP.define({id:hI.length,name:i,props:[wN({[i]:n})]});return hI.push(o),o.id}Bv.RTL,Bv.LTR;const mI="#e5c07b",vI="#e06c75",yI="#56b6c2",wI="#ffffff",bI="#abb2bf",OI="#7d8799",kI="#61afef",SI="#98c379",xI="#d19a66",TI="#c678dd",CI="#21252b",EI="#2c313a",_I="#282c34",AI="#353a42",PI="#3E4451",NI="#528bff",II=[xb.theme({"&":{color:bI,backgroundColor:_I},".cm-content":{caretColor:NI},".cm-cursor, .cm-dropCursor":{borderLeftColor:NI},"&.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:PI},".cm-panels":{backgroundColor:CI,color:bI},".cm-panels.cm-panels-top":{borderBottom:"2px solid black"},".cm-panels.cm-panels-bottom":{borderTop:"2px solid black"},".cm-searchMatch":{backgroundColor:"#72a1ff59",outline:"1px solid #457dff"},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:"#6199ff2f"},".cm-activeLine":{backgroundColor:"#6699ff0b"},".cm-selectionMatch":{backgroundColor:"#aafe661a"},"&.cm-focused .cm-matchingBracket, &.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bad0f847"},".cm-gutters":{backgroundColor:_I,color:OI,border:"none"},".cm-activeLineGutter":{backgroundColor:EI},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:"#ddd"},".cm-tooltip":{border:"none",backgroundColor:AI},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"transparent",borderBottomColor:"transparent"},".cm-tooltip .cm-tooltip-arrow:after":{borderTopColor:AI,borderBottomColor:AI},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{backgroundColor:EI,color:bI}}},{dark:!0}),oI(nI.define([{tag:UN.keyword,color:TI},{tag:[UN.name,UN.deleted,UN.character,UN.propertyName,UN.macroName],color:vI},{tag:[UN.function(UN.variableName),UN.labelName],color:kI},{tag:[UN.color,UN.constant(UN.name),UN.standard(UN.name)],color:xI},{tag:[UN.definition(UN.name),UN.separator],color:bI},{tag:[UN.typeName,UN.className,UN.number,UN.changed,UN.annotation,UN.modifier,UN.self,UN.namespace],color:mI},{tag:[UN.operator,UN.operatorKeyword,UN.url,UN.escape,UN.regexp,UN.link,UN.special(UN.string)],color:yI},{tag:[UN.meta,UN.comment],color:OI},{tag:UN.strong,fontWeight:"bold"},{tag:UN.emphasis,fontStyle:"italic"},{tag:UN.strikethrough,textDecoration:"line-through"},{tag:UN.link,color:OI,textDecoration:"underline"},{tag:UN.heading,fontWeight:"bold",color:vI},{tag:[UN.atom,UN.bool,UN.special(UN.variableName)],color:xI},{tag:[UN.processingInstruction,UN.string,UN.inserted],color:SI},{tag:UN.invalid,color:wI}]))];var RI=xb.theme({"&":{backgroundColor:"#fff"}},{dark:!1}),DI=function(e){void 0===e&&(e={});var{indentWithTab:t=!0,editable:n=!0,readOnly:i=!1,theme:r="light",placeholder:s="",basicSetup:o=!0}=e,a=[];switch(t&&a.unshift(Ib.of([ex])),o&&("boolean"===typeof o?a.unshift(QP()):a.unshift(QP(o))),s&&a.unshift(function(e){return Ey.fromClass(class{constructor(t){this.view=t,this.placeholder=e?Mv.set([Mv.widget({widget:new pO(e),side:1}).range(0)]):Mv.none}get decorations(){return this.view.state.doc.length?Mv.none:this.placeholder}},{decorations:e=>e.decorations})}(s)),r){case"light":a.push(RI);break;case"dark":a.push(II);break;case"none":break;default:a.push(r)}return!1===n&&a.push(xb.editable.of(!1)),i&&a.push(em.readOnly.of(!0)),[...a]},MI=jg.define(),LI=[];function QI(e){var{value:t,selection:n,onChange:i,onStatistics:r,onCreateEditor:o,onUpdate:a,extensions:l=LI,autoFocus:c,theme:h="light",height:u=null,minHeight:d=null,maxHeight:f=null,width:p=null,minWidth:g=null,maxWidth:m=null,placeholder:v="",editable:y=!0,readOnly:w=!1,indentWithTab:b=!0,basicSetup:O=!0,root:k,initialState:S}=e,[x,T]=(0,s.useState)(),[C,E]=(0,s.useState)(),[_,A]=(0,s.useState)(),P=xb.theme({"&":{height:u,minHeight:d,maxHeight:f,width:p,minWidth:g,maxWidth:m},"& .cm-scroller":{height:"100% !important"}}),N=xb.updateListener.of((e=>{if(e.docChanged&&"function"===typeof i&&!e.transactions.some((e=>e.annotation(MI)))){var t=e.state.doc.toString();i(t,e)}r&&r((e=>({line:e.state.doc.lineAt(e.state.selection.main.from),lineCount:e.state.doc.lines,lineBreak:e.state.lineBreak,length:e.state.doc.length,readOnly:e.state.readOnly,tabSize:e.state.tabSize,selection:e.state.selection,selectionAsSingle:e.state.selection.asSingle().main,ranges:e.state.selection.ranges,selectionCode:e.state.sliceDoc(e.state.selection.main.from,e.state.selection.main.to),selections:e.state.selection.ranges.map((t=>e.state.sliceDoc(t.from,t.to))),selectedText:e.state.selection.ranges.some((e=>!e.empty))}))(e))})),I=[N,P,...DI({theme:h,editable:y,readOnly:w,placeholder:v,indentWithTab:b,basicSetup:O})];return a&&"function"===typeof a&&I.push(xb.updateListener.of(a)),I=I.concat(l),(0,s.useEffect)((()=>{if(x&&!_){var e={doc:t,selection:n,extensions:I},i=S?em.fromJSON(S.json,e,S.fields):em.create(e);if(A(i),!C){var r=new xb({state:i,parent:x,root:k});E(r),o&&o(r,i)}}return()=>{C&&(A(void 0),E(void 0))}}),[x,_]),(0,s.useEffect)((()=>T(e.container)),[e.container]),(0,s.useEffect)((()=>()=>{C&&(C.destroy(),E(void 0))}),[C]),(0,s.useEffect)((()=>{c&&C&&C.focus()}),[c,C]),(0,s.useEffect)((()=>{C&&C.dispatch({effects:Fg.reconfigure.of(I)})}),[h,l,u,d,f,p,g,m,v,y,w,b,O,i,a]),(0,s.useEffect)((()=>{if(void 0!==t){var e=C?C.state.doc.toString():"";C&&t!==e&&C.dispatch({changes:{from:0,to:e.length,insert:t||""},annotations:[MI.of(!0)]})}}),[t,C]),{state:_,setState:A,view:C,setView:E,container:x,setContainer:T}}var zI=["className","value","selection","extensions","onChange","onStatistics","onCreateEditor","onUpdate","autoFocus","theme","height","minHeight","maxHeight","width","minWidth","maxWidth","basicSetup","placeholder","indentWithTab","editable","readOnly","root","initialState"],jI=(0,s.forwardRef)(((e,t)=>{var{className:n,value:i="",selection:r,extensions:o=[],onChange:a,onStatistics:l,onCreateEditor:c,onUpdate:h,autoFocus:u,theme:d="light",height:f,minHeight:p,maxHeight:g,width:m,minWidth:v,maxWidth:y,basicSetup:w,placeholder:b,indentWithTab:O,editable:k,readOnly:S,root:x,initialState:T}=e,C=function(e,t){if(null==e)return{};var n={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(t.includes(i))continue;n[i]=e[i]}return n}(e,zI),E=(0,s.useRef)(null),{state:_,view:A,container:P}=QI({container:E.current,root:x,value:i,autoFocus:u,theme:d,height:f,minHeight:p,maxHeight:g,width:m,minWidth:v,maxWidth:y,basicSetup:w,placeholder:b,indentWithTab:O,editable:k,readOnly:S,selection:r,onChange:a,onStatistics:l,onCreateEditor:c,onUpdate:h,extensions:o,initialState:T});if((0,s.useImperativeHandle)(t,(()=>({editor:E.current,state:_,view:A})),[E,P,_,A]),"string"!==typeof i)throw new Error("value must be typeof string but got "+typeof i);var N="string"===typeof d?"cm-theme-"+d:"cm-theme";return(0,Cp.jsx)("div",Ap({ref:E,className:N+(n?" "+n:"")},C))}));jI.displayName="CodeMirror";const UI=1024;let VI=0;class FI{constructor(e,t){this.from=e,this.to=t}}class qI{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.id=VI++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return"function"!=typeof e&&(e=HI.match(e)),t=>{let n=e(t);return void 0===n?null:[this,n]}}}qI.closedBy=new qI({deserialize:e=>e.split(" ")}),qI.openedBy=new qI({deserialize:e=>e.split(" ")}),qI.group=new qI({deserialize:e=>e.split(" ")}),qI.isolate=new qI({deserialize:e=>{if(e&&"rtl"!=e&&"ltr"!=e&&"auto"!=e)throw new RangeError("Invalid value for isolate: "+e);return e||"auto"}}),qI.contextHash=new qI({perNode:!0}),qI.lookAhead=new qI({perNode:!0}),qI.mounted=new qI({perNode:!0});class BI{constructor(e,t,n){this.tree=e,this.overlay=t,this.parser=n}static get(e){return e&&e.props&&e.props[qI.mounted.id]}}const WI=Object.create(null);class HI{constructor(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;this.name=e,this.props=t,this.id=n,this.flags=i}static define(e){let t=e.props&&e.props.length?Object.create(null):WI,n=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(null==e.name?8:0),i=new HI(e.name||"",t,e.id,n);if(e.props)for(let r of e.props)if(Array.isArray(r)||(r=r(i)),r){if(r[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");t[r[0].id]=r[1]}return i}prop(e){return this.props[e.id]}get isTop(){return(1&this.flags)>0}get isSkipped(){return(2&this.flags)>0}get isError(){return(4&this.flags)>0}get isAnonymous(){return(8&this.flags)>0}is(e){if("string"==typeof e){if(this.name==e)return!0;let t=this.prop(qI.group);return!!t&&t.indexOf(e)>-1}return this.id==e}static match(e){let t=Object.create(null);for(let n in e)for(let i of n.split(" "))t[i]=e[n];return e=>{for(let n=e.prop(qI.group),i=-1;i<(n?n.length:0);i++){let r=t[i<0?e.name:n[i]];if(r)return r}}}}HI.none=new HI("",Object.create(null),0,8);class $I{constructor(e){this.types=e;for(let t=0;t<e.length;t++)if(e[t].id!=t)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(){let e=[];for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];for(let r of this.types){let t=null;for(let e of n){let n=e(r);n&&(t||(t=Object.assign({},r.props)),t[n[0].id]=n[1])}e.push(t?new HI(r.name,t,r.id,r.flags):r)}return new $I(e)}}const XI=new WeakMap,GI=new WeakMap;var KI;!function(e){e[e.ExcludeBuffers=1]="ExcludeBuffers",e[e.IncludeAnonymous=2]="IncludeAnonymous",e[e.IgnoreMounts=4]="IgnoreMounts",e[e.IgnoreOverlays=8]="IgnoreOverlays"}(KI||(KI={}));class YI{constructor(e,t,n,i,r){if(this.type=e,this.children=t,this.positions=n,this.length=i,this.props=null,r&&r.length){this.props=Object.create(null);for(let[e,t]of r)this.props["number"==typeof e?e:e.id]=t}}toString(){let e=BI.get(this);if(e&&!e.overlay)return e.tree.toString();let t="";for(let n of this.children){let e=n.toString();e&&(t&&(t+=","),t+=e)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(t.length?"("+t+")":""):t}cursor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return new hR(this.topNode,e)}cursorAt(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=XI.get(this)||this.topNode,i=new hR(n);return i.moveTo(e,t),XI.set(this,i._tree),i}get topNode(){return new iR(this,0,0,null)}resolve(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=tR(XI.get(this)||this.topNode,e,t,!1);return XI.set(this,n),n}resolveInner(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=tR(GI.get(this)||this.topNode,e,t,!0);return GI.set(this,n),n}resolveStack(e){return function(e,t,n){let i=e.resolveInner(t,n),r=null;for(let s=i instanceof iR?i:i.context.parent;s;s=s.parent)if(s.index<0){let e=s.parent;(r||(r=[i])).push(e.resolve(t,n)),s=e}else{let e=BI.get(s.tree);if(e&&e.overlay&&e.overlay[0].from<=t&&e.overlay[e.overlay.length-1].to>=t){let o=new iR(e.tree,e.overlay[0].from+s.from,-1,s);(r||(r=[i])).push(tR(o,t,n,!1))}}return r?lR(r):i}(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0)}iterate(e){let{enter:t,leave:n,from:i=0,to:r=this.length}=e,s=e.mode||0,o=(s&KI.IncludeAnonymous)>0;for(let a=this.cursor(s|KI.IncludeAnonymous);;){let e=!1;if(a.from<=r&&a.to>=i&&(!o&&a.type.isAnonymous||!1!==t(a))){if(a.firstChild())continue;e=!0}for(;e&&n&&(o||!a.type.isAnonymous)&&n(a),!a.nextSibling();){if(!a.parent())return;e=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let t in this.props)e.push([+t,this.props[t]]);return e}balance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.children.length<=8?this:pR(HI.none,this.children,this.positions,0,this.children.length,0,this.length,((e,t,n)=>new YI(this.type,e,t,n,this.propValues)),e.makeTree||((e,t,n)=>new YI(HI.none,e,t,n)))}static build(e){return function(e){var t;let{buffer:n,nodeSet:i,maxBufferLength:r=UI,reused:s=[],minRepeatType:o=i.types.length}=e,a=Array.isArray(n)?new JI(n,n.length):n,l=i.types,c=0,h=0;function u(e,t,n,y,w,b){let{id:O,start:k,end:S,size:x}=a,T=h;for(;x<0;){if(a.next(),-1==x){let t=s[O];return n.push(t),void y.push(k-e)}if(-3==x)return void(c=O);if(-4==x)return void(h=O);throw new RangeError("Unrecognized record size: ".concat(x))}let C,E,_=l[O],A=k-e;if(S-k<=r&&(E=m(a.pos-t,w))){let t=new Uint16Array(E.size-E.skip),n=a.pos-E.size,r=t.length;for(;a.pos>n;)r=v(E.start,t,r);C=new ZI(t,S-E.start,i),A=E.start-e}else{let e=a.pos-x;a.next();let t=[],n=[],i=O>=o?O:-1,s=0,l=S;for(;a.pos>e;)i>=0&&a.id==i&&a.size>=0?(a.end<=l-r&&(p(t,n,k,s,a.end,l,i,T),s=t.length,l=a.end),a.next()):b>2500?d(k,e,t,n):u(k,e,t,n,i,b+1);if(i>=0&&s>0&&s<t.length&&p(t,n,k,s,k,l,i,T),t.reverse(),n.reverse(),i>-1&&s>0){let e=f(_);C=pR(_,t,n,0,t.length,0,S-k,e,e)}else C=g(_,t,n,S-k,T-S)}n.push(C),y.push(A)}function d(e,t,n,s){let o=[],l=0,c=-1;for(;a.pos>t;){let{id:e,start:t,end:n,size:i}=a;if(i>4)a.next();else{if(c>-1&&t<c)break;c<0&&(c=n-r),o.push(e,t,n),l++,a.next()}}if(l){let t=new Uint16Array(4*l),r=o[o.length-2];for(let e=o.length-3,n=0;e>=0;e-=3)t[n++]=o[e],t[n++]=o[e+1]-r,t[n++]=o[e+2]-r,t[n++]=n;n.push(new ZI(t,o[2]-r,i)),s.push(r-e)}}function f(e){return(t,n,i)=>{let r,s,o=0,a=t.length-1;if(a>=0&&(r=t[a])instanceof YI){if(!a&&r.type==e&&r.length==i)return r;(s=r.prop(qI.lookAhead))&&(o=n[a]+r.length+s)}return g(e,t,n,i,o)}}function p(e,t,n,r,s,o,a,l){let c=[],h=[];for(;e.length>r;)c.push(e.pop()),h.push(t.pop()+n-s);e.push(g(i.types[a],c,h,o-s,l-o)),t.push(s-n)}function g(e,t,n,i){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,s=arguments.length>5?arguments[5]:void 0;if(c){let e=[qI.contextHash,c];s=s?[e].concat(s):[e]}if(r>25){let e=[qI.lookAhead,r];s=s?[e].concat(s):[e]}return new YI(e,t,n,i,s)}function m(e,t){let n=a.fork(),i=0,s=0,l=0,c=n.end-r,h={size:0,start:0,skip:0};e:for(let r=n.pos-e;n.pos>r;){let e=n.size;if(n.id==t&&e>=0){h.size=i,h.start=s,h.skip=l,l+=4,i+=4,n.next();continue}let a=n.pos-e;if(e<0||a<r||n.start<c)break;let u=n.id>=o?4:0,d=n.start;for(n.next();n.pos>a;){if(n.size<0){if(-3!=n.size)break e;u+=4}else n.id>=o&&(u+=4);n.next()}s=d,i+=e,l+=u}return(t<0||i==e)&&(h.size=i,h.start=s,h.skip=l),h.size>4?h:void 0}function v(e,t,n){let{id:i,start:r,end:s,size:l}=a;if(a.next(),l>=0&&i<o){let o=n;if(l>4){let i=a.pos-(l-4);for(;a.pos>i;)n=v(e,t,n)}t[--n]=o,t[--n]=s-e,t[--n]=r-e,t[--n]=i}else-3==l?c=i:-4==l&&(h=i);return n}let y=[],w=[];for(;a.pos>0;)u(e.start||0,e.bufferStart||0,y,w,-1,0);let b=null!==(t=e.length)&&void 0!==t?t:y.length?w[0]+y[0].length:0;return new YI(l[e.topID],y.reverse(),w.reverse(),b)}(e)}}YI.empty=new YI(HI.none,[],[],0);class JI{constructor(e,t){this.buffer=e,this.index=t}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new JI(this.buffer,this.index)}}class ZI{constructor(e,t,n){this.buffer=e,this.length=t,this.set=n}get type(){return HI.none}toString(){let e=[];for(let t=0;t<this.buffer.length;)e.push(this.childString(t)),t=this.buffer[t+3];return e.join(",")}childString(e){let t=this.buffer[e],n=this.buffer[e+3],i=this.set.types[t],r=i.name;if(/\W/.test(r)&&!i.isError&&(r=JSON.stringify(r)),n==(e+=4))return r;let s=[];for(;e<n;)s.push(this.childString(e)),e=this.buffer[e+3];return r+"("+s.join(",")+")"}findChild(e,t,n,i,r){let{buffer:s}=this,o=-1;for(let a=e;a!=t&&!(eR(r,i,s[a+1],s[a+2])&&(o=a,n>0));a=s[a+3]);return o}slice(e,t,n){let i=this.buffer,r=new Uint16Array(t-e),s=0;for(let o=e,a=0;o<t;){r[a++]=i[o++],r[a++]=i[o++]-n;let t=r[a++]=i[o++]-n;r[a++]=i[o++]-e,s=Math.max(s,t)}return new ZI(r,s,this.set)}}function eR(e,t,n,i){switch(e){case-2:return n<t;case-1:return i>=t&&n<t;case 0:return n<t&&i>t;case 1:return n<=t&&i>t;case 2:return i>t;case 4:return!0}}function tR(e,t,n,i){for(var r;e.from==e.to||(n<1?e.from>=t:e.from>t)||(n>-1?e.to<=t:e.to<t);){let t=!i&&e instanceof iR&&e.index<0?null:e.parent;if(!t)return e;e=t}let s=i?0:KI.IgnoreOverlays;if(i)for(let o=e,a=o.parent;a;o=a,a=o.parent)o instanceof iR&&o.index<0&&(null===(r=a.enter(t,n,s))||void 0===r?void 0:r.from)!=o.from&&(e=a);for(;;){let i=e.enter(t,n,s);if(!i)return e;e=i}}class nR{cursor(){return new hR(this,arguments.length>0&&void 0!==arguments[0]?arguments[0]:0)}getChild(e){let t=rR(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:null);return t.length?t[0]:null}getChildren(e){return rR(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}resolve(e){return tR(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,!1)}resolveInner(e){return tR(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,!0)}matchContext(e){return sR(this,e)}enterUnfinishedNodesBefore(e){let t=this.childBefore(e),n=this;for(;t;){let e=t.lastChild;if(!e||e.to!=t.to)break;e.type.isError&&e.from==e.to?(n=t,t=e.prevSibling):t=e}return n}get node(){return this}get next(){return this.parent}}class iR extends nR{constructor(e,t,n,i){super(),this._tree=e,this.from=t,this.index=n,this._parent=i}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,t,n,i){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;for(let s=this;;){for(let{children:o,positions:a}=s._tree,l=t>0?o.length:-1;e!=l;e+=t){let l=o[e],c=a[e]+s.from;if(eR(i,n,c,c+l.length))if(l instanceof ZI){if(r&KI.ExcludeBuffers)continue;let o=l.findChild(0,l.buffer.length,t,n-c,i);if(o>-1)return new aR(new oR(s,l,e,c),null,o)}else if(r&KI.IncludeAnonymous||!l.type.isAnonymous||uR(l)){let o;if(!(r&KI.IgnoreMounts)&&(o=BI.get(l))&&!o.overlay)return new iR(o.tree,c,e,s);let a=new iR(l,c,e,s);return r&KI.IncludeAnonymous||!a.type.isAnonymous?a:a.nextChild(t<0?l.children.length-1:0,t,n,i)}}if(r&KI.IncludeAnonymous||!s.type.isAnonymous)return null;if(e=s.index>=0?s.index+t:t<0?-1:s._parent._tree.children.length,s=s._parent,!s)return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,t){let n,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(!(i&KI.IgnoreOverlays)&&(n=BI.get(this._tree))&&n.overlay){let i=e-this.from;for(let{from:e,to:r}of n.overlay)if((t>0?e<=i:e<i)&&(t<0?r>=i:r>i))return new iR(n.tree,n.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,t,i)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}}function rR(e,t,n,i){let r=e.cursor(),s=[];if(!r.firstChild())return s;if(null!=n)for(let o=!1;!o;)if(o=r.type.is(n),!r.nextSibling())return s;for(;;){if(null!=i&&r.type.is(i))return s;if(r.type.is(t)&&s.push(r.node),!r.nextSibling())return null==i?s:[]}}function sR(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.length-1;for(let i=e.parent;n>=0;i=i.parent){if(!i)return!1;if(!i.type.isAnonymous){if(t[n]&&t[n]!=i.name)return!1;n--}}return!0}class oR{constructor(e,t,n,i){this.parent=e,this.buffer=t,this.index=n,this.start=i}}class aR extends nR{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,t,n){super(),this.context=e,this._parent=t,this.index=n,this.type=e.buffer.set.types[e.buffer.buffer[n]]}child(e,t,n){let{buffer:i}=this.context,r=i.findChild(this.index+4,i.buffer[this.index+3],e,t-this.context.start,n);return r<0?null:new aR(this.context,this,r)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,t){if((arguments.length>2&&void 0!==arguments[2]?arguments[2]:0)&KI.ExcludeBuffers)return null;let{buffer:n}=this.context,i=n.findChild(this.index+4,n.buffer[this.index+3],t>0?1:-1,e-this.context.start,t);return i<0?null:new aR(this.context,this,i)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,t=e.buffer[this.index+3];return t<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new aR(this.context,this._parent,t):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,t=this._parent?this._parent.index+4:0;return this.index==t?this.externalSibling(-1):new aR(this.context,this._parent,e.findChild(t,this.index,-1,0,4))}get tree(){return null}toTree(){let e=[],t=[],{buffer:n}=this.context,i=this.index+4,r=n.buffer[this.index+3];if(r>i){let s=n.buffer[this.index+1];e.push(n.slice(i,r,s)),t.push(0)}return new YI(this.type,e,t,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}}function lR(e){if(!e.length)return null;let t=0,n=e[0];for(let s=1;s<e.length;s++){let i=e[s];(i.from>n.from||i.to<n.to)&&(n=i,t=s)}let i=n instanceof iR&&n.index<0?null:n.parent,r=e.slice();return i?r[t]=i:r.splice(t,1),new cR(r,n)}class cR{constructor(e,t){this.heads=e,this.node=t}get next(){return lR(this.heads)}}class hR{get name(){return this.type.name}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(this.mode=t,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof iR)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let t=e._parent;t;t=t._parent)this.stack.unshift(t.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return!!e&&(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0)}yieldBuf(e,t){this.index=e;let{start:n,buffer:i}=this.buffer;return this.type=t||i.set.types[i.buffer[e]],this.from=n+i.buffer[e+1],this.to=n+i.buffer[e+2],!0}yield(e){return!!e&&(e instanceof iR?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)))}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,t,n){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,t,n,this.mode));let{buffer:i}=this.buffer,r=i.findChild(this.index+4,i.buffer[this.index+3],e,t-this.buffer.start,n);return!(r<0)&&(this.stack.push(this.index),this.yieldBuf(r))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.mode;return this.buffer?!(n&KI.ExcludeBuffers)&&this.enterChild(1,e,t):this.yield(this._tree.enter(e,t,n))}parent(){if(!this.buffer)return this.yieldNode(this.mode&KI.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&KI.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return!!this._tree._parent&&this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode));let{buffer:t}=this.buffer,n=this.stack.length-1;if(e<0){let e=n<0?0:this.stack[n]+4;if(this.index!=e)return this.yieldBuf(t.findChild(e,this.index,-1,0,4))}else{let e=t.buffer[this.index+3];if(e<(n<0?t.buffer.length:t.buffer[this.stack[n]+3]))return this.yieldBuf(e)}return n<0&&this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode))}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let t,n,{buffer:i}=this;if(i){if(e>0){if(this.index<i.buffer.buffer.length)return!1}else for(let e=0;e<this.index;e++)if(i.buffer.buffer[e+3]<this.index)return!1;({index:t,parent:n}=i)}else({index:t,_parent:n}=this._tree);for(;n;({index:t,_parent:n}=n))if(t>-1)for(let i=t+e,r=e<0?-1:n._tree.children.length;i!=r;i+=e){let e=n._tree.children[i];if(this.mode&KI.IncludeAnonymous||e instanceof ZI||!e.type.isAnonymous||uR(e))return!1}return!0}move(e,t){if(t&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.move(1,e)}prev(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.move(-1,e)}moveTo(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;for(;(this.from==this.to||(t<1?this.from>=e:this.from>e)||(t>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,t););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,t=null,n=0;if(e&&e.context==this.buffer)e:for(let i=this.index,r=this.stack.length;r>=0;){for(let s=e;s;s=s._parent)if(s.index==i){if(i==this.index)return s;t=s,n=r+1;break e}i=this.stack[--r]}for(let i=n;i<this.stack.length;i++)t=new aR(this.buffer,t,this.stack[i]);return this.bufferNode=new aR(this.buffer,t,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,t){for(let n=0;;){let i=!1;if(this.type.isAnonymous||!1!==e(this)){if(this.firstChild()){n++;continue}this.type.isAnonymous||(i=!0)}for(;i&&t&&t(this),i=this.type.isAnonymous,!this.nextSibling();){if(!n)return;this.parent(),n--,i=!0}}}matchContext(e){if(!this.buffer)return sR(this.node,e);let{buffer:t}=this.buffer,{types:n}=t.set;for(let i=e.length-1,r=this.stack.length-1;i>=0;r--){if(r<0)return sR(this.node,e,i);let s=n[t.buffer[this.stack[r]]];if(!s.isAnonymous){if(e[i]&&e[i]!=s.name)return!1;i--}}return!0}}function uR(e){return e.children.some((e=>e instanceof ZI||!e.type.isAnonymous||uR(e)))}const dR=new WeakMap;function fR(e,t){if(!e.isAnonymous||t instanceof ZI||t.type!=e)return 1;let n=dR.get(t);if(null==n){n=1;for(let i of t.children){if(i.type!=e||!(i instanceof YI)){n=1;break}n+=fR(e,i)}dR.set(t,n)}return n}function pR(e,t,n,i,r,s,o,a,l){let c=0;for(let f=i;f<r;f++)c+=fR(e,t[f]);let h=Math.ceil(1.5*c/8),u=[],d=[];return function t(n,i,r,o,a){for(let c=r;c<o;){let r=c,f=i[c],p=fR(e,n[c]);for(c++;c<o;c++){let t=fR(e,n[c]);if(p+t>=h)break;p+=t}if(c==r+1){if(p>h){let e=n[r];t(e.children,e.positions,0,e.children.length,i[r]+a);continue}u.push(n[r])}else{let t=i[c-1]+n[c-1].length-f;u.push(pR(e,n,i,r,c,f,t,null,l))}d.push(f+a-s)}}(t,n,i,r,0),(a||l)(u,d,o)}class gR{startParse(e,t,n){return"string"==typeof e&&(e=new mR(e)),n=n?n.length?n.map((e=>new FI(e.from,e.to))):[new FI(0,0)]:[new FI(0,e.length)],this.createParse(e,t||[],n)}parse(e,t,n){let i=this.startParse(e,t,n);for(;;){let e=i.advance();if(e)return e}}}class mR{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,t){return this.string.slice(e,t)}}new qI({perNode:!0});class vR{constructor(e,t,n,i,r,s,o,a,l){let c=arguments.length>9&&void 0!==arguments[9]?arguments[9]:0,h=arguments.length>10?arguments[10]:void 0;this.p=e,this.stack=t,this.state=n,this.reducePos=i,this.pos=r,this.score=s,this.buffer=o,this.bufferBase=a,this.curContext=l,this.lookAhead=c,this.parent=h}toString(){return"[".concat(this.stack.filter(((e,t)=>t%3==0)).concat(this.state),"]@").concat(this.pos).concat(this.score?"!"+this.score:"")}static start(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=e.parser.context;return new vR(e,[],t,n,n,0,[],0,i?new yR(i,i.start):null,0,null)}get context(){return this.curContext?this.curContext.context:null}pushState(e,t){this.stack.push(this.state,t,this.bufferBase+this.buffer.length),this.state=e}reduce(e){var t;let n=e>>19,i=65535&e,{parser:r}=this.p;this.reducePos<this.pos-25&&this.setLookAhead(this.pos);let s=r.dynamicPrecedence(i);if(s&&(this.score+=s),0==n)return this.pushState(r.getGoto(this.state,i,!0),this.reducePos),i<r.minRepeatTerm&&this.storeNode(i,this.reducePos,this.reducePos,4,!0),void this.reduceContext(i,this.reducePos);let o=this.stack.length-3*(n-1)-(262144&e?6:0),a=o?this.stack[o-2]:this.p.ranges[0].from,l=this.reducePos-a;l>=2e3&&!(null===(t=this.p.parser.nodeSet.types[i])||void 0===t?void 0:t.isAnonymous)&&(a==this.p.lastBigReductionStart?(this.p.bigReductionCount++,this.p.lastBigReductionSize=l):this.p.lastBigReductionSize<l&&(this.p.bigReductionCount=1,this.p.lastBigReductionStart=a,this.p.lastBigReductionSize=l));let c=o?this.stack[o-1]:0,h=this.bufferBase+this.buffer.length-c;if(i<r.minRepeatTerm||131072&e){let e=r.stateFlag(this.state,1)?this.pos:this.reducePos;this.storeNode(i,a,e,h+4,!0)}if(262144&e)this.state=this.stack[o];else{let e=this.stack[o-3];this.state=r.getGoto(e,i,!0)}for(;this.stack.length>o;)this.stack.pop();this.reduceContext(i,a)}storeNode(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:4,r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(0==e&&(!this.stack.length||this.stack[this.stack.length-1]<this.buffer.length+this.bufferBase)){let e=this,i=this.buffer.length;if(0==i&&e.parent&&(i=e.bufferBase-e.parent.bufferBase,e=e.parent),i>0&&0==e.buffer[i-4]&&e.buffer[i-1]>-1){if(t==n)return;if(e.buffer[i-2]>=t)return void(e.buffer[i-2]=n)}}if(r&&this.pos!=n){let r=this.buffer.length;if(r>0&&0!=this.buffer[r-4])for(;r>0&&this.buffer[r-2]>n;)this.buffer[r]=this.buffer[r-4],this.buffer[r+1]=this.buffer[r-3],this.buffer[r+2]=this.buffer[r-2],this.buffer[r+3]=this.buffer[r-1],r-=4,i>4&&(i-=4);this.buffer[r]=e,this.buffer[r+1]=t,this.buffer[r+2]=n,this.buffer[r+3]=i}else this.buffer.push(e,t,n,i)}shift(e,t,n,i){if(131072&e)this.pushState(65535&e,this.pos);else if(0==(262144&e)){let r=e,{parser:s}=this.p;(i>this.pos||t<=s.maxNode)&&(this.pos=i,s.stateFlag(r,1)||(this.reducePos=i)),this.pushState(r,n),this.shiftContext(t,n),t<=s.maxNode&&this.buffer.push(t,n,i,4)}else this.pos=i,this.shiftContext(t,n),t<=this.p.parser.maxNode&&this.buffer.push(t,n,i,4)}apply(e,t,n,i){65536&e?this.reduce(e):this.shift(e,t,n,i)}useNode(e,t){let n=this.p.reused.length-1;(n<0||this.p.reused[n]!=e)&&(this.p.reused.push(e),n++);let i=this.pos;this.reducePos=this.pos=i+e.length,this.pushState(t,i),this.buffer.push(n,i,this.reducePos,-1),this.curContext&&this.updateContext(this.curContext.tracker.reuse(this.curContext.context,e,this,this.p.stream.reset(this.pos-e.length)))}split(){let e=this,t=e.buffer.length;for(;t>0&&e.buffer[t-2]>e.reducePos;)t-=4;let n=e.buffer.slice(t),i=e.bufferBase+t;for(;e&&i==e.bufferBase;)e=e.parent;return new vR(this.p,this.stack.slice(),this.state,this.reducePos,this.pos,this.score,n,i,this.curContext,this.lookAhead,e)}recoverByDelete(e,t){let n=e<=this.p.parser.maxNode;n&&this.storeNode(e,this.pos,t,4),this.storeNode(0,this.pos,t,n?8:4),this.pos=this.reducePos=t,this.score-=190}canShift(e){for(let t=new wR(this);;){let n=this.p.parser.stateSlot(t.state,4)||this.p.parser.hasAction(t.state,e);if(0==n)return!1;if(0==(65536&n))return!0;t.reduce(n)}}recoverByInsert(e){if(this.stack.length>=300)return[];let t=this.p.parser.nextStates(this.state);if(t.length>8||this.stack.length>=120){let n=[];for(let i,r=0;r<t.length;r+=2)(i=t[r+1])!=this.state&&this.p.parser.hasAction(i,e)&&n.push(t[r],i);if(this.stack.length<120)for(let e=0;n.length<8&&e<t.length;e+=2){let i=t[e+1];n.some(((e,t)=>1&t&&e==i))||n.push(t[e],i)}t=n}let n=[];for(let i=0;i<t.length&&n.length<4;i+=2){let e=t[i+1];if(e==this.state)continue;let r=this.split();r.pushState(e,this.pos),r.storeNode(0,r.pos,r.pos,4,!0),r.shiftContext(t[i],this.pos),r.reducePos=this.pos,r.score-=200,n.push(r)}return n}forceReduce(){let{parser:e}=this.p,t=e.stateSlot(this.state,5);if(0==(65536&t))return!1;if(!e.validAction(this.state,t)){let n=t>>19,i=65535&t,r=this.stack.length-3*n;if(r<0||e.getGoto(this.stack[r],i,!1)<0){let e=this.findForcedReduction();if(null==e)return!1;t=e}this.storeNode(0,this.pos,this.pos,4,!0),this.score-=100}return this.reducePos=this.pos,this.reduce(t),!0}findForcedReduction(){let{parser:e}=this.p,t=[],n=(i,r)=>{if(!t.includes(i))return t.push(i),e.allActions(i,(t=>{if(393216&t);else if(65536&t){let n=(t>>19)-r;if(n>1){let i=65535&t,r=this.stack.length-3*n;if(r>=0&&e.getGoto(this.stack[r],i,!1)>=0)return n<<19|65536|i}}else{let e=n(t,r+1);if(null!=e)return e}}))};return n(this.state,0)}forceAll(){for(;!this.p.parser.stateFlag(this.state,2);)if(!this.forceReduce()){this.storeNode(0,this.pos,this.pos,4,!0);break}return this}get deadEnd(){if(3!=this.stack.length)return!1;let{parser:e}=this.p;return 65535==e.data[e.stateSlot(this.state,1)]&&!e.stateSlot(this.state,4)}restart(){this.storeNode(0,this.pos,this.pos,4,!0),this.state=this.stack[0],this.stack.length=0}sameState(e){if(this.state!=e.state||this.stack.length!=e.stack.length)return!1;for(let t=0;t<this.stack.length;t+=3)if(this.stack[t]!=e.stack[t])return!1;return!0}get parser(){return this.p.parser}dialectEnabled(e){return this.p.parser.dialect.flags[e]}shiftContext(e,t){this.curContext&&this.updateContext(this.curContext.tracker.shift(this.curContext.context,e,this,this.p.stream.reset(t)))}reduceContext(e,t){this.curContext&&this.updateContext(this.curContext.tracker.reduce(this.curContext.context,e,this,this.p.stream.reset(t)))}emitContext(){let e=this.buffer.length-1;(e<0||-3!=this.buffer[e])&&this.buffer.push(this.curContext.hash,this.pos,this.pos,-3)}emitLookAhead(){let e=this.buffer.length-1;(e<0||-4!=this.buffer[e])&&this.buffer.push(this.lookAhead,this.pos,this.pos,-4)}updateContext(e){if(e!=this.curContext.context){let t=new yR(this.curContext.tracker,e);t.hash!=this.curContext.hash&&this.emitContext(),this.curContext=t}}setLookAhead(e){e>this.lookAhead&&(this.emitLookAhead(),this.lookAhead=e)}close(){this.curContext&&this.curContext.tracker.strict&&this.emitContext(),this.lookAhead>0&&this.emitLookAhead()}}class yR{constructor(e,t){this.tracker=e,this.context=t,this.hash=e.strict?e.hash(t):0}}class wR{constructor(e){this.start=e,this.state=e.state,this.stack=e.stack,this.base=this.stack.length}reduce(e){let t=65535&e,n=e>>19;0==n?(this.stack==this.start.stack&&(this.stack=this.stack.slice()),this.stack.push(this.state,0,0),this.base+=3):this.base-=3*(n-1);let i=this.start.p.parser.getGoto(this.stack[this.base-3],t,!0);this.state=i}}class bR{constructor(e,t,n){this.stack=e,this.pos=t,this.index=n,this.buffer=e.buffer,0==this.index&&this.maybeNext()}static create(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.bufferBase+e.buffer.length;return new bR(e,t,t-e.bufferBase)}maybeNext(){let e=this.stack.parent;null!=e&&(this.index=this.stack.bufferBase-e.bufferBase,this.stack=e,this.buffer=e.buffer)}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}next(){this.index-=4,this.pos-=4,0==this.index&&this.maybeNext()}fork(){return new bR(this.stack,this.pos,this.index)}}function OR(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Uint16Array;if("string"!=typeof e)return e;let n=null;for(let i=0,r=0;i<e.length;){let s=0;for(;;){let t=e.charCodeAt(i++),n=!1;if(126==t){s=65535;break}t>=92&&t--,t>=34&&t--;let r=t-32;if(r>=46&&(r-=46,n=!0),s+=r,n)break;s*=46}n?n[r++]=s:n=new t(s)}return n}class kR{constructor(){this.start=-1,this.value=-1,this.end=-1,this.extended=-1,this.lookAhead=0,this.mask=0,this.context=0}}const SR=new kR;class xR{constructor(e,t){this.input=e,this.ranges=t,this.chunk="",this.chunkOff=0,this.chunk2="",this.chunk2Pos=0,this.next=-1,this.token=SR,this.rangeIndex=0,this.pos=this.chunkPos=t[0].from,this.range=t[0],this.end=t[t.length-1].to,this.readNext()}resolveOffset(e,t){let n=this.range,i=this.rangeIndex,r=this.pos+e;for(;r<n.from;){if(!i)return null;let e=this.ranges[--i];r-=n.from-e.to,n=e}for(;t<0?r>n.to:r>=n.to;){if(i==this.ranges.length-1)return null;let e=this.ranges[++i];r+=e.from-n.to,n=e}return r}clipPos(e){if(e>=this.range.from&&e<this.range.to)return e;for(let t of this.ranges)if(t.to>e)return Math.max(e,t.from);return this.end}peek(e){let t,n,i=this.chunkOff+e;if(i>=0&&i<this.chunk.length)t=this.pos+e,n=this.chunk.charCodeAt(i);else{let i=this.resolveOffset(e,1);if(null==i)return-1;if(t=i,t>=this.chunk2Pos&&t<this.chunk2Pos+this.chunk2.length)n=this.chunk2.charCodeAt(t-this.chunk2Pos);else{let e=this.rangeIndex,i=this.range;for(;i.to<=t;)i=this.ranges[++e];this.chunk2=this.input.chunk(this.chunk2Pos=t),t+this.chunk2.length>i.to&&(this.chunk2=this.chunk2.slice(0,i.to-t)),n=this.chunk2.charCodeAt(0)}}return t>=this.token.lookAhead&&(this.token.lookAhead=t+1),n}acceptToken(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=t?this.resolveOffset(t,-1):this.pos;if(null==n||n<this.token.start)throw new RangeError("Token end out of bounds");this.token.value=e,this.token.end=n}acceptTokenTo(e,t){this.token.value=e,this.token.end=t}getChunk(){if(this.pos>=this.chunk2Pos&&this.pos<this.chunk2Pos+this.chunk2.length){let{chunk:e,chunkPos:t}=this;this.chunk=this.chunk2,this.chunkPos=this.chunk2Pos,this.chunk2=e,this.chunk2Pos=t,this.chunkOff=this.pos-this.chunkPos}else{this.chunk2=this.chunk,this.chunk2Pos=this.chunkPos;let e=this.input.chunk(this.pos),t=this.pos+e.length;this.chunk=t>this.range.to?e.slice(0,this.range.to-this.pos):e,this.chunkPos=this.pos,this.chunkOff=0}}readNext(){return this.chunkOff>=this.chunk.length&&(this.getChunk(),this.chunkOff==this.chunk.length)?this.next=-1:this.next=this.chunk.charCodeAt(this.chunkOff)}advance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;for(this.chunkOff+=e;this.pos+e>=this.range.to;){if(this.rangeIndex==this.ranges.length-1)return this.setDone();e-=this.range.to-this.pos,this.range=this.ranges[++this.rangeIndex],this.pos=this.range.from}return this.pos+=e,this.pos>=this.token.lookAhead&&(this.token.lookAhead=this.pos+1),this.readNext()}setDone(){return this.pos=this.chunkPos=this.end,this.range=this.ranges[this.rangeIndex=this.ranges.length-1],this.chunk="",this.next=-1}reset(e,t){if(t?(this.token=t,t.start=e,t.lookAhead=e+1,t.value=t.extended=-1):this.token=SR,this.pos!=e){if(this.pos=e,e==this.end)return this.setDone(),this;for(;e<this.range.from;)this.range=this.ranges[--this.rangeIndex];for(;e>=this.range.to;)this.range=this.ranges[++this.rangeIndex];e>=this.chunkPos&&e<this.chunkPos+this.chunk.length?this.chunkOff=e-this.chunkPos:(this.chunk="",this.chunkOff=0),this.readNext()}return this}read(e,t){if(e>=this.chunkPos&&t<=this.chunkPos+this.chunk.length)return this.chunk.slice(e-this.chunkPos,t-this.chunkPos);if(e>=this.chunk2Pos&&t<=this.chunk2Pos+this.chunk2.length)return this.chunk2.slice(e-this.chunk2Pos,t-this.chunk2Pos);if(e>=this.range.from&&t<=this.range.to)return this.input.read(e,t);let n="";for(let i of this.ranges){if(i.from>=t)break;i.to>e&&(n+=this.input.read(Math.max(i.from,e),Math.min(i.to,t)))}return n}}class TR{constructor(e,t){this.data=e,this.id=t}token(e,t){let{parser:n}=t.p;ER(this.data,e,t,this.id,n.data,n.tokenPrecTable)}}TR.prototype.contextual=TR.prototype.fallback=TR.prototype.extend=!1;TR.prototype.fallback=TR.prototype.extend=!1;class CR{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.token=e,this.contextual=!!t.contextual,this.fallback=!!t.fallback,this.extend=!!t.extend}}function ER(e,t,n,i,r,s){let o=0,a=1<<i,{dialect:l}=n.p.parser;e:for(;0!=(a&e[o]);){let n=e[o+1];for(let u=o+3;u<n;u+=2)if((e[u+1]&a)>0){let n=e[u];if(l.allows(n)&&(-1==t.token.value||t.token.value==n||AR(n,t.token.value,r,s))){t.acceptToken(n);break}}let i=t.next,c=0,h=e[o+2];if(!(t.next<0&&h>c&&65535==e[n+3*h-3])){for(;c<h;){let r=c+h>>1,s=n+r+(r<<1),a=e[s],l=e[s+1]||65536;if(i<a)h=r;else{if(!(i>=l)){o=e[s+2],t.advance();continue e}c=r+1}}break}o=e[n+3*h-1]}}function _R(e,t,n){for(let i,r=t;65535!=(i=e[r]);r++)if(i==n)return r-t;return-1}function AR(e,t,n,i){let r=_R(n,i,t);return r<0||_R(n,i,e)<r}const PR="undefined"!=typeof process&&{NODE_ENV:"production",PUBLIC_URL:"/DYA",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}&&/\bparse\b/.test({NODE_ENV:"production",PUBLIC_URL:"/DYA",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.LOG);let NR=null;function IR(e,t,n){let i=e.cursor(KI.IncludeAnonymous);for(i.moveTo(t);;)if(!(n<0?i.childBefore(t):i.childAfter(t)))for(;;){if((n<0?i.to<t:i.from>t)&&!i.type.isError)return n<0?Math.max(0,Math.min(i.to-1,t-25)):Math.min(e.length,Math.max(i.from+1,t+25));if(n<0?i.prevSibling():i.nextSibling())break;if(!i.parent())return n<0?0:e.length}}class RR{constructor(e,t){this.fragments=e,this.nodeSet=t,this.i=0,this.fragment=null,this.safeFrom=-1,this.safeTo=-1,this.trees=[],this.start=[],this.index=[],this.nextFragment()}nextFragment(){let e=this.fragment=this.i==this.fragments.length?null:this.fragments[this.i++];if(e){for(this.safeFrom=e.openStart?IR(e.tree,e.from+e.offset,1)-e.offset:e.from,this.safeTo=e.openEnd?IR(e.tree,e.to+e.offset,-1)-e.offset:e.to;this.trees.length;)this.trees.pop(),this.start.pop(),this.index.pop();this.trees.push(e.tree),this.start.push(-e.offset),this.index.push(0),this.nextStart=this.safeFrom}else this.nextStart=1e9}nodeAt(e){if(e<this.nextStart)return null;for(;this.fragment&&this.safeTo<=e;)this.nextFragment();if(!this.fragment)return null;for(;;){let t=this.trees.length-1;if(t<0)return this.nextFragment(),null;let n=this.trees[t],i=this.index[t];if(i==n.children.length){this.trees.pop(),this.start.pop(),this.index.pop();continue}let r=n.children[i],s=this.start[t]+n.positions[i];if(s>e)return this.nextStart=s,null;if(r instanceof YI){if(s==e){if(s<this.safeFrom)return null;let e=s+r.length;if(e<=this.safeTo){let t=r.prop(qI.lookAhead);if(!t||e+t<this.fragment.to)return r}}this.index[t]++,s+r.length>=Math.max(this.safeFrom,e)&&(this.trees.push(r),this.start.push(s),this.index.push(0))}else this.index[t]++,this.nextStart=s+r.length}}}class DR{constructor(e,t){this.stream=t,this.tokens=[],this.mainToken=null,this.actions=[],this.tokens=e.tokenizers.map((e=>new kR))}getActions(e){let t=0,n=null,{parser:i}=e.p,{tokenizers:r}=i,s=i.stateSlot(e.state,3),o=e.curContext?e.curContext.hash:0,a=0;for(let l=0;l<r.length;l++){if(0==(1<<l&s))continue;let i=r[l],c=this.tokens[l];if((!n||i.fallback)&&((i.contextual||c.start!=e.pos||c.mask!=s||c.context!=o)&&(this.updateCachedToken(c,i,e),c.mask=s,c.context=o),c.lookAhead>c.end+25&&(a=Math.max(c.lookAhead,a)),0!=c.value)){let r=t;if(c.extended>-1&&(t=this.addActions(e,c.extended,c.end,t)),t=this.addActions(e,c.value,c.end,t),!i.extend&&(n=c,t>r))break}}for(;this.actions.length>t;)this.actions.pop();return a&&e.setLookAhead(a),n||e.pos!=this.stream.end||(n=new kR,n.value=e.p.parser.eofTerm,n.start=n.end=e.pos,t=this.addActions(e,n.value,n.end,t)),this.mainToken=n,this.actions}getMainToken(e){if(this.mainToken)return this.mainToken;let t=new kR,{pos:n,p:i}=e;return t.start=n,t.end=Math.min(n+1,i.stream.end),t.value=n==i.stream.end?i.parser.eofTerm:0,t}updateCachedToken(e,t,n){let i=this.stream.clipPos(n.pos);if(t.token(this.stream.reset(i,e),n),e.value>-1){let{parser:t}=n.p;for(let i=0;i<t.specialized.length;i++)if(t.specialized[i]==e.value){let r=t.specializers[i](this.stream.read(e.start,e.end),n);if(r>=0&&n.p.parser.dialect.allows(r>>1)){0==(1&r)?e.value=r>>1:e.extended=r>>1;break}}}else e.value=0,e.end=this.stream.clipPos(i+1)}putAction(e,t,n,i){for(let r=0;r<i;r+=3)if(this.actions[r]==e)return i;return this.actions[i++]=e,this.actions[i++]=t,this.actions[i++]=n,i}addActions(e,t,n,i){let{state:r}=e,{parser:s}=e.p,{data:o}=s;for(let a=0;a<2;a++)for(let e=s.stateSlot(r,a?2:1);;e+=3){if(65535==o[e]){if(1!=o[e+1]){0==i&&2==o[e+1]&&(i=this.putAction(UR(o,e+2),t,n,i));break}e=UR(o,e+2)}o[e]==t&&(i=this.putAction(UR(o,e+1),t,n,i))}return i}}class MR{constructor(e,t,n,i){this.parser=e,this.input=t,this.ranges=i,this.recovering=0,this.nextStackID=9812,this.minStackPos=0,this.reused=[],this.stoppedAt=null,this.lastBigReductionStart=-1,this.lastBigReductionSize=0,this.bigReductionCount=0,this.stream=new xR(t,i),this.tokens=new DR(e,this.stream),this.topTerm=e.top[1];let{from:r}=i[0];this.stacks=[vR.start(this,e.top[0],r)],this.fragments=n.length&&this.stream.end-r>4*e.bufferLength?new RR(n,e.nodeSet):null}get parsedPos(){return this.minStackPos}advance(){let e,t,n=this.stacks,i=this.minStackPos,r=this.stacks=[];if(this.bigReductionCount>300&&1==n.length){let[e]=n;for(;e.forceReduce()&&e.stack.length&&e.stack[e.stack.length-2]>=this.lastBigReductionStart;);this.bigReductionCount=this.lastBigReductionSize=0}for(let s=0;s<n.length;s++){let o=n[s];for(;;){if(this.tokens.mainToken=null,o.pos>i)r.push(o);else{if(this.advanceStack(o,r,n))continue;{e||(e=[],t=[]),e.push(o);let n=this.tokens.getMainToken(o);t.push(n.value,n.end)}}break}}if(!r.length){let t=e&&function(e){let t=null;for(let n of e){let e=n.p.stoppedAt;(n.pos==n.p.stream.end||null!=e&&n.pos>e)&&n.p.parser.stateFlag(n.state,2)&&(!t||t.score<n.score)&&(t=n)}return t}(e);if(t)return PR&&console.log("Finish with "+this.stackID(t)),this.stackToTree(t);if(this.parser.strict)throw PR&&e&&console.log("Stuck with token "+(this.tokens.mainToken?this.parser.getName(this.tokens.mainToken.value):"none")),new SyntaxError("No parse at "+i);this.recovering||(this.recovering=5)}if(this.recovering&&e){let n=null!=this.stoppedAt&&e[0].pos>this.stoppedAt?e[0]:this.runRecovery(e,t,r);if(n)return PR&&console.log("Force-finish "+this.stackID(n)),this.stackToTree(n.forceAll())}if(this.recovering){let e=1==this.recovering?1:3*this.recovering;if(r.length>e)for(r.sort(((e,t)=>t.score-e.score));r.length>e;)r.pop();r.some((e=>e.reducePos>i))&&this.recovering--}else if(r.length>1){e:for(let e=0;e<r.length-1;e++){let t=r[e];for(let n=e+1;n<r.length;n++){let i=r[n];if(t.sameState(i)||t.buffer.length>500&&i.buffer.length>500){if(!((t.score-i.score||t.buffer.length-i.buffer.length)>0)){r.splice(e--,1);continue e}r.splice(n--,1)}}}r.length>12&&r.splice(12,r.length-12)}this.minStackPos=r[0].pos;for(let s=1;s<r.length;s++)r[s].pos<this.minStackPos&&(this.minStackPos=r[s].pos);return null}stopAt(e){if(null!=this.stoppedAt&&this.stoppedAt<e)throw new RangeError("Can't move stoppedAt forward");this.stoppedAt=e}advanceStack(e,t,n){let i=e.pos,{parser:r}=this,s=PR?this.stackID(e)+" -> ":"";if(null!=this.stoppedAt&&i>this.stoppedAt)return e.forceReduce()?e:null;if(this.fragments){let t=e.curContext&&e.curContext.tracker.strict,n=t?e.curContext.hash:0;for(let o=this.fragments.nodeAt(i);o;){let i=this.parser.nodeSet.types[o.type.id]==o.type?r.getGoto(e.state,o.type.id):-1;if(i>-1&&o.length&&(!t||(o.prop(qI.contextHash)||0)==n))return e.useNode(o,i),PR&&console.log(s+this.stackID(e)+" (via reuse of ".concat(r.getName(o.type.id),")")),!0;if(!(o instanceof YI)||0==o.children.length||o.positions[0]>0)break;let a=o.children[0];if(!(a instanceof YI&&0==o.positions[0]))break;o=a}}let o=r.stateSlot(e.state,4);if(o>0)return e.reduce(o),PR&&console.log(s+this.stackID(e)+" (via always-reduce ".concat(r.getName(65535&o),")")),!0;if(e.stack.length>=8400)for(;e.stack.length>6e3&&e.forceReduce(););let a=this.tokens.getActions(e);for(let l=0;l<a.length;){let o=a[l++],c=a[l++],h=a[l++],u=l==a.length||!n,d=u?e:e.split(),f=this.tokens.mainToken;if(d.apply(o,c,f?f.start:d.pos,h),PR&&console.log(s+this.stackID(d)+" (via ".concat(0==(65536&o)?"shift":"reduce of ".concat(r.getName(65535&o))," for ").concat(r.getName(c)," @ ").concat(i).concat(d==e?"":", split",")")),u)return!0;d.pos>i?t.push(d):n.push(d)}return!1}advanceFully(e,t){let n=e.pos;for(;;){if(!this.advanceStack(e,null,null))return!1;if(e.pos>n)return LR(e,t),!0}}runRecovery(e,t,n){let i=null,r=!1;for(let s=0;s<e.length;s++){let o=e[s],a=t[s<<1],l=t[1+(s<<1)],c=PR?this.stackID(o)+" -> ":"";if(o.deadEnd){if(r)continue;if(r=!0,o.restart(),PR&&console.log(c+this.stackID(o)+" (restarted)"),this.advanceFully(o,n))continue}let h=o.split(),u=c;for(let e=0;h.forceReduce()&&e<10;e++){if(PR&&console.log(u+this.stackID(h)+" (via force-reduce)"),this.advanceFully(h,n))break;PR&&(u=this.stackID(h)+" -> ")}for(let e of o.recoverByInsert(a))PR&&console.log(c+this.stackID(e)+" (via recover-insert)"),this.advanceFully(e,n);this.stream.end>o.pos?(l==o.pos&&(l++,a=0),o.recoverByDelete(a,l),PR&&console.log(c+this.stackID(o)+" (via recover-delete ".concat(this.parser.getName(a),")")),LR(o,n)):(!i||i.score<o.score)&&(i=o)}return i}stackToTree(e){return e.close(),YI.build({buffer:bR.create(e),nodeSet:this.parser.nodeSet,topID:this.topTerm,maxBufferLength:this.parser.bufferLength,reused:this.reused,start:this.ranges[0].from,length:e.pos-this.ranges[0].from,minRepeatType:this.parser.minRepeatTerm})}stackID(e){let t=(NR||(NR=new WeakMap)).get(e);return t||NR.set(e,t=String.fromCodePoint(this.nextStackID++)),t+e}}function LR(e,t){for(let n=0;n<t.length;n++){let i=t[n];if(i.pos==e.pos&&i.sameState(e))return void(t[n].score<e.score&&(t[n]=e))}t.push(e)}class QR{constructor(e,t,n){this.source=e,this.flags=t,this.disabled=n}allows(e){return!this.disabled||0==this.disabled[e]}}const zR=e=>e;class jR extends gR{constructor(e){if(super(),this.wrappers=[],14!=e.version)throw new RangeError("Parser version (".concat(e.version,") doesn't match runtime version (",14,")"));let t=e.nodeNames.split(" ");this.minRepeatTerm=t.length;for(let o=0;o<e.repeatNodeCount;o++)t.push("");let n=Object.keys(e.topRules).map((t=>e.topRules[t][1])),i=[];for(let o=0;o<t.length;o++)i.push([]);function r(e,t,n){i[e].push([t,t.deserialize(String(n))])}if(e.nodeProps)for(let o of e.nodeProps){let e=o[0];"string"==typeof e&&(e=qI[e]);for(let t=1;t<o.length;){let n=o[t++];if(n>=0)r(n,e,o[t++]);else{let i=o[t+-n];for(let s=-n;s>0;s--)r(o[t++],e,i);t++}}}this.nodeSet=new $I(t.map(((t,r)=>HI.define({name:r>=this.minRepeatTerm?void 0:t,id:r,props:i[r],top:n.indexOf(r)>-1,error:0==r,skipped:e.skippedNodes&&e.skippedNodes.indexOf(r)>-1})))),e.propSources&&(this.nodeSet=this.nodeSet.extend(...e.propSources)),this.strict=!1,this.bufferLength=UI;let s=OR(e.tokenData);this.context=e.context,this.specializerSpecs=e.specialized||[],this.specialized=new Uint16Array(this.specializerSpecs.length);for(let o=0;o<this.specializerSpecs.length;o++)this.specialized[o]=this.specializerSpecs[o].term;this.specializers=this.specializerSpecs.map(VR),this.states=OR(e.states,Uint32Array),this.data=OR(e.stateData),this.goto=OR(e.goto),this.maxTerm=e.maxTerm,this.tokenizers=e.tokenizers.map((e=>"number"==typeof e?new TR(s,e):e)),this.topRules=e.topRules,this.dialects=e.dialects||{},this.dynamicPrecedences=e.dynamicPrecedences||null,this.tokenPrecTable=e.tokenPrec,this.termNames=e.termNames||null,this.maxNode=this.nodeSet.types.length-1,this.dialect=this.parseDialect(),this.top=this.topRules[Object.keys(this.topRules)[0]]}createParse(e,t,n){let i=new MR(this,e,t,n);for(let r of this.wrappers)i=r(i,e,t,n);return i}getGoto(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=this.goto;if(t>=i[0])return-1;for(let r=i[t+1];;){let t=i[r++],s=1&t,o=i[r++];if(s&&n)return o;for(let n=r+(t>>1);r<n;r++)if(i[r]==e)return o;if(s)return-1}}hasAction(e,t){let n=this.data;for(let i=0;i<2;i++)for(let r,s=this.stateSlot(e,i?2:1);;s+=3){if(65535==(r=n[s])){if(1!=n[s+1]){if(2==n[s+1])return UR(n,s+2);break}r=n[s=UR(n,s+2)]}if(r==t||0==r)return UR(n,s+1)}return 0}stateSlot(e,t){return this.states[6*e+t]}stateFlag(e,t){return(this.stateSlot(e,0)&t)>0}validAction(e,t){return!!this.allActions(e,(e=>e==t||null))}allActions(e,t){let n=this.stateSlot(e,4),i=n?t(n):void 0;for(let r=this.stateSlot(e,1);null==i;r+=3){if(65535==this.data[r]){if(1!=this.data[r+1])break;r=UR(this.data,r+2)}i=t(UR(this.data,r+1))}return i}nextStates(e){let t=[];for(let n=this.stateSlot(e,1);;n+=3){if(65535==this.data[n]){if(1!=this.data[n+1])break;n=UR(this.data,n+2)}if(0==(1&this.data[n+2])){let e=this.data[n+1];t.some(((t,n)=>1&n&&t==e))||t.push(this.data[n],e)}}return t}configure(e){let t=Object.assign(Object.create(jR.prototype),this);if(e.props&&(t.nodeSet=this.nodeSet.extend(...e.props)),e.top){let n=this.topRules[e.top];if(!n)throw new RangeError("Invalid top rule name ".concat(e.top));t.top=n}return e.tokenizers&&(t.tokenizers=this.tokenizers.map((t=>{let n=e.tokenizers.find((e=>e.from==t));return n?n.to:t}))),e.specializers&&(t.specializers=this.specializers.slice(),t.specializerSpecs=this.specializerSpecs.map(((n,i)=>{let r=e.specializers.find((e=>e.from==n.external));if(!r)return n;let s=Object.assign(Object.assign({},n),{external:r.to});return t.specializers[i]=VR(s),s}))),e.contextTracker&&(t.context=e.contextTracker),e.dialect&&(t.dialect=this.parseDialect(e.dialect)),null!=e.strict&&(t.strict=e.strict),e.wrap&&(t.wrappers=t.wrappers.concat(e.wrap)),null!=e.bufferLength&&(t.bufferLength=e.bufferLength),t}hasWrappers(){return this.wrappers.length>0}getName(e){return this.termNames?this.termNames[e]:String(e<=this.maxNode&&this.nodeSet.types[e].name||e)}get eofTerm(){return this.maxNode+1}get topNode(){return this.nodeSet.types[this.top[1]]}dynamicPrecedence(e){let t=this.dynamicPrecedences;return null==t?0:t[e]||0}parseDialect(e){let t=Object.keys(this.dialects),n=t.map((()=>!1));if(e)for(let r of e.split(" ")){let e=t.indexOf(r);e>=0&&(n[e]=!0)}let i=null;for(let r=0;r<t.length;r++)if(!n[r])for(let e,n=this.dialects[t[r]];65535!=(e=this.data[n++]);)(i||(i=new Uint8Array(this.maxTerm+1)))[e]=1;return new QR(e,n,i)}static deserialize(e){return new jR(e)}}function UR(e,t){return e[t]|e[t+1]<<16}function VR(e){if(e.external){let t=e.extend?1:0;return(n,i)=>e.external(n,i)<<1|t}return e.get}let FR=0;class qR{constructor(e,t,n){this.set=e,this.base=t,this.modified=n,this.id=FR++}static define(e){if(null===e||void 0===e?void 0:e.base)throw new Error("Can not derive from a modified tag");let t=new qR([],null,[]);if(t.set.push(t),e)for(let n of e.set)t.set.push(n);return t}static defineModifier(){let e=new WR;return t=>t.modified.indexOf(e)>-1?t:WR.get(t.base||t,t.modified.concat(e).sort(((e,t)=>e.id-t.id)))}}let BR=0;class WR{constructor(){this.instances=[],this.id=BR++}static get(e,t){if(!t.length)return e;let n=t[0].instances.find((n=>n.base==e&&function(e,t){return e.length==t.length&&e.every(((e,n)=>e==t[n]))}(t,n.modified)));if(n)return n;let i=[],r=new qR(i,e,t);for(let o of t)o.instances.push(r);let s=function(e){let t=[[]];for(let n=0;n<e.length;n++)for(let i=0,r=t.length;i<r;i++)t.push(t[i].concat(e[n]));return t.sort(((e,t)=>t.length-e.length))}(t);for(let o of e.set)if(!o.modified.length)for(let e of s)i.push(WR.get(o,e));return r}}const HR=new qI;class $R{constructor(e,t,n,i){this.tags=e,this.mode=t,this.context=n,this.next=i}get opaque(){return 0==this.mode}get inherit(){return 1==this.mode}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}$R.empty=new $R([],2,null);const XR=qR.define,GR=XR(),KR=XR(),YR=XR(KR),JR=XR(KR),ZR=XR(),eD=XR(ZR),tD=XR(ZR),nD=XR(),iD=XR(nD),rD=XR(),sD=XR(),oD=XR(),aD=XR(oD),lD=XR(),cD={comment:GR,lineComment:XR(GR),blockComment:XR(GR),docComment:XR(GR),name:KR,variableName:XR(KR),typeName:YR,tagName:XR(YR),propertyName:JR,attributeName:XR(JR),className:XR(KR),labelName:XR(KR),namespace:XR(KR),macroName:XR(KR),literal:ZR,string:eD,docString:XR(eD),character:XR(eD),attributeValue:XR(eD),number:tD,integer:XR(tD),float:XR(tD),bool:XR(ZR),regexp:XR(ZR),escape:XR(ZR),color:XR(ZR),url:XR(ZR),keyword:rD,self:XR(rD),null:XR(rD),atom:XR(rD),unit:XR(rD),modifier:XR(rD),operatorKeyword:XR(rD),controlKeyword:XR(rD),definitionKeyword:XR(rD),moduleKeyword:XR(rD),operator:sD,derefOperator:XR(sD),arithmeticOperator:XR(sD),logicOperator:XR(sD),bitwiseOperator:XR(sD),compareOperator:XR(sD),updateOperator:XR(sD),definitionOperator:XR(sD),typeOperator:XR(sD),controlOperator:XR(sD),punctuation:oD,separator:XR(oD),bracket:aD,angleBracket:XR(aD),squareBracket:XR(aD),paren:XR(aD),brace:XR(aD),content:nD,heading:iD,heading1:XR(iD),heading2:XR(iD),heading3:XR(iD),heading4:XR(iD),heading5:XR(iD),heading6:XR(iD),contentSeparator:XR(nD),list:XR(nD),quote:XR(nD),emphasis:XR(nD),strong:XR(nD),link:XR(nD),monospace:XR(nD),strikethrough:XR(nD),inserted:XR(),deleted:XR(),changed:XR(),invalid:XR(),meta:lD,documentMeta:XR(lD),annotation:XR(lD),processingInstruction:XR(lD),definition:qR.defineModifier(),constant:qR.defineModifier(),function:qR.defineModifier(),standard:qR.defineModifier(),local:qR.defineModifier(),special:qR.defineModifier()},hD=(function(e,t){let n=Object.create(null);for(let s of e)if(Array.isArray(s.tag))for(let e of s.tag)n[e.id]=s.class;else n[s.tag.id]=s.class;let{scope:i,all:r=null}=t||{}}([{tag:cD.link,class:"tok-link"},{tag:cD.heading,class:"tok-heading"},{tag:cD.emphasis,class:"tok-emphasis"},{tag:cD.strong,class:"tok-strong"},{tag:cD.keyword,class:"tok-keyword"},{tag:cD.atom,class:"tok-atom"},{tag:cD.bool,class:"tok-bool"},{tag:cD.url,class:"tok-url"},{tag:cD.labelName,class:"tok-labelName"},{tag:cD.inserted,class:"tok-inserted"},{tag:cD.deleted,class:"tok-deleted"},{tag:cD.literal,class:"tok-literal"},{tag:cD.string,class:"tok-string"},{tag:cD.number,class:"tok-number"},{tag:[cD.regexp,cD.escape,cD.special(cD.string)],class:"tok-string2"},{tag:cD.variableName,class:"tok-variableName"},{tag:cD.local(cD.variableName),class:"tok-variableName tok-local"},{tag:cD.definition(cD.variableName),class:"tok-variableName tok-definition"},{tag:cD.special(cD.variableName),class:"tok-variableName2"},{tag:cD.definition(cD.propertyName),class:"tok-propertyName tok-definition"},{tag:cD.typeName,class:"tok-typeName"},{tag:cD.namespace,class:"tok-namespace"},{tag:cD.className,class:"tok-className"},{tag:cD.macroName,class:"tok-macroName"},{tag:cD.propertyName,class:"tok-propertyName"},{tag:cD.operator,class:"tok-operator"},{tag:cD.comment,class:"tok-comment"},{tag:cD.meta,class:"tok-meta"},{tag:cD.invalid,class:"tok-invalid"},{tag:cD.punctuation,class:"tok-punctuation"}]),10),uD=new Set([25,49,50,263,65,130,56,57,238,62,63,72,73,77,60,61,151,152,155,112]);function dD(e){return e==hD||13==e}function fD(e){return e>=48&&e<=57||e>=65&&e<=70||e>=97&&e<=102}const pD=new CR(((e,t)=>{let n;if(e.next<0)e.acceptToken(199);else if(t.context.flags&mD)dD(e.next)&&e.acceptToken(198,1);else if(((n=e.peek(-1))<0||dD(n))&&t.canShift(197)){let t=0;for(;32==e.next||9==e.next;)e.advance(),t++;e.next!=hD&&13!=e.next&&35!=e.next||e.acceptToken(197,-t)}else dD(e.next)&&e.acceptToken(196,1)}),{contextual:!0}),gD=new CR(((e,t)=>{let n=t.context;if(n.flags)return;let i=e.peek(-1);if(i==hD||13==i){let t=0,i=0;for(;;){if(32==e.next)t++;else{if(9!=e.next)break;t+=8-t%8}e.advance(),i++}t!=n.indent&&e.next!=hD&&13!=e.next&&35!=e.next&&(t<n.indent?e.acceptToken(195,-i):e.acceptToken(194))}})),mD=1,vD=4,yD=8,wD=16,bD=32;function OD(e,t,n){this.parent=e,this.indent=t,this.flags=n,this.hash=(e?e.hash+e.hash<<8:0)+t+(t<<4)+n+(n<<6)}const kD=new OD(null,0,0);const SD=new Map([[241,0],[242,vD],[243,yD],[244,yD|vD],[245,wD],[246,wD|vD],[247,wD|yD],[248,wD|yD|vD],[249,bD],[250,bD|vD],[251,bD|yD],[252,bD|yD|vD],[253,bD|wD],[254,bD|wD|vD],[255,bD|wD|yD],[256,bD|wD|yD|vD]].map((e=>{let[t,n]=e;return[t,2|n]}))),xD=new class{constructor(e){this.start=e.start,this.shift=e.shift||zR,this.reduce=e.reduce||zR,this.reuse=e.reuse||zR,this.hash=e.hash||(()=>0),this.strict=!1!==e.strict}}({start:kD,reduce:(e,t,n,i)=>e.flags&mD&&uD.has(t)||(71==t||72==t)&&2&e.flags?e.parent:e,shift:(e,t,n,i)=>194==t?new OD(e,function(e){let t=0;for(let n=0;n<e.length;n++)t+=9==e.charCodeAt(n)?8-t%8:1;return t}(i.read(i.pos,n.pos)),0):195==t?e.parent:24==t||55==t||59==t||3==t?new OD(e,0,mD):SD.has(t)?new OD(e,0,SD.get(t)|e.flags&mD):e,hash:e=>e.hash}),TD=new CR((e=>{for(let t=0;t<5;t++){if(e.next!="print".charCodeAt(t))return;e.advance()}if(!/\w/.test(String.fromCharCode(e.next)))for(let t=0;;t++){let n=e.peek(t);if(32!=n&&9!=n)return void(40!=n&&46!=n&&n!=hD&&13!=n&&35!=n&&e.acceptToken(1))}})),CD=new CR(((e,t)=>{let{flags:n}=t.context,i=n&vD?34:39,r=(n&yD)>0,s=!(n&wD),o=(n&bD)>0,a=e.pos;for(;!(e.next<0);)if(o&&123==e.next){if(123!=e.peek(1)){if(e.pos==a)return void e.acceptToken(3,1);break}e.advance(2)}else{if(s&&92==e.next){if(e.pos==a){e.advance();let t=e.next;return t>=0&&(e.advance(),ED(e,t)),void e.acceptToken(2)}break}if(e.next==i&&(!r||e.peek(1)==i&&e.peek(2)==i)){if(e.pos==a)return void e.acceptToken(201,r?3:1);break}if(e.next==hD){if(r)e.advance();else if(e.pos==a)return void e.acceptToken(201);break}e.advance()}e.pos>a&&e.acceptToken(200)}));function ED(e,t){if(111==t)for(let n=0;n<2&&e.next>=48&&e.next<=55;n++)e.advance();else if(120==t)for(let n=0;n<2&&fD(e.next);n++)e.advance();else if(117==t)for(let n=0;n<4&&fD(e.next);n++)e.advance();else if(85==t)for(let n=0;n<8&&fD(e.next);n++)e.advance();else if(78==t&&123==e.next){for(e.advance();e.next>=0&&125!=e.next&&39!=e.next&&34!=e.next&&e.next!=hD;)e.advance();125==e.next&&e.advance()}}const _D=function(e){let t=Object.create(null);for(let n in e){let i=e[n];Array.isArray(i)||(i=[i]);for(let e of n.split(" "))if(e){let n=[],r=2,s=e;for(let t=0;;){if("..."==s&&t>0&&t+3==e.length){r=1;break}let i=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(s);if(!i)throw new RangeError("Invalid path: "+e);if(n.push("*"==i[0]?"":'"'==i[0][0]?JSON.parse(i[0]):i[0]),t+=i[0].length,t==e.length)break;let o=e[t++];if(t==e.length&&"!"==o){r=0;break}if("/"!=o)throw new RangeError("Invalid path: "+e);s=e.slice(t)}let o=n.length-1,a=n[o];if(!a)throw new RangeError("Invalid path: "+e);let l=new $R(i,r,o>0?n.slice(0,o):null);t[a]=l.sort(t[a])}}return HR.add(t)}({'async "*" "**" FormatConversion FormatSpec':cD.modifier,"for while if elif else try except finally return raise break continue with pass assert await yield match case":cD.controlKeyword,"in not and or is del":cD.operatorKeyword,"from def class global nonlocal lambda":cD.definitionKeyword,import:cD.moduleKeyword,"with as print":cD.keyword,Boolean:cD.bool,None:cD.null,VariableName:cD.variableName,"CallExpression/VariableName":cD.function(cD.variableName),"FunctionDefinition/VariableName":cD.function(cD.definition(cD.variableName)),"ClassDefinition/VariableName":cD.definition(cD.className),PropertyName:cD.propertyName,"CallExpression/MemberExpression/PropertyName":cD.function(cD.propertyName),Comment:cD.lineComment,Number:cD.number,String:cD.string,FormatString:cD.special(cD.string),Escape:cD.escape,UpdateOp:cD.updateOperator,"ArithOp!":cD.arithmeticOperator,BitOp:cD.bitwiseOperator,CompareOp:cD.compareOperator,AssignOp:cD.definitionOperator,Ellipsis:cD.punctuation,At:cD.meta,"( )":cD.paren,"[ ]":cD.squareBracket,"{ }":cD.brace,".":cD.derefOperator,", ;":cD.separator}),AD={__proto__:null,await:44,or:54,and:56,in:60,not:62,is:64,if:70,else:72,lambda:76,yield:94,from:96,async:102,for:104,None:162,True:164,False:164,del:178,pass:182,break:186,continue:190,return:194,raise:202,import:206,as:208,global:212,nonlocal:214,assert:218,type:223,elif:236,while:240,try:246,except:248,finally:250,with:254,def:258,class:268,match:279,case:285},PD=jR.deserialize({version:14,states:"##jO`QeOOP$}OSOOO&WQtO'#HUOOQS'#Co'#CoOOQS'#Cp'#CpO'vQdO'#CnO*UQtO'#HTOOQS'#HU'#HUOOQS'#DU'#DUOOQS'#HT'#HTO*rQdO'#D_O+VQdO'#DfO+gQdO'#DjO+zOWO'#DuO,VOWO'#DvO.[QtO'#GuOOQS'#Gu'#GuO'vQdO'#GtO0ZQtO'#GtOOQS'#Eb'#EbO0rQdO'#EcOOQS'#Gs'#GsO0|QdO'#GrOOQV'#Gr'#GrO1XQdO'#FYOOQS'#G^'#G^O1^QdO'#FXOOQV'#IS'#ISOOQV'#Gq'#GqOOQV'#Fq'#FqQ`QeOOO'vQdO'#CqO1lQdO'#C}O1sQdO'#DRO2RQdO'#HYO2cQtO'#EVO'vQdO'#EWOOQS'#EY'#EYOOQS'#E['#E[OOQS'#E^'#E^O2wQdO'#E`O3_QdO'#EdO3rQdO'#EfO3zQtO'#EfO1XQdO'#EiO0rQdO'#ElO1XQdO'#EnO0rQdO'#EtO0rQdO'#EwO4VQdO'#EyO4^QdO'#FOO4iQdO'#EzO0rQdO'#FOO1XQdO'#FQO1XQdO'#FVO4nQdO'#F[P4uOdO'#GpPOOO)CBd)CBdOOQS'#Ce'#CeOOQS'#Cf'#CfOOQS'#Cg'#CgOOQS'#Ch'#ChOOQS'#Ci'#CiOOQS'#Cj'#CjOOQS'#Cl'#ClO'vQdO,59OO'vQdO,59OO'vQdO,59OO'vQdO,59OO'vQdO,59OO'vQdO,59OO5QQdO'#DoOOQS,5:Y,5:YO5eQdO'#HdOOQS,5:],5:]O5rQ!fO,5:]O5wQtO,59YO1lQdO,59bO1lQdO,59bO1lQdO,59bO8gQdO,59bO8lQdO,59bO8sQdO,59jO8zQdO'#HTO:QQdO'#HSOOQS'#HS'#HSOOQS'#D['#D[O:iQdO,59aO'vQdO,59aO:wQdO,59aOOQS,59y,59yO:|QdO,5:RO'vQdO,5:ROOQS,5:Q,5:QO;[QdO,5:QO;aQdO,5:XO'vQdO,5:XO'vQdO,5:VOOQS,5:U,5:UO;rQdO,5:UO;wQdO,5:WOOOW'#Fy'#FyO;|OWO,5:aOOQS,5:a,5:aO<XQdO'#HwOOOW'#Dw'#DwOOOW'#Fz'#FzO<iOWO,5:bOOQS,5:b,5:bOOQS'#F}'#F}O<wQtO,5:iO?iQtO,5=`O@SQ#xO,5=`O@sQtO,5=`OOQS,5:},5:}OA[QeO'#GWOBnQdO,5;^OOQV,5=^,5=^OByQtO'#IPOChQdO,5;tOOQS-E:[-E:[OOQV,5;s,5;sO4dQdO'#FQOOQV-E9o-E9oOCpQtO,59]OEwQtO,59iOFbQdO'#HVOFmQdO'#HVO1XQdO'#HVOFxQdO'#DTOGQQdO,59mOGVQdO'#HZO'vQdO'#HZO0rQdO,5=tOOQS,5=t,5=tO0rQdO'#EROOQS'#ES'#ESOGtQdO'#GPOHUQdO,58|OHUQdO,58|O*xQdO,5:oOHdQtO'#H]OOQS,5:r,5:rOOQS,5:z,5:zOHwQdO,5;OOIYQdO'#IOO1XQdO'#H}OOQS,5;Q,5;QOOQS'#GT'#GTOInQtO,5;QOI|QdO,5;QOJRQdO'#IQOOQS,5;T,5;TOJaQdO'#H|OOQS,5;W,5;WOJrQdO,5;YO4iQdO,5;`O4iQdO,5;cOJzQtO'#ITO'vQdO'#ITOKUQdO,5;eO4VQdO,5;eO0rQdO,5;jO1XQdO,5;lOKZQeO'#EuOLgQgO,5;fO!!hQdO'#IUO4iQdO,5;jO!!sQdO,5;lO!!{QdO,5;qO!#WQtO,5;vO'vQdO,5;vPOOO,5=[,5=[P!#_OSO,5=[P!#dOdO,5=[O!&XQtO1G.jO!&`QtO1G.jO!)PQtO1G.jO!)ZQtO1G.jO!+tQtO1G.jO!,XQtO1G.jO!,lQdO'#HcO!,zQtO'#GuO0rQdO'#HcO!-UQdO'#HbOOQS,5:Z,5:ZO!-^QdO,5:ZO!-cQdO'#HeO!-nQdO'#HeO!.RQdO,5>OOOQS'#Ds'#DsOOQS1G/w1G/wOOQS1G.|1G.|O!/RQtO1G.|O!/YQtO1G.|O1lQdO1G.|O!/uQdO1G/UOOQS'#DZ'#DZO0rQdO,59tOOQS1G.{1G.{O!/|QdO1G/eO!0^QdO1G/eO!0fQdO1G/fO'vQdO'#H[O!0kQdO'#H[O!0pQtO1G.{O!1QQdO,59iO!2WQdO,5=zO!2hQdO,5=zO!2pQdO1G/mO!2uQtO1G/mOOQS1G/l1G/lO!3VQdO,5=uO!3|QdO,5=uO0rQdO1G/qO!4kQdO1G/sO!4pQtO1G/sO!5QQtO1G/qOOQS1G/p1G/pOOQS1G/r1G/rOOOW-E9w-E9wOOQS1G/{1G/{O!5bQdO'#HxO0rQdO'#HxO!5sQdO,5>cOOOW-E9x-E9xOOQS1G/|1G/|OOQS-E9{-E9{O!6RQ#xO1G2zO!6rQtO1G2zO'vQdO,5<jOOQS,5<j,5<jOOQS-E9|-E9|OOQS,5<r,5<rOOQS-E:U-E:UOOQV1G0x1G0xO1XQdO'#GRO!7ZQtO,5>kOOQS1G1`1G1`O!7xQdO1G1`OOQS'#DV'#DVO0rQdO,5=qOOQS,5=q,5=qO!7}QdO'#FrO!8YQdO,59oO!8bQdO1G/XO!8lQtO,5=uOOQS1G3`1G3`OOQS,5:m,5:mO!9]QdO'#GtOOQS,5<k,5<kOOQS-E9}-E9}O!9nQdO1G.hOOQS1G0Z1G0ZO!9|QdO,5=wO!:^QdO,5=wO0rQdO1G0jO0rQdO1G0jO!:oQdO,5>jO!;QQdO,5>jO1XQdO,5>jO!;cQdO,5>iOOQS-E:R-E:RO!;hQdO1G0lO!;sQdO1G0lO!;xQdO,5>lO!<WQdO,5>lO!<fQdO,5>hO!<|QdO,5>hO!=_QdO'#EpO0rQdO1G0tO!=jQdO1G0tO!=oQgO1G0zO!AmQgO1G0}O!EhQdO,5>oO!ErQdO,5>oO!EzQtO,5>oO0rQdO1G1PO!FUQdO1G1PO4iQdO1G1UO!!sQdO1G1WOOQV,5;a,5;aO!FZQfO,5;aO!F`QgO1G1QO!JaQdO'#GZO4iQdO1G1QO4iQdO1G1QO!JqQdO,5>pO!KOQdO,5>pO1XQdO,5>pOOQV1G1U1G1UO!KWQdO'#FSO!KiQ!fO1G1WO!KqQdO1G1WOOQV1G1]1G1]O4iQdO1G1]O!KvQdO1G1]O!LOQdO'#F^OOQV1G1b1G1bO!#WQtO1G1bPOOO1G2v1G2vP!LTOSO1G2vOOQS,5=},5=}OOQS'#Dp'#DpO0rQdO,5=}O!LYQdO,5=|O!LmQdO,5=|OOQS1G/u1G/uO!LuQdO,5>PO!MVQdO,5>PO!M_QdO,5>PO!MrQdO,5>PO!NSQdO,5>POOQS1G3j1G3jOOQS7+$h7+$hO!8bQdO7+$pO# uQdO1G.|O# |QdO1G.|OOQS1G/`1G/`OOQS,5<`,5<`O'vQdO,5<`OOQS7+%P7+%PO#!TQdO7+%POOQS-E9r-E9rOOQS7+%Q7+%QO#!eQdO,5=vO'vQdO,5=vOOQS7+$g7+$gO#!jQdO7+%PO#!rQdO7+%QO#!wQdO1G3fOOQS7+%X7+%XO##XQdO1G3fO##aQdO7+%XOOQS,5<_,5<_O'vQdO,5<_O##fQdO1G3aOOQS-E9q-E9qO#$]QdO7+%]OOQS7+%_7+%_O#$kQdO1G3aO#%YQdO7+%_O#%_QdO1G3gO#%oQdO1G3gO#%wQdO7+%]O#%|QdO,5>dO#&gQdO,5>dO#&gQdO,5>dOOQS'#Dx'#DxO#&xO&jO'#DzO#'TO`O'#HyOOOW1G3}1G3}O#'YQdO1G3}O#'bQdO1G3}O#'mQ#xO7+(fO#(^QtO1G2UP#(wQdO'#GOOOQS,5<m,5<mOOQS-E:P-E:POOQS7+&z7+&zOOQS1G3]1G3]OOQS,5<^,5<^OOQS-E9p-E9pOOQS7+$s7+$sO#)UQdO,5=`O#)oQdO,5=`O#*QQtO,5<aO#*eQdO1G3cOOQS-E9s-E9sOOQS7+&U7+&UO#*uQdO7+&UO#+TQdO,5<nO#+iQdO1G4UOOQS-E:Q-E:QO#+zQdO1G4UOOQS1G4T1G4TOOQS7+&W7+&WO#,]QdO7+&WOOQS,5<p,5<pO#,hQdO1G4WOOQS-E:S-E:SOOQS,5<l,5<lO#,vQdO1G4SOOQS-E:O-E:OO1XQdO'#EqO#-^QdO'#EqO#-iQdO'#IRO#-qQdO,5;[OOQS7+&`7+&`O0rQdO7+&`O#-vQgO7+&fO!JdQdO'#GXO4iQdO7+&fO4iQdO7+&iO#1tQtO,5<tO'vQdO,5<tO#2OQdO1G4ZOOQS-E:W-E:WO#2YQdO1G4ZO4iQdO7+&kO0rQdO7+&kOOQV7+&p7+&pO!KiQ!fO7+&rO!KqQdO7+&rO`QeO1G0{OOQV-E:X-E:XO4iQdO7+&lO4iQdO7+&lOOQV,5<u,5<uO#2bQdO,5<uO!JdQdO,5<uOOQV7+&l7+&lO#2mQgO7+&lO#6hQdO,5<vO#6sQdO1G4[OOQS-E:Y-E:YO#7QQdO1G4[O#7YQdO'#IWO#7hQdO'#IWO1XQdO'#IWOOQS'#IW'#IWO#7sQdO'#IVOOQS,5;n,5;nO#7{QdO,5;nO0rQdO'#FUOOQV7+&r7+&rO4iQdO7+&rOOQV7+&w7+&wO4iQdO7+&wO#8QQfO,5;xOOQV7+&|7+&|POOO7+(b7+(bO#8VQdO1G3iOOQS,5<c,5<cO#8eQdO1G3hOOQS-E9u-E9uO#8xQdO,5<dO#9TQdO,5<dO#9hQdO1G3kOOQS-E9v-E9vO#9xQdO1G3kO#:QQdO1G3kO#:bQdO1G3kO#9xQdO1G3kOOQS<<H[<<H[O#:mQtO1G1zOOQS<<Hk<<HkP#:zQdO'#FtO8sQdO1G3bO#;XQdO1G3bO#;^QdO<<HkOOQS<<Hl<<HlO#;nQdO7+)QOOQS<<Hs<<HsO#<OQtO1G1yP#<oQdO'#FsO#<|QdO7+)RO#=^QdO7+)RO#=fQdO<<HwO#=kQdO7+({OOQS<<Hy<<HyO#>bQdO,5<bO'vQdO,5<bOOQS-E9t-E9tOOQS<<Hw<<HwOOQS,5<g,5<gO0rQdO,5<gO#>gQdO1G4OOOQS-E9y-E9yO#?QQdO1G4OO<XQdO'#H{OOOO'#D{'#D{OOOO'#F|'#F|O#?cO&jO,5:fOOOW,5>e,5>eOOOW7+)i7+)iO#?nQdO7+)iO#?vQdO1G2zO#@aQdO1G2zP'vQdO'#FuO0rQdO<<IpO1XQdO1G2YP1XQdO'#GSO#@rQdO7+)pO#ATQdO7+)pOOQS<<Ir<<IrP1XQdO'#GUP0rQdO'#GQOOQS,5;],5;]O#AfQdO,5>mO#AtQdO,5>mOOQS1G0v1G0vOOQS<<Iz<<IzOOQV-E:V-E:VO4iQdO<<JQOOQV,5<s,5<sO4iQdO,5<sOOQV<<JQ<<JQOOQV<<JT<<JTO#A|QtO1G2`P#BWQdO'#GYO#B_QdO7+)uO#BiQgO<<JVO4iQdO<<JVOOQV<<J^<<J^O4iQdO<<J^O!KiQ!fO<<J^O#FdQgO7+&gOOQV<<JW<<JWO#FnQgO<<JWOOQV1G2a1G2aO1XQdO1G2aO#JiQdO1G2aO4iQdO<<JWO1XQdO1G2bP0rQdO'#G[O#JtQdO7+)vO#KRQdO7+)vOOQS'#FT'#FTO0rQdO,5>rO#KZQdO,5>rOOQS,5>r,5>rO#KfQdO,5>qO#KwQdO,5>qOOQS1G1Y1G1YOOQS,5;p,5;pOOQV<<Jc<<JcO#LPQdO1G1dOOQS7+)T7+)TP#LUQdO'#FwO#LfQdO1G2OO#LyQdO1G2OO#MZQdO1G2OP#MfQdO'#FxO#MsQdO7+)VO#NTQdO7+)VO#NTQdO7+)VO#N]QdO7+)VO#NmQdO7+(|O8sQdO7+(|OOQSAN>VAN>VO$ WQdO<<LmOOQSAN>cAN>cO0rQdO1G1|O$ hQtO1G1|P$ rQdO'#FvOOQS1G2R1G2RP$!PQdO'#F{O$!^QdO7+)jO$!wQdO,5>gOOOO-E9z-E9zOOOW<<MT<<MTO$#VQdO7+(fOOQSAN?[AN?[OOQS7+'t7+'tO$#pQdO<<M[OOQS,5<q,5<qO$$RQdO1G4XOOQS-E:T-E:TOOQVAN?lAN?lOOQV1G2_1G2_O4iQdOAN?qO$$aQgOAN?qOOQVAN?xAN?xO4iQdOAN?xOOQV<<JR<<JRO4iQdOAN?rO4iQdO7+'{OOQV7+'{7+'{O1XQdO7+'{OOQVAN?rAN?rOOQS7+'|7+'|O$([QdO<<MbOOQS1G4^1G4^O0rQdO1G4^OOQS,5<w,5<wO$(iQdO1G4]OOQS-E:Z-E:ZOOQU'#G_'#G_O$(zQfO7+'OO$)VQdO'#F_O$*^QdO7+'jO$*nQdO7+'jOOQS7+'j7+'jO$*yQdO<<LqO$+ZQdO<<LqO$+ZQdO<<LqO$+cQdO'#H^OOQS<<Lh<<LhO$+mQdO<<LhOOQS7+'h7+'hOOQS'#D|'#D|OOOO1G4R1G4RO$,WQdO1G4RO$,`QdO1G4RP!=_QdO'#GVOOQVG25]G25]O4iQdOG25]OOQVG25dG25dOOQVG25^G25^OOQV<<Kg<<KgO4iQdO<<KgOOQS7+)x7+)xP$,kQdO'#G]OOQU-E:]-E:]OOQV<<Jj<<JjO$-_QtO'#FaOOQS'#Fc'#FcO$-oQdO'#FbO$.aQdO'#FbOOQS'#Fb'#FbO$.fQdO'#IYO$)VQdO'#FiO$)VQdO'#FiO$.}QdO'#FjO$)VQdO'#FkO$/UQdO'#IZOOQS'#IZ'#IZO$/sQdO,5;yOOQS<<KU<<KUO$/{QdO<<KUO$0]QdOANB]O$0mQdOANB]O$0uQdO'#H_OOQS'#H_'#H_O1sQdO'#DcO$1`QdO,5=xOOQSANBSANBSOOOO7+)m7+)mO$1wQdO7+)mOOQVLD*wLD*wOOQVANARANARO5rQ!fO'#GaO$2PQtO,5<SO$)VQdO'#FmOOQS,5<W,5<WOOQS'#Fd'#FdO$2qQdO,5;|O$2vQdO,5;|OOQS'#Fg'#FgO$)VQdO'#G`O$3hQdO,5<QO$4SQdO,5>tO$4dQdO,5>tO1XQdO,5<PO$4uQdO,5<TO$4zQdO,5<TO$)VQdO'#I[O$5PQdO'#I[O$5UQdO,5<UOOQS,5<V,5<VO'vQdO'#FpOOQU1G1e1G1eO4iQdO1G1eOOQSAN@pAN@pO$5ZQdOG27wO$5kQdO,59}OOQS1G3d1G3dOOOO<<MX<<MXOOQS,5<{,5<{OOQS-E:_-E:_O$5pQtO'#FaO$5wQdO'#I]O$6VQdO'#I]O$6_QdO,5<XOOQS1G1h1G1hO$6dQdO1G1hO$6iQdO,5<zOOQS-E:^-E:^O$7TQdO,5=OO$7lQdO1G4`OOQS-E:b-E:bOOQS1G1k1G1kOOQS1G1o1G1oO$7|QdO,5>vO$)VQdO,5>vOOQS1G1p1G1pO$8[QtO,5<[OOQU7+'P7+'PO$+cQdO1G/iO$)VQdO,5<YO$8cQdO,5>wO$8jQdO,5>wOOQS1G1s1G1sOOQS7+'S7+'SP$)VQdO'#GdO$8rQdO1G4bO$8|QdO1G4bO$9UQdO1G4bOOQS7+%T7+%TO$9dQdO1G1tO$9rQtO'#FaO$9yQdO,5<}OOQS,5<},5<}O$:XQdO1G4cOOQS-E:a-E:aO$)VQdO,5<|O$:`QdO,5<|O$:eQdO7+)|OOQS-E:`-E:`O$:oQdO7+)|O$)VQdO,5<ZP$)VQdO'#GcO$:wQdO1G2hO$)VQdO1G2hP$;VQdO'#GbO$;^QdO<<MhO$;hQdO1G1uO$;vQdO7+(SO8sQdO'#C}O8sQdO,59bO8sQdO,59bO8sQdO,59bO$<UQtO,5=`O8sQdO1G.|O0rQdO1G/XO0rQdO7+$pP$<iQdO'#GOO'vQdO'#GtO$<vQdO,59bO$<{QdO,59bO$=SQdO,59mO$=XQdO1G/UO1sQdO'#DRO8sQdO,59j",stateData:"$=r~O%cOS%^OSSOS%]PQ~OPdOVaOfoOhYOopOs!POvqO!PrO!Q{O!T!SO!U!RO!XZO!][O!h`O!r`O!s`O!t`O!{tO!}uO#PvO#RwO#TxO#XyO#ZzO#^|O#_|O#a}O#c!OO#l!QO#o!TO#s!UO#u!VO#z!WO#}hO$P!XO%oRO%pRO%tSO%uWO&Z]O&[]O&]]O&^]O&_]O&`]O&a]O&b]O&c^O&d^O&e^O&f^O&g^O&h^O&i^O&j^O~O%]!YO~OV!aO_!aOa!bOh!iO!X!kO!f!mO%j![O%k!]O%l!^O%m!_O%n!_O%o!`O%p!`O%q!aO%r!aO%s!aO~Ok%xXl%xXm%xXn%xXo%xXp%xXs%xXz%xX{%xX!x%xX#g%xX%[%xX%_%xX%z%xXg%xX!T%xX!U%xX%{%xX!W%xX![%xX!Q%xX#[%xXt%xX!m%xX~P%SOfoOhYO!XZO!][O!h`O!r`O!s`O!t`O%oRO%pRO%tSO%uWO&Z]O&[]O&]]O&^]O&_]O&`]O&a]O&b]O&c^O&d^O&e^O&f^O&g^O&h^O&i^O&j^O~Oz%wX{%wX#g%wX%[%wX%_%wX%z%wX~Ok!pOl!qOm!oOn!oOo!rOp!sOs!tO!x%wX~P)pOV!zOg!|Oo0cOv0qO!PrO~P'vOV#OOo0cOv0qO!W#PO~P'vOV#SOa#TOo0cOv0qO![#UO~P'vOQ#XO%`#XO%a#ZO~OQ#^OR#[O%`#^O%a#`O~OV%iX_%iXa%iXh%iXk%iXl%iXm%iXn%iXo%iXp%iXs%iXz%iX!X%iX!f%iX%j%iX%k%iX%l%iX%m%iX%n%iX%o%iX%p%iX%q%iX%r%iX%s%iXg%iX!T%iX!U%iX~O&Z]O&[]O&]]O&^]O&_]O&`]O&a]O&b]O&c^O&d^O&e^O&f^O&g^O&h^O&i^O&j^O{%iX!x%iX#g%iX%[%iX%_%iX%z%iX%{%iX!W%iX![%iX!Q%iX#[%iXt%iX!m%iX~P,eOz#dO{%hX!x%hX#g%hX%[%hX%_%hX%z%hX~Oo0cOv0qO~P'vO#g#gO%[#iO%_#iO~O%uWO~O!T#nO#u!VO#z!WO#}hO~OopO~P'vOV#sOa#tO%uWO{wP~OV#xOo0cOv0qO!Q#yO~P'vO{#{O!x$QO%z#|O#g!yX%[!yX%_!yX~OV#xOo0cOv0qO#g#SX%[#SX%_#SX~P'vOo0cOv0qO#g#WX%[#WX%_#WX~P'vOh$WO%uWO~O!f$YO!r$YO%uWO~OV$eO~P'vO!U$gO#s$hO#u$iO~O{$jO~OV$qO~P'vOS$sO%[$rO%c$tO~OV$}Oa$}Og%POo0cOv0qO~P'vOo0cOv0qO{%SO~P'vO&Y%UO~Oa!bOh!iO!X!kO!f!mOVba_bakbalbambanbaobapbasbazba{ba!xba#gba%[ba%_ba%jba%kba%lba%mba%nba%oba%pba%qba%rba%sba%zbagba!Tba!Uba%{ba!Wba![ba!Qba#[batba!mba~On%ZO~Oo%ZO~P'vOo0cO~P'vOk0eOl0fOm0dOn0dOo0mOp0nOs0rOg%wX!T%wX!U%wX%{%wX!W%wX![%wX!Q%wX#[%wX!m%wX~P)pO%{%]Og%vXz%vX!T%vX!U%vX!W%vX{%vX~Og%_Oz%`O!T%dO!U%cO~Og%_O~Oz%gO!T%dO!U%cO!W&SX~O!W%kO~Oz%lO{%nO!T%dO!U%cO![%}X~O![%rO~O![%sO~OQ#XO%`#XO%a%uO~OV%wOo0cOv0qO!PrO~P'vOQ#^OR#[O%`#^O%a%zO~OV!qa_!qaa!qah!qak!qal!qam!qan!qao!qap!qas!qaz!qa{!qa!X!qa!f!qa!x!qa#g!qa%[!qa%_!qa%j!qa%k!qa%l!qa%m!qa%n!qa%o!qa%p!qa%q!qa%r!qa%s!qa%z!qag!qa!T!qa!U!qa%{!qa!W!qa![!qa!Q!qa#[!qat!qa!m!qa~P#yOz%|O{%ha!x%ha#g%ha%[%ha%_%ha%z%ha~P%SOV&OOopOvqO{%ha!x%ha#g%ha%[%ha%_%ha%z%ha~P'vOz%|O{%ha!x%ha#g%ha%[%ha%_%ha%z%ha~OPdOVaOopOvqO!PrO!Q{O!{tO!}uO#PvO#RwO#TxO#XyO#ZzO#^|O#_|O#a}O#c!OO#g$zX%[$zX%_$zX~P'vO#g#gO%[&TO%_&TO~O!f&UOh&sX%[&sXz&sX#[&sX#g&sX%_&sX#Z&sXg&sX~Oh!iO%[&WO~Okealeameaneaoeapeaseazea{ea!xea#gea%[ea%_ea%zeagea!Tea!Uea%{ea!Wea![ea!Qea#[eatea!mea~P%SOsqazqa{qa#gqa%[qa%_qa%zqa~Ok!pOl!qOm!oOn!oOo!rOp!sO!xqa~PE`O%z&YOz%yX{%yX~O%uWOz%yX{%yX~Oz&]O{wX~O{&_O~Oz%lO#g%}X%[%}X%_%}Xg%}X{%}X![%}X!m%}X%z%}X~OV0lOo0cOv0qO!PrO~P'vO%z#|O#gUa%[Ua%_Ua~Oz&hO#g&PX%[&PX%_&PXn&PX~P%SOz&kO!Q&jO#g#Wa%[#Wa%_#Wa~Oz&lO#[&nO#g&rX%[&rX%_&rXg&rX~O!f$YO!r$YO#Z&qO%uWO~O#Z&qO~Oz&sO#g&tX%[&tX%_&tX~Oz&uO#g&pX%[&pX%_&pX{&pX~O!X&wO%z&xO~Oz&|On&wX~P%SOn'PO~OPdOVaOopOvqO!PrO!Q{O!{tO!}uO#PvO#RwO#TxO#XyO#ZzO#^|O#_|O#a}O#c!OO%['UO~P'vOt'YO#p'WO#q'XOP#naV#naf#nah#nao#nas#nav#na!P#na!Q#na!T#na!U#na!X#na!]#na!h#na!r#na!s#na!t#na!{#na!}#na#P#na#R#na#T#na#X#na#Z#na#^#na#_#na#a#na#c#na#l#na#o#na#s#na#u#na#z#na#}#na$P#na%X#na%o#na%p#na%t#na%u#na&Z#na&[#na&]#na&^#na&_#na&`#na&a#na&b#na&c#na&d#na&e#na&f#na&g#na&h#na&i#na&j#na%Z#na%_#na~Oz'ZO#[']O{&xX~Oh'_O!X&wO~Oh!iO{$jO!X&wO~O{'eO~P%SO%['hO~OS'iO%['hO~OV!aO_!aOa!bOh!iO!X!kO!f!mO%l!^O%m!_O%n!_O%o!`O%p!`O%q!aO%r!aO%s!aOkWilWimWinWioWipWisWizWi{Wi!xWi#gWi%[Wi%_Wi%jWi%zWigWi!TWi!UWi%{Wi!WWi![Wi!QWi#[WitWi!mWi~O%k!]O~P!#lO%kWi~P!#lOV!aO_!aOa!bOh!iO!X!kO!f!mO%o!`O%p!`O%q!aO%r!aO%s!aOkWilWimWinWioWipWisWizWi{Wi!xWi#gWi%[Wi%_Wi%jWi%kWi%lWi%zWigWi!TWi!UWi%{Wi!WWi![Wi!QWi#[WitWi!mWi~O%m!_O%n!_O~P!&gO%mWi%nWi~P!&gOa!bOh!iO!X!kO!f!mOkWilWimWinWioWipWisWizWi{Wi!xWi#gWi%[Wi%_Wi%jWi%kWi%lWi%mWi%nWi%oWi%pWi%zWigWi!TWi!UWi%{Wi!WWi![Wi!QWi#[WitWi!mWi~OV!aO_!aO%q!aO%r!aO%s!aO~P!)eOVWi_Wi%qWi%rWi%sWi~P!)eO!T%dO!U%cOg&VXz&VX~O%z'kO%{'kO~P,eOz'mOg&UX~Og'oO~Oz'pO{'rO!W&XX~Oo0cOv0qOz'pO{'sO!W&XX~P'vO!W'uO~Om!oOn!oOo!rOp!sOkjisjizji{ji!xji#gji%[ji%_ji%zji~Ol!qO~P!.WOlji~P!.WOk0eOl0fOm0dOn0dOo0mOp0nO~Ot'wO~P!/aOV'|Og'}Oo0cOv0qO~P'vOg'}Oz(OO~Og(QO~O!U(SO~Og(TOz(OO!T%dO!U%cO~P%SOk0eOl0fOm0dOn0dOo0mOp0nOgqa!Tqa!Uqa%{qa!Wqa![qa!Qqa#[qatqa!mqa~PE`OV'|Oo0cOv0qO!W&Sa~P'vOz(WO!W&Sa~O!W(XO~Oz(WO!T%dO!U%cO!W&Sa~P%SOV(]Oo0cOv0qO![%}a#g%}a%[%}a%_%}ag%}a{%}a!m%}a%z%}a~P'vOz(^O![%}a#g%}a%[%}a%_%}ag%}a{%}a!m%}a%z%}a~O![(aO~Oz(^O!T%dO!U%cO![%}a~P%SOz(dO!T%dO!U%cO![&Ta~P%SOz(gO{&lX![&lX!m&lX%z&lX~O{(kO![(mO!m(nO%z(jO~OV&OOopOvqO{%hi!x%hi#g%hi%[%hi%_%hi%z%hi~P'vOz(pO{%hi!x%hi#g%hi%[%hi%_%hi%z%hi~O!f&UOh&sa%[&saz&sa#[&sa#g&sa%_&sa#Z&sag&sa~O%[(uO~OV#sOa#tO%uWO~Oz&]O{wa~OopOvqO~P'vOz(^O#g%}a%[%}a%_%}ag%}a{%}a![%}a!m%}a%z%}a~P%SOz(zO#g%hX%[%hX%_%hX%z%hX~O%z#|O#gUi%[Ui%_Ui~O#g&Pa%[&Pa%_&Pan&Pa~P'vOz(}O#g&Pa%[&Pa%_&Pan&Pa~O%uWO#g&ra%[&ra%_&rag&ra~Oz)SO#g&ra%[&ra%_&rag&ra~Og)VO~OV)WOh$WO%uWO~O#Z)XO~O%uWO#g&ta%[&ta%_&ta~Oz)ZO#g&ta%[&ta%_&ta~Oo0cOv0qO#g&pa%[&pa%_&pa{&pa~P'vOz)^O#g&pa%[&pa%_&pa{&pa~OV)`Oa)`O%uWO~O%z)eO~Ot)hO#j)gOP#hiV#hif#hih#hio#his#hiv#hi!P#hi!Q#hi!T#hi!U#hi!X#hi!]#hi!h#hi!r#hi!s#hi!t#hi!{#hi!}#hi#P#hi#R#hi#T#hi#X#hi#Z#hi#^#hi#_#hi#a#hi#c#hi#l#hi#o#hi#s#hi#u#hi#z#hi#}#hi$P#hi%X#hi%o#hi%p#hi%t#hi%u#hi&Z#hi&[#hi&]#hi&^#hi&_#hi&`#hi&a#hi&b#hi&c#hi&d#hi&e#hi&f#hi&g#hi&h#hi&i#hi&j#hi%Z#hi%_#hi~Ot)iOP#kiV#kif#kih#kio#kis#kiv#ki!P#ki!Q#ki!T#ki!U#ki!X#ki!]#ki!h#ki!r#ki!s#ki!t#ki!{#ki!}#ki#P#ki#R#ki#T#ki#X#ki#Z#ki#^#ki#_#ki#a#ki#c#ki#l#ki#o#ki#s#ki#u#ki#z#ki#}#ki$P#ki%X#ki%o#ki%p#ki%t#ki%u#ki&Z#ki&[#ki&]#ki&^#ki&_#ki&`#ki&a#ki&b#ki&c#ki&d#ki&e#ki&f#ki&g#ki&h#ki&i#ki&j#ki%Z#ki%_#ki~OV)kOn&wa~P'vOz)lOn&wa~Oz)lOn&wa~P%SOn)pO~O%Y)tO~Ot)wO#p'WO#q)vOP#niV#nif#nih#nio#nis#niv#ni!P#ni!Q#ni!T#ni!U#ni!X#ni!]#ni!h#ni!r#ni!s#ni!t#ni!{#ni!}#ni#P#ni#R#ni#T#ni#X#ni#Z#ni#^#ni#_#ni#a#ni#c#ni#l#ni#o#ni#s#ni#u#ni#z#ni#}#ni$P#ni%X#ni%o#ni%p#ni%t#ni%u#ni&Z#ni&[#ni&]#ni&^#ni&_#ni&`#ni&a#ni&b#ni&c#ni&d#ni&e#ni&f#ni&g#ni&h#ni&i#ni&j#ni%Z#ni%_#ni~OV)zOo0cOv0qO{$jO~P'vOo0cOv0qO{&xa~P'vOz*OO{&xa~OV*SOa*TOg*WO%q*UO%uWO~O{$jO&{*YO~Oh'_O~Oh!iO{$jO~O%[*_O~O%[*aO~OV$}Oa$}Oo0cOv0qOg&Ua~P'vOz*dOg&Ua~Oo0cOv0qO{*gO!W&Xa~P'vOz*hO!W&Xa~Oo0cOv0qOz*hO{*kO!W&Xa~P'vOo0cOv0qOz*hO!W&Xa~P'vOz*hO{*kO!W&Xa~Om0dOn0dOo0mOp0nOgjikjisjizji!Tji!Uji%{ji!Wji{ji![ji#gji%[ji%_ji!Qji#[jitji!mji%zji~Ol0fO~P!N_Olji~P!N_OV'|Og*pOo0cOv0qO~P'vOn*rO~Og*pOz*tO~Og*uO~OV'|Oo0cOv0qO!W&Si~P'vOz*vO!W&Si~O!W*wO~OV(]Oo0cOv0qO![%}i#g%}i%[%}i%_%}ig%}i{%}i!m%}i%z%}i~P'vOz*zO!T%dO!U%cO![&Ti~Oz*}O![%}i#g%}i%[%}i%_%}ig%}i{%}i!m%}i%z%}i~O![+OO~Oa+QOo0cOv0qO![&Ti~P'vOz*zO![&Ti~O![+SO~OV+UOo0cOv0qO{&la![&la!m&la%z&la~P'vOz+VO{&la![&la!m&la%z&la~O!]+YO&n+[O![!nX~O![+^O~O{(kO![+_O~O{(kO![+_O!m+`O~OV&OOopOvqO{%hq!x%hq#g%hq%[%hq%_%hq%z%hq~P'vOz$ri{$ri!x$ri#g$ri%[$ri%_$ri%z$ri~P%SOV&OOopOvqO~P'vOV&OOo0cOv0qO#g%ha%[%ha%_%ha%z%ha~P'vOz+aO#g%ha%[%ha%_%ha%z%ha~Oz$ia#g$ia%[$ia%_$ian$ia~P%SO#g&Pi%[&Pi%_&Pin&Pi~P'vOz+dO#g#Wq%[#Wq%_#Wq~O#[+eOz$va#g$va%[$va%_$vag$va~O%uWO#g&ri%[&ri%_&rig&ri~Oz+gO#g&ri%[&ri%_&rig&ri~OV+iOh$WO%uWO~O%uWO#g&ti%[&ti%_&ti~Oo0cOv0qO#g&pi%[&pi%_&pi{&pi~P'vO{#{Oz#eX!W#eX~Oz+mO!W&uX~O!W+oO~Ot+rO#j)gOP#hqV#hqf#hqh#hqo#hqs#hqv#hq!P#hq!Q#hq!T#hq!U#hq!X#hq!]#hq!h#hq!r#hq!s#hq!t#hq!{#hq!}#hq#P#hq#R#hq#T#hq#X#hq#Z#hq#^#hq#_#hq#a#hq#c#hq#l#hq#o#hq#s#hq#u#hq#z#hq#}#hq$P#hq%X#hq%o#hq%p#hq%t#hq%u#hq&Z#hq&[#hq&]#hq&^#hq&_#hq&`#hq&a#hq&b#hq&c#hq&d#hq&e#hq&f#hq&g#hq&h#hq&i#hq&j#hq%Z#hq%_#hq~On$|az$|a~P%SOV)kOn&wi~P'vOz+yOn&wi~Oz,TO{$jO#[,TO~O#q,VOP#nqV#nqf#nqh#nqo#nqs#nqv#nq!P#nq!Q#nq!T#nq!U#nq!X#nq!]#nq!h#nq!r#nq!s#nq!t#nq!{#nq!}#nq#P#nq#R#nq#T#nq#X#nq#Z#nq#^#nq#_#nq#a#nq#c#nq#l#nq#o#nq#s#nq#u#nq#z#nq#}#nq$P#nq%X#nq%o#nq%p#nq%t#nq%u#nq&Z#nq&[#nq&]#nq&^#nq&_#nq&`#nq&a#nq&b#nq&c#nq&d#nq&e#nq&f#nq&g#nq&h#nq&i#nq&j#nq%Z#nq%_#nq~O#[,WOz%Oa{%Oa~Oo0cOv0qO{&xi~P'vOz,YO{&xi~O{#{O%z,[Og&zXz&zX~O%uWOg&zXz&zX~Oz,`Og&yX~Og,bO~O%Y,eO~O!T%dO!U%cOg&Viz&Vi~OV$}Oa$}Oo0cOv0qOg&Ui~P'vO{,hOz$la!W$la~Oo0cOv0qO{,iOz$la!W$la~P'vOo0cOv0qO{*gO!W&Xi~P'vOz,lO!W&Xi~Oo0cOv0qOz,lO!W&Xi~P'vOz,lO{,oO!W&Xi~Og$hiz$hi!W$hi~P%SOV'|Oo0cOv0qO~P'vOn,qO~OV'|Og,rOo0cOv0qO~P'vOV'|Oo0cOv0qO!W&Sq~P'vOz$gi![$gi#g$gi%[$gi%_$gig$gi{$gi!m$gi%z$gi~P%SOV(]Oo0cOv0qO~P'vOa+QOo0cOv0qO![&Tq~P'vOz,sO![&Tq~O![,tO~OV(]Oo0cOv0qO![%}q#g%}q%[%}q%_%}qg%}q{%}q!m%}q%z%}q~P'vO{,uO~OV+UOo0cOv0qO{&li![&li!m&li%z&li~P'vOz,zO{&li![&li!m&li%z&li~O!]+YO&n+[O![!na~O{(kO![,}O~OV&OOo0cOv0qO#g%hi%[%hi%_%hi%z%hi~P'vOz-OO#g%hi%[%hi%_%hi%z%hi~O%uWO#g&rq%[&rq%_&rqg&rq~Oz-RO#g&rq%[&rq%_&rqg&rq~OV)`Oa)`O%uWO!W&ua~Oz-TO!W&ua~On$|iz$|i~P%SOV)kO~P'vOV)kOn&wq~P'vOt-XOP#myV#myf#myh#myo#mys#myv#my!P#my!Q#my!T#my!U#my!X#my!]#my!h#my!r#my!s#my!t#my!{#my!}#my#P#my#R#my#T#my#X#my#Z#my#^#my#_#my#a#my#c#my#l#my#o#my#s#my#u#my#z#my#}#my$P#my%X#my%o#my%p#my%t#my%u#my&Z#my&[#my&]#my&^#my&_#my&`#my&a#my&b#my&c#my&d#my&e#my&f#my&g#my&h#my&i#my&j#my%Z#my%_#my~O%Z-]O%_-]O~P`O#q-^OP#nyV#nyf#nyh#nyo#nys#nyv#ny!P#ny!Q#ny!T#ny!U#ny!X#ny!]#ny!h#ny!r#ny!s#ny!t#ny!{#ny!}#ny#P#ny#R#ny#T#ny#X#ny#Z#ny#^#ny#_#ny#a#ny#c#ny#l#ny#o#ny#s#ny#u#ny#z#ny#}#ny$P#ny%X#ny%o#ny%p#ny%t#ny%u#ny&Z#ny&[#ny&]#ny&^#ny&_#ny&`#ny&a#ny&b#ny&c#ny&d#ny&e#ny&f#ny&g#ny&h#ny&i#ny&j#ny%Z#ny%_#ny~Oz-aO{$jO#[-aO~Oo0cOv0qO{&xq~P'vOz-dO{&xq~O%z,[Og&zaz&za~OV*SOa*TO%q*UO%uWOg&ya~Oz-hOg&ya~O$S-lO~OV$}Oa$}Oo0cOv0qO~P'vOo0cOv0qO{-mOz$li!W$li~P'vOo0cOv0qOz$li!W$li~P'vO{-mOz$li!W$li~Oo0cOv0qO{*gO~P'vOo0cOv0qO{*gO!W&Xq~P'vOz-pO!W&Xq~Oo0cOv0qOz-pO!W&Xq~P'vOs-sO!T%dO!U%cOg&Oq!W&Oq![&Oqz&Oq~P!/aOa+QOo0cOv0qO![&Ty~P'vOz$ji![$ji~P%SOa+QOo0cOv0qO~P'vOV+UOo0cOv0qO~P'vOV+UOo0cOv0qO{&lq![&lq!m&lq%z&lq~P'vO{(kO![-xO!m-yO%z-wO~OV&OOo0cOv0qO#g%hq%[%hq%_%hq%z%hq~P'vO%uWO#g&ry%[&ry%_&ryg&ry~OV)`Oa)`O%uWO!W&ui~Ot-}OP#m!RV#m!Rf#m!Rh#m!Ro#m!Rs#m!Rv#m!R!P#m!R!Q#m!R!T#m!R!U#m!R!X#m!R!]#m!R!h#m!R!r#m!R!s#m!R!t#m!R!{#m!R!}#m!R#P#m!R#R#m!R#T#m!R#X#m!R#Z#m!R#^#m!R#_#m!R#a#m!R#c#m!R#l#m!R#o#m!R#s#m!R#u#m!R#z#m!R#}#m!R$P#m!R%X#m!R%o#m!R%p#m!R%t#m!R%u#m!R&Z#m!R&[#m!R&]#m!R&^#m!R&_#m!R&`#m!R&a#m!R&b#m!R&c#m!R&d#m!R&e#m!R&f#m!R&g#m!R&h#m!R&i#m!R&j#m!R%Z#m!R%_#m!R~Oo0cOv0qO{&xy~P'vOV*SOa*TO%q*UO%uWOg&yi~O$S-lO%Z.VO%_.VO~OV.aOh._O!X.^O!].`O!h.YO!s.[O!t.[O%p.XO%uWO&Z]O&[]O&]]O&^]O&_]O&`]O&a]O&b]O~Oo0cOv0qOz$lq!W$lq~P'vO{.fOz$lq!W$lq~Oo0cOv0qO{*gO!W&Xy~P'vOz.gO!W&Xy~Oo0cOv.kO~P'vOs-sO!T%dO!U%cOg&Oy!W&Oy![&Oyz&Oy~P!/aO{(kO![.nO~O{(kO![.nO!m.oO~OV*SOa*TO%q*UO%uWO~Oh.tO!f.rOz$TX#[$TX%j$TXg$TX~Os$TX{$TX!W$TX![$TX~P$,yO%o.vO%p.vOs$UXz$UX{$UX#[$UX%j$UX!W$UXg$UX![$UX~O!h.xO~Oz.|O#[/OO%j.yOs&|X{&|X!W&|Xg&|X~Oa/RO~P$)cOh.tOs&}Xz&}X{&}X#[&}X%j&}X!W&}Xg&}X![&}X~Os/VO{$jO~Oo0cOv0qOz$ly!W$ly~P'vOo0cOv0qO{*gO!W&X!R~P'vOz/ZO!W&X!R~Og&RXs&RX!T&RX!U&RX!W&RX![&RXz&RX~P!/aOs-sO!T%dO!U%cOg&Qa!W&Qa![&Qaz&Qa~O{(kO![/^O~O!f.rOh$[as$[az$[a{$[a#[$[a%j$[a!W$[ag$[a![$[a~O!h/eO~O%o.vO%p.vOs$Uaz$Ua{$Ua#[$Ua%j$Ua!W$Uag$Ua![$Ua~O%j.yOs$Yaz$Ya{$Ya#[$Ya!W$Yag$Ya![$Ya~Os&|a{&|a!W&|ag&|a~P$)VOz/jOs&|a{&|a!W&|ag&|a~O!W/mO~Og/mO~O{/oO~O![/pO~Oo0cOv0qO{*gO!W&X!Z~P'vO{/sO~O%z/tO~P$,yOz/uO#[/OO%j.yOg'PX~Oz/uOg'PX~Og/wO~O!h/xO~O#[/OOs%Saz%Sa{%Sa%j%Sa!W%Sag%Sa![%Sa~O#[/OO%j.yOs%Waz%Wa{%Wa!W%Wag%Wa~Os&|i{&|i!W&|ig&|i~P$)VOz/zO#[/OO%j.yO!['Oa~O{$da~P%SOg'Pa~P$)VOz0SOg'Pa~Oa0UO!['Oi~P$)cOz0WO!['Oi~Oz0WO#[/OO%j.yO!['Oi~O#[/OO%j.yOg$biz$bi~O%z0ZO~P$,yO#[/OO%j.yOg%Vaz%Va~Og'Pi~P$)VO{0^O~Oa0UO!['Oq~P$)cOz0`O!['Oq~O#[/OO%j.yOz%Ui![%Ui~Oa0UO~P$)cOa0UO!['Oy~P$)cO#[/OO%j.yOg$ciz$ci~O#[/OO%j.yOz%Uq![%Uq~Oz+aO#g%ha%[%ha%_%ha%z%ha~P%SOV&OOo0cOv0qO~P'vOn0hO~Oo0hO~P'vO{0iO~Ot0jO~P!/aO&]&Z&j&h&i&g&f&d&e&c&b&`&a&_&^&[%u~",goto:"!=l'QPPPPPP'RP'Z*s+]+v,b,}-kP.YP'Z.y.y'ZPPP'Z2cPPPPPP2c5VPP5VP7g7p=xPP={>m>pPP'Z'ZPP?PPP'Z'ZPP'Z'Z'Z'Z'Z?T?}'ZP@QP@WD_G{HPPHSH^Hb'ZPPPHeHn'RP'R'RP'RP'RP'RP'RP'R'R'RP'RPP'RPP'RP'RPHtIQIYPIaIgPIaPIaIaPPPIaPKuPLOLYL`KuPIaLiPIaPLpLvPLzM`M}NhLzLzNnN{LzLzLzLz! a! g! j! o! r! |!!S!!`!!r!!x!#S!#Y!#v!#|!$S!$^!$d!$j!$|!%W!%^!%d!%n!%t!%z!&Q!&W!&^!&h!&n!&x!'O!'X!'_!'n!'v!(Q!(XPPPPPPPPPPP!(_!(b!(h!(q!({!)WPPPPPPPPPPPP!-z!/`!3`!6pPP!6x!7X!7b!8Z!8Q!8d!8j!8m!8p!8s!8{!9lPPPPPPPPPPPPPPPPP!9o!9s!9yP!:_!:c!:o!:x!;U!;l!;o!;r!;x!<O!<U!<XP!<a!<j!=f!=i]eOn#g$j)t,P'}`OTYZ[adnoprtxy}!P!Q!R!U!X!c!d!e!f!g!h!i!k!o!p!q!s!t!z#O#S#T#[#d#g#x#y#{#}$Q$e$g$h$j$q$}%S%Z%^%`%c%g%l%n%w%|&O&Z&_&h&j&k&u&x&|'P'W'Z'l'm'p'r's'w'|(O(S(W(](^(d(g(p(r(z(})^)e)g)k)l)p)t)z*O*Y*d*g*h*k*q*r*t*v*y*z*}+Q+U+V+Y+a+c+d+k+x+y,P,X,Y,],g,h,i,k,l,o,q,s,u,w,y,z-O-d-f-m-p-s.f.g/V/Z/s0c0d0e0f0h0i0j0k0l0n0r}!cQ#c#p$R$d$p%e%j%p%q&`'O'g(q(|)j*o*x+w,v/q0g!P!dQ#c#p$R$d$p$u%e%j%p%q&`'O'g(q(|)j*o*x+w,v/q0g!R!eQ#c#p$R$d$p$u$v%e%j%p%q&`'O'g(q(|)j*o*x+w,v/q0g!T!fQ#c#p$R$d$p$u$v$w%e%j%p%q&`'O'g(q(|)j*o*x+w,v/q0g!V!gQ#c#p$R$d$p$u$v$w$x%e%j%p%q&`'O'g(q(|)j*o*x+w,v/q0g!X!hQ#c#p$R$d$p$u$v$w$x$y%e%j%p%q&`'O'g(q(|)j*o*x+w,v/q0g!]!hQ!n#c#p$R$d$p$u$v$w$x$y$z%e%j%p%q&`'O'g(q(|)j*o*x+w,v/q0g'}TOTYZ[adnoprtxy}!P!Q!R!U!X!c!d!e!f!g!h!i!k!o!p!q!s!t!z#O#S#T#[#d#g#x#y#{#}$Q$e$g$h$j$q$}%S%Z%^%`%c%g%l%n%w%|&O&Z&_&h&j&k&u&x&|'P'W'Z'l'm'p'r's'w'|(O(S(W(](^(d(g(p(r(z(})^)e)g)k)l)p)t)z*O*Y*d*g*h*k*q*r*t*v*y*z*}+Q+U+V+Y+a+c+d+k+x+y,P,X,Y,],g,h,i,k,l,o,q,s,u,w,y,z-O-d-f-m-p-s.f.g/V/Z/s0c0d0e0f0h0i0j0k0l0n0r&cVOYZ[dnprxy}!P!Q!U!i!k!o!p!q!s!t#[#d#g#y#{#}$Q$h$j$}%S%Z%^%`%g%l%n%w%|&Z&_&j&k&u&x'P'W'Z'l'm'p'r's'w(O(W(^(d(g(p(r(z)^)e)g)p)t)z*O*Y*d*g*h*k*q*r*t*v*y*z*}+U+V+Y+a+d+k,P,X,Y,],g,h,i,k,l,o,q,s,u,w,y,z-O-d-f-m-p-s.f.g/Z/s0c0d0e0f0h0i0j0k0n0r%mXOYZ[dnrxy}!P!Q!U!i!k#[#d#g#y#{#}$Q$h$j$}%S%^%`%g%l%n%w%|&Z&_&j&k&u&x'P'W'Z'l'm'p'r's'w(O(W(^(d(g(p(r(z)^)e)g)p)t)z*O*Y*d*g*h*k*q*t*v*y*z*}+U+V+Y+a+d+k,P,X,Y,],g,h,i,k,l,o,s,u,w,y,z-O-d-f-m-p.f.g/Z0i0j0kQ#vqQ/[.kR0o0q't`OTYZ[adnoprtxy}!P!Q!R!U!X!c!d!e!f!g!h!k!o!p!q!s!t!z#O#S#T#[#d#g#x#y#{#}$Q$e$g$h$j$q$}%S%Z%^%`%c%g%l%n%w%|&O&Z&_&h&j&k&u&x&|'P'W'Z'l'p'r's'w'|(O(S(W(](^(d(g(p(r(z(})^)e)g)k)l)p)t)z*O*Y*g*h*k*q*r*t*v*y*z*}+Q+U+V+Y+a+c+d+k+x+y,P,X,Y,],h,i,k,l,o,q,s,u,w,y,z-O-d-f-m-p-s.f.g/V/Z/s0c0d0e0f0h0i0j0k0l0n0rh#jhz{$W$Z&l&q)S)X+f+g-RW#rq&].k0qQ$]|Q$a!OQ$n!VQ$o!WW$|!i'm*d,gS&[#s#tQ'S$iQ(s&UQ)U&nU)Y&s)Z+jW)a&w+m-T-{Q*Q']W*R'_,`-h.TQ+l)`S,_*S*TQ-Q+eQ-_,TQ-c,WQ.R-al.W-l.^._.a.z.|/R/j/o/t/y0U0Z0^Q/S.`Q/a.tQ/l/OU0P/u0S0[X0V/z0W0_0`R&Z#r!_!wYZ!P!Q!k%S%`%g'p'r's(O(W)g*g*h*k*q*t*v,h,i,k,l,o-m-p.f.g/ZR%^!vQ!{YQ%x#[Q&d#}Q&g$QR,{+YT.j-s/s![!jQ!n#c#p$R$d$p$u$v$w$x$y$z%e%j%p%q&`'O'g(q(|)j*o*x+w,v/q0gQ&X#kQ'c$oR*^'dR'l$|Q%V!mR/_.r'|_OTYZ[adnoprtxy}!P!Q!R!U!X!c!d!e!f!g!h!i!k!o!p!q!s!t!z#O#S#T#[#d#g#x#y#{#}$Q$e$g$h$j$q$}%S%Z%^%`%c%g%l%n%w%|&O&Z&_&h&j&k&u&x&|'P'W'Z'l'm'p'r's'w'|(O(S(W(](^(d(g(p(r(z(})^)e)g)k)l)p)t)z*O*Y*d*g*h*k*q*r*t*v*y*z*}+Q+U+V+Y+a+c+d+k+x+y,P,X,Y,],g,h,i,k,l,o,q,s,u,w,y,z-O-d-f-m-p-s.f.g/V/Z/s0c0d0e0f0h0i0j0k0l0n0rS#a_#b!P.[-l.^._.`.a.t.z.|/R/j/o/t/u/y/z0S0U0W0Z0[0^0_0`'|_OTYZ[adnoprtxy}!P!Q!R!U!X!c!d!e!f!g!h!i!k!o!p!q!s!t!z#O#S#T#[#d#g#x#y#{#}$Q$e$g$h$j$q$}%S%Z%^%`%c%g%l%n%w%|&O&Z&_&h&j&k&u&x&|'P'W'Z'l'm'p'r's'w'|(O(S(W(](^(d(g(p(r(z(})^)e)g)k)l)p)t)z*O*Y*d*g*h*k*q*r*t*v*y*z*}+Q+U+V+Y+a+c+d+k+x+y,P,X,Y,],g,h,i,k,l,o,q,s,u,w,y,z-O-d-f-m-p-s.f.g/V/Z/s0c0d0e0f0h0i0j0k0l0n0rT#a_#bT#^^#_R(o%xa(l%x(n(o+`,{-y-z.oT+[(k+]R-z,{Q$PsQ+l)aR,^*RX#}s$O$P&fQ&y$aQ'a$nQ'd$oR)s'SQ)b&wV-S+m-T-{ZgOn$j)t,PXkOn)t,PQ$k!TQ&z$bQ&{$cQ'^$mQ'b$oQ)q'RQ)x'WQ){'XQ)|'YQ*Z'`S*]'c'dQ+s)gQ+u)hQ+v)iQ+z)oS+|)r*[Q,Q)vQ,R)wS,S)y)zQ,d*^Q-V+rQ-W+tQ-Y+{S-Z+},OQ-`,UQ-b,VQ-|-XQ.O-[Q.P-^Q.Q-_Q.p-}Q.q.RQ/W.dR/r/XWkOn)t,PR#mjQ'`$nS)r'S'aR,O)sQ,]*RR-f,^Q*['`Q+})rR-[,OZiOjn)t,PQ'f$pR*`'gT-j,e-ku.c-l.^._.a.t.z.|/R/j/o/t/u/y0S0U0Z0[0^t.c-l.^._.a.t.z.|/R/j/o/t/u/y0S0U0Z0[0^Q/S.`X0V/z0W0_0`!P.Z-l.^._.`.a.t.z.|/R/j/o/t/u/y/z0S0U0W0Z0[0^0_0`Q.w.YR/f.xg.z.].{/b/i/n/|0O0Q0]0a0bu.b-l.^._.a.t.z.|/R/j/o/t/u/y0S0U0Z0[0^X.u.W.b/a0PR/c.tV0R/u0S0[R/X.dQnOS#on,PR,P)tQ&^#uR(x&^S%m#R#wS(_%m(bT(b%p&`Q%a!yQ%h!}W(P%a%h(U(YQ(U%eR(Y%jQ&i$RR)O&iQ(e%qQ*{(`T+R(e*{Q'n%OR*e'nS'q%R%SY*i'q*j,m-q.hU*j'r's'tU,m*k*l*mS-q,n,oR.h-rQ#Y]R%t#YQ#_^R%y#_Q(h%vS+W(h+XR+X(iQ+](kR,|+]Q#b_R%{#bQ#ebQ%}#cW&Q#e%}({+bQ({&cR+b0gQ$OsS&e$O&fR&f$PQ&v$_R)_&vQ&V#jR(t&VQ&m$VS)T&m+hR+h)UQ$Z{R&p$ZQ&t$]R)[&tQ+n)bR-U+nQ#hfR&S#hQ)f&zR+q)fQ&}$dS)m&})nR)n'OQ'V$kR)u'VQ'[$lS*P'[,ZR,Z*QQ,a*VR-i,aWjOn)t,PR#ljQ-k,eR.U-kd.{.]/b/i/n/|0O0Q0]0a0bR/h.{U.s.W/a0PR/`.sQ/{/nS0X/{0YR0Y/|S/v/b/cR0T/vQ.}.]R/k.}R!ZPXmOn)t,PWlOn)t,PR'T$jYfOn$j)t,PR&R#g[sOn#g$j)t,PR&d#}&bQOYZ[dnprxy}!P!Q!U!i!k!o!p!q!s!t#[#d#g#y#{#}$Q$h$j$}%S%Z%^%`%g%l%n%w%|&Z&_&j&k&u&x'P'W'Z'l'm'p'r's'w(O(W(^(d(g(p(r(z)^)e)g)p)t)z*O*Y*d*g*h*k*q*r*t*v*y*z*}+U+V+Y+a+d+k,P,X,Y,],g,h,i,k,l,o,q,s,u,w,y,z-O-d-f-m-p-s.f.g/Z/s0c0d0e0f0h0i0j0k0n0rQ!nTQ#caQ#poU$Rt%c(SS$d!R$gQ$p!XQ$u!cQ$v!dQ$w!eQ$x!fQ$y!gQ$z!hQ%e!zQ%j#OQ%p#SQ%q#TQ&`#xQ'O$eQ'g$qQ(q&OU(|&h(}+cW)j&|)l+x+yQ*o'|Q*x(]Q+w)kQ,v+QQ/q/VR0g0lQ!yYQ!}ZQ$b!PQ$c!QQ%R!kQ't%S^'{%`%g(O(W*q*t*v^*f'p*h,k,l-p.g/ZQ*l'rQ*m'sQ+t)gQ,j*gQ,n*kQ-n,hQ-o,iQ-r,oQ.e-mR/Y.f[bOn#g$j)t,P!^!vYZ!P!Q!k%S%`%g'p'r's(O(W)g*g*h*k*q*t*v,h,i,k,l,o-m-p.f.g/ZQ#R[Q#fdS#wrxQ$UyW$_}$Q'P)pS$l!U$hW${!i'm*d,gS%v#[+Y`&P#d%|(p(r(z+a-O0kQ&a#yQ&b#{Q&c#}Q'j$}Q'z%^W([%l(^*y*}Q(`%nQ(i%wQ(v&ZS(y&_0iQ)P&jQ)Q&kU)]&u)^+kQ)d&xQ)y'WY)}'Z*O,X,Y-dQ*b'lS*n'w0jW+P(d*z,s,wW+T(g+V,y,zQ+p)eQ,U)zQ,c*YQ,x+UQ-P+dQ-e,]Q-v,uR.S-fhUOn#d#g$j%|&_'w(p(r)t,P%S!uYZ[drxy}!P!Q!U!i!k#[#y#{#}$Q$h$}%S%^%`%g%l%n%w&Z&j&k&u&x'P'W'Z'l'm'p'r's(O(W(^(d(g(z)^)e)g)p)z*O*Y*d*g*h*k*q*t*v*y*z*}+U+V+Y+a+d+k,X,Y,],g,h,i,k,l,o,s,u,w,y,z-O-d-f-m-p.f.g/Z0i0j0kQ#qpW%W!o!s0d0nQ%X!pQ%Y!qQ%[!tQ%f0cS'v%Z0hQ'x0eQ'y0fQ,p*rQ-u,qS.i-s/sR0p0rU#uq.k0qR(w&][cOn#g$j)t,PZ!xY#[#}$Q+YQ#W[Q#zrR$TxQ%b!yQ%i!}Q%o#RQ'j${Q(V%eQ(Z%jQ(c%pQ(f%qQ*|(`Q,f*bQ-t,pQ.m-uR/].lQ$StQ(R%cR*s(SQ.l-sR/}/sR#QZR#V[R%Q!iQ%O!iV*c'm*d,g!]!lQ!n#c#p$R$d$p$u$v$w$x$y$z%e%j%p%q&`'O'g(q(|)j*o*x+w,v/q0gR%T!kT#]^#_Q%x#[R,{+YQ(m%xS+_(n(oQ,}+`Q-x,{S.n-y-zR/^.oT+Z(k+]Q$`}Q&g$QQ)o'PR+{)pQ$XzQ)W&qR+i)XQ$XzQ&o$WQ)W&qR+i)XQ#khW$Vz$W&q)XQ$[{Q&r$ZZ)R&l)S+f+g-RR$^|R)c&wXlOn)t,PQ$f!RR'Q$gQ$m!UR'R$hR*X'_Q*V'_V-g,`-h.TQ.d-lQ/P.^R/Q._U.]-l.^._Q/U.aQ/b.tQ/g.zU/i.|/j/yQ/n/RQ/|/oQ0O/tU0Q/u0S0[Q0]0UQ0a0ZR0b0^R/T.`R/d.t",nodeNames:"\u26a0 print Escape { Comment Script AssignStatement * BinaryExpression BitOp BitOp BitOp BitOp ArithOp ArithOp @ ArithOp ** UnaryExpression ArithOp BitOp AwaitExpression await ) ( ParenthesizedExpression BinaryExpression or and CompareOp in not is UnaryExpression ConditionalExpression if else LambdaExpression lambda ParamList VariableName AssignOp , : NamedExpression AssignOp YieldExpression yield from TupleExpression ComprehensionExpression async for LambdaExpression ] [ ArrayExpression ArrayComprehensionExpression } { DictionaryExpression DictionaryComprehensionExpression SetExpression SetComprehensionExpression CallExpression ArgList AssignOp MemberExpression . PropertyName Number String FormatString FormatReplacement FormatSelfDoc FormatConversion FormatSpec FormatReplacement FormatSelfDoc ContinuedString Ellipsis None Boolean TypeDef AssignOp UpdateStatement UpdateOp ExpressionStatement DeleteStatement del PassStatement pass BreakStatement break ContinueStatement continue ReturnStatement return YieldStatement PrintStatement RaiseStatement raise ImportStatement import as ScopeStatement global nonlocal AssertStatement assert TypeDefinition type TypeParamList TypeParam StatementGroup ; IfStatement Body elif WhileStatement while ForStatement TryStatement try except finally WithStatement with FunctionDefinition def ParamList AssignOp TypeDef ClassDefinition class DecoratedStatement Decorator At MatchStatement match MatchBody MatchClause case CapturePattern LiteralPattern ArithOp ArithOp AsPattern OrPattern LogicOp AttributePattern SequencePattern MappingPattern StarPattern ClassPattern PatternArgList KeywordPattern KeywordPattern Guard",maxTerm:277,context:xD,nodeProps:[["isolate",-5,4,71,72,73,77,""],["group",-15,6,85,87,88,90,92,94,96,98,99,100,102,105,108,110,"Statement Statement",-22,8,18,21,25,40,49,50,56,57,60,61,62,63,64,67,70,71,72,79,80,81,82,"Expression",-10,114,116,119,121,122,126,128,133,135,138,"Statement",-9,143,144,147,148,150,151,152,153,154,"Pattern"],["openedBy",23,"(",54,"[",58,"{"],["closedBy",24,")",55,"]",59,"}"]],propSources:[_D],skippedNodes:[0,4],repeatNodeCount:34,tokenData:"!2|~R!`OX%TXY%oY[%T[]%o]p%Tpq%oqr'ars)Yst*xtu%Tuv,dvw-hwx.Uxy/tyz0[z{0r{|2S|}2p}!O3W!O!P4_!P!Q:Z!Q!R;k!R![>_![!]Do!]!^Es!^!_FZ!_!`Gk!`!aHX!a!b%T!b!cIf!c!dJU!d!eK^!e!hJU!h!i!#f!i!tJU!t!u!,|!u!wJU!w!x!.t!x!}JU!}#O!0S#O#P&o#P#Q!0j#Q#R!1Q#R#SJU#S#T%T#T#UJU#U#VK^#V#YJU#Y#Z!#f#Z#fJU#f#g!,|#g#iJU#i#j!.t#j#oJU#o#p!1n#p#q!1s#q#r!2a#r#s!2f#s$g%T$g;'SJU;'S;=`KW<%lOJU`%YT&n`O#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%T`%lP;=`<%l%To%v]&n`%c_OX%TXY%oY[%T[]%o]p%Tpq%oq#O%T#O#P&o#P#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%To&tX&n`OY%TYZ%oZ]%T]^%o^#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tc'f[&n`O!_%T!_!`([!`#T%T#T#U(r#U#f%T#f#g(r#g#h(r#h#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tc(cTmR&n`O#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tc(yT!mR&n`O#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk)aV&n`&[ZOr%Trs)vs#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk){V&n`Or%Trs*bs#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk*iT&n`&^ZO#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%To+PZS_&n`OY*xYZ%TZ]*x]^%T^#o*x#o#p+r#p#q*x#q#r+r#r;'S*x;'S;=`,^<%lO*x_+wTS_OY+rZ]+r^;'S+r;'S;=`,W<%lO+r_,ZP;=`<%l+ro,aP;=`<%l*xj,kV%rQ&n`O!_%T!_!`-Q!`#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tj-XT!xY&n`O#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tj-oV%lQ&n`O!_%T!_!`-Q!`#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk.]V&n`&ZZOw%Twx.rx#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk.wV&n`Ow%Twx/^x#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk/eT&n`&]ZO#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk/{ThZ&n`O#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tc0cTgR&n`O#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk0yXVZ&n`Oz%Tz{1f{!_%T!_!`-Q!`#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk1mVaR&n`O!_%T!_!`-Q!`#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk2ZV%oZ&n`O!_%T!_!`-Q!`#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tc2wTzR&n`O#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%To3_W%pZ&n`O!_%T!_!`-Q!`!a3w!a#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Td4OT&{S&n`O#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk4fX!fQ&n`O!O%T!O!P5R!P!Q%T!Q![6T![#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk5WV&n`O!O%T!O!P5m!P#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk5tT!rZ&n`O#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Ti6[a!hX&n`O!Q%T!Q![6T![!g%T!g!h7a!h!l%T!l!m9s!m#R%T#R#S6T#S#X%T#X#Y7a#Y#^%T#^#_9s#_#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Ti7fZ&n`O{%T{|8X|}%T}!O8X!O!Q%T!Q![8s![#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Ti8^V&n`O!Q%T!Q![8s![#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Ti8z]!hX&n`O!Q%T!Q![8s![!l%T!l!m9s!m#R%T#R#S8s#S#^%T#^#_9s#_#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Ti9zT!hX&n`O#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk:bX%qR&n`O!P%T!P!Q:}!Q!_%T!_!`-Q!`#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tj;UV%sQ&n`O!_%T!_!`-Q!`#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Ti;ro!hX&n`O!O%T!O!P=s!P!Q%T!Q![>_![!d%T!d!e?q!e!g%T!g!h7a!h!l%T!l!m9s!m!q%T!q!rA]!r!z%T!z!{Bq!{#R%T#R#S>_#S#U%T#U#V?q#V#X%T#X#Y7a#Y#^%T#^#_9s#_#c%T#c#dA]#d#l%T#l#mBq#m#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Ti=xV&n`O!Q%T!Q![6T![#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Ti>fc!hX&n`O!O%T!O!P=s!P!Q%T!Q![>_![!g%T!g!h7a!h!l%T!l!m9s!m#R%T#R#S>_#S#X%T#X#Y7a#Y#^%T#^#_9s#_#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Ti?vY&n`O!Q%T!Q!R@f!R!S@f!S#R%T#R#S@f#S#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Ti@mY!hX&n`O!Q%T!Q!R@f!R!S@f!S#R%T#R#S@f#S#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%TiAbX&n`O!Q%T!Q!YA}!Y#R%T#R#SA}#S#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%TiBUX!hX&n`O!Q%T!Q!YA}!Y#R%T#R#SA}#S#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%TiBv]&n`O!Q%T!Q![Co![!c%T!c!iCo!i#R%T#R#SCo#S#T%T#T#ZCo#Z#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%TiCv]!hX&n`O!Q%T!Q![Co![!c%T!c!iCo!i#R%T#R#SCo#S#T%T#T#ZCo#Z#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%ToDvV{_&n`O!_%T!_!`E]!`#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%TcEdT%{R&n`O#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%TkEzT#gZ&n`O#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%TkFbXmR&n`O!^%T!^!_F}!_!`([!`!a([!a#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%TjGUV%mQ&n`O!_%T!_!`-Q!`#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%TkGrV%zZ&n`O!_%T!_!`([!`#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%TkH`WmR&n`O!_%T!_!`([!`!aHx!a#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%TjIPV%nQ&n`O!_%T!_!`-Q!`#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%TkIoV_Q#}P&n`O!_%T!_!`-Q!`#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%ToJ_]&n`&YS%uZO!Q%T!Q![JU![!c%T!c!}JU!}#R%T#R#SJU#S#T%T#T#oJU#p#q%T#r$g%T$g;'SJU;'S;=`KW<%lOJUoKZP;=`<%lJUoKge&n`&YS%uZOr%Trs)Ysw%Twx.Ux!Q%T!Q![JU![!c%T!c!tJU!t!uLx!u!}JU!}#R%T#R#SJU#S#T%T#T#fJU#f#gLx#g#oJU#p#q%T#r$g%T$g;'SJU;'S;=`KW<%lOJUoMRa&n`&YS%uZOr%TrsNWsw%Twx! vx!Q%T!Q![JU![!c%T!c!}JU!}#R%T#R#SJU#S#T%T#T#oJU#p#q%T#r$g%T$g;'SJU;'S;=`KW<%lOJUkN_V&n`&`ZOr%TrsNts#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%TkNyV&n`Or%Trs! `s#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk! gT&n`&bZO#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk! }V&n`&_ZOw%Twx!!dx#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk!!iV&n`Ow%Twx!#Ox#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk!#VT&n`&aZO#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%To!#oe&n`&YS%uZOr%Trs!%Qsw%Twx!&px!Q%T!Q![JU![!c%T!c!tJU!t!u!(`!u!}JU!}#R%T#R#SJU#S#T%T#T#fJU#f#g!(`#g#oJU#p#q%T#r$g%T$g;'SJU;'S;=`KW<%lOJUk!%XV&n`&dZOr%Trs!%ns#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk!%sV&n`Or%Trs!&Ys#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk!&aT&n`&fZO#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk!&wV&n`&cZOw%Twx!'^x#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk!'cV&n`Ow%Twx!'xx#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk!(PT&n`&eZO#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%To!(ia&n`&YS%uZOr%Trs!)nsw%Twx!+^x!Q%T!Q![JU![!c%T!c!}JU!}#R%T#R#SJU#S#T%T#T#oJU#p#q%T#r$g%T$g;'SJU;'S;=`KW<%lOJUk!)uV&n`&hZOr%Trs!*[s#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk!*aV&n`Or%Trs!*vs#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk!*}T&n`&jZO#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk!+eV&n`&gZOw%Twx!+zx#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk!,PV&n`Ow%Twx!,fx#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk!,mT&n`&iZO#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%To!-Vi&n`&YS%uZOr%TrsNWsw%Twx! vx!Q%T!Q![JU![!c%T!c!dJU!d!eLx!e!hJU!h!i!(`!i!}JU!}#R%T#R#SJU#S#T%T#T#UJU#U#VLx#V#YJU#Y#Z!(`#Z#oJU#p#q%T#r$g%T$g;'SJU;'S;=`KW<%lOJUo!.}a&n`&YS%uZOr%Trs)Ysw%Twx.Ux!Q%T!Q![JU![!c%T!c!}JU!}#R%T#R#SJU#S#T%T#T#oJU#p#q%T#r$g%T$g;'SJU;'S;=`KW<%lOJUk!0ZT!XZ&n`O#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tc!0qT!WR&n`O#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tj!1XV%kQ&n`O!_%T!_!`-Q!`#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%T~!1sO!]~k!1zV%jR&n`O!_%T!_!`-Q!`#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%T~!2fO![~i!2mT%tX&n`O#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%T",tokenizers:[TD,gD,pD,CD,0,1,2,3,4],topRules:{Script:[0,5]},specialized:[{term:221,get:e=>AD[e]||-1}],tokenPrec:7652}),ND=1024;let ID=0;class RD{constructor(e,t){this.from=e,this.to=t}}class DD{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.id=ID++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return"function"!=typeof e&&(e=QD.match(e)),t=>{let n=e(t);return void 0===n?null:[this,n]}}}DD.closedBy=new DD({deserialize:e=>e.split(" ")}),DD.openedBy=new DD({deserialize:e=>e.split(" ")}),DD.group=new DD({deserialize:e=>e.split(" ")}),DD.isolate=new DD({deserialize:e=>{if(e&&"rtl"!=e&&"ltr"!=e&&"auto"!=e)throw new RangeError("Invalid value for isolate: "+e);return e||"auto"}}),DD.contextHash=new DD({perNode:!0}),DD.lookAhead=new DD({perNode:!0}),DD.mounted=new DD({perNode:!0});class MD{constructor(e,t,n){this.tree=e,this.overlay=t,this.parser=n}static get(e){return e&&e.props&&e.props[DD.mounted.id]}}const LD=Object.create(null);class QD{constructor(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;this.name=e,this.props=t,this.id=n,this.flags=i}static define(e){let t=e.props&&e.props.length?Object.create(null):LD,n=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(null==e.name?8:0),i=new QD(e.name||"",t,e.id,n);if(e.props)for(let r of e.props)if(Array.isArray(r)||(r=r(i)),r){if(r[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");t[r[0].id]=r[1]}return i}prop(e){return this.props[e.id]}get isTop(){return(1&this.flags)>0}get isSkipped(){return(2&this.flags)>0}get isError(){return(4&this.flags)>0}get isAnonymous(){return(8&this.flags)>0}is(e){if("string"==typeof e){if(this.name==e)return!0;let t=this.prop(DD.group);return!!t&&t.indexOf(e)>-1}return this.id==e}static match(e){let t=Object.create(null);for(let n in e)for(let i of n.split(" "))t[i]=e[n];return e=>{for(let n=e.prop(DD.group),i=-1;i<(n?n.length:0);i++){let r=t[i<0?e.name:n[i]];if(r)return r}}}}QD.none=new QD("",Object.create(null),0,8);const zD=new WeakMap,jD=new WeakMap;var UD;!function(e){e[e.ExcludeBuffers=1]="ExcludeBuffers",e[e.IncludeAnonymous=2]="IncludeAnonymous",e[e.IgnoreMounts=4]="IgnoreMounts",e[e.IgnoreOverlays=8]="IgnoreOverlays"}(UD||(UD={}));class VD{constructor(e,t,n,i,r){if(this.type=e,this.children=t,this.positions=n,this.length=i,this.props=null,r&&r.length){this.props=Object.create(null);for(let[e,t]of r)this.props["number"==typeof e?e:e.id]=t}}toString(){let e=MD.get(this);if(e&&!e.overlay)return e.tree.toString();let t="";for(let n of this.children){let e=n.toString();e&&(t&&(t+=","),t+=e)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(t.length?"("+t+")":""):t}cursor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return new eM(this.topNode,e)}cursorAt(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=zD.get(this)||this.topNode,i=new eM(n);return i.moveTo(e,t),zD.set(this,i._tree),i}get topNode(){return new $D(this,0,0,null)}resolve(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=WD(zD.get(this)||this.topNode,e,t,!1);return zD.set(this,n),n}resolveInner(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=WD(jD.get(this)||this.topNode,e,t,!0);return jD.set(this,n),n}resolveStack(e){return function(e,t,n){let i=e.resolveInner(t,n),r=null;for(let s=i instanceof $D?i:i.context.parent;s;s=s.parent)if(s.index<0){let e=s.parent;(r||(r=[i])).push(e.resolve(t,n)),s=e}else{let e=MD.get(s.tree);if(e&&e.overlay&&e.overlay[0].from<=t&&e.overlay[e.overlay.length-1].to>=t){let o=new $D(e.tree,e.overlay[0].from+s.from,-1,s);(r||(r=[i])).push(WD(o,t,n,!1))}}return r?JD(r):i}(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0)}iterate(e){let{enter:t,leave:n,from:i=0,to:r=this.length}=e,s=e.mode||0,o=(s&UD.IncludeAnonymous)>0;for(let a=this.cursor(s|UD.IncludeAnonymous);;){let e=!1;if(a.from<=r&&a.to>=i&&(!o&&a.type.isAnonymous||!1!==t(a))){if(a.firstChild())continue;e=!0}for(;e&&n&&(o||!a.type.isAnonymous)&&n(a),!a.nextSibling();){if(!a.parent())return;e=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let t in this.props)e.push([+t,this.props[t]]);return e}balance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.children.length<=8?this:rM(QD.none,this.children,this.positions,0,this.children.length,0,this.length,((e,t,n)=>new VD(this.type,e,t,n,this.propValues)),e.makeTree||((e,t,n)=>new VD(QD.none,e,t,n)))}static build(e){return function(e){var t;let{buffer:n,nodeSet:i,maxBufferLength:r=ND,reused:s=[],minRepeatType:o=i.types.length}=e,a=Array.isArray(n)?new FD(n,n.length):n,l=i.types,c=0,h=0;function u(e,t,n,y,w,b){let{id:O,start:k,end:S,size:x}=a,T=h;for(;x<0;){if(a.next(),-1==x){let t=s[O];return n.push(t),void y.push(k-e)}if(-3==x)return void(c=O);if(-4==x)return void(h=O);throw new RangeError("Unrecognized record size: ".concat(x))}let C,E,_=l[O],A=k-e;if(S-k<=r&&(E=m(a.pos-t,w))){let t=new Uint16Array(E.size-E.skip),n=a.pos-E.size,r=t.length;for(;a.pos>n;)r=v(E.start,t,r);C=new qD(t,S-E.start,i),A=E.start-e}else{let e=a.pos-x;a.next();let t=[],n=[],i=O>=o?O:-1,s=0,l=S;for(;a.pos>e;)i>=0&&a.id==i&&a.size>=0?(a.end<=l-r&&(p(t,n,k,s,a.end,l,i,T),s=t.length,l=a.end),a.next()):b>2500?d(k,e,t,n):u(k,e,t,n,i,b+1);if(i>=0&&s>0&&s<t.length&&p(t,n,k,s,k,l,i,T),t.reverse(),n.reverse(),i>-1&&s>0){let e=f(_);C=rM(_,t,n,0,t.length,0,S-k,e,e)}else C=g(_,t,n,S-k,T-S)}n.push(C),y.push(A)}function d(e,t,n,s){let o=[],l=0,c=-1;for(;a.pos>t;){let{id:e,start:t,end:n,size:i}=a;if(i>4)a.next();else{if(c>-1&&t<c)break;c<0&&(c=n-r),o.push(e,t,n),l++,a.next()}}if(l){let t=new Uint16Array(4*l),r=o[o.length-2];for(let e=o.length-3,n=0;e>=0;e-=3)t[n++]=o[e],t[n++]=o[e+1]-r,t[n++]=o[e+2]-r,t[n++]=n;n.push(new qD(t,o[2]-r,i)),s.push(r-e)}}function f(e){return(t,n,i)=>{let r,s,o=0,a=t.length-1;if(a>=0&&(r=t[a])instanceof VD){if(!a&&r.type==e&&r.length==i)return r;(s=r.prop(DD.lookAhead))&&(o=n[a]+r.length+s)}return g(e,t,n,i,o)}}function p(e,t,n,r,s,o,a,l){let c=[],h=[];for(;e.length>r;)c.push(e.pop()),h.push(t.pop()+n-s);e.push(g(i.types[a],c,h,o-s,l-o)),t.push(s-n)}function g(e,t,n,i){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,s=arguments.length>5?arguments[5]:void 0;if(c){let e=[DD.contextHash,c];s=s?[e].concat(s):[e]}if(r>25){let e=[DD.lookAhead,r];s=s?[e].concat(s):[e]}return new VD(e,t,n,i,s)}function m(e,t){let n=a.fork(),i=0,s=0,l=0,c=n.end-r,h={size:0,start:0,skip:0};e:for(let r=n.pos-e;n.pos>r;){let e=n.size;if(n.id==t&&e>=0){h.size=i,h.start=s,h.skip=l,l+=4,i+=4,n.next();continue}let a=n.pos-e;if(e<0||a<r||n.start<c)break;let u=n.id>=o?4:0,d=n.start;for(n.next();n.pos>a;){if(n.size<0){if(-3!=n.size)break e;u+=4}else n.id>=o&&(u+=4);n.next()}s=d,i+=e,l+=u}return(t<0||i==e)&&(h.size=i,h.start=s,h.skip=l),h.size>4?h:void 0}function v(e,t,n){let{id:i,start:r,end:s,size:l}=a;if(a.next(),l>=0&&i<o){let o=n;if(l>4){let i=a.pos-(l-4);for(;a.pos>i;)n=v(e,t,n)}t[--n]=o,t[--n]=s-e,t[--n]=r-e,t[--n]=i}else-3==l?c=i:-4==l&&(h=i);return n}let y=[],w=[];for(;a.pos>0;)u(e.start||0,e.bufferStart||0,y,w,-1,0);let b=null!==(t=e.length)&&void 0!==t?t:y.length?w[0]+y[0].length:0;return new VD(l[e.topID],y.reverse(),w.reverse(),b)}(e)}}VD.empty=new VD(QD.none,[],[],0);class FD{constructor(e,t){this.buffer=e,this.index=t}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new FD(this.buffer,this.index)}}class qD{constructor(e,t,n){this.buffer=e,this.length=t,this.set=n}get type(){return QD.none}toString(){let e=[];for(let t=0;t<this.buffer.length;)e.push(this.childString(t)),t=this.buffer[t+3];return e.join(",")}childString(e){let t=this.buffer[e],n=this.buffer[e+3],i=this.set.types[t],r=i.name;if(/\W/.test(r)&&!i.isError&&(r=JSON.stringify(r)),n==(e+=4))return r;let s=[];for(;e<n;)s.push(this.childString(e)),e=this.buffer[e+3];return r+"("+s.join(",")+")"}findChild(e,t,n,i,r){let{buffer:s}=this,o=-1;for(let a=e;a!=t&&!(BD(r,i,s[a+1],s[a+2])&&(o=a,n>0));a=s[a+3]);return o}slice(e,t,n){let i=this.buffer,r=new Uint16Array(t-e),s=0;for(let o=e,a=0;o<t;){r[a++]=i[o++],r[a++]=i[o++]-n;let t=r[a++]=i[o++]-n;r[a++]=i[o++]-e,s=Math.max(s,t)}return new qD(r,s,this.set)}}function BD(e,t,n,i){switch(e){case-2:return n<t;case-1:return i>=t&&n<t;case 0:return n<t&&i>t;case 1:return n<=t&&i>t;case 2:return i>t;case 4:return!0}}function WD(e,t,n,i){for(var r;e.from==e.to||(n<1?e.from>=t:e.from>t)||(n>-1?e.to<=t:e.to<t);){let t=!i&&e instanceof $D&&e.index<0?null:e.parent;if(!t)return e;e=t}let s=i?0:UD.IgnoreOverlays;if(i)for(let o=e,a=o.parent;a;o=a,a=o.parent)o instanceof $D&&o.index<0&&(null===(r=a.enter(t,n,s))||void 0===r?void 0:r.from)!=o.from&&(e=a);for(;;){let i=e.enter(t,n,s);if(!i)return e;e=i}}class HD{cursor(){return new eM(this,arguments.length>0&&void 0!==arguments[0]?arguments[0]:0)}getChild(e){let t=XD(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:null);return t.length?t[0]:null}getChildren(e){return XD(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}resolve(e){return WD(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,!1)}resolveInner(e){return WD(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,!0)}matchContext(e){return GD(this,e)}enterUnfinishedNodesBefore(e){let t=this.childBefore(e),n=this;for(;t;){let e=t.lastChild;if(!e||e.to!=t.to)break;e.type.isError&&e.from==e.to?(n=t,t=e.prevSibling):t=e}return n}get node(){return this}get next(){return this.parent}}class $D extends HD{constructor(e,t,n,i){super(),this._tree=e,this.from=t,this.index=n,this._parent=i}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,t,n,i){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;for(let s=this;;){for(let{children:o,positions:a}=s._tree,l=t>0?o.length:-1;e!=l;e+=t){let l=o[e],c=a[e]+s.from;if(BD(i,n,c,c+l.length))if(l instanceof qD){if(r&UD.ExcludeBuffers)continue;let o=l.findChild(0,l.buffer.length,t,n-c,i);if(o>-1)return new YD(new KD(s,l,e,c),null,o)}else if(r&UD.IncludeAnonymous||!l.type.isAnonymous||tM(l)){let o;if(!(r&UD.IgnoreMounts)&&(o=MD.get(l))&&!o.overlay)return new $D(o.tree,c,e,s);let a=new $D(l,c,e,s);return r&UD.IncludeAnonymous||!a.type.isAnonymous?a:a.nextChild(t<0?l.children.length-1:0,t,n,i)}}if(r&UD.IncludeAnonymous||!s.type.isAnonymous)return null;if(e=s.index>=0?s.index+t:t<0?-1:s._parent._tree.children.length,s=s._parent,!s)return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,t){let n,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(!(i&UD.IgnoreOverlays)&&(n=MD.get(this._tree))&&n.overlay){let i=e-this.from;for(let{from:e,to:r}of n.overlay)if((t>0?e<=i:e<i)&&(t<0?r>=i:r>i))return new $D(n.tree,n.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,t,i)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}}function XD(e,t,n,i){let r=e.cursor(),s=[];if(!r.firstChild())return s;if(null!=n)for(let o=!1;!o;)if(o=r.type.is(n),!r.nextSibling())return s;for(;;){if(null!=i&&r.type.is(i))return s;if(r.type.is(t)&&s.push(r.node),!r.nextSibling())return null==i?s:[]}}function GD(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.length-1;for(let i=e.parent;n>=0;i=i.parent){if(!i)return!1;if(!i.type.isAnonymous){if(t[n]&&t[n]!=i.name)return!1;n--}}return!0}class KD{constructor(e,t,n,i){this.parent=e,this.buffer=t,this.index=n,this.start=i}}class YD extends HD{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,t,n){super(),this.context=e,this._parent=t,this.index=n,this.type=e.buffer.set.types[e.buffer.buffer[n]]}child(e,t,n){let{buffer:i}=this.context,r=i.findChild(this.index+4,i.buffer[this.index+3],e,t-this.context.start,n);return r<0?null:new YD(this.context,this,r)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,t){if((arguments.length>2&&void 0!==arguments[2]?arguments[2]:0)&UD.ExcludeBuffers)return null;let{buffer:n}=this.context,i=n.findChild(this.index+4,n.buffer[this.index+3],t>0?1:-1,e-this.context.start,t);return i<0?null:new YD(this.context,this,i)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,t=e.buffer[this.index+3];return t<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new YD(this.context,this._parent,t):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,t=this._parent?this._parent.index+4:0;return this.index==t?this.externalSibling(-1):new YD(this.context,this._parent,e.findChild(t,this.index,-1,0,4))}get tree(){return null}toTree(){let e=[],t=[],{buffer:n}=this.context,i=this.index+4,r=n.buffer[this.index+3];if(r>i){let s=n.buffer[this.index+1];e.push(n.slice(i,r,s)),t.push(0)}return new VD(this.type,e,t,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}}function JD(e){if(!e.length)return null;let t=0,n=e[0];for(let s=1;s<e.length;s++){let i=e[s];(i.from>n.from||i.to<n.to)&&(n=i,t=s)}let i=n instanceof $D&&n.index<0?null:n.parent,r=e.slice();return i?r[t]=i:r.splice(t,1),new ZD(r,n)}class ZD{constructor(e,t){this.heads=e,this.node=t}get next(){return JD(this.heads)}}class eM{get name(){return this.type.name}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(this.mode=t,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof $D)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let t=e._parent;t;t=t._parent)this.stack.unshift(t.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return!!e&&(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0)}yieldBuf(e,t){this.index=e;let{start:n,buffer:i}=this.buffer;return this.type=t||i.set.types[i.buffer[e]],this.from=n+i.buffer[e+1],this.to=n+i.buffer[e+2],!0}yield(e){return!!e&&(e instanceof $D?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)))}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,t,n){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,t,n,this.mode));let{buffer:i}=this.buffer,r=i.findChild(this.index+4,i.buffer[this.index+3],e,t-this.buffer.start,n);return!(r<0)&&(this.stack.push(this.index),this.yieldBuf(r))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.mode;return this.buffer?!(n&UD.ExcludeBuffers)&&this.enterChild(1,e,t):this.yield(this._tree.enter(e,t,n))}parent(){if(!this.buffer)return this.yieldNode(this.mode&UD.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&UD.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return!!this._tree._parent&&this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode));let{buffer:t}=this.buffer,n=this.stack.length-1;if(e<0){let e=n<0?0:this.stack[n]+4;if(this.index!=e)return this.yieldBuf(t.findChild(e,this.index,-1,0,4))}else{let e=t.buffer[this.index+3];if(e<(n<0?t.buffer.length:t.buffer[this.stack[n]+3]))return this.yieldBuf(e)}return n<0&&this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode))}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let t,n,{buffer:i}=this;if(i){if(e>0){if(this.index<i.buffer.buffer.length)return!1}else for(let e=0;e<this.index;e++)if(i.buffer.buffer[e+3]<this.index)return!1;({index:t,parent:n}=i)}else({index:t,_parent:n}=this._tree);for(;n;({index:t,_parent:n}=n))if(t>-1)for(let i=t+e,r=e<0?-1:n._tree.children.length;i!=r;i+=e){let e=n._tree.children[i];if(this.mode&UD.IncludeAnonymous||e instanceof qD||!e.type.isAnonymous||tM(e))return!1}return!0}move(e,t){if(t&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.move(1,e)}prev(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.move(-1,e)}moveTo(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;for(;(this.from==this.to||(t<1?this.from>=e:this.from>e)||(t>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,t););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,t=null,n=0;if(e&&e.context==this.buffer)e:for(let i=this.index,r=this.stack.length;r>=0;){for(let s=e;s;s=s._parent)if(s.index==i){if(i==this.index)return s;t=s,n=r+1;break e}i=this.stack[--r]}for(let i=n;i<this.stack.length;i++)t=new YD(this.buffer,t,this.stack[i]);return this.bufferNode=new YD(this.buffer,t,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,t){for(let n=0;;){let i=!1;if(this.type.isAnonymous||!1!==e(this)){if(this.firstChild()){n++;continue}this.type.isAnonymous||(i=!0)}for(;i&&t&&t(this),i=this.type.isAnonymous,!this.nextSibling();){if(!n)return;this.parent(),n--,i=!0}}}matchContext(e){if(!this.buffer)return GD(this.node,e);let{buffer:t}=this.buffer,{types:n}=t.set;for(let i=e.length-1,r=this.stack.length-1;i>=0;r--){if(r<0)return GD(this.node,e,i);let s=n[t.buffer[this.stack[r]]];if(!s.isAnonymous){if(e[i]&&e[i]!=s.name)return!1;i--}}return!0}}function tM(e){return e.children.some((e=>e instanceof qD||!e.type.isAnonymous||tM(e)))}const nM=new WeakMap;function iM(e,t){if(!e.isAnonymous||t instanceof qD||t.type!=e)return 1;let n=nM.get(t);if(null==n){n=1;for(let i of t.children){if(i.type!=e||!(i instanceof VD)){n=1;break}n+=iM(e,i)}nM.set(t,n)}return n}function rM(e,t,n,i,r,s,o,a,l){let c=0;for(let f=i;f<r;f++)c+=iM(e,t[f]);let h=Math.ceil(1.5*c/8),u=[],d=[];return function t(n,i,r,o,a){for(let c=r;c<o;){let r=c,f=i[c],p=iM(e,n[c]);for(c++;c<o;c++){let t=iM(e,n[c]);if(p+t>=h)break;p+=t}if(c==r+1){if(p>h){let e=n[r];t(e.children,e.positions,0,e.children.length,i[r]+a);continue}u.push(n[r])}else{let t=i[c-1]+n[c-1].length-f;u.push(rM(e,n,i,r,c,f,t,null,l))}d.push(f+a-s)}}(t,n,i,r,0),(a||l)(u,d,o)}class sM{constructor(){this.map=new WeakMap}setBuffer(e,t,n){let i=this.map.get(e);i||this.map.set(e,i=new Map),i.set(t,n)}getBuffer(e,t){let n=this.map.get(e);return n&&n.get(t)}set(e,t){e instanceof YD?this.setBuffer(e.context.buffer,e.index,t):e instanceof $D&&this.map.set(e.tree,t)}get(e){return e instanceof YD?this.getBuffer(e.context.buffer,e.index):e instanceof $D?this.map.get(e.tree):void 0}cursorSet(e,t){e.buffer?this.setBuffer(e.buffer.buffer,e.index,t):this.map.set(e.tree,t)}cursorGet(e){return e.buffer?this.getBuffer(e.buffer.buffer,e.index):this.map.get(e.tree)}}class oM{constructor(e,t,n,i){let r=arguments.length>4&&void 0!==arguments[4]&&arguments[4],s=arguments.length>5&&void 0!==arguments[5]&&arguments[5];this.from=e,this.to=t,this.tree=n,this.offset=i,this.open=(r?1:0)|(s?2:0)}get openStart(){return(1&this.open)>0}get openEnd(){return(2&this.open)>0}static addTree(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=[new oM(0,e.length,e,0,!1,n)];for(let r of t)r.to>e.length&&i.push(r);return i}static applyChanges(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:128;if(!t.length)return e;let i=[],r=1,s=e.length?e[0]:null;for(let o=0,a=0,l=0;;o++){let c=o<t.length?t[o]:null,h=c?c.fromA:1e9;if(h-a>=n)for(;s&&s.from<h;){let t=s;if(a>=t.from||h<=t.to||l){let e=Math.max(t.from,a)-l,n=Math.min(t.to,h)-l;t=e>=n?null:new oM(e,n,t.tree,t.offset+l,o>0,!!c)}if(t&&i.push(t),s.to>h)break;s=r<e.length?e[r++]:null}if(!c)break;a=c.toA,l=c.toA-c.toB}return i}}class aM{startParse(e,t,n){return"string"==typeof e&&(e=new lM(e)),n=n?n.length?n.map((e=>new RD(e.from,e.to))):[new RD(0,0)]:[new RD(0,e.length)],this.createParse(e,t||[],n)}parse(e,t,n){let i=this.startParse(e,t,n);for(;;){let e=i.advance();if(e)return e}}}class lM{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,t){return this.string.slice(e,t)}}new DD({perNode:!0});let cM=0;class hM{constructor(e,t,n){this.set=e,this.base=t,this.modified=n,this.id=cM++}static define(e){if(null===e||void 0===e?void 0:e.base)throw new Error("Can not derive from a modified tag");let t=new hM([],null,[]);if(t.set.push(t),e)for(let n of e.set)t.set.push(n);return t}static defineModifier(){let e=new dM;return t=>t.modified.indexOf(e)>-1?t:dM.get(t.base||t,t.modified.concat(e).sort(((e,t)=>e.id-t.id)))}}let uM=0;class dM{constructor(){this.instances=[],this.id=uM++}static get(e,t){if(!t.length)return e;let n=t[0].instances.find((n=>n.base==e&&function(e,t){return e.length==t.length&&e.every(((e,n)=>e==t[n]))}(t,n.modified)));if(n)return n;let i=[],r=new hM(i,e,t);for(let o of t)o.instances.push(r);let s=function(e){let t=[[]];for(let n=0;n<e.length;n++)for(let i=0,r=t.length;i<r;i++)t.push(t[i].concat(e[n]));return t.sort(((e,t)=>t.length-e.length))}(t);for(let o of e.set)if(!o.modified.length)for(let e of s)i.push(dM.get(o,e));return r}}function fM(e){let t=Object.create(null);for(let n in e){let i=e[n];Array.isArray(i)||(i=[i]);for(let e of n.split(" "))if(e){let n=[],r=2,s=e;for(let t=0;;){if("..."==s&&t>0&&t+3==e.length){r=1;break}let i=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(s);if(!i)throw new RangeError("Invalid path: "+e);if(n.push("*"==i[0]?"":'"'==i[0][0]?JSON.parse(i[0]):i[0]),t+=i[0].length,t==e.length)break;let o=e[t++];if(t==e.length&&"!"==o){r=0;break}if("/"!=o)throw new RangeError("Invalid path: "+e);s=e.slice(t)}let o=n.length-1,a=n[o];if(!a)throw new RangeError("Invalid path: "+e);let l=new gM(i,r,o>0?n.slice(0,o):null);t[a]=l.sort(t[a])}}return pM.add(t)}const pM=new DD;class gM{constructor(e,t,n,i){this.tags=e,this.mode=t,this.context=n,this.next=i}get opaque(){return 0==this.mode}get inherit(){return 1==this.mode}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}function mM(e,t){let n=Object.create(null);for(let s of e)if(Array.isArray(s.tag))for(let e of s.tag)n[e.id]=s.class;else n[s.tag.id]=s.class;let{scope:i,all:r=null}=t||{};return{style:e=>{let t=r;for(let i of e)for(let e of i.set){let i=n[e.id];if(i){t=t?t+" "+i:i;break}}return t},scope:i}}gM.empty=new gM([],2,null);const vM=hM.define,yM=vM(),wM=vM(),bM=vM(wM),OM=vM(wM),kM=vM(),SM=vM(kM),xM=vM(kM),TM=vM(),CM=vM(TM),EM=vM(),_M=vM(),AM=vM(),PM=vM(AM),NM=vM(),IM={comment:yM,lineComment:vM(yM),blockComment:vM(yM),docComment:vM(yM),name:wM,variableName:vM(wM),typeName:bM,tagName:vM(bM),propertyName:OM,attributeName:vM(OM),className:vM(wM),labelName:vM(wM),namespace:vM(wM),macroName:vM(wM),literal:kM,string:SM,docString:vM(SM),character:vM(SM),attributeValue:vM(SM),number:xM,integer:vM(xM),float:vM(xM),bool:vM(kM),regexp:vM(kM),escape:vM(kM),color:vM(kM),url:vM(kM),keyword:EM,self:vM(EM),null:vM(EM),atom:vM(EM),unit:vM(EM),modifier:vM(EM),operatorKeyword:vM(EM),controlKeyword:vM(EM),definitionKeyword:vM(EM),moduleKeyword:vM(EM),operator:_M,derefOperator:vM(_M),arithmeticOperator:vM(_M),logicOperator:vM(_M),bitwiseOperator:vM(_M),compareOperator:vM(_M),updateOperator:vM(_M),definitionOperator:vM(_M),typeOperator:vM(_M),controlOperator:vM(_M),punctuation:AM,separator:vM(AM),bracket:PM,angleBracket:vM(PM),squareBracket:vM(PM),paren:vM(PM),brace:vM(PM),content:TM,heading:CM,heading1:vM(CM),heading2:vM(CM),heading3:vM(CM),heading4:vM(CM),heading5:vM(CM),heading6:vM(CM),contentSeparator:vM(TM),list:vM(TM),quote:vM(TM),emphasis:vM(TM),strong:vM(TM),link:vM(TM),monospace:vM(TM),strikethrough:vM(TM),inserted:vM(),deleted:vM(),changed:vM(),invalid:vM(),meta:NM,documentMeta:vM(NM),annotation:vM(NM),processingInstruction:vM(NM),definition:hM.defineModifier(),constant:hM.defineModifier(),function:hM.defineModifier(),standard:hM.defineModifier(),local:hM.defineModifier(),special:hM.defineModifier()};mM([{tag:IM.link,class:"tok-link"},{tag:IM.heading,class:"tok-heading"},{tag:IM.emphasis,class:"tok-emphasis"},{tag:IM.strong,class:"tok-strong"},{tag:IM.keyword,class:"tok-keyword"},{tag:IM.atom,class:"tok-atom"},{tag:IM.bool,class:"tok-bool"},{tag:IM.url,class:"tok-url"},{tag:IM.labelName,class:"tok-labelName"},{tag:IM.inserted,class:"tok-inserted"},{tag:IM.deleted,class:"tok-deleted"},{tag:IM.literal,class:"tok-literal"},{tag:IM.string,class:"tok-string"},{tag:IM.number,class:"tok-number"},{tag:[IM.regexp,IM.escape,IM.special(IM.string)],class:"tok-string2"},{tag:IM.variableName,class:"tok-variableName"},{tag:IM.local(IM.variableName),class:"tok-variableName tok-local"},{tag:IM.definition(IM.variableName),class:"tok-variableName tok-definition"},{tag:IM.special(IM.variableName),class:"tok-variableName2"},{tag:IM.definition(IM.propertyName),class:"tok-propertyName tok-definition"},{tag:IM.typeName,class:"tok-typeName"},{tag:IM.namespace,class:"tok-namespace"},{tag:IM.className,class:"tok-className"},{tag:IM.macroName,class:"tok-macroName"},{tag:IM.propertyName,class:"tok-propertyName"},{tag:IM.operator,class:"tok-operator"},{tag:IM.comment,class:"tok-comment"},{tag:IM.meta,class:"tok-meta"},{tag:IM.invalid,class:"tok-invalid"},{tag:IM.punctuation,class:"tok-punctuation"}]);var RM;const DM=new DD;function MM(e){return dg.define({combine:e?t=>t.concat(e):void 0})}const LM=new DD;class QM{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";this.data=e,this.name=i,em.prototype.hasOwnProperty("tree")||Object.defineProperty(em.prototype,"tree",{get(){return UM(this)}}),this.parser=t,this.extension=[GM.of(this),em.languageData.of(((e,t,n)=>{let i=zM(e,t,n),r=i.type.prop(DM);if(!r)return[];let s=e.facet(r),o=i.type.prop(LM);if(o){let r=i.resolve(t-i.from,n);for(let t of o)if(t.test(r,e)){let n=e.facet(t.facet);return"replace"==t.type?n:n.concat(s)}}return s}))].concat(n)}isActiveAt(e,t){return zM(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1).type.prop(DM)==this.data}findRegions(e){let t=e.facet(GM);if((null===t||void 0===t?void 0:t.data)==this.data)return[{from:0,to:e.doc.length}];if(!t||!t.allowsNesting)return[];let n=[],i=(e,t)=>{if(e.prop(DM)==this.data)return void n.push({from:t,to:t+e.length});let r=e.prop(DD.mounted);if(r){if(r.tree.prop(DM)==this.data){if(r.overlay)for(let e of r.overlay)n.push({from:e.from+t,to:e.to+t});else n.push({from:t,to:t+e.length});return}if(r.overlay){let e=n.length;if(i(r.tree,r.overlay[0].from+t),n.length>e)return}}for(let n=0;n<e.children.length;n++){let r=e.children[n];r instanceof VD&&i(r,e.positions[n]+t)}};return i(UM(e),0),n}get allowsNesting(){return!0}}function zM(e,t,n){let i=e.facet(GM),r=UM(e).topNode;if(!i||i.allowsNesting)for(let s=r;s;s=s.enter(t,n,UD.ExcludeBuffers))s.type.isTop&&(r=s);return r}QM.setState=Fg.define();class jM extends QM{constructor(e,t,n){super(e,t,[],n),this.parser=t}static define(e){let t=MM(e.languageData);return new jM(t,e.parser.configure({props:[DM.add((e=>e.isTop?t:void 0))]}),e.name)}configure(e,t){return new jM(this.data,this.parser.configure(e),t||this.name)}get allowsNesting(){return this.parser.hasWrappers()}}function UM(e){let t=e.field(QM.state,!1);return t?t.tree:VD.empty}class VM{constructor(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}get length(){return this.doc.length}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,t){let n=this.cursorPos-this.string.length;return e<n||t>=this.cursorPos?this.doc.sliceString(e,t):this.string.slice(e-n,t-n)}}let FM=null;class qM{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3?arguments[3]:void 0,r=arguments.length>4?arguments[4]:void 0,s=arguments.length>5?arguments[5]:void 0,o=arguments.length>6?arguments[6]:void 0,a=arguments.length>7?arguments[7]:void 0;this.parser=e,this.state=t,this.fragments=n,this.tree=i,this.treeLen=r,this.viewport=s,this.skipped=o,this.scheduleOn=a,this.parse=null,this.tempSkipped=[]}static create(e,t,n){return new qM(e,t,[],VD.empty,0,n,[],null)}startParse(){return this.parser.startParse(new VM(this.state.doc),this.fragments)}work(e,t){return null!=t&&t>=this.state.doc.length&&(t=void 0),this.tree!=VD.empty&&this.isDone(null!==t&&void 0!==t?t:this.state.doc.length)?(this.takeTree(),!0):this.withContext((()=>{var n;if("number"==typeof e){let t=Date.now()+e;e=()=>Date.now()>t}for(this.parse||(this.parse=this.startParse()),null!=t&&(null==this.parse.stoppedAt||this.parse.stoppedAt>t)&&t<this.state.doc.length&&this.parse.stopAt(t);;){let i=this.parse.advance();if(i){if(this.fragments=this.withoutTempSkipped(oM.addTree(i,this.fragments,null!=this.parse.stoppedAt)),this.treeLen=null!==(n=this.parse.stoppedAt)&&void 0!==n?n:this.state.doc.length,this.tree=i,this.parse=null,!(this.treeLen<(null!==t&&void 0!==t?t:this.state.doc.length)))return!0;this.parse=this.startParse()}if(e())return!1}}))}takeTree(){let e,t;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((null==this.parse.stoppedAt||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext((()=>{for(;!(t=this.parse.advance()););})),this.treeLen=e,this.tree=t,this.fragments=this.withoutTempSkipped(oM.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let t=FM;FM=this;try{return e()}finally{FM=t}}withoutTempSkipped(e){for(let t;t=this.tempSkipped.pop();)e=BM(e,t.from,t.to);return e}changes(e,t){let{fragments:n,tree:i,treeLen:r,viewport:s,skipped:o}=this;if(this.takeTree(),!e.empty){let t=[];if(e.iterChangedRanges(((e,n,i,r)=>t.push({fromA:e,toA:n,fromB:i,toB:r}))),n=oM.applyChanges(n,t),i=VD.empty,r=0,s={from:e.mapPos(s.from,-1),to:e.mapPos(s.to,1)},this.skipped.length){o=[];for(let t of this.skipped){let n=e.mapPos(t.from,1),i=e.mapPos(t.to,-1);n<i&&o.push({from:n,to:i})}}}return new qM(this.parser,t,n,i,r,s,o,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let t=this.skipped.length;for(let n=0;n<this.skipped.length;n++){let{from:t,to:i}=this.skipped[n];t<e.to&&i>e.from&&(this.fragments=BM(this.fragments,t,i),this.skipped.splice(n--,1))}return!(this.skipped.length>=t)&&(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,t){this.skipped.push({from:e,to:t})}static getSkippingParser(e){return new class extends aM{createParse(t,n,i){let r=i[0].from,s=i[i.length-1].to;return{parsedPos:r,advance(){let t=FM;if(t){for(let e of i)t.tempSkipped.push(e);e&&(t.scheduleOn=t.scheduleOn?Promise.all([t.scheduleOn,e]):e)}return this.parsedPos=s,new VD(QD.none,[],[],s-r)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let t=this.fragments;return this.treeLen>=e&&t.length&&0==t[0].from&&t[0].to>=e}static get(){return FM}}function BM(e,t,n){return oM.applyChanges(e,[{fromA:t,toA:n,fromB:t,toB:n}])}class WM{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let t=this.context.changes(e.changes,e.state),n=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),t.viewport.to);return t.work(20,n)||t.takeTree(),new WM(t)}static init(e){let t=Math.min(3e3,e.doc.length),n=qM.create(e.facet(GM).parser,e,{from:0,to:t});return n.work(20,t)||n.takeTree(),new WM(n)}}QM.state=wg.define({create:WM.init,update(e,t){for(let n of t.effects)if(n.is(QM.setState))return n.value;return t.startState.facet(GM)!=t.state.facet(GM)?WM.init(t.state):e.apply(t)}});let HM=e=>{let t=setTimeout((()=>e()),500);return()=>clearTimeout(t)};"undefined"!=typeof requestIdleCallback&&(HM=e=>{let t=-1,n=setTimeout((()=>{t=requestIdleCallback(e,{timeout:400})}),100);return()=>t<0?clearTimeout(n):cancelIdleCallback(t)});const $M="undefined"!=typeof navigator&&(null===(RM=navigator.scheduling)||void 0===RM?void 0:RM.isInputPending)?()=>navigator.scheduling.isInputPending():null,XM=Ey.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let t=this.view.state.field(QM.state).context;(t.updateViewport(e.view.viewport)||this.view.viewport.to>t.treeLen)&&this.scheduleWork(),(e.docChanged||e.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(t)}scheduleWork(){if(this.working)return;let{state:e}=this.view,t=e.field(QM.state);t.tree==t.context.tree&&t.context.isDone(e.doc.length)||(this.working=HM(this.work))}work(e){this.working=null;let t=Date.now();if(this.chunkEnd<t&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=t+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:n,viewport:{to:i}}=this.view,r=n.field(QM.state);if(r.tree==r.context.tree&&r.context.isDone(i+1e5))return;let s=Date.now()+Math.min(this.chunkBudget,100,e&&!$M?Math.max(25,e.timeRemaining()-5):1e9),o=r.context.treeLen<i&&n.doc.length>i+1e3,a=r.context.work((()=>$M&&$M()||Date.now()>s),i+(o?0:1e5));this.chunkBudget-=Date.now()-t,(a||this.chunkBudget<=0)&&(r.context.takeTree(),this.view.dispatch({effects:QM.setState.of(new WM(r.context))})),this.chunkBudget>0&&(!a||o)&&this.scheduleWork(),this.checkAsyncSchedule(r.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then((()=>this.scheduleWork())).catch((e=>Sy(this.view.state,e))).then((()=>this.workScheduled--)),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),GM=dg.define({combine:e=>e.length?e[0]:null,enables:e=>[QM.state,XM,xb.contentAttributes.compute([e],(t=>{let n=t.facet(e);return n&&n.name?{"data-language":n.name}:{}}))]});class KM{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];this.language=e,this.support=t,this.extension=[e,t]}}const YM=dg.define({combine:e=>{if(!e.length)return"  ";let t=e[0];if(!t||/\S/.test(t)||Array.from(t).some((e=>e!=t[0])))throw new Error("Invalid indent unit: "+JSON.stringify(e[0]));return t}});const JM=new DD;function ZM(e){let{closing:t,align:n=!0,units:i=1}=e;return e=>eL(e,n,i,t)}function eL(e,t,n,i,r){let s=e.textAfter,o=s.match(/^\s*/)[0].length,a=i&&s.slice(o,o+i.length)==i||r==e.pos+o,l=t?function(e){let t=e.node,n=t.childAfter(t.from),i=t.lastChild;if(!n)return null;let r=e.options.simulateBreak,s=e.state.doc.lineAt(n.from),o=null==r||r<=s.from?s.to:Math.min(s.to,r);for(let a=n.to;;){let e=t.childAfter(a);if(!e||e==i)return null;if(!e.type.isSkipped)return e.from<o?n:null;a=e.to}}(e):null;return l?a?e.column(l.from):e.column(l.to):e.baseIndent+(a?0:e.unit*n)}const tL=new DD;class nL{constructor(e,t){let n;function i(e){let t=Sm.newName();return(n||(n=Object.create(null)))["."+t]=e,t}this.specs=e;const r="string"==typeof t.all?t.all:t.all?i(t.all):void 0,s=t.scope;this.scope=s instanceof QM?e=>e.prop(DM)==s.data:s?e=>e==s:void 0,this.style=mM(e.map((e=>({tag:e.tag,class:e.class||i(Object.assign({},e,{tag:null}))}))),{all:r}).style,this.module=n?new Sm(n):null,this.themeType=t.themeType}static define(e,t){return new nL(e,t||{})}}IM.meta,IM.link,IM.heading,IM.emphasis,IM.strong,IM.strikethrough,IM.keyword,IM.atom,IM.bool,IM.url,IM.contentSeparator,IM.labelName,IM.literal,IM.inserted,IM.string,IM.deleted,IM.regexp,IM.escape,IM.string,IM.variableName,IM.variableName,IM.typeName,IM.namespace,IM.className,IM.variableName,IM.macroName,IM.propertyName,IM.comment,IM.invalid;const iL=Object.create(null),rL=[QD.none],sL=[],oL=Object.create(null),aL=Object.create(null);for(let[Sk,xj]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])aL[Sk]=cL(iL,xj);function lL(e,t){sL.indexOf(e)>-1||(sL.push(e),console.warn(t))}function cL(e,t){let n=[];for(let a of t.split(" ")){let t=[];for(let n of a.split(".")){let i=e[n]||IM[n];i?"function"==typeof i?t.length?t=t.map(i):lL(n,"Modifier ".concat(n," used at start of tag")):t.length?lL(n,"Tag ".concat(n," used as modifier")):t=Array.isArray(i)?i:[i]:lL(n,"Unknown highlighting tag ".concat(n))}for(let e of t)n.push(e)}if(!n.length)return 0;let i=t.replace(/ /g,"_"),r=i+" "+n.map((e=>e.id)),s=oL[r];if(s)return s.id;let o=oL[r]=QD.define({id:rL.length,name:i,props:[fM({[i]:n})]});return rL.push(o),o.id}Bv.RTL,Bv.LTR;function hL(e){let t=Object.keys(e).join(""),n=/\w/.test(t);return n&&(t=t.replace(/\w/g,"")),"[".concat(n?"\\w":"").concat(t.replace(/[^\w\s]/g,"\\$&"),"]")}function uL(e){let t=e.map((e=>"string"==typeof e?{label:e}:e)),[n,i]=t.every((e=>/^\w+$/.test(e.label)))?[/\w*$/,/\w+$/]:function(e){let t=Object.create(null),n=Object.create(null);for(let{label:r}of e){t[r[0]]=!0;for(let e=1;e<r.length;e++)n[r[e]]=!0}let i=hL(t)+hL(n)+"*$";return[new RegExp("^"+i),new RegExp(i)]}(t);return e=>{let r=e.matchBefore(i);return r||e.explicit?{from:r?r.from:e.pos,options:t,validFor:n}:null}}function dL(e,t){return n=>{for(let t=UM(n.state).resolveInner(n.pos,-1);t;t=t.parent){if(e.indexOf(t.name)>-1)return null;if(t.type.isTop)break}return t(n)}}const fL=jg.define();"object"==typeof navigator&&navigator.platform;const pL=xb.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",height:"100%",listStyle:"none",margin:0,padding:0,"& > li, & > completion-section":{padding:"1px 3px",lineHeight:1.2},"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer"},"& > completion-section":{display:"list-item",borderBottom:"1px solid silver",paddingLeft:"0.5em",opacity:.7}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&light .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#777"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},"&dark .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#444"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'"\xb7\xb7\xb7"',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"".concat(400,"px"),boxSizing:"border-box"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},".cm-completionInfo.cm-completionInfo-left-narrow":{right:"".concat(30,"px")},".cm-completionInfo.cm-completionInfo-right-narrow":{left:"".concat(30,"px")},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",display:"inline-block",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6",boxSizing:"content-box"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"'\u0192'"}},".cm-completionIcon-class":{"&:after":{content:"'\u25cb'"}},".cm-completionIcon-interface":{"&:after":{content:"'\u25cc'"}},".cm-completionIcon-variable":{"&:after":{content:"'\ud835\udc65'"}},".cm-completionIcon-constant":{"&:after":{content:"'\ud835\udc36'"}},".cm-completionIcon-type":{"&:after":{content:"'\ud835\udc61'"}},".cm-completionIcon-enum":{"&:after":{content:"'\u222a'"}},".cm-completionIcon-property":{"&:after":{content:"'\u25a1'"}},".cm-completionIcon-keyword":{"&:after":{content:"'\ud83d\udd11\ufe0e'"}},".cm-completionIcon-namespace":{"&:after":{content:"'\u25a2'"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}});class gL{constructor(e,t,n,i){this.field=e,this.line=t,this.from=n,this.to=i}}class mL{constructor(e,t,n){this.field=e,this.from=t,this.to=n}map(e){let t=e.mapPos(this.from,-1,Zp.TrackDel),n=e.mapPos(this.to,1,Zp.TrackDel);return null==t||null==n?null:new mL(this.field,t,n)}}class vL{constructor(e,t){this.lines=e,this.fieldPositions=t}instantiate(e,t){let n=[],i=[t],r=e.doc.lineAt(t),s=/^\s*/.exec(r.text)[0];for(let a of this.lines){if(n.length){let n=s,r=/^\t*/.exec(a)[0].length;for(let t=0;t<r;t++)n+=e.facet(YM);i.push(t+n.length-r),a=n+a.slice(r)}n.push(a),t+=a.length+1}let o=this.fieldPositions.map((e=>new mL(e.field,i[e.line]+e.from,i[e.line]+e.to)));return{text:n,ranges:o}}static parse(e){let t,n=[],i=[],r=[];for(let s of e.split(/\r\n?|\n/)){for(;t=/[#$]\{(?:(\d+)(?::([^}]*))?|((?:\\[{}]|[^}])*))\}/.exec(s);){let e=t[1]?+t[1]:null,o=t[2]||t[3]||"",a=-1,l=o.replace(/\\[{}]/g,(e=>e[1]));for(let t=0;t<n.length;t++)(null!=e?n[t].seq==e:l&&n[t].name==l)&&(a=t);if(a<0){let t=0;for(;t<n.length&&(null==e||null!=n[t].seq&&n[t].seq<e);)t++;n.splice(t,0,{seq:e,name:l}),a=t;for(let e of r)e.field>=a&&e.field++}r.push(new gL(a,i.length,t.index,t.index+l.length)),s=s.slice(0,t.index)+o+s.slice(t.index+t[0].length)}s=s.replace(/\\([{}])/g,((e,t,n)=>{for(let s of r)s.line==i.length&&s.from>n&&(s.from--,s.to--);return t})),i.push(s)}return new vL(i,r)}}let yL=Mv.widget({widget:new class extends Rv{toDOM(){let e=document.createElement("span");return e.className="cm-snippetFieldPosition",e}ignoreEvent(){return!1}}}),wL=Mv.mark({class:"cm-snippetField"});class bL{constructor(e,t){this.ranges=e,this.active=t,this.deco=Mv.set(e.map((e=>(e.from==e.to?yL:wL).range(e.from,e.to))))}map(e){let t=[];for(let n of this.ranges){let i=n.map(e);if(!i)return null;t.push(i)}return new bL(t,this.active)}selectionInsideField(e){return e.ranges.every((e=>this.ranges.some((t=>t.field==this.active&&t.from<=e.from&&t.to>=e.to))))}}const OL=Fg.define({map:(e,t)=>e&&e.map(t)}),kL=Fg.define(),SL=wg.define({create:()=>null,update(e,t){for(let n of t.effects){if(n.is(OL))return n.value;if(n.is(kL)&&e)return new bL(e.ranges,n.value)}return e&&t.docChanged&&(e=e.map(t.changes)),e&&t.selection&&!e.selectionInsideField(t.selection)&&(e=null),e},provide:e=>xb.decorations.from(e,(e=>e?e.deco:Mv.none))});function xL(e,t){return cg.create(e.filter((e=>e.field==t)).map((e=>cg.range(e.from,e.to))))}function TL(e){let t=vL.parse(e);return(e,n,i,r)=>{let{text:s,ranges:o}=t.instantiate(e.state,i),a={changes:{from:i,to:r,insert:Pp.of(s)},scrollIntoView:!0,annotations:n?[fL.of(n),qg.userEvent.of("input.complete")]:void 0};if(o.length&&(a.selection=xL(o,0)),o.some((e=>e.field>0))){let t=new bL(o,0),n=a.effects=[OL.of(t)];void 0===e.state.field(SL,!1)&&n.push(Fg.appendConfig.of([SL,AL,NL,pL]))}e.dispatch(e.state.update(a))}}function CL(e){return t=>{let{state:n,dispatch:i}=t,r=n.field(SL,!1);if(!r||e<0&&0==r.active)return!1;let s=r.active+e,o=e>0&&!r.ranges.some((t=>t.field==s+e));return i(n.update({selection:xL(r.ranges,s),effects:OL.of(o?null:new bL(r.ranges,s)),scrollIntoView:!0})),!0}}const EL=[{key:"Tab",run:CL(1),shift:CL(-1)},{key:"Escape",run:e=>{let{state:t,dispatch:n}=e;return!!t.field(SL,!1)&&(n(t.update({effects:OL.of(null)})),!0)}}],_L=dg.define({combine:e=>e.length?e[0]:EL}),AL=Tg.highest(Ib.compute([_L],(e=>e.facet(_L))));function PL(e,t){return Object.assign(Object.assign({},t),{apply:TL(e)})}const NL=xb.domEventHandlers({mousedown(e,t){let n,i=t.state.field(SL,!1);if(!i||null==(n=t.posAtCoords({x:e.clientX,y:e.clientY})))return!1;let r=i.ranges.find((e=>e.from<=n&&e.to>=n));return!(!r||r.field==i.active)&&(t.dispatch({selection:xL(i.ranges,r.field),effects:OL.of(i.ranges.some((e=>e.field>r.field))?new bL(i.ranges,r.field):null),scrollIntoView:!0}),!0)}});const IL=new class extends nm{};IL.startSide=1,IL.endSide=-1;"object"==typeof navigator&&navigator.userAgent;const RL=new sM,DL=new Set(["Script","Body","FunctionDefinition","ClassDefinition","LambdaExpression","ForStatement","MatchClause"]);function ML(e){return(t,n,i)=>{if(i)return!1;let r=t.node.getChild("VariableName");return r&&n(r,e),!0}}const LL={FunctionDefinition:ML("function"),ClassDefinition:ML("class"),ForStatement(e,t,n){if(n)for(let i=e.node.firstChild;i;i=i.nextSibling)if("VariableName"==i.name)t(i,"variable");else if("in"==i.name)break},ImportStatement(e,t){var n,i;let{node:r}=e,s="from"==(null===(n=r.firstChild)||void 0===n?void 0:n.name);for(let o=r.getChild("import");o;o=o.nextSibling)"VariableName"==o.name&&"as"!=(null===(i=o.nextSibling)||void 0===i?void 0:i.name)&&t(o,s?"variable":"namespace")},AssignStatement(e,t){for(let n=e.node.firstChild;n;n=n.nextSibling)if("VariableName"==n.name)t(n,"variable");else if(":"==n.name||"AssignOp"==n.name)break},ParamList(e,t){for(let n=null,i=e.node.firstChild;i;i=i.nextSibling)"VariableName"!=i.name||n&&/\*|AssignOp/.test(n.name)||t(i,"variable"),n=i},CapturePattern:ML("variable"),AsPattern:ML("variable"),__proto__:null};function QL(e,t){let n=RL.get(t);if(n)return n;let i=[],r=!0;function s(t,n){let r=e.sliceString(t.from,t.to);i.push({label:r,type:n})}return t.cursor(UD.IncludeAnonymous).iterate((t=>{if(t.name){let e=LL[t.name];if(e&&e(t,s,r)||!r&&DL.has(t.name))return!1;r=!1}else if(t.to-t.from>8192){for(let n of QL(e,t.node))i.push(n);return!1}})),RL.set(t,i),i}const zL=/^[\w\xa1-\uffff][\w\d\xa1-\uffff]*$/,jL=["String","FormatString","Comment","PropertyName"];function UL(e){let t=UM(e.state).resolveInner(e.pos,-1);if(jL.indexOf(t.name)>-1)return null;let n="VariableName"==t.name||t.to-t.from<20&&zL.test(e.state.sliceDoc(t.from,t.to));if(!n&&!e.explicit)return null;let i=[];for(let r=t;r;r=r.parent)DL.has(r.name)&&(i=i.concat(QL(e.state.doc,r)));return{options:i,from:n?t.from:e.pos,validFor:zL}}const VL=["__annotations__","__builtins__","__debug__","__doc__","__import__","__name__","__loader__","__package__","__spec__","False","None","True"].map((e=>({label:e,type:"constant"}))).concat(["ArithmeticError","AssertionError","AttributeError","BaseException","BlockingIOError","BrokenPipeError","BufferError","BytesWarning","ChildProcessError","ConnectionAbortedError","ConnectionError","ConnectionRefusedError","ConnectionResetError","DeprecationWarning","EOFError","Ellipsis","EncodingWarning","EnvironmentError","Exception","FileExistsError","FileNotFoundError","FloatingPointError","FutureWarning","GeneratorExit","IOError","ImportError","ImportWarning","IndentationError","IndexError","InterruptedError","IsADirectoryError","KeyError","KeyboardInterrupt","LookupError","MemoryError","ModuleNotFoundError","NameError","NotADirectoryError","NotImplemented","NotImplementedError","OSError","OverflowError","PendingDeprecationWarning","PermissionError","ProcessLookupError","RecursionError","ReferenceError","ResourceWarning","RuntimeError","RuntimeWarning","StopAsyncIteration","StopIteration","SyntaxError","SyntaxWarning","SystemError","SystemExit","TabError","TimeoutError","TypeError","UnboundLocalError","UnicodeDecodeError","UnicodeEncodeError","UnicodeError","UnicodeTranslateError","UnicodeWarning","UserWarning","ValueError","Warning","ZeroDivisionError"].map((e=>({label:e,type:"type"})))).concat(["bool","bytearray","bytes","classmethod","complex","float","frozenset","int","list","map","memoryview","object","range","set","staticmethod","str","super","tuple","type"].map((e=>({label:e,type:"class"})))).concat(["abs","aiter","all","anext","any","ascii","bin","breakpoint","callable","chr","compile","delattr","dict","dir","divmod","enumerate","eval","exec","exit","filter","format","getattr","globals","hasattr","hash","help","hex","id","input","isinstance","issubclass","iter","len","license","locals","max","min","next","oct","open","ord","pow","print","property","quit","repr","reversed","round","setattr","slice","sorted","sum","vars","zip"].map((e=>({label:e,type:"function"})))),FL=[PL("def ${name}(${params}):\n\t${}",{label:"def",detail:"function",type:"keyword"}),PL("for ${name} in ${collection}:\n\t${}",{label:"for",detail:"loop",type:"keyword"}),PL("while ${}:\n\t${}",{label:"while",detail:"loop",type:"keyword"}),PL("try:\n\t${}\nexcept ${error}:\n\t${}",{label:"try",detail:"/ except block",type:"keyword"}),PL("if ${}:\n\t\n",{label:"if",detail:"block",type:"keyword"}),PL("if ${}:\n\t${}\nelse:\n\t${}",{label:"if",detail:"/ else block",type:"keyword"}),PL("class ${name}:\n\tdef __init__(self, ${params}):\n\t\t\t${}",{label:"class",detail:"definition",type:"keyword"}),PL("import ${module}",{label:"import",detail:"statement",type:"keyword"}),PL("from ${module} import ${names}",{label:"from",detail:"import",type:"keyword"})],qL=dL(jL,uL(VL.concat(FL)));function BL(e){let{node:t,pos:n}=e,i=e.lineIndent(n,-1),r=null;for(;;){let s=t.childBefore(n);if(!s)break;if("Comment"==s.name)n=s.from;else if("Body"==s.name)e.baseIndentFor(s)+e.unit<=i&&(r=s),t=s;else{if(!s.type.is("Statement"))break;t=s}}return r}function WL(e,t){let n=e.baseIndentFor(t),i=e.lineAt(e.pos,-1),r=i.from+i.text.length;return/^\s*($|#)/.test(i.text)&&e.node.to<r+100&&!/\S/.test(e.state.sliceDoc(r,e.node.to))&&e.lineIndent(e.pos,-1)<=n||/^\s*(else:|elif |except |finally:)/.test(e.textAfter)&&e.lineIndent(e.pos,-1)>n?null:n+e.unit}const HL=jM.define({name:"python",parser:PD.configure({props:[JM.add({Body:e=>{var t;return null!==(t=WL(e,BL(e)||e.node))&&void 0!==t?t:e.continue()},IfStatement:e=>/^\s*(else:|elif )/.test(e.textAfter)?e.baseIndent:e.continue(),"ForStatement WhileStatement":e=>/^\s*else:/.test(e.textAfter)?e.baseIndent:e.continue(),TryStatement:e=>/^\s*(except |finally:|else:)/.test(e.textAfter)?e.baseIndent:e.continue(),"TupleExpression ComprehensionExpression ParamList ArgList ParenthesizedExpression":ZM({closing:")"}),"DictionaryExpression DictionaryComprehensionExpression SetExpression SetComprehensionExpression":ZM({closing:"}"}),"ArrayExpression ArrayComprehensionExpression":ZM({closing:"]"}),"String FormatString":()=>null,Script:e=>{var t;let n=BL(e);return null!==(t=n&&WL(e,n))&&void 0!==t?t:e.continue()}}),tL.add({"ArrayExpression DictionaryExpression SetExpression TupleExpression":function(e){let t=e.firstChild,n=e.lastChild;return t&&t.to<n.from?{from:t.to,to:n.type.isError?e.to:n.from}:null},Body:(e,t)=>({from:e.from+1,to:e.to-(e.to==t.doc.length?0:1)})})]}),languageData:{closeBrackets:{brackets:["(","[","{","'",'"',"'''",'"""'],stringPrefixes:["f","fr","rf","r","u","b","br","rb","F","FR","RF","R","U","B","BR","RB"]},commentTokens:{line:"#"},indentOnInput:/^\s*([\}\]\)]|else:|elif |except |finally:)$/}});const $L=e=>{let{currentQuestion:t,onCodeSubmit:n,onCodeChange:i,userId:r,activityOrder:o,setOutput:a}=e;const[l,c]=(0,s.useState)(""),[h,u]=(0,s.useState)(""),{setContainer:d}=QI({value:l,theme:II,extensions:[new KM(HL,[HL.data.of({autocomplete:UL}),HL.data.of({autocomplete:qL})])],onChange:e=>{c(e),i(e)}});(0,s.useEffect)((()=>{(async()=>{const e=bf(Tp,"users",r,"activities",o,"questions",t.id),n=await gp(e);if(n.exists()){const e=n.data().userCode;c(e)}else{const e=(e=>{switch(e){case"add":case"subtract":case"multiply":case"divide":case"power":case"mod":case"concat_strings":case"find_max":return"def ".concat(e,"(a, b):\n    # Write your code here\n    pass");case"is_even":return"def ".concat(e,"(a):\n    # Write your code here\n    pass");case"factorial":return"def ".concat(e,"(n):\n    # Write your code here\n    pass");default:return"# Write your code here\n# You can start coding right away\n# The editor will scroll if the content gets too long\n"}})(t.functionName);c(e),u(e)}})()}),[t,r,o]);return(0,Cp.jsxs)("div",{className:"coding-section",children:[(0,Cp.jsx)("p",{className:"coding-question",children:t.codingQuestion}),(0,Cp.jsx)("div",{ref:d,className:"code-editor"}),(0,Cp.jsx)("button",{onClick:()=>{const e=e=>{a((t=>t+e+"\n"))};Sk.pre="output",Sk.configure({output:e,read:e=>{if(void 0===Sk.builtinFiles||void 0===Sk.builtinFiles.files[e])throw new Error("File not found: '"+e+"'");return Sk.builtinFiles.files[e]}}),(Sk.TurtleGraphics||(Sk.TurtleGraphics={})).target="mycanvas",Sk.misceval.asyncToPromise((()=>Sk.importMainWithBody("<stdin>",!1,l,!0))).catch((t=>{e(t.toString())}))},children:"Run"}),(0,Cp.jsx)("button",{onClick:()=>n(l),children:"Submit"}),(0,Cp.jsx)("button",{onClick:()=>{c(h)},children:"Restart"})]})};function XL(e,t){return function(){return e.apply(t,arguments)}}const{toString:GL}=Object.prototype,{getPrototypeOf:KL}=Object,YL=(e=>t=>{const n=GL.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),JL=e=>(e=e.toLowerCase(),t=>YL(t)===e),ZL=e=>t=>typeof t===e,{isArray:eQ}=Array,tQ=ZL("undefined");const nQ=JL("ArrayBuffer");const iQ=ZL("string"),rQ=ZL("function"),sQ=ZL("number"),oQ=e=>null!==e&&"object"===typeof e,aQ=e=>{if("object"!==YL(e))return!1;const t=KL(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},lQ=JL("Date"),cQ=JL("File"),hQ=JL("Blob"),uQ=JL("FileList"),dQ=JL("URLSearchParams"),[fQ,pQ,gQ,mQ]=["ReadableStream","Request","Response","Headers"].map(JL);function vQ(e,t){let n,i,{allOwnKeys:r=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(null!==e&&"undefined"!==typeof e)if("object"!==typeof e&&(e=[e]),eQ(e))for(n=0,i=e.length;n<i;n++)t.call(null,e[n],n,e);else{const i=r?Object.getOwnPropertyNames(e):Object.keys(e),s=i.length;let o;for(n=0;n<s;n++)o=i[n],t.call(null,e[o],o,e)}}function yQ(e,t){t=t.toLowerCase();const n=Object.keys(e);let i,r=n.length;for(;r-- >0;)if(i=n[r],t===i.toLowerCase())return i;return null}const wQ="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:global,bQ=e=>!tQ(e)&&e!==wQ;const OQ=(kQ="undefined"!==typeof Uint8Array&&KL(Uint8Array),e=>kQ&&e instanceof kQ);var kQ;const SQ=JL("HTMLFormElement"),xQ=(e=>{let{hasOwnProperty:t}=e;return(e,n)=>t.call(e,n)})(Object.prototype),TQ=JL("RegExp"),CQ=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),i={};vQ(n,((n,r)=>{let s;!1!==(s=t(n,r,e))&&(i[r]=s||n)})),Object.defineProperties(e,i)},EQ="abcdefghijklmnopqrstuvwxyz",_Q="0123456789",AQ={DIGIT:_Q,ALPHA:EQ,ALPHA_DIGIT:EQ+EQ.toUpperCase()+_Q};const PQ=JL("AsyncFunction"),NQ={isArray:eQ,isArrayBuffer:nQ,isBuffer:function(e){return null!==e&&!tQ(e)&&null!==e.constructor&&!tQ(e.constructor)&&rQ(e.constructor.isBuffer)&&e.constructor.isBuffer(e)},isFormData:e=>{let t;return e&&("function"===typeof FormData&&e instanceof FormData||rQ(e.append)&&("formdata"===(t=YL(e))||"object"===t&&rQ(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){let t;return t="undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&nQ(e.buffer),t},isString:iQ,isNumber:sQ,isBoolean:e=>!0===e||!1===e,isObject:oQ,isPlainObject:aQ,isReadableStream:fQ,isRequest:pQ,isResponse:gQ,isHeaders:mQ,isUndefined:tQ,isDate:lQ,isFile:cQ,isBlob:hQ,isRegExp:TQ,isFunction:rQ,isStream:e=>oQ(e)&&rQ(e.pipe),isURLSearchParams:dQ,isTypedArray:OQ,isFileList:uQ,forEach:vQ,merge:function e(){const{caseless:t}=bQ(this)&&this||{},n={},i=(i,r)=>{const s=t&&yQ(n,r)||r;aQ(n[s])&&aQ(i)?n[s]=e(n[s],i):aQ(i)?n[s]=e({},i):eQ(i)?n[s]=i.slice():n[s]=i};for(let r=0,s=arguments.length;r<s;r++)arguments[r]&&vQ(arguments[r],i);return n},extend:function(e,t,n){let{allOwnKeys:i}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return vQ(t,((t,i)=>{n&&rQ(t)?e[i]=XL(t,n):e[i]=t}),{allOwnKeys:i}),e},trim:e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),inherits:(e,t,n,i)=>{e.prototype=Object.create(t.prototype,i),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},toFlatObject:(e,t,n,i)=>{let r,s,o;const a={};if(t=t||{},null==e)return t;do{for(r=Object.getOwnPropertyNames(e),s=r.length;s-- >0;)o=r[s],i&&!i(o,e,t)||a[o]||(t[o]=e[o],a[o]=!0);e=!1!==n&&KL(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},kindOf:YL,kindOfTest:JL,endsWith:(e,t,n)=>{e=String(e),(void 0===n||n>e.length)&&(n=e.length),n-=t.length;const i=e.indexOf(t,n);return-1!==i&&i===n},toArray:e=>{if(!e)return null;if(eQ(e))return e;let t=e.length;if(!sQ(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},forEachEntry:(e,t)=>{const n=(e&&e[Symbol.iterator]).call(e);let i;for(;(i=n.next())&&!i.done;){const n=i.value;t.call(e,n[0],n[1])}},matchAll:(e,t)=>{let n;const i=[];for(;null!==(n=e.exec(t));)i.push(n);return i},isHTMLForm:SQ,hasOwnProperty:xQ,hasOwnProp:xQ,reduceDescriptors:CQ,freezeMethods:e=>{CQ(e,((t,n)=>{if(rQ(e)&&-1!==["arguments","caller","callee"].indexOf(n))return!1;const i=e[n];rQ(i)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")}))}))},toObjectSet:(e,t)=>{const n={},i=e=>{e.forEach((e=>{n[e]=!0}))};return eQ(e)?i(e):i(String(e).split(t)),n},toCamelCase:e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,(function(e,t,n){return t.toUpperCase()+n})),noop:()=>{},toFiniteNumber:(e,t)=>null!=e&&Number.isFinite(e=+e)?e:t,findKey:yQ,global:wQ,isContextDefined:bQ,ALPHABET:AQ,generateString:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:16,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:AQ.ALPHA_DIGIT,n="";const{length:i}=t;for(;e--;)n+=t[Math.random()*i|0];return n},isSpecCompliantForm:function(e){return!!(e&&rQ(e.append)&&"FormData"===e[Symbol.toStringTag]&&e[Symbol.iterator])},toJSONObject:e=>{const t=new Array(10),n=(e,i)=>{if(oQ(e)){if(t.indexOf(e)>=0)return;if(!("toJSON"in e)){t[i]=e;const r=eQ(e)?[]:{};return vQ(e,((e,t)=>{const s=n(e,i+1);!tQ(s)&&(r[t]=s)})),t[i]=void 0,r}}return e};return n(e,0)},isAsyncFn:PQ,isThenable:e=>e&&(oQ(e)||rQ(e))&&rQ(e.then)&&rQ(e.catch)};function IQ(e,t,n,i,r){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),i&&(this.request=i),r&&(this.response=r)}NQ.inherits(IQ,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:NQ.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const RQ=IQ.prototype,DQ={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach((e=>{DQ[e]={value:e}})),Object.defineProperties(IQ,DQ),Object.defineProperty(RQ,"isAxiosError",{value:!0}),IQ.from=(e,t,n,i,r,s)=>{const o=Object.create(RQ);return NQ.toFlatObject(e,o,(function(e){return e!==Error.prototype}),(e=>"isAxiosError"!==e)),IQ.call(o,e.message,t,n,i,r),o.cause=e,o.name=e.name,s&&Object.assign(o,s),o};const MQ=IQ;function LQ(e){return NQ.isPlainObject(e)||NQ.isArray(e)}function QQ(e){return NQ.endsWith(e,"[]")?e.slice(0,-2):e}function zQ(e,t,n){return e?e.concat(t).map((function(e,t){return e=QQ(e),!n&&t?"["+e+"]":e})).join(n?".":""):t}const jQ=NQ.toFlatObject(NQ,{},null,(function(e){return/^is[A-Z]/.test(e)}));const UQ=function(e,t,n){if(!NQ.isObject(e))throw new TypeError("target must be an object");t=t||new FormData;const i=(n=NQ.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,(function(e,t){return!NQ.isUndefined(t[e])}))).metaTokens,r=n.visitor||c,s=n.dots,o=n.indexes,a=(n.Blob||"undefined"!==typeof Blob&&Blob)&&NQ.isSpecCompliantForm(t);if(!NQ.isFunction(r))throw new TypeError("visitor must be a function");function l(e){if(null===e)return"";if(NQ.isDate(e))return e.toISOString();if(!a&&NQ.isBlob(e))throw new MQ("Blob is not supported. Use a Buffer instead.");return NQ.isArrayBuffer(e)||NQ.isTypedArray(e)?a&&"function"===typeof Blob?new Blob([e]):Buffer.from(e):e}function c(e,n,r){let a=e;if(e&&!r&&"object"===typeof e)if(NQ.endsWith(n,"{}"))n=i?n:n.slice(0,-2),e=JSON.stringify(e);else if(NQ.isArray(e)&&function(e){return NQ.isArray(e)&&!e.some(LQ)}(e)||(NQ.isFileList(e)||NQ.endsWith(n,"[]"))&&(a=NQ.toArray(e)))return n=QQ(n),a.forEach((function(e,i){!NQ.isUndefined(e)&&null!==e&&t.append(!0===o?zQ([n],i,s):null===o?n:n+"[]",l(e))})),!1;return!!LQ(e)||(t.append(zQ(r,n,s),l(e)),!1)}const h=[],u=Object.assign(jQ,{defaultVisitor:c,convertValue:l,isVisitable:LQ});if(!NQ.isObject(e))throw new TypeError("data must be an object");return function e(n,i){if(!NQ.isUndefined(n)){if(-1!==h.indexOf(n))throw Error("Circular reference detected in "+i.join("."));h.push(n),NQ.forEach(n,(function(n,s){!0===(!(NQ.isUndefined(n)||null===n)&&r.call(t,n,NQ.isString(s)?s.trim():s,i,u))&&e(n,i?i.concat(s):[s])})),h.pop()}}(e),t};function VQ(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,(function(e){return t[e]}))}function FQ(e,t){this._pairs=[],e&&UQ(e,this,t)}const qQ=FQ.prototype;qQ.append=function(e,t){this._pairs.push([e,t])},qQ.toString=function(e){const t=e?function(t){return e.call(this,t,VQ)}:VQ;return this._pairs.map((function(e){return t(e[0])+"="+t(e[1])}),"").join("&")};const BQ=FQ;function WQ(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function HQ(e,t,n){if(!t)return e;const i=n&&n.encode||WQ,r=n&&n.serialize;let s;if(s=r?r(t,n):NQ.isURLSearchParams(t)?t.toString():new BQ(t,n).toString(i),s){const t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+s}return e}const $Q=class{constructor(){this.handlers=[]}use(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){NQ.forEach(this.handlers,(function(t){null!==t&&e(t)}))}},XQ={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},GQ={isBrowser:!0,classes:{URLSearchParams:"undefined"!==typeof URLSearchParams?URLSearchParams:BQ,FormData:"undefined"!==typeof FormData?FormData:null,Blob:"undefined"!==typeof Blob?Blob:null},protocols:["http","https","file","blob","url","data"]},KQ="undefined"!==typeof window&&"undefined"!==typeof document,YQ=(JQ="undefined"!==typeof navigator&&navigator.product,KQ&&["ReactNative","NativeScript","NS"].indexOf(JQ)<0);var JQ;const ZQ="undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"===typeof self.importScripts,ez=KQ&&window.location.href||"http://localhost",tz={...i,...GQ};const nz=function(e){function t(e,n,i,r){let s=e[r++];if("__proto__"===s)return!0;const o=Number.isFinite(+s),a=r>=e.length;if(s=!s&&NQ.isArray(i)?i.length:s,a)return NQ.hasOwnProp(i,s)?i[s]=[i[s],n]:i[s]=n,!o;i[s]&&NQ.isObject(i[s])||(i[s]=[]);return t(e,n,i[s],r)&&NQ.isArray(i[s])&&(i[s]=function(e){const t={},n=Object.keys(e);let i;const r=n.length;let s;for(i=0;i<r;i++)s=n[i],t[s]=e[s];return t}(i[s])),!o}if(NQ.isFormData(e)&&NQ.isFunction(e.entries)){const n={};return NQ.forEachEntry(e,((e,i)=>{t(function(e){return NQ.matchAll(/\w+|\[(\w*)]/g,e).map((e=>"[]"===e[0]?"":e[1]||e[0]))}(e),i,n,0)})),n}return null};const iz={transitional:XQ,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const n=t.getContentType()||"",i=n.indexOf("application/json")>-1,r=NQ.isObject(e);r&&NQ.isHTMLForm(e)&&(e=new FormData(e));if(NQ.isFormData(e))return i?JSON.stringify(nz(e)):e;if(NQ.isArrayBuffer(e)||NQ.isBuffer(e)||NQ.isStream(e)||NQ.isFile(e)||NQ.isBlob(e)||NQ.isReadableStream(e))return e;if(NQ.isArrayBufferView(e))return e.buffer;if(NQ.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let s;if(r){if(n.indexOf("application/x-www-form-urlencoded")>-1)return function(e,t){return UQ(e,new tz.classes.URLSearchParams,Object.assign({visitor:function(e,t,n,i){return tz.isNode&&NQ.isBuffer(e)?(this.append(t,e.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)}},t))}(e,this.formSerializer).toString();if((s=NQ.isFileList(e))||n.indexOf("multipart/form-data")>-1){const t=this.env&&this.env.FormData;return UQ(s?{"files[]":e}:e,t&&new t,this.formSerializer)}}return r||i?(t.setContentType("application/json",!1),function(e,t,n){if(NQ.isString(e))try{return(t||JSON.parse)(e),NQ.trim(e)}catch(kj){if("SyntaxError"!==kj.name)throw kj}return(n||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){const t=this.transitional||iz.transitional,n=t&&t.forcedJSONParsing,i="json"===this.responseType;if(NQ.isResponse(e)||NQ.isReadableStream(e))return e;if(e&&NQ.isString(e)&&(n&&!this.responseType||i)){const n=!(t&&t.silentJSONParsing)&&i;try{return JSON.parse(e)}catch(kj){if(n){if("SyntaxError"===kj.name)throw MQ.from(kj,MQ.ERR_BAD_RESPONSE,this,null,this.response);throw kj}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:tz.classes.FormData,Blob:tz.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};NQ.forEach(["delete","get","head","post","put","patch"],(e=>{iz.headers[e]={}}));const rz=iz,sz=NQ.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),oz=Symbol("internals");function az(e){return e&&String(e).trim().toLowerCase()}function lz(e){return!1===e||null==e?e:NQ.isArray(e)?e.map(lz):String(e)}function cz(e,t,n,i,r){return NQ.isFunction(i)?i.call(this,t,n):(r&&(t=n),NQ.isString(t)?NQ.isString(i)?-1!==t.indexOf(i):NQ.isRegExp(i)?i.test(t):void 0:void 0)}class hz{constructor(e){e&&this.set(e)}set(e,t,n){const i=this;function r(e,t,n){const r=az(t);if(!r)throw new Error("header name must be a non-empty string");const s=NQ.findKey(i,r);(!s||void 0===i[s]||!0===n||void 0===n&&!1!==i[s])&&(i[s||t]=lz(e))}const s=(e,t)=>NQ.forEach(e,((e,n)=>r(e,n,t)));if(NQ.isPlainObject(e)||e instanceof this.constructor)s(e,t);else if(NQ.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim()))s((e=>{const t={};let n,i,r;return e&&e.split("\n").forEach((function(e){r=e.indexOf(":"),n=e.substring(0,r).trim().toLowerCase(),i=e.substring(r+1).trim(),!n||t[n]&&sz[n]||("set-cookie"===n?t[n]?t[n].push(i):t[n]=[i]:t[n]=t[n]?t[n]+", "+i:i)})),t})(e),t);else if(NQ.isHeaders(e))for(const[o,a]of e.entries())r(a,o,n);else null!=e&&r(t,e,n);return this}get(e,t){if(e=az(e)){const n=NQ.findKey(this,e);if(n){const e=this[n];if(!t)return e;if(!0===t)return function(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let i;for(;i=n.exec(e);)t[i[1]]=i[2];return t}(e);if(NQ.isFunction(t))return t.call(this,e,n);if(NQ.isRegExp(t))return t.exec(e);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=az(e)){const n=NQ.findKey(this,e);return!(!n||void 0===this[n]||t&&!cz(0,this[n],n,t))}return!1}delete(e,t){const n=this;let i=!1;function r(e){if(e=az(e)){const r=NQ.findKey(n,e);!r||t&&!cz(0,n[r],r,t)||(delete n[r],i=!0)}}return NQ.isArray(e)?e.forEach(r):r(e),i}clear(e){const t=Object.keys(this);let n=t.length,i=!1;for(;n--;){const r=t[n];e&&!cz(0,this[r],r,e,!0)||(delete this[r],i=!0)}return i}normalize(e){const t=this,n={};return NQ.forEach(this,((i,r)=>{const s=NQ.findKey(n,r);if(s)return t[s]=lz(i),void delete t[r];const o=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,((e,t,n)=>t.toUpperCase()+n))}(r):String(r).trim();o!==r&&delete t[r],t[o]=lz(i),n[o]=!0})),this}concat(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.constructor.concat(this,...t)}toJSON(e){const t=Object.create(null);return NQ.forEach(this,((n,i)=>{null!=n&&!1!==n&&(t[i]=e&&NQ.isArray(n)?n.join(", "):n)})),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map((e=>{let[t,n]=e;return t+": "+n})).join("\n")}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e){const t=new this(e);for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];return i.forEach((e=>t.set(e))),t}static accessor(e){const t=(this[oz]=this[oz]={accessors:{}}).accessors,n=this.prototype;function i(e){const i=az(e);t[i]||(!function(e,t){const n=NQ.toCamelCase(" "+t);["get","set","has"].forEach((i=>{Object.defineProperty(e,i+n,{value:function(e,n,r){return this[i].call(this,t,e,n,r)},configurable:!0})}))}(n,e),t[i]=!0)}return NQ.isArray(e)?e.forEach(i):i(e),this}}hz.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),NQ.reduceDescriptors(hz.prototype,((e,t)=>{let{value:n}=e,i=t[0].toUpperCase()+t.slice(1);return{get:()=>n,set(e){this[i]=e}}})),NQ.freezeMethods(hz);const uz=hz;function dz(e,t){const n=this||rz,i=t||n,r=uz.from(i.headers);let s=i.data;return NQ.forEach(e,(function(e){s=e.call(n,s,r.normalize(),t?t.status:void 0)})),r.normalize(),s}function fz(e){return!(!e||!e.__CANCEL__)}function pz(e,t,n){MQ.call(this,null==e?"canceled":e,MQ.ERR_CANCELED,t,n),this.name="CanceledError"}NQ.inherits(pz,MQ,{__CANCEL__:!0});const gz=pz;function mz(e,t,n){const i=n.config.validateStatus;n.status&&i&&!i(n.status)?t(new MQ("Request failed with status code "+n.status,[MQ.ERR_BAD_REQUEST,MQ.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):e(n)}const vz=function(e,t){e=e||10;const n=new Array(e),i=new Array(e);let r,s=0,o=0;return t=void 0!==t?t:1e3,function(a){const l=Date.now(),c=i[o];r||(r=l),n[s]=a,i[s]=l;let h=o,u=0;for(;h!==s;)u+=n[h++],h%=e;if(s=(s+1)%e,s===o&&(o=(o+1)%e),l-r<t)return;const d=c&&l-c;return d?Math.round(1e3*u/d):void 0}};const yz=function(e,t){let n=0;const i=1e3/t;let r=null;return function(){const t=!0===this,s=Date.now();if(t||s-n>i)return r&&(clearTimeout(r),r=null),n=s,e.apply(null,arguments);r||(r=setTimeout((()=>(r=null,n=Date.now(),e.apply(null,arguments))),i-(s-n)))}},wz=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,i=0;const r=vz(50,250);return yz((n=>{const s=n.loaded,o=n.lengthComputable?n.total:void 0,a=s-i,l=r(a);i=s;const c={loaded:s,total:o,progress:o?s/o:void 0,bytes:a,rate:l||void 0,estimated:l&&o&&s<=o?(o-s)/l:void 0,event:n,lengthComputable:null!=o};c[t?"download":"upload"]=!0,e(c)}),n)},bz=tz.hasStandardBrowserEnv?function(){const e=/(msie|trident)/i.test(navigator.userAgent),t=document.createElement("a");let n;function i(n){let i=n;return e&&(t.setAttribute("href",i),i=t.href),t.setAttribute("href",i),{href:t.href,protocol:t.protocol?t.protocol.replace(/:$/,""):"",host:t.host,search:t.search?t.search.replace(/^\?/,""):"",hash:t.hash?t.hash.replace(/^#/,""):"",hostname:t.hostname,port:t.port,pathname:"/"===t.pathname.charAt(0)?t.pathname:"/"+t.pathname}}return n=i(window.location.href),function(e){const t=NQ.isString(e)?i(e):e;return t.protocol===n.protocol&&t.host===n.host}}():function(){return!0},Oz=tz.hasStandardBrowserEnv?{write(e,t,n,i,r,s){const o=[e+"="+encodeURIComponent(t)];NQ.isNumber(n)&&o.push("expires="+new Date(n).toGMTString()),NQ.isString(i)&&o.push("path="+i),NQ.isString(r)&&o.push("domain="+r),!0===s&&o.push("secure"),document.cookie=o.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read:()=>null,remove(){}};function kz(e,t){return e&&!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)?function(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}const Sz=e=>e instanceof uz?{...e}:e;function xz(e,t){t=t||{};const n={};function i(e,t,n){return NQ.isPlainObject(e)&&NQ.isPlainObject(t)?NQ.merge.call({caseless:n},e,t):NQ.isPlainObject(t)?NQ.merge({},t):NQ.isArray(t)?t.slice():t}function r(e,t,n){return NQ.isUndefined(t)?NQ.isUndefined(e)?void 0:i(void 0,e,n):i(e,t,n)}function s(e,t){if(!NQ.isUndefined(t))return i(void 0,t)}function o(e,t){return NQ.isUndefined(t)?NQ.isUndefined(e)?void 0:i(void 0,e):i(void 0,t)}function a(n,r,s){return s in t?i(n,r):s in e?i(void 0,n):void 0}const l={url:s,method:s,data:s,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(e,t)=>r(Sz(e),Sz(t),!0)};return NQ.forEach(Object.keys(Object.assign({},e,t)),(function(i){const s=l[i]||r,o=s(e[i],t[i],i);NQ.isUndefined(o)&&s!==a||(n[i]=o)})),n}const Tz=e=>{const t=xz({},e);let n,{data:i,withXSRFToken:r,xsrfHeaderName:s,xsrfCookieName:o,headers:a,auth:l}=t;if(t.headers=a=uz.from(a),t.url=HQ(kz(t.baseURL,t.url),e.params,e.paramsSerializer),l&&a.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):""))),NQ.isFormData(i))if(tz.hasStandardBrowserEnv||tz.hasStandardBrowserWebWorkerEnv)a.setContentType(void 0);else if(!1!==(n=a.getContentType())){const[e,...t]=n?n.split(";").map((e=>e.trim())).filter(Boolean):[];a.setContentType([e||"multipart/form-data",...t].join("; "))}if(tz.hasStandardBrowserEnv&&(r&&NQ.isFunction(r)&&(r=r(t)),r||!1!==r&&bz(t.url))){const e=s&&o&&Oz.read(o);e&&a.set(s,e)}return t},Cz="undefined"!==typeof XMLHttpRequest&&function(e){return new Promise((function(t,n){const i=Tz(e);let r=i.data;const s=uz.from(i.headers).normalize();let o,{responseType:a}=i;function l(){i.cancelToken&&i.cancelToken.unsubscribe(o),i.signal&&i.signal.removeEventListener("abort",o)}let c=new XMLHttpRequest;function h(){if(!c)return;const i=uz.from("getAllResponseHeaders"in c&&c.getAllResponseHeaders());mz((function(e){t(e),l()}),(function(e){n(e),l()}),{data:a&&"text"!==a&&"json"!==a?c.response:c.responseText,status:c.status,statusText:c.statusText,headers:i,config:e,request:c}),c=null}c.open(i.method.toUpperCase(),i.url,!0),c.timeout=i.timeout,"onloadend"in c?c.onloadend=h:c.onreadystatechange=function(){c&&4===c.readyState&&(0!==c.status||c.responseURL&&0===c.responseURL.indexOf("file:"))&&setTimeout(h)},c.onabort=function(){c&&(n(new MQ("Request aborted",MQ.ECONNABORTED,i,c)),c=null)},c.onerror=function(){n(new MQ("Network Error",MQ.ERR_NETWORK,i,c)),c=null},c.ontimeout=function(){let e=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const t=i.transitional||XQ;i.timeoutErrorMessage&&(e=i.timeoutErrorMessage),n(new MQ(e,t.clarifyTimeoutError?MQ.ETIMEDOUT:MQ.ECONNABORTED,i,c)),c=null},void 0===r&&s.setContentType(null),"setRequestHeader"in c&&NQ.forEach(s.toJSON(),(function(e,t){c.setRequestHeader(t,e)})),NQ.isUndefined(i.withCredentials)||(c.withCredentials=!!i.withCredentials),a&&"json"!==a&&(c.responseType=i.responseType),"function"===typeof i.onDownloadProgress&&c.addEventListener("progress",wz(i.onDownloadProgress,!0)),"function"===typeof i.onUploadProgress&&c.upload&&c.upload.addEventListener("progress",wz(i.onUploadProgress)),(i.cancelToken||i.signal)&&(o=t=>{c&&(n(!t||t.type?new gz(null,e,c):t),c.abort(),c=null)},i.cancelToken&&i.cancelToken.subscribe(o),i.signal&&(i.signal.aborted?o():i.signal.addEventListener("abort",o)));const u=function(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}(i.url);u&&-1===tz.protocols.indexOf(u)?n(new MQ("Unsupported protocol "+u+":",MQ.ERR_BAD_REQUEST,e)):c.send(r||null)}))},Ez=(e,t)=>{let n,i=new AbortController;const r=function(e){if(!n){n=!0,o();const t=e instanceof Error?e:this.reason;i.abort(t instanceof MQ?t:new gz(t instanceof Error?t.message:t))}};let s=t&&setTimeout((()=>{r(new MQ("timeout ".concat(t," of ms exceeded"),MQ.ETIMEDOUT))}),t);const o=()=>{e&&(s&&clearTimeout(s),s=null,e.forEach((e=>{e&&(e.removeEventListener?e.removeEventListener("abort",r):e.unsubscribe(r))})),e=null)};e.forEach((e=>e&&e.addEventListener&&e.addEventListener("abort",r)));const{signal:a}=i;return a.unsubscribe=o,[a,()=>{s&&clearTimeout(s),s=null}]},_z=function*(e,t){let n=e.byteLength;if(!t||n<t)return void(yield e);let i,r=0;for(;r<n;)i=r+t,yield e.slice(r,i),r=i},Az=(e,t,n,i,r)=>{const s=async function*(e,t,n){for await(const i of e)yield*_z(ArrayBuffer.isView(i)?i:await n(String(i)),t)}(e,t,r);let o=0;return new ReadableStream({type:"bytes",async pull(e){const{done:t,value:r}=await s.next();if(t)return e.close(),void i();let a=r.byteLength;n&&n(o+=a),e.enqueue(new Uint8Array(r))},cancel:e=>(i(e),s.return())},{highWaterMark:2})},Pz=(e,t)=>{const n=null!=e;return i=>setTimeout((()=>t({lengthComputable:n,total:e,loaded:i})))},Nz="function"===typeof fetch&&"function"===typeof Request&&"function"===typeof Response,Iz=Nz&&"function"===typeof ReadableStream,Rz=Nz&&("function"===typeof TextEncoder?(Dz=new TextEncoder,e=>Dz.encode(e)):async e=>new Uint8Array(await new Response(e).arrayBuffer()));var Dz;const Mz=Iz&&(()=>{let e=!1;const t=new Request(tz.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t})(),Lz=Iz&&!!(()=>{try{return NQ.isReadableStream(new Response("").body)}catch(e){}})(),Qz={stream:Lz&&(e=>e.body)};var zz;Nz&&(zz=new Response,["text","arrayBuffer","blob","formData","stream"].forEach((e=>{!Qz[e]&&(Qz[e]=NQ.isFunction(zz[e])?t=>t[e]():(t,n)=>{throw new MQ("Response type '".concat(e,"' is not supported"),MQ.ERR_NOT_SUPPORT,n)})})));const jz=async(e,t)=>{const n=NQ.toFiniteNumber(e.getContentLength());return null==n?(async e=>null==e?0:NQ.isBlob(e)?e.size:NQ.isSpecCompliantForm(e)?(await new Request(e).arrayBuffer()).byteLength:NQ.isArrayBufferView(e)?e.byteLength:(NQ.isURLSearchParams(e)&&(e+=""),NQ.isString(e)?(await Rz(e)).byteLength:void 0))(t):n},Uz=Nz&&(async e=>{let{url:t,method:n,data:i,signal:r,cancelToken:s,timeout:o,onDownloadProgress:a,onUploadProgress:l,responseType:c,headers:h,withCredentials:u="same-origin",fetchOptions:d}=Tz(e);c=c?(c+"").toLowerCase():"text";let f,p,[g,m]=r||s||o?Ez([r,s],o):[];const v=()=>{!f&&setTimeout((()=>{g&&g.unsubscribe()})),f=!0};let y;try{if(l&&Mz&&"get"!==n&&"head"!==n&&0!==(y=await jz(h,i))){let e,n=new Request(t,{method:"POST",body:i,duplex:"half"});NQ.isFormData(i)&&(e=n.headers.get("content-type"))&&h.setContentType(e),n.body&&(i=Az(n.body,65536,Pz(y,wz(l)),null,Rz))}NQ.isString(u)||(u=u?"cors":"omit"),p=new Request(t,{...d,signal:g,method:n.toUpperCase(),headers:h.normalize().toJSON(),body:i,duplex:"half",withCredentials:u});let r=await fetch(p);const s=Lz&&("stream"===c||"response"===c);if(Lz&&(a||s)){const e={};["status","statusText","headers"].forEach((t=>{e[t]=r[t]}));const t=NQ.toFiniteNumber(r.headers.get("content-length"));r=new Response(Az(r.body,65536,a&&Pz(t,wz(a,!0)),s&&v,Rz),e)}c=c||"text";let o=await Qz[NQ.findKey(Qz,c)||"text"](r,e);return!s&&v(),m&&m(),await new Promise(((t,n)=>{mz(t,n,{data:o,headers:uz.from(r.headers),status:r.status,statusText:r.statusText,config:e,request:p})}))}catch(w){if(v(),w&&"TypeError"===w.name&&/fetch/i.test(w.message))throw Object.assign(new MQ("Network Error",MQ.ERR_NETWORK,e,p),{cause:w.cause||w});throw MQ.from(w,w&&w.code,e,p)}}),Vz={http:null,xhr:Cz,fetch:Uz};NQ.forEach(Vz,((e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(kj){}Object.defineProperty(e,"adapterName",{value:t})}}));const Fz=e=>"- ".concat(e),qz=e=>NQ.isFunction(e)||null===e||!1===e,Bz=e=>{e=NQ.isArray(e)?e:[e];const{length:t}=e;let n,i;const r={};for(let s=0;s<t;s++){let t;if(n=e[s],i=n,!qz(n)&&(i=Vz[(t=String(n)).toLowerCase()],void 0===i))throw new MQ("Unknown adapter '".concat(t,"'"));if(i)break;r[t||"#"+s]=i}if(!i){const e=Object.entries(r).map((e=>{let[t,n]=e;return"adapter ".concat(t," ")+(!1===n?"is not supported by the environment":"is not available in the build")}));let n=t?e.length>1?"since :\n"+e.map(Fz).join("\n"):" "+Fz(e[0]):"as no adapter specified";throw new MQ("There is no suitable adapter to dispatch the request "+n,"ERR_NOT_SUPPORT")}return i};function Wz(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new gz(null,e)}function Hz(e){Wz(e),e.headers=uz.from(e.headers),e.data=dz.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1);return Bz(e.adapter||rz.adapter)(e).then((function(t){return Wz(e),t.data=dz.call(e,e.transformResponse,t),t.headers=uz.from(t.headers),t}),(function(t){return fz(t)||(Wz(e),t&&t.response&&(t.response.data=dz.call(e,e.transformResponse,t.response),t.response.headers=uz.from(t.response.headers))),Promise.reject(t)}))}const $z="1.7.2",Xz={};["object","boolean","number","function","string","symbol"].forEach(((e,t)=>{Xz[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}}));const Gz={};Xz.transitional=function(e,t,n){function i(e,t){return"[Axios v1.7.2] Transitional option '"+e+"'"+t+(n?". "+n:"")}return(n,r,s)=>{if(!1===e)throw new MQ(i(r," has been removed"+(t?" in "+t:"")),MQ.ERR_DEPRECATED);return t&&!Gz[r]&&(Gz[r]=!0,console.warn(i(r," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,r,s)}};const Kz={assertOptions:function(e,t,n){if("object"!==typeof e)throw new MQ("options must be an object",MQ.ERR_BAD_OPTION_VALUE);const i=Object.keys(e);let r=i.length;for(;r-- >0;){const s=i[r],o=t[s];if(o){const t=e[s],n=void 0===t||o(t,s,e);if(!0!==n)throw new MQ("option "+s+" must be "+n,MQ.ERR_BAD_OPTION_VALUE)}else if(!0!==n)throw new MQ("Unknown option "+s,MQ.ERR_BAD_OPTION)}},validators:Xz},Yz=Kz.validators;class Jz{constructor(e){this.defaults=e,this.interceptors={request:new $Q,response:new $Q}}async request(e,t){try{return await this._request(e,t)}catch(n){if(n instanceof Error){let e;Error.captureStackTrace?Error.captureStackTrace(e={}):e=new Error;const t=e.stack?e.stack.replace(/^.+\n/,""):"";try{n.stack?t&&!String(n.stack).endsWith(t.replace(/^.+\n.+\n/,""))&&(n.stack+="\n"+t):n.stack=t}catch(kj){}}throw n}}_request(e,t){"string"===typeof e?(t=t||{}).url=e:t=e||{},t=xz(this.defaults,t);const{transitional:n,paramsSerializer:i,headers:r}=t;void 0!==n&&Kz.assertOptions(n,{silentJSONParsing:Yz.transitional(Yz.boolean),forcedJSONParsing:Yz.transitional(Yz.boolean),clarifyTimeoutError:Yz.transitional(Yz.boolean)},!1),null!=i&&(NQ.isFunction(i)?t.paramsSerializer={serialize:i}:Kz.assertOptions(i,{encode:Yz.function,serialize:Yz.function},!0)),t.method=(t.method||this.defaults.method||"get").toLowerCase();let s=r&&NQ.merge(r.common,r[t.method]);r&&NQ.forEach(["delete","get","head","post","put","patch","common"],(e=>{delete r[e]})),t.headers=uz.concat(s,r);const o=[];let a=!0;this.interceptors.request.forEach((function(e){"function"===typeof e.runWhen&&!1===e.runWhen(t)||(a=a&&e.synchronous,o.unshift(e.fulfilled,e.rejected))}));const l=[];let c;this.interceptors.response.forEach((function(e){l.push(e.fulfilled,e.rejected)}));let h,u=0;if(!a){const e=[Hz.bind(this),void 0];for(e.unshift.apply(e,o),e.push.apply(e,l),h=e.length,c=Promise.resolve(t);u<h;)c=c.then(e[u++],e[u++]);return c}h=o.length;let d=t;for(u=0;u<h;){const e=o[u++],t=o[u++];try{d=e(d)}catch(f){t.call(this,f);break}}try{c=Hz.call(this,d)}catch(f){return Promise.reject(f)}for(u=0,h=l.length;u<h;)c=c.then(l[u++],l[u++]);return c}getUri(e){return HQ(kz((e=xz(this.defaults,e)).baseURL,e.url),e.params,e.paramsSerializer)}}NQ.forEach(["delete","get","head","options"],(function(e){Jz.prototype[e]=function(t,n){return this.request(xz(n||{},{method:e,url:t,data:(n||{}).data}))}})),NQ.forEach(["post","put","patch"],(function(e){function t(t){return function(n,i,r){return this.request(xz(r||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:n,data:i}))}}Jz.prototype[e]=t(),Jz.prototype[e+"Form"]=t(!0)}));const Zz=Jz;class ej{constructor(e){if("function"!==typeof e)throw new TypeError("executor must be a function.");let t;this.promise=new Promise((function(e){t=e}));const n=this;this.promise.then((e=>{if(!n._listeners)return;let t=n._listeners.length;for(;t-- >0;)n._listeners[t](e);n._listeners=null})),this.promise.then=e=>{let t;const i=new Promise((e=>{n.subscribe(e),t=e})).then(e);return i.cancel=function(){n.unsubscribe(t)},i},e((function(e,i,r){n.reason||(n.reason=new gz(e,i,r),t(n.reason))}))}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}static source(){let e;return{token:new ej((function(t){e=t})),cancel:e}}}const tj=ej;const nj={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(nj).forEach((e=>{let[t,n]=e;nj[n]=t}));const ij=nj;const rj=function e(t){const n=new Zz(t),i=XL(Zz.prototype.request,n);return NQ.extend(i,Zz.prototype,n,{allOwnKeys:!0}),NQ.extend(i,n,null,{allOwnKeys:!0}),i.create=function(n){return e(xz(t,n))},i}(rz);rj.Axios=Zz,rj.CanceledError=gz,rj.CancelToken=tj,rj.isCancel=fz,rj.VERSION=$z,rj.toFormData=UQ,rj.AxiosError=MQ,rj.Cancel=rj.CanceledError,rj.all=function(e){return Promise.all(e)},rj.spread=function(e){return function(t){return e.apply(null,t)}},rj.isAxiosError=function(e){return NQ.isObject(e)&&!0===e.isAxiosError},rj.mergeConfig=xz,rj.AxiosHeaders=uz,rj.formToJSON=e=>nz(NQ.isHTMLForm(e)?new FormData(e):e),rj.getAdapter=Bz,rj.HttpStatusCode=ij,rj.default=rj;const sj=rj;function oj(e){let{results:t,onClose:n}=e;return(0,Cp.jsx)("div",{className:"popup",children:(0,Cp.jsxs)("div",{className:"popup-content",children:[(0,Cp.jsx)("h2",{children:"Test Results"}),(0,Cp.jsx)("button",{onClick:n,className:"close-btn",children:"X"}),(0,Cp.jsx)("ul",{children:t.map(((e,t)=>(0,Cp.jsx)("li",{style:{color:e.passed?"green":"red"},children:e.message},t)))})]})})}const aj=function(){const{uid:e,activityTitle:t,activityOrder:n}=re(),i=ie(),[r,o]=(0,s.useState)(null),[a,l]=(0,s.useState)([]),[c,h]=(0,s.useState)(!0),[u,d]=(0,s.useState)(null),[f,p]=(0,s.useState)(""),[g,m]=(0,s.useState)(null),[v,y]=(0,s.useState)(""),[w,b]=(0,s.useState)(0),[O,k]=(0,s.useState)(0),[S,x]=(0,s.useState)(0),[T,C]=(0,s.useState)(!1),[E,_]=(0,s.useState)(!1),[A,P]=(0,s.useState)(!1),[N,I]=(0,s.useState)([]),[R,D]=(0,s.useState)("");(0,s.useEffect)((()=>{(async()=>{try{if(!e||!t||!n)return void d("Missing URL parameters");const i=bf(Tp,"users",e);if(!(await gp(i)).exists())return void d("User not found");const r=wf(Tp,"activities"),s=(await vp(r)).docs.map((e=>({id:e.id,...e.data()}))),a=s.find((e=>e.title.replace(/\s+/g,"-")===t&&e.order.toString()===n));if(!a)return void d("Activity not found");o(a),l(M(a.questions)),b(0)}catch(i){d(i.message)}finally{h(!1)}})()}),[e,t,n]);const M=e=>{const t=e.slice();for(let n=t.length-1;n>0;n--){const e=Math.floor(Math.random()*(n+1));[t[n],t[e]]=[t[e],t[n]]}return t},L=()=>{i("/activities/".concat(e,"/").concat(t,"/").concat(parseInt(n)+1))},Q=()=>{i("/roadmap/".concat(e))};(0,s.useEffect)((()=>{if(a.length>0){const e=a[w];z(e.functionName)}}),[n,w,a]);const z=async e=>{try{const t=await sj.post("http://localhost:5002/test-function",{functionName:e});t.data.success?console.log("".concat(e," tests passed successfully!")):console.error("".concat(e," tests failed. Output: ").concat(t.data.output))}catch(u){console.error("Error testing ".concat(e,":"),u)}};if(c)return(0,Cp.jsx)("div",{className:"loading",children:"Loading..."});if(u)return(0,Cp.jsxs)("div",{className:"error",children:["Error: ",u]});if(r&&(w>=a.length||E))return(0,Cp.jsxs)("div",{className:"activity-page",children:[(0,Cp.jsx)("h2",{className:"activity-title",children:r.title}),(0,Cp.jsx)("p",{className:"activity-description",children:"Congratulations! You've completed all the questions."}),T&&(0,Cp.jsx)("div",{className:"animation",children:"Next Activity Unlocked!"}),(0,Cp.jsxs)("div",{className:"completion-buttons",children:[(0,Cp.jsx)("button",{onClick:L,children:"Next Activity"}),(0,Cp.jsx)("button",{onClick:Q,children:"Main Menu"})]})]});const j=a[w];return(0,Cp.jsx)("div",{className:"activity-page",children:r&&(0,Cp.jsxs)(Cp.Fragment,{children:[(0,Cp.jsxs)("div",{className:"activity-header",children:[(0,Cp.jsx)("button",{onClick:()=>{i(-1)},className:"back-btn",children:(0,Cp.jsx)("i",{className:"fa-solid fa-arrow-left"})}),(0,Cp.jsx)("h2",{className:"activity-title",children:r.title})]}),(0,Cp.jsx)("p",{className:"activity-description",children:r.description}),(0,Cp.jsxs)("div",{className:"status-section",children:[(0,Cp.jsxs)("div",{className:"status correct-count",children:["Correct: ",O]}),(0,Cp.jsxs)("div",{className:"status incorrect-count",children:["Incorrect: ",S]})]}),(0,Cp.jsx)($L,{currentQuestion:j,onCodeSubmit:async t=>{P(!0);const i=a[w],s=i.functionName;try{if(!i.id||!e||!n)return void d("Missing parameters for Firestore document reference");await yp(bf(Tp,"users",e,"activities",n,"questions",i.id),{functionName:s,userCode:t});const o={functionName:s,activityOrder:n,userId:e,questionId:i.id},c=await sj.post("http://localhost:5002/test-function",o,{headers:{"Content-Type":"application/json"}});c.data.success?(m("Success! You got it right."),k(O+1),O+1===5?((async()=>{const t=bf(Tp,"users",e),i=(await gp(t)).data();parseInt(n)===i.currentActivity&&await wp(t,{currentActivity:i.currentActivity+1})})(),C(!0),_(!0),setTimeout((()=>{C(!1),alert("Congratulations! You have completed this phase."),b(a.length)}),3e3)):(b((e=>e+1)),p(""),m(null))):(m("Incorrect output:\n".concat(c.data.message)),x(S+1),S+1===3&&(alert("You have 3 incorrect answers. Restarting..."),k(0),x(0),b(0),l(M(r.questions)),p(""),m(null))),I(c.data.testResults)}catch(u){console.error("Error testing ".concat(s,":"),u)}finally{P(!1)}},onCodeChange:e=>{D(e)},userId:e,activityOrder:n,setOutput:p}),(0,Cp.jsxs)("div",{className:"output-section",children:[(0,Cp.jsx)("h3",{children:"Output:"}),(0,Cp.jsx)("pre",{id:"output",children:f})]}),g&&(0,Cp.jsx)("div",{className:"result-section",children:(0,Cp.jsx)("pre",{children:g})}),A&&(0,Cp.jsx)("div",{className:"loading",children:"Submitting..."}),(0,Cp.jsx)("div",{id:"mycanvas"}),(0,Cp.jsx)("button",{onClick:async()=>{try{const e=await sj.get("http://localhost:5002/ping");y(e.data.message)}catch(u){y("Error: Unable to reach the server.")}},children:"Check Server Status"}),v&&(0,Cp.jsx)("div",{className:"server-status",children:v}),N.length>0&&(0,Cp.jsx)(oj,{results:N,onClose:()=>I([])})]})})},lj=()=>Math.random().toString(36).substring(2,12);function cj(e){const{setShowSignUpForm:t}=e,[n,i]=(0,s.useState)(),[r,o]=(0,s.useState)(""),[a,l]=(0,s.useState)(""),[c,h]=(0,s.useState)(""),[u,d]=(0,s.useState)(1),[f,p]=(0,s.useState)(""),[g,m]=(0,s.useState)(""),[v,y]=(0,s.useState)(""),[w,b]=(0,s.useState)(""),[O,k]=(0,s.useState)(""),S=()=>d(u+1),x=ie(),T=async e=>{const t=lj();await yp(bf(Tp,"users",e.uid),{email:e.email,currentActivity:1,programmingLanguages:["Python"],uniqueId:t})},C=async e=>{if(e.preventDefault(),a===c)try{const e=await async function(e,t,n){if(ln(e.app))return Promise.reject(Ln(e));const i=Fi(e),r=Gi(i,{returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",gr),s=await r.catch((t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&xr(e),t})),o=await mr._fromIdTokenResponse(i,"signIn",s);return await i._updateCurrentUser(o.user),o}(xp,r,a),t=e.user;await T(t),console.log("Signup successful",t.uid),i(t.uid),S()}catch(O){k(O.message||"Signup failed. Please try again.")}else k("Passwords need to match!")},E=new dr;return(0,Cp.jsx)(Cp.Fragment,{children:(0,Cp.jsxs)("div",{className:"main-container",children:[1===u&&(0,Cp.jsxs)("div",{className:"child-signup-container",children:[(0,Cp.jsx)("div",{className:"title",children:(0,Cp.jsx)("h1",{children:"Let's get started"})}),(0,Cp.jsxs)("div",{className:"signup-login-container",children:[(0,Cp.jsx)("h3",{children:"Already joined?"}),(0,Cp.jsx)("button",{className:"signin-button",onClick:()=>x("/login"),children:"Log In"})]}),(0,Cp.jsx)("div",{className:"signup-box",children:(0,Cp.jsxs)("form",{onSubmit:C,children:[(0,Cp.jsx)("input",{className:"signup-input",type:"email",placeholder:"Your Email",value:r,onChange:e=>o(e.target.value),required:!0}),(0,Cp.jsx)("input",{className:"signup-input",type:"password",placeholder:"Password",value:a,onChange:e=>l(e.target.value),required:!0}),(0,Cp.jsx)("input",{className:"signup-input",type:"password",placeholder:"Confirm Password",value:c,onChange:e=>h(e.target.value),required:!0}),O&&(0,Cp.jsx)("p",{children:O}),(0,Cp.jsxs)("div",{className:"signup-form-buttons",children:[(0,Cp.jsx)("button",{className:"signup-form-submit-btn",type:"submit",onClick:C,children:"Sign Up"}),(0,Cp.jsx)("h2",{className:"signup-form-or",children:"or"}),(0,Cp.jsxs)("button",{onClick:async()=>{try{const e=await ns(xp,E),t=(dr.credentialFromResult(e),e.user),n=bf(Tp,"users",t.uid);(await gp(n)).exists()?x("/roadmap/".concat(t.uid)):(T(t),x("/signupInfo/".concat(t.uid,"/2")))}catch(O){const t=O.message;k(t)}},className:"signup-form-google-btn",children:[(0,Cp.jsx)("i",{className:"fa-brands fa-google"}),"Continue with Google"]}),(0,Cp.jsx)("button",{className:"signup-form-submit-btn",onClick:S,children:"Next"})]})]})})]}),2===u&&(0,Cp.jsx)(hj,{step:u,type:"text",placeholder:"Name",dataValue:f,setDataValue:p,handleNext:S}),3===u&&(0,Cp.jsx)(hj,{step:u,type:"text",placeholder:"Username",dataValue:g,setDataValue:m,handleNext:S}),4===u&&(0,Cp.jsx)(hj,{step:u,type:"number",placeholder:"Age",dataValue:v,setDataValue:y,handleNext:S}),5===u&&(0,Cp.jsx)(hj,{step:u,handleNext:async e=>{try{await yp(bf(Tp,"users",n),{name:f,username:g,age:v,programmingLanguages:[e]},{merge:!0}),console.log("Programming language saved successfully"),x("/roadmap/".concat(n))}catch(O){k(O.message||"Failed to save programming language. Please try again.")}}})]})})}function hj(e){let{step:t,type:n,placeholder:i,dataValue:r,setDataValue:s,handleNext:o}=e;return(0,Cp.jsx)("div",{className:"main-container info",children:(0,Cp.jsxs)("div",{className:"child-signup-container info",children:[(0,Cp.jsx)("div",{className:"title",children:(0,Cp.jsx)("h1",{children:"Almost there"})}),t<5&&(0,Cp.jsxs)(Cp.Fragment,{children:[(0,Cp.jsx)("input",{className:"info-input",type:n,placeholder:i,value:r,onChange:e=>s(e.target.value),required:!0}),(0,Cp.jsx)("button",{className:"signup-form-submit-btn step",onClick:o,children:"Next"})]}),5===t&&(0,Cp.jsxs)(Cp.Fragment,{children:[(0,Cp.jsx)("p",{children:"Select a Fun Programming Language"}),(0,Cp.jsxs)("div",{className:"lang-selection-container",children:[(0,Cp.jsxs)("button",{type:"button",onClick:()=>o("HTML/CSS"),children:[(0,Cp.jsx)("span",{children:"\u2022"})," HTML/CSS: Create Beautiful Websites!"]}),(0,Cp.jsxs)("button",{type:"button",onClick:()=>o("Java"),children:[(0,Cp.jsx)("span",{children:"\u2022"})," Java: Build Amazing Apps!"]}),(0,Cp.jsxs)("button",{type:"button",onClick:()=>o("Python"),children:[(0,Cp.jsx)("span",{children:"\u2022"})," Python: Code Like a Pro!"]})]})]})]})})}function uj(){const e=ie(),t=t=>{e(t)};return(0,Cp.jsxs)("div",{className:"header",children:[(0,Cp.jsx)("button",{className:"home-btn",onClick:()=>t("/"),children:"Home"}),(0,Cp.jsxs)("div",{className:"header-right",children:[(0,Cp.jsx)("button",{onClick:()=>t("/"),children:"About"}),"    "]})]})}function dj(){return(0,Cp.jsx)(Cp.Fragment,{children:(0,Cp.jsx)(uj,{})})}function fj(){return(0,Cp.jsxs)("footer",{className:"footer",children:[(0,Cp.jsxs)("section",{className:"hero",children:[(0,Cp.jsx)("img",{src:"branch-left.png",alt:"left-img",className:"hero-img-left"}),(0,Cp.jsxs)("div",{className:"hero-content",children:[(0,Cp.jsx)("h2",{children:"Discover and Learn"}),(0,Cp.jsx)("p",{children:"Explore our interactive games, educational videos, and fun activities!"}),(0,Cp.jsx)("button",{className:"animated-button",children:"Get Started"})]}),(0,Cp.jsx)("img",{src:"branch-right.png",alt:"right-img",className:"hero-img-right"})]}),(0,Cp.jsx)("p",{children:"\xa9 2024 DYA. All rights reserved."})]})}function pj(e){const{handleRouteChange:t}=e,[n,i]=(0,s.useState)(),[r,o]=(0,s.useState)(),[a,l]=(0,s.useState)();return(0,Cp.jsxs)("div",{className:"login-page",children:[(0,Cp.jsx)("div",{className:"header-container",children:(0,Cp.jsx)(uj,{})}),(0,Cp.jsxs)("div",{className:"login-main-content",children:[(0,Cp.jsxs)("div",{className:"login-left",children:[(0,Cp.jsx)("h2",{className:"login-container-title",children:"Let's get back to it!"}),(0,Cp.jsxs)("div",{className:"login-container",children:[(0,Cp.jsxs)("div",{className:"login-signup-container",children:[(0,Cp.jsx)("h3",{children:"New? Join us!"}),(0,Cp.jsx)("button",{className:"login-signup-btn",onClick:()=>t("/signup"),children:"Sign Up"})]}),(0,Cp.jsx)("div",{className:"login-form-container",children:(0,Cp.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{const e=await function(e,t,n){return ln(e.app)?Promise.reject(Ln(e)):Sr(Ge(e),lr.credential(t,n)).catch((async t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&xr(e),t}))}(xp,n,r),i=e.user,s=bf(Tp,"users",i.uid),o=await gp(s);if(o.exists){const e=o.data(),t={};e.uniqueId||(t.uniqueId=Math.random().toString(36).substring(2,12)),e.name||(t.name=n.split("@")[0]),e.username||(t.username=n.split("@")[0]),Object.keys(t).length>0&&await yp(bf(Tp,"users",i.uid),t,{merge:!0})}else l("User does not exist, create a new account");console.log("Login successful"),t("/roadmap/".concat(i.uid))}catch(i){l(i.message||"Login failed. Please try again.")}},children:[(0,Cp.jsx)("input",{type:"email",className:"login-form-input",placeholder:"Email",value:n,onChange:e=>i(e.target.value),required:!0}),(0,Cp.jsx)("input",{className:"login-form-input",placeholder:"Password",type:"password",value:r,onChange:e=>o(e.target.value),required:!0}),a&&(0,Cp.jsx)("p",{className:"error-message",children:a}),(0,Cp.jsxs)("div",{className:"login-form-buttons",children:[(0,Cp.jsx)("button",{type:"submit",className:"login-form-submit-btn",children:"Login"}),(0,Cp.jsx)("h2",{className:"login-form-or",children:"or"}),(0,Cp.jsx)("button",{onClick:async()=>{const e=new dr;try{const n=(await ns(xp,e)).user,i=bf(Tp,"users",n.uid);(await gp(i)).exists()?(t("/roadmap/".concat(n.uid)),console.log("User logged in with google")):(console.log("User does not have account with google"),await yp(i,{email:n.email,currentActivity:1,programmingLanguages:["Python"],name:n.displayName||n.email.split("@")[0],uniqueId:Math.random().toString(36).substring(2,12)}),t("signupInfo/".concat(n.uid,"/2")))}catch(n){l(n.message)}},className:"login-form-google-btn",children:(0,Cp.jsx)("i",{className:"fa-brands fa-google"})})]})]})})]})]}),(0,Cp.jsx)("div",{className:"login-right",children:(0,Cp.jsx)("h2",{children:"Image goes here"})})]})]})}function gj(e){const{showSignUpForm:t}=e;return(0,Cp.jsxs)("div",{className:"main-container",children:[(0,Cp.jsx)(mj,{title:"Parents, over here!",imgSrc:"user.png",overlayClass:"overlay-left",desc:"Few words about parent account",handleRouteChange:t}),(0,Cp.jsx)(mj,{title:"Students!",imgSrc:"user.png",overlayClass:"overlay-right",desc:"Few words about student account",handleRouteChange:t})]})}function mj(e){let{title:t,imgSrc:n,overlayClass:i,desc:r,handleRouteChange:s}=e;return(0,Cp.jsxs)("div",{children:[(0,Cp.jsx)("h2",{className:"container-title",children:t}),(0,Cp.jsxs)("div",{className:"container",children:[(0,Cp.jsx)("img",{src:n,alt:t,className:"image"}),(0,Cp.jsx)("div",{className:i,children:(0,Cp.jsxs)("div",{className:"desc",children:[(0,Cp.jsx)("p",{children:r}),(0,Cp.jsx)("button",{className:"overlay-btn",onClick:s,children:"Sign Up"})]})})]})]})}const vj=[{name:"Java",image:"Java.jpg",info:"Learn Java with fun activities and games."},{name:"Python",image:"Python.jpg",info:"Learn Python with fun activities and games."},{name:"HTML/CSS",image:"html.jpg",info:"Learn HTML/CSS with fun activities and games."}];function yj(){const[e,t]=(0,s.useState)(null),n=()=>{t(null)};return(0,Cp.jsxs)("section",{className:"language-slider",children:[(0,Cp.jsx)("h2",{children:"Languages We Offer"}),(0,Cp.jsx)("div",{className:"slider",children:vj.map(((e,n)=>(0,Cp.jsxs)("div",{className:"language-card",onClick:()=>(e=>{t(e)})(e),children:[(0,Cp.jsx)("img",{src:e.image,alt:e.name,className:"language-image"}),(0,Cp.jsx)("h3",{children:e.name})]},n)))}),e&&(0,Cp.jsx)("div",{className:"popup-overlay",onClick:n,children:(0,Cp.jsxs)("div",{className:"popup-content",onClick:e=>e.stopPropagation(),children:[(0,Cp.jsx)("h3",{children:e.name}),(0,Cp.jsx)("p",{children:e.info}),(0,Cp.jsx)("button",{onClick:n,children:"Close"})]})})]})}function wj(){return(0,Cp.jsxs)("section",{className:"mascot-section",children:[(0,Cp.jsx)("h2",{children:"Why You Should Learn With Us"}),(0,Cp.jsxs)("div",{className:"mascot-content",children:[(0,Cp.jsx)("img",{src:"mascot.png",alt:"Mascot",className:"mascot-image"}),(0,Cp.jsxs)("ul",{className:"reasons-list",children:[(0,Cp.jsx)("li",{children:"Interactive and fun learning experiences"}),(0,Cp.jsx)("li",{children:"Personalized learning paths"}),(0,Cp.jsx)("li",{children:"Expertly crafted educational content"}),(0,Cp.jsx)("li",{children:"Safe and child-friendly environment"}),(0,Cp.jsx)("li",{children:"Supportive community of learners"})]})]})]})}const bj=function(){const e=ie(),t=t=>{t?e(t):console.error("Undefined route passed to handleRouteChange")},[n,i]=(0,s.useState)(!1),[r,o]=(0,s.useState)(!1),a=()=>{i(!n),o(!1)};return(0,Cp.jsx)("div",{className:"App",children:(0,Cp.jsxs)(we,{children:[(0,Cp.jsx)(ve,{path:"/",element:(0,Cp.jsxs)("div",{children:[(0,Cp.jsxs)("header",{className:"App-header",children:[(0,Cp.jsxs)("div",{className:"auth-buttons",children:[(0,Cp.jsx)("button",{className:"auth-button",onClick:()=>t("/login"),children:"Log In"}),(0,Cp.jsx)("button",{className:"auth-button",onClick:a,children:"Sign Up"})]}),(0,Cp.jsx)("h1",{children:"Welcome to DYA!"}),(0,Cp.jsx)("p",{children:"Your ultimate fun and learning destination for kids."})]}),(0,Cp.jsxs)("main",{children:[n&&(0,Cp.jsx)("div",{className:"popup-overlay",onClick:a,children:(0,Cp.jsx)("div",{className:"popup-content",onClick:e=>e.stopPropagation(),children:r?(0,Cp.jsx)(cj,{setShowSignUpForm:o}):(0,Cp.jsx)(gj,{showSignUpForm:()=>{o(!0)}})})}),(0,Cp.jsxs)("div",{className:"main-content ".concat(n?"blur":""),children:[(0,Cp.jsxs)("section",{className:"features",children:[(0,Cp.jsxs)("div",{className:"feature feature-games",children:[(0,Cp.jsx)("h3",{children:"Games"}),(0,Cp.jsx)("p",{children:"Engage in exciting and educational games designed for kids."})]}),(0,Cp.jsxs)("div",{className:"feature feature-videos",children:[(0,Cp.jsx)("h3",{children:"Videos"}),(0,Cp.jsx)("p",{children:"Watch fun and educational videos that keep you entertained."})]}),(0,Cp.jsxs)("div",{className:"feature feature-activities",children:[(0,Cp.jsx)("h3",{children:"Activities"}),(0,Cp.jsx)("p",{children:"Participate in creative and fun activities to learn new things."})]})]}),(0,Cp.jsx)(wj,{}),(0,Cp.jsx)(yj,{})]})]}),(0,Cp.jsx)(fj,{})]})}),(0,Cp.jsx)(ve,{path:"/login",element:(0,Cp.jsx)(pj,{handleRouteChange:t})}),(0,Cp.jsx)(ve,{path:"/signup",element:(0,Cp.jsx)(gj,{handleRouteChange:t})}),(0,Cp.jsx)(ve,{path:"/signup/parent",element:(0,Cp.jsx)(dj,{})}),(0,Cp.jsx)(ve,{path:"/signup/child",element:(0,Cp.jsx)(cj,{handleRouteChange:t})}),(0,Cp.jsx)(ve,{path:"/roadmap/:uid",element:(0,Cp.jsx)(_p,{})}),(0,Cp.jsx)(ve,{path:"/activity/:uid/:activityTitle/:activityOrder",element:(0,Cp.jsx)(aj,{})})]})})},Oj=e=>{e&&e instanceof Function&&n.e(845).then(n.bind(n,845)).then((t=>{let{getCLS:n,getFID:i,getFCP:r,getLCP:s,getTTFB:o}=t;n(e),i(e),r(e),s(e),o(e)}))};a.createRoot(document.getElementById("root")).render((0,Cp.jsx)(s.StrictMode,{children:(0,Cp.jsx)(ke,{children:(0,Cp.jsx)(bj,{})})})),Oj()})();
//# sourceMappingURL=main.edb15615.js.map