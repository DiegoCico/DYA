/*! For license information please see main.b39e48e9.js.LICENSE.txt */
(()=>{var e={264:()=>{},914:(e,t,n)=>{"use strict";var i=n(483),r=n(557);function s(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,a={};function l(e,t){h(e,t),h(e+"Capture",t)}function h(e,t){for(a[e]=t,e=0;e<t.length;e++)o.add(t[e])}var c=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),u=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function g(e,t,n,i,r,s,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var m={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){m[e]=new g(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];m[t]=new g(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){m[e]=new g(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){m[e]=new g(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){m[e]=new g(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){m[e]=new g(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){m[e]=new g(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){m[e]=new g(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){m[e]=new g(e,5,!1,e.toLowerCase(),null,!1,!1)}));var O=/[\-:]([a-z])/g;function v(e){return e[1].toUpperCase()}function y(e,t,n,i){var r=m.hasOwnProperty(t)?m[t]:null;(null!==r?0!==r.type:i||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,i){if(null===t||"undefined"===typeof t||function(e,t,n,i){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!i&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,i))return!0;if(i)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,r,i)&&(n=null),i||null===r?function(e){return!!u.call(p,e)||!u.call(f,e)&&(d.test(e)?p[e]=!0:(f[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):r.mustUseProperty?e[r.propertyName]=null===n?3!==r.type&&"":n:(t=r.attributeName,i=r.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(r=r.type)||4===r&&!0===n?"":""+n,i?e.setAttributeNS(i,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(O,v);m[t]=new g(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(O,v);m[t]=new g(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(O,v);m[t]=new g(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){m[e]=new g(e,1,!1,e.toLowerCase(),null,!1,!1)})),m.xlinkHref=new g("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){m[e]=new g(e,1,!1,e.toLowerCase(),null,!0,!0)}));var b=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),k=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),x=Symbol.for("react.strict_mode"),T=Symbol.for("react.profiler"),_=Symbol.for("react.provider"),P=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),E=Symbol.for("react.suspense"),Q=Symbol.for("react.suspense_list"),A=Symbol.for("react.memo"),R=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var N=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var I=Symbol.iterator;function D(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=I&&e[I]||e["@@iterator"])?e:null}var M,L=Object.assign;function $(e){if(void 0===M)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);M=t&&t[1]||""}return"\n"+M+e}var U=!1;function q(e,t){if(!e||U)return"";U=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(h){var i=h}Reflect.construct(e,[],t)}else{try{t.call()}catch(h){i=h}e.call(t.prototype)}else{try{throw Error()}catch(h){i=h}e()}}catch(h){if(h&&i&&"string"===typeof h.stack){for(var r=h.stack.split("\n"),s=i.stack.split("\n"),o=r.length-1,a=s.length-1;1<=o&&0<=a&&r[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(r[o]!==s[a]){if(1!==o||1!==a)do{if(o--,0>--a||r[o]!==s[a]){var l="\n"+r[o].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=o&&0<=a);break}}}finally{U=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?$(e):""}function V(e){switch(e.tag){case 5:return $(e.type);case 16:return $("Lazy");case 13:return $("Suspense");case 19:return $("SuspenseList");case 0:case 2:case 15:return e=q(e.type,!1);case 11:return e=q(e.type.render,!1);case 1:return e=q(e.type,!0);default:return""}}function z(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case S:return"Fragment";case k:return"Portal";case T:return"Profiler";case x:return"StrictMode";case E:return"Suspense";case Q:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case P:return(e.displayName||"Context")+".Consumer";case _:return(e._context.displayName||"Context")+".Provider";case C:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case A:return null!==(t=e.displayName||null)?t:z(e.type)||"Memo";case R:t=e._payload,e=e._init;try{return z(e(t))}catch(n){}}return null}function j(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return z(t);case 8:return t===x?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function B(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function F(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function W(e){e._valueTracker||(e._valueTracker=function(e){var t=F(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),i=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var r=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return r.call(this)},set:function(e){i=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(e){i=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function X(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),i="";return e&&(i=F(e)?e.checked?"true":"false":e.value),(e=i)!==n&&(t.setValue(e),!0)}function Y(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function G(e,t){var n=t.checked;return L({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Z(e,t){var n=null==t.defaultValue?"":t.defaultValue,i=null!=t.checked?t.checked:t.defaultChecked;n=B(null!=t.value?t.value:n),e._wrapperState={initialChecked:i,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function H(e,t){null!=(t=t.checked)&&y(e,"checked",t,!1)}function K(e,t){H(e,t);var n=B(t.value),i=t.type;if(null!=n)"number"===i?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===i||"reset"===i)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,B(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function J(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var i=t.type;if(!("submit"!==i&&"reset"!==i||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Y(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,i){if(e=e.options,t){t={};for(var r=0;r<n.length;r++)t["$"+n[r]]=!0;for(n=0;n<e.length;n++)r=t.hasOwnProperty("$"+e[n].value),e[n].selected!==r&&(e[n].selected=r),r&&i&&(e[n].defaultSelected=!0)}else{for(n=""+B(n),t=null,r=0;r<e.length;r++){if(e[r].value===n)return e[r].selected=!0,void(i&&(e[r].defaultSelected=!0));null!==t||e[r].disabled||(t=e[r])}null!==t&&(t.selected=!0)}}function ie(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(s(91));return L({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function re(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(s(92));if(te(n)){if(1<n.length)throw Error(s(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:B(n)}}function se(e,t){var n=B(t.value),i=B(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=i&&(e.defaultValue=""+i)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ae(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ae(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var he,ce,ue=(ce=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((he=he||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=he.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,i){MSApp.execUnsafeLocalFunction((function(){return ce(e,t)}))}:ce);function de(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var fe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function ge(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||fe.hasOwnProperty(e)&&fe[e]?(""+t).trim():t+"px"}function me(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var i=0===n.indexOf("--"),r=ge(n,t[n],i);"float"===n&&(n="cssFloat"),i?e.setProperty(n,r):e[n]=r}}Object.keys(fe).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),fe[t]=fe[e]}))}));var Oe=L({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ve(e,t){if(t){if(Oe[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(s(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(s(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(s(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(s(62))}}function ye(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var ke=null,Se=null,xe=null;function Te(e){if(e=yr(e)){if("function"!==typeof ke)throw Error(s(280));var t=e.stateNode;t&&(t=wr(t),ke(e.stateNode,e.type,t))}}function _e(e){Se?xe?xe.push(e):xe=[e]:Se=e}function Pe(){if(Se){var e=Se,t=xe;if(xe=Se=null,Te(e),t)for(e=0;e<t.length;e++)Te(t[e])}}function Ce(e,t){return e(t)}function Ee(){}var Qe=!1;function Ae(e,t,n){if(Qe)return e(t,n);Qe=!0;try{return Ce(e,t,n)}finally{Qe=!1,(null!==Se||null!==xe)&&(Ee(),Pe())}}function Re(e,t){var n=e.stateNode;if(null===n)return null;var i=wr(n);if(null===i)return null;n=i[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(i=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!i;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(s(231,t,typeof n));return n}var Ne=!1;if(c)try{var Ie={};Object.defineProperty(Ie,"passive",{get:function(){Ne=!0}}),window.addEventListener("test",Ie,Ie),window.removeEventListener("test",Ie,Ie)}catch(ce){Ne=!1}function De(e,t,n,i,r,s,o,a,l){var h=Array.prototype.slice.call(arguments,3);try{t.apply(n,h)}catch(c){this.onError(c)}}var Me=!1,Le=null,$e=!1,Ue=null,qe={onError:function(e){Me=!0,Le=e}};function Ve(e,t,n,i,r,s,o,a,l){Me=!1,Le=null,De.apply(qe,arguments)}function ze(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function je(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Be(e){if(ze(e)!==e)throw Error(s(188))}function Fe(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=ze(e)))throw Error(s(188));return t!==e?null:e}for(var n=e,i=t;;){var r=n.return;if(null===r)break;var o=r.alternate;if(null===o){if(null!==(i=r.return)){n=i;continue}break}if(r.child===o.child){for(o=r.child;o;){if(o===n)return Be(r),e;if(o===i)return Be(r),t;o=o.sibling}throw Error(s(188))}if(n.return!==i.return)n=r,i=o;else{for(var a=!1,l=r.child;l;){if(l===n){a=!0,n=r,i=o;break}if(l===i){a=!0,i=r,n=o;break}l=l.sibling}if(!a){for(l=o.child;l;){if(l===n){a=!0,n=o,i=r;break}if(l===i){a=!0,i=o,n=r;break}l=l.sibling}if(!a)throw Error(s(189))}}if(n.alternate!==i)throw Error(s(190))}if(3!==n.tag)throw Error(s(188));return n.stateNode.current===n?e:t}(e))?We(e):null}function We(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=We(e);if(null!==t)return t;e=e.sibling}return null}var Xe=r.unstable_scheduleCallback,Ye=r.unstable_cancelCallback,Ge=r.unstable_shouldYield,Ze=r.unstable_requestPaint,He=r.unstable_now,Ke=r.unstable_getCurrentPriorityLevel,Je=r.unstable_ImmediatePriority,et=r.unstable_UserBlockingPriority,tt=r.unstable_NormalPriority,nt=r.unstable_LowPriority,it=r.unstable_IdlePriority,rt=null,st=null;var ot=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(at(e)/lt|0)|0},at=Math.log,lt=Math.LN2;var ht=64,ct=4194304;function ut(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function dt(e,t){var n=e.pendingLanes;if(0===n)return 0;var i=0,r=e.suspendedLanes,s=e.pingedLanes,o=268435455&n;if(0!==o){var a=o&~r;0!==a?i=ut(a):0!==(s&=o)&&(i=ut(s))}else 0!==(o=n&~r)?i=ut(o):0!==s&&(i=ut(s));if(0===i)return 0;if(0!==t&&t!==i&&0===(t&r)&&((r=i&-i)>=(s=t&-t)||16===r&&0!==(4194240&s)))return t;if(0!==(4&i)&&(i|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=i;0<t;)r=1<<(n=31-ot(t)),i|=e[n],t&=~r;return i}function ft(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function gt(){var e=ht;return 0===(4194240&(ht<<=1))&&(ht=64),e}function mt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Ot(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function vt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var i=31-ot(n),r=1<<i;r&t|e[i]&t&&(e[i]|=t),n&=~r}}var yt=0;function bt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var wt,kt,St,xt,Tt,_t=!1,Pt=[],Ct=null,Et=null,Qt=null,At=new Map,Rt=new Map,Nt=[],It="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Dt(e,t){switch(e){case"focusin":case"focusout":Ct=null;break;case"dragenter":case"dragleave":Et=null;break;case"mouseover":case"mouseout":Qt=null;break;case"pointerover":case"pointerout":At.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Rt.delete(t.pointerId)}}function Mt(e,t,n,i,r,s){return null===e||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:i,nativeEvent:s,targetContainers:[r]},null!==t&&(null!==(t=yr(t))&&kt(t)),e):(e.eventSystemFlags|=i,t=e.targetContainers,null!==r&&-1===t.indexOf(r)&&t.push(r),e)}function Lt(e){var t=vr(e.target);if(null!==t){var n=ze(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=je(n)))return e.blockedOn=t,void Tt(e.priority,(function(){St(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function $t(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Gt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=yr(n))&&kt(t),e.blockedOn=n,!1;var i=new(n=e.nativeEvent).constructor(n.type,n);be=i,n.target.dispatchEvent(i),be=null,t.shift()}return!0}function Ut(e,t,n){$t(e)&&n.delete(t)}function qt(){_t=!1,null!==Ct&&$t(Ct)&&(Ct=null),null!==Et&&$t(Et)&&(Et=null),null!==Qt&&$t(Qt)&&(Qt=null),At.forEach(Ut),Rt.forEach(Ut)}function Vt(e,t){e.blockedOn===t&&(e.blockedOn=null,_t||(_t=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,qt)))}function zt(e){function t(t){return Vt(t,e)}if(0<Pt.length){Vt(Pt[0],e);for(var n=1;n<Pt.length;n++){var i=Pt[n];i.blockedOn===e&&(i.blockedOn=null)}}for(null!==Ct&&Vt(Ct,e),null!==Et&&Vt(Et,e),null!==Qt&&Vt(Qt,e),At.forEach(t),Rt.forEach(t),n=0;n<Nt.length;n++)(i=Nt[n]).blockedOn===e&&(i.blockedOn=null);for(;0<Nt.length&&null===(n=Nt[0]).blockedOn;)Lt(n),null===n.blockedOn&&Nt.shift()}var jt=b.ReactCurrentBatchConfig,Bt=!0;function Ft(e,t,n,i){var r=yt,s=jt.transition;jt.transition=null;try{yt=1,Xt(e,t,n,i)}finally{yt=r,jt.transition=s}}function Wt(e,t,n,i){var r=yt,s=jt.transition;jt.transition=null;try{yt=4,Xt(e,t,n,i)}finally{yt=r,jt.transition=s}}function Xt(e,t,n,i){if(Bt){var r=Gt(e,t,n,i);if(null===r)Bi(e,t,i,Yt,n),Dt(e,i);else if(function(e,t,n,i,r){switch(t){case"focusin":return Ct=Mt(Ct,e,t,n,i,r),!0;case"dragenter":return Et=Mt(Et,e,t,n,i,r),!0;case"mouseover":return Qt=Mt(Qt,e,t,n,i,r),!0;case"pointerover":var s=r.pointerId;return At.set(s,Mt(At.get(s)||null,e,t,n,i,r)),!0;case"gotpointercapture":return s=r.pointerId,Rt.set(s,Mt(Rt.get(s)||null,e,t,n,i,r)),!0}return!1}(r,e,t,n,i))i.stopPropagation();else if(Dt(e,i),4&t&&-1<It.indexOf(e)){for(;null!==r;){var s=yr(r);if(null!==s&&wt(s),null===(s=Gt(e,t,n,i))&&Bi(e,t,i,Yt,n),s===r)break;r=s}null!==r&&i.stopPropagation()}else Bi(e,t,i,null,n)}}var Yt=null;function Gt(e,t,n,i){if(Yt=null,null!==(e=vr(e=we(i))))if(null===(t=ze(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=je(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Yt=e,null}function Zt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ke()){case Je:return 1;case et:return 4;case tt:case nt:return 16;case it:return 536870912;default:return 16}default:return 16}}var Ht=null,Kt=null,Jt=null;function en(){if(Jt)return Jt;var e,t,n=Kt,i=n.length,r="value"in Ht?Ht.value:Ht.textContent,s=r.length;for(e=0;e<i&&n[e]===r[e];e++);var o=i-e;for(t=1;t<=o&&n[i-t]===r[s-t];t++);return Jt=r.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function sn(e){function t(t,n,i,r,s){for(var o in this._reactName=t,this._targetInst=i,this.type=n,this.nativeEvent=r,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(r):r[o]);return this.isDefaultPrevented=(null!=r.defaultPrevented?r.defaultPrevented:!1===r.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return L(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,an,ln,hn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cn=sn(hn),un=L({},hn,{view:0,detail:0}),dn=sn(un),fn=L({},un,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Tn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(on=e.screenX-ln.screenX,an=e.screenY-ln.screenY):an=on=0,ln=e),on)},movementY:function(e){return"movementY"in e?e.movementY:an}}),pn=sn(fn),gn=sn(L({},fn,{dataTransfer:0})),mn=sn(L({},un,{relatedTarget:0})),On=sn(L({},hn,{animationName:0,elapsedTime:0,pseudoElement:0})),vn=L({},hn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),yn=sn(vn),bn=sn(L({},hn,{data:0})),wn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},kn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Sn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function xn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Sn[e])&&!!t[e]}function Tn(){return xn}var _n=L({},un,{key:function(e){if(e.key){var t=wn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?kn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Tn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Pn=sn(_n),Cn=sn(L({},fn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),En=sn(L({},un,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Tn})),Qn=sn(L({},hn,{propertyName:0,elapsedTime:0,pseudoElement:0})),An=L({},fn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Rn=sn(An),Nn=[9,13,27,32],In=c&&"CompositionEvent"in window,Dn=null;c&&"documentMode"in document&&(Dn=document.documentMode);var Mn=c&&"TextEvent"in window&&!Dn,Ln=c&&(!In||Dn&&8<Dn&&11>=Dn),$n=String.fromCharCode(32),Un=!1;function qn(e,t){switch(e){case"keyup":return-1!==Nn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Vn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var zn=!1;var jn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Bn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!jn[e.type]:"textarea"===t}function Fn(e,t,n,i){_e(i),0<(t=Wi(t,"onChange")).length&&(n=new cn("onChange","change",null,n,i),e.push({event:n,listeners:t}))}var Wn=null,Xn=null;function Yn(e){$i(e,0)}function Gn(e){if(X(br(e)))return e}function Zn(e,t){if("change"===e)return t}var Hn=!1;if(c){var Kn;if(c){var Jn="oninput"in document;if(!Jn){var ei=document.createElement("div");ei.setAttribute("oninput","return;"),Jn="function"===typeof ei.oninput}Kn=Jn}else Kn=!1;Hn=Kn&&(!document.documentMode||9<document.documentMode)}function ti(){Wn&&(Wn.detachEvent("onpropertychange",ni),Xn=Wn=null)}function ni(e){if("value"===e.propertyName&&Gn(Xn)){var t=[];Fn(t,Xn,e,we(e)),Ae(Yn,t)}}function ii(e,t,n){"focusin"===e?(ti(),Xn=n,(Wn=t).attachEvent("onpropertychange",ni)):"focusout"===e&&ti()}function ri(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Gn(Xn)}function si(e,t){if("click"===e)return Gn(t)}function oi(e,t){if("input"===e||"change"===e)return Gn(t)}var ai="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function li(e,t){if(ai(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!u.call(t,r)||!ai(e[r],t[r]))return!1}return!0}function hi(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ci(e,t){var n,i=hi(e);for(e=0;i;){if(3===i.nodeType){if(n=e+i.textContent.length,e<=t&&n>=t)return{node:i,offset:t-e};e=n}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=hi(i)}}function ui(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?ui(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function di(){for(var e=window,t=Y();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(i){n=!1}if(!n)break;t=Y((e=t.contentWindow).document)}return t}function fi(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pi(e){var t=di(),n=e.focusedElem,i=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&ui(n.ownerDocument.documentElement,n)){if(null!==i&&fi(n))if(t=i.start,void 0===(e=i.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var r=n.textContent.length,s=Math.min(i.start,r);i=void 0===i.end?s:Math.min(i.end,r),!e.extend&&s>i&&(r=i,i=s,s=r),r=ci(n,s);var o=ci(n,i);r&&o&&(1!==e.rangeCount||e.anchorNode!==r.node||e.anchorOffset!==r.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(r.node,r.offset),e.removeAllRanges(),s>i?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var gi=c&&"documentMode"in document&&11>=document.documentMode,mi=null,Oi=null,vi=null,yi=!1;function bi(e,t,n){var i=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;yi||null==mi||mi!==Y(i)||("selectionStart"in(i=mi)&&fi(i)?i={start:i.selectionStart,end:i.selectionEnd}:i={anchorNode:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset},vi&&li(vi,i)||(vi=i,0<(i=Wi(Oi,"onSelect")).length&&(t=new cn("onSelect","select",null,t,n),e.push({event:t,listeners:i}),t.target=mi)))}function wi(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var ki={animationend:wi("Animation","AnimationEnd"),animationiteration:wi("Animation","AnimationIteration"),animationstart:wi("Animation","AnimationStart"),transitionend:wi("Transition","TransitionEnd")},Si={},xi={};function Ti(e){if(Si[e])return Si[e];if(!ki[e])return e;var t,n=ki[e];for(t in n)if(n.hasOwnProperty(t)&&t in xi)return Si[e]=n[t];return e}c&&(xi=document.createElement("div").style,"AnimationEvent"in window||(delete ki.animationend.animation,delete ki.animationiteration.animation,delete ki.animationstart.animation),"TransitionEvent"in window||delete ki.transitionend.transition);var _i=Ti("animationend"),Pi=Ti("animationiteration"),Ci=Ti("animationstart"),Ei=Ti("transitionend"),Qi=new Map,Ai="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ri(e,t){Qi.set(e,t),l(t,[e])}for(var Ni=0;Ni<Ai.length;Ni++){var Ii=Ai[Ni];Ri(Ii.toLowerCase(),"on"+(Ii[0].toUpperCase()+Ii.slice(1)))}Ri(_i,"onAnimationEnd"),Ri(Pi,"onAnimationIteration"),Ri(Ci,"onAnimationStart"),Ri("dblclick","onDoubleClick"),Ri("focusin","onFocus"),Ri("focusout","onBlur"),Ri(Ei,"onTransitionEnd"),h("onMouseEnter",["mouseout","mouseover"]),h("onMouseLeave",["mouseout","mouseover"]),h("onPointerEnter",["pointerout","pointerover"]),h("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Di="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mi=new Set("cancel close invalid load scroll toggle".split(" ").concat(Di));function Li(e,t,n){var i=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,i,r,o,a,l,h){if(Ve.apply(this,arguments),Me){if(!Me)throw Error(s(198));var c=Le;Me=!1,Le=null,$e||($e=!0,Ue=c)}}(i,t,void 0,e),e.currentTarget=null}function $i(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var i=e[n],r=i.event;i=i.listeners;e:{var s=void 0;if(t)for(var o=i.length-1;0<=o;o--){var a=i[o],l=a.instance,h=a.currentTarget;if(a=a.listener,l!==s&&r.isPropagationStopped())break e;Li(r,a,h),s=l}else for(o=0;o<i.length;o++){if(l=(a=i[o]).instance,h=a.currentTarget,a=a.listener,l!==s&&r.isPropagationStopped())break e;Li(r,a,h),s=l}}}if($e)throw e=Ue,$e=!1,Ue=null,e}function Ui(e,t){var n=t[gr];void 0===n&&(n=t[gr]=new Set);var i=e+"__bubble";n.has(i)||(ji(t,e,2,!1),n.add(i))}function qi(e,t,n){var i=0;t&&(i|=4),ji(n,e,i,t)}var Vi="_reactListening"+Math.random().toString(36).slice(2);function zi(e){if(!e[Vi]){e[Vi]=!0,o.forEach((function(t){"selectionchange"!==t&&(Mi.has(t)||qi(t,!1,e),qi(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Vi]||(t[Vi]=!0,qi("selectionchange",!1,t))}}function ji(e,t,n,i){switch(Zt(t)){case 1:var r=Ft;break;case 4:r=Wt;break;default:r=Xt}n=r.bind(null,t,n,e),r=void 0,!Ne||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(r=!0),i?void 0!==r?e.addEventListener(t,n,{capture:!0,passive:r}):e.addEventListener(t,n,!0):void 0!==r?e.addEventListener(t,n,{passive:r}):e.addEventListener(t,n,!1)}function Bi(e,t,n,i,r){var s=i;if(0===(1&t)&&0===(2&t)&&null!==i)e:for(;;){if(null===i)return;var o=i.tag;if(3===o||4===o){var a=i.stateNode.containerInfo;if(a===r||8===a.nodeType&&a.parentNode===r)break;if(4===o)for(o=i.return;null!==o;){var l=o.tag;if((3===l||4===l)&&((l=o.stateNode.containerInfo)===r||8===l.nodeType&&l.parentNode===r))return;o=o.return}for(;null!==a;){if(null===(o=vr(a)))return;if(5===(l=o.tag)||6===l){i=s=o;continue e}a=a.parentNode}}i=i.return}Ae((function(){var i=s,r=we(n),o=[];e:{var a=Qi.get(e);if(void 0!==a){var l=cn,h=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=Pn;break;case"focusin":h="focus",l=mn;break;case"focusout":h="blur",l=mn;break;case"beforeblur":case"afterblur":l=mn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=gn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=En;break;case _i:case Pi:case Ci:l=On;break;case Ei:l=Qn;break;case"scroll":l=dn;break;case"wheel":l=Rn;break;case"copy":case"cut":case"paste":l=yn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Cn}var c=0!==(4&t),u=!c&&"scroll"===e,d=c?null!==a?a+"Capture":null:a;c=[];for(var f,p=i;null!==p;){var g=(f=p).stateNode;if(5===f.tag&&null!==g&&(f=g,null!==d&&(null!=(g=Re(p,d))&&c.push(Fi(p,g,f)))),u)break;p=p.return}0<c.length&&(a=new l(a,h,null,n,r),o.push({event:a,listeners:c}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(a="mouseover"===e||"pointerover"===e)||n===be||!(h=n.relatedTarget||n.fromElement)||!vr(h)&&!h[pr])&&(l||a)&&(a=r.window===r?r:(a=r.ownerDocument)?a.defaultView||a.parentWindow:window,l?(l=i,null!==(h=(h=n.relatedTarget||n.toElement)?vr(h):null)&&(h!==(u=ze(h))||5!==h.tag&&6!==h.tag)&&(h=null)):(l=null,h=i),l!==h)){if(c=pn,g="onMouseLeave",d="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(c=Cn,g="onPointerLeave",d="onPointerEnter",p="pointer"),u=null==l?a:br(l),f=null==h?a:br(h),(a=new c(g,p+"leave",l,n,r)).target=u,a.relatedTarget=f,g=null,vr(r)===i&&((c=new c(d,p+"enter",h,n,r)).target=f,c.relatedTarget=u,g=c),u=g,l&&h)e:{for(d=h,p=0,f=c=l;f;f=Xi(f))p++;for(f=0,g=d;g;g=Xi(g))f++;for(;0<p-f;)c=Xi(c),p--;for(;0<f-p;)d=Xi(d),f--;for(;p--;){if(c===d||null!==d&&c===d.alternate)break e;c=Xi(c),d=Xi(d)}c=null}else c=null;null!==l&&Yi(o,a,l,c,!1),null!==h&&null!==u&&Yi(o,u,h,c,!0)}if("select"===(l=(a=i?br(i):window).nodeName&&a.nodeName.toLowerCase())||"input"===l&&"file"===a.type)var m=Zn;else if(Bn(a))if(Hn)m=oi;else{m=ri;var O=ii}else(l=a.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===a.type||"radio"===a.type)&&(m=si);switch(m&&(m=m(e,i))?Fn(o,m,n,r):(O&&O(e,a,i),"focusout"===e&&(O=a._wrapperState)&&O.controlled&&"number"===a.type&&ee(a,"number",a.value)),O=i?br(i):window,e){case"focusin":(Bn(O)||"true"===O.contentEditable)&&(mi=O,Oi=i,vi=null);break;case"focusout":vi=Oi=mi=null;break;case"mousedown":yi=!0;break;case"contextmenu":case"mouseup":case"dragend":yi=!1,bi(o,n,r);break;case"selectionchange":if(gi)break;case"keydown":case"keyup":bi(o,n,r)}var v;if(In)e:{switch(e){case"compositionstart":var y="onCompositionStart";break e;case"compositionend":y="onCompositionEnd";break e;case"compositionupdate":y="onCompositionUpdate";break e}y=void 0}else zn?qn(e,n)&&(y="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(y="onCompositionStart");y&&(Ln&&"ko"!==n.locale&&(zn||"onCompositionStart"!==y?"onCompositionEnd"===y&&zn&&(v=en()):(Kt="value"in(Ht=r)?Ht.value:Ht.textContent,zn=!0)),0<(O=Wi(i,y)).length&&(y=new bn(y,e,null,n,r),o.push({event:y,listeners:O}),v?y.data=v:null!==(v=Vn(n))&&(y.data=v))),(v=Mn?function(e,t){switch(e){case"compositionend":return Vn(t);case"keypress":return 32!==t.which?null:(Un=!0,$n);case"textInput":return(e=t.data)===$n&&Un?null:e;default:return null}}(e,n):function(e,t){if(zn)return"compositionend"===e||!In&&qn(e,t)?(e=en(),Jt=Kt=Ht=null,zn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Ln&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(i=Wi(i,"onBeforeInput")).length&&(r=new bn("onBeforeInput","beforeinput",null,n,r),o.push({event:r,listeners:i}),r.data=v))}$i(o,t)}))}function Fi(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Wi(e,t){for(var n=t+"Capture",i=[];null!==e;){var r=e,s=r.stateNode;5===r.tag&&null!==s&&(r=s,null!=(s=Re(e,n))&&i.unshift(Fi(e,s,r)),null!=(s=Re(e,t))&&i.push(Fi(e,s,r))),e=e.return}return i}function Xi(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Yi(e,t,n,i,r){for(var s=t._reactName,o=[];null!==n&&n!==i;){var a=n,l=a.alternate,h=a.stateNode;if(null!==l&&l===i)break;5===a.tag&&null!==h&&(a=h,r?null!=(l=Re(n,s))&&o.unshift(Fi(n,l,a)):r||null!=(l=Re(n,s))&&o.push(Fi(n,l,a))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Gi=/\r\n?/g,Zi=/\u0000|\uFFFD/g;function Hi(e){return("string"===typeof e?e:""+e).replace(Gi,"\n").replace(Zi,"")}function Ki(e,t,n){if(t=Hi(t),Hi(e)!==t&&n)throw Error(s(425))}function Ji(){}var er=null,tr=null;function nr(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ir="function"===typeof setTimeout?setTimeout:void 0,rr="function"===typeof clearTimeout?clearTimeout:void 0,sr="function"===typeof Promise?Promise:void 0,or="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof sr?function(e){return sr.resolve(null).then(e).catch(ar)}:ir;function ar(e){setTimeout((function(){throw e}))}function lr(e,t){var n=t,i=0;do{var r=n.nextSibling;if(e.removeChild(n),r&&8===r.nodeType)if("/$"===(n=r.data)){if(0===i)return e.removeChild(r),void zt(t);i--}else"$"!==n&&"$?"!==n&&"$!"!==n||i++;n=r}while(n);zt(t)}function hr(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function cr(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var ur=Math.random().toString(36).slice(2),dr="__reactFiber$"+ur,fr="__reactProps$"+ur,pr="__reactContainer$"+ur,gr="__reactEvents$"+ur,mr="__reactListeners$"+ur,Or="__reactHandles$"+ur;function vr(e){var t=e[dr];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pr]||n[dr]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=cr(e);null!==e;){if(n=e[dr])return n;e=cr(e)}return t}n=(e=n).parentNode}return null}function yr(e){return!(e=e[dr]||e[pr])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function br(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(s(33))}function wr(e){return e[fr]||null}var kr=[],Sr=-1;function xr(e){return{current:e}}function Tr(e){0>Sr||(e.current=kr[Sr],kr[Sr]=null,Sr--)}function _r(e,t){Sr++,kr[Sr]=e.current,e.current=t}var Pr={},Cr=xr(Pr),Er=xr(!1),Qr=Pr;function Ar(e,t){var n=e.type.contextTypes;if(!n)return Pr;var i=e.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===t)return i.__reactInternalMemoizedMaskedChildContext;var r,s={};for(r in n)s[r]=t[r];return i&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Rr(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Nr(){Tr(Er),Tr(Cr)}function Ir(e,t,n){if(Cr.current!==Pr)throw Error(s(168));_r(Cr,t),_r(Er,n)}function Dr(e,t,n){var i=e.stateNode;if(t=t.childContextTypes,"function"!==typeof i.getChildContext)return n;for(var r in i=i.getChildContext())if(!(r in t))throw Error(s(108,j(e)||"Unknown",r));return L({},n,i)}function Mr(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Pr,Qr=Cr.current,_r(Cr,e),_r(Er,Er.current),!0}function Lr(e,t,n){var i=e.stateNode;if(!i)throw Error(s(169));n?(e=Dr(e,t,Qr),i.__reactInternalMemoizedMergedChildContext=e,Tr(Er),Tr(Cr),_r(Cr,e)):Tr(Er),_r(Er,n)}var $r=null,Ur=!1,qr=!1;function Vr(e){null===$r?$r=[e]:$r.push(e)}function zr(){if(!qr&&null!==$r){qr=!0;var e=0,t=yt;try{var n=$r;for(yt=1;e<n.length;e++){var i=n[e];do{i=i(!0)}while(null!==i)}$r=null,Ur=!1}catch(r){throw null!==$r&&($r=$r.slice(e+1)),Xe(Je,zr),r}finally{yt=t,qr=!1}}return null}var jr=[],Br=0,Fr=null,Wr=0,Xr=[],Yr=0,Gr=null,Zr=1,Hr="";function Kr(e,t){jr[Br++]=Wr,jr[Br++]=Fr,Fr=e,Wr=t}function Jr(e,t,n){Xr[Yr++]=Zr,Xr[Yr++]=Hr,Xr[Yr++]=Gr,Gr=e;var i=Zr;e=Hr;var r=32-ot(i)-1;i&=~(1<<r),n+=1;var s=32-ot(t)+r;if(30<s){var o=r-r%5;s=(i&(1<<o)-1).toString(32),i>>=o,r-=o,Zr=1<<32-ot(t)+r|n<<r|i,Hr=s+e}else Zr=1<<s|n<<r|i,Hr=e}function es(e){null!==e.return&&(Kr(e,1),Jr(e,1,0))}function ts(e){for(;e===Fr;)Fr=jr[--Br],jr[Br]=null,Wr=jr[--Br],jr[Br]=null;for(;e===Gr;)Gr=Xr[--Yr],Xr[Yr]=null,Hr=Xr[--Yr],Xr[Yr]=null,Zr=Xr[--Yr],Xr[Yr]=null}var ns=null,is=null,rs=!1,ss=null;function os(e,t){var n=Ah(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function as(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ns=e,is=hr(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ns=e,is=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Gr?{id:Zr,overflow:Hr}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Ah(18,null,null,0)).stateNode=t,n.return=e,e.child=n,ns=e,is=null,!0);default:return!1}}function ls(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function hs(e){if(rs){var t=is;if(t){var n=t;if(!as(e,t)){if(ls(e))throw Error(s(418));t=hr(n.nextSibling);var i=ns;t&&as(e,t)?os(i,n):(e.flags=-4097&e.flags|2,rs=!1,ns=e)}}else{if(ls(e))throw Error(s(418));e.flags=-4097&e.flags|2,rs=!1,ns=e}}}function cs(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ns=e}function us(e){if(e!==ns)return!1;if(!rs)return cs(e),rs=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!nr(e.type,e.memoizedProps)),t&&(t=is)){if(ls(e))throw ds(),Error(s(418));for(;t;)os(e,t),t=hr(t.nextSibling)}if(cs(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){is=hr(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}is=null}}else is=ns?hr(e.stateNode.nextSibling):null;return!0}function ds(){for(var e=is;e;)e=hr(e.nextSibling)}function fs(){is=ns=null,rs=!1}function ps(e){null===ss?ss=[e]:ss.push(e)}var gs=b.ReactCurrentBatchConfig;function ms(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(s(309));var i=n.stateNode}if(!i)throw Error(s(147,e));var r=i,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=r.refs;null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(s(284));if(!n._owner)throw Error(s(290,e))}return e}function Os(e,t){throw e=Object.prototype.toString.call(t),Error(s(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function vs(e){return(0,e._init)(e._payload)}function ys(e){function t(t,n){if(e){var i=t.deletions;null===i?(t.deletions=[n],t.flags|=16):i.push(n)}}function n(n,i){if(!e)return null;for(;null!==i;)t(n,i),i=i.sibling;return null}function i(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function r(e,t){return(e=Nh(e,t)).index=0,e.sibling=null,e}function o(t,n,i){return t.index=i,e?null!==(i=t.alternate)?(i=i.index)<n?(t.flags|=2,n):i:(t.flags|=2,n):(t.flags|=1048576,n)}function a(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,i){return null===t||6!==t.tag?((t=Lh(n,e.mode,i)).return=e,t):((t=r(t,n)).return=e,t)}function h(e,t,n,i){var s=n.type;return s===S?u(e,t,n.props.children,i,n.key):null!==t&&(t.elementType===s||"object"===typeof s&&null!==s&&s.$$typeof===R&&vs(s)===t.type)?((i=r(t,n.props)).ref=ms(e,t,n),i.return=e,i):((i=Ih(n.type,n.key,n.props,null,e.mode,i)).ref=ms(e,t,n),i.return=e,i)}function c(e,t,n,i){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=$h(n,e.mode,i)).return=e,t):((t=r(t,n.children||[])).return=e,t)}function u(e,t,n,i,s){return null===t||7!==t.tag?((t=Dh(n,e.mode,i,s)).return=e,t):((t=r(t,n)).return=e,t)}function d(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Lh(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(n=Ih(t.type,t.key,t.props,null,e.mode,n)).ref=ms(e,null,t),n.return=e,n;case k:return(t=$h(t,e.mode,n)).return=e,t;case R:return d(e,(0,t._init)(t._payload),n)}if(te(t)||D(t))return(t=Dh(t,e.mode,n,null)).return=e,t;Os(e,t)}return null}function f(e,t,n,i){var r=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==r?null:l(e,t,""+n,i);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===r?h(e,t,n,i):null;case k:return n.key===r?c(e,t,n,i):null;case R:return f(e,t,(r=n._init)(n._payload),i)}if(te(n)||D(n))return null!==r?null:u(e,t,n,i,null);Os(e,n)}return null}function p(e,t,n,i,r){if("string"===typeof i&&""!==i||"number"===typeof i)return l(t,e=e.get(n)||null,""+i,r);if("object"===typeof i&&null!==i){switch(i.$$typeof){case w:return h(t,e=e.get(null===i.key?n:i.key)||null,i,r);case k:return c(t,e=e.get(null===i.key?n:i.key)||null,i,r);case R:return p(e,t,n,(0,i._init)(i._payload),r)}if(te(i)||D(i))return u(t,e=e.get(n)||null,i,r,null);Os(t,i)}return null}function g(r,s,a,l){for(var h=null,c=null,u=s,g=s=0,m=null;null!==u&&g<a.length;g++){u.index>g?(m=u,u=null):m=u.sibling;var O=f(r,u,a[g],l);if(null===O){null===u&&(u=m);break}e&&u&&null===O.alternate&&t(r,u),s=o(O,s,g),null===c?h=O:c.sibling=O,c=O,u=m}if(g===a.length)return n(r,u),rs&&Kr(r,g),h;if(null===u){for(;g<a.length;g++)null!==(u=d(r,a[g],l))&&(s=o(u,s,g),null===c?h=u:c.sibling=u,c=u);return rs&&Kr(r,g),h}for(u=i(r,u);g<a.length;g++)null!==(m=p(u,r,g,a[g],l))&&(e&&null!==m.alternate&&u.delete(null===m.key?g:m.key),s=o(m,s,g),null===c?h=m:c.sibling=m,c=m);return e&&u.forEach((function(e){return t(r,e)})),rs&&Kr(r,g),h}function m(r,a,l,h){var c=D(l);if("function"!==typeof c)throw Error(s(150));if(null==(l=c.call(l)))throw Error(s(151));for(var u=c=null,g=a,m=a=0,O=null,v=l.next();null!==g&&!v.done;m++,v=l.next()){g.index>m?(O=g,g=null):O=g.sibling;var y=f(r,g,v.value,h);if(null===y){null===g&&(g=O);break}e&&g&&null===y.alternate&&t(r,g),a=o(y,a,m),null===u?c=y:u.sibling=y,u=y,g=O}if(v.done)return n(r,g),rs&&Kr(r,m),c;if(null===g){for(;!v.done;m++,v=l.next())null!==(v=d(r,v.value,h))&&(a=o(v,a,m),null===u?c=v:u.sibling=v,u=v);return rs&&Kr(r,m),c}for(g=i(r,g);!v.done;m++,v=l.next())null!==(v=p(g,r,m,v.value,h))&&(e&&null!==v.alternate&&g.delete(null===v.key?m:v.key),a=o(v,a,m),null===u?c=v:u.sibling=v,u=v);return e&&g.forEach((function(e){return t(r,e)})),rs&&Kr(r,m),c}return function e(i,s,o,l){if("object"===typeof o&&null!==o&&o.type===S&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case w:e:{for(var h=o.key,c=s;null!==c;){if(c.key===h){if((h=o.type)===S){if(7===c.tag){n(i,c.sibling),(s=r(c,o.props.children)).return=i,i=s;break e}}else if(c.elementType===h||"object"===typeof h&&null!==h&&h.$$typeof===R&&vs(h)===c.type){n(i,c.sibling),(s=r(c,o.props)).ref=ms(i,c,o),s.return=i,i=s;break e}n(i,c);break}t(i,c),c=c.sibling}o.type===S?((s=Dh(o.props.children,i.mode,l,o.key)).return=i,i=s):((l=Ih(o.type,o.key,o.props,null,i.mode,l)).ref=ms(i,s,o),l.return=i,i=l)}return a(i);case k:e:{for(c=o.key;null!==s;){if(s.key===c){if(4===s.tag&&s.stateNode.containerInfo===o.containerInfo&&s.stateNode.implementation===o.implementation){n(i,s.sibling),(s=r(s,o.children||[])).return=i,i=s;break e}n(i,s);break}t(i,s),s=s.sibling}(s=$h(o,i.mode,l)).return=i,i=s}return a(i);case R:return e(i,s,(c=o._init)(o._payload),l)}if(te(o))return g(i,s,o,l);if(D(o))return m(i,s,o,l);Os(i,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==s&&6===s.tag?(n(i,s.sibling),(s=r(s,o)).return=i,i=s):(n(i,s),(s=Lh(o,i.mode,l)).return=i,i=s),a(i)):n(i,s)}}var bs=ys(!0),ws=ys(!1),ks=xr(null),Ss=null,xs=null,Ts=null;function _s(){Ts=xs=Ss=null}function Ps(e){var t=ks.current;Tr(ks),e._currentValue=t}function Cs(e,t,n){for(;null!==e;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==i&&(i.childLanes|=t)):null!==i&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===n)break;e=e.return}}function Es(e,t){Ss=e,Ts=xs=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(ya=!0),e.firstContext=null)}function Qs(e){var t=e._currentValue;if(Ts!==e)if(e={context:e,memoizedValue:t,next:null},null===xs){if(null===Ss)throw Error(s(308));xs=e,Ss.dependencies={lanes:0,firstContext:e}}else xs=xs.next=e;return t}var As=null;function Rs(e){null===As?As=[e]:As.push(e)}function Ns(e,t,n,i){var r=t.interleaved;return null===r?(n.next=n,Rs(t)):(n.next=r.next,r.next=n),t.interleaved=n,Is(e,i)}function Is(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Ds=!1;function Ms(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ls(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function $s(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Us(e,t,n){var i=e.updateQueue;if(null===i)return null;if(i=i.shared,0!==(2&Cl)){var r=i.pending;return null===r?t.next=t:(t.next=r.next,r.next=t),i.pending=t,Is(e,n)}return null===(r=i.interleaved)?(t.next=t,Rs(i)):(t.next=r.next,r.next=t),i.interleaved=t,Is(e,n)}function qs(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var i=t.lanes;n|=i&=e.pendingLanes,t.lanes=n,vt(e,n)}}function Vs(e,t){var n=e.updateQueue,i=e.alternate;if(null!==i&&n===(i=i.updateQueue)){var r=null,s=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===s?r=s=o:s=s.next=o,n=n.next}while(null!==n);null===s?r=s=t:s=s.next=t}else r=s=t;return n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:i.shared,effects:i.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function zs(e,t,n,i){var r=e.updateQueue;Ds=!1;var s=r.firstBaseUpdate,o=r.lastBaseUpdate,a=r.shared.pending;if(null!==a){r.shared.pending=null;var l=a,h=l.next;l.next=null,null===o?s=h:o.next=h,o=l;var c=e.alternate;null!==c&&((a=(c=c.updateQueue).lastBaseUpdate)!==o&&(null===a?c.firstBaseUpdate=h:a.next=h,c.lastBaseUpdate=l))}if(null!==s){var u=r.baseState;for(o=0,c=h=l=null,a=s;;){var d=a.lane,f=a.eventTime;if((i&d)===d){null!==c&&(c=c.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=e,g=a;switch(d=t,f=n,g.tag){case 1:if("function"===typeof(p=g.payload)){u=p.call(f,u,d);break e}u=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(d="function"===typeof(p=g.payload)?p.call(f,u,d):p)||void 0===d)break e;u=L({},u,d);break e;case 2:Ds=!0}}null!==a.callback&&0!==a.lane&&(e.flags|=64,null===(d=r.effects)?r.effects=[a]:d.push(a))}else f={eventTime:f,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===c?(h=c=f,l=u):c=c.next=f,o|=d;if(null===(a=a.next)){if(null===(a=r.shared.pending))break;a=(d=a).next,d.next=null,r.lastBaseUpdate=d,r.shared.pending=null}}if(null===c&&(l=u),r.baseState=l,r.firstBaseUpdate=h,r.lastBaseUpdate=c,null!==(t=r.shared.interleaved)){r=t;do{o|=r.lane,r=r.next}while(r!==t)}else null===s&&(r.shared.lanes=0);Ml|=o,e.lanes=o,e.memoizedState=u}}function js(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var i=e[t],r=i.callback;if(null!==r){if(i.callback=null,i=n,"function"!==typeof r)throw Error(s(191,r));r.call(i)}}}var Bs={},Fs=xr(Bs),Ws=xr(Bs),Xs=xr(Bs);function Ys(e){if(e===Bs)throw Error(s(174));return e}function Gs(e,t){switch(_r(Xs,t),_r(Ws,e),_r(Fs,Bs),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Tr(Fs),_r(Fs,t)}function Zs(){Tr(Fs),Tr(Ws),Tr(Xs)}function Hs(e){Ys(Xs.current);var t=Ys(Fs.current),n=le(t,e.type);t!==n&&(_r(Ws,e),_r(Fs,n))}function Ks(e){Ws.current===e&&(Tr(Fs),Tr(Ws))}var Js=xr(0);function eo(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var to=[];function no(){for(var e=0;e<to.length;e++)to[e]._workInProgressVersionPrimary=null;to.length=0}var io=b.ReactCurrentDispatcher,ro=b.ReactCurrentBatchConfig,so=0,oo=null,ao=null,lo=null,ho=!1,co=!1,uo=0,fo=0;function po(){throw Error(s(321))}function go(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ai(e[n],t[n]))return!1;return!0}function mo(e,t,n,i,r,o){if(so=o,oo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,io.current=null===e||null===e.memoizedState?Jo:ea,e=n(i,r),co){o=0;do{if(co=!1,uo=0,25<=o)throw Error(s(301));o+=1,lo=ao=null,t.updateQueue=null,io.current=ta,e=n(i,r)}while(co)}if(io.current=Ko,t=null!==ao&&null!==ao.next,so=0,lo=ao=oo=null,ho=!1,t)throw Error(s(300));return e}function Oo(){var e=0!==uo;return uo=0,e}function vo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===lo?oo.memoizedState=lo=e:lo=lo.next=e,lo}function yo(){if(null===ao){var e=oo.alternate;e=null!==e?e.memoizedState:null}else e=ao.next;var t=null===lo?oo.memoizedState:lo.next;if(null!==t)lo=t,ao=e;else{if(null===e)throw Error(s(310));e={memoizedState:(ao=e).memoizedState,baseState:ao.baseState,baseQueue:ao.baseQueue,queue:ao.queue,next:null},null===lo?oo.memoizedState=lo=e:lo=lo.next=e}return lo}function bo(e,t){return"function"===typeof t?t(e):t}function wo(e){var t=yo(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var i=ao,r=i.baseQueue,o=n.pending;if(null!==o){if(null!==r){var a=r.next;r.next=o.next,o.next=a}i.baseQueue=r=o,n.pending=null}if(null!==r){o=r.next,i=i.baseState;var l=a=null,h=null,c=o;do{var u=c.lane;if((so&u)===u)null!==h&&(h=h.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),i=c.hasEagerState?c.eagerState:e(i,c.action);else{var d={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};null===h?(l=h=d,a=i):h=h.next=d,oo.lanes|=u,Ml|=u}c=c.next}while(null!==c&&c!==o);null===h?a=i:h.next=l,ai(i,t.memoizedState)||(ya=!0),t.memoizedState=i,t.baseState=a,t.baseQueue=h,n.lastRenderedState=i}if(null!==(e=n.interleaved)){r=e;do{o=r.lane,oo.lanes|=o,Ml|=o,r=r.next}while(r!==e)}else null===r&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function ko(e){var t=yo(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var i=n.dispatch,r=n.pending,o=t.memoizedState;if(null!==r){n.pending=null;var a=r=r.next;do{o=e(o,a.action),a=a.next}while(a!==r);ai(o,t.memoizedState)||(ya=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,i]}function So(){}function xo(e,t){var n=oo,i=yo(),r=t(),o=!ai(i.memoizedState,r);if(o&&(i.memoizedState=r,ya=!0),i=i.queue,Mo(Po.bind(null,n,i,e),[e]),i.getSnapshot!==t||o||null!==lo&&1&lo.memoizedState.tag){if(n.flags|=2048,Ao(9,_o.bind(null,n,i,r,t),void 0,null),null===El)throw Error(s(349));0!==(30&so)||To(n,t,r)}return r}function To(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=oo.updateQueue)?(t={lastEffect:null,stores:null},oo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function _o(e,t,n,i){t.value=n,t.getSnapshot=i,Co(t)&&Eo(e)}function Po(e,t,n){return n((function(){Co(t)&&Eo(e)}))}function Co(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ai(e,n)}catch(i){return!0}}function Eo(e){var t=Is(e,1);null!==t&&nh(t,e,1,-1)}function Qo(e){var t=vo();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:bo,lastRenderedState:e},t.queue=e,e=e.dispatch=Yo.bind(null,oo,e),[t.memoizedState,e]}function Ao(e,t,n,i){return e={tag:e,create:t,destroy:n,deps:i,next:null},null===(t=oo.updateQueue)?(t={lastEffect:null,stores:null},oo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(i=n.next,n.next=e,e.next=i,t.lastEffect=e),e}function Ro(){return yo().memoizedState}function No(e,t,n,i){var r=vo();oo.flags|=e,r.memoizedState=Ao(1|t,n,void 0,void 0===i?null:i)}function Io(e,t,n,i){var r=yo();i=void 0===i?null:i;var s=void 0;if(null!==ao){var o=ao.memoizedState;if(s=o.destroy,null!==i&&go(i,o.deps))return void(r.memoizedState=Ao(t,n,s,i))}oo.flags|=e,r.memoizedState=Ao(1|t,n,s,i)}function Do(e,t){return No(8390656,8,e,t)}function Mo(e,t){return Io(2048,8,e,t)}function Lo(e,t){return Io(4,2,e,t)}function $o(e,t){return Io(4,4,e,t)}function Uo(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function qo(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Io(4,4,Uo.bind(null,t,e),n)}function Vo(){}function zo(e,t){var n=yo();t=void 0===t?null:t;var i=n.memoizedState;return null!==i&&null!==t&&go(t,i[1])?i[0]:(n.memoizedState=[e,t],e)}function jo(e,t){var n=yo();t=void 0===t?null:t;var i=n.memoizedState;return null!==i&&null!==t&&go(t,i[1])?i[0]:(e=e(),n.memoizedState=[e,t],e)}function Bo(e,t,n){return 0===(21&so)?(e.baseState&&(e.baseState=!1,ya=!0),e.memoizedState=n):(ai(n,t)||(n=gt(),oo.lanes|=n,Ml|=n,e.baseState=!0),t)}function Fo(e,t){var n=yt;yt=0!==n&&4>n?n:4,e(!0);var i=ro.transition;ro.transition={};try{e(!1),t()}finally{yt=n,ro.transition=i}}function Wo(){return yo().memoizedState}function Xo(e,t,n){var i=th(e);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},Go(e))Zo(t,n);else if(null!==(n=Ns(e,t,n,i))){nh(n,e,i,eh()),Ho(n,t,i)}}function Yo(e,t,n){var i=th(e),r={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(Go(e))Zo(t,r);else{var s=e.alternate;if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var o=t.lastRenderedState,a=s(o,n);if(r.hasEagerState=!0,r.eagerState=a,ai(a,o)){var l=t.interleaved;return null===l?(r.next=r,Rs(t)):(r.next=l.next,l.next=r),void(t.interleaved=r)}}catch(h){}null!==(n=Ns(e,t,r,i))&&(nh(n,e,i,r=eh()),Ho(n,t,i))}}function Go(e){var t=e.alternate;return e===oo||null!==t&&t===oo}function Zo(e,t){co=ho=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Ho(e,t,n){if(0!==(4194240&n)){var i=t.lanes;n|=i&=e.pendingLanes,t.lanes=n,vt(e,n)}}var Ko={readContext:Qs,useCallback:po,useContext:po,useEffect:po,useImperativeHandle:po,useInsertionEffect:po,useLayoutEffect:po,useMemo:po,useReducer:po,useRef:po,useState:po,useDebugValue:po,useDeferredValue:po,useTransition:po,useMutableSource:po,useSyncExternalStore:po,useId:po,unstable_isNewReconciler:!1},Jo={readContext:Qs,useCallback:function(e,t){return vo().memoizedState=[e,void 0===t?null:t],e},useContext:Qs,useEffect:Do,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,No(4194308,4,Uo.bind(null,t,e),n)},useLayoutEffect:function(e,t){return No(4194308,4,e,t)},useInsertionEffect:function(e,t){return No(4,2,e,t)},useMemo:function(e,t){var n=vo();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var i=vo();return t=void 0!==n?n(t):t,i.memoizedState=i.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},i.queue=e,e=e.dispatch=Xo.bind(null,oo,e),[i.memoizedState,e]},useRef:function(e){return e={current:e},vo().memoizedState=e},useState:Qo,useDebugValue:Vo,useDeferredValue:function(e){return vo().memoizedState=e},useTransition:function(){var e=Qo(!1),t=e[0];return e=Fo.bind(null,e[1]),vo().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var i=oo,r=vo();if(rs){if(void 0===n)throw Error(s(407));n=n()}else{if(n=t(),null===El)throw Error(s(349));0!==(30&so)||To(i,t,n)}r.memoizedState=n;var o={value:n,getSnapshot:t};return r.queue=o,Do(Po.bind(null,i,o,e),[e]),i.flags|=2048,Ao(9,_o.bind(null,i,o,n,t),void 0,null),n},useId:function(){var e=vo(),t=El.identifierPrefix;if(rs){var n=Hr;t=":"+t+"R"+(n=(Zr&~(1<<32-ot(Zr)-1)).toString(32)+n),0<(n=uo++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=fo++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},ea={readContext:Qs,useCallback:zo,useContext:Qs,useEffect:Mo,useImperativeHandle:qo,useInsertionEffect:Lo,useLayoutEffect:$o,useMemo:jo,useReducer:wo,useRef:Ro,useState:function(){return wo(bo)},useDebugValue:Vo,useDeferredValue:function(e){return Bo(yo(),ao.memoizedState,e)},useTransition:function(){return[wo(bo)[0],yo().memoizedState]},useMutableSource:So,useSyncExternalStore:xo,useId:Wo,unstable_isNewReconciler:!1},ta={readContext:Qs,useCallback:zo,useContext:Qs,useEffect:Mo,useImperativeHandle:qo,useInsertionEffect:Lo,useLayoutEffect:$o,useMemo:jo,useReducer:ko,useRef:Ro,useState:function(){return ko(bo)},useDebugValue:Vo,useDeferredValue:function(e){var t=yo();return null===ao?t.memoizedState=e:Bo(t,ao.memoizedState,e)},useTransition:function(){return[ko(bo)[0],yo().memoizedState]},useMutableSource:So,useSyncExternalStore:xo,useId:Wo,unstable_isNewReconciler:!1};function na(e,t){if(e&&e.defaultProps){for(var n in t=L({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function ia(e,t,n,i){n=null===(n=n(i,t=e.memoizedState))||void 0===n?t:L({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var ra={isMounted:function(e){return!!(e=e._reactInternals)&&ze(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var i=eh(),r=th(e),s=$s(i,r);s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=Us(e,s,r))&&(nh(t,e,r,i),qs(t,e,r))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var i=eh(),r=th(e),s=$s(i,r);s.tag=1,s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=Us(e,s,r))&&(nh(t,e,r,i),qs(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=eh(),i=th(e),r=$s(n,i);r.tag=2,void 0!==t&&null!==t&&(r.callback=t),null!==(t=Us(e,r,i))&&(nh(t,e,i,n),qs(t,e,i))}};function sa(e,t,n,i,r,s,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(i,s,o):!t.prototype||!t.prototype.isPureReactComponent||(!li(n,i)||!li(r,s))}function oa(e,t,n){var i=!1,r=Pr,s=t.contextType;return"object"===typeof s&&null!==s?s=Qs(s):(r=Rr(t)?Qr:Cr.current,s=(i=null!==(i=t.contextTypes)&&void 0!==i)?Ar(e,r):Pr),t=new t(n,s),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ra,e.stateNode=t,t._reactInternals=e,i&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=r,e.__reactInternalMemoizedMaskedChildContext=s),t}function aa(e,t,n,i){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,i),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,i),t.state!==e&&ra.enqueueReplaceState(t,t.state,null)}function la(e,t,n,i){var r=e.stateNode;r.props=n,r.state=e.memoizedState,r.refs={},Ms(e);var s=t.contextType;"object"===typeof s&&null!==s?r.context=Qs(s):(s=Rr(t)?Qr:Cr.current,r.context=Ar(e,s)),r.state=e.memoizedState,"function"===typeof(s=t.getDerivedStateFromProps)&&(ia(e,t,s,n),r.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof r.getSnapshotBeforeUpdate||"function"!==typeof r.UNSAFE_componentWillMount&&"function"!==typeof r.componentWillMount||(t=r.state,"function"===typeof r.componentWillMount&&r.componentWillMount(),"function"===typeof r.UNSAFE_componentWillMount&&r.UNSAFE_componentWillMount(),t!==r.state&&ra.enqueueReplaceState(r,r.state,null),zs(e,n,r,i),r.state=e.memoizedState),"function"===typeof r.componentDidMount&&(e.flags|=4194308)}function ha(e,t){try{var n="",i=t;do{n+=V(i),i=i.return}while(i);var r=n}catch(s){r="\nError generating stack: "+s.message+"\n"+s.stack}return{value:e,source:t,stack:r,digest:null}}function ca(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function ua(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var da="function"===typeof WeakMap?WeakMap:Map;function fa(e,t,n){(n=$s(-1,n)).tag=3,n.payload={element:null};var i=t.value;return n.callback=function(){Bl||(Bl=!0,Fl=i),ua(0,t)},n}function pa(e,t,n){(n=$s(-1,n)).tag=3;var i=e.type.getDerivedStateFromError;if("function"===typeof i){var r=t.value;n.payload=function(){return i(r)},n.callback=function(){ua(0,t)}}var s=e.stateNode;return null!==s&&"function"===typeof s.componentDidCatch&&(n.callback=function(){ua(0,t),"function"!==typeof i&&(null===Wl?Wl=new Set([this]):Wl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function ga(e,t,n){var i=e.pingCache;if(null===i){i=e.pingCache=new da;var r=new Set;i.set(t,r)}else void 0===(r=i.get(t))&&(r=new Set,i.set(t,r));r.has(n)||(r.add(n),e=Th.bind(null,e,t,n),t.then(e,e))}function ma(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function Oa(e,t,n,i,r){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=$s(-1,1)).tag=2,Us(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=r,e)}var va=b.ReactCurrentOwner,ya=!1;function ba(e,t,n,i){t.child=null===e?ws(t,null,n,i):bs(t,e.child,n,i)}function wa(e,t,n,i,r){n=n.render;var s=t.ref;return Es(t,r),i=mo(e,t,n,i,s,r),n=Oo(),null===e||ya?(rs&&n&&es(t),t.flags|=1,ba(e,t,i,r),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r,Ba(e,t,r))}function ka(e,t,n,i,r){if(null===e){var s=n.type;return"function"!==typeof s||Rh(s)||void 0!==s.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Ih(n.type,null,i,t,t.mode,r)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,Sa(e,t,s,i,r))}if(s=e.child,0===(e.lanes&r)){var o=s.memoizedProps;if((n=null!==(n=n.compare)?n:li)(o,i)&&e.ref===t.ref)return Ba(e,t,r)}return t.flags|=1,(e=Nh(s,i)).ref=t.ref,e.return=t,t.child=e}function Sa(e,t,n,i,r){if(null!==e){var s=e.memoizedProps;if(li(s,i)&&e.ref===t.ref){if(ya=!1,t.pendingProps=i=s,0===(e.lanes&r))return t.lanes=e.lanes,Ba(e,t,r);0!==(131072&e.flags)&&(ya=!0)}}return _a(e,t,n,i,r)}function xa(e,t,n){var i=t.pendingProps,r=i.children,s=null!==e?e.memoizedState:null;if("hidden"===i.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},_r(Nl,Rl),Rl|=n;else{if(0===(1073741824&n))return e=null!==s?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,_r(Nl,Rl),Rl|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=null!==s?s.baseLanes:n,_r(Nl,Rl),Rl|=i}else null!==s?(i=s.baseLanes|n,t.memoizedState=null):i=n,_r(Nl,Rl),Rl|=i;return ba(e,t,r,n),t.child}function Ta(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function _a(e,t,n,i,r){var s=Rr(n)?Qr:Cr.current;return s=Ar(t,s),Es(t,r),n=mo(e,t,n,i,s,r),i=Oo(),null===e||ya?(rs&&i&&es(t),t.flags|=1,ba(e,t,n,r),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r,Ba(e,t,r))}function Pa(e,t,n,i,r){if(Rr(n)){var s=!0;Mr(t)}else s=!1;if(Es(t,r),null===t.stateNode)ja(e,t),oa(t,n,i),la(t,n,i,r),i=!0;else if(null===e){var o=t.stateNode,a=t.memoizedProps;o.props=a;var l=o.context,h=n.contextType;"object"===typeof h&&null!==h?h=Qs(h):h=Ar(t,h=Rr(n)?Qr:Cr.current);var c=n.getDerivedStateFromProps,u="function"===typeof c||"function"===typeof o.getSnapshotBeforeUpdate;u||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(a!==i||l!==h)&&aa(t,o,i,h),Ds=!1;var d=t.memoizedState;o.state=d,zs(t,i,o,r),l=t.memoizedState,a!==i||d!==l||Er.current||Ds?("function"===typeof c&&(ia(t,n,c,i),l=t.memoizedState),(a=Ds||sa(t,n,a,i,d,l,h))?(u||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=l),o.props=i,o.state=l,o.context=h,i=a):("function"===typeof o.componentDidMount&&(t.flags|=4194308),i=!1)}else{o=t.stateNode,Ls(e,t),a=t.memoizedProps,h=t.type===t.elementType?a:na(t.type,a),o.props=h,u=t.pendingProps,d=o.context,"object"===typeof(l=n.contextType)&&null!==l?l=Qs(l):l=Ar(t,l=Rr(n)?Qr:Cr.current);var f=n.getDerivedStateFromProps;(c="function"===typeof f||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(a!==u||d!==l)&&aa(t,o,i,l),Ds=!1,d=t.memoizedState,o.state=d,zs(t,i,o,r);var p=t.memoizedState;a!==u||d!==p||Er.current||Ds?("function"===typeof f&&(ia(t,n,f,i),p=t.memoizedState),(h=Ds||sa(t,n,h,i,d,p,l)||!1)?(c||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(i,p,l),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(i,p,l)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=p),o.props=i,o.state=p,o.context=l,i=h):("function"!==typeof o.componentDidUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),i=!1)}return Ca(e,t,n,i,s,r)}function Ca(e,t,n,i,r,s){Ta(e,t);var o=0!==(128&t.flags);if(!i&&!o)return r&&Lr(t,n,!1),Ba(e,t,s);i=t.stateNode,va.current=t;var a=o&&"function"!==typeof n.getDerivedStateFromError?null:i.render();return t.flags|=1,null!==e&&o?(t.child=bs(t,e.child,null,s),t.child=bs(t,null,a,s)):ba(e,t,a,s),t.memoizedState=i.state,r&&Lr(t,n,!0),t.child}function Ea(e){var t=e.stateNode;t.pendingContext?Ir(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Ir(0,t.context,!1),Gs(e,t.containerInfo)}function Qa(e,t,n,i,r){return fs(),ps(r),t.flags|=256,ba(e,t,n,i),t.child}var Aa,Ra,Na,Ia,Da={dehydrated:null,treeContext:null,retryLane:0};function Ma(e){return{baseLanes:e,cachePool:null,transitions:null}}function La(e,t,n){var i,r=t.pendingProps,o=Js.current,a=!1,l=0!==(128&t.flags);if((i=l)||(i=(null===e||null!==e.memoizedState)&&0!==(2&o)),i?(a=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),_r(Js,1&o),null===e)return hs(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=r.children,e=r.fallback,a?(r=t.mode,a=t.child,l={mode:"hidden",children:l},0===(1&r)&&null!==a?(a.childLanes=0,a.pendingProps=l):a=Mh(l,r,0,null),e=Dh(e,r,n,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=Ma(n),t.memoizedState=Da,e):$a(t,l));if(null!==(o=e.memoizedState)&&null!==(i=o.dehydrated))return function(e,t,n,i,r,o,a){if(n)return 256&t.flags?(t.flags&=-257,Ua(e,t,a,i=ca(Error(s(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=i.fallback,r=t.mode,i=Mh({mode:"visible",children:i.children},r,0,null),(o=Dh(o,r,a,null)).flags|=2,i.return=t,o.return=t,i.sibling=o,t.child=i,0!==(1&t.mode)&&bs(t,e.child,null,a),t.child.memoizedState=Ma(a),t.memoizedState=Da,o);if(0===(1&t.mode))return Ua(e,t,a,null);if("$!"===r.data){if(i=r.nextSibling&&r.nextSibling.dataset)var l=i.dgst;return i=l,Ua(e,t,a,i=ca(o=Error(s(419)),i,void 0))}if(l=0!==(a&e.childLanes),ya||l){if(null!==(i=El)){switch(a&-a){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}0!==(r=0!==(r&(i.suspendedLanes|a))?0:r)&&r!==o.retryLane&&(o.retryLane=r,Is(e,r),nh(i,e,r,-1))}return gh(),Ua(e,t,a,i=ca(Error(s(421))))}return"$?"===r.data?(t.flags|=128,t.child=e.child,t=Ph.bind(null,e),r._reactRetry=t,null):(e=o.treeContext,is=hr(r.nextSibling),ns=t,rs=!0,ss=null,null!==e&&(Xr[Yr++]=Zr,Xr[Yr++]=Hr,Xr[Yr++]=Gr,Zr=e.id,Hr=e.overflow,Gr=t),t=$a(t,i.children),t.flags|=4096,t)}(e,t,l,r,i,o,n);if(a){a=r.fallback,l=t.mode,i=(o=e.child).sibling;var h={mode:"hidden",children:r.children};return 0===(1&l)&&t.child!==o?((r=t.child).childLanes=0,r.pendingProps=h,t.deletions=null):(r=Nh(o,h)).subtreeFlags=14680064&o.subtreeFlags,null!==i?a=Nh(i,a):(a=Dh(a,l,n,null)).flags|=2,a.return=t,r.return=t,r.sibling=a,t.child=r,r=a,a=t.child,l=null===(l=e.child.memoizedState)?Ma(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},a.memoizedState=l,a.childLanes=e.childLanes&~n,t.memoizedState=Da,r}return e=(a=e.child).sibling,r=Nh(a,{mode:"visible",children:r.children}),0===(1&t.mode)&&(r.lanes=n),r.return=t,r.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function $a(e,t){return(t=Mh({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Ua(e,t,n,i){return null!==i&&ps(i),bs(t,e.child,null,n),(e=$a(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function qa(e,t,n){e.lanes|=t;var i=e.alternate;null!==i&&(i.lanes|=t),Cs(e.return,t,n)}function Va(e,t,n,i,r){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=n,s.tailMode=r)}function za(e,t,n){var i=t.pendingProps,r=i.revealOrder,s=i.tail;if(ba(e,t,i.children,n),0!==(2&(i=Js.current)))i=1&i|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&qa(e,n,t);else if(19===e.tag)qa(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}i&=1}if(_r(Js,i),0===(1&t.mode))t.memoizedState=null;else switch(r){case"forwards":for(n=t.child,r=null;null!==n;)null!==(e=n.alternate)&&null===eo(e)&&(r=n),n=n.sibling;null===(n=r)?(r=t.child,t.child=null):(r=n.sibling,n.sibling=null),Va(t,!1,r,n,s);break;case"backwards":for(n=null,r=t.child,t.child=null;null!==r;){if(null!==(e=r.alternate)&&null===eo(e)){t.child=r;break}e=r.sibling,r.sibling=n,n=r,r=e}Va(t,!0,n,null,s);break;case"together":Va(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function ja(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ba(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Ml|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(s(153));if(null!==t.child){for(n=Nh(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Nh(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Fa(e,t){if(!rs)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var i=null;null!==n;)null!==n.alternate&&(i=n),n=n.sibling;null===i?t||null===e.tail?e.tail=null:e.tail.sibling=null:i.sibling=null}}function Wa(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,i=0;if(t)for(var r=e.child;null!==r;)n|=r.lanes|r.childLanes,i|=14680064&r.subtreeFlags,i|=14680064&r.flags,r.return=e,r=r.sibling;else for(r=e.child;null!==r;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=e,r=r.sibling;return e.subtreeFlags|=i,e.childLanes=n,t}function Xa(e,t,n){var i=t.pendingProps;switch(ts(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Wa(t),null;case 1:case 17:return Rr(t.type)&&Nr(),Wa(t),null;case 3:return i=t.stateNode,Zs(),Tr(Er),Tr(Cr),no(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),null!==e&&null!==e.child||(us(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==ss&&(oh(ss),ss=null))),Ra(e,t),Wa(t),null;case 5:Ks(t);var r=Ys(Xs.current);if(n=t.type,null!==e&&null!=t.stateNode)Na(e,t,n,i,r),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!i){if(null===t.stateNode)throw Error(s(166));return Wa(t),null}if(e=Ys(Fs.current),us(t)){i=t.stateNode,n=t.type;var o=t.memoizedProps;switch(i[dr]=t,i[fr]=o,e=0!==(1&t.mode),n){case"dialog":Ui("cancel",i),Ui("close",i);break;case"iframe":case"object":case"embed":Ui("load",i);break;case"video":case"audio":for(r=0;r<Di.length;r++)Ui(Di[r],i);break;case"source":Ui("error",i);break;case"img":case"image":case"link":Ui("error",i),Ui("load",i);break;case"details":Ui("toggle",i);break;case"input":Z(i,o),Ui("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!o.multiple},Ui("invalid",i);break;case"textarea":re(i,o),Ui("invalid",i)}for(var l in ve(n,o),r=null,o)if(o.hasOwnProperty(l)){var h=o[l];"children"===l?"string"===typeof h?i.textContent!==h&&(!0!==o.suppressHydrationWarning&&Ki(i.textContent,h,e),r=["children",h]):"number"===typeof h&&i.textContent!==""+h&&(!0!==o.suppressHydrationWarning&&Ki(i.textContent,h,e),r=["children",""+h]):a.hasOwnProperty(l)&&null!=h&&"onScroll"===l&&Ui("scroll",i)}switch(n){case"input":W(i),J(i,o,!0);break;case"textarea":W(i),oe(i);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(i.onclick=Ji)}i=r,t.updateQueue=i,null!==i&&(t.flags|=4)}else{l=9===r.nodeType?r:r.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ae(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof i.is?e=l.createElement(n,{is:i.is}):(e=l.createElement(n),"select"===n&&(l=e,i.multiple?l.multiple=!0:i.size&&(l.size=i.size))):e=l.createElementNS(e,n),e[dr]=t,e[fr]=i,Aa(e,t,!1,!1),t.stateNode=e;e:{switch(l=ye(n,i),n){case"dialog":Ui("cancel",e),Ui("close",e),r=i;break;case"iframe":case"object":case"embed":Ui("load",e),r=i;break;case"video":case"audio":for(r=0;r<Di.length;r++)Ui(Di[r],e);r=i;break;case"source":Ui("error",e),r=i;break;case"img":case"image":case"link":Ui("error",e),Ui("load",e),r=i;break;case"details":Ui("toggle",e),r=i;break;case"input":Z(e,i),r=G(e,i),Ui("invalid",e);break;case"option":default:r=i;break;case"select":e._wrapperState={wasMultiple:!!i.multiple},r=L({},i,{value:void 0}),Ui("invalid",e);break;case"textarea":re(e,i),r=ie(e,i),Ui("invalid",e)}for(o in ve(n,r),h=r)if(h.hasOwnProperty(o)){var c=h[o];"style"===o?me(e,c):"dangerouslySetInnerHTML"===o?null!=(c=c?c.__html:void 0)&&ue(e,c):"children"===o?"string"===typeof c?("textarea"!==n||""!==c)&&de(e,c):"number"===typeof c&&de(e,""+c):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(a.hasOwnProperty(o)?null!=c&&"onScroll"===o&&Ui("scroll",e):null!=c&&y(e,o,c,l))}switch(n){case"input":W(e),J(e,i,!1);break;case"textarea":W(e),oe(e);break;case"option":null!=i.value&&e.setAttribute("value",""+B(i.value));break;case"select":e.multiple=!!i.multiple,null!=(o=i.value)?ne(e,!!i.multiple,o,!1):null!=i.defaultValue&&ne(e,!!i.multiple,i.defaultValue,!0);break;default:"function"===typeof r.onClick&&(e.onclick=Ji)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Wa(t),null;case 6:if(e&&null!=t.stateNode)Ia(e,t,e.memoizedProps,i);else{if("string"!==typeof i&&null===t.stateNode)throw Error(s(166));if(n=Ys(Xs.current),Ys(Fs.current),us(t)){if(i=t.stateNode,n=t.memoizedProps,i[dr]=t,(o=i.nodeValue!==n)&&null!==(e=ns))switch(e.tag){case 3:Ki(i.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Ki(i.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(i=(9===n.nodeType?n:n.ownerDocument).createTextNode(i))[dr]=t,t.stateNode=i}return Wa(t),null;case 13:if(Tr(Js),i=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(rs&&null!==is&&0!==(1&t.mode)&&0===(128&t.flags))ds(),fs(),t.flags|=98560,o=!1;else if(o=us(t),null!==i&&null!==i.dehydrated){if(null===e){if(!o)throw Error(s(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(s(317));o[dr]=t}else fs(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Wa(t),o=!1}else null!==ss&&(oh(ss),ss=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((i=null!==i)!==(null!==e&&null!==e.memoizedState)&&i&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&Js.current)?0===Il&&(Il=3):gh())),null!==t.updateQueue&&(t.flags|=4),Wa(t),null);case 4:return Zs(),Ra(e,t),null===e&&zi(t.stateNode.containerInfo),Wa(t),null;case 10:return Ps(t.type._context),Wa(t),null;case 19:if(Tr(Js),null===(o=t.memoizedState))return Wa(t),null;if(i=0!==(128&t.flags),null===(l=o.rendering))if(i)Fa(o,!1);else{if(0!==Il||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=eo(e))){for(t.flags|=128,Fa(o,!1),null!==(i=l.updateQueue)&&(t.updateQueue=i,t.flags|=4),t.subtreeFlags=0,i=n,n=t.child;null!==n;)e=i,(o=n).flags&=14680066,null===(l=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=l.childLanes,o.lanes=l.lanes,o.child=l.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=l.memoizedProps,o.memoizedState=l.memoizedState,o.updateQueue=l.updateQueue,o.type=l.type,e=l.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return _r(Js,1&Js.current|2),t.child}e=e.sibling}null!==o.tail&&He()>zl&&(t.flags|=128,i=!0,Fa(o,!1),t.lanes=4194304)}else{if(!i)if(null!==(e=eo(l))){if(t.flags|=128,i=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Fa(o,!0),null===o.tail&&"hidden"===o.tailMode&&!l.alternate&&!rs)return Wa(t),null}else 2*He()-o.renderingStartTime>zl&&1073741824!==n&&(t.flags|=128,i=!0,Fa(o,!1),t.lanes=4194304);o.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=o.last)?n.sibling=l:t.child=l,o.last=l)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=He(),t.sibling=null,n=Js.current,_r(Js,i?1&n|2:1&n),t):(Wa(t),null);case 22:case 23:return uh(),i=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==i&&(t.flags|=8192),i&&0!==(1&t.mode)?0!==(1073741824&Rl)&&(Wa(t),6&t.subtreeFlags&&(t.flags|=8192)):Wa(t),null;case 24:case 25:return null}throw Error(s(156,t.tag))}function Ya(e,t){switch(ts(t),t.tag){case 1:return Rr(t.type)&&Nr(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Zs(),Tr(Er),Tr(Cr),no(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Ks(t),null;case 13:if(Tr(Js),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(s(340));fs()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Tr(Js),null;case 4:return Zs(),null;case 10:return Ps(t.type._context),null;case 22:case 23:return uh(),null;default:return null}}Aa=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ra=function(){},Na=function(e,t,n,i){var r=e.memoizedProps;if(r!==i){e=t.stateNode,Ys(Fs.current);var s,o=null;switch(n){case"input":r=G(e,r),i=G(e,i),o=[];break;case"select":r=L({},r,{value:void 0}),i=L({},i,{value:void 0}),o=[];break;case"textarea":r=ie(e,r),i=ie(e,i),o=[];break;default:"function"!==typeof r.onClick&&"function"===typeof i.onClick&&(e.onclick=Ji)}for(c in ve(n,i),n=null,r)if(!i.hasOwnProperty(c)&&r.hasOwnProperty(c)&&null!=r[c])if("style"===c){var l=r[c];for(s in l)l.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else"dangerouslySetInnerHTML"!==c&&"children"!==c&&"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&"autoFocus"!==c&&(a.hasOwnProperty(c)?o||(o=[]):(o=o||[]).push(c,null));for(c in i){var h=i[c];if(l=null!=r?r[c]:void 0,i.hasOwnProperty(c)&&h!==l&&(null!=h||null!=l))if("style"===c)if(l){for(s in l)!l.hasOwnProperty(s)||h&&h.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in h)h.hasOwnProperty(s)&&l[s]!==h[s]&&(n||(n={}),n[s]=h[s])}else n||(o||(o=[]),o.push(c,n)),n=h;else"dangerouslySetInnerHTML"===c?(h=h?h.__html:void 0,l=l?l.__html:void 0,null!=h&&l!==h&&(o=o||[]).push(c,h)):"children"===c?"string"!==typeof h&&"number"!==typeof h||(o=o||[]).push(c,""+h):"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&(a.hasOwnProperty(c)?(null!=h&&"onScroll"===c&&Ui("scroll",e),o||l===h||(o=[])):(o=o||[]).push(c,h))}n&&(o=o||[]).push("style",n);var c=o;(t.updateQueue=c)&&(t.flags|=4)}},Ia=function(e,t,n,i){n!==i&&(t.flags|=4)};var Ga=!1,Za=!1,Ha="function"===typeof WeakSet?WeakSet:Set,Ka=null;function Ja(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(i){xh(e,t,i)}else n.current=null}function el(e,t,n){try{n()}catch(i){xh(e,t,i)}}var tl=!1;function nl(e,t,n){var i=t.updateQueue;if(null!==(i=null!==i?i.lastEffect:null)){var r=i=i.next;do{if((r.tag&e)===e){var s=r.destroy;r.destroy=void 0,void 0!==s&&el(t,n,s)}r=r.next}while(r!==i)}}function il(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var i=n.create;n.destroy=i()}n=n.next}while(n!==t)}}function rl(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function sl(e){var t=e.alternate;null!==t&&(e.alternate=null,sl(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[dr],delete t[fr],delete t[gr],delete t[mr],delete t[Or])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function ol(e){return 5===e.tag||3===e.tag||4===e.tag}function al(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||ol(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ll(e,t,n){var i=e.tag;if(5===i||6===i)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Ji));else if(4!==i&&null!==(e=e.child))for(ll(e,t,n),e=e.sibling;null!==e;)ll(e,t,n),e=e.sibling}function hl(e,t,n){var i=e.tag;if(5===i||6===i)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==i&&null!==(e=e.child))for(hl(e,t,n),e=e.sibling;null!==e;)hl(e,t,n),e=e.sibling}var cl=null,ul=!1;function dl(e,t,n){for(n=n.child;null!==n;)fl(e,t,n),n=n.sibling}function fl(e,t,n){if(st&&"function"===typeof st.onCommitFiberUnmount)try{st.onCommitFiberUnmount(rt,n)}catch(a){}switch(n.tag){case 5:Za||Ja(n,t);case 6:var i=cl,r=ul;cl=null,dl(e,t,n),ul=r,null!==(cl=i)&&(ul?(e=cl,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):cl.removeChild(n.stateNode));break;case 18:null!==cl&&(ul?(e=cl,n=n.stateNode,8===e.nodeType?lr(e.parentNode,n):1===e.nodeType&&lr(e,n),zt(e)):lr(cl,n.stateNode));break;case 4:i=cl,r=ul,cl=n.stateNode.containerInfo,ul=!0,dl(e,t,n),cl=i,ul=r;break;case 0:case 11:case 14:case 15:if(!Za&&(null!==(i=n.updateQueue)&&null!==(i=i.lastEffect))){r=i=i.next;do{var s=r,o=s.destroy;s=s.tag,void 0!==o&&(0!==(2&s)||0!==(4&s))&&el(n,t,o),r=r.next}while(r!==i)}dl(e,t,n);break;case 1:if(!Za&&(Ja(n,t),"function"===typeof(i=n.stateNode).componentWillUnmount))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(a){xh(n,t,a)}dl(e,t,n);break;case 21:dl(e,t,n);break;case 22:1&n.mode?(Za=(i=Za)||null!==n.memoizedState,dl(e,t,n),Za=i):dl(e,t,n);break;default:dl(e,t,n)}}function pl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Ha),t.forEach((function(t){var i=Ch.bind(null,e,t);n.has(t)||(n.add(t),t.then(i,i))}))}}function gl(e,t){var n=t.deletions;if(null!==n)for(var i=0;i<n.length;i++){var r=n[i];try{var o=e,a=t,l=a;e:for(;null!==l;){switch(l.tag){case 5:cl=l.stateNode,ul=!1;break e;case 3:case 4:cl=l.stateNode.containerInfo,ul=!0;break e}l=l.return}if(null===cl)throw Error(s(160));fl(o,a,r),cl=null,ul=!1;var h=r.alternate;null!==h&&(h.return=null),r.return=null}catch(c){xh(r,t,c)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)ml(t,e),t=t.sibling}function ml(e,t){var n=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(gl(t,e),Ol(e),4&i){try{nl(3,e,e.return),il(3,e)}catch(m){xh(e,e.return,m)}try{nl(5,e,e.return)}catch(m){xh(e,e.return,m)}}break;case 1:gl(t,e),Ol(e),512&i&&null!==n&&Ja(n,n.return);break;case 5:if(gl(t,e),Ol(e),512&i&&null!==n&&Ja(n,n.return),32&e.flags){var r=e.stateNode;try{de(r,"")}catch(m){xh(e,e.return,m)}}if(4&i&&null!=(r=e.stateNode)){var o=e.memoizedProps,a=null!==n?n.memoizedProps:o,l=e.type,h=e.updateQueue;if(e.updateQueue=null,null!==h)try{"input"===l&&"radio"===o.type&&null!=o.name&&H(r,o),ye(l,a);var c=ye(l,o);for(a=0;a<h.length;a+=2){var u=h[a],d=h[a+1];"style"===u?me(r,d):"dangerouslySetInnerHTML"===u?ue(r,d):"children"===u?de(r,d):y(r,u,d,c)}switch(l){case"input":K(r,o);break;case"textarea":se(r,o);break;case"select":var f=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!o.multiple;var p=o.value;null!=p?ne(r,!!o.multiple,p,!1):f!==!!o.multiple&&(null!=o.defaultValue?ne(r,!!o.multiple,o.defaultValue,!0):ne(r,!!o.multiple,o.multiple?[]:"",!1))}r[fr]=o}catch(m){xh(e,e.return,m)}}break;case 6:if(gl(t,e),Ol(e),4&i){if(null===e.stateNode)throw Error(s(162));r=e.stateNode,o=e.memoizedProps;try{r.nodeValue=o}catch(m){xh(e,e.return,m)}}break;case 3:if(gl(t,e),Ol(e),4&i&&null!==n&&n.memoizedState.isDehydrated)try{zt(t.containerInfo)}catch(m){xh(e,e.return,m)}break;case 4:default:gl(t,e),Ol(e);break;case 13:gl(t,e),Ol(e),8192&(r=e.child).flags&&(o=null!==r.memoizedState,r.stateNode.isHidden=o,!o||null!==r.alternate&&null!==r.alternate.memoizedState||(Vl=He())),4&i&&pl(e);break;case 22:if(u=null!==n&&null!==n.memoizedState,1&e.mode?(Za=(c=Za)||u,gl(t,e),Za=c):gl(t,e),Ol(e),8192&i){if(c=null!==e.memoizedState,(e.stateNode.isHidden=c)&&!u&&0!==(1&e.mode))for(Ka=e,u=e.child;null!==u;){for(d=Ka=u;null!==Ka;){switch(p=(f=Ka).child,f.tag){case 0:case 11:case 14:case 15:nl(4,f,f.return);break;case 1:Ja(f,f.return);var g=f.stateNode;if("function"===typeof g.componentWillUnmount){i=f,n=f.return;try{t=i,g.props=t.memoizedProps,g.state=t.memoizedState,g.componentWillUnmount()}catch(m){xh(i,n,m)}}break;case 5:Ja(f,f.return);break;case 22:if(null!==f.memoizedState){wl(d);continue}}null!==p?(p.return=f,Ka=p):wl(d)}u=u.sibling}e:for(u=null,d=e;;){if(5===d.tag){if(null===u){u=d;try{r=d.stateNode,c?"function"===typeof(o=r.style).setProperty?o.setProperty("display","none","important"):o.display="none":(l=d.stateNode,a=void 0!==(h=d.memoizedProps.style)&&null!==h&&h.hasOwnProperty("display")?h.display:null,l.style.display=ge("display",a))}catch(m){xh(e,e.return,m)}}}else if(6===d.tag){if(null===u)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(m){xh(e,e.return,m)}}else if((22!==d.tag&&23!==d.tag||null===d.memoizedState||d===e)&&null!==d.child){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;null===d.sibling;){if(null===d.return||d.return===e)break e;u===d&&(u=null),d=d.return}u===d&&(u=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:gl(t,e),Ol(e),4&i&&pl(e);case 21:}}function Ol(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(ol(n)){var i=n;break e}n=n.return}throw Error(s(160))}switch(i.tag){case 5:var r=i.stateNode;32&i.flags&&(de(r,""),i.flags&=-33),hl(e,al(e),r);break;case 3:case 4:var o=i.stateNode.containerInfo;ll(e,al(e),o);break;default:throw Error(s(161))}}catch(a){xh(e,e.return,a)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function vl(e,t,n){Ka=e,yl(e,t,n)}function yl(e,t,n){for(var i=0!==(1&e.mode);null!==Ka;){var r=Ka,s=r.child;if(22===r.tag&&i){var o=null!==r.memoizedState||Ga;if(!o){var a=r.alternate,l=null!==a&&null!==a.memoizedState||Za;a=Ga;var h=Za;if(Ga=o,(Za=l)&&!h)for(Ka=r;null!==Ka;)l=(o=Ka).child,22===o.tag&&null!==o.memoizedState?kl(r):null!==l?(l.return=o,Ka=l):kl(r);for(;null!==s;)Ka=s,yl(s,t,n),s=s.sibling;Ka=r,Ga=a,Za=h}bl(e)}else 0!==(8772&r.subtreeFlags)&&null!==s?(s.return=r,Ka=s):bl(e)}}function bl(e){for(;null!==Ka;){var t=Ka;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Za||il(5,t);break;case 1:var i=t.stateNode;if(4&t.flags&&!Za)if(null===n)i.componentDidMount();else{var r=t.elementType===t.type?n.memoizedProps:na(t.type,n.memoizedProps);i.componentDidUpdate(r,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&js(t,o,i);break;case 3:var a=t.updateQueue;if(null!==a){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}js(t,a,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var h=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":h.autoFocus&&n.focus();break;case"img":h.src&&(n.src=h.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var c=t.alternate;if(null!==c){var u=c.memoizedState;if(null!==u){var d=u.dehydrated;null!==d&&zt(d)}}}break;default:throw Error(s(163))}Za||512&t.flags&&rl(t)}catch(f){xh(t,t.return,f)}}if(t===e){Ka=null;break}if(null!==(n=t.sibling)){n.return=t.return,Ka=n;break}Ka=t.return}}function wl(e){for(;null!==Ka;){var t=Ka;if(t===e){Ka=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Ka=n;break}Ka=t.return}}function kl(e){for(;null!==Ka;){var t=Ka;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{il(4,t)}catch(l){xh(t,n,l)}break;case 1:var i=t.stateNode;if("function"===typeof i.componentDidMount){var r=t.return;try{i.componentDidMount()}catch(l){xh(t,r,l)}}var s=t.return;try{rl(t)}catch(l){xh(t,s,l)}break;case 5:var o=t.return;try{rl(t)}catch(l){xh(t,o,l)}}}catch(l){xh(t,t.return,l)}if(t===e){Ka=null;break}var a=t.sibling;if(null!==a){a.return=t.return,Ka=a;break}Ka=t.return}}var Sl,xl=Math.ceil,Tl=b.ReactCurrentDispatcher,_l=b.ReactCurrentOwner,Pl=b.ReactCurrentBatchConfig,Cl=0,El=null,Ql=null,Al=0,Rl=0,Nl=xr(0),Il=0,Dl=null,Ml=0,Ll=0,$l=0,Ul=null,ql=null,Vl=0,zl=1/0,jl=null,Bl=!1,Fl=null,Wl=null,Xl=!1,Yl=null,Gl=0,Zl=0,Hl=null,Kl=-1,Jl=0;function eh(){return 0!==(6&Cl)?He():-1!==Kl?Kl:Kl=He()}function th(e){return 0===(1&e.mode)?1:0!==(2&Cl)&&0!==Al?Al&-Al:null!==gs.transition?(0===Jl&&(Jl=gt()),Jl):0!==(e=yt)?e:e=void 0===(e=window.event)?16:Zt(e.type)}function nh(e,t,n,i){if(50<Zl)throw Zl=0,Hl=null,Error(s(185));Ot(e,n,i),0!==(2&Cl)&&e===El||(e===El&&(0===(2&Cl)&&(Ll|=n),4===Il&&ah(e,Al)),ih(e,i),1===n&&0===Cl&&0===(1&t.mode)&&(zl=He()+500,Ur&&zr()))}function ih(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,i=e.pingedLanes,r=e.expirationTimes,s=e.pendingLanes;0<s;){var o=31-ot(s),a=1<<o,l=r[o];-1===l?0!==(a&n)&&0===(a&i)||(r[o]=ft(a,t)):l<=t&&(e.expiredLanes|=a),s&=~a}}(e,t);var i=dt(e,e===El?Al:0);if(0===i)null!==n&&Ye(n),e.callbackNode=null,e.callbackPriority=0;else if(t=i&-i,e.callbackPriority!==t){if(null!=n&&Ye(n),1===t)0===e.tag?function(e){Ur=!0,Vr(e)}(lh.bind(null,e)):Vr(lh.bind(null,e)),or((function(){0===(6&Cl)&&zr()})),n=null;else{switch(bt(i)){case 1:n=Je;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=it}n=Eh(n,rh.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function rh(e,t){if(Kl=-1,Jl=0,0!==(6&Cl))throw Error(s(327));var n=e.callbackNode;if(kh()&&e.callbackNode!==n)return null;var i=dt(e,e===El?Al:0);if(0===i)return null;if(0!==(30&i)||0!==(i&e.expiredLanes)||t)t=mh(e,i);else{t=i;var r=Cl;Cl|=2;var o=ph();for(El===e&&Al===t||(jl=null,zl=He()+500,dh(e,t));;)try{vh();break}catch(l){fh(e,l)}_s(),Tl.current=o,Cl=r,null!==Ql?t=0:(El=null,Al=0,t=Il)}if(0!==t){if(2===t&&(0!==(r=pt(e))&&(i=r,t=sh(e,r))),1===t)throw n=Dl,dh(e,0),ah(e,i),ih(e,He()),n;if(6===t)ah(e,i);else{if(r=e.current.alternate,0===(30&i)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var i=0;i<n.length;i++){var r=n[i],s=r.getSnapshot;r=r.value;try{if(!ai(s(),r))return!1}catch(a){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(r)&&(2===(t=mh(e,i))&&(0!==(o=pt(e))&&(i=o,t=sh(e,o))),1===t))throw n=Dl,dh(e,0),ah(e,i),ih(e,He()),n;switch(e.finishedWork=r,e.finishedLanes=i,t){case 0:case 1:throw Error(s(345));case 2:case 5:wh(e,ql,jl);break;case 3:if(ah(e,i),(130023424&i)===i&&10<(t=Vl+500-He())){if(0!==dt(e,0))break;if(((r=e.suspendedLanes)&i)!==i){eh(),e.pingedLanes|=e.suspendedLanes&r;break}e.timeoutHandle=ir(wh.bind(null,e,ql,jl),t);break}wh(e,ql,jl);break;case 4:if(ah(e,i),(4194240&i)===i)break;for(t=e.eventTimes,r=-1;0<i;){var a=31-ot(i);o=1<<a,(a=t[a])>r&&(r=a),i&=~o}if(i=r,10<(i=(120>(i=He()-i)?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*xl(i/1960))-i)){e.timeoutHandle=ir(wh.bind(null,e,ql,jl),i);break}wh(e,ql,jl);break;default:throw Error(s(329))}}}return ih(e,He()),e.callbackNode===n?rh.bind(null,e):null}function sh(e,t){var n=Ul;return e.current.memoizedState.isDehydrated&&(dh(e,t).flags|=256),2!==(e=mh(e,t))&&(t=ql,ql=n,null!==t&&oh(t)),e}function oh(e){null===ql?ql=e:ql.push.apply(ql,e)}function ah(e,t){for(t&=~$l,t&=~Ll,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),i=1<<n;e[n]=-1,t&=~i}}function lh(e){if(0!==(6&Cl))throw Error(s(327));kh();var t=dt(e,0);if(0===(1&t))return ih(e,He()),null;var n=mh(e,t);if(0!==e.tag&&2===n){var i=pt(e);0!==i&&(t=i,n=sh(e,i))}if(1===n)throw n=Dl,dh(e,0),ah(e,t),ih(e,He()),n;if(6===n)throw Error(s(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,wh(e,ql,jl),ih(e,He()),null}function hh(e,t){var n=Cl;Cl|=1;try{return e(t)}finally{0===(Cl=n)&&(zl=He()+500,Ur&&zr())}}function ch(e){null!==Yl&&0===Yl.tag&&0===(6&Cl)&&kh();var t=Cl;Cl|=1;var n=Pl.transition,i=yt;try{if(Pl.transition=null,yt=1,e)return e()}finally{yt=i,Pl.transition=n,0===(6&(Cl=t))&&zr()}}function uh(){Rl=Nl.current,Tr(Nl)}function dh(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,rr(n)),null!==Ql)for(n=Ql.return;null!==n;){var i=n;switch(ts(i),i.tag){case 1:null!==(i=i.type.childContextTypes)&&void 0!==i&&Nr();break;case 3:Zs(),Tr(Er),Tr(Cr),no();break;case 5:Ks(i);break;case 4:Zs();break;case 13:case 19:Tr(Js);break;case 10:Ps(i.type._context);break;case 22:case 23:uh()}n=n.return}if(El=e,Ql=e=Nh(e.current,null),Al=Rl=t,Il=0,Dl=null,$l=Ll=Ml=0,ql=Ul=null,null!==As){for(t=0;t<As.length;t++)if(null!==(i=(n=As[t]).interleaved)){n.interleaved=null;var r=i.next,s=n.pending;if(null!==s){var o=s.next;s.next=r,i.next=o}n.pending=i}As=null}return e}function fh(e,t){for(;;){var n=Ql;try{if(_s(),io.current=Ko,ho){for(var i=oo.memoizedState;null!==i;){var r=i.queue;null!==r&&(r.pending=null),i=i.next}ho=!1}if(so=0,lo=ao=oo=null,co=!1,uo=0,_l.current=null,null===n||null===n.return){Il=1,Dl=t,Ql=null;break}e:{var o=e,a=n.return,l=n,h=t;if(t=Al,l.flags|=32768,null!==h&&"object"===typeof h&&"function"===typeof h.then){var c=h,u=l,d=u.tag;if(0===(1&u.mode)&&(0===d||11===d||15===d)){var f=u.alternate;f?(u.updateQueue=f.updateQueue,u.memoizedState=f.memoizedState,u.lanes=f.lanes):(u.updateQueue=null,u.memoizedState=null)}var p=ma(a);if(null!==p){p.flags&=-257,Oa(p,a,l,0,t),1&p.mode&&ga(o,c,t),h=c;var g=(t=p).updateQueue;if(null===g){var m=new Set;m.add(h),t.updateQueue=m}else g.add(h);break e}if(0===(1&t)){ga(o,c,t),gh();break e}h=Error(s(426))}else if(rs&&1&l.mode){var O=ma(a);if(null!==O){0===(65536&O.flags)&&(O.flags|=256),Oa(O,a,l,0,t),ps(ha(h,l));break e}}o=h=ha(h,l),4!==Il&&(Il=2),null===Ul?Ul=[o]:Ul.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,Vs(o,fa(0,h,t));break e;case 1:l=h;var v=o.type,y=o.stateNode;if(0===(128&o.flags)&&("function"===typeof v.getDerivedStateFromError||null!==y&&"function"===typeof y.componentDidCatch&&(null===Wl||!Wl.has(y)))){o.flags|=65536,t&=-t,o.lanes|=t,Vs(o,pa(o,l,t));break e}}o=o.return}while(null!==o)}bh(n)}catch(b){t=b,Ql===n&&null!==n&&(Ql=n=n.return);continue}break}}function ph(){var e=Tl.current;return Tl.current=Ko,null===e?Ko:e}function gh(){0!==Il&&3!==Il&&2!==Il||(Il=4),null===El||0===(268435455&Ml)&&0===(268435455&Ll)||ah(El,Al)}function mh(e,t){var n=Cl;Cl|=2;var i=ph();for(El===e&&Al===t||(jl=null,dh(e,t));;)try{Oh();break}catch(r){fh(e,r)}if(_s(),Cl=n,Tl.current=i,null!==Ql)throw Error(s(261));return El=null,Al=0,Il}function Oh(){for(;null!==Ql;)yh(Ql)}function vh(){for(;null!==Ql&&!Ge();)yh(Ql)}function yh(e){var t=Sl(e.alternate,e,Rl);e.memoizedProps=e.pendingProps,null===t?bh(e):Ql=t,_l.current=null}function bh(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Xa(n,t,Rl)))return void(Ql=n)}else{if(null!==(n=Ya(n,t)))return n.flags&=32767,void(Ql=n);if(null===e)return Il=6,void(Ql=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Ql=t);Ql=t=e}while(null!==t);0===Il&&(Il=5)}function wh(e,t,n){var i=yt,r=Pl.transition;try{Pl.transition=null,yt=1,function(e,t,n,i){do{kh()}while(null!==Yl);if(0!==(6&Cl))throw Error(s(327));n=e.finishedWork;var r=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(s(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var i=e.eventTimes;for(e=e.expirationTimes;0<n;){var r=31-ot(n),s=1<<r;t[r]=0,i[r]=-1,e[r]=-1,n&=~s}}(e,o),e===El&&(Ql=El=null,Al=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Xl||(Xl=!0,Eh(tt,(function(){return kh(),null}))),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=Pl.transition,Pl.transition=null;var a=yt;yt=1;var l=Cl;Cl|=4,_l.current=null,function(e,t){if(er=Bt,fi(e=di())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var i=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(i&&0!==i.rangeCount){n=i.anchorNode;var r=i.anchorOffset,o=i.focusNode;i=i.focusOffset;try{n.nodeType,o.nodeType}catch(w){n=null;break e}var a=0,l=-1,h=-1,c=0,u=0,d=e,f=null;t:for(;;){for(var p;d!==n||0!==r&&3!==d.nodeType||(l=a+r),d!==o||0!==i&&3!==d.nodeType||(h=a+i),3===d.nodeType&&(a+=d.nodeValue.length),null!==(p=d.firstChild);)f=d,d=p;for(;;){if(d===e)break t;if(f===n&&++c===r&&(l=a),f===o&&++u===i&&(h=a),null!==(p=d.nextSibling))break;f=(d=f).parentNode}d=p}n=-1===l||-1===h?null:{start:l,end:h}}else n=null}n=n||{start:0,end:0}}else n=null;for(tr={focusedElem:e,selectionRange:n},Bt=!1,Ka=t;null!==Ka;)if(e=(t=Ka).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Ka=e;else for(;null!==Ka;){t=Ka;try{var g=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==g){var m=g.memoizedProps,O=g.memoizedState,v=t.stateNode,y=v.getSnapshotBeforeUpdate(t.elementType===t.type?m:na(t.type,m),O);v.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var b=t.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(s(163))}}catch(w){xh(t,t.return,w)}if(null!==(e=t.sibling)){e.return=t.return,Ka=e;break}Ka=t.return}g=tl,tl=!1}(e,n),ml(n,e),pi(tr),Bt=!!er,tr=er=null,e.current=n,vl(n,e,r),Ze(),Cl=l,yt=a,Pl.transition=o}else e.current=n;if(Xl&&(Xl=!1,Yl=e,Gl=r),o=e.pendingLanes,0===o&&(Wl=null),function(e){if(st&&"function"===typeof st.onCommitFiberRoot)try{st.onCommitFiberRoot(rt,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),ih(e,He()),null!==t)for(i=e.onRecoverableError,n=0;n<t.length;n++)r=t[n],i(r.value,{componentStack:r.stack,digest:r.digest});if(Bl)throw Bl=!1,e=Fl,Fl=null,e;0!==(1&Gl)&&0!==e.tag&&kh(),o=e.pendingLanes,0!==(1&o)?e===Hl?Zl++:(Zl=0,Hl=e):Zl=0,zr()}(e,t,n,i)}finally{Pl.transition=r,yt=i}return null}function kh(){if(null!==Yl){var e=bt(Gl),t=Pl.transition,n=yt;try{if(Pl.transition=null,yt=16>e?16:e,null===Yl)var i=!1;else{if(e=Yl,Yl=null,Gl=0,0!==(6&Cl))throw Error(s(331));var r=Cl;for(Cl|=4,Ka=e.current;null!==Ka;){var o=Ka,a=o.child;if(0!==(16&Ka.flags)){var l=o.deletions;if(null!==l){for(var h=0;h<l.length;h++){var c=l[h];for(Ka=c;null!==Ka;){var u=Ka;switch(u.tag){case 0:case 11:case 15:nl(8,u,o)}var d=u.child;if(null!==d)d.return=u,Ka=d;else for(;null!==Ka;){var f=(u=Ka).sibling,p=u.return;if(sl(u),u===c){Ka=null;break}if(null!==f){f.return=p,Ka=f;break}Ka=p}}}var g=o.alternate;if(null!==g){var m=g.child;if(null!==m){g.child=null;do{var O=m.sibling;m.sibling=null,m=O}while(null!==m)}}Ka=o}}if(0!==(2064&o.subtreeFlags)&&null!==a)a.return=o,Ka=a;else e:for(;null!==Ka;){if(0!==(2048&(o=Ka).flags))switch(o.tag){case 0:case 11:case 15:nl(9,o,o.return)}var v=o.sibling;if(null!==v){v.return=o.return,Ka=v;break e}Ka=o.return}}var y=e.current;for(Ka=y;null!==Ka;){var b=(a=Ka).child;if(0!==(2064&a.subtreeFlags)&&null!==b)b.return=a,Ka=b;else e:for(a=y;null!==Ka;){if(0!==(2048&(l=Ka).flags))try{switch(l.tag){case 0:case 11:case 15:il(9,l)}}catch(k){xh(l,l.return,k)}if(l===a){Ka=null;break e}var w=l.sibling;if(null!==w){w.return=l.return,Ka=w;break e}Ka=l.return}}if(Cl=r,zr(),st&&"function"===typeof st.onPostCommitFiberRoot)try{st.onPostCommitFiberRoot(rt,e)}catch(k){}i=!0}return i}finally{yt=n,Pl.transition=t}}return!1}function Sh(e,t,n){e=Us(e,t=fa(0,t=ha(n,t),1),1),t=eh(),null!==e&&(Ot(e,1,t),ih(e,t))}function xh(e,t,n){if(3===e.tag)Sh(e,e,n);else for(;null!==t;){if(3===t.tag){Sh(t,e,n);break}if(1===t.tag){var i=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof i.componentDidCatch&&(null===Wl||!Wl.has(i))){t=Us(t,e=pa(t,e=ha(n,e),1),1),e=eh(),null!==t&&(Ot(t,1,e),ih(t,e));break}}t=t.return}}function Th(e,t,n){var i=e.pingCache;null!==i&&i.delete(t),t=eh(),e.pingedLanes|=e.suspendedLanes&n,El===e&&(Al&n)===n&&(4===Il||3===Il&&(130023424&Al)===Al&&500>He()-Vl?dh(e,0):$l|=n),ih(e,t)}function _h(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ct,0===(130023424&(ct<<=1))&&(ct=4194304)));var n=eh();null!==(e=Is(e,t))&&(Ot(e,t,n),ih(e,n))}function Ph(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),_h(e,n)}function Ch(e,t){var n=0;switch(e.tag){case 13:var i=e.stateNode,r=e.memoizedState;null!==r&&(n=r.retryLane);break;case 19:i=e.stateNode;break;default:throw Error(s(314))}null!==i&&i.delete(t),_h(e,n)}function Eh(e,t){return Xe(e,t)}function Qh(e,t,n,i){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ah(e,t,n,i){return new Qh(e,t,n,i)}function Rh(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Nh(e,t){var n=e.alternate;return null===n?((n=Ah(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Ih(e,t,n,i,r,o){var a=2;if(i=e,"function"===typeof e)Rh(e)&&(a=1);else if("string"===typeof e)a=5;else e:switch(e){case S:return Dh(n.children,r,o,t);case x:a=8,r|=8;break;case T:return(e=Ah(12,n,t,2|r)).elementType=T,e.lanes=o,e;case E:return(e=Ah(13,n,t,r)).elementType=E,e.lanes=o,e;case Q:return(e=Ah(19,n,t,r)).elementType=Q,e.lanes=o,e;case N:return Mh(n,r,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case _:a=10;break e;case P:a=9;break e;case C:a=11;break e;case A:a=14;break e;case R:a=16,i=null;break e}throw Error(s(130,null==e?e:typeof e,""))}return(t=Ah(a,n,t,r)).elementType=e,t.type=i,t.lanes=o,t}function Dh(e,t,n,i){return(e=Ah(7,e,i,t)).lanes=n,e}function Mh(e,t,n,i){return(e=Ah(22,e,i,t)).elementType=N,e.lanes=n,e.stateNode={isHidden:!1},e}function Lh(e,t,n){return(e=Ah(6,e,null,t)).lanes=n,e}function $h(e,t,n){return(t=Ah(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Uh(e,t,n,i,r){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mt(0),this.expirationTimes=mt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mt(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function qh(e,t,n,i,r,s,o,a,l){return e=new Uh(e,t,n,a,l),1===t?(t=1,!0===s&&(t|=8)):t=0,s=Ah(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ms(s),e}function Vh(e){if(!e)return Pr;e:{if(ze(e=e._reactInternals)!==e||1!==e.tag)throw Error(s(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Rr(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(s(171))}if(1===e.tag){var n=e.type;if(Rr(n))return Dr(e,n,t)}return t}function zh(e,t,n,i,r,s,o,a,l){return(e=qh(n,i,!0,e,0,s,0,a,l)).context=Vh(null),n=e.current,(s=$s(i=eh(),r=th(n))).callback=void 0!==t&&null!==t?t:null,Us(n,s,r),e.current.lanes=r,Ot(e,r,i),ih(e,i),e}function jh(e,t,n,i){var r=t.current,s=eh(),o=th(r);return n=Vh(n),null===t.context?t.context=n:t.pendingContext=n,(t=$s(s,o)).payload={element:e},null!==(i=void 0===i?null:i)&&(t.callback=i),null!==(e=Us(r,t,o))&&(nh(e,r,o,s),qs(e,r,o)),o}function Bh(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Fh(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Wh(e,t){Fh(e,t),(e=e.alternate)&&Fh(e,t)}Sl=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Er.current)ya=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return ya=!1,function(e,t,n){switch(t.tag){case 3:Ea(t),fs();break;case 5:Hs(t);break;case 1:Rr(t.type)&&Mr(t);break;case 4:Gs(t,t.stateNode.containerInfo);break;case 10:var i=t.type._context,r=t.memoizedProps.value;_r(ks,i._currentValue),i._currentValue=r;break;case 13:if(null!==(i=t.memoizedState))return null!==i.dehydrated?(_r(Js,1&Js.current),t.flags|=128,null):0!==(n&t.child.childLanes)?La(e,t,n):(_r(Js,1&Js.current),null!==(e=Ba(e,t,n))?e.sibling:null);_r(Js,1&Js.current);break;case 19:if(i=0!==(n&t.childLanes),0!==(128&e.flags)){if(i)return za(e,t,n);t.flags|=128}if(null!==(r=t.memoizedState)&&(r.rendering=null,r.tail=null,r.lastEffect=null),_r(Js,Js.current),i)break;return null;case 22:case 23:return t.lanes=0,xa(e,t,n)}return Ba(e,t,n)}(e,t,n);ya=0!==(131072&e.flags)}else ya=!1,rs&&0!==(1048576&t.flags)&&Jr(t,Wr,t.index);switch(t.lanes=0,t.tag){case 2:var i=t.type;ja(e,t),e=t.pendingProps;var r=Ar(t,Cr.current);Es(t,n),r=mo(null,t,i,e,r,n);var o=Oo();return t.flags|=1,"object"===typeof r&&null!==r&&"function"===typeof r.render&&void 0===r.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Rr(i)?(o=!0,Mr(t)):o=!1,t.memoizedState=null!==r.state&&void 0!==r.state?r.state:null,Ms(t),r.updater=ra,t.stateNode=r,r._reactInternals=t,la(t,i,e,n),t=Ca(null,t,i,!0,o,n)):(t.tag=0,rs&&o&&es(t),ba(null,t,r,n),t=t.child),t;case 16:i=t.elementType;e:{switch(ja(e,t),e=t.pendingProps,i=(r=i._init)(i._payload),t.type=i,r=t.tag=function(e){if("function"===typeof e)return Rh(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===C)return 11;if(e===A)return 14}return 2}(i),e=na(i,e),r){case 0:t=_a(null,t,i,e,n);break e;case 1:t=Pa(null,t,i,e,n);break e;case 11:t=wa(null,t,i,e,n);break e;case 14:t=ka(null,t,i,na(i.type,e),n);break e}throw Error(s(306,i,""))}return t;case 0:return i=t.type,r=t.pendingProps,_a(e,t,i,r=t.elementType===i?r:na(i,r),n);case 1:return i=t.type,r=t.pendingProps,Pa(e,t,i,r=t.elementType===i?r:na(i,r),n);case 3:e:{if(Ea(t),null===e)throw Error(s(387));i=t.pendingProps,r=(o=t.memoizedState).element,Ls(e,t),zs(t,i,null,n);var a=t.memoizedState;if(i=a.element,o.isDehydrated){if(o={element:i,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Qa(e,t,i,n,r=ha(Error(s(423)),t));break e}if(i!==r){t=Qa(e,t,i,n,r=ha(Error(s(424)),t));break e}for(is=hr(t.stateNode.containerInfo.firstChild),ns=t,rs=!0,ss=null,n=ws(t,null,i,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(fs(),i===r){t=Ba(e,t,n);break e}ba(e,t,i,n)}t=t.child}return t;case 5:return Hs(t),null===e&&hs(t),i=t.type,r=t.pendingProps,o=null!==e?e.memoizedProps:null,a=r.children,nr(i,r)?a=null:null!==o&&nr(i,o)&&(t.flags|=32),Ta(e,t),ba(e,t,a,n),t.child;case 6:return null===e&&hs(t),null;case 13:return La(e,t,n);case 4:return Gs(t,t.stateNode.containerInfo),i=t.pendingProps,null===e?t.child=bs(t,null,i,n):ba(e,t,i,n),t.child;case 11:return i=t.type,r=t.pendingProps,wa(e,t,i,r=t.elementType===i?r:na(i,r),n);case 7:return ba(e,t,t.pendingProps,n),t.child;case 8:case 12:return ba(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(i=t.type._context,r=t.pendingProps,o=t.memoizedProps,a=r.value,_r(ks,i._currentValue),i._currentValue=a,null!==o)if(ai(o.value,a)){if(o.children===r.children&&!Er.current){t=Ba(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var l=o.dependencies;if(null!==l){a=o.child;for(var h=l.firstContext;null!==h;){if(h.context===i){if(1===o.tag){(h=$s(-1,n&-n)).tag=2;var c=o.updateQueue;if(null!==c){var u=(c=c.shared).pending;null===u?h.next=h:(h.next=u.next,u.next=h),c.pending=h}}o.lanes|=n,null!==(h=o.alternate)&&(h.lanes|=n),Cs(o.return,n,t),l.lanes|=n;break}h=h.next}}else if(10===o.tag)a=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(a=o.return))throw Error(s(341));a.lanes|=n,null!==(l=a.alternate)&&(l.lanes|=n),Cs(a,n,t),a=o.sibling}else a=o.child;if(null!==a)a.return=o;else for(a=o;null!==a;){if(a===t){a=null;break}if(null!==(o=a.sibling)){o.return=a.return,a=o;break}a=a.return}o=a}ba(e,t,r.children,n),t=t.child}return t;case 9:return r=t.type,i=t.pendingProps.children,Es(t,n),i=i(r=Qs(r)),t.flags|=1,ba(e,t,i,n),t.child;case 14:return r=na(i=t.type,t.pendingProps),ka(e,t,i,r=na(i.type,r),n);case 15:return Sa(e,t,t.type,t.pendingProps,n);case 17:return i=t.type,r=t.pendingProps,r=t.elementType===i?r:na(i,r),ja(e,t),t.tag=1,Rr(i)?(e=!0,Mr(t)):e=!1,Es(t,n),oa(t,i,r),la(t,i,r,n),Ca(null,t,i,!0,e,n);case 19:return za(e,t,n);case 22:return xa(e,t,n)}throw Error(s(156,t.tag))};var Xh="function"===typeof reportError?reportError:function(e){console.error(e)};function Yh(e){this._internalRoot=e}function Gh(e){this._internalRoot=e}function Zh(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Hh(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Kh(){}function Jh(e,t,n,i,r){var s=n._reactRootContainer;if(s){var o=s;if("function"===typeof r){var a=r;r=function(){var e=Bh(o);a.call(e)}}jh(t,o,e,r)}else o=function(e,t,n,i,r){if(r){if("function"===typeof i){var s=i;i=function(){var e=Bh(o);s.call(e)}}var o=zh(t,i,e,0,null,!1,0,"",Kh);return e._reactRootContainer=o,e[pr]=o.current,zi(8===e.nodeType?e.parentNode:e),ch(),o}for(;r=e.lastChild;)e.removeChild(r);if("function"===typeof i){var a=i;i=function(){var e=Bh(l);a.call(e)}}var l=qh(e,0,!1,null,0,!1,0,"",Kh);return e._reactRootContainer=l,e[pr]=l.current,zi(8===e.nodeType?e.parentNode:e),ch((function(){jh(t,l,n,i)})),l}(n,t,e,r,i);return Bh(o)}Gh.prototype.render=Yh.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(s(409));jh(e,t,null,null)},Gh.prototype.unmount=Yh.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;ch((function(){jh(null,e,null,null)})),t[pr]=null}},Gh.prototype.unstable_scheduleHydration=function(e){if(e){var t=xt();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Nt.length&&0!==t&&t<Nt[n].priority;n++);Nt.splice(n,0,e),0===n&&Lt(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ut(t.pendingLanes);0!==n&&(vt(t,1|n),ih(t,He()),0===(6&Cl)&&(zl=He()+500,zr()))}break;case 13:ch((function(){var t=Is(e,1);if(null!==t){var n=eh();nh(t,e,1,n)}})),Wh(e,1)}},kt=function(e){if(13===e.tag){var t=Is(e,134217728);if(null!==t)nh(t,e,134217728,eh());Wh(e,134217728)}},St=function(e){if(13===e.tag){var t=th(e),n=Is(e,t);if(null!==n)nh(n,e,t,eh());Wh(e,t)}},xt=function(){return yt},Tt=function(e,t){var n=yt;try{return yt=e,t()}finally{yt=n}},ke=function(e,t,n){switch(t){case"input":if(K(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var i=n[t];if(i!==e&&i.form===e.form){var r=wr(i);if(!r)throw Error(s(90));X(i),K(i,r)}}}break;case"textarea":se(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ce=hh,Ee=ch;var ec={usingClientEntryPoint:!1,Events:[yr,br,wr,_e,Pe,hh]},tc={findFiberByHostInstance:vr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},nc={bundleType:tc.bundleType,version:tc.version,rendererPackageName:tc.rendererPackageName,rendererConfig:tc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Fe(e))?null:e.stateNode},findFiberByHostInstance:tc.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ic=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ic.isDisabled&&ic.supportsFiber)try{rt=ic.inject(nc),st=ic}catch(ce){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ec,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Zh(t))throw Error(s(200));return function(e,t,n){var i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:k,key:null==i?null:""+i,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Zh(e))throw Error(s(299));var n=!1,i="",r=Xh;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(i=t.identifierPrefix),void 0!==t.onRecoverableError&&(r=t.onRecoverableError)),t=qh(e,1,!1,null,0,n,0,i,r),e[pr]=t.current,zi(8===e.nodeType?e.parentNode:e),new Yh(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(s(188));throw e=Object.keys(e).join(","),Error(s(268,e))}return e=null===(e=Fe(t))?null:e.stateNode},t.flushSync=function(e){return ch(e)},t.hydrate=function(e,t,n){if(!Hh(t))throw Error(s(200));return Jh(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Zh(e))throw Error(s(405));var i=null!=n&&n.hydratedSources||null,r=!1,o="",a=Xh;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(r=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(a=n.onRecoverableError)),t=zh(t,null,e,1,null!=n?n:null,r,0,o,a),e[pr]=t.current,zi(e),i)for(e=0;e<i.length;e++)r=(r=(n=i[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,r]:t.mutableSourceEagerHydrationData.push(n,r);return new Gh(t)},t.render=function(e,t,n){if(!Hh(t))throw Error(s(200));return Jh(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Hh(e))throw Error(s(40));return!!e._reactRootContainer&&(ch((function(){Jh(null,null,e,!1,(function(){e._reactRootContainer=null,e[pr]=null}))})),!0)},t.unstable_batchedUpdates=hh,t.unstable_renderSubtreeIntoContainer=function(e,t,n,i){if(!Hh(n))throw Error(s(200));if(null==e||void 0===e._reactInternals)throw Error(s(38));return Jh(e,t,n,!1,i)},t.version="18.3.1-next-f1338f8080-20240426"},775:(e,t,n)=>{"use strict";var i=n(998);t.createRoot=i.createRoot,t.hydrateRoot=i.hydrateRoot},998:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(914)},9:(e,t,n)=>{"use strict";var i=n(483),r=Symbol.for("react.element"),s=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,a=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function h(e,t,n){var i,s={},h=null,c=null;for(i in void 0!==n&&(h=""+n),void 0!==t.key&&(h=""+t.key),void 0!==t.ref&&(c=t.ref),t)o.call(t,i)&&!l.hasOwnProperty(i)&&(s[i]=t[i]);if(e&&e.defaultProps)for(i in t=e.defaultProps)void 0===s[i]&&(s[i]=t[i]);return{$$typeof:r,type:e,key:h,ref:c,props:s,_owner:a.current}}t.Fragment=s,t.jsx=h,t.jsxs=h},146:(e,t)=>{"use strict";var n=Symbol.for("react.element"),i=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),l=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),f=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g=Object.assign,m={};function O(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}function v(){}function y(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}O.prototype.isReactComponent={},O.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},O.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=O.prototype;var b=y.prototype=new v;b.constructor=y,g(b,O.prototype),b.isPureReactComponent=!0;var w=Array.isArray,k=Object.prototype.hasOwnProperty,S={current:null},x={key:!0,ref:!0,__self:!0,__source:!0};function T(e,t,i){var r,s={},o=null,a=null;if(null!=t)for(r in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(o=""+t.key),t)k.call(t,r)&&!x.hasOwnProperty(r)&&(s[r]=t[r]);var l=arguments.length-2;if(1===l)s.children=i;else if(1<l){for(var h=Array(l),c=0;c<l;c++)h[c]=arguments[c+2];s.children=h}if(e&&e.defaultProps)for(r in l=e.defaultProps)void 0===s[r]&&(s[r]=l[r]);return{$$typeof:n,type:e,key:o,ref:a,props:s,_owner:S.current}}function _(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var P=/\/+/g;function C(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function E(e,t,r,s,o){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var l=!1;if(null===e)l=!0;else switch(a){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case i:l=!0}}if(l)return o=o(l=e),e=""===s?"."+C(l,0):s,w(o)?(r="",null!=e&&(r=e.replace(P,"$&/")+"/"),E(o,t,r,"",(function(e){return e}))):null!=o&&(_(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,r+(!o.key||l&&l.key===o.key?"":(""+o.key).replace(P,"$&/")+"/")+e)),t.push(o)),1;if(l=0,s=""===s?".":s+":",w(e))for(var h=0;h<e.length;h++){var c=s+C(a=e[h],h);l+=E(a,t,r,c,o)}else if(c=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"===typeof c)for(e=c.call(e),h=0;!(a=e.next()).done;)l+=E(a=a.value,t,r,c=s+C(a,h++),o);else if("object"===a)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function Q(e,t,n){if(null==e)return e;var i=[],r=0;return E(e,i,"","",(function(e){return t.call(n,e,r++)})),i}function A(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var R={current:null},N={transition:null},I={ReactCurrentDispatcher:R,ReactCurrentBatchConfig:N,ReactCurrentOwner:S};function D(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:Q,forEach:function(e,t,n){Q(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return Q(e,(function(){t++})),t},toArray:function(e){return Q(e,(function(e){return e}))||[]},only:function(e){if(!_(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=O,t.Fragment=r,t.Profiler=o,t.PureComponent=y,t.StrictMode=s,t.Suspense=c,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=I,t.act=D,t.cloneElement=function(e,t,i){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=g({},e.props),s=e.key,o=e.ref,a=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,a=S.current),void 0!==t.key&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(h in t)k.call(t,h)&&!x.hasOwnProperty(h)&&(r[h]=void 0===t[h]&&void 0!==l?l[h]:t[h])}var h=arguments.length-2;if(1===h)r.children=i;else if(1<h){l=Array(h);for(var c=0;c<h;c++)l[c]=arguments[c+2];r.children=l}return{$$typeof:n,type:e.type,key:s,ref:o,props:r,_owner:a}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:a,_context:e},e.Consumer=e},t.createElement=T,t.createFactory=function(e){var t=T.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:h,render:e}},t.isValidElement=_,t.lazy=function(e){return{$$typeof:d,_payload:{_status:-1,_result:e},_init:A}},t.memo=function(e,t){return{$$typeof:u,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=N.transition;N.transition={};try{e()}finally{N.transition=t}},t.unstable_act=D,t.useCallback=function(e,t){return R.current.useCallback(e,t)},t.useContext=function(e){return R.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return R.current.useDeferredValue(e)},t.useEffect=function(e,t){return R.current.useEffect(e,t)},t.useId=function(){return R.current.useId()},t.useImperativeHandle=function(e,t,n){return R.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return R.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return R.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return R.current.useMemo(e,t)},t.useReducer=function(e,t,n){return R.current.useReducer(e,t,n)},t.useRef=function(e){return R.current.useRef(e)},t.useState=function(e){return R.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return R.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return R.current.useTransition()},t.version="18.3.1"},483:(e,t,n)=>{"use strict";e.exports=n(146)},723:(e,t,n)=>{"use strict";e.exports=n(9)},122:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var i=n-1>>>1,r=e[i];if(!(0<s(r,t)))break e;e[i]=t,e[n]=r,n=i}}function i(e){return 0===e.length?null:e[0]}function r(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var i=0,r=e.length,o=r>>>1;i<o;){var a=2*(i+1)-1,l=e[a],h=a+1,c=e[h];if(0>s(l,n))h<r&&0>s(c,l)?(e[i]=c,e[h]=n,i=h):(e[i]=l,e[a]=n,i=a);else{if(!(h<r&&0>s(c,n)))break e;e[i]=c,e[h]=n,i=h}}}return t}function s(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var h=[],c=[],u=1,d=null,f=3,p=!1,g=!1,m=!1,O="function"===typeof setTimeout?setTimeout:null,v="function"===typeof clearTimeout?clearTimeout:null,y="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=i(c);null!==t;){if(null===t.callback)r(c);else{if(!(t.startTime<=e))break;r(c),t.sortIndex=t.expirationTime,n(h,t)}t=i(c)}}function w(e){if(m=!1,b(e),!g)if(null!==i(h))g=!0,N(k);else{var t=i(c);null!==t&&I(w,t.startTime-e)}}function k(e,n){g=!1,m&&(m=!1,v(_),_=-1),p=!0;var s=f;try{for(b(n),d=i(h);null!==d&&(!(d.expirationTime>n)||e&&!E());){var o=d.callback;if("function"===typeof o){d.callback=null,f=d.priorityLevel;var a=o(d.expirationTime<=n);n=t.unstable_now(),"function"===typeof a?d.callback=a:d===i(h)&&r(h),b(n)}else r(h);d=i(h)}if(null!==d)var l=!0;else{var u=i(c);null!==u&&I(w,u.startTime-n),l=!1}return l}finally{d=null,f=s,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var S,x=!1,T=null,_=-1,P=5,C=-1;function E(){return!(t.unstable_now()-C<P)}function Q(){if(null!==T){var e=t.unstable_now();C=e;var n=!0;try{n=T(!0,e)}finally{n?S():(x=!1,T=null)}}else x=!1}if("function"===typeof y)S=function(){y(Q)};else if("undefined"!==typeof MessageChannel){var A=new MessageChannel,R=A.port2;A.port1.onmessage=Q,S=function(){R.postMessage(null)}}else S=function(){O(Q,0)};function N(e){T=e,x||(x=!0,S())}function I(e,n){_=O((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){g||p||(g=!0,N(k))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return i(h)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,r,s){var o=t.unstable_now();switch("object"===typeof s&&null!==s?s="number"===typeof(s=s.delay)&&0<s?o+s:o:s=o,e){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return e={id:u++,callback:r,priorityLevel:e,startTime:s,expirationTime:a=s+a,sortIndex:-1},s>o?(e.sortIndex=s,n(c,e),null===i(h)&&e===i(c)&&(m?(v(_),_=-1):m=!0,I(w,s-o))):(e.sortIndex=a,n(h,e),g||p||(g=!0,N(k))),e},t.unstable_shouldYield=E,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},557:(e,t,n)=>{"use strict";e.exports=n(122)}},t={};function n(i){var r=t[i];if(void 0!==r)return r.exports;var s=t[i]={exports:{}};return e[i](s,s.exports,n),s.exports}n.m=e,n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(i,r){if(1&r&&(i=this(i)),8&r)return i;if("object"===typeof i&&i){if(4&r&&i.__esModule)return i;if(16&r&&"function"===typeof i.then)return i}var s=Object.create(null);n.r(s);var o={};e=e||[null,t({}),t([]),t(t)];for(var a=2&r&&i;"object"==typeof a&&!~e.indexOf(a);a=t(a))Object.getOwnPropertyNames(a).forEach((e=>o[e]=()=>i[e]));return o.default=()=>i,n.d(s,o),s}})(),n.d=(e,t)=>{for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.f={},n.e=e=>Promise.all(Object.keys(n.f).reduce(((t,i)=>(n.f[i](e,t),t)),[])),n.u=e=>"static/js/"+e+".416237cf.chunk.js",n.miniCssF=e=>{},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="dya:";n.l=(i,r,s,o)=>{if(e[i])e[i].push(r);else{var a,l;if(void 0!==s)for(var h=document.getElementsByTagName("script"),c=0;c<h.length;c++){var u=h[c];if(u.getAttribute("src")==i||u.getAttribute("data-webpack")==t+s){a=u;break}}a||(l=!0,(a=document.createElement("script")).charset="utf-8",a.timeout=120,n.nc&&a.setAttribute("nonce",n.nc),a.setAttribute("data-webpack",t+s),a.src=i),e[i]=[r];var d=(t,n)=>{a.onerror=a.onload=null,clearTimeout(f);var r=e[i];if(delete e[i],a.parentNode&&a.parentNode.removeChild(a),r&&r.forEach((e=>e(n))),t)return t(n)},f=setTimeout(d.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=d.bind(null,a.onerror),a.onload=d.bind(null,a.onload),l&&document.head.appendChild(a)}}})(),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/DYA/",(()=>{var e={792:0};n.f.j=(t,i)=>{var r=n.o(e,t)?e[t]:void 0;if(0!==r)if(r)i.push(r[2]);else{var s=new Promise(((n,i)=>r=e[t]=[n,i]));i.push(r[2]=s);var o=n.p+n.u(t),a=new Error;n.l(o,(i=>{if(n.o(e,t)&&(0!==(r=e[t])&&(e[t]=void 0),r)){var s=i&&("load"===i.type?"missing":i.type),o=i&&i.target&&i.target.src;a.message="Loading chunk "+t+" failed.\n("+s+": "+o+")",a.name="ChunkLoadError",a.type=s,a.request=o,r[1](a)}}),"chunk-"+t,t)}};var t=(t,i)=>{var r,s,o=i[0],a=i[1],l=i[2],h=0;if(o.some((t=>0!==e[t]))){for(r in a)n.o(a,r)&&(n.m[r]=a[r]);if(l)l(n)}for(t&&t(i);h<o.length;h++)s=o[h],n.o(e,s)&&e[s]&&e[s][0](),e[s]=0},i=self.webpackChunkdya=self.webpackChunkdya||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))})(),(()=>{"use strict";var e={};n.r(e),n.d(e,{hasBrowserEnv:()=>Tz,hasStandardBrowserEnv:()=>_z,hasStandardBrowserWebWorkerEnv:()=>Cz,origin:()=>Ez});var t={};n.r(t),n.d(t,{Decoder:()=>ZB,Encoder:()=>YB,PacketType:()=>XB,protocol:()=>WB});var i,r=n(483),s=n.t(r,2),o=n(775),a=n(998),l=n.t(a,2);function h(){return h=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},h.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(i||(i={}));const c="popstate";function u(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function d(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function f(e,t){return{usr:e.state,key:e.key,idx:t}}function p(e,t,n,i){return void 0===n&&(n=null),h({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?m(t):t,{state:n,key:t&&t.key||i||Math.random().toString(36).substr(2,8)})}function g(e){let{pathname:t="/",search:n="",hash:i=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),i&&"#"!==i&&(t+="#"===i.charAt(0)?i:"#"+i),t}function m(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let i=e.indexOf("?");i>=0&&(t.search=e.substr(i),e=e.substr(0,i)),e&&(t.pathname=e)}return t}function O(e,t,n,r){void 0===r&&(r={});let{window:s=document.defaultView,v5Compat:o=!1}=r,a=s.history,l=i.Pop,d=null,m=O();function O(){return(a.state||{idx:null}).idx}function v(){l=i.Pop;let e=O(),t=null==e?null:e-m;m=e,d&&d({action:l,location:b.location,delta:t})}function y(e){let t="null"!==s.location.origin?s.location.origin:s.location.href,n="string"===typeof e?e:g(e);return n=n.replace(/ $/,"%20"),u(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==m&&(m=0,a.replaceState(h({},a.state,{idx:m}),""));let b={get action(){return l},get location(){return e(s,a)},listen(e){if(d)throw new Error("A history only accepts one active listener");return s.addEventListener(c,v),d=e,()=>{s.removeEventListener(c,v),d=null}},createHref:e=>t(s,e),createURL:y,encodeLocation(e){let t=y(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){l=i.Push;let r=p(b.location,e,t);n&&n(r,e),m=O()+1;let h=f(r,m),c=b.createHref(r);try{a.pushState(h,"",c)}catch(u){if(u instanceof DOMException&&"DataCloneError"===u.name)throw u;s.location.assign(c)}o&&d&&d({action:l,location:b.location,delta:1})},replace:function(e,t){l=i.Replace;let r=p(b.location,e,t);n&&n(r,e),m=O();let s=f(r,m),h=b.createHref(r);a.replaceState(s,"",h),o&&d&&d({action:l,location:b.location,delta:0})},go:e=>a.go(e)};return b}var v;!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(v||(v={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function y(e,t,n){return void 0===n&&(n="/"),b(e,t,n,!1)}function b(e,t,n,i){let r=I(("string"===typeof t?m(t):t).pathname||"/",n);if(null==r)return null;let s=w(e);!function(e){e.sort(((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every(((e,n)=>e===t[n]));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((e=>e.childrenIndex)),t.routesMeta.map((e=>e.childrenIndex)))))}(s);let o=null;for(let a=0;null==o&&a<s.length;++a){let e=N(r);o=A(s[a],e,i)}return o}function w(e,t,n,i){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===i&&(i="");let r=(e,r,s)=>{let o={relativePath:void 0===s?e.path||"":s,caseSensitive:!0===e.caseSensitive,childrenIndex:r,route:e};o.relativePath.startsWith("/")&&(u(o.relativePath.startsWith(i),'Absolute route path "'+o.relativePath+'" nested under path "'+i+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),o.relativePath=o.relativePath.slice(i.length));let a=U([i,o.relativePath]),l=n.concat(o);e.children&&e.children.length>0&&(u(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+a+'".'),w(e.children,t,l,a)),(null!=e.path||e.index)&&t.push({path:a,score:Q(a,e.index),routesMeta:l})};return e.forEach(((e,t)=>{var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?"))for(let i of k(e.path))r(e,t,i);else r(e,t)})),t}function k(e){let t=e.split("/");if(0===t.length)return[];let[n,...i]=t,r=n.endsWith("?"),s=n.replace(/\?$/,"");if(0===i.length)return r?[s,""]:[s];let o=k(i.join("/")),a=[];return a.push(...o.map((e=>""===e?s:[s,e].join("/")))),r&&a.push(...o),a.map((t=>e.startsWith("/")&&""===t?"/":t))}const S=/^:[\w-]+$/,x=3,T=2,_=1,P=10,C=-2,E=e=>"*"===e;function Q(e,t){let n=e.split("/"),i=n.length;return n.some(E)&&(i+=C),t&&(i+=T),n.filter((e=>!E(e))).reduce(((e,t)=>e+(S.test(t)?x:""===t?_:P)),i)}function A(e,t,n){void 0===n&&(n=!1);let{routesMeta:i}=e,r={},s="/",o=[];for(let a=0;a<i.length;++a){let e=i[a],l=a===i.length-1,h="/"===s?t:t.slice(s.length)||"/",c=R({path:e.relativePath,caseSensitive:e.caseSensitive,end:l},h),u=e.route;if(!c&&l&&n&&!i[i.length-1].route.index&&(c=R({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},h)),!c)return null;Object.assign(r,c.params),o.push({params:r,pathname:U([s,c.pathname]),pathnameBase:q(U([s,c.pathnameBase])),route:u}),"/"!==c.pathnameBase&&(s=U([s,c.pathnameBase]))}return o}function R(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,i]=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);d("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let i=[],r="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,((e,t,n)=>(i.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)")));e.endsWith("*")?(i.push({paramName:"*"}),r+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?r+="\\/*$":""!==e&&"/"!==e&&(r+="(?:(?=\\/|$))");let s=new RegExp(r,t?void 0:"i");return[s,i]}(e.path,e.caseSensitive,e.end),r=t.match(n);if(!r)return null;let s=r[0],o=s.replace(/(.)\/+$/,"$1"),a=r.slice(1),l=i.reduce(((e,t,n)=>{let{paramName:i,isOptional:r}=t;if("*"===i){let e=a[n]||"";o=s.slice(0,s.length-e.length).replace(/(.)\/+$/,"$1")}const l=a[n];return e[i]=r&&!l?void 0:(l||"").replace(/%2F/g,"/"),e}),{});return{params:l,pathname:s,pathnameBase:o,pattern:e}}function N(e){try{return e.split("/").map((e=>decodeURIComponent(e).replace(/\//g,"%2F"))).join("/")}catch(t){return d(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function I(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,i=e.charAt(n);return i&&"/"!==i?null:e.slice(n)||"/"}function D(e,t,n,i){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(i)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function M(e){return e.filter(((e,t)=>0===t||e.route.path&&e.route.path.length>0))}function L(e,t){let n=M(e);return t?n.map(((e,t)=>t===n.length-1?e.pathname:e.pathnameBase)):n.map((e=>e.pathnameBase))}function $(e,t,n,i){let r;void 0===i&&(i=!1),"string"===typeof e?r=m(e):(r=h({},e),u(!r.pathname||!r.pathname.includes("?"),D("?","pathname","search",r)),u(!r.pathname||!r.pathname.includes("#"),D("#","pathname","hash",r)),u(!r.search||!r.search.includes("#"),D("#","search","hash",r)));let s,o=""===e||""===r.pathname,a=o?"/":r.pathname;if(null==a)s=n;else{let e=t.length-1;if(!i&&a.startsWith("..")){let t=a.split("/");for(;".."===t[0];)t.shift(),e-=1;r.pathname=t.join("/")}s=e>=0?t[e]:"/"}let l=function(e,t){void 0===t&&(t="/");let{pathname:n,search:i="",hash:r=""}="string"===typeof e?m(e):e,s=n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(n,t):t;return{pathname:s,search:V(i),hash:z(r)}}(r,s),c=a&&"/"!==a&&a.endsWith("/"),d=(o||"."===a)&&n.endsWith("/");return l.pathname.endsWith("/")||!c&&!d||(l.pathname+="/"),l}const U=e=>e.join("/").replace(/\/\/+/g,"/"),q=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),V=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",z=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";Error;function j(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}const B=["post","put","patch","delete"],F=(new Set(B),["get",...B]);new Set(F),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function W(){return W=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},W.apply(this,arguments)}const X=r.createContext(null);const Y=r.createContext(null);const G=r.createContext(null);const Z=r.createContext(null);const H=r.createContext({outlet:null,matches:[],isDataRoute:!1});const K=r.createContext(null);function J(){return null!=r.useContext(Z)}function ee(){return J()||u(!1),r.useContext(Z).location}function te(e){r.useContext(G).static||r.useLayoutEffect(e)}function ne(){let{isDataRoute:e}=r.useContext(H);return e?function(){let{router:e}=de(ce.UseNavigateStable),t=pe(ue.UseNavigateStable),n=r.useRef(!1);te((()=>{n.current=!0}));let i=r.useCallback((function(i,r){void 0===r&&(r={}),n.current&&("number"===typeof i?e.navigate(i):e.navigate(i,W({fromRouteId:t},r)))}),[e,t]);return i}():function(){J()||u(!1);let e=r.useContext(X),{basename:t,future:n,navigator:i}=r.useContext(G),{matches:s}=r.useContext(H),{pathname:o}=ee(),a=JSON.stringify(L(s,n.v7_relativeSplatPath)),l=r.useRef(!1);return te((()=>{l.current=!0})),r.useCallback((function(n,r){if(void 0===r&&(r={}),!l.current)return;if("number"===typeof n)return void i.go(n);let s=$(n,JSON.parse(a),o,"path"===r.relative);null==e&&"/"!==t&&(s.pathname="/"===s.pathname?t:U([t,s.pathname])),(r.replace?i.replace:i.push)(s,r.state,r)}),[t,i,a,o,e])}()}function ie(){let{matches:e}=r.useContext(H),t=e[e.length-1];return t?t.params:{}}function re(e,t,n,s){J()||u(!1);let{navigator:o}=r.useContext(G),{matches:a}=r.useContext(H),l=a[a.length-1],h=l?l.params:{},c=(l&&l.pathname,l?l.pathnameBase:"/");l&&l.route;let d,f=ee();if(t){var p;let e="string"===typeof t?m(t):t;"/"===c||(null==(p=e.pathname)?void 0:p.startsWith(c))||u(!1),d=e}else d=f;let g=d.pathname||"/",O=g;if("/"!==c){let e=c.replace(/^\//,"").split("/");O="/"+g.replace(/^\//,"").split("/").slice(e.length).join("/")}let v=y(e,{pathname:O});let b=he(v&&v.map((e=>Object.assign({},e,{params:Object.assign({},h,e.params),pathname:U([c,o.encodeLocation?o.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?c:U([c,o.encodeLocation?o.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])}))),a,n,s);return t&&b?r.createElement(Z.Provider,{value:{location:W({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:i.Pop}},b):b}function se(){let e=function(){var e;let t=r.useContext(K),n=fe(ue.UseRouteError),i=pe(ue.UseRouteError);if(void 0!==t)return t;return null==(e=n.errors)?void 0:e[i]}(),t=j(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,i="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:i};return r.createElement(r.Fragment,null,r.createElement("h2",null,"Unexpected Application Error!"),r.createElement("h3",{style:{fontStyle:"italic"}},t),n?r.createElement("pre",{style:s},n):null,null)}const oe=r.createElement(se,null);class ae extends r.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?r.createElement(H.Provider,{value:this.props.routeContext},r.createElement(K.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function le(e){let{routeContext:t,match:n,children:i}=e,s=r.useContext(X);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),r.createElement(H.Provider,{value:t},i)}function he(e,t,n,i){var s;if(void 0===t&&(t=[]),void 0===n&&(n=null),void 0===i&&(i=null),null==e){var o;if(null==(o=n)||!o.errors)return null;e=n.matches}let a=e,l=null==(s=n)?void 0:s.errors;if(null!=l){let e=a.findIndex((e=>e.route.id&&void 0!==(null==l?void 0:l[e.route.id])));e>=0||u(!1),a=a.slice(0,Math.min(a.length,e+1))}let h=!1,c=-1;if(n&&i&&i.v7_partialHydration)for(let r=0;r<a.length;r++){let e=a[r];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(c=r),e.route.id){let{loaderData:t,errors:i}=n,r=e.route.loader&&void 0===t[e.route.id]&&(!i||void 0===i[e.route.id]);if(e.route.lazy||r){h=!0,a=c>=0?a.slice(0,c+1):[a[0]];break}}}return a.reduceRight(((e,i,s)=>{let o,u=!1,d=null,f=null;var p;n&&(o=l&&i.route.id?l[i.route.id]:void 0,d=i.route.errorElement||oe,h&&(c<0&&0===s?(p="route-fallback",!1||ge[p]||(ge[p]=!0),u=!0,f=null):c===s&&(u=!0,f=i.route.hydrateFallbackElement||null)));let g=t.concat(a.slice(0,s+1)),m=()=>{let t;return t=o?d:u?f:i.route.Component?r.createElement(i.route.Component,null):i.route.element?i.route.element:e,r.createElement(le,{match:i,routeContext:{outlet:e,matches:g,isDataRoute:null!=n},children:t})};return n&&(i.route.ErrorBoundary||i.route.errorElement||0===s)?r.createElement(ae,{location:n.location,revalidation:n.revalidation,component:d,error:o,children:m(),routeContext:{outlet:null,matches:g,isDataRoute:!0}}):m()}),null)}var ce=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(ce||{}),ue=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(ue||{});function de(e){let t=r.useContext(X);return t||u(!1),t}function fe(e){let t=r.useContext(Y);return t||u(!1),t}function pe(e){let t=function(){let e=r.useContext(H);return e||u(!1),e}(),n=t.matches[t.matches.length-1];return n.route.id||u(!1),n.route.id}const ge={};s.startTransition;function me(e){u(!1)}function Oe(e){let{basename:t="/",children:n=null,location:s,navigationType:o=i.Pop,navigator:a,static:l=!1,future:h}=e;J()&&u(!1);let c=t.replace(/^\/*/,"/"),d=r.useMemo((()=>({basename:c,navigator:a,static:l,future:W({v7_relativeSplatPath:!1},h)})),[c,h,a,l]);"string"===typeof s&&(s=m(s));let{pathname:f="/",search:p="",hash:g="",state:O=null,key:v="default"}=s,y=r.useMemo((()=>{let e=I(f,c);return null==e?null:{location:{pathname:e,search:p,hash:g,state:O,key:v},navigationType:o}}),[c,f,p,g,O,v,o]);return null==y?null:r.createElement(G.Provider,{value:d},r.createElement(Z.Provider,{children:n,value:y}))}function ve(e){let{children:t,location:n}=e;return re(ye(t),n)}new Promise((()=>{}));r.Component;function ye(e,t){void 0===t&&(t=[]);let n=[];return r.Children.forEach(e,((e,i)=>{if(!r.isValidElement(e))return;let s=[...t,i];if(e.type===r.Fragment)return void n.push.apply(n,ye(e.props.children,s));e.type!==me&&u(!1),e.props.index&&e.props.children&&u(!1);let o={id:e.props.id||s.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(o.children=ye(e.props.children,s)),n.push(o)})),n}new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);try{window.__reactRouterVersion="6"}catch(_F){}new Map;const be=s.startTransition;l.flushSync,s.useId;function we(e){let{basename:t,children:n,future:i,window:s}=e,o=r.useRef();var a;null==o.current&&(o.current=(void 0===(a={window:s,v5Compat:!0})&&(a={}),O((function(e,t){let{pathname:n="/",search:i="",hash:r=""}=m(e.location.hash.substr(1));return n.startsWith("/")||n.startsWith(".")||(n="/"+n),p("",{pathname:n,search:i,hash:r},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){let n=e.document.querySelector("base"),i="";if(n&&n.getAttribute("href")){let t=e.location.href,n=t.indexOf("#");i=-1===n?t:t.slice(0,n)}return i+"#"+("string"===typeof t?t:g(t))}),(function(e,t){d("/"===e.pathname.charAt(0),"relative pathnames are not supported in hash history.push("+JSON.stringify(t)+")")}),a)));let l=o.current,[h,c]=r.useState({action:l.action,location:l.location}),{v7_startTransition:u}=i||{},f=r.useCallback((e=>{u&&be?be((()=>c(e))):c(e)}),[c,u]);return r.useLayoutEffect((()=>l.listen(f)),[l,f]),r.createElement(Oe,{basename:t,children:n,location:h.location,navigationType:h.action,navigator:l,future:i})}"undefined"!==typeof window&&"undefined"!==typeof window.document&&window.document.createElement;var ke,Se;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(ke||(ke={})),function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(Se||(Se={}));const xe=function(e){const t=[];let n=0;for(let i=0;i<e.length;i++){let r=e.charCodeAt(i);r<128?t[n++]=r:r<2048?(t[n++]=r>>6|192,t[n++]=63&r|128):55296===(64512&r)&&i+1<e.length&&56320===(64512&e.charCodeAt(i+1))?(r=65536+((1023&r)<<10)+(1023&e.charCodeAt(++i)),t[n++]=r>>18|240,t[n++]=r>>12&63|128,t[n++]=r>>6&63|128,t[n++]=63&r|128):(t[n++]=r>>12|224,t[n++]=r>>6&63|128,t[n++]=63&r|128)}return t},Te={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<e.length;r+=3){const t=e[r],s=r+1<e.length,o=s?e[r+1]:0,a=r+2<e.length,l=a?e[r+2]:0,h=t>>2,c=(3&t)<<4|o>>4;let u=(15&o)<<2|l>>6,d=63&l;a||(d=64,s||(u=64)),i.push(n[h],n[c],n[u],n[d])}return i.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(xe(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,i=0;for(;n<e.length;){const r=e[n++];if(r<128)t[i++]=String.fromCharCode(r);else if(r>191&&r<224){const s=e[n++];t[i++]=String.fromCharCode((31&r)<<6|63&s)}else if(r>239&&r<365){const s=((7&r)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[i++]=String.fromCharCode(55296+(s>>10)),t[i++]=String.fromCharCode(56320+(1023&s))}else{const s=e[n++],o=e[n++];t[i++]=String.fromCharCode((15&r)<<12|(63&s)<<6|63&o)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<e.length;){const t=n[e.charAt(r++)],s=r<e.length?n[e.charAt(r)]:0;++r;const o=r<e.length?n[e.charAt(r)]:64;++r;const a=r<e.length?n[e.charAt(r)]:64;if(++r,null==t||null==s||null==o||null==a)throw new _e;const l=t<<2|s>>4;if(i.push(l),64!==o){const e=s<<4&240|o>>2;if(i.push(e),64!==a){const e=o<<6&192|a;i.push(e)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class _e extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Pe=function(e){return function(e){const t=xe(e);return Te.encodeByteArray(t,!0)}(e).replace(/\./g,"")},Ce=function(e){try{return Te.decodeString(e,!0)}catch(_F){console.error("base64Decode failed: ",_F)}return null};const Ee=()=>function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,Qe=()=>{try{return Ee()||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"/DYA",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(_F){return}const t=e&&Ce(e[1]);return t&&JSON.parse(t)})()}catch(_F){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(_F))}},Ae=e=>{var t,n;return null===(n=null===(t=Qe())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]},Re=e=>{const t=Ae(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error("Invalid host ".concat(t," with no separate hostname and port!"));const i=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),i]:[t.substring(0,n),i]},Ne=()=>{var e;return null===(e=Qe())||void 0===e?void 0:e.config},Ie=e=>{var t;return null===(t=Qe())||void 0===t?void 0:t["_".concat(e)]};class De{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch((()=>{})),1===e.length?e(t):e(t,n))}}}function Me(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",i=e.iat||0,r=e.sub||e.user_id;if(!r)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:i,exp:i+3600,auth_time:i,sub:r,user_id:r,firebase:{sign_in_provider:"custom",identities:{}}},e);return[Pe(JSON.stringify({alg:"none",type:"JWT"})),Pe(JSON.stringify(s)),""].join(".")}function Le(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function $e(){return!function(){var e;const t=null===(e=Qe())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(_F){return!1}}()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Ue(){try{return"object"===typeof indexedDB}catch(_F){return!1}}class qe extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,qe.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ve.prototype.create)}}class Ve{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),i=this.errors[e],r=i?function(e,t){return e.replace(ze,((e,n)=>{const i=t[n];return null!=i?String(i):"<".concat(n,"?>")}))}(i,t):"Error",s="".concat(this.serviceName,": ").concat(r," (").concat(n,").");return new qe(n,s,t)}}const ze=/\{\$([^}]+)}/g;function je(e,t){if(e===t)return!0;const n=Object.keys(e),i=Object.keys(t);for(const r of n){if(!i.includes(r))return!1;const n=e[r],s=t[r];if(Be(n)&&Be(s)){if(!je(n,s))return!1}else if(n!==s)return!1}for(const r of i)if(!n.includes(r))return!1;return!0}function Be(e){return null!==e&&"object"===typeof e}function Fe(e){const t=[];for(const[n,i]of Object.entries(e))Array.isArray(i)?i.forEach((e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return t.length?"&"+t.join("&"):""}function We(e){const t={};return e.replace(/^\?/,"").split("&").forEach((e=>{if(e){const[n,i]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(i)}})),t}function Xe(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}class Ye{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then((()=>{e(this)})).catch((e=>{this.error(e)}))}next(e){this.forEachObserver((t=>{t.next(e)}))}error(e){this.forEachObserver((t=>{t.error(e)})),this.close(e)}complete(){this.forEachObserver((e=>{e.complete()})),this.close()}subscribe(e,t,n){let i;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");i=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===i.next&&(i.next=Ge),void 0===i.error&&(i.error=Ge),void 0===i.complete&&(i.complete=Ge);const r=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch(_F){}})),this.observers.push(i),r}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(_F){"undefined"!==typeof console&&console.error&&console.error(_F)}}))}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function Ge(){}function Ze(e){return e&&e._delegate?e._delegate:e}class He{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Ke="[DEFAULT]";class Je{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new De;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(_F){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),i=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(i)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(_F){if(i)return null;throw _F}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:Ke})}catch(_F){}for(const[e,t]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:n});t.resolve(e)}catch(_F){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ke;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter((e=>"INTERNAL"in e)).map((e=>e.INTERNAL.delete())),...e.filter((e=>"_delete"in e)).map((e=>e._delete()))])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ke;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ke;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error("".concat(this.name,"(").concat(n,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));const i=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[r,s]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(r)&&s.resolve(i)}return i}onInit(e,t){var n;const i=this.normalizeInstanceIdentifier(t),r=null!==(n=this.onInitCallbacks.get(i))&&void 0!==n?n:new Set;r.add(e),this.onInitCallbacks.set(i,r);const s=this.instances.get(i);return s&&e(s,i),()=>{r.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch(Lx){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,i=this.instances.get(t);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:(r=t,r===Ke?void 0:r),options:n}),this.instances.set(t,i),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(i,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,i)}catch(Lx){}var r;return i||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ke;return this.component?this.component.multipleInstances?e:Ke:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class et{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new Je(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const tt=[];var nt;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(nt||(nt={}));const it={debug:nt.DEBUG,verbose:nt.VERBOSE,info:nt.INFO,warn:nt.WARN,error:nt.ERROR,silent:nt.SILENT},rt=nt.INFO,st={[nt.DEBUG]:"log",[nt.VERBOSE]:"log",[nt.INFO]:"info",[nt.WARN]:"warn",[nt.ERROR]:"error"},ot=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),i=st[t];if(!i)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var r=arguments.length,s=new Array(r>2?r-2:0),o=2;o<r;o++)s[o-2]=arguments[o];console[i]("[".concat(n,"]  ").concat(e.name,":"),...s)};class at{constructor(e){this.name=e,this._logLevel=rt,this._logHandler=ot,this._userLogHandler=null,tt.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in nt))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?it[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,nt.DEBUG,...t),this._logHandler(this,nt.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,nt.VERBOSE,...t),this._logHandler(this,nt.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,nt.INFO,...t),this._logHandler(this,nt.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,nt.WARN,...t),this._logHandler(this,nt.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,nt.ERROR,...t),this._logHandler(this,nt.ERROR,...t)}}const lt=(e,t)=>t.some((t=>e instanceof t));let ht,ct;const ut=new WeakMap,dt=new WeakMap,ft=new WeakMap,pt=new WeakMap,gt=new WeakMap;let mt={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return dt.get(e);if("objectStoreNames"===t)return e.objectStoreNames||ft.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return yt(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function Ot(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(ct||(ct=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return e.apply(bt(this),n),yt(ut.get(this))}:function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return yt(e.apply(bt(this),n))}:function(t){for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];const s=e.call(bt(this),t,...i);return ft.set(s,t.sort?t.sort():[t]),yt(s)}}function vt(e){return"function"===typeof e?Ot(e):(e instanceof IDBTransaction&&function(e){if(dt.has(e))return;const t=new Promise(((t,n)=>{const i=()=>{e.removeEventListener("complete",r),e.removeEventListener("error",s),e.removeEventListener("abort",s)},r=()=>{t(),i()},s=()=>{n(e.error||new DOMException("AbortError","AbortError")),i()};e.addEventListener("complete",r),e.addEventListener("error",s),e.addEventListener("abort",s)}));dt.set(e,t)}(e),lt(e,ht||(ht=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,mt):e)}function yt(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const i=()=>{e.removeEventListener("success",r),e.removeEventListener("error",s)},r=()=>{t(yt(e.result)),i()},s=()=>{n(e.error),i()};e.addEventListener("success",r),e.addEventListener("error",s)}));return t.then((t=>{t instanceof IDBCursor&&ut.set(t,e)})).catch((()=>{})),gt.set(t,e),t}(e);if(pt.has(e))return pt.get(e);const t=vt(e);return t!==e&&(pt.set(e,t),gt.set(t,e)),t}const bt=e=>gt.get(e);const wt=["get","getKey","getAll","getAllKeys","count"],kt=["put","add","delete","clear"],St=new Map;function xt(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(St.get(t))return St.get(t);const n=t.replace(/FromIndex$/,""),i=t!==n,r=kt.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!r&&!wt.includes(n))return;const s=async function(e){const t=this.transaction(e,r?"readwrite":"readonly");let s=t.store;for(var o=arguments.length,a=new Array(o>1?o-1:0),l=1;l<o;l++)a[l-1]=arguments[l];return i&&(s=s.index(a.shift())),(await Promise.all([s[n](...a),r&&t.done]))[0]};return St.set(t,s),s}mt=(e=>({...e,get:(t,n,i)=>xt(t,n)||e.get(t,n,i),has:(t,n)=>!!xt(t,n)||e.has(t,n)}))(mt);class Tt{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map((e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((e=>e)).join(" ")}}const _t="@firebase/app",Pt="0.10.7",Ct=new at("@firebase/app"),Et="@firebase/app-compat",Qt="@firebase/analytics-compat",At="@firebase/analytics",Rt="@firebase/app-check-compat",Nt="@firebase/app-check",It="@firebase/auth",Dt="@firebase/auth-compat",Mt="@firebase/database",Lt="@firebase/database-compat",$t="@firebase/functions",Ut="@firebase/functions-compat",qt="@firebase/installations",Vt="@firebase/installations-compat",zt="@firebase/messaging",jt="@firebase/messaging-compat",Bt="@firebase/performance",Ft="@firebase/performance-compat",Wt="@firebase/remote-config",Xt="@firebase/remote-config-compat",Yt="@firebase/storage",Gt="@firebase/storage-compat",Zt="@firebase/firestore",Ht="@firebase/vertexai-preview",Kt="@firebase/firestore-compat",Jt="firebase",en="[DEFAULT]",tn={[_t]:"fire-core",[Et]:"fire-core-compat",[At]:"fire-analytics",[Qt]:"fire-analytics-compat",[Nt]:"fire-app-check",[Rt]:"fire-app-check-compat",[It]:"fire-auth",[Dt]:"fire-auth-compat",[Mt]:"fire-rtdb",[Lt]:"fire-rtdb-compat",[$t]:"fire-fn",[Ut]:"fire-fn-compat",[qt]:"fire-iid",[Vt]:"fire-iid-compat",[zt]:"fire-fcm",[jt]:"fire-fcm-compat",[Bt]:"fire-perf",[Ft]:"fire-perf-compat",[Wt]:"fire-rc",[Xt]:"fire-rc-compat",[Yt]:"fire-gcs",[Gt]:"fire-gcs-compat",[Zt]:"fire-fst",[Kt]:"fire-fst-compat",[Ht]:"fire-vertex","fire-js":"fire-js",[Jt]:"fire-js-all"},nn=new Map,rn=new Map,sn=new Map;function on(e,t){try{e.container.addComponent(t)}catch(_F){Ct.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),_F)}}function an(e){const t=e.name;if(sn.has(t))return Ct.debug("There were multiple attempts to register component ".concat(t,".")),!1;sn.set(t,e);for(const n of nn.values())on(n,e);for(const n of rn.values())on(n,e);return!0}function ln(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function hn(e){return void 0!==e.settings}const cn=new Ve("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class un{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new He("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw cn.create("app-deleted",{appName:this._name})}}const dn="10.12.4";function fn(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const i=Object.assign({name:en,automaticDataCollectionEnabled:!1},t),r=i.name;if("string"!==typeof r||!r)throw cn.create("bad-app-name",{appName:String(r)});if(n||(n=Ne()),!n)throw cn.create("no-options");const s=nn.get(r);if(s){if(je(n,s.options)&&je(i,s.config))return s;throw cn.create("duplicate-app",{appName:r})}const o=new et(r);for(const l of sn.values())o.addComponent(l);const a=new un(n,i,o);return nn.set(r,a),a}function pn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:en;const t=nn.get(e);if(!t&&e===en&&Ne())return fn();if(!t)throw cn.create("no-app",{appName:e});return t}function gn(e,t,n){var i;let r=null!==(i=tn[e])&&void 0!==i?i:e;n&&(r+="-".concat(n));const s=r.match(/\s|\//),o=t.match(/\s|\//);if(s||o){const e=['Unable to register library "'.concat(r,'" with version "').concat(t,'":')];return s&&e.push('library name "'.concat(r,'" contains illegal characters (whitespace or "/")')),s&&o&&e.push("and"),o&&e.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void Ct.warn(e.join(" "))}an(new He("".concat(r,"-version"),(()=>({library:r,version:t})),"VERSION"))}const mn="firebase-heartbeat-database",On=1,vn="firebase-heartbeat-store";let yn=null;function bn(){return yn||(yn=function(e,t){let{blocked:n,upgrade:i,blocking:r,terminated:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const o=indexedDB.open(e,t),a=yt(o);return i&&o.addEventListener("upgradeneeded",(e=>{i(yt(o.result),e.oldVersion,e.newVersion,yt(o.transaction),e)})),n&&o.addEventListener("blocked",(e=>n(e.oldVersion,e.newVersion,e))),a.then((e=>{s&&e.addEventListener("close",(()=>s())),r&&e.addEventListener("versionchange",(e=>r(e.oldVersion,e.newVersion,e)))})).catch((()=>{})),a}(mn,On,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(vn)}catch(_F){console.warn(_F)}}}).catch((e=>{throw cn.create("idb-open",{originalErrorMessage:e.message})}))),yn}async function wn(e,t){try{const n=(await bn()).transaction(vn,"readwrite"),i=n.objectStore(vn);await i.put(t,kn(e)),await n.done}catch(_F){if(_F instanceof qe)Ct.warn(_F.message);else{const t=cn.create("idb-set",{originalErrorMessage:null===_F||void 0===_F?void 0:_F.message});Ct.warn(t.message)}}}function kn(e){return"".concat(e.name,"!").concat(e.options.appId)}class Sn{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Tn(t),this._heartbeatsCachePromise=this._storage.read().then((e=>(this._heartbeatsCache=e,e)))}async triggerHeartbeat(){var e,t;const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=xn();if((null!=(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||(this._heartbeatsCache=await this._heartbeatsCachePromise,null!=(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)))&&this._heartbeatsCache.lastSentHeartbeatDate!==i&&!this._heartbeatsCache.heartbeats.some((e=>e.date===i)))return this._heartbeatsCache.heartbeats.push({date:i,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var e;if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=xn(),{heartbeatsToSend:n,unsentEntries:i}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let i=e.slice();for(const r of e){const e=n.find((e=>e.agent===r.agent));if(e){if(e.dates.push(r.date),_n(n)>t){e.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),_n(n)>t){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}(this._heartbeatsCache.heartbeats),r=Pe(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}}function xn(){return(new Date).toISOString().substring(0,10)}class Tn{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!Ue()&&new Promise(((e,t)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),e(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var e;t((null===(e=r.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}})).then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await bn()).transaction(vn),n=await t.objectStore(vn).get(kn(e));return await t.done,n}catch(_F){if(_F instanceof qe)Ct.warn(_F.message);else{const t=cn.create("idb-get",{originalErrorMessage:null===_F||void 0===_F?void 0:_F.message});Ct.warn(t.message)}}}(this.app);return(null===e||void 0===e?void 0:e.heartbeats)?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return wn(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return wn(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function _n(e){return Pe(JSON.stringify({version:2,heartbeats:e})).length}var Pn;Pn="",an(new He("platform-logger",(e=>new Tt(e)),"PRIVATE")),an(new He("heartbeat",(e=>new Sn(e)),"PRIVATE")),gn(_t,Pt,Pn),gn(_t,Pt,"esm2017"),gn("fire-js","");gn("firebase","10.12.4","app");function Cn(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n}Object.create;Object.create;"function"===typeof SuppressedError&&SuppressedError;function En(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Qn=En,An=new Ve("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Rn=new at("@firebase/auth");function Nn(e){if(Rn.logLevel<=nt.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];Rn.error("Auth (".concat(dn,"): ").concat(e),...n)}}function In(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];throw Un(e,...n)}function Dn(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return Un(e,...n)}function Mn(e,t,n){const i=Object.assign(Object.assign({},Qn()),{[t]:n});return new Ve("auth","Firebase",i).create(t,{appName:e.name})}function Ln(e){return Mn(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function $n(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&In(e,"argument-error"),Mn(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function Un(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];if("string"!==typeof e){const t=n[0],i=[...n.slice(1)];return i[0]&&(i[0].appName=e.name),e._errorFactory.create(t,...i)}return An.create(e,...n)}function qn(e,t){if(!e){for(var n=arguments.length,i=new Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];throw Un(t,...i)}}function Vn(e){const t="INTERNAL ASSERTION FAILED: "+e;throw Nn(t),new Error(t)}function zn(e,t){e||Vn(t)}function jn(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function Bn(){return"http:"===Fn()||"https:"===Fn()}function Fn(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}function Wn(){return!("undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(Bn()||function(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}()||"connection"in navigator))||navigator.onLine}class Xn{constructor(e,t){this.shortDelay=e,this.longDelay=t,zn(t>e,"Short delay should be less than long delay!"),this.isMobile="undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Le())||"object"===typeof navigator&&"ReactNative"===navigator.product}get(){return Wn()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Yn(e,t){zn(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}class Gn{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:"undefined"!==typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!==typeof fetch?fetch:void Vn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:"undefined"!==typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!==typeof Headers?Headers:void Vn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:"undefined"!==typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!==typeof Response?Response:void Vn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Zn={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Hn=new Xn(3e4,6e4);function Kn(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function Jn(e,t,n,i){return ei(e,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},(async()=>{let r={},s={};i&&("GET"===t?s=i:r={body:JSON.stringify(i)});const o=Fe(Object.assign({key:e.config.apiKey},s)).slice(1),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/json",e.languageCode&&(a["X-Firebase-Locale"]=e.languageCode),Gn.fetch()(ni(e,e.config.apiHost,n,o),Object.assign({method:t,headers:a,referrerPolicy:"no-referrer"},r))}))}async function ei(e,t,n){e._canInitEmulator=!1;const i=Object.assign(Object.assign({},Zn),t);try{const t=new ri(e),r=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const s=await r.json();if("needConfirmation"in s)throw si(e,"account-exists-with-different-credential",s);if(r.ok&&!("errorMessage"in s))return s;{const t=r.ok?s.errorMessage:s.error.message,[n,o]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw si(e,"credential-already-in-use",s);if("EMAIL_EXISTS"===n)throw si(e,"email-already-in-use",s);if("USER_DISABLED"===n)throw si(e,"user-disabled",s);const a=i[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(o)throw Mn(e,a,o);In(e,a)}}catch(_F){if(_F instanceof qe)throw _F;In(e,"network-request-failed",{message:String(_F)})}}async function ti(e,t,n,i){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const s=await Jn(e,t,n,i,r);return"mfaPendingCredential"in s&&In(e,"multi-factor-auth-required",{_serverResponse:s}),s}function ni(e,t,n,i){const r="".concat(t).concat(n,"?").concat(i);return e.config.emulator?Yn(e.config,r):"".concat(e.config.apiScheme,"://").concat(r)}function ii(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class ri{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise(((e,t)=>{this.timer=setTimeout((()=>t(Dn(this.auth,"network-request-failed"))),Hn.get())}))}clearNetworkTimeout(){clearTimeout(this.timer)}}function si(e,t,n){const i={appName:e.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const r=Dn(e,t,i);return r.customData._tokenResponse=n,r}function oi(e){return void 0!==e&&void 0!==e.enterprise}class ai{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return ii(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}}async function li(e,t){return Jn(e,"GET","/v2/recaptchaConfig",Kn(e,t))}async function hi(e,t){return Jn(e,"POST","/v1/accounts:lookup",t)}function ci(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(_F){}}function ui(e){return 1e3*Number(e)}function di(e){const[t,n,i]=e.split(".");if(void 0===t||void 0===n||void 0===i)return Nn("JWT malformed, contained fewer than 3 sections"),null;try{const e=Ce(n);return e?JSON.parse(e):(Nn("Failed to decode base64 JWT payload"),null)}catch(_F){return Nn("Caught error parsing JWT payload as JSON",null===_F||void 0===_F?void 0:_F.toString()),null}}function fi(e){const t=di(e);return qn(t,"internal-error"),qn("undefined"!==typeof t.exp,"internal-error"),qn("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}async function pi(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return t;try{return await t}catch(_F){throw _F instanceof qe&&function(e){let{code:t}=e;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}(_F)&&e.auth.currentUser===e&&await e.auth.signOut(),_F}}class gi{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout((async()=>{await this.iteration()}),t)}async iteration(){try{await this.user.getIdToken(!0)}catch(_F){return void((null===_F||void 0===_F?void 0:_F.code)==="auth/".concat("network-request-failed")&&this.schedule(!0))}this.schedule()}}class mi{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=ci(this.lastLoginAt),this.creationTime=ci(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Oi(e){var t;const n=e.auth,i=await e.getIdToken(),r=await pi(e,hi(n,{idToken:i}));qn(null===r||void 0===r?void 0:r.users.length,n,"internal-error");const s=r.users[0];e._notifyReloadListener(s);const o=(null===(t=s.providerUserInfo)||void 0===t?void 0:t.length)?vi(s.providerUserInfo):[],a=(l=e.providerData,h=o,[...l.filter((e=>!h.some((t=>t.providerId===e.providerId)))),...h]);var l,h;const c=e.isAnonymous,u=!(e.email&&s.passwordHash)&&!(null===a||void 0===a?void 0:a.length),d=!!c&&u,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new mi(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(e,f)}function vi(e){return e.map((e=>{var{providerId:t}=e,n=Cn(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}}))}class yi{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){qn(e.idToken,"internal-error"),qn("undefined"!==typeof e.idToken,"internal-error"),qn("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):fi(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){qn(0!==e.length,"internal-error");const t=fi(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]||!this.accessToken||this.isExpired?(qn(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null):this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:i,expiresIn:r}=await async function(e,t){const n=await ei(e,{},(async()=>{const n=Fe({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:i,apiKey:r}=e.config,s=ni(e,i,"/v1/token","key=".concat(r)),o=await e._getAdditionalHeaders();return o["Content-Type"]="application/x-www-form-urlencoded",Gn.fetch()(s,{method:"POST",headers:o,body:n})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,i,Number(r))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:i,expirationTime:r}=t,s=new yi;return n&&(qn("string"===typeof n,"internal-error",{appName:e}),s.refreshToken=n),i&&(qn("string"===typeof i,"internal-error",{appName:e}),s.accessToken=i),r&&(qn("number"===typeof r,"internal-error",{appName:e}),s.expirationTime=r),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new yi,this.toJSON())}_performRefresh(){return Vn("not implemented")}}function bi(e,t){qn("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class wi{constructor(e){var{uid:t,auth:n,stsTokenManager:i}=e,r=Cn(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new gi(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new mi(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(e){const t=await pi(this,this.stsTokenManager.getToken(this.auth,e));return qn(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=Ze(e),i=await n.getIdToken(t),r=di(i);qn(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const s="object"===typeof r.firebase?r.firebase:void 0,o=null===s||void 0===s?void 0:s.sign_in_provider;return{claims:r,token:i,authTime:ci(ui(r.auth_time)),issuedAtTime:ci(ui(r.iat)),expirationTime:ci(ui(r.exp)),signInProvider:o||null,signInSecondFactor:(null===s||void 0===s?void 0:s.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=Ze(e);await Oi(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(qn(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((e=>Object.assign({},e))),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new wi(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){qn(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await Oi(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(hn(this.auth.app))return Promise.reject(Ln(this.auth));const e=await this.getIdToken();return await pi(this,async function(e,t){return Jn(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((e=>Object.assign({},e))),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,i,r,s,o,a,l,h;const c=null!==(n=t.displayName)&&void 0!==n?n:void 0,u=null!==(i=t.email)&&void 0!==i?i:void 0,d=null!==(r=t.phoneNumber)&&void 0!==r?r:void 0,f=null!==(s=t.photoURL)&&void 0!==s?s:void 0,p=null!==(o=t.tenantId)&&void 0!==o?o:void 0,g=null!==(a=t._redirectEventId)&&void 0!==a?a:void 0,m=null!==(l=t.createdAt)&&void 0!==l?l:void 0,O=null!==(h=t.lastLoginAt)&&void 0!==h?h:void 0,{uid:v,emailVerified:y,isAnonymous:b,providerData:w,stsTokenManager:k}=t;qn(v&&k,e,"internal-error");const S=yi.fromJSON(this.name,k);qn("string"===typeof v,e,"internal-error"),bi(c,e.name),bi(u,e.name),qn("boolean"===typeof y,e,"internal-error"),qn("boolean"===typeof b,e,"internal-error"),bi(d,e.name),bi(f,e.name),bi(p,e.name),bi(g,e.name),bi(m,e.name),bi(O,e.name);const x=new wi({uid:v,auth:e,email:u,emailVerified:y,displayName:c,isAnonymous:b,photoURL:f,phoneNumber:d,tenantId:p,stsTokenManager:S,createdAt:m,lastLoginAt:O});return w&&Array.isArray(w)&&(x.providerData=w.map((e=>Object.assign({},e)))),g&&(x._redirectEventId=g),x}static async _fromIdTokenResponse(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const i=new yi;i.updateFromServerResponse(t);const r=new wi({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:n});return await Oi(r),r}static async _fromGetAccountInfoResponse(e,t,n){const i=t.users[0];qn(void 0!==i.localId,"internal-error");const r=void 0!==i.providerUserInfo?vi(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!(null===r||void 0===r?void 0:r.length),o=new yi;o.updateFromIdToken(n);const a=new wi({uid:i.localId,auth:e,stsTokenManager:o,isAnonymous:s}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:r,metadata:new mi(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(null===r||void 0===r?void 0:r.length)};return Object.assign(a,l),a}}const ki=new Map;function Si(e){zn(e instanceof Function,"Expected a class definition");let t=ki.get(e);return t?(zn(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,ki.set(e,t),t)}class xi{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}xi.type="NONE";const Ti=xi;function _i(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}class Pi{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:i,name:r}=this.auth;this.fullUserKey=_i(this.userKey,i.apiKey,r),this.fullPersistenceKey=_i("persistence",i.apiKey,r),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?wi._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!t.length)return new Pi(Si(Ti),e,n);const i=(await Promise.all(t.map((async e=>{if(await e._isAvailable())return e})))).filter((e=>e));let r=i[0]||Si(Ti);const s=_i(n,e.config.apiKey,e.name);let o=null;for(const l of t)try{const t=await l._get(s);if(t){const n=wi._fromJSON(e,t);l!==r&&(o=n),r=l;break}}catch(Lx){}const a=i.filter((e=>e._shouldAllowMigration));return r._shouldAllowMigration&&a.length?(r=a[0],o&&await r._set(s,o.toJSON()),await Promise.all(t.map((async e=>{if(e!==r)try{await e._remove(s)}catch(Lx){}}))),new Pi(r,e,n)):new Pi(r,e,n)}}function Ci(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(Ri(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Ei(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(Ii(t))return"Blackberry";if(Di(t))return"Webos";if(Qi(t))return"Safari";if((t.includes("chrome/")||Ai(t))&&!t.includes("edge/"))return"Chrome";if(Ni(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function Ei(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Le();return/firefox\//i.test(e)}function Qi(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:Le()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Ai(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Le();return/crios\//i.test(e)}function Ri(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Le();return/iemobile/i.test(e)}function Ni(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Le();return/android/i.test(e)}function Ii(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Le();return/blackberry/i.test(e)}function Di(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Le();return/webos/i.test(e)}function Mi(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Le();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function Li(){return function(){const e=Le();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}()&&10===document.documentMode}function $i(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Le();return Mi(e)||Ni(e)||Di(e)||Ii(e)||/windows phone/i.test(e)||Ri(e)}function Ui(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=Ci(Le());break;case"Worker":t="".concat(Ci(Le()),"-").concat(e);break;default:t=e}const i=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(dn,"/").concat(i)}class qi{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise(((n,i)=>{try{n(e(t))}catch(_F){i(_F)}}));n.onAbort=t,this.queue.push(n);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(_F){t.reverse();for(const i of t)try{i()}catch(n){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===_F||void 0===_F?void 0:_F.message})}}}class Vi{constructor(e){var t,n,i,r;const s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=s.minPasswordLength)&&void 0!==t?t:6,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),void 0!==s.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),void 0!==s.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),void 0!==s.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),void 0!==s.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(i=null===(n=e.allowedNonAlphanumericCharacters)||void 0===n?void 0:n.join(""))&&void 0!==i?i:"",this.forceUpgradeOnSignin=null!==(r=e.forceUpgradeOnSignin)&&void 0!==r&&r,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,i,r,s,o;const a={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,a),this.validatePasswordCharacterOptions(e,a),a.isValid&&(a.isValid=null===(t=a.meetsMinPasswordLength)||void 0===t||t),a.isValid&&(a.isValid=null===(n=a.meetsMaxPasswordLength)||void 0===n||n),a.isValid&&(a.isValid=null===(i=a.containsLowercaseLetter)||void 0===i||i),a.isValid&&(a.isValid=null===(r=a.containsUppercaseLetter)||void 0===r||r),a.isValid&&(a.isValid=null===(s=a.containsNumericCharacter)||void 0===s||s),a.isValid&&(a.isValid=null===(o=a.containsNonAlphanumericCharacter)||void 0===o||o),a}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){let n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let i=0;i<e.length;i++)n=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,i,r){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=r))}}class zi{constructor(e,t,n,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Bi(this),this.idTokenSubscription=new Bi(this),this.beforeStateQueue=new qi(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=An,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Si(t)),this._initializationPromise=this.queue((async()=>{var n,i;if(!this._deleted&&(this.persistenceManager=await Pi.create(this,e),!this._deleted)){if(null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(_F){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(i=this.currentUser)||void 0===i?void 0:i.uid)||null,this._deleted||(this._isInitialized=!0)}})),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUserFromIdToken(e){try{const t=await hi(this,{idToken:e}),n=await wi._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(hn(this.app)){const e=this.app.settings.authIdToken;return e?new Promise((t=>{setTimeout((()=>this.initializeCurrentUserFromIdToken(e).then(t,t)))})):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let i=n,r=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,s=null===i||void 0===i?void 0:i._redirectEventId,o=await this.tryRedirectSignIn(e);n&&n!==s||!(null===o||void 0===o?void 0:o.user)||(i=o.user,r=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(i)}catch(_F){i=n,this._popupRedirectResolver._overrideRedirectResult(this,(()=>Promise.reject(_F)))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return qn(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(_F){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Oi(e)}catch(_F){if((null===_F||void 0===_F?void 0:_F.code)!=="auth/".concat("network-request-failed"))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(hn(this.app))return Promise.reject(Ln(this));const t=e?Ze(e):null;return t&&qn(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return e&&qn(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue((async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()}))}async signOut(){return hn(this.app)?Promise.reject(Ln(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return hn(this.app)?Promise.reject(Ln(this)):this.queue((async()=>{await this.assertedPersistence.setPersistence(Si(e))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e){return Jn(e,"GET","/v2/passwordPolicy",Kn(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}(this),t=new Vi(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Ve("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise(((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged((()=>{n(),e()}),t)}}))}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await async function(e,t){return Jn(e,"POST","/v2/accounts:revokeToken",Kn(e,t))}(this,t)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Si(e)||this._popupRedirectResolver;qn(t,this,"argument-error"),this.redirectPersistenceManager=await Pi.create(this,[Si(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue((async()=>{})),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue((async()=>this.directlySetCurrentUser(e)))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,i){if(this._deleted)return()=>{};const r="function"===typeof t?t:t.next.bind(t);let s=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(qn(o,this,"internal-error"),o.then((()=>{s||r(this.currentUser)})),"function"===typeof t){const r=e.addObserver(t,n,i);return()=>{s=!0,r()}}{const n=e.addObserver(t);return()=>{s=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return qn(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Ui(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const i=await this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t}async _getAppCheckToken(){var e;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return(null===t||void 0===t?void 0:t.error)&&function(e){if(Rn.logLevel<=nt.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];Rn.warn("Auth (".concat(dn,"): ").concat(e),...n)}}("Error while retrieving App Check token: ".concat(t.error)),null===t||void 0===t?void 0:t.token}}function ji(e){return Ze(e)}class Bi{constructor(e){this.auth=e,this.observer=null,this.addObserver=function(e,t){const n=new Ye(e,t);return n.subscribe.bind(n)}((e=>this.observer=e))}get next(){return qn(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Fi={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Wi(e){return Fi.loadJS(e)}function Xi(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}class Yi{constructor(e){this.type="recaptcha-enterprise",this.auth=ji(e)}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(t,n,i){const r=window.grecaptcha;oi(r)?r.enterprise.ready((()=>{r.enterprise.execute(t,{action:e}).then((e=>{n(e)})).catch((()=>{n("NO_RECAPTCHA")}))})):i(Error("No reCAPTCHA enterprise script loaded."))}return new Promise(((e,i)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise((async(t,n)=>{li(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then((i=>{if(void 0!==i.recaptchaKey){const n=new ai(i);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))})).catch((e=>{n(e)}))}))})(this.auth).then((r=>{if(!t&&oi(window.grecaptcha))n(r,e,i);else{if("undefined"===typeof window)return void i(new Error("RecaptchaVerifier is only supported in browser"));let t=Fi.recaptchaEnterpriseScript;0!==t.length&&(t+=r),Wi(t).then((()=>{n(r,e,i)})).catch((e=>{i(e)}))}})).catch((e=>{i(e)}))}))}}async function Gi(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const r=new Yi(e);let s;try{s=await r.verify(n)}catch(a){s=await r.verify(n,!0)}const o=Object.assign({},t);return i?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function Zi(e,t,n,i){var r;if(null===(r=e._getRecaptchaConfig())||void 0===r?void 0:r.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const r=await Gi(e,t,n,"getOobCode"===n);return i(e,r)}return i(e,t).catch((async r=>{if(r.code==="auth/".concat("missing-recaptcha-token")){console.log("".concat(n," is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow."));const r=await Gi(e,t,n,"getOobCode"===n);return i(e,r)}return Promise.reject(r)}))}function Hi(e,t,n){const i=ji(e);qn(i._canInitEmulator,i,"emulator-config-failed"),qn(/^https?:\/\//.test(t),i,"invalid-emulator-scheme");const r=!!(null===n||void 0===n?void 0:n.disableWarnings),s=Ki(t),{host:o,port:a}=function(e){const t=Ki(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){const e=r[1];return{host:e,port:Ji(i.substr(e.length+1))}}{const[e,t]=i.split(":");return{host:e,port:Ji(t)}}}(t),l=null===a?"":":".concat(a);i.config.emulator={url:"".concat(s,"//").concat(o).concat(l,"/")},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:r})}),r||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function Ki(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function Ji(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class er{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Vn("not implemented")}_getIdTokenResponse(e){return Vn("not implemented")}_linkToIdToken(e,t){return Vn("not implemented")}_getReauthenticationResolver(e){return Vn("not implemented")}}async function tr(e,t){return Jn(e,"POST","/v1/accounts:signUp",t)}async function nr(e,t){return ti(e,"POST","/v1/accounts:signInWithPassword",Kn(e,t))}class ir extends er{constructor(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",n),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new ir(e,t,"password")}static _fromEmailAndCode(e,t){return new ir(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return Zi(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",nr);case"emailLink":return async function(e,t){return ti(e,"POST","/v1/accounts:signInWithEmailLink",Kn(e,t))}(e,{email:this._email,oobCode:this._password});default:In(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return Zi(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",tr);case"emailLink":return async function(e,t){return ti(e,"POST","/v1/accounts:signInWithEmailLink",Kn(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:In(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function rr(e,t){return ti(e,"POST","/v1/accounts:signInWithIdp",Kn(e,t))}class sr extends er{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new sr(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):In("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:i}=t,r=Cn(t,["providerId","signInMethod"]);if(!n||!i)return null;const s=new sr(n,i);return s.idToken=r.idToken||void 0,s.accessToken=r.accessToken||void 0,s.secret=r.secret,s.nonce=r.nonce,s.pendingToken=r.pendingToken||null,s}_getIdTokenResponse(e){return rr(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,rr(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,rr(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Fe(t)}return e}}const or={USER_NOT_FOUND:"user-not-found"};class ar extends er{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new ar({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new ar({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return ti(e,"POST","/v1/accounts:signInWithPhoneNumber",Kn(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await ti(e,"POST","/v1/accounts:signInWithPhoneNumber",Kn(e,t));if(n.temporaryProof)throw si(e,"account-exists-with-different-credential",n);return n}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return ti(e,"POST","/v1/accounts:signInWithPhoneNumber",Kn(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),or)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:i}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:i}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:i,temporaryProof:r}=e;return n||t||i||r?new ar({verificationId:t,verificationCode:n,phoneNumber:i,temporaryProof:r}):null}}class lr{constructor(e){var t,n,i,r,s,o;const a=We(Xe(e)),l=null!==(t=a.apiKey)&&void 0!==t?t:null,h=null!==(n=a.oobCode)&&void 0!==n?n:null,c=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(i=a.mode)&&void 0!==i?i:null);qn(l&&h&&c,"argument-error"),this.apiKey=l,this.operation=c,this.code=h,this.continueUrl=null!==(r=a.continueUrl)&&void 0!==r?r:null,this.languageCode=null!==(s=a.languageCode)&&void 0!==s?s:null,this.tenantId=null!==(o=a.tenantId)&&void 0!==o?o:null}static parseLink(e){const t=function(e){const t=We(Xe(e)).link,n=t?We(Xe(t)).deep_link_id:null,i=We(Xe(e)).deep_link_id;return(i?We(Xe(i)).link:null)||i||n||t||e}(e);try{return new lr(t)}catch(Lx){return null}}}class hr{constructor(){this.providerId=hr.PROVIDER_ID}static credential(e,t){return ir._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=lr.parseLink(t);return qn(n,"argument-error"),ir._fromEmailAndCode(e,n.code,n.tenantId)}}hr.PROVIDER_ID="password",hr.EMAIL_PASSWORD_SIGN_IN_METHOD="password",hr.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class cr{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class ur extends cr{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class dr extends ur{constructor(){super("facebook.com")}static credential(e){return sr._fromParams({providerId:dr.PROVIDER_ID,signInMethod:dr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return dr.credentialFromTaggedObject(e)}static credentialFromError(e){return dr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return dr.credential(t.oauthAccessToken)}catch(Lx){return null}}}dr.FACEBOOK_SIGN_IN_METHOD="facebook.com",dr.PROVIDER_ID="facebook.com";class fr extends ur{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return sr._fromParams({providerId:fr.PROVIDER_ID,signInMethod:fr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return fr.credentialFromTaggedObject(e)}static credentialFromError(e){return fr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:i}=t;if(!n&&!i)return null;try{return fr.credential(n,i)}catch(Lx){return null}}}fr.GOOGLE_SIGN_IN_METHOD="google.com",fr.PROVIDER_ID="google.com";class pr extends ur{constructor(){super("github.com")}static credential(e){return sr._fromParams({providerId:pr.PROVIDER_ID,signInMethod:pr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return pr.credentialFromTaggedObject(e)}static credentialFromError(e){return pr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return pr.credential(t.oauthAccessToken)}catch(Lx){return null}}}pr.GITHUB_SIGN_IN_METHOD="github.com",pr.PROVIDER_ID="github.com";class gr extends ur{constructor(){super("twitter.com")}static credential(e,t){return sr._fromParams({providerId:gr.PROVIDER_ID,signInMethod:gr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return gr.credentialFromTaggedObject(e)}static credentialFromError(e){return gr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=t;if(!n||!i)return null;try{return gr.credential(n,i)}catch(Lx){return null}}}async function mr(e,t){return ti(e,"POST","/v1/accounts:signUp",Kn(e,t))}gr.TWITTER_SIGN_IN_METHOD="twitter.com",gr.PROVIDER_ID="twitter.com";class Or{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const r=await wi._fromIdTokenResponse(e,n,i),s=vr(n);return new Or({user:r,providerId:s,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const i=vr(n);return new Or({user:e,providerId:i,_tokenResponse:n,operationType:t})}}function vr(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class yr extends qe{constructor(e,t,n,i){var r;super(t.code,t.message),this.operationType=n,this.user=i,Object.setPrototypeOf(this,yr.prototype),this.customData={appName:e.name,tenantId:null!==(r=e.tenantId)&&void 0!==r?r:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,i){return new yr(e,t,n,i)}}function br(e,t,n,i){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((n=>{if(n.code==="auth/".concat("multi-factor-auth-required"))throw yr._fromErrorAndOperation(e,n,t,i);throw n}))}async function wr(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const i=await pi(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return Or._forOperation(e,"link",i)}async function kr(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:i}=e;if(hn(i.app))return Promise.reject(Ln(i));const r="reauthenticate";try{const s=await pi(e,br(i,r,t,e),n);qn(s.idToken,i,"internal-error");const o=di(s.idToken);qn(o,i,"internal-error");const{sub:a}=o;return qn(e.uid===a,i,"user-mismatch"),Or._forOperation(e,r,s)}catch(_F){throw(null===_F||void 0===_F?void 0:_F.code)==="auth/".concat("user-not-found")&&In(i,"user-mismatch"),_F}}async function Sr(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(hn(e.app))return Promise.reject(Ln(e));const i="signIn",r=await br(e,i,t),s=await Or._fromIdTokenResponse(e,i,r);return n||await e._updateCurrentUser(s.user),s}async function xr(e,t){return Sr(ji(e),t)}async function Tr(e){const t=ji(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function _r(e,t,n){if(hn(e.app))return Promise.reject(Ln(e));const i=ji(e),r=Zi(i,{returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",mr),s=await r.catch((t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&Tr(e),t})),o=await Or._fromIdTokenResponse(i,"signIn",s);return await i._updateCurrentUser(o.user),o}new WeakMap;const Pr="__sak";class Cr{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Pr,"1"),this.storage.removeItem(Pr),Promise.resolve(!0)):Promise.resolve(!1)}catch(Lx){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class Er extends Cr{constructor(){super((()=>window.localStorage),"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const e=Le();return Qi(e)||Mi(e)}()&&function(){try{return!(!window||window===window.top)}catch(_F){return!1}}(),this.fallbackToPolling=$i(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),i=this.localCache[t];n!==i&&e(t,i,n)}}onStorageEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.key)return void this.forAllChangedKeys(((e,t,n)=>{this.notifyListeners(e,n)}));const n=e.key;if(t?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const i=this.storage.getItem(n);if(e.newValue!==i)null!==e.newValue?this.storage.setItem(n,e.newValue):this.storage.removeItem(n);else if(this.localCache[n]===e.newValue&&!t)return}const i=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},r=this.storage.getItem(n);Li()&&r!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,10):i()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const i of Array.from(n))i(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((()=>{this.forAllChangedKeys(((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)}))}),1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Er.type="LOCAL";const Qr=Er;class Ar extends Cr{constructor(){super((()=>window.sessionStorage),"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Ar.type="SESSION";const Rr=Ar;class Nr{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find((t=>t.isListeningto(e)));if(t)return t;const n=new Nr(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:i,data:r}=t.data,s=this.handlersMap[i];if(!(null===s||void 0===s?void 0:s.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:i});const o=Array.from(s).map((async e=>e(t.origin,r))),a=await function(e){return Promise.all(e.map((async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}})))}(o);t.ports[0].postMessage({status:"done",eventId:n,eventType:i,response:a})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function Ir(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="";for(let i=0;i<t;i++)n+=Math.floor(10*Math.random());return e+n}Nr.receivers=[];class Dr{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const i="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let r,s;return new Promise(((o,a)=>{const l=Ir("",20);i.port1.start();const h=setTimeout((()=>{a(new Error("unsupported_event"))}),n);s={messageChannel:i,onMessage(e){const t=e;if(t.data.eventId===l)switch(t.data.status){case"ack":clearTimeout(h),r=setTimeout((()=>{a(new Error("timeout"))}),3e3);break;case"done":clearTimeout(r),o(t.data.response);break;default:clearTimeout(h),clearTimeout(r),a(new Error("invalid_response"))}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[i.port2])})).finally((()=>{s&&this.removeMessageHandler(s)}))}}function Mr(){return window}function Lr(){return"undefined"!==typeof Mr().WorkerGlobalScope&&"function"===typeof Mr().importScripts}const $r="firebaseLocalStorageDb",Ur="firebaseLocalStorage",qr="fbase_key";class Vr{constructor(e){this.request=e}toPromise(){return new Promise(((e,t)=>{this.request.addEventListener("success",(()=>{e(this.request.result)})),this.request.addEventListener("error",(()=>{t(this.request.error)}))}))}}function zr(e,t){return e.transaction([Ur],t?"readwrite":"readonly").objectStore(Ur)}function jr(){const e=indexedDB.open($r,1);return new Promise(((t,n)=>{e.addEventListener("error",(()=>{n(e.error)})),e.addEventListener("upgradeneeded",(()=>{const t=e.result;try{t.createObjectStore(Ur,{keyPath:qr})}catch(_F){n(_F)}})),e.addEventListener("success",(async()=>{const n=e.result;n.objectStoreNames.contains(Ur)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase($r);return new Vr(e).toPromise()}(),t(await jr()))}))}))}async function Br(e,t,n){const i=zr(e,!0).put({[qr]:t,value:n});return new Vr(i).toPromise()}function Fr(e,t){const n=zr(e,!0).delete(t);return new Vr(n).toPromise()}class Wr{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((()=>{}),(()=>{}))}async _openDb(){return this.db||(this.db=await jr()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(_F){if(t++>3)throw _F;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Lr()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Nr._getInstance(Lr()?self:null),this.receiver._subscribe("keyChanged",(async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)}))),this.receiver._subscribe("ping",(async(e,t)=>["keyChanged"]))}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new Dr(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(Lx){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await jr();return await Br(e,Pr,"1"),await Fr(e,Pr),!0}catch(Lx){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite((async()=>(await this._withRetries((n=>Br(n,e,t))),this.localCache[e]=t,this.notifyServiceWorker(e))))}async _get(e){const t=await this._withRetries((t=>async function(e,t){const n=zr(e,!1).get(t),i=await new Vr(n).toPromise();return void 0===i?null:i.value}(t,e)));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite((async()=>(await this._withRetries((t=>Fr(t,e))),delete this.localCache[e],this.notifyServiceWorker(e))))}async _poll(){const e=await this._withRetries((e=>{const t=zr(e,!1).getAll();return new Vr(t).toPromise()}));if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;if(0!==e.length)for(const{fbase_key:i,value:r}of e)n.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(r)&&(this.notifyListeners(i,r),t.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!n.has(i)&&(this.notifyListeners(i,null),t.push(i));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const i of Array.from(n))i(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((async()=>this._poll()),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}Wr.type="LOCAL";const Xr=Wr;Xi("rcb"),new Xn(3e4,6e4);const Yr="recaptcha";async function Gr(e,t,n){var i;const r=await n.verify();try{let s;if(qn("string"===typeof r,e,"argument-error"),qn(n.type===Yr,e,"argument-error"),s="string"===typeof t?{phoneNumber:t}:t,"session"in s){const t=s.session;if("phoneNumber"in s){qn("enroll"===t.type,e,"internal-error");const n=await function(e,t){return Jn(e,"POST","/v2/accounts/mfaEnrollment:start",Kn(e,t))}(e,{idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,recaptchaToken:r}});return n.phoneSessionInfo.sessionInfo}{qn("signin"===t.type,e,"internal-error");const n=(null===(i=s.multiFactorHint)||void 0===i?void 0:i.uid)||s.multiFactorUid;qn(n,e,"missing-multi-factor-info");const o=await function(e,t){return Jn(e,"POST","/v2/accounts/mfaSignIn:start",Kn(e,t))}(e,{mfaPendingCredential:t.credential,mfaEnrollmentId:n,phoneSignInInfo:{recaptchaToken:r}});return o.phoneResponseInfo.sessionInfo}}{const{sessionInfo:t}=await async function(e,t){return Jn(e,"POST","/v1/accounts:sendVerificationCode",Kn(e,t))}(e,{phoneNumber:s.phoneNumber,recaptchaToken:r});return t}}finally{n._reset()}}class Zr{constructor(e){this.providerId=Zr.PROVIDER_ID,this.auth=ji(e)}verifyPhoneNumber(e,t){return Gr(this.auth,e,Ze(t))}static credential(e,t){return ar._fromVerification(e,t)}static credentialFromResult(e){const t=e;return Zr.credentialFromTaggedObject(t)}static credentialFromError(e){return Zr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{phoneNumber:n,temporaryProof:i}=t;return n&&i?ar._fromTokenResponse(n,i):null}}function Hr(e,t){return t?Si(t):(qn(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}Zr.PROVIDER_ID="phone",Zr.PHONE_SIGN_IN_METHOD="phone";class Kr extends er{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return rr(e,this._buildIdpRequest())}_linkToIdToken(e,t){return rr(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return rr(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function Jr(e){return Sr(e.auth,new Kr(e),e.bypassAuthState)}function es(e){const{auth:t,user:n}=e;return qn(n,t,"internal-error"),kr(n,new Kr(e),e.bypassAuthState)}async function ts(e){const{auth:t,user:n}=e;return qn(n,t,"internal-error"),wr(n,new Kr(e),e.bypassAuthState)}class ns{constructor(e,t,n,i){let r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=e,this.resolver=n,this.user=i,this.bypassAuthState=r,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(_F){this.reject(_F)}}))}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:i,tenantId:r,error:s,type:o}=e;if(s)return void this.reject(s);const a={auth:this.auth,requestUri:t,sessionId:n,tenantId:r||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(a))}catch(_F){this.reject(_F)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Jr;case"linkViaPopup":case"linkViaRedirect":return ts;case"reauthViaPopup":case"reauthViaRedirect":return es;default:In(this.auth,"internal-error")}}resolve(e){zn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){zn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const is=new Xn(2e3,1e4);async function rs(e,t,n){if(hn(e.app))return Promise.reject(Dn(e,"operation-not-supported-in-this-environment"));const i=ji(e);$n(e,t,cr);const r=Hr(i,n);return new ss(i,"signInViaPopup",t,r).executeNotNull()}class ss extends ns{constructor(e,t,n,i,r){super(e,t,i,r),this.provider=n,this.authWindow=null,this.pollId=null,ss.currentPopupAction&&ss.currentPopupAction.cancel(),ss.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return qn(e,this.auth,"internal-error"),e}async onExecution(){zn(1===this.filter.length,"Popup operations only handle one event");const e=Ir();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch((e=>{this.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(e=>{e||this.reject(Dn(this.auth,"web-storage-unsupported"))})),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(Dn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ss.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout((()=>{this.pollId=null,this.reject(Dn(this.auth,"popup-closed-by-user"))}),8e3):this.pollId=window.setTimeout(e,is.get())};e()}}ss.currentPopupAction=null;const os="pendingRedirect",as=new Map;class ls extends ns{constructor(e,t){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.eventId=null}async execute(){let e=as.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=us(t),i=cs(e);if(!await i._isAvailable())return!1;const r="true"===await i._get(n);return await i._remove(n),r}(this.resolver,this.auth),n=t?await super.execute():null;e=()=>Promise.resolve(n)}catch(_F){e=()=>Promise.reject(_F)}as.set(this.auth._key(),e)}return this.bypassAuthState||as.set(this.auth._key(),(()=>Promise.resolve(null))),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function hs(e,t){as.set(e._key(),t)}function cs(e){return Si(e._redirectPersistence)}function us(e){return _i(os,e.config.apiKey,e.name)}async function ds(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(hn(e.app))return Promise.reject(Ln(e));const i=ji(e),r=Hr(i,t),s=new ls(i,r,n),o=await s.execute();return o&&!n&&(delete o.user._redirectEventId,await i._persistUserIfCurrent(o.user),await i._setRedirectUser(null,t)),o}class fs{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach((n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return gs(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!gs(e)){const i=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(Dn(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(ps(e))}saveEventToCache(e){this.cachedEventUids.add(ps(e)),this.lastProcessedEventTime=Date.now()}}function ps(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((e=>e)).join("-")}function gs(e){let{type:t,error:n}=e;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}const ms=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Os=/^https?/;async function vs(e){if(e.config.emulator)return;const{authorizedDomains:t}=await async function(e){return Jn(e,"GET","/v1/projects",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}(e);for(const n of t)try{if(ys(n))return}catch(Lx){}In(e,"unauthorized-domain")}function ys(e){const t=jn(),{protocol:n,hostname:i}=new URL(t);if(e.startsWith("chrome-extension://")){const r=new URL(e);return""===r.hostname&&""===i?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&r.hostname===i}if(!Os.test(n))return!1;if(ms.test(e))return i===e;const r=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}const bs=new Xn(3e4,6e4);function ws(){const e=Mr().___jsl;if(null===e||void 0===e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}function ks(e){return new Promise(((t,n)=>{var i,r,s;function o(){ws(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{ws(),n(Dn(e,"network-request-failed"))},timeout:bs.get()})}if(null===(r=null===(i=Mr().gapi)||void 0===i?void 0:i.iframes)||void 0===r?void 0:r.Iframe)t(gapi.iframes.getContext());else{if(!(null===(s=Mr().gapi)||void 0===s?void 0:s.load)){const t=Xi("iframefcb");return Mr()[t]=()=>{gapi.load?o():n(Dn(e,"network-request-failed"))},Wi("".concat(Fi.gapiScript,"?onload=").concat(t)).catch((e=>n(e)))}o()}})).catch((e=>{throw Ss=null,e}))}let Ss=null;const xs=new Xn(5e3,15e3),Ts="__/auth/iframe",_s="emulator/auth/iframe",Ps={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Cs=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Es(e){const t=e.config;qn(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?Yn(t,_s):"https://".concat(e.config.authDomain,"/").concat(Ts),i={apiKey:t.apiKey,appName:e.name,v:dn},r=Cs.get(e.config.apiHost);r&&(i.eid=r);const s=e._getFrameworks();return s.length&&(i.fw=s.join(",")),"".concat(n,"?").concat(Fe(i).slice(1))}async function Qs(e){const t=await function(e){return Ss=Ss||ks(e),Ss}(e),n=Mr().gapi;return qn(n,e,"internal-error"),t.open({where:document.body,url:Es(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Ps,dontclear:!0},(t=>new Promise((async(n,i)=>{await t.restyle({setHideOnLeave:!1});const r=Dn(e,"network-request-failed"),s=Mr().setTimeout((()=>{i(r)}),xs.get());function o(){Mr().clearTimeout(s),n(t)}t.ping(o).then(o,(()=>{i(r)}))}))))}const As={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Rs{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(_F){}}}function Ns(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;const s=Math.max((window.screen.availHeight-r)/2,0).toString(),o=Math.max((window.screen.availWidth-i)/2,0).toString();let a="";const l=Object.assign(Object.assign({},As),{width:i.toString(),height:r.toString(),top:s,left:o}),h=Le().toLowerCase();n&&(a=Ai(h)?"_blank":n),Ei(h)&&(t=t||"http://localhost",l.scrollbars="yes");const c=Object.entries(l).reduce(((e,t)=>{let[n,i]=t;return"".concat(e).concat(n,"=").concat(i,",")}),"");if(function(){var e;return Mi(arguments.length>0&&void 0!==arguments[0]?arguments[0]:Le())&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(h)&&"_self"!==a)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}(t||"",a),new Rs(null);const u=window.open(t||"",a,c);qn(u,e,"popup-blocked");try{u.focus()}catch(_F){}return new Rs(u)}const Is="__/auth/handler",Ds="emulator/auth/handler",Ms=encodeURIComponent("fac");async function Ls(e,t,n,i,r,s){qn(e.config.authDomain,e,"auth-domain-config-required"),qn(e.config.apiKey,e,"invalid-api-key");const o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:i,v:dn,eventId:r};if(t instanceof cr){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(s||{}))o[e]=t}if(t instanceof ur){const e=t.getScopes().filter((e=>""!==e));e.length>0&&(o.scopes=e.join(","))}e.tenantId&&(o.tid=e.tenantId);const a=o;for(const c of Object.keys(a))void 0===a[c]&&delete a[c];const l=await e._getAppCheckToken(),h=l?"#".concat(Ms,"=").concat(encodeURIComponent(l)):"";return"".concat(function(e){let{config:t}=e;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(Is);return Yn(t,Ds)}(e),"?").concat(Fe(a).slice(1)).concat(h)}const $s="webStorageSupport";const Us=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Rr,this._completeRedirectFn=ds,this._overrideRedirectResult=hs}async _openPopup(e,t,n,i){var r;zn(null===(r=this.eventManagers[e._key()])||void 0===r?void 0:r.manager,"_initialize() not called before _openPopup()");return Ns(e,await Ls(e,t,n,jn(),i),Ir())}async _openRedirect(e,t,n,i){await this._originValidation(e);return function(e){Mr().location.href=e}(await Ls(e,t,n,jn(),i)),new Promise((()=>{}))}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(zn(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch((()=>{delete this.eventManagers[t]})),n}async initAndGetManager(e){const t=await Qs(e),n=new fs(e);return t.register("authEvent",(t=>{qn(null===t||void 0===t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send($s,{type:$s},(n=>{var i;const r=null===(i=null===n||void 0===n?void 0:n[0])||void 0===i?void 0:i[$s];void 0!==r&&t(!!r),In(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=vs(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return $i()||Qi()||Mi()}};var qs="@firebase/auth",Vs="1.7.5";class zs{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged((t=>{e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){qn(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const js=Ie("authIdTokenMaxAge")||300;let Bs=null;var Fs,Ws;Fs={loadJS:e=>new Promise(((t,n)=>{const i=document.createElement("script");i.setAttribute("src",e),i.onload=t,i.onerror=e=>{const t=Dn("internal-error");t.customData=e,n(t)},i.type="text/javascript",i.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(i)})),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="},Fi=Fs,Ws="Browser",an(new He("auth",((e,t)=>{let{options:n}=t;const i=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=i.options;qn(o&&!o.includes(":"),"invalid-api-key",{appName:i.name});const l={apiKey:o,authDomain:a,clientPlatform:Ws,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Ui(Ws)},h=new zi(i,r,s,l);return function(e,t){const n=(null===t||void 0===t?void 0:t.persistence)||[],i=(Array.isArray(n)?n:[n]).map(Si);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(i,null===t||void 0===t?void 0:t.popupRedirectResolver)}(h,n),h}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(((e,t,n)=>{e.getProvider("auth-internal").initialize()}))),an(new He("auth-internal",(e=>(e=>new zs(e))(ji(e.getProvider("auth").getImmediate()))),"PRIVATE").setInstantiationMode("EXPLICIT")),gn(qs,Vs,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(Ws)),gn(qs,Vs,"esm2017");var Xs,Ys,Gs="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},Zs={};(function(){var e;function t(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function n(e,t,n){n||(n=0);var i=Array(16);if("string"===typeof t)for(var r=0;16>r;++r)i[r]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(r=0;16>r;++r)i[r]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],r=e.g[2];var s=e.g[3],o=t+(s^n&(r^s))+i[0]+3614090360&4294967295;o=(n=(r=(s=(t=(n=(r=(s=(t=(n=(r=(s=(t=(n=(r=(s=(t=(n=(r=(s=(t=(n=(r=(s=(t=(n=(r=(s=(t=(n=(r=(s=(t=(n=(r=(s=(t=(n=(r=(s=(t=(n=(r=(s=(t=(n=(r=(s=(t=(n=(r=(s=(t=(n=(r=(s=(t=(n=(r=(s=(t=n+(o<<7&4294967295|o>>>25))+((o=s+(r^t&(n^r))+i[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=r+(n^s&(t^n))+i[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^r&(s^t))+i[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(r^s))+i[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=s+(r^t&(n^r))+i[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=r+(n^s&(t^n))+i[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^r&(s^t))+i[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(r^s))+i[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=s+(r^t&(n^r))+i[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=r+(n^s&(t^n))+i[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^r&(s^t))+i[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(r^s))+i[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=s+(r^t&(n^r))+i[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=r+(n^s&(t^n))+i[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^r&(s^t))+i[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=t+(r^s&(n^r))+i[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^r&(t^n))+i[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=r+(t^n&(s^t))+i[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(r^s))+i[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=t+(r^s&(n^r))+i[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^r&(t^n))+i[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=r+(t^n&(s^t))+i[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(r^s))+i[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=t+(r^s&(n^r))+i[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^r&(t^n))+i[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=r+(t^n&(s^t))+i[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(r^s))+i[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=t+(r^s&(n^r))+i[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^r&(t^n))+i[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=r+(t^n&(s^t))+i[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(r^s))+i[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=t+(n^r^s)+i[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^r)+i[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=r+(s^t^n)+i[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=n+(r^s^t)+i[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^r^s)+i[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^r)+i[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=r+(s^t^n)+i[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=n+(r^s^t)+i[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^r^s)+i[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^r)+i[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=r+(s^t^n)+i[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=n+(r^s^t)+i[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^r^s)+i[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^r)+i[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=r+(s^t^n)+i[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=n+(r^s^t)+i[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=t+(r^(n|~s))+i[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~r))+i[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=r+(t^(s|~n))+i[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(r|~t))+i[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=t+(r^(n|~s))+i[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~r))+i[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=r+(t^(s|~n))+i[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(r|~t))+i[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=t+(r^(n|~s))+i[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~r))+i[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=r+(t^(s|~n))+i[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(r|~t))+i[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((s=(t=n+((o=t+(r^(n|~s))+i[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~r))+i[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((r=s+((o=r+(t^(s|~n))+i[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~t))+i[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(r+(o<<21&4294967295|o>>>11))&4294967295,e.g[2]=e.g[2]+r&4294967295,e.g[3]=e.g[3]+s&4294967295}function i(e,t){this.h=t;for(var n=[],i=!0,r=e.length-1;0<=r;r--){var s=0|e[r];i&&s==t||(n[r]=s,i=!1)}this.g=n}!function(e,t){function n(){}n.prototype=t.prototype,e.D=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.C=function(e,n,i){for(var r=Array(arguments.length-2),s=2;s<arguments.length;s++)r[s-2]=arguments[s];return t.prototype[n].apply(e,r)}}(t,(function(){this.blockSize=-1})),t.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},t.prototype.u=function(e,t){void 0===t&&(t=e.length);for(var i=t-this.blockSize,r=this.B,s=this.h,o=0;o<t;){if(0==s)for(;o<=i;)n(this,e,o),o+=this.blockSize;if("string"===typeof e){for(;o<t;)if(r[s++]=e.charCodeAt(o++),s==this.blockSize){n(this,r),s=0;break}}else for(;o<t;)if(r[s++]=e[o++],s==this.blockSize){n(this,r),s=0;break}}this.h=s,this.o+=t},t.prototype.v=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.o;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.u(e),e=Array(16),t=n=0;4>t;++t)for(var i=0;32>i;i+=8)e[n++]=this.g[t]>>>i&255;return e};var r={};function s(e){return-128<=e&&128>e?function(e,t){var n=r;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,(function(e){return new i([0|e],0>e?-1:0)})):new i([0|e],0>e?-1:0)}function o(e){if(isNaN(e)||!isFinite(e))return a;if(0>e)return d(o(-e));for(var t=[],n=1,r=0;e>=n;r++)t[r]=e/n|0,n*=4294967296;return new i(t,0)}var a=s(0),l=s(1),h=s(16777216);function c(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function u(e){return-1==e.h}function d(e){for(var t=e.g.length,n=[],r=0;r<t;r++)n[r]=~e.g[r];return new i(n,~e.h).add(l)}function f(e,t){return e.add(d(t))}function p(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function g(e,t){this.g=e,this.h=t}function m(e,t){if(c(t))throw Error("division by zero");if(c(e))return new g(a,a);if(u(e))return t=m(d(e),t),new g(d(t.g),d(t.h));if(u(t))return t=m(e,d(t)),new g(d(t.g),t.h);if(30<e.g.length){if(u(e)||u(t))throw Error("slowDivide_ only works with positive integers.");for(var n=l,i=t;0>=i.l(e);)n=O(n),i=O(i);var r=v(n,1),s=v(i,1);for(i=v(i,2),n=v(n,2);!c(i);){var h=s.add(i);0>=h.l(e)&&(r=r.add(n),s=h),i=v(i,1),n=v(n,1)}return t=f(e,r.j(t)),new g(r,t)}for(r=a;0<=e.l(t);){for(n=Math.max(1,Math.floor(e.m()/t.m())),i=48>=(i=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,i-48),h=(s=o(n)).j(t);u(h)||0<h.l(e);)h=(s=o(n-=i)).j(t);c(s)&&(s=l),r=r.add(s),e=f(e,h)}return new g(r,e)}function O(e){for(var t=e.g.length+1,n=[],r=0;r<t;r++)n[r]=e.i(r)<<1|e.i(r-1)>>>31;return new i(n,e.h)}function v(e,t){var n=t>>5;t%=32;for(var r=e.g.length-n,s=[],o=0;o<r;o++)s[o]=0<t?e.i(o+n)>>>t|e.i(o+n+1)<<32-t:e.i(o+n);return new i(s,e.h)}(e=i.prototype).m=function(){if(u(this))return-d(this).m();for(var e=0,t=1,n=0;n<this.g.length;n++){var i=this.i(n);e+=(0<=i?i:4294967296+i)*t,t*=4294967296}return e},e.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(c(this))return"0";if(u(this))return"-"+d(this).toString(e);for(var t=o(Math.pow(e,6)),n=this,i="";;){var r=m(n,t).g,s=((0<(n=f(n,r.j(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(c(n=r))return s+i;for(;6>s.length;)s="0"+s;i=s+i}},e.i=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},e.l=function(e){return u(e=f(this,e))?-1:c(e)?0:1},e.abs=function(){return u(this)?d(this):this},e.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0,s=0;s<=t;s++){var o=r+(65535&this.i(s))+(65535&e.i(s)),a=(o>>>16)+(this.i(s)>>>16)+(e.i(s)>>>16);r=a>>>16,o&=65535,a&=65535,n[s]=a<<16|o}return new i(n,-2147483648&n[n.length-1]?-1:0)},e.j=function(e){if(c(this)||c(e))return a;if(u(this))return u(e)?d(this).j(d(e)):d(d(this).j(e));if(u(e))return d(this.j(d(e)));if(0>this.l(h)&&0>e.l(h))return o(this.m()*e.m());for(var t=this.g.length+e.g.length,n=[],r=0;r<2*t;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var s=0;s<e.g.length;s++){var l=this.i(r)>>>16,f=65535&this.i(r),g=e.i(s)>>>16,m=65535&e.i(s);n[2*r+2*s]+=f*m,p(n,2*r+2*s),n[2*r+2*s+1]+=l*m,p(n,2*r+2*s+1),n[2*r+2*s+1]+=f*g,p(n,2*r+2*s+1),n[2*r+2*s+2]+=l*g,p(n,2*r+2*s+2)}for(r=0;r<t;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=t;r<2*t;r++)n[r]=0;return new i(n,0)},e.A=function(e){return m(this,e).h},e.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.i(r)&e.i(r);return new i(n,this.h&e.h)},e.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.i(r)|e.i(r);return new i(n,this.h|e.h)},e.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.i(r)^e.i(r);return new i(n,this.h^e.h)},t.prototype.digest=t.prototype.v,t.prototype.reset=t.prototype.s,t.prototype.update=t.prototype.u,Ys=Zs.Md5=t,i.prototype.add=i.prototype.add,i.prototype.multiply=i.prototype.j,i.prototype.modulo=i.prototype.A,i.prototype.compare=i.prototype.l,i.prototype.toNumber=i.prototype.m,i.prototype.toString=i.prototype.toString,i.prototype.getBits=i.prototype.i,i.fromNumber=o,i.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return d(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var i=o(Math.pow(n,8)),r=a,s=0;s<t.length;s+=8){var l=Math.min(8,t.length-s),h=parseInt(t.substring(s,s+l),n);8>l?(l=o(Math.pow(n,l)),r=r.j(l).add(o(h))):r=(r=r.j(i)).add(o(h))}return r},Xs=Zs.Integer=i}).apply("undefined"!==typeof Gs?Gs:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});var Hs,Ks,Js,eo,to,no,io,ro,so,oo="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},ao={};(function(){var e,t="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e};var n=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof oo&&oo];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}(this);!function(e,i){if(i)e:{var r=n;e=e.split(".");for(var s=0;s<e.length-1;s++){var o=e[s];if(!(o in r))break e;r=r[o]}(i=i(s=r[e=e[e.length-1]]))!=s&&null!=i&&t(r,e,{configurable:!0,writable:!0,value:i})}}("Array.prototype.values",(function(e){return e||function(){return function(e,t){e instanceof String&&(e+="");var n=0,i=!1,r={next:function(){if(!i&&n<e.length){var r=n++;return{value:t(r,e[r]),done:!1}}return i=!0,{done:!0,value:void 0}}};return r[Symbol.iterator]=function(){return r},r}(this,(function(e,t){return t}))}}));var i=i||{},r=this||self;function s(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function o(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function a(e,t,n){return e.call.apply(e.bind,arguments)}function l(e,t,n){if(!e)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,i),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function h(e,t,n){return(h=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?a:l).apply(null,arguments)}function c(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function u(e,t){function n(){}n.prototype=t.prototype,e.aa=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Qb=function(e,n,i){for(var r=Array(arguments.length-2),s=2;s<arguments.length;s++)r[s-2]=arguments[s];return t.prototype[n].apply(e,r)}}function d(e){const t=e.length;if(0<t){const n=Array(t);for(let i=0;i<t;i++)n[i]=e[i];return n}return[]}function f(e,t){for(let n=1;n<arguments.length;n++){const t=arguments[n];if(s(t)){const n=e.length||0,i=t.length||0;e.length=n+i;for(let r=0;r<i;r++)e[n+r]=t[r]}else e.push(t)}}function p(e){return/^[\s\xa0]*$/.test(e)}function g(){var e=r.navigator;return e&&(e=e.userAgent)?e:""}function m(e){return m[" "](e),e}m[" "]=function(){};var O=-1!=g().indexOf("Gecko")&&!(-1!=g().toLowerCase().indexOf("webkit")&&-1==g().indexOf("Edge"))&&!(-1!=g().indexOf("Trident")||-1!=g().indexOf("MSIE"))&&-1==g().indexOf("Edge");function v(e,t,n){for(const i in e)t.call(n,e[i],i,e)}function y(e){const t={};for(const n in e)t[n]=e[n];return t}const b="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function w(e,t){let n,i;for(let r=1;r<arguments.length;r++){for(n in i=arguments[r],i)e[n]=i[n];for(let t=0;t<b.length;t++)n=b[t],Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}}function k(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function S(e){r.setTimeout((()=>{throw e}),0)}function x(){var e=E;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var T=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}((()=>new _),(e=>e.reset()));class _{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}let P,C=!1,E=new class{constructor(){this.h=this.g=null}add(e,t){const n=T.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},Q=()=>{const e=r.Promise.resolve(void 0);P=()=>{e.then(A)}};var A=()=>{for(var e;e=x();){try{e.h.call(e.g)}catch(n){S(n)}var t=T;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}C=!1};function R(){this.s=this.s,this.C=this.C}function N(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}R.prototype.s=!1,R.prototype.ma=function(){this.s||(this.s=!0,this.N())},R.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},N.prototype.h=function(){this.defaultPrevented=!0};var I=function(){if(!r.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};r.addEventListener("test",e,t),r.removeEventListener("test",e,t)}catch(n){}return e}();function D(e,t){if(N.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,i=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(O){e:{try{m(t.nodeName);var r=!0;break e}catch(s){}r=!1}r||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,i?(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:M[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&D.aa.h.call(this)}}u(D,N);var M={2:"touch",3:"pen",4:"mouse"};D.prototype.h=function(){D.aa.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var L="closure_listenable_"+(1e6*Math.random()|0),$=0;function U(e,t,n,i,r){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!i,this.ha=r,this.key=++$,this.da=this.fa=!1}function q(e){e.da=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function V(e){this.src=e,this.g={},this.h=0}function z(e,t){var n=t.type;if(n in e.g){var i,r=e.g[n],s=Array.prototype.indexOf.call(r,t,void 0);(i=0<=s)&&Array.prototype.splice.call(r,s,1),i&&(q(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function j(e,t,n,i){for(var r=0;r<e.length;++r){var s=e[r];if(!s.da&&s.listener==t&&s.capture==!!n&&s.ha==i)return r}return-1}V.prototype.add=function(e,t,n,i,r){var s=e.toString();(e=this.g[s])||(e=this.g[s]=[],this.h++);var o=j(e,t,i,r);return-1<o?(t=e[o],n||(t.fa=!1)):((t=new U(t,this.src,s,!!i,r)).fa=n,e.push(t)),t};var B="closure_lm_"+(1e6*Math.random()|0),F={};function W(e,t,n,i,r){if(i&&i.once)return Y(e,t,n,i,r);if(Array.isArray(t)){for(var s=0;s<t.length;s++)W(e,t[s],n,i,r);return null}return n=te(n),e&&e[L]?e.K(t,n,o(i)?!!i.capture:!!i,r):X(e,t,n,!1,i,r)}function X(e,t,n,i,r,s){if(!t)throw Error("Invalid event type");var a=o(r)?!!r.capture:!!r,l=J(e);if(l||(e[B]=l=new V(e)),(n=l.add(t,n,i,a,s)).proxy)return n;if(i=function(){function e(n){return t.call(e.src,e.listener,n)}const t=K;return e}(),n.proxy=i,i.src=e,i.listener=n,e.addEventListener)I||(r=a),void 0===r&&(r=!1),e.addEventListener(t.toString(),i,r);else if(e.attachEvent)e.attachEvent(H(t.toString()),i);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(i)}return n}function Y(e,t,n,i,r){if(Array.isArray(t)){for(var s=0;s<t.length;s++)Y(e,t[s],n,i,r);return null}return n=te(n),e&&e[L]?e.L(t,n,o(i)?!!i.capture:!!i,r):X(e,t,n,!0,i,r)}function G(e,t,n,i,r){if(Array.isArray(t))for(var s=0;s<t.length;s++)G(e,t[s],n,i,r);else i=o(i)?!!i.capture:!!i,n=te(n),e&&e[L]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=j(s=e.g[t],n,i,r))&&(q(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete e.g[t],e.h--)))):e&&(e=J(e))&&(t=e.g[t.toString()],e=-1,t&&(e=j(t,n,i,r)),(n=-1<e?t[e]:null)&&Z(n))}function Z(e){if("number"!==typeof e&&e&&!e.da){var t=e.src;if(t&&t[L])z(t.i,e);else{var n=e.type,i=e.proxy;t.removeEventListener?t.removeEventListener(n,i,e.capture):t.detachEvent?t.detachEvent(H(n),i):t.addListener&&t.removeListener&&t.removeListener(i),(n=J(t))?(z(n,e),0==n.h&&(n.src=null,t[B]=null)):q(e)}}}function H(e){return e in F?F[e]:F[e]="on"+e}function K(e,t){if(e.da)e=!0;else{t=new D(t,this);var n=e.listener,i=e.ha||e.src;e.fa&&Z(e),e=n.call(i,t)}return e}function J(e){return(e=e[B])instanceof V?e:null}var ee="__closure_events_fn_"+(1e9*Math.random()>>>0);function te(e){return"function"===typeof e?e:(e[ee]||(e[ee]=function(t){return e.handleEvent(t)}),e[ee])}function ne(){R.call(this),this.i=new V(this),this.M=this,this.F=null}function ie(e,t){var n,i=e.F;if(i)for(n=[];i;i=i.F)n.push(i);if(e=e.M,i=t.type||t,"string"===typeof t)t=new N(t,e);else if(t instanceof N)t.target=t.target||e;else{var r=t;w(t=new N(i,e),r)}if(r=!0,n)for(var s=n.length-1;0<=s;s--){var o=t.g=n[s];r=re(o,i,!0,t)&&r}if(r=re(o=t.g=e,i,!0,t)&&r,r=re(o,i,!1,t)&&r,n)for(s=0;s<n.length;s++)r=re(o=t.g=n[s],i,!1,t)&&r}function re(e,t,n,i){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var r=!0,s=0;s<t.length;++s){var o=t[s];if(o&&!o.da&&o.capture==n){var a=o.listener,l=o.ha||o.src;o.fa&&z(e.i,o),r=!1!==a.call(l,i)&&r}}return r&&!i.defaultPrevented}function se(e,t,n){if("function"===typeof e)n&&(e=h(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=h(e.handleEvent,e)}return 2147483647<Number(t)?-1:r.setTimeout(e,t||0)}function oe(e){e.g=se((()=>{e.g=null,e.i&&(e.i=!1,oe(e))}),e.l);const t=e.h;e.h=null,e.m.apply(null,t)}u(ne,R),ne.prototype[L]=!0,ne.prototype.removeEventListener=function(e,t,n,i){G(this,e,t,n,i)},ne.prototype.N=function(){if(ne.aa.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],i=0;i<n.length;i++)q(n[i]);delete t.g[e],t.h--}}this.F=null},ne.prototype.K=function(e,t,n,i){return this.i.add(String(e),t,!1,n,i)},ne.prototype.L=function(e,t,n,i){return this.i.add(String(e),t,!0,n,i)};class ae extends R{constructor(e,t){super(),this.m=e,this.l=t,this.h=null,this.i=!1,this.g=null}j(e){this.h=arguments,this.g?this.i=!0:oe(this)}N(){super.N(),this.g&&(r.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function le(e){R.call(this),this.h=e,this.g={}}u(le,R);var he=[];function ce(e){v(e.g,(function(e,t){this.g.hasOwnProperty(t)&&Z(e)}),e),e.g={}}le.prototype.N=function(){le.aa.N.call(this),ce(this)},le.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ue=r.JSON.stringify,de=r.JSON.parse,fe=class{stringify(e){return r.JSON.stringify(e,void 0)}parse(e){return r.JSON.parse(e,void 0)}};function pe(){}function ge(e){return e.h||(e.h=e.i())}function me(){}pe.prototype.h=null;var Oe={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ve(){N.call(this,"d")}function ye(){N.call(this,"c")}u(ve,N),u(ye,N);var be={},we=null;function ke(){return we=we||new ne}function Se(e){N.call(this,be.La,e)}function xe(e){const t=ke();ie(t,new Se(t))}function Te(e,t){N.call(this,be.STAT_EVENT,e),this.stat=t}function _e(e){const t=ke();ie(t,new Te(t,e))}function Pe(e,t){N.call(this,be.Ma,e),this.size=t}function Ce(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return r.setTimeout((function(){e()}),t)}function Ee(){this.g=!0}function Qe(e,t,n,i){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var i=n[e];if(!(2>i.length)){var r=i[1];if(Array.isArray(r)&&!(1>r.length)){var s=r[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<r.length;o++)r[o]=""}}}return ue(n)}catch(a){return t}}(e,n)+(i?" "+i:"")}))}be.La="serverreachability",u(Se,N),be.STAT_EVENT="statevent",u(Te,N),be.Ma="timingevent",u(Pe,N),Ee.prototype.xa=function(){this.g=!1},Ee.prototype.info=function(){};var Ae,Re={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Ne={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function Ie(){}function De(e,t,n,i){this.j=e,this.i=t,this.l=n,this.R=i||1,this.U=new le(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Me}function Me(){this.i=null,this.g="",this.h=!1}u(Ie,pe),Ie.prototype.g=function(){return new XMLHttpRequest},Ie.prototype.i=function(){return{}},Ae=new Ie;var Le={},$e={};function Ue(e,t,n){e.L=1,e.v=ut(ot(t)),e.m=n,e.P=!0,qe(e,null)}function qe(e,t){e.F=Date.now(),je(e),e.A=ot(e.v);var n=e.A,i=e.R;Array.isArray(i)||(i=[String(i)]),Tt(n.i,"t",i),e.C=0,n=e.j.J,e.h=new Me,e.g=fn(e.j,n?t:null,!e.m),0<e.O&&(e.M=new ae(h(e.Y,e,e.g),e.O)),t=e.U,n=e.g,i=e.ca;var r="readystatechange";Array.isArray(r)||(r&&(he[0]=r.toString()),r=he);for(var s=0;s<r.length;s++){var o=W(n,r[s],i||t.handleEvent,!1,t.h||t);if(!o)break;t.g[o.key]=o}t=e.H?y(e.H):{},e.m?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.m,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),xe(),function(e,t,n,i,r,s){e.info((function(){if(e.g)if(s)for(var o="",a=s.split("&"),l=0;l<a.length;l++){var h=a[l].split("=");if(1<h.length){var c=h[0];h=h[1];var u=c.split("_");o=2<=u.length&&"type"==u[1]?o+(c+"=")+h+"&":o+(c+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+i+") [attempt "+r+"]: "+t+"\n"+n+"\n"+o}))}(e.i,e.u,e.A,e.l,e.R,e.m)}function Ve(e){return!!e.g&&("GET"==e.u&&2!=e.L&&e.j.Ca)}function ze(e,t){var n=e.C,i=t.indexOf("\n",n);return-1==i?$e:(n=Number(t.substring(n,i)),isNaN(n)?Le:(i+=1)+n>t.length?$e:(t=t.slice(i,i+n),e.C=i+n,t))}function je(e){e.S=Date.now()+e.I,Be(e,e.I)}function Be(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Ce(h(e.ba,e),t)}function Fe(e){e.B&&(r.clearTimeout(e.B),e.B=null)}function We(e){0==e.j.G||e.J||ln(e.j,e)}function Xe(e){Fe(e);var t=e.M;t&&"function"==typeof t.ma&&t.ma(),e.M=null,ce(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.ma())}function Ye(e,t){try{var n=e.j;if(0!=n.G&&(n.g==e||Je(n.h,e)))if(!e.K&&Je(n.h,e)&&3==n.G){try{var i=n.Da.g.parse(t)}catch(c){i=null}if(Array.isArray(i)&&3==i.length){var r=i;if(0==r[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;an(n),Zt(n)}rn(n),_e(18)}}else n.za=r[1],0<n.za-n.T&&37500>r[2]&&n.F&&0==n.v&&!n.C&&(n.C=Ce(h(n.Za,n),6e3));if(1>=Ke(n.h)&&n.ca){try{n.ca()}catch(c){}n.ca=void 0}}else cn(n,11)}else if((e.K||n.g==e)&&an(n),!p(t))for(r=n.Da.g.parse(t),t=0;t<r.length;t++){let h=r[t];if(n.T=h[0],h=h[1],2==n.G)if("c"==h[0]){n.K=h[1],n.ia=h[2];const t=h[3];null!=t&&(n.la=t,n.j.info("VER="+n.la));const r=h[4];null!=r&&(n.Aa=r,n.j.info("SVER="+n.Aa));const c=h[5];null!=c&&"number"===typeof c&&0<c&&(i=1.5*c,n.L=i,n.j.info("backChannelRequestTimeoutMs_="+i)),i=n;const u=e.g;if(u){const e=u.g?u.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var s=i.h;s.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(et(s,s.h),s.h=null))}if(i.D){const e=u.g?u.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(i.ya=e,ct(i.I,i.D,e))}}n.G=3,n.l&&n.l.ua(),n.ba&&(n.R=Date.now()-e.F,n.j.info("Handshake RTT: "+n.R+"ms"));var o=e;if((i=n).qa=dn(i,i.J?i.ia:null,i.W),o.K){tt(i.h,o);var a=o,l=i.L;l&&(a.I=l),a.B&&(Fe(a),je(a)),i.g=o}else nn(i);0<n.i.length&&Kt(n)}else"stop"!=h[0]&&"close"!=h[0]||cn(n,7);else 3==n.G&&("stop"==h[0]||"close"==h[0]?"stop"==h[0]?cn(n,7):Gt(n):"noop"!=h[0]&&n.l&&n.l.ta(h),n.v=0)}xe()}catch(c){}}De.prototype.ca=function(e){e=e.target;const t=this.M;t&&3==Ft(e)?t.j():this.Y(e)},De.prototype.Y=function(e){try{if(e==this.g)e:{const d=Ft(this.g);var t=this.g.Ba();this.g.Z();if(!(3>d)&&(3!=d||this.g&&(this.h.h||this.g.oa()||Wt(this.g)))){this.J||4!=d||7==t||xe(),Fe(this);var n=this.g.Z();this.X=n;t:if(Ve(this)){var i=Wt(this.g);e="";var s=i.length,o=4==Ft(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){Xe(this),We(this);var a="";break t}this.h.i=new r.TextDecoder}for(t=0;t<s;t++)this.h.h=!0,e+=this.h.i.decode(i[t],{stream:!(o&&t==s-1)});i.length=0,this.h.g+=e,this.C=0,a=this.h.g}else a=this.g.oa();if(this.o=200==n,function(e,t,n,i,r,s,o){e.info((function(){return"XMLHTTP RESP ("+i+") [ attempt "+r+"]: "+t+"\n"+n+"\n"+s+" "+o}))}(this.i,this.u,this.A,this.l,this.R,d,n),this.o){if(this.T&&!this.K){t:{if(this.g){var l,h=this.g;if((l=h.g?h.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!p(l)){var c=l;break t}}c=null}if(!(n=c)){this.o=!1,this.s=3,_e(12),Xe(this),We(this);break e}Qe(this.i,this.l,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ye(this,n)}if(this.P){let e;for(n=!0;!this.J&&this.C<a.length;){if(e=ze(this,a),e==$e){4==d&&(this.s=4,_e(14),n=!1),Qe(this.i,this.l,null,"[Incomplete Response]");break}if(e==Le){this.s=4,_e(15),Qe(this.i,this.l,a,"[Invalid Chunk]"),n=!1;break}Qe(this.i,this.l,e,null),Ye(this,e)}if(Ve(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=d||0!=a.length||this.h.h||(this.s=1,_e(16),n=!1),this.o=this.o&&n,n){if(0<a.length&&!this.W){this.W=!0;var u=this.j;u.g==this&&u.ba&&!u.M&&(u.j.info("Great, no buffering proxy detected. Bytes received: "+a.length),sn(u),u.M=!0,_e(11))}}else Qe(this.i,this.l,a,"[Invalid Chunked Response]"),Xe(this),We(this)}else Qe(this.i,this.l,a,null),Ye(this,a);4==d&&Xe(this),this.o&&!this.J&&(4==d?ln(this.j,this):(this.o=!1,je(this)))}else(function(e){const t={};e=(e.g&&2<=Ft(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let i=0;i<e.length;i++){if(p(e[i]))continue;var n=k(e[i]);const r=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const s=t[r]||[];t[r]=s,s.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,(function(e){return e.join(", ")}))})(this.g),400==n&&0<a.indexOf("Unknown SID")?(this.s=3,_e(12)):(this.s=0,_e(13)),Xe(this),We(this)}}}catch(d){}},De.prototype.cancel=function(){this.J=!0,Xe(this)},De.prototype.ba=function(){this.B=null;const e=Date.now();0<=e-this.S?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.i,this.A),2!=this.L&&(xe(),_e(17)),Xe(this),this.s=2,We(this)):Be(this,this.S-e)};var Ge=class{constructor(e,t){this.g=e,this.map=t}};function Ze(e){this.l=e||10,r.PerformanceNavigationTiming?e=0<(e=r.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(r.chrome&&r.chrome.loadTimes&&r.chrome.loadTimes()&&r.chrome.loadTimes().wasFetchedViaSpdy),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function He(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Ke(e){return e.h?1:e.g?e.g.size:0}function Je(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function et(e,t){e.g?e.g.add(t):e.h=t}function tt(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function nt(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.D);return t}return d(e.i)}function it(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(s(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.na&&"function"==typeof e.na)return e.na();if(!e.V||"function"!=typeof e.V){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(s(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const i in e)t[n++]=i;return t}}}(e),i=function(e){if(e.V&&"function"==typeof e.V)return e.V();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(s(e)){for(var t=[],n=e.length,i=0;i<n;i++)t.push(e[i]);return t}for(i in t=[],n=0,e)t[n++]=e[i];return t}(e),r=i.length,o=0;o<r;o++)t.call(void 0,i[o],n&&n[o],e)}Ze.prototype.cancel=function(){if(this.i=nt(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var rt=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function st(e){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,e instanceof st){this.h=e.h,at(this,e.j),this.o=e.o,this.g=e.g,lt(this,e.s),this.l=e.l;var t=e.i,n=new wt;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),ht(this,n),this.m=e.m}else e&&(t=String(e).match(rt))?(this.h=!1,at(this,t[1]||"",!0),this.o=dt(t[2]||""),this.g=dt(t[3]||"",!0),lt(this,t[4]),this.l=dt(t[5]||"",!0),ht(this,t[6]||"",!0),this.m=dt(t[7]||"")):(this.h=!1,this.i=new wt(null,this.h))}function ot(e){return new st(e)}function at(e,t,n){e.j=n?dt(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function lt(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.s=t}else e.s=null}function ht(e,t,n){t instanceof wt?(e.i=t,function(e,t){t&&!e.j&&(kt(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(St(this,t),Tt(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=ft(t,yt)),e.i=new wt(t,e.h))}function ct(e,t,n){e.i.set(t,n)}function ut(e){return ct(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function dt(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function ft(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,pt),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function pt(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}st.prototype.toString=function(){var e=[],t=this.j;t&&e.push(ft(t,mt,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.o)&&e.push(ft(t,mt,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.s)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(ft(n,"/"==n.charAt(0)?vt:Ot,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.m)&&e.push("#",ft(n,bt)),e.join("")};var gt,mt=/[#\/\?@]/g,Ot=/[#\?:]/g,vt=/[#\?]/g,yt=/[#\?@]/g,bt=/#/g;function wt(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function kt(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var i=e[n].indexOf("="),r=null;if(0<=i){var s=e[n].substring(0,i);r=e[n].substring(i+1)}else s=e[n];t(s,r?decodeURIComponent(r.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function St(e,t){kt(e),t=_t(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function xt(e,t){return kt(e),t=_t(e,t),e.g.has(t)}function Tt(e,t,n){St(e,t),0<n.length&&(e.i=null,e.g.set(_t(e,t),d(n)),e.h+=n.length)}function _t(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function Pt(e,t,n,i,r){try{r&&(r.onload=null,r.onerror=null,r.onabort=null,r.ontimeout=null),i(n)}catch(s){}}function Ct(){this.g=new fe}function Et(e,t,n){const i=n||"";try{it(e,(function(e,n){let r=e;o(e)&&(r=ue(e)),t.push(i+n+"="+encodeURIComponent(r))}))}catch(_F){throw t.push(i+"type="+encodeURIComponent("_badmap")),_F}}function Qt(e){this.l=e.Ub||null,this.j=e.eb||!1}function At(e,t){ne.call(this),this.D=e,this.o=t,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function Rt(e){e.j.read().then(e.Pa.bind(e)).catch(e.ga.bind(e))}function Nt(e){e.readyState=4,e.l=null,e.j=null,e.v=null,It(e)}function It(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function Dt(e){let t="";return v(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function Mt(e,t,n){e:{for(i in n){var i=!1;break e}i=!0}i||(n=Dt(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):ct(e,t,n))}function Lt(e){ne.call(this),this.headers=new Map,this.o=e||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(e=wt.prototype).add=function(e,t){kt(this),this.i=null,e=_t(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},e.forEach=function(e,t){kt(this),this.g.forEach((function(n,i){n.forEach((function(n){e.call(t,n,i,this)}),this)}),this)},e.na=function(){kt(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let i=0;i<t.length;i++){const r=e[i];for(let e=0;e<r.length;e++)n.push(t[i])}return n},e.V=function(e){kt(this);let t=[];if("string"===typeof e)xt(this,e)&&(t=t.concat(this.g.get(_t(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},e.set=function(e,t){return kt(this),this.i=null,xt(this,e=_t(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},e.get=function(e,t){return e&&0<(e=this.V(e)).length?String(e[0]):t},e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var i=t[n];const s=encodeURIComponent(String(i)),o=this.V(i);for(i=0;i<o.length;i++){var r=s;""!==o[i]&&(r+="="+encodeURIComponent(String(o[i]))),e.push(r)}}return this.i=e.join("&")},u(Qt,pe),Qt.prototype.g=function(){return new At(this.l,this.j)},Qt.prototype.i=(gt={},function(){return gt}),u(At,ne),(e=At.prototype).open=function(e,t){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=e,this.A=t,this.readyState=1,It(this)},e.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.u,method:this.B,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||r).fetch(new Request(this.A,t)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((()=>{})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Nt(this)),this.readyState=0},e.Sa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,It(this)),this.g&&(this.readyState=3,It(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if("undefined"!==typeof r.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Rt(this)}else e.text().then(this.Ra.bind(this),this.ga.bind(this))},e.Pa=function(e){if(this.g){if(this.o&&e.value)this.response.push(e.value);else if(!this.o){var t=e.value?e.value:new Uint8Array(0);(t=this.v.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Nt(this):It(this),3==this.readyState&&Rt(this)}},e.Ra=function(e){this.g&&(this.response=this.responseText=e,Nt(this))},e.Qa=function(e){this.g&&(this.response=e,Nt(this))},e.ga=function(){this.g&&Nt(this)},e.setRequestHeader=function(e,t){this.u.append(e,t)},e.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(At.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}}),u(Lt,ne);var $t=/^https?$/i,Ut=["POST","PUT"];function qt(e,t){e.h=!1,e.g&&(e.j=!0,e.g.abort(),e.j=!1),e.l=t,e.m=5,Vt(e),jt(e)}function Vt(e){e.A||(e.A=!0,ie(e,"complete"),ie(e,"error"))}function zt(e){if(e.h&&"undefined"!=typeof i&&(!e.v[1]||4!=Ft(e)||2!=e.Z()))if(e.u&&4==Ft(e))se(e.Ea,0,e);else if(ie(e,"readystatechange"),4==Ft(e)){e.h=!1;try{const i=e.Z();e:switch(i){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var s;if(s=0===i){var o=String(e.D).match(rt)[1]||null;!o&&r.self&&r.self.location&&(o=r.self.location.protocol.slice(0,-1)),s=!$t.test(o?o.toLowerCase():"")}n=s}if(n)ie(e,"complete"),ie(e,"success");else{e.m=6;try{var a=2<Ft(e)?e.g.statusText:""}catch(l){a=""}e.l=a+" ["+e.Z()+"]",Vt(e)}}finally{jt(e)}}}function jt(e,t){if(e.g){Bt(e);const n=e.g,i=e.v[0]?()=>{}:null;e.g=null,e.v=null,t||ie(e,"ready");try{n.onreadystatechange=i}catch(_F){}}}function Bt(e){e.I&&(r.clearTimeout(e.I),e.I=null)}function Ft(e){return e.g?e.g.readyState:0}function Wt(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.H){case"":case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(co){return null}}function Xt(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Yt(e){this.Aa=0,this.i=[],this.j=new Ee,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Xt("failFast",!1,e),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Xt("baseRetryDelayMs",5e3,e),this.cb=Xt("retryDelaySeedMs",1e4,e),this.Wa=Xt("forwardChannelMaxRetries",2,e),this.wa=Xt("forwardChannelRequestTimeoutMs",2e4,e),this.pa=e&&e.xmlHttpFactory||void 0,this.Xa=e&&e.Tb||void 0,this.Ca=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.h=new Ze(e&&e.concurrentRequestLimit),this.Da=new Ct,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=e&&e.Rb||!1,e&&e.xa&&this.j.xa(),e&&e.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&e&&e.detectBufferingProxy||!1,this.ja=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.ja=e.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function Gt(e){if(Ht(e),3==e.G){var t=e.U++,n=ot(e.I);if(ct(n,"SID",e.K),ct(n,"RID",t),ct(n,"TYPE","terminate"),en(e,n),(t=new De(e,e.j,t)).L=2,t.v=ut(ot(n)),n=!1,r.navigator&&r.navigator.sendBeacon)try{n=r.navigator.sendBeacon(t.v.toString(),"")}catch(i){}!n&&r.Image&&((new Image).src=t.v,n=!0),n||(t.g=fn(t.j,null),t.g.ea(t.v)),t.F=Date.now(),je(t)}un(e)}function Zt(e){e.g&&(sn(e),e.g.cancel(),e.g=null)}function Ht(e){Zt(e),e.u&&(r.clearTimeout(e.u),e.u=null),an(e),e.h.cancel(),e.s&&("number"===typeof e.s&&r.clearTimeout(e.s),e.s=null)}function Kt(e){if(!He(e.h)&&!e.s){e.s=!0;var t=e.Ga;P||Q(),C||(P(),C=!0),E.add(t,e),e.B=0}}function Jt(e,t){var n;n=t?t.l:e.U++;const i=ot(e.I);ct(i,"SID",e.K),ct(i,"RID",n),ct(i,"AID",e.T),en(e,i),e.m&&e.o&&Mt(i,e.m,e.o),n=new De(e,e.j,n,e.B+1),null===e.m&&(n.H=e.o),t&&(e.i=t.D.concat(e.i)),t=tn(e,n,1e3),n.I=Math.round(.5*e.wa)+Math.round(.5*e.wa*Math.random()),et(e.h,n),Ue(n,i,t)}function en(e,t){e.H&&v(e.H,(function(e,n){ct(t,n,e)})),e.l&&it({},(function(e,n){ct(t,n,e)}))}function tn(e,t,n){n=Math.min(e.i.length,n);var i=e.l?h(e.l.Na,e.l,e):null;e:{var r=e.i;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=r[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let o=!0;for(let a=0;a<n;a++){let n=r[a].g;const l=r[a].map;if(n-=t,0>n)t=Math.max(0,r[a].g-100),o=!1;else try{Et(l,e,"req"+n+"_")}catch(s){i&&i(l)}}if(o){i=e.join("&");break e}}}return e=e.i.splice(0,n),t.D=e,i}function nn(e){if(!e.g&&!e.u){e.Y=1;var t=e.Fa;P||Q(),C||(P(),C=!0),E.add(t,e),e.v=0}}function rn(e){return!(e.g||e.u||3<=e.v)&&(e.Y++,e.u=Ce(h(e.Fa,e),hn(e,e.v)),e.v++,!0)}function sn(e){null!=e.A&&(r.clearTimeout(e.A),e.A=null)}function on(e){e.g=new De(e,e.j,"rpc",e.Y),null===e.m&&(e.g.H=e.o),e.g.O=0;var t=ot(e.qa);ct(t,"RID","rpc"),ct(t,"SID",e.K),ct(t,"AID",e.T),ct(t,"CI",e.F?"0":"1"),!e.F&&e.ja&&ct(t,"TO",e.ja),ct(t,"TYPE","xmlhttp"),en(e,t),e.m&&e.o&&Mt(t,e.m,e.o),e.L&&(e.g.I=e.L);var n=e.g;e=e.ia,n.L=1,n.v=ut(ot(t)),n.m=null,n.P=!0,qe(n,e)}function an(e){null!=e.C&&(r.clearTimeout(e.C),e.C=null)}function ln(e,t){var n=null;if(e.g==t){an(e),sn(e),e.g=null;var i=2}else{if(!Je(e.h,t))return;n=t.D,tt(e.h,t),i=1}if(0!=e.G)if(t.o)if(1==i){n=t.m?t.m.length:0,t=Date.now()-t.F;var r=e.B;ie(i=ke(),new Pe(i,n)),Kt(e)}else nn(e);else if(3==(r=t.s)||0==r&&0<t.X||!(1==i&&function(e,t){return!(Ke(e.h)>=e.h.j-(e.s?1:0))&&(e.s?(e.i=t.D.concat(e.i),!0):!(1==e.G||2==e.G||e.B>=(e.Va?0:e.Wa))&&(e.s=Ce(h(e.Ga,e,t),hn(e,e.B)),e.B++,!0))}(e,t)||2==i&&rn(e)))switch(n&&0<n.length&&(t=e.h,t.i=t.i.concat(n)),r){case 1:cn(e,5);break;case 4:cn(e,10);break;case 3:cn(e,6);break;default:cn(e,2)}}function hn(e,t){let n=e.Ta+Math.floor(Math.random()*e.cb);return e.isActive()||(n*=2),n*t}function cn(e,t){if(e.j.info("Error code "+t),2==t){var n=h(e.fb,e),i=e.Xa;const t=!i;i=new st(i||"//www.google.com/images/cleardot.gif"),r.location&&"http"==r.location.protocol||at(i,"https"),ut(i),t?function(e,t){const n=new Ee;if(r.Image){const i=new Image;i.onload=c(Pt,n,"TestLoadImage: loaded",!0,t,i),i.onerror=c(Pt,n,"TestLoadImage: error",!1,t,i),i.onabort=c(Pt,n,"TestLoadImage: abort",!1,t,i),i.ontimeout=c(Pt,n,"TestLoadImage: timeout",!1,t,i),r.setTimeout((function(){i.ontimeout&&i.ontimeout()}),1e4),i.src=e}else t(!1)}(i.toString(),n):function(e,t){new Ee;const n=new AbortController,i=setTimeout((()=>{n.abort(),Pt(0,0,!1,t)}),1e4);fetch(e,{signal:n.signal}).then((e=>{clearTimeout(i),e.ok?Pt(0,0,!0,t):Pt(0,0,!1,t)})).catch((()=>{clearTimeout(i),Pt(0,0,!1,t)}))}(i.toString(),n)}else _e(2);e.G=0,e.l&&e.l.sa(t),un(e),Ht(e)}function un(e){if(e.G=0,e.ka=[],e.l){const t=nt(e.h);0==t.length&&0==e.i.length||(f(e.ka,t),f(e.ka,e.i),e.h.i.length=0,d(e.i),e.i.length=0),e.l.ra()}}function dn(e,t,n){var i=n instanceof st?ot(n):new st(n);if(""!=i.g)t&&(i.g=t+"."+i.g),lt(i,i.s);else{var s=r.location;i=s.protocol,t=t?t+"."+s.hostname:s.hostname,s=+s.port;var o=new st(null);i&&at(o,i),t&&(o.g=t),s&&lt(o,s),n&&(o.l=n),i=o}return n=e.D,t=e.ya,n&&t&&ct(i,n,t),ct(i,"VER",e.la),en(e,i),i}function fn(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Ca&&!e.pa?new Lt(new Qt({eb:n})):new Lt(e.pa)).Ha(e.J),t}function pn(){}function gn(){}function mn(e,t){ne.call(this),this.g=new Yt(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.o=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.va&&(e?e["X-WebChannel-Client-Profile"]=t.va:e={"X-WebChannel-Client-Profile":t.va}),this.g.S=e,(e=t&&t.Sb)&&!p(e)&&(this.g.m=e),this.v=t&&t.supportsCrossDomainXhr||!1,this.u=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!p(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new yn(this)}function On(e){ve.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function vn(){ye.call(this),this.status=1}function yn(e){this.g=e}(e=Lt.prototype).Ha=function(e){this.J=e},e.ea=function(e,t,n,i){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+e);t=t?t.toUpperCase():"GET",this.D=e,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ae.g(),this.v=this.o?ge(this.o):ge(Ae),this.g.onreadystatechange=h(this.Ea,this);try{this.B=!0,this.g.open(t,String(e),!0),this.B=!1}catch(o){return void qt(this,o)}if(e=n||"",n=new Map(this.headers),i)if(Object.getPrototypeOf(i)===Object.prototype)for(var s in i)n.set(s,i[s]);else{if("function"!==typeof i.keys||"function"!==typeof i.get)throw Error("Unknown input type for opt_headers: "+String(i));for(const e of i.keys())n.set(e,i.get(e))}i=Array.from(n.keys()).find((e=>"content-type"==e.toLowerCase())),s=r.FormData&&e instanceof r.FormData,!(0<=Array.prototype.indexOf.call(Ut,t,void 0))||i||s||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[r,a]of n)this.g.setRequestHeader(r,a);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Bt(this),this.u=!0,this.g.send(e),this.u=!1}catch(o){qt(this,o)}},e.abort=function(e){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=e||7,ie(this,"complete"),ie(this,"abort"),jt(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),jt(this,!0)),Lt.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?zt(this):this.bb())},e.bb=function(){zt(this)},e.isActive=function(){return!!this.g},e.Z=function(){try{return 2<Ft(this)?this.g.status:-1}catch(gt){return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch(gt){return""}},e.Oa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),de(t)}},e.Ba=function(){return this.m},e.Ka=function(){return"string"===typeof this.l?this.l:String(this.l)},(e=Yt.prototype).la=8,e.G=1,e.connect=function(e,t,n,i){_e(0),this.W=e,this.H=t||{},n&&void 0!==i&&(this.H.OSID=n,this.H.OAID=i),this.F=this.X,this.I=dn(this,null,this.W),Kt(this)},e.Ga=function(e){if(this.s)if(this.s=null,1==this.G){if(!e){this.U=Math.floor(1e5*Math.random()),e=this.U++;const r=new De(this,this.j,e);let s=this.o;if(this.S&&(s?(s=y(s),w(s,this.S)):s=this.S),null!==this.m||this.O||(r.H=s,s=null),this.P)e:{for(var t=0,n=0;n<this.i.length;n++){var i=this.i[n];if(void 0===(i="__data__"in i.map&&"string"===typeof(i=i.map.__data__)?i.length:void 0))break;if(4096<(t+=i)){t=n;break e}if(4096===t||n===this.i.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=tn(this,r,t),ct(n=ot(this.I),"RID",e),ct(n,"CVER",22),this.D&&ct(n,"X-HTTP-Session-Id",this.D),en(this,n),s&&(this.O?t="headers="+encodeURIComponent(String(Dt(s)))+"&"+t:this.m&&Mt(n,this.m,s)),et(this.h,r),this.Ua&&ct(n,"TYPE","init"),this.P?(ct(n,"$req",t),ct(n,"SID","null"),r.T=!0,Ue(r,n,null)):Ue(r,n,t),this.G=2}}else 3==this.G&&(e?Jt(this,e):0==this.i.length||He(this.h)||Jt(this))},e.Fa=function(){if(this.u=null,on(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var e=2*this.R;this.j.info("BP detection timer enabled: "+e),this.A=Ce(h(this.ab,this),e)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,_e(10),Zt(this),on(this))},e.Za=function(){null!=this.C&&(this.C=null,Zt(this),rn(this),_e(19))},e.fb=function(e){e?(this.j.info("Successfully pinged google.com"),_e(2)):(this.j.info("Failed to ping google.com"),_e(1))},e.isActive=function(){return!!this.l&&this.l.isActive(this)},(e=pn.prototype).ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){},gn.prototype.g=function(e,t){return new mn(e,t)},u(mn,ne),mn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},mn.prototype.close=function(){Gt(this.g)},mn.prototype.o=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.u&&((n={}).__data__=ue(e),e=n);t.i.push(new Ge(t.Ya++,e)),3==t.G&&Kt(t)},mn.prototype.N=function(){this.g.l=null,delete this.j,Gt(this.g),delete this.g,mn.aa.N.call(this)},u(On,ve),u(vn,ye),u(yn,pn),yn.prototype.ua=function(){ie(this.g,"a")},yn.prototype.ta=function(e){ie(this.g,new On(e))},yn.prototype.sa=function(e){ie(this.g,new vn)},yn.prototype.ra=function(){ie(this.g,"b")},gn.prototype.createWebChannel=gn.prototype.g,mn.prototype.send=mn.prototype.o,mn.prototype.open=mn.prototype.m,mn.prototype.close=mn.prototype.close,so=ao.createWebChannelTransport=function(){return new gn},ro=ao.getStatEventTarget=function(){return ke()},io=ao.Event=be,no=ao.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Re.NO_ERROR=0,Re.TIMEOUT=8,Re.HTTP_ERROR=6,to=ao.ErrorCode=Re,Ne.COMPLETE="complete",eo=ao.EventType=Ne,me.EventType=Oe,Oe.OPEN="a",Oe.CLOSE="b",Oe.ERROR="c",Oe.MESSAGE="d",ne.prototype.listen=ne.prototype.K,Js=ao.WebChannel=me,Ks=ao.FetchXmlHttpFactory=Qt,Lt.prototype.listenOnce=Lt.prototype.L,Lt.prototype.getLastError=Lt.prototype.Ka,Lt.prototype.getLastErrorCode=Lt.prototype.Ba,Lt.prototype.getStatus=Lt.prototype.Z,Lt.prototype.getResponseJson=Lt.prototype.Oa,Lt.prototype.getResponseText=Lt.prototype.oa,Lt.prototype.send=Lt.prototype.ea,Lt.prototype.setWithCredentials=Lt.prototype.Ha,Hs=ao.XhrIo=Lt}).apply("undefined"!==typeof oo?oo:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});const lo="@firebase/firestore";class ho{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ho.UNAUTHENTICATED=new ho(null),ho.GOOGLE_CREDENTIALS=new ho("google-credentials-uid"),ho.FIRST_PARTY=new ho("first-party-uid"),ho.MOCK_USER=new ho("mock-user");let co="10.12.3";const uo=new at("@firebase/firestore");function fo(){return uo.logLevel}function po(e){if(uo.logLevel<=nt.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];const r=n.map(Oo);uo.debug("Firestore (".concat(co,"): ").concat(e),...r)}}function go(e){if(uo.logLevel<=nt.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];const r=n.map(Oo);uo.error("Firestore (".concat(co,"): ").concat(e),...r)}}function mo(e){if(uo.logLevel<=nt.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];const r=n.map(Oo);uo.warn("Firestore (".concat(co,"): ").concat(e),...r)}}function Oo(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(wx){return e}}function vo(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state";const t="FIRESTORE (".concat(co,") INTERNAL ASSERTION FAILED: ")+e;throw go(t),new Error(t)}function yo(e,t){e||vo()}function bo(e,t){return e}const wo={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ko extends qe{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>"".concat(this.name,": [code=").concat(this.code,"]: ").concat(this.message)}}class So{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class xo{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(e))}}class To{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(ho.UNAUTHENTICATED)))}shutdown(){}}class _o{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class Po{constructor(e){this.t=e,this.currentUser=ho.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){let n=this.i;const i=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let r=new So;this.o=()=>{this.i++,this.currentUser=this.u(),r.resolve(),r=new So,e.enqueueRetryable((()=>i(this.currentUser)))};const s=()=>{const t=r;e.enqueueRetryable((async()=>{await t.promise,await i(this.currentUser)}))},o=e=>{po("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.auth.addAuthTokenListener(this.o),s()};this.t.onInit((e=>o(e))),setTimeout((()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?o(e):(po("FirebaseAuthCredentialsProvider","Auth not yet detected"),r.resolve(),r=new So)}}),0),s()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((t=>this.i!==e?(po("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(yo("string"==typeof t.accessToken),new xo(t.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return yo(null===e||"string"==typeof e),new ho(e)}}class Co{constructor(e,t,n){this.l=e,this.h=t,this.P=n,this.type="FirstParty",this.user=ho.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class Eo{constructor(e,t,n){this.l=e,this.h=t,this.P=n}getToken(){return Promise.resolve(new Co(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable((()=>t(ho.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Qo{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Ao{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){const n=e=>{null!=e.error&&po("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));const n=e.token!==this.R;return this.R=e.token,po("FirebaseAppCheckTokenProvider","Received ".concat(n?"new":"existing"," token.")),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable((()=>n(t)))};const i=e=>{po("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.appCheck.addTokenListener(this.o)};this.A.onInit((e=>i(e))),setTimeout((()=>{if(!this.appCheck){const e=this.A.getImmediate({optional:!0});e?i(e):po("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((e=>e?(yo("string"==typeof e.token),this.R=e.token,new Qo(e.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function Ro(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let i=0;i<e;i++)n[i]=Math.floor(256*Math.random());return n}class No{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(256/62);let n="";for(;n.length<20;){const i=Ro(40);for(let r=0;r<i.length;++r)n.length<20&&i[r]<t&&(n+=e.charAt(i[r]%62))}return n}}function Io(e,t){return e<t?-1:e>t?1:0}function Do(e,t,n){return e.length===t.length&&e.every(((e,i)=>n(e,t[i])))}class Mo{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ko(wo.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ko(wo.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new ko(wo.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ko(wo.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Mo.fromMillis(Date.now())}static fromDate(e){return Mo.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*t));return new Mo(t,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Io(this.nanoseconds,e.nanoseconds):Io(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Lo{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Lo(e)}static min(){return new Lo(new Mo(0,0))}static max(){return new Lo(new Mo(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class $o{constructor(e,t,n){void 0===t?t=0:t>e.length&&vo(),void 0===n?n=e.length-t:n>e.length-t&&vo(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===$o.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof $o?e.forEach((e=>{t.push(e)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let i=0;i<n;i++){const n=e.get(i),r=t.get(i);if(n<r)return-1;if(n>r)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Uo extends $o{construct(e,t,n){return new Uo(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];for(const r of n){if(r.indexOf("//")>=0)throw new ko(wo.INVALID_ARGUMENT,"Invalid segment (".concat(r,"). Paths must not contain // in them."));e.push(...r.split("/").filter((e=>e.length>0)))}return new Uo(e)}static emptyPath(){return new Uo([])}}const qo=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Vo extends $o{construct(e,t,n){return new Vo(e,t,n)}static isValidIdentifier(e){return qo.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Vo.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Vo(["__name__"])}static fromServerFormat(e){const t=[];let n="",i=0;const r=()=>{if(0===n.length)throw new ko(wo.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(n),n=""};let s=!1;for(;i<e.length;){const t=e[i];if("\\"===t){if(i+1===e.length)throw new ko(wo.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[i+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new ko(wo.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,i+=2}else"`"===t?(s=!s,i++):"."!==t||s?(n+=t,i++):(r(),i++)}if(r(),s)throw new ko(wo.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Vo(t)}static emptyPath(){return new Vo([])}}class zo{constructor(e){this.path=e}static fromPath(e){return new zo(Uo.fromString(e))}static fromName(e){return new zo(Uo.fromString(e).popFirst(5))}static empty(){return new zo(Uo.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Uo.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Uo.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new zo(new Uo(e.slice()))}}class jo{constructor(e,t,n,i){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=i}}jo.UNKNOWN_ID=-1;function Bo(e,t){const n=e.toTimestamp().seconds,i=e.toTimestamp().nanoseconds+1,r=Lo.fromTimestamp(1e9===i?new Mo(n+1,0):new Mo(n,i));return new Wo(r,zo.empty(),t)}function Fo(e){return new Wo(e.readTime,e.key,-1)}class Wo{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new Wo(Lo.min(),zo.empty(),-1)}static max(){return new Wo(Lo.max(),zo.empty(),-1)}}function Xo(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=zo.comparator(e.documentKey,t.documentKey),0!==n?n:Io(e.largestBatchId,t.largestBatchId))}const Yo="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Go{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function Zo(e){if(e.code!==wo.FAILED_PRECONDITION||e.message!==Yo)throw e;po("LocalStore","Unexpectedly lost primary lease")}class Ho{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)}),(e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&vo(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Ho(((n,i)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,i)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,i)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof Ho?t:Ho.resolve(t)}catch(e){return Ho.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):Ho.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):Ho.reject(t)}static resolve(e){return new Ho(((t,n)=>{t(e)}))}static reject(e){return new Ho(((t,n)=>{n(e)}))}static waitFor(e){return new Ho(((t,n)=>{let i=0,r=0,s=!1;e.forEach((e=>{++i,e.next((()=>{++r,s&&r===i&&t()}),(e=>n(e)))})),s=!0,r===i&&t()}))}static or(e){let t=Ho.resolve(!1);for(const n of e)t=t.next((e=>e?Ho.resolve(e):n()));return t}static forEach(e,t){const n=[];return e.forEach(((e,i)=>{n.push(t.call(this,e,i))})),this.waitFor(n)}static mapArray(e,t){return new Ho(((n,i)=>{const r=e.length,s=new Array(r);let o=0;for(let a=0;a<r;a++){const l=a;t(e[l]).next((e=>{s[l]=e,++o,o===r&&n(s)}),(e=>i(e)))}}))}static doWhile(e,t){return new Ho(((n,i)=>{const r=()=>{!0===e()?t().next((()=>{r()}),i):n()};r()}))}}function Ko(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Jo(e){return"IndexedDbTransactionError"===e.name}class ea{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ie(e),this.se=e=>t.writeSequenceNumber(e))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}function ta(e){return null==e}function na(e){return 0===e&&1/e==-1/0}function ia(e){return"number"==typeof e&&Number.isInteger(e)&&!na(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}ea.oe=-1;const ra=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],sa=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],oa=sa;function aa(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function la(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function ha(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class ca{constructor(e,t){this.comparator=e,this.root=t||da.EMPTY}insert(e,t){return new ca(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,da.BLACK,null,null))}remove(e){return new ca(this.comparator,this.root.remove(e,this.comparator).copy(null,null,da.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(0===i)return t+n.left.size;i<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,n)=>(e(t,n),!1)))}toString(){const e=[];return this.inorderTraversal(((t,n)=>(e.push("".concat(t,":").concat(n)),!1))),"{".concat(e.join(", "),"}")}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ua(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ua(this.root,e,this.comparator,!1)}getReverseIterator(){return new ua(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ua(this.root,e,this.comparator,!0)}}class ua{constructor(e,t,n,i){this.isReverse=i,this.nodeStack=[];let r=1;for(;!e.isEmpty();)if(r=t?n(e.key,t):1,t&&i&&(r*=-1),r<0)e=this.isReverse?e.left:e.right;else{if(0===r){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class da{constructor(e,t,n,i,r){this.key=e,this.value=t,this.color=null!=n?n:da.RED,this.left=null!=i?i:da.EMPTY,this.right=null!=r?r:da.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,i,r){return new da(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=i?i:this.left,null!=r?r:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let i=this;const r=n(e,i.key);return i=r<0?i.copy(null,null,null,i.left.insert(e,t,n),null):0===r?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,n)),i.fixUp()}removeMin(){if(this.left.isEmpty())return da.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return da.EMPTY;n=i.right.min(),i=i.copy(n.key,n.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,da.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,da.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw vo();if(this.right.isRed())throw vo();const e=this.left.check();if(e!==this.right.check())throw vo();return e+(this.isRed()?0:1)}}da.EMPTY=null,da.RED=!0,da.BLACK=!1,da.EMPTY=new class{constructor(){this.size=0}get key(){throw vo()}get value(){throw vo()}get color(){throw vo()}get left(){throw vo()}get right(){throw vo()}copy(e,t,n,i,r){return this}insert(e,t,n){return new da(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class fa{constructor(e){this.comparator=e,this.data=new ca(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,n)=>(e(t),!1)))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const i=n.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new pa(this.data.getIterator())}getIteratorFrom(e){return new pa(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((e=>{t=t.add(e)})),t}isEqual(e){if(!(e instanceof fa))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,i=n.getNext().key;if(0!==this.comparator(e,i))return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new fa(this.comparator);return t.data=e,t}}class pa{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class ga{constructor(e){this.fields=e,e.sort(Vo.comparator)}static empty(){return new ga([])}unionWith(e){let t=new fa(Vo.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new ga(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Do(this.fields,e.fields,((e,t)=>e.isEqual(t)))}}class ma extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Oa{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new ma("Invalid base64 string: "+e):e}}(e);return new Oa(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new Oa(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Io(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Oa.EMPTY_BYTE_STRING=new Oa("");const va=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ya(e){if(yo(!!e),"string"==typeof e){let t=0;const n=va.exec(e);if(yo(!!n),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:ba(e.seconds),nanos:ba(e.nanos)}}function ba(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function wa(e){return"string"==typeof e?Oa.fromBase64String(e):Oa.fromUint8Array(e)}function ka(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Sa(e){const t=e.mapValue.fields.__previous_value__;return ka(t)?Sa(t):t}function xa(e){const t=ya(e.mapValue.fields.__local_write_time__.timestampValue);return new Mo(t.seconds,t.nanos)}class Ta{constructor(e,t,n,i,r,s,o,a,l){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=i,this.ssl=r,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.longPollingOptions=a,this.useFetchStreams=l}}class _a{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new _a("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof _a&&e.projectId===this.projectId&&e.database===this.database}}const Pa={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Ca(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?ka(e)?4:za(e)?9007199254740991:10:vo()}function Ea(e,t){if(e===t)return!0;const n=Ca(e);if(n!==Ca(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return xa(e).isEqual(xa(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=ya(e.timestampValue),i=ya(t.timestampValue);return n.seconds===i.seconds&&n.nanos===i.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return wa(e.bytesValue).isEqual(wa(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return ba(e.geoPointValue.latitude)===ba(t.geoPointValue.latitude)&&ba(e.geoPointValue.longitude)===ba(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return ba(e.integerValue)===ba(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=ba(e.doubleValue),i=ba(t.doubleValue);return n===i?na(n)===na(i):isNaN(n)&&isNaN(i)}return!1}(e,t);case 9:return Do(e.arrayValue.values||[],t.arrayValue.values||[],Ea);case 10:return function(e,t){const n=e.mapValue.fields||{},i=t.mapValue.fields||{};if(aa(n)!==aa(i))return!1;for(const r in n)if(n.hasOwnProperty(r)&&(void 0===i[r]||!Ea(n[r],i[r])))return!1;return!0}(e,t);default:return vo()}}function Qa(e,t){return void 0!==(e.values||[]).find((e=>Ea(e,t)))}function Aa(e,t){if(e===t)return 0;const n=Ca(e),i=Ca(t);if(n!==i)return Io(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return Io(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=ba(e.integerValue||e.doubleValue),i=ba(t.integerValue||t.doubleValue);return n<i?-1:n>i?1:n===i?0:isNaN(n)?isNaN(i)?0:-1:1}(e,t);case 3:return Ra(e.timestampValue,t.timestampValue);case 4:return Ra(xa(e),xa(t));case 5:return Io(e.stringValue,t.stringValue);case 6:return function(e,t){const n=wa(e),i=wa(t);return n.compareTo(i)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),i=t.split("/");for(let r=0;r<n.length&&r<i.length;r++){const e=Io(n[r],i[r]);if(0!==e)return e}return Io(n.length,i.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=Io(ba(e.latitude),ba(t.latitude));return 0!==n?n:Io(ba(e.longitude),ba(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){const n=e.values||[],i=t.values||[];for(let r=0;r<n.length&&r<i.length;++r){const e=Aa(n[r],i[r]);if(e)return e}return Io(n.length,i.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===Pa.mapValue&&t===Pa.mapValue)return 0;if(e===Pa.mapValue)return 1;if(t===Pa.mapValue)return-1;const n=e.fields||{},i=Object.keys(n),r=t.fields||{},s=Object.keys(r);i.sort(),s.sort();for(let o=0;o<i.length&&o<s.length;++o){const e=Io(i[o],s[o]);if(0!==e)return e;const t=Aa(n[i[o]],r[s[o]]);if(0!==t)return t}return Io(i.length,s.length)}(e.mapValue,t.mapValue);default:throw vo()}}function Ra(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Io(e,t);const n=ya(e),i=ya(t),r=Io(n.seconds,i.seconds);return 0!==r?r:Io(n.nanos,i.nanos)}function Na(e){return Ia(e)}function Ia(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=ya(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return wa(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return zo.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return"geo(".concat(e.latitude,",").concat(e.longitude,")")}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const i of e.values||[])n?n=!1:t+=",",t+=Ia(i);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",i=!0;for(const r of t)i?i=!1:n+=",",n+="".concat(r,":").concat(Ia(e.fields[r]));return n+"}"}(e.mapValue):vo()}function Da(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function Ma(e){return!!e&&"integerValue"in e}function La(e){return!!e&&"arrayValue"in e}function $a(e){return!!e&&"nullValue"in e}function Ua(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function qa(e){return!!e&&"mapValue"in e}function Va(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return la(e.mapValue.fields,((e,n)=>t.mapValue.fields[e]=Va(n))),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Va(e.arrayValue.values[n]);return t}return Object.assign({},e)}function za(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}class ja{constructor(e){this.value=e}static empty(){return new ja({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!qa(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Va(t)}setAll(e){let t=Vo.emptyPath(),n={},i=[];e.forEach(((e,r)=>{if(!t.isImmediateParentOf(r)){const e=this.getFieldsMap(t);this.applyChanges(e,n,i),n={},i=[],t=r.popLast()}e?n[r.lastSegment()]=Va(e):i.push(r.lastSegment())}));const r=this.getFieldsMap(t);this.applyChanges(r,n,i)}delete(e){const t=this.field(e.popLast());qa(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ea(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let i=t.mapValue.fields[e.get(n)];qa(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,n){la(t,((t,n)=>e[t]=n));for(const i of n)delete e[i]}clone(){return new ja(Va(this.value))}}function Ba(e){const t=[];return la(e.fields,((e,n)=>{const i=new Vo([e]);if(qa(n)){const e=Ba(n.mapValue).fields;if(0===e.length)t.push(i);else for(const n of e)t.push(i.child(n))}else t.push(i)})),new ga(t)}class Fa{constructor(e,t,n,i,r,s,o){this.key=e,this.documentType=t,this.version=n,this.readTime=i,this.createTime=r,this.data=s,this.documentState=o}static newInvalidDocument(e){return new Fa(e,0,Lo.min(),Lo.min(),Lo.min(),ja.empty(),0)}static newFoundDocument(e,t,n,i){return new Fa(e,1,t,Lo.min(),n,i,0)}static newNoDocument(e,t){return new Fa(e,2,t,Lo.min(),Lo.min(),ja.empty(),0)}static newUnknownDocument(e,t){return new Fa(e,3,t,Lo.min(),Lo.min(),ja.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Lo.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ja.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ja.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Lo.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Fa&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Fa(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}class Wa{constructor(e,t){this.position=e,this.inclusive=t}}function Xa(e,t,n){let i=0;for(let r=0;r<e.position.length;r++){const s=t[r],o=e.position[r];if(i=s.field.isKeyField()?zo.comparator(zo.fromName(o.referenceValue),n.key):Aa(o,n.data.field(s.field)),"desc"===s.dir&&(i*=-1),0!==i)break}return i}function Ya(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Ea(e.position[n],t.position[n]))return!1;return!0}class Ga{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function Za(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class Ha{}class Ka extends Ha{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new ol(e,t,n):"array-contains"===t?new cl(e,n):"in"===t?new ul(e,n):"not-in"===t?new dl(e,n):"array-contains-any"===t?new fl(e,n):new Ka(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new al(e,n):new ll(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Aa(t,this.value)):null!==t&&Ca(this.value)===Ca(t)&&this.matchesComparison(Aa(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return vo()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ja extends Ha{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new Ja(e,t)}matches(e){return el(this)?void 0===this.filters.find((t=>!t.matches(e))):void 0!==this.filters.find((t=>t.matches(e)))}getFlattenedFilters(){return null!==this.ae||(this.ae=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function el(e){return"and"===e.op}function tl(e){return nl(e)&&el(e)}function nl(e){for(const t of e.filters)if(t instanceof Ja)return!1;return!0}function il(e){if(e instanceof Ka)return e.field.canonicalString()+e.op.toString()+Na(e.value);if(tl(e))return e.filters.map((e=>il(e))).join(",");{const t=e.filters.map((e=>il(e))).join(",");return"".concat(e.op,"(").concat(t,")")}}function rl(e,t){return e instanceof Ka?function(e,t){return t instanceof Ka&&e.op===t.op&&e.field.isEqual(t.field)&&Ea(e.value,t.value)}(e,t):e instanceof Ja?function(e,t){return t instanceof Ja&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce(((e,n,i)=>e&&rl(n,t.filters[i])),!0)}(e,t):void vo()}function sl(e){return e instanceof Ka?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(Na(e.value))}(e):e instanceof Ja?function(e){return e.op.toString()+" {"+e.getFilters().map(sl).join(" ,")+"}"}(e):"Filter"}class ol extends Ka{constructor(e,t,n){super(e,t,n),this.key=zo.fromName(n.referenceValue)}matches(e){const t=zo.comparator(e.key,this.key);return this.matchesComparison(t)}}class al extends Ka{constructor(e,t){super(e,"in",t),this.keys=hl("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class ll extends Ka{constructor(e,t){super(e,"not-in",t),this.keys=hl("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function hl(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((e=>zo.fromName(e.referenceValue)))}class cl extends Ka{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return La(t)&&Qa(t.arrayValue,this.value)}}class ul extends Ka{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Qa(this.value.arrayValue,t)}}class dl extends Ka{constructor(e,t){super(e,"not-in",t)}matches(e){if(Qa(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Qa(this.value.arrayValue,t)}}class fl extends Ka{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!La(t)||!t.arrayValue.values)&&t.arrayValue.values.some((e=>Qa(this.value.arrayValue,e)))}}class pl{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=i,this.limit=r,this.startAt=s,this.endAt=o,this.ue=null}}function gl(e){return new pl(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function ml(e){const t=bo(e);if(null===t.ue){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map((e=>il(e))).join(","),e+="|ob:",e+=t.orderBy.map((e=>function(e){return e.field.canonicalString()+e.dir}(e))).join(","),ta(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((e=>Na(e))).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((e=>Na(e))).join(",")),t.ue=e}return t.ue}function Ol(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!Za(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!rl(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Ya(e.startAt,t.startAt)&&Ya(e.endAt,t.endAt)}function vl(e){return zo.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}class yl{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=i,this.limit=r,this.limitType=s,this.startAt=o,this.endAt=a,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function bl(e,t,n,i,r,s,o,a){return new yl(e,t,n,i,r,s,o,a)}function wl(e){return new yl(e)}function kl(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function Sl(e){return null!==e.collectionGroup}function xl(e){const t=bo(e);if(null===t.ce){t.ce=[];const e=new Set;for(const r of t.explicitOrderBy)t.ce.push(r),e.add(r.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",i=function(e){let t=new fa(Vo.comparator);return e.filters.forEach((e=>{e.getFlattenedFilters().forEach((e=>{e.isInequality()&&(t=t.add(e.field))}))})),t}(t);i.forEach((i=>{e.has(i.canonicalString())||i.isKeyField()||t.ce.push(new Ga(i,n))})),e.has(Vo.keyField().canonicalString())||t.ce.push(new Ga(Vo.keyField(),n))}return t.ce}function Tl(e){const t=bo(e);return t.le||(t.le=_l(t,xl(e))),t.le}function _l(e,t){if("F"===e.limitType)return gl(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map((e=>{const t="desc"===e.dir?"asc":"desc";return new Ga(e.field,t)}));const n=e.endAt?new Wa(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new Wa(e.startAt.position,e.startAt.inclusive):null;return gl(e.path,e.collectionGroup,t,e.filters,e.limit,n,i)}}function Pl(e,t){const n=e.filters.concat([t]);return new yl(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function Cl(e,t,n){return new yl(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function El(e,t){return Ol(Tl(e),Tl(t))&&e.limitType===t.limitType}function Ql(e){return"".concat(ml(Tl(e)),"|lt:").concat(e.limitType)}function Al(e){return"Query(target=".concat(function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((e=>sl(e))).join(", "),"]")),ta(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((e=>function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e))).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((e=>Na(e))).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((e=>Na(e))).join(",")),"Target(".concat(t,")")}(Tl(e)),"; limitType=").concat(e.limitType,")")}function Rl(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):zo.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of xl(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const i=Xa(e,t,n);return e.inclusive?i<=0:i<0}(e.startAt,xl(e),t))&&!(e.endAt&&!function(e,t,n){const i=Xa(e,t,n);return e.inclusive?i>=0:i>0}(e.endAt,xl(e),t))}(e,t)}function Nl(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Il(e){return(t,n)=>{let i=!1;for(const r of xl(e)){const e=Dl(r,t,n);if(0!==e)return e;i=i||r.field.isKeyField()}return 0}}function Dl(e,t,n){const i=e.field.isKeyField()?zo.comparator(t.key,n.key):function(e,t,n){const i=t.data.field(e),r=n.data.field(e);return null!==i&&null!==r?Aa(i,r):vo()}(e.field,t,n);switch(e.dir){case"asc":return i;case"desc":return-1*i;default:return vo()}}class Ml{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[i,r]of n)if(this.equalsFn(i,e))return r}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),i=this.inner[n];if(void 0===i)return this.inner[n]=[[e,t]],void this.innerSize++;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return void(i[r]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let i=0;i<n.length;i++)if(this.equalsFn(n[i][0],e))return 1===n.length?delete this.inner[t]:n.splice(i,1),this.innerSize--,!0;return!1}forEach(e){la(this.inner,((t,n)=>{for(const[i,r]of n)e(i,r)}))}isEmpty(){return ha(this.inner)}size(){return this.innerSize}}const Ll=new ca(zo.comparator);function $l(){return Ll}const Ul=new ca(zo.comparator);function ql(){let e=Ul;for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];for(const r of n)e=e.insert(r.key,r);return e}function Vl(e){let t=Ul;return e.forEach(((e,n)=>t=t.insert(e,n.overlayedDocument))),t}function zl(){return Bl()}function jl(){return Bl()}function Bl(){return new Ml((e=>e.toString()),((e,t)=>e.isEqual(t)))}const Fl=new ca(zo.comparator),Wl=new fa(zo.comparator);function Xl(){let e=Wl;for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];for(const r of n)e=e.add(r);return e}const Yl=new fa(Io);function Gl(){return Yl}function Zl(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:na(t)?"-0":t}}function Hl(e){return{integerValue:""+e}}function Kl(e,t){return ia(t)?Hl(t):Zl(e,t)}class Jl{constructor(){this._=void 0}}function eh(e,t,n){return e instanceof ih?function(e,t){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&ka(t)&&(t=Sa(t)),t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof rh?sh(e,t):e instanceof oh?ah(e,t):function(e,t){const n=nh(e,t),i=hh(n)+hh(e.Pe);return Ma(n)&&Ma(e.Pe)?Hl(i):Zl(e.serializer,i)}(e,t)}function th(e,t,n){return e instanceof rh?sh(e,t):e instanceof oh?ah(e,t):n}function nh(e,t){return e instanceof lh?function(e){return Ma(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}class ih extends Jl{}class rh extends Jl{constructor(e){super(),this.elements=e}}function sh(e,t){const n=ch(t);for(const i of e.elements)n.some((e=>Ea(e,i)))||n.push(i);return{arrayValue:{values:n}}}class oh extends Jl{constructor(e){super(),this.elements=e}}function ah(e,t){let n=ch(t);for(const i of e.elements)n=n.filter((e=>!Ea(e,i)));return{arrayValue:{values:n}}}class lh extends Jl{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function hh(e){return ba(e.integerValue||e.doubleValue)}function ch(e){return La(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class uh{constructor(e,t){this.version=e,this.transformResults=t}}class dh{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new dh}static exists(e){return new dh(void 0,e)}static updateTime(e){return new dh(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function fh(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class ph{}function gh(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new Th(e.key,dh.none()):new bh(e.key,e.data,dh.none());{const n=e.data,i=ja.empty();let r=new fa(Vo.comparator);for(let e of t.fields)if(!r.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?i.delete(e):i.set(e,t),r=r.add(e)}return new wh(e.key,i,new ga(r.toArray()),dh.none())}}function mh(e,t,n){e instanceof bh?function(e,t,n){const i=e.value.clone(),r=Sh(e.fieldTransforms,t,n.transformResults);i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):e instanceof wh?function(e,t,n){if(!fh(e.precondition,t))return void t.convertToUnknownDocument(n.version);const i=Sh(e.fieldTransforms,t,n.transformResults),r=t.data;r.setAll(kh(e)),r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Oh(e,t,n,i){return e instanceof bh?function(e,t,n,i){if(!fh(e.precondition,t))return n;const r=e.value.clone(),s=xh(e.fieldTransforms,i,t);return r.setAll(s),t.convertToFoundDocument(t.version,r).setHasLocalMutations(),null}(e,t,n,i):e instanceof wh?function(e,t,n,i){if(!fh(e.precondition,t))return n;const r=xh(e.fieldTransforms,i,t),s=t.data;return s.setAll(kh(e)),s.setAll(r),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((e=>e.field)))}(e,t,n,i):function(e,t,n){return fh(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function vh(e,t){let n=null;for(const i of e.fieldTransforms){const e=t.data.field(i.field),r=nh(i.transform,e||null);null!=r&&(null===n&&(n=ja.empty()),n.set(i.field,r))}return n||null}function yh(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&Do(e,t,((e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof rh&&t instanceof rh||e instanceof oh&&t instanceof oh?Do(e.elements,t.elements,Ea):e instanceof lh&&t instanceof lh?Ea(e.Pe,t.Pe):e instanceof ih&&t instanceof ih}(e.transform,t.transform)}(e,t)))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class bh extends ph{constructor(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class wh extends ph{constructor(e,t,n,i){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=i,this.fieldTransforms=r,this.type=1}getFieldMask(){return this.fieldMask}}function kh(e){const t=new Map;return e.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const i=e.data.field(n);t.set(n,i)}})),t}function Sh(e,t,n){const i=new Map;yo(e.length===n.length);for(let r=0;r<n.length;r++){const s=e[r],o=s.transform,a=t.data.field(s.field);i.set(s.field,th(o,a,n[r]))}return i}function xh(e,t,n){const i=new Map;for(const r of e){const e=r.transform,s=n.data.field(r.field);i.set(r.field,eh(e,s,t))}return i}class Th extends ph{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class _h extends ph{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Ph{constructor(e,t,n,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=i}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const t=this.mutations[i];t.key.isEqual(e.key)&&mh(t,e,n[i])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=Oh(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=Oh(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=jl();return this.mutations.forEach((i=>{const r=e.get(i.key),s=r.overlayedDocument;let o=this.applyToLocalView(s,r.mutatedFields);o=t.has(i.key)?null:o;const a=gh(s,o);null!==a&&n.set(i.key,a),s.isValidDocument()||s.convertToNoDocument(Lo.min())})),n}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Xl())}isEqual(e){return this.batchId===e.batchId&&Do(this.mutations,e.mutations,((e,t)=>yh(e,t)))&&Do(this.baseMutations,e.baseMutations,((e,t)=>yh(e,t)))}}class Ch{constructor(e,t,n,i){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=i}static from(e,t,n){yo(e.mutations.length===n.length);let i=Fl;const r=e.mutations;for(let s=0;s<r.length;s++)i=i.insert(r[s].key,n[s].version);return new Ch(e,t,n,i)}}class Eh{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}class Qh{constructor(e,t){this.count=e,this.unchangedNames=t}}var Ah,Rh;function Nh(e){switch(e){default:return vo();case wo.CANCELLED:case wo.UNKNOWN:case wo.DEADLINE_EXCEEDED:case wo.RESOURCE_EXHAUSTED:case wo.INTERNAL:case wo.UNAVAILABLE:case wo.UNAUTHENTICATED:return!1;case wo.INVALID_ARGUMENT:case wo.NOT_FOUND:case wo.ALREADY_EXISTS:case wo.PERMISSION_DENIED:case wo.FAILED_PRECONDITION:case wo.ABORTED:case wo.OUT_OF_RANGE:case wo.UNIMPLEMENTED:case wo.DATA_LOSS:return!0}}function Ih(e){if(void 0===e)return go("GRPC error has no .code"),wo.UNKNOWN;switch(e){case Ah.OK:return wo.OK;case Ah.CANCELLED:return wo.CANCELLED;case Ah.UNKNOWN:return wo.UNKNOWN;case Ah.DEADLINE_EXCEEDED:return wo.DEADLINE_EXCEEDED;case Ah.RESOURCE_EXHAUSTED:return wo.RESOURCE_EXHAUSTED;case Ah.INTERNAL:return wo.INTERNAL;case Ah.UNAVAILABLE:return wo.UNAVAILABLE;case Ah.UNAUTHENTICATED:return wo.UNAUTHENTICATED;case Ah.INVALID_ARGUMENT:return wo.INVALID_ARGUMENT;case Ah.NOT_FOUND:return wo.NOT_FOUND;case Ah.ALREADY_EXISTS:return wo.ALREADY_EXISTS;case Ah.PERMISSION_DENIED:return wo.PERMISSION_DENIED;case Ah.FAILED_PRECONDITION:return wo.FAILED_PRECONDITION;case Ah.ABORTED:return wo.ABORTED;case Ah.OUT_OF_RANGE:return wo.OUT_OF_RANGE;case Ah.UNIMPLEMENTED:return wo.UNIMPLEMENTED;case Ah.DATA_LOSS:return wo.DATA_LOSS;default:return vo()}}(Rh=Ah||(Ah={}))[Rh.OK=0]="OK",Rh[Rh.CANCELLED=1]="CANCELLED",Rh[Rh.UNKNOWN=2]="UNKNOWN",Rh[Rh.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Rh[Rh.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Rh[Rh.NOT_FOUND=5]="NOT_FOUND",Rh[Rh.ALREADY_EXISTS=6]="ALREADY_EXISTS",Rh[Rh.PERMISSION_DENIED=7]="PERMISSION_DENIED",Rh[Rh.UNAUTHENTICATED=16]="UNAUTHENTICATED",Rh[Rh.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Rh[Rh.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Rh[Rh.ABORTED=10]="ABORTED",Rh[Rh.OUT_OF_RANGE=11]="OUT_OF_RANGE",Rh[Rh.UNIMPLEMENTED=12]="UNIMPLEMENTED",Rh[Rh.INTERNAL=13]="INTERNAL",Rh[Rh.UNAVAILABLE=14]="UNAVAILABLE",Rh[Rh.DATA_LOSS=15]="DATA_LOSS";let Dh=null;function Mh(){return new TextEncoder}const Lh=new Xs([4294967295,4294967295],0);function $h(e){const t=Mh().encode(e),n=new Ys;return n.update(t),new Uint8Array(n.digest())}function Uh(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),i=t.getUint32(4,!0),r=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new Xs([n,i],0),new Xs([r,s],0)]}class qh{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new Vh("Invalid padding: ".concat(t));if(n<0)throw new Vh("Invalid hash count: ".concat(n));if(e.length>0&&0===this.hashCount)throw new Vh("Invalid hash count: ".concat(n));if(0===e.length&&0!==t)throw new Vh("Invalid padding when bitmap length is 0: ".concat(t));this.Ie=8*e.length-t,this.Te=Xs.fromNumber(this.Ie)}Ee(e,t,n){let i=e.add(t.multiply(Xs.fromNumber(n)));return 1===i.compare(Lh)&&(i=new Xs([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Ie)return!1;const t=$h(e),[n,i]=Uh(t);for(let r=0;r<this.hashCount;r++){const e=this.Ee(n,i,r);if(!this.de(e))return!1}return!0}static create(e,t,n){const i=e%8==0?0:8-e%8,r=new Uint8Array(Math.ceil(e/8)),s=new qh(r,i,t);return n.forEach((e=>s.insert(e))),s}insert(e){if(0===this.Ie)return;const t=$h(e),[n,i]=Uh(t);for(let r=0;r<this.hashCount;r++){const e=this.Ee(n,i,r);this.Ae(e)}}Ae(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class Vh extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class zh{constructor(e,t,n,i,r){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=i,this.resolvedLimboDocuments=r}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const i=new Map;return i.set(e,jh.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new zh(Lo.min(),i,new ca(Io),$l(),Xl())}}class jh{constructor(e,t,n,i,r){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=i,this.removedDocuments=r}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new jh(n,t,Xl(),Xl(),Xl())}}class Bh{constructor(e,t,n,i){this.Re=e,this.removedTargetIds=t,this.key=n,this.Ve=i}}class Fh{constructor(e,t){this.targetId=e,this.me=t}}class Wh{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Oa.EMPTY_BYTE_STRING,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=i}}class Xh{constructor(){this.fe=0,this.ge=Zh(),this.pe=Oa.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return 0!==this.fe}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}Ce(){let e=Xl(),t=Xl(),n=Xl();return this.ge.forEach(((i,r)=>{switch(r){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:n=n.add(i);break;default:vo()}})),new jh(this.pe,this.ye,e,t,n)}ve(){this.we=!1,this.ge=Zh()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,yo(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class Yh{constructor(e){this.Le=e,this.Be=new Map,this.ke=$l(),this.qe=Gh(),this.Qe=new ca(Io)}Ke(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,(t=>{const n=this.Ge(t);switch(e.state){case 0:this.ze(t)&&n.De(e.resumeToken);break;case 1:n.Oe(),n.Se||n.ve(),n.De(e.resumeToken);break;case 2:n.Oe(),n.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(n.Ne(),n.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),n.De(e.resumeToken));break;default:vo()}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach(((e,n)=>{this.ze(n)&&t(n)}))}He(e){const t=e.targetId,n=e.me.count,i=this.Je(t);if(i){const r=i.target;if(vl(r))if(0===n){const e=new zo(r.path);this.Ue(t,e,Fa.newNoDocument(e,Lo.min()))}else yo(1===n);else{const i=this.Ye(t);if(i!==n){const n=this.Ze(e),r=n?this.Xe(n,e,i):1;if(0!==r){this.je(t);const e=2===r?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,e)}null==Dh||Dh.et(function(e,t,n,i,r){var s,o,a,l,h,c;const u={localCacheCount:e,existenceFilterCount:t.count,databaseId:n.database,projectId:n.projectId},d=t.unchangedNames;return d&&(u.bloomFilter={applied:0===r,hashCount:null!==(s=null==d?void 0:d.hashCount)&&void 0!==s?s:0,bitmapLength:null!==(l=null===(a=null===(o=null==d?void 0:d.bits)||void 0===o?void 0:o.bitmap)||void 0===a?void 0:a.length)&&void 0!==l?l:0,padding:null!==(c=null===(h=null==d?void 0:d.bits)||void 0===h?void 0:h.padding)&&void 0!==c?c:0,mightContain:e=>{var t;return null!==(t=null==i?void 0:i.mightContain(e))&&void 0!==t&&t}}),u}(i,e.me,this.Le.tt(),n,r))}}}}Ze(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:i=0},hashCount:r=0}=t;let s,o;try{s=wa(n).toUint8Array()}catch(e){if(e instanceof ma)return mo("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{o=new qh(s,i,r)}catch(e){return mo(e instanceof Vh?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===o.Ie?null:o}Xe(e,t,n){return t.me.count===n-this.nt(e,t.targetId)?0:2}nt(e,t){const n=this.Le.getRemoteKeysForTarget(t);let i=0;return n.forEach((n=>{const r=this.Le.tt(),s="projects/".concat(r.projectId,"/databases/").concat(r.database,"/documents/").concat(n.path.canonicalString());e.mightContain(s)||(this.Ue(t,n,null),i++)})),i}rt(e){const t=new Map;this.Be.forEach(((n,i)=>{const r=this.Je(i);if(r){if(n.current&&vl(r.target)){const t=new zo(r.target.path);null!==this.ke.get(t)||this.it(i,t)||this.Ue(i,t,Fa.newNoDocument(t,e))}n.be&&(t.set(i,n.Ce()),n.ve())}}));let n=Xl();this.qe.forEach(((e,t)=>{let i=!0;t.forEachWhile((e=>{const t=this.Je(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(i=!1,!1)})),i&&(n=n.add(e))})),this.ke.forEach(((t,n)=>n.setReadTime(e)));const i=new zh(e,t,this.Qe,this.ke,n);return this.ke=$l(),this.qe=Gh(),this.Qe=new ca(Io),i}$e(e,t){if(!this.ze(e))return;const n=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,n),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,n){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,t)?i.Fe(t,1):i.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),n&&(this.ke=this.ke.insert(t,n))}removeTarget(e){this.Be.delete(e)}Ye(e){const t=this.Ge(e).Ce();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new Xh,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new fa(Io),this.qe=this.qe.insert(e,t)),t}ze(e){const t=null!==this.Je(e);return t||po("WatchChangeAggregator","Detected inactive target",e),t}Je(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Xh),this.Le.getRemoteKeysForTarget(e).forEach((t=>{this.Ue(e,t,null)}))}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function Gh(){return new ca(zo.comparator)}function Zh(){return new ca(zo.comparator)}const Hh={asc:"ASCENDING",desc:"DESCENDING"},Kh={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Jh={and:"AND",or:"OR"};class ec{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function tc(e,t){return e.useProto3Json||ta(t)?t:{value:t}}function nc(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function ic(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function rc(e,t){return nc(e,t.toTimestamp())}function sc(e){return yo(!!e),Lo.fromTimestamp(function(e){const t=ya(e);return new Mo(t.seconds,t.nanos)}(e))}function oc(e,t){return ac(e,t).canonicalString()}function ac(e,t){const n=function(e){return new Uo(["projects",e.projectId,"databases",e.database])}(e).child("documents");return void 0===t?n:n.child(t)}function lc(e){const t=Uo.fromString(e);return yo(Cc(t)),t}function hc(e,t){return oc(e.databaseId,t.path)}function cc(e,t){const n=lc(t);if(n.get(1)!==e.databaseId.projectId)throw new ko(wo.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new ko(wo.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new zo(pc(n))}function uc(e,t){return oc(e.databaseId,t)}function dc(e){const t=lc(e);return 4===t.length?Uo.emptyPath():pc(t)}function fc(e){return new Uo(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function pc(e){return yo(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function gc(e,t,n){return{name:hc(e,t),fields:n.value.mapValue.fields}}function mc(e,t){let n;if(t instanceof bh)n={update:gc(e,t.key,t.value)};else if(t instanceof Th)n={delete:hc(e,t.key)};else if(t instanceof wh)n={update:gc(e,t.key,t.data),updateMask:Pc(t.fieldMask)};else{if(!(t instanceof _h))return vo();n={verify:hc(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((e=>function(e,t){const n=t.transform;if(n instanceof ih)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof rh)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof oh)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof lh)return{fieldPath:t.field.canonicalString(),increment:n.Pe};throw vo()}(0,e)))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:rc(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:vo()}(e,t.precondition)),n}function Oc(e,t){return{documents:[uc(e,t.path)]}}function vc(e,t){const n={structuredQuery:{}},i=t.path;let r;null!==t.collectionGroup?(r=i,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(r=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=uc(e,r);const s=function(e){if(0!==e.length)return _c(Ja.create(e,"and"))}(t.filters);s&&(n.structuredQuery.where=s);const o=function(e){if(0!==e.length)return e.map((e=>function(e){return{field:xc(e.field),direction:wc(e.dir)}}(e)))}(t.orderBy);o&&(n.structuredQuery.orderBy=o);const a=tc(e,t.limit);return null!==a&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{_t:n,parent:r}}function yc(e){let t=dc(e.parent);const n=e.structuredQuery,i=n.from?n.from.length:0;let r=null;if(i>0){yo(1===i);const e=n.from[0];e.allDescendants?r=e.collectionId:t=t.child(e.collectionId)}let s=[];n.where&&(s=function(e){const t=bc(e);return t instanceof Ja&&tl(t)?t.getFilters():[t]}(n.where));let o=[];n.orderBy&&(o=function(e){return e.map((e=>function(e){return new Ga(Tc(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)))}(n.orderBy));let a=null;n.limit&&(a=function(e){let t;return t="object"==typeof e?e.value:e,ta(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new Wa(n,t)}(n.startAt));let h=null;return n.endAt&&(h=function(e){const t=!e.before,n=e.values||[];return new Wa(n,t)}(n.endAt)),bl(t,r,o,s,a,"F",l,h)}function bc(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Tc(e.unaryFilter.field);return Ka.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=Tc(e.unaryFilter.field);return Ka.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Tc(e.unaryFilter.field);return Ka.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const r=Tc(e.unaryFilter.field);return Ka.create(r,"!=",{nullValue:"NULL_VALUE"});default:return vo()}}(e):void 0!==e.fieldFilter?function(e){return Ka.create(Tc(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return vo()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return Ja.create(e.compositeFilter.filters.map((e=>bc(e))),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return vo()}}(e.compositeFilter.op))}(e):vo()}function wc(e){return Hh[e]}function kc(e){return Kh[e]}function Sc(e){return Jh[e]}function xc(e){return{fieldPath:e.canonicalString()}}function Tc(e){return Vo.fromServerFormat(e.fieldPath)}function _c(e){return e instanceof Ka?function(e){if("=="===e.op){if(Ua(e.value))return{unaryFilter:{field:xc(e.field),op:"IS_NAN"}};if($a(e.value))return{unaryFilter:{field:xc(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Ua(e.value))return{unaryFilter:{field:xc(e.field),op:"IS_NOT_NAN"}};if($a(e.value))return{unaryFilter:{field:xc(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:xc(e.field),op:kc(e.op),value:e.value}}}(e):e instanceof Ja?function(e){const t=e.getFilters().map((e=>_c(e)));return 1===t.length?t[0]:{compositeFilter:{op:Sc(e.op),filters:t}}}(e):vo()}function Pc(e){const t=[];return e.fields.forEach((e=>t.push(e.canonicalString()))),{fieldPaths:t}}function Cc(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class Ec{constructor(e,t,n,i){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Lo.min(),s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Lo.min(),o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Oa.EMPTY_BYTE_STRING,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=i,this.snapshotVersion=r,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=o,this.expectedCount=a}withSequenceNumber(e){return new Ec(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Ec(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ec(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ec(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class Qc{constructor(e){this.ct=e}}function Ac(e){const t=yc({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?Cl(t,t.limit,"L"):t}class Rc{constructor(){}Pt(e,t){this.It(e,t),t.Tt()}It(e,t){if("nullValue"in e)this.Et(t,5);else if("booleanValue"in e)this.Et(t,10),t.dt(e.booleanValue?1:0);else if("integerValue"in e)this.Et(t,15),t.dt(ba(e.integerValue));else if("doubleValue"in e){const n=ba(e.doubleValue);isNaN(n)?this.Et(t,13):(this.Et(t,15),na(n)?t.dt(0):t.dt(n))}else if("timestampValue"in e){let n=e.timestampValue;this.Et(t,20),"string"==typeof n&&(n=ya(n)),t.At("".concat(n.seconds||"")),t.dt(n.nanos||0)}else if("stringValue"in e)this.Rt(e.stringValue,t),this.Vt(t);else if("bytesValue"in e)this.Et(t,30),t.ft(wa(e.bytesValue)),this.Vt(t);else if("referenceValue"in e)this.gt(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.Et(t,45),t.dt(n.latitude||0),t.dt(n.longitude||0)}else"mapValue"in e?za(e)?this.Et(t,Number.MAX_SAFE_INTEGER):(this.yt(e.mapValue,t),this.Vt(t)):"arrayValue"in e?(this.wt(e.arrayValue,t),this.Vt(t)):vo()}Rt(e,t){this.Et(t,25),this.St(e,t)}St(e,t){t.At(e)}yt(e,t){const n=e.fields||{};this.Et(t,55);for(const i of Object.keys(n))this.Rt(i,t),this.It(n[i],t)}wt(e,t){const n=e.values||[];this.Et(t,50);for(const i of n)this.It(i,t)}gt(e,t){this.Et(t,37),zo.fromName(e).path.forEach((e=>{this.Et(t,60),this.St(e,t)}))}Et(e,t){e.dt(t)}Vt(e){e.dt(2)}}Rc.bt=new Rc;class Nc{constructor(){this._n=new Ic}addToCollectionParentIndex(e,t){return this._n.add(t),Ho.resolve()}getCollectionParents(e,t){return Ho.resolve(this._n.getEntries(t))}addFieldIndex(e,t){return Ho.resolve()}deleteFieldIndex(e,t){return Ho.resolve()}deleteAllFieldIndexes(e){return Ho.resolve()}createTargetIndexes(e,t){return Ho.resolve()}getDocumentsMatchingTarget(e,t){return Ho.resolve(null)}getIndexType(e,t){return Ho.resolve(0)}getFieldIndexes(e,t){return Ho.resolve([])}getNextCollectionGroupToUpdate(e){return Ho.resolve(null)}getMinOffset(e,t){return Ho.resolve(Wo.min())}getMinOffsetFromCollectionGroup(e,t){return Ho.resolve(Wo.min())}updateCollectionGroup(e,t,n){return Ho.resolve()}updateIndexEntries(e,t){return Ho.resolve()}}class Ic{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),i=this.index[t]||new fa(Uo.comparator),r=!i.has(n);return this.index[t]=i.add(n),r}has(e){const t=e.lastSegment(),n=e.popLast(),i=this.index[t];return i&&i.has(n)}getEntries(e){return(this.index[e]||new fa(Uo.comparator)).toArray()}}new Uint8Array(0);class Dc{constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new Dc(e,Dc.DEFAULT_COLLECTION_PERCENTILE,Dc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}Dc.DEFAULT_COLLECTION_PERCENTILE=10,Dc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Dc.DEFAULT=new Dc(41943040,Dc.DEFAULT_COLLECTION_PERCENTILE,Dc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Dc.DISABLED=new Dc(-1,0,0);class Mc{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new Mc(0)}static Ln(){return new Mc(-1)}}class Lc{constructor(){this.changes=new Ml((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Fa.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?Ho.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class $c{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class Uc{constructor(e,t,n,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=i}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next((i=>(n=i,this.remoteDocumentCache.getEntry(e,t)))).next((e=>(null!==n&&Oh(n.mutation,e,ga.empty(),Mo.now()),e)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.getLocalViewOfDocuments(e,t,Xl()).next((()=>t))))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Xl();const i=zl();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,n).next((e=>{let t=ql();return e.forEach(((e,n)=>{t=t.insert(e,n.overlayedDocument)})),t}))))}getOverlayedDocuments(e,t){const n=zl();return this.populateOverlays(e,n,t).next((()=>this.computeViews(e,t,n,Xl())))}populateOverlays(e,t,n){const i=[];return n.forEach((e=>{t.has(e)||i.push(e)})),this.documentOverlayCache.getOverlays(e,i).next((e=>{e.forEach(((e,n)=>{t.set(e,n)}))}))}computeViews(e,t,n,i){let r=$l();const s=Bl(),o=Bl();return t.forEach(((e,t)=>{const o=n.get(t.key);i.has(t.key)&&(void 0===o||o.mutation instanceof wh)?r=r.insert(t.key,t):void 0!==o?(s.set(t.key,o.mutation.getFieldMask()),Oh(o.mutation,t,o.mutation.getFieldMask(),Mo.now())):s.set(t.key,ga.empty())})),this.recalculateAndSaveOverlays(e,r).next((e=>(e.forEach(((e,t)=>s.set(e,t))),t.forEach(((e,t)=>{var n;return o.set(e,new $c(t,null!==(n=s.get(e))&&void 0!==n?n:null))})),o)))}recalculateAndSaveOverlays(e,t){const n=Bl();let i=new ca(((e,t)=>e-t)),r=Xl();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((e=>{for(const r of e)r.keys().forEach((e=>{const s=t.get(e);if(null===s)return;let o=n.get(e)||ga.empty();o=r.applyToLocalView(s,o),n.set(e,o);const a=(i.get(r.batchId)||Xl()).add(e);i=i.insert(r.batchId,a)}))})).next((()=>{const s=[],o=i.getReverseIterator();for(;o.hasNext();){const i=o.getNext(),a=i.key,l=i.value,h=jl();l.forEach((e=>{if(!r.has(e)){const i=gh(t.get(e),n.get(e));null!==i&&h.set(e,i),r=r.add(e)}})),s.push(this.documentOverlayCache.saveOverlays(e,a,h))}return Ho.waitFor(s)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.recalculateAndSaveOverlays(e,t)))}getDocumentsMatchingQuery(e,t,n,i){return function(e){return zo.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Sl(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,i):this.getDocumentsMatchingCollectionQuery(e,t,n,i)}getNextDocuments(e,t,n,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,i).next((r=>{const s=i-r.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,i-r.size):Ho.resolve(zl());let o=-1,a=r;return s.next((t=>Ho.forEach(t,((t,n)=>(o<n.largestBatchId&&(o=n.largestBatchId),r.get(t)?Ho.resolve():this.remoteDocumentCache.getEntry(e,t).next((e=>{a=a.insert(t,e)}))))).next((()=>this.populateOverlays(e,t,r))).next((()=>this.computeViews(e,a,t,Xl()))).next((e=>({batchId:o,changes:Vl(e)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new zo(t)).next((e=>{let t=ql();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}getDocumentsMatchingCollectionGroupQuery(e,t,n,i){const r=t.collectionGroup;let s=ql();return this.indexManager.getCollectionParents(e,r).next((o=>Ho.forEach(o,(o=>{const a=function(e,t){return new yl(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(r));return this.getDocumentsMatchingCollectionQuery(e,a,n,i).next((e=>{e.forEach(((e,t)=>{s=s.insert(e,t)}))}))})).next((()=>s))))}getDocumentsMatchingCollectionQuery(e,t,n,i){let r;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((s=>(r=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,r,i)))).next((e=>{r.forEach(((t,n)=>{const i=n.getKey();null===e.get(i)&&(e=e.insert(i,Fa.newInvalidDocument(i)))}));let n=ql();return e.forEach(((e,i)=>{const s=r.get(e);void 0!==s&&Oh(s.mutation,i,ga.empty(),Mo.now()),Rl(t,i)&&(n=n.insert(e,i))})),n}))}}class qc{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,t){return Ho.resolve(this.cr.get(t))}saveBundleMetadata(e,t){return this.cr.set(t.id,function(e){return{id:e.id,version:e.version,createTime:sc(e.createTime)}}(t)),Ho.resolve()}getNamedQuery(e,t){return Ho.resolve(this.lr.get(t))}saveNamedQuery(e,t){return this.lr.set(t.name,function(e){return{name:e.name,query:Ac(e.bundledQuery),readTime:sc(e.readTime)}}(t)),Ho.resolve()}}class Vc{constructor(){this.overlays=new ca(zo.comparator),this.hr=new Map}getOverlay(e,t){return Ho.resolve(this.overlays.get(t))}getOverlays(e,t){const n=zl();return Ho.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){return n.forEach(((n,i)=>{this.ht(e,t,i)})),Ho.resolve()}removeOverlaysForBatchId(e,t,n){const i=this.hr.get(n);return void 0!==i&&(i.forEach((e=>this.overlays=this.overlays.remove(e))),this.hr.delete(n)),Ho.resolve()}getOverlaysForCollection(e,t,n){const i=zl(),r=t.length+1,s=new zo(t.child("")),o=this.overlays.getIteratorFrom(s);for(;o.hasNext();){const e=o.getNext().value,s=e.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===r&&e.largestBatchId>n&&i.set(e.getKey(),e)}return Ho.resolve(i)}getOverlaysForCollectionGroup(e,t,n,i){let r=new ca(((e,t)=>e-t));const s=this.overlays.getIterator();for(;s.hasNext();){const e=s.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=r.get(e.largestBatchId);null===t&&(t=zl(),r=r.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const o=zl(),a=r.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach(((e,t)=>o.set(e,t))),!(o.size()>=i)););return Ho.resolve(o)}ht(e,t,n){const i=this.overlays.get(n.key);if(null!==i){const e=this.hr.get(i.largestBatchId).delete(n.key);this.hr.set(i.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new Eh(t,n));let r=this.hr.get(t);void 0===r&&(r=Xl(),this.hr.set(t,r)),this.hr.set(t,r.add(n.key))}}class zc{constructor(){this.Pr=new fa(jc.Ir),this.Tr=new fa(jc.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,t){const n=new jc(e,t);this.Pr=this.Pr.add(n),this.Tr=this.Tr.add(n)}dr(e,t){e.forEach((e=>this.addReference(e,t)))}removeReference(e,t){this.Ar(new jc(e,t))}Rr(e,t){e.forEach((e=>this.removeReference(e,t)))}Vr(e){const t=new zo(new Uo([])),n=new jc(t,e),i=new jc(t,e+1),r=[];return this.Tr.forEachInRange([n,i],(e=>{this.Ar(e),r.push(e.key)})),r}mr(){this.Pr.forEach((e=>this.Ar(e)))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){const t=new zo(new Uo([])),n=new jc(t,e),i=new jc(t,e+1);let r=Xl();return this.Tr.forEachInRange([n,i],(e=>{r=r.add(e.key)})),r}containsKey(e){const t=new jc(e,0),n=this.Pr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class jc{constructor(e,t){this.key=e,this.pr=t}static Ir(e,t){return zo.comparator(e.key,t.key)||Io(e.pr,t.pr)}static Er(e,t){return Io(e.pr,t.pr)||zo.comparator(e.key,t.key)}}class Bc{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.yr=1,this.wr=new fa(jc.Ir)}checkEmpty(e){return Ho.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,i){const r=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new Ph(r,t,n,i);this.mutationQueue.push(s);for(const o of i)this.wr=this.wr.add(new jc(o.key,r)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return Ho.resolve(s)}lookupMutationBatch(e,t){return Ho.resolve(this.Sr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,i=this.br(n),r=i<0?0:i;return Ho.resolve(this.mutationQueue.length>r?this.mutationQueue[r]:null)}getHighestUnacknowledgedBatchId(){return Ho.resolve(0===this.mutationQueue.length?-1:this.yr-1)}getAllMutationBatches(e){return Ho.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new jc(t,0),i=new jc(t,Number.POSITIVE_INFINITY),r=[];return this.wr.forEachInRange([n,i],(e=>{const t=this.Sr(e.pr);r.push(t)})),Ho.resolve(r)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new fa(Io);return t.forEach((e=>{const t=new jc(e,0),i=new jc(e,Number.POSITIVE_INFINITY);this.wr.forEachInRange([t,i],(e=>{n=n.add(e.pr)}))})),Ho.resolve(this.Dr(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,i=n.length+1;let r=n;zo.isDocumentKey(r)||(r=r.child(""));const s=new jc(new zo(r),0);let o=new fa(Io);return this.wr.forEachWhile((e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===i&&(o=o.add(e.pr)),!0)}),s),Ho.resolve(this.Dr(o))}Dr(e){const t=[];return e.forEach((e=>{const n=this.Sr(e);null!==n&&t.push(n)})),t}removeMutationBatch(e,t){yo(0===this.Cr(t.batchId,"removed")),this.mutationQueue.shift();let n=this.wr;return Ho.forEach(t.mutations,(i=>{const r=new jc(i.key,t.batchId);return n=n.delete(r),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((()=>{this.wr=n}))}Mn(e){}containsKey(e,t){const n=new jc(t,0),i=this.wr.firstAfterOrEqual(n);return Ho.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,Ho.resolve()}Cr(e,t){return this.br(e)}br(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Sr(e){const t=this.br(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class Fc{constructor(e){this.vr=e,this.docs=new ca(zo.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,i=this.docs.get(n),r=i?i.size:0,s=this.vr(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:s}),this.size+=s-r,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return Ho.resolve(n?n.document.mutableCopy():Fa.newInvalidDocument(t))}getEntries(e,t){let n=$l();return t.forEach((e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():Fa.newInvalidDocument(e))})),Ho.resolve(n)}getDocumentsMatchingQuery(e,t,n,i){let r=$l();const s=t.path,o=new zo(s.child("")),a=this.docs.getIteratorFrom(o);for(;a.hasNext();){const{key:e,value:{document:o}}=a.getNext();if(!s.isPrefixOf(e.path))break;e.path.length>s.length+1||Xo(Fo(o),n)<=0||(i.has(o.key)||Rl(t,o))&&(r=r.insert(o.key,o.mutableCopy()))}return Ho.resolve(r)}getAllFromCollectionGroup(e,t,n,i){vo()}Fr(e,t){return Ho.forEach(this.docs,(e=>t(e)))}newChangeBuffer(e){return new Wc(this)}getSize(e){return Ho.resolve(this.size)}}class Wc extends Lc{constructor(e){super(),this.ar=e}applyChanges(e){const t=[];return this.changes.forEach(((n,i)=>{i.isValidDocument()?t.push(this.ar.addEntry(e,i)):this.ar.removeEntry(n)})),Ho.waitFor(t)}getFromCache(e,t){return this.ar.getEntry(e,t)}getAllFromCache(e,t){return this.ar.getEntries(e,t)}}class Xc{constructor(e){this.persistence=e,this.Mr=new Ml((e=>ml(e)),Ol),this.lastRemoteSnapshotVersion=Lo.min(),this.highestTargetId=0,this.Or=0,this.Nr=new zc,this.targetCount=0,this.Lr=Mc.Nn()}forEachTarget(e,t){return this.Mr.forEach(((e,n)=>t(n))),Ho.resolve()}getLastRemoteSnapshotVersion(e){return Ho.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Ho.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Lr.next(),Ho.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Or&&(this.Or=t),Ho.resolve()}qn(e){this.Mr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Lr=new Mc(t),this.highestTargetId=t),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,t){return this.qn(t),this.targetCount+=1,Ho.resolve()}updateTargetData(e,t){return this.qn(t),Ho.resolve()}removeTargetData(e,t){return this.Mr.delete(t.target),this.Nr.Vr(t.targetId),this.targetCount-=1,Ho.resolve()}removeTargets(e,t,n){let i=0;const r=[];return this.Mr.forEach(((s,o)=>{o.sequenceNumber<=t&&null===n.get(o.targetId)&&(this.Mr.delete(s),r.push(this.removeMatchingKeysForTargetId(e,o.targetId)),i++)})),Ho.waitFor(r).next((()=>i))}getTargetCount(e){return Ho.resolve(this.targetCount)}getTargetData(e,t){const n=this.Mr.get(t)||null;return Ho.resolve(n)}addMatchingKeys(e,t,n){return this.Nr.dr(t,n),Ho.resolve()}removeMatchingKeys(e,t,n){this.Nr.Rr(t,n);const i=this.persistence.referenceDelegate,r=[];return i&&t.forEach((t=>{r.push(i.markPotentiallyOrphaned(e,t))})),Ho.waitFor(r)}removeMatchingKeysForTargetId(e,t){return this.Nr.Vr(t),Ho.resolve()}getMatchingKeysForTargetId(e,t){const n=this.Nr.gr(t);return Ho.resolve(n)}containsKey(e,t){return Ho.resolve(this.Nr.containsKey(t))}}class Yc{constructor(e,t){this.Br={},this.overlays={},this.kr=new ea(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new Xc(this),this.indexManager=new Nc,this.remoteDocumentCache=function(e){return new Fc(e)}((e=>this.referenceDelegate.Kr(e))),this.serializer=new Qc(t),this.$r=new qc(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Vc,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.Br[e.toKey()];return n||(n=new Bc(t,this.referenceDelegate),this.Br[e.toKey()]=n),n}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,t,n){po("MemoryPersistence","Starting transaction:",e);const i=new Gc(this.kr.next());return this.referenceDelegate.Ur(),n(i).next((e=>this.referenceDelegate.Wr(i).next((()=>e)))).toPromise().then((e=>(i.raiseOnCommittedEvent(),e)))}Gr(e,t){return Ho.or(Object.values(this.Br).map((n=>()=>n.containsKey(e,t))))}}class Gc extends Go{constructor(e){super(),this.currentSequenceNumber=e}}class Zc{constructor(e){this.persistence=e,this.zr=new zc,this.jr=null}static Hr(e){return new Zc(e)}get Jr(){if(this.jr)return this.jr;throw vo()}addReference(e,t,n){return this.zr.addReference(n,t),this.Jr.delete(n.toString()),Ho.resolve()}removeReference(e,t,n){return this.zr.removeReference(n,t),this.Jr.add(n.toString()),Ho.resolve()}markPotentiallyOrphaned(e,t){return this.Jr.add(t.toString()),Ho.resolve()}removeTarget(e,t){this.zr.Vr(t.targetId).forEach((e=>this.Jr.add(e.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next((e=>{e.forEach((e=>this.Jr.add(e.toString())))})).next((()=>n.removeTargetData(e,t)))}Ur(){this.jr=new Set}Wr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ho.forEach(this.Jr,(n=>{const i=zo.fromPath(n);return this.Yr(e,i).next((e=>{e||t.removeEntry(i,Lo.min())}))})).next((()=>(this.jr=null,t.apply(e))))}updateLimboDocument(e,t){return this.Yr(e,t).next((e=>{e?this.Jr.delete(t.toString()):this.Jr.add(t.toString())}))}Kr(e){return 0}Yr(e,t){return Ho.or([()=>Ho.resolve(this.zr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gr(e,t)])}}class Hc{constructor(e,t,n,i){this.targetId=e,this.fromCache=t,this.qi=n,this.Qi=i}static Ki(e,t){let n=Xl(),i=Xl();for(const r of t.docChanges)switch(r.type){case 0:n=n.add(r.doc.key);break;case 1:i=i.add(r.doc.key)}return new Hc(e,t.fromCache,n,i)}}class Kc{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class Jc{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=$e()?8:Ko(Le())>0?6:4}initialize(e,t){this.zi=e,this.indexManager=t,this.$i=!0}getDocumentsMatchingQuery(e,t,n,i){const r={result:null};return this.ji(e,t).next((e=>{r.result=e})).next((()=>{if(!r.result)return this.Hi(e,t,i,n).next((e=>{r.result=e}))})).next((()=>{if(r.result)return;const n=new Kc;return this.Ji(e,t,n).next((i=>{if(r.result=i,this.Ui)return this.Yi(e,t,n,i.size)}))})).next((()=>r.result))}Yi(e,t,n,i){return n.documentReadCount<this.Wi?(fo()<=nt.DEBUG&&po("QueryEngine","SDK will not create cache indexes for query:",Al(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),Ho.resolve()):(fo()<=nt.DEBUG&&po("QueryEngine","Query:",Al(t),"scans",n.documentReadCount,"local documents and returns",i,"documents as results."),n.documentReadCount>this.Gi*i?(fo()<=nt.DEBUG&&po("QueryEngine","The SDK decides to create cache indexes for query:",Al(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Tl(t))):Ho.resolve())}ji(e,t){if(kl(t))return Ho.resolve(null);let n=Tl(t);return this.indexManager.getIndexType(e,n).next((i=>0===i?null:(null!==t.limit&&1===i&&(t=Cl(t,null,"F"),n=Tl(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next((i=>{const r=Xl(...i);return this.zi.getDocuments(e,r).next((i=>this.indexManager.getMinOffset(e,n).next((n=>{const s=this.Zi(t,i);return this.Xi(t,s,r,n.readTime)?this.ji(e,Cl(t,null,"F")):this.es(e,s,t,n)}))))})))))}Hi(e,t,n,i){return kl(t)||i.isEqual(Lo.min())?Ho.resolve(null):this.zi.getDocuments(e,n).next((r=>{const s=this.Zi(t,r);return this.Xi(t,s,n,i)?Ho.resolve(null):(fo()<=nt.DEBUG&&po("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Al(t)),this.es(e,s,t,Bo(i,-1)).next((e=>e)))}))}Zi(e,t){let n=new fa(Il(e));return t.forEach(((t,i)=>{Rl(e,i)&&(n=n.add(i))})),n}Xi(e,t,n,i){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const r="F"===e.limitType?t.last():t.first();return!!r&&(r.hasPendingWrites||r.version.compareTo(i)>0)}Ji(e,t,n){return fo()<=nt.DEBUG&&po("QueryEngine","Using full collection scan to execute query:",Al(t)),this.zi.getDocumentsMatchingQuery(e,t,Wo.min(),n)}es(e,t,n,i){return this.zi.getDocumentsMatchingQuery(e,n,i).next((e=>(t.forEach((t=>{e=e.insert(t.key,t)})),e)))}}class eu{constructor(e,t,n,i){this.persistence=e,this.ts=t,this.serializer=i,this.ns=new ca(Io),this.rs=new Ml((e=>ml(e)),Ol),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(n)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Uc(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.ns)))}}function tu(e,t,n,i){return new eu(e,t,n,i)}async function nu(e,t){const n=bo(e);return await n.persistence.runTransaction("Handle user change","readonly",(e=>{let i;return n.mutationQueue.getAllMutationBatches(e).next((r=>(i=r,n._s(t),n.mutationQueue.getAllMutationBatches(e)))).next((t=>{const r=[],s=[];let o=Xl();for(const e of i){r.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}for(const e of t){s.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}return n.localDocuments.getDocuments(e,o).next((e=>({us:e,removedBatchIds:r,addedBatchIds:s})))}))}))}function iu(e){const t=bo(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(e=>t.Qr.getLastRemoteSnapshotVersion(e)))}function ru(e,t,n){let i=Xl(),r=Xl();return n.forEach((e=>i=i.add(e))),t.getEntries(e,i).next((e=>{let i=$l();return n.forEach(((n,s)=>{const o=e.get(n);s.isFoundDocument()!==o.isFoundDocument()&&(r=r.add(n)),s.isNoDocument()&&s.version.isEqual(Lo.min())?(t.removeEntry(n,s.readTime),i=i.insert(n,s)):!o.isValidDocument()||s.version.compareTo(o.version)>0||0===s.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(s),i=i.insert(n,s)):po("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",s.version)})),{cs:i,ls:r}}))}function su(e,t){const n=bo(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(e=>(void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t))))}function ou(e,t){const n=bo(e);return n.persistence.runTransaction("Allocate target","readwrite",(e=>{let i;return n.Qr.getTargetData(e,t).next((r=>r?(i=r,Ho.resolve(i)):n.Qr.allocateTargetId(e).next((r=>(i=new Ec(t,r,"TargetPurposeListen",e.currentSequenceNumber),n.Qr.addTargetData(e,i).next((()=>i)))))))})).then((e=>{const i=n.ns.get(e.targetId);return(null===i||e.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.ns=n.ns.insert(e.targetId,e),n.rs.set(t,e.targetId)),e}))}async function au(e,t,n){const i=bo(e),r=i.ns.get(t),s=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",s,(e=>i.persistence.referenceDelegate.removeTarget(e,r)))}catch(e){if(!Jo(e))throw e;po("LocalStore","Failed to update sequence numbers for target ".concat(t,": ").concat(e))}i.ns=i.ns.remove(t),i.rs.delete(r.target)}function lu(e,t,n){const i=bo(e);let r=Lo.min(),s=Xl();return i.persistence.runTransaction("Execute query","readwrite",(e=>function(e,t,n){const i=bo(e),r=i.rs.get(n);return void 0!==r?Ho.resolve(i.ns.get(r)):i.Qr.getTargetData(t,n)}(i,e,Tl(t)).next((t=>{if(t)return r=t.lastLimboFreeSnapshotVersion,i.Qr.getMatchingKeysForTargetId(e,t.targetId).next((e=>{s=e}))})).next((()=>i.ts.getDocumentsMatchingQuery(e,t,n?r:Lo.min(),n?s:Xl()))).next((e=>(hu(i,Nl(t),e),{documents:e,hs:s})))))}function hu(e,t,n){let i=e.ss.get(t)||Lo.min();n.forEach(((e,t)=>{t.readTime.compareTo(i)>0&&(i=t.readTime)})),e.ss.set(t,i)}class cu{constructor(){this.activeTargetIds=Gl()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class uu{constructor(){this.no=new cu,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,t,n){this.ro[e]=t}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new cu,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class du{io(e){}shutdown(){}}class fu{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){po("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.uo)e(0)}ao(){po("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.uo)e(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let pu=null;function gu(){return null===pu?pu=268435456+Math.round(2147483648*Math.random()):pu++,"0x"+pu.toString(16)}const mu={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Ou{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}Ao(e){this.Ro=e}onMessage(e){this.Vo=e}close(){this.ho()}send(e){this.lo(e)}mo(){this.Io()}fo(){this.Eo()}po(e){this.Ro(e)}yo(e){this.Vo(e)}}const vu="WebChannelConnection";class yu extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.wo=t+"://"+e.host,this.So="projects/".concat(n,"/databases/").concat(i),this.bo="(default)"===this.databaseId.database?"project_id=".concat(n):"project_id=".concat(n,"&database_id=").concat(i)}get Do(){return!1}Co(e,t,n,i,r){const s=gu(),o=this.vo(e,t.toUriEncodedString());po("RestConnection","Sending RPC '".concat(e,"' ").concat(s,":"),o,n);const a={"google-cloud-resource-prefix":this.So,"x-goog-request-params":this.bo};return this.Fo(a,i,r),this.Mo(e,o,a,n).then((t=>(po("RestConnection","Received RPC '".concat(e,"' ").concat(s,": "),t),t)),(t=>{throw mo("RestConnection","RPC '".concat(e,"' ").concat(s," failed with error: "),t,"url: ",o,"request:",n),t}))}xo(e,t,n,i,r,s){return this.Co(e,t,n,i,r)}Fo(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+co,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((t,n)=>e[n]=t)),n&&n.headers.forEach(((t,n)=>e[n]=t))}vo(e,t){const n=mu[e];return"".concat(this.wo,"/v1/").concat(t,":").concat(n)}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Mo(e,t,n,i){const r=gu();return new Promise(((s,o)=>{const a=new Hs;a.setWithCredentials(!0),a.listenOnce(eo.COMPLETE,(()=>{try{switch(a.getLastErrorCode()){case to.NO_ERROR:const t=a.getResponseJson();po(vu,"XHR for RPC '".concat(e,"' ").concat(r," received:"),JSON.stringify(t)),s(t);break;case to.TIMEOUT:po(vu,"RPC '".concat(e,"' ").concat(r," timed out")),o(new ko(wo.DEADLINE_EXCEEDED,"Request time out"));break;case to.HTTP_ERROR:const n=a.getStatus();if(po(vu,"RPC '".concat(e,"' ").concat(r," failed with status:"),n,"response text:",a.getResponseText()),n>0){let e=a.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=null==e?void 0:e.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(wo).indexOf(t)>=0?t:wo.UNKNOWN}(t.status);o(new ko(e,t.message))}else o(new ko(wo.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new ko(wo.UNAVAILABLE,"Connection failed."));break;default:vo()}}finally{po(vu,"RPC '".concat(e,"' ").concat(r," completed."))}}));const l=JSON.stringify(i);po(vu,"RPC '".concat(e,"' ").concat(r," sending request:"),i),a.send(t,"POST",l,n,15)}))}Oo(e,t,n){const i=gu(),r=[this.wo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=so(),o=ro(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(a.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(a.xmlHttpFactory=new Ks({})),this.Fo(a.initMessageHeaders,t,n),a.encodeInitMessageHeaders=!0;const h=r.join("");po(vu,"Creating RPC '".concat(e,"' stream ").concat(i,": ").concat(h),a);const c=s.createWebChannel(h,a);let u=!1,d=!1;const f=new Ou({lo:t=>{d?po(vu,"Not sending because RPC '".concat(e,"' stream ").concat(i," is closed:"),t):(u||(po(vu,"Opening RPC '".concat(e,"' stream ").concat(i," transport.")),c.open(),u=!0),po(vu,"RPC '".concat(e,"' stream ").concat(i," sending:"),t),c.send(t))},ho:()=>c.close()}),p=(e,t,n)=>{e.listen(t,(e=>{try{n(e)}catch(e){setTimeout((()=>{throw e}),0)}}))};return p(c,Js.EventType.OPEN,(()=>{d||(po(vu,"RPC '".concat(e,"' stream ").concat(i," transport opened.")),f.mo())})),p(c,Js.EventType.CLOSE,(()=>{d||(d=!0,po(vu,"RPC '".concat(e,"' stream ").concat(i," transport closed")),f.po())})),p(c,Js.EventType.ERROR,(t=>{d||(d=!0,mo(vu,"RPC '".concat(e,"' stream ").concat(i," transport errored:"),t),f.po(new ko(wo.UNAVAILABLE,"The operation could not be completed")))})),p(c,Js.EventType.MESSAGE,(t=>{var n;if(!d){const r=t.data[0];yo(!!r);const s=r,o=s.error||(null===(n=s[0])||void 0===n?void 0:n.error);if(o){po(vu,"RPC '".concat(e,"' stream ").concat(i," received error:"),o);const t=o.status;let n=function(e){const t=Ah[e];if(void 0!==t)return Ih(t)}(t),r=o.message;void 0===n&&(n=wo.INTERNAL,r="Unknown error status: "+t+" with message "+o.message),d=!0,f.po(new ko(n,r)),c.close()}else po(vu,"RPC '".concat(e,"' stream ").concat(i," received:"),r),f.yo(r)}})),p(o,io.STAT_EVENT,(t=>{t.stat===no.PROXY?po(vu,"RPC '".concat(e,"' stream ").concat(i," detected buffering proxy")):t.stat===no.NOPROXY&&po(vu,"RPC '".concat(e,"' stream ").concat(i," detected no buffering proxy"))})),setTimeout((()=>{f.fo()}),0),f}}function bu(){return"undefined"!=typeof document?document:null}function wu(e){return new ec(e,!0)}class ku{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.oi=e,this.timerId=t,this.No=n,this.Lo=i,this.Bo=r,this.ko=0,this.qo=null,this.Qo=Date.now(),this.reset()}reset(){this.ko=0}Ko(){this.ko=this.Bo}$o(e){this.cancel();const t=Math.floor(this.ko+this.Uo()),n=Math.max(0,Date.now()-this.Qo),i=Math.max(0,t-n);i>0&&po("ExponentialBackoff","Backing off for ".concat(i," ms (base delay: ").concat(this.ko," ms, delay with jitter: ").concat(t," ms, last attempt: ").concat(n," ms ago)")),this.qo=this.oi.enqueueAfterDelay(this.timerId,i,(()=>(this.Qo=Date.now(),e()))),this.ko*=this.Lo,this.ko<this.No&&(this.ko=this.No),this.ko>this.Bo&&(this.ko=this.Bo)}Wo(){null!==this.qo&&(this.qo.skipDelay(),this.qo=null)}cancel(){null!==this.qo&&(this.qo.cancel(),this.qo=null)}Uo(){return(Math.random()-.5)*this.ko}}class Su{constructor(e,t,n,i,r,s,o,a){this.oi=e,this.Go=n,this.zo=i,this.connection=r,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=o,this.listener=a,this.state=0,this.jo=0,this.Ho=null,this.Jo=null,this.stream=null,this.Yo=new ku(e,t)}Zo(){return 1===this.state||5===this.state||this.Xo()}Xo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.e_()}async stop(){this.Zo()&&await this.close(0)}t_(){this.state=0,this.Yo.reset()}n_(){this.Xo()&&null===this.Ho&&(this.Ho=this.oi.enqueueAfterDelay(this.Go,6e4,(()=>this.r_())))}i_(e){this.s_(),this.stream.send(e)}async r_(){if(this.Xo())return this.close(0)}s_(){this.Ho&&(this.Ho.cancel(),this.Ho=null)}o_(){this.Jo&&(this.Jo.cancel(),this.Jo=null)}async close(e,t){this.s_(),this.o_(),this.Yo.cancel(),this.jo++,4!==e?this.Yo.reset():t&&t.code===wo.RESOURCE_EXHAUSTED?(go(t.toString()),go("Using maximum backoff delay to prevent overloading the backend."),this.Yo.Ko()):t&&t.code===wo.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.__(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Ao(t)}__(){}auth(){this.state=1;const e=this.a_(this.jo),t=this.jo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((e=>{let[n,i]=e;this.jo===t&&this.u_(n,i)}),(t=>{e((()=>{const e=new ko(wo.UNKNOWN,"Fetching auth token failed: "+t.message);return this.c_(e)}))}))}u_(e,t){const n=this.a_(this.jo);this.stream=this.l_(e,t),this.stream.Po((()=>{n((()=>this.listener.Po()))})),this.stream.To((()=>{n((()=>(this.state=2,this.Jo=this.oi.enqueueAfterDelay(this.zo,1e4,(()=>(this.Xo()&&(this.state=3),Promise.resolve()))),this.listener.To())))})),this.stream.Ao((e=>{n((()=>this.c_(e)))})),this.stream.onMessage((e=>{n((()=>this.onMessage(e)))}))}e_(){this.state=5,this.Yo.$o((async()=>{this.state=0,this.start()}))}c_(e){return po("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}a_(e){return t=>{this.oi.enqueueAndForget((()=>this.jo===e?t():(po("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class xu extends Su{constructor(e,t,n,i,r,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,i,s),this.serializer=r}l_(e,t){return this.connection.Oo("Listen",e,t)}onMessage(e){this.Yo.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const i=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:vo()}(t.targetChange.targetChangeType||"NO_CHANGE"),r=t.targetChange.targetIds||[],s=function(e,t){return e.useProto3Json?(yo(void 0===t||"string"==typeof t),Oa.fromBase64String(t||"")):(yo(void 0===t||t instanceof Buffer||t instanceof Uint8Array),Oa.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(e){const t=void 0===e.code?wo.UNKNOWN:Ih(e.code);return new ko(t,e.message||"")}(o);n=new Wh(i,r,s,a||null)}else if("documentChange"in t){t.documentChange;const i=t.documentChange;i.document,i.document.name,i.document.updateTime;const r=cc(e,i.document.name),s=sc(i.document.updateTime),o=i.document.createTime?sc(i.document.createTime):Lo.min(),a=new ja({mapValue:{fields:i.document.fields}}),l=Fa.newFoundDocument(r,s,o,a),h=i.targetIds||[],c=i.removedTargetIds||[];n=new Bh(h,c,l.key,l)}else if("documentDelete"in t){t.documentDelete;const i=t.documentDelete;i.document;const r=cc(e,i.document),s=i.readTime?sc(i.readTime):Lo.min(),o=Fa.newNoDocument(r,s),a=i.removedTargetIds||[];n=new Bh([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const i=t.documentRemove;i.document;const r=cc(e,i.document),s=i.removedTargetIds||[];n=new Bh([],s,r,null)}else{if(!("filter"in t))return vo();{t.filter;const e=t.filter;e.targetId;const{count:i=0,unchangedNames:r}=e,s=new Qh(i,r),o=e.targetId;n=new Fh(o,s)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return Lo.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?Lo.min():t.readTime?sc(t.readTime):Lo.min()}(e);return this.listener.h_(t,n)}P_(e){const t={};t.database=fc(this.serializer),t.addTarget=function(e,t){let n;const i=t.target;if(n=vl(i)?{documents:Oc(e,i)}:{query:vc(e,i)._t},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=ic(e,t.resumeToken);const i=tc(e,t.expectedCount);null!==i&&(n.expectedCount=i)}else if(t.snapshotVersion.compareTo(Lo.min())>0){n.readTime=nc(e,t.snapshotVersion.toTimestamp());const i=tc(e,t.expectedCount);null!==i&&(n.expectedCount=i)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return vo()}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.i_(t)}I_(e){const t={};t.database=fc(this.serializer),t.removeTarget=e,this.i_(t)}}class Tu extends Su{constructor(e,t,n,i,r,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,i,s),this.serializer=r,this.T_=!1}get E_(){return this.T_}start(){this.T_=!1,this.lastStreamToken=void 0,super.start()}__(){this.T_&&this.d_([])}l_(e,t){return this.connection.Oo("Write",e,t)}onMessage(e){if(yo(!!e.streamToken),this.lastStreamToken=e.streamToken,this.T_){this.Yo.reset();const t=function(e,t){return e&&e.length>0?(yo(void 0!==t),e.map((e=>function(e,t){let n=e.updateTime?sc(e.updateTime):sc(t);return n.isEqual(Lo.min())&&(n=sc(t)),new uh(n,e.transformResults||[])}(e,t)))):[]}(e.writeResults,e.commitTime),n=sc(e.commitTime);return this.listener.A_(n,t)}return yo(!e.writeResults||0===e.writeResults.length),this.T_=!0,this.listener.R_()}V_(){const e={};e.database=fc(this.serializer),this.i_(e)}d_(e){const t={streamToken:this.lastStreamToken,writes:e.map((e=>mc(this.serializer,e)))};this.i_(t)}}class _u extends class{}{constructor(e,t,n,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=i,this.m_=!1}f_(){if(this.m_)throw new ko(wo.FAILED_PRECONDITION,"The client has already been terminated.")}Co(e,t,n,i){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((r=>{let[s,o]=r;return this.connection.Co(e,ac(t,n),i,s,o)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===wo.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new ko(wo.UNKNOWN,e.toString())}))}xo(e,t,n,i,r){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((s=>{let[o,a]=s;return this.connection.xo(e,ac(t,n),i,o,a,r)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===wo.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new ko(wo.UNKNOWN,e.toString())}))}terminate(){this.m_=!0,this.connection.terminate()}}class Pu{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.g_=0,this.p_=null,this.y_=!0}w_(){0===this.g_&&(this.S_("Unknown"),this.p_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.p_=null,this.b_("Backend didn't respond within 10 seconds."),this.S_("Offline"),Promise.resolve()))))}D_(e){"Online"===this.state?this.S_("Unknown"):(this.g_++,this.g_>=1&&(this.C_(),this.b_("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.S_("Offline")))}set(e){this.C_(),this.g_=0,"Online"===e&&(this.y_=!1),this.S_(e)}S_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}b_(e){const t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.y_?(go(t),this.y_=!1):po("OnlineStateTracker",t)}C_(){null!==this.p_&&(this.p_.cancel(),this.p_=null)}}class Cu{constructor(e,t,n,i,r){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.v_=[],this.F_=new Map,this.M_=new Set,this.x_=[],this.O_=r,this.O_.io((e=>{n.enqueueAndForget((async()=>{Lu(this)&&(po("RemoteStore","Restarting streams for network reachability change."),await async function(e){const t=bo(e);t.M_.add(4),await Qu(t),t.N_.set("Unknown"),t.M_.delete(4),await Eu(t)}(this))}))})),this.N_=new Pu(n,i)}}async function Eu(e){if(Lu(e))for(const t of e.x_)await t(!0)}async function Qu(e){for(const t of e.x_)await t(!1)}function Au(e,t){const n=bo(e);n.F_.has(t.targetId)||(n.F_.set(t.targetId,t),Mu(n)?Du(n):nd(n).Xo()&&Nu(n,t))}function Ru(e,t){const n=bo(e),i=nd(n);n.F_.delete(t),i.Xo()&&Iu(n,t),0===n.F_.size&&(i.Xo()?i.n_():Lu(n)&&n.N_.set("Unknown"))}function Nu(e,t){if(e.L_.xe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Lo.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}nd(e).P_(t)}function Iu(e,t){e.L_.xe(t),nd(e).I_(t)}function Du(e){e.L_=new Yh({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),ot:t=>e.F_.get(t)||null,tt:()=>e.datastore.serializer.databaseId}),nd(e).start(),e.N_.w_()}function Mu(e){return Lu(e)&&!nd(e).Zo()&&e.F_.size>0}function Lu(e){return 0===bo(e).M_.size}function $u(e){e.L_=void 0}async function Uu(e){e.N_.set("Online")}async function qu(e){e.F_.forEach(((t,n)=>{Nu(e,t)}))}async function Vu(e,t){$u(e),Mu(e)?(e.N_.D_(t),Du(e)):e.N_.set("Unknown")}async function zu(e,t,n){if(e.N_.set("Online"),t instanceof Wh&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const i of t.targetIds)e.F_.has(i)&&(await e.remoteSyncer.rejectListen(i,n),e.F_.delete(i),e.L_.removeTarget(i))}(e,t)}catch(n){po("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),n),await ju(e,n)}else if(t instanceof Bh?e.L_.Ke(t):t instanceof Fh?e.L_.He(t):e.L_.We(t),!n.isEqual(Lo.min()))try{const t=await iu(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.L_.rt(t);return n.targetChanges.forEach(((n,i)=>{if(n.resumeToken.approximateByteSize()>0){const r=e.F_.get(i);r&&e.F_.set(i,r.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach(((t,n)=>{const i=e.F_.get(t);if(!i)return;e.F_.set(t,i.withResumeToken(Oa.EMPTY_BYTE_STRING,i.snapshotVersion)),Iu(e,t);const r=new Ec(i.target,t,n,i.sequenceNumber);Nu(e,r)})),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){po("RemoteStore","Failed to raise snapshot:",t),await ju(e,t)}}async function ju(e,t,n){if(!Jo(t))throw t;e.M_.add(1),await Qu(e),e.N_.set("Offline"),n||(n=()=>iu(e.localStore)),e.asyncQueue.enqueueRetryable((async()=>{po("RemoteStore","Retrying IndexedDB access"),await n(),e.M_.delete(1),await Eu(e)}))}function Bu(e,t){return t().catch((n=>ju(e,n,t)))}async function Fu(e){const t=bo(e),n=id(t);let i=t.v_.length>0?t.v_[t.v_.length-1].batchId:-1;for(;Wu(t);)try{const e=await su(t.localStore,i);if(null===e){0===t.v_.length&&n.n_();break}i=e.batchId,Xu(t,e)}catch(e){await ju(t,e)}Yu(t)&&Gu(t)}function Wu(e){return Lu(e)&&e.v_.length<10}function Xu(e,t){e.v_.push(t);const n=id(e);n.Xo()&&n.E_&&n.d_(t.mutations)}function Yu(e){return Lu(e)&&!id(e).Zo()&&e.v_.length>0}function Gu(e){id(e).start()}async function Zu(e){id(e).V_()}async function Hu(e){const t=id(e);for(const n of e.v_)t.d_(n.mutations)}async function Ku(e,t,n){const i=e.v_.shift(),r=Ch.from(i,t,n);await Bu(e,(()=>e.remoteSyncer.applySuccessfulWrite(r))),await Fu(e)}async function Ju(e,t){t&&id(e).E_&&await async function(e,t){if(function(e){return Nh(e)&&e!==wo.ABORTED}(t.code)){const n=e.v_.shift();id(e).t_(),await Bu(e,(()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t))),await Fu(e)}}(e,t),Yu(e)&&Gu(e)}async function ed(e,t){const n=bo(e);n.asyncQueue.verifyOperationInProgress(),po("RemoteStore","RemoteStore received new credentials");const i=Lu(n);n.M_.add(3),await Qu(n),i&&n.N_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.M_.delete(3),await Eu(n)}async function td(e,t){const n=bo(e);t?(n.M_.delete(2),await Eu(n)):t||(n.M_.add(2),await Qu(n),n.N_.set("Unknown"))}function nd(e){return e.B_||(e.B_=function(e,t,n){const i=bo(e);return i.f_(),new xu(t,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,n)}(e.datastore,e.asyncQueue,{Po:Uu.bind(null,e),To:qu.bind(null,e),Ao:Vu.bind(null,e),h_:zu.bind(null,e)}),e.x_.push((async t=>{t?(e.B_.t_(),Mu(e)?Du(e):e.N_.set("Unknown")):(await e.B_.stop(),$u(e))}))),e.B_}function id(e){return e.k_||(e.k_=function(e,t,n){const i=bo(e);return i.f_(),new Tu(t,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,n)}(e.datastore,e.asyncQueue,{Po:()=>Promise.resolve(),To:Zu.bind(null,e),Ao:Ju.bind(null,e),R_:Hu.bind(null,e),A_:Ku.bind(null,e)}),e.x_.push((async t=>{t?(e.k_.t_(),await Fu(e)):(await e.k_.stop(),e.v_.length>0&&(po("RemoteStore","Stopping write stream with ".concat(e.v_.length," pending writes")),e.v_=[]))}))),e.k_}class rd{constructor(e,t,n,i,r){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=i,this.removalCallback=r,this.deferred=new So,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((e=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,i,r){const s=Date.now()+n,o=new rd(e,t,s,i,r);return o.start(n),o}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new ko(wo.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function sd(e,t){if(go("AsyncQueue","".concat(t,": ").concat(e)),Jo(e))return new ko(wo.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}class od{constructor(e){this.comparator=e?(t,n)=>e(t,n)||zo.comparator(t.key,n.key):(e,t)=>zo.comparator(e.key,t.key),this.keyedMap=ql(),this.sortedSet=new ca(this.comparator)}static emptySet(e){return new od(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,n)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof od))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,i=n.getNext().key;if(!e.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new od;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class ad{constructor(){this.q_=new ca(zo.comparator)}track(e){const t=e.doc.key,n=this.q_.get(t);n?0!==e.type&&3===n.type?this.q_=this.q_.insert(t,e):3===e.type&&1!==n.type?this.q_=this.q_.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.q_=this.q_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.q_=this.q_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.q_=this.q_.remove(t):1===e.type&&2===n.type?this.q_=this.q_.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.q_=this.q_.insert(t,{type:2,doc:e.doc}):vo():this.q_=this.q_.insert(t,e)}Q_(){const e=[];return this.q_.inorderTraversal(((t,n)=>{e.push(n)})),e}}class ld{constructor(e,t,n,i,r,s,o,a,l){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=i,this.mutatedKeys=r,this.fromCache=s,this.syncStateChanged=o,this.excludesMetadataChanges=a,this.hasCachedResults=l}static fromInitialDocuments(e,t,n,i,r){const s=[];return t.forEach((e=>{s.push({type:0,doc:e})})),new ld(e,t,od.emptySet(t),s,n,i,!0,!1,r)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&El(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==n[i].type||!t[i].doc.isEqual(n[i].doc))return!1;return!0}}class hd{constructor(){this.K_=void 0,this.U_=[]}W_(){return this.U_.some((e=>e.G_()))}}class cd{constructor(){this.queries=new Ml((e=>Ql(e)),El),this.onlineState="Unknown",this.z_=new Set}}async function ud(e,t){const n=bo(e);let i=3;const r=t.query;let s=n.queries.get(r);s?!s.W_()&&t.G_()&&(i=2):(s=new hd,i=t.G_()?0:1);try{switch(i){case 0:s.K_=await n.onListen(r,!0);break;case 1:s.K_=await n.onListen(r,!1);break;case 2:await n.onFirstRemoteStoreListen(r)}}catch(e){const n=sd(e,"Initialization of query '".concat(Al(t.query),"' failed"));return void t.onError(n)}n.queries.set(r,s),s.U_.push(t),t.j_(n.onlineState),s.K_&&t.H_(s.K_)&&gd(n)}async function dd(e,t){const n=bo(e),i=t.query;let r=3;const s=n.queries.get(i);if(s){const e=s.U_.indexOf(t);e>=0&&(s.U_.splice(e,1),0===s.U_.length?r=t.G_()?0:1:!s.W_()&&t.G_()&&(r=2))}switch(r){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function fd(e,t){const n=bo(e);let i=!1;for(const r of t){const e=r.query,t=n.queries.get(e);if(t){for(const e of t.U_)e.H_(r)&&(i=!0);t.K_=r}}i&&gd(n)}function pd(e,t,n){const i=bo(e),r=i.queries.get(t);if(r)for(const s of r.U_)s.onError(n);i.queries.delete(t)}function gd(e){e.z_.forEach((e=>{e.next()}))}var md,Od;(Od=md||(md={})).J_="default",Od.Cache="cache";class vd{constructor(e,t,n){this.query=e,this.Y_=t,this.Z_=!1,this.X_=null,this.onlineState="Unknown",this.options=n||{}}H_(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new ld(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Z_?this.ea(e)&&(this.Y_.next(e),t=!0):this.ta(e,this.onlineState)&&(this.na(e),t=!0),this.X_=e,t}onError(e){this.Y_.error(e)}j_(e){this.onlineState=e;let t=!1;return this.X_&&!this.Z_&&this.ta(this.X_,e)&&(this.na(this.X_),t=!0),t}ta(e,t){if(!e.fromCache)return!0;if(!this.G_())return!0;const n="Offline"!==t;return(!this.options.ra||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}ea(e){if(e.docChanges.length>0)return!0;const t=this.X_&&this.X_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}na(e){e=ld.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Z_=!0,this.Y_.next(e)}G_(){return this.options.source!==md.Cache}}class yd{constructor(e){this.key=e}}class bd{constructor(e){this.key=e}}class wd{constructor(e,t){this.query=e,this.la=t,this.ha=null,this.hasCachedResults=!1,this.current=!1,this.Pa=Xl(),this.mutatedKeys=Xl(),this.Ia=Il(e),this.Ta=new od(this.Ia)}get Ea(){return this.la}da(e,t){const n=t?t.Aa:new ad,i=t?t.Ta:this.Ta;let r=t?t.mutatedKeys:this.mutatedKeys,s=i,o=!1;const a="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,l="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal(((e,t)=>{const h=i.get(e),c=Rl(this.query,t)?t:null,u=!!h&&this.mutatedKeys.has(h.key),d=!!c&&(c.hasLocalMutations||this.mutatedKeys.has(c.key)&&c.hasCommittedMutations);let f=!1;h&&c?h.data.isEqual(c.data)?u!==d&&(n.track({type:3,doc:c}),f=!0):this.Ra(h,c)||(n.track({type:2,doc:c}),f=!0,(a&&this.Ia(c,a)>0||l&&this.Ia(c,l)<0)&&(o=!0)):!h&&c?(n.track({type:0,doc:c}),f=!0):h&&!c&&(n.track({type:1,doc:h}),f=!0,(a||l)&&(o=!0)),f&&(c?(s=s.add(c),r=d?r.add(e):r.delete(e)):(s=s.delete(e),r=r.delete(e)))})),null!==this.query.limit)for(;s.size>this.query.limit;){const e="F"===this.query.limitType?s.last():s.first();s=s.delete(e.key),r=r.delete(e.key),n.track({type:1,doc:e})}return{Ta:s,Aa:n,Xi:o,mutatedKeys:r}}Ra(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,i){const r=this.Ta;this.Ta=e.Ta,this.mutatedKeys=e.mutatedKeys;const s=e.Aa.Q_();s.sort(((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return vo()}};return n(e)-n(t)}(e.type,t.type)||this.Ia(e.doc,t.doc))),this.Va(n),i=null!=i&&i;const o=t&&!i?this.ma():[],a=0===this.Pa.size&&this.current&&!i?1:0,l=a!==this.ha;return this.ha=a,0!==s.length||l?{snapshot:new ld(this.query,e.Ta,r,s,e.mutatedKeys,0===a,l,!1,!!n&&n.resumeToken.approximateByteSize()>0),fa:o}:{fa:o}}j_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Ta:this.Ta,Aa:new ad,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{fa:[]}}ga(e){return!this.la.has(e)&&!!this.Ta.has(e)&&!this.Ta.get(e).hasLocalMutations}Va(e){e&&(e.addedDocuments.forEach((e=>this.la=this.la.add(e))),e.modifiedDocuments.forEach((e=>{})),e.removedDocuments.forEach((e=>this.la=this.la.delete(e))),this.current=e.current)}ma(){if(!this.current)return[];const e=this.Pa;this.Pa=Xl(),this.Ta.forEach((e=>{this.ga(e.key)&&(this.Pa=this.Pa.add(e.key))}));const t=[];return e.forEach((e=>{this.Pa.has(e)||t.push(new bd(e))})),this.Pa.forEach((n=>{e.has(n)||t.push(new yd(n))})),t}pa(e){this.la=e.hs,this.Pa=Xl();const t=this.da(e.documents);return this.applyChanges(t,!0)}ya(){return ld.fromInitialDocuments(this.query,this.Ta,this.mutatedKeys,0===this.ha,this.hasCachedResults)}}class kd{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class Sd{constructor(e){this.key=e,this.wa=!1}}class xd{constructor(e,t,n,i,r,s){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=i,this.currentUser=r,this.maxConcurrentLimboResolutions=s,this.Sa={},this.ba=new Ml((e=>Ql(e)),El),this.Da=new Map,this.Ca=new Set,this.va=new ca(zo.comparator),this.Fa=new Map,this.Ma=new zc,this.xa={},this.Oa=new Map,this.Na=Mc.Ln(),this.onlineState="Unknown",this.La=void 0}get isPrimaryClient(){return!0===this.La}}async function Td(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const i=Wd(e);let r;const s=i.ba.get(t);return s?(i.sharedClientState.addLocalQueryTarget(s.targetId),r=s.view.ya()):r=await Pd(i,t,n,!0),r}async function _d(e,t){const n=Wd(e);await Pd(n,t,!0,!1)}async function Pd(e,t,n,i){const r=await ou(e.localStore,Tl(t)),s=r.targetId,o=n?e.sharedClientState.addLocalQueryTarget(s):"not-current";let a;return i&&(a=await Cd(e,t,s,"current"===o,r.resumeToken)),e.isPrimaryClient&&n&&Au(e.remoteStore,r),a}async function Cd(e,t,n,i,r){e.Ba=(t,n,i)=>async function(e,t,n,i){let r=t.view.da(n);r.Xi&&(r=await lu(e.localStore,t.query,!1).then((e=>{let{documents:n}=e;return t.view.da(n,r)})));const s=i&&i.targetChanges.get(t.targetId),o=i&&null!=i.targetMismatches.get(t.targetId),a=t.view.applyChanges(r,e.isPrimaryClient,s,o);return qd(e,t.targetId,a.fa),a.snapshot}(e,t,n,i);const s=await lu(e.localStore,t,!0),o=new wd(t,s.hs),a=o.da(s.documents),l=jh.createSynthesizedTargetChangeForCurrentChange(n,i&&"Offline"!==e.onlineState,r),h=o.applyChanges(a,e.isPrimaryClient,l);qd(e,n,h.fa);const c=new kd(t,n,o);return e.ba.set(t,c),e.Da.has(n)?e.Da.get(n).push(t):e.Da.set(n,[t]),h.snapshot}async function Ed(e,t,n){const i=bo(e),r=i.ba.get(t),s=i.Da.get(r.targetId);if(s.length>1)return i.Da.set(r.targetId,s.filter((e=>!El(e,t)))),void i.ba.delete(t);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||await au(i.localStore,r.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(r.targetId),n&&Ru(i.remoteStore,r.targetId),$d(i,r.targetId)})).catch(Zo)):($d(i,r.targetId),await au(i.localStore,r.targetId,!0))}async function Qd(e,t){const n=bo(e),i=n.ba.get(t),r=n.Da.get(i.targetId);n.isPrimaryClient&&1===r.length&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),Ru(n.remoteStore,i.targetId))}async function Ad(e,t){const n=bo(e);try{const e=await function(e,t){const n=bo(e),i=t.snapshotVersion;let r=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(e=>{const s=n.os.newChangeBuffer({trackRemovals:!0});r=n.ns;const o=[];t.targetChanges.forEach(((s,a)=>{const l=r.get(a);if(!l)return;o.push(n.Qr.removeMatchingKeys(e,s.removedDocuments,a).next((()=>n.Qr.addMatchingKeys(e,s.addedDocuments,a))));let h=l.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(a)?h=h.withResumeToken(Oa.EMPTY_BYTE_STRING,Lo.min()).withLastLimboFreeSnapshotVersion(Lo.min()):s.resumeToken.approximateByteSize()>0&&(h=h.withResumeToken(s.resumeToken,i)),r=r.insert(a,h),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(l,h,s)&&o.push(n.Qr.updateTargetData(e,h))}));let a=$l(),l=Xl();if(t.documentUpdates.forEach((i=>{t.resolvedLimboDocuments.has(i)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,i))})),o.push(ru(e,s,t.documentUpdates).next((e=>{a=e.cs,l=e.ls}))),!i.isEqual(Lo.min())){const t=n.Qr.getLastRemoteSnapshotVersion(e).next((t=>n.Qr.setTargetsMetadata(e,e.currentSequenceNumber,i)));o.push(t)}return Ho.waitFor(o).next((()=>s.apply(e))).next((()=>n.localDocuments.getLocalViewOfDocuments(e,a,l))).next((()=>a))})).then((e=>(n.ns=r,e)))}(n.localStore,t);t.targetChanges.forEach(((e,t)=>{const i=n.Fa.get(t);i&&(yo(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?i.wa=!0:e.modifiedDocuments.size>0?yo(i.wa):e.removedDocuments.size>0&&(yo(i.wa),i.wa=!1))})),await jd(n,e,t)}catch(e){await Zo(e)}}function Rd(e,t,n){const i=bo(e);if(i.isPrimaryClient&&0===n||!i.isPrimaryClient&&1===n){const e=[];i.ba.forEach(((n,i)=>{const r=i.view.j_(t);r.snapshot&&e.push(r.snapshot)})),function(e,t){const n=bo(e);n.onlineState=t;let i=!1;n.queries.forEach(((e,n)=>{for(const r of n.U_)r.j_(t)&&(i=!0)})),i&&gd(n)}(i.eventManager,t),e.length&&i.Sa.h_(e),i.onlineState=t,i.isPrimaryClient&&i.sharedClientState.setOnlineState(t)}}async function Nd(e,t,n){const i=bo(e);i.sharedClientState.updateQueryState(t,"rejected",n);const r=i.Fa.get(t),s=r&&r.key;if(s){let e=new ca(zo.comparator);e=e.insert(s,Fa.newNoDocument(s,Lo.min()));const n=Xl().add(s),r=new zh(Lo.min(),new Map,new ca(Io),e,n);await Ad(i,r),i.va=i.va.remove(s),i.Fa.delete(t),zd(i)}else await au(i.localStore,t,!1).then((()=>$d(i,t,n))).catch(Zo)}async function Id(e,t){const n=bo(e),i=t.batch.batchId;try{const e=await function(e,t){const n=bo(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(e=>{const i=t.batch.keys(),r=n.os.newChangeBuffer({trackRemovals:!0});return function(e,t,n,i){const r=n.batch,s=r.keys();let o=Ho.resolve();return s.forEach((e=>{o=o.next((()=>i.getEntry(t,e))).next((t=>{const s=n.docVersions.get(e);yo(null!==s),t.version.compareTo(s)<0&&(r.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),i.addEntry(t)))}))})),o.next((()=>e.mutationQueue.removeMutationBatch(t,r)))}(n,e,t,r).next((()=>r.apply(e))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,i,t.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=Xl();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t)))).next((()=>n.localDocuments.getDocuments(e,i)))}))}(n.localStore,t);Ld(n,i,null),Md(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await jd(n,e)}catch(e){await Zo(e)}}async function Dd(e,t,n){const i=bo(e);try{const e=await function(e,t){const n=bo(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(e=>{let i;return n.mutationQueue.lookupMutationBatch(e,t).next((t=>(yo(null!==t),i=t.keys(),n.mutationQueue.removeMutationBatch(e,t)))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,i,t))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,i))).next((()=>n.localDocuments.getDocuments(e,i)))}))}(i.localStore,t);Ld(i,t,n),Md(i,t),i.sharedClientState.updateMutationState(t,"rejected",n),await jd(i,e)}catch(n){await Zo(n)}}function Md(e,t){(e.Oa.get(t)||[]).forEach((e=>{e.resolve()})),e.Oa.delete(t)}function Ld(e,t,n){const i=bo(e);let r=i.xa[i.currentUser.toKey()];if(r){const e=r.get(t);e&&(n?e.reject(n):e.resolve(),r=r.remove(t)),i.xa[i.currentUser.toKey()]=r}}function $d(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);for(const i of e.Da.get(t))e.ba.delete(i),n&&e.Sa.ka(i,n);e.Da.delete(t),e.isPrimaryClient&&e.Ma.Vr(t).forEach((t=>{e.Ma.containsKey(t)||Ud(e,t)}))}function Ud(e,t){e.Ca.delete(t.path.canonicalString());const n=e.va.get(t);null!==n&&(Ru(e.remoteStore,n),e.va=e.va.remove(t),e.Fa.delete(n),zd(e))}function qd(e,t,n){for(const i of n)i instanceof yd?(e.Ma.addReference(i.key,t),Vd(e,i)):i instanceof bd?(po("SyncEngine","Document no longer in limbo: "+i.key),e.Ma.removeReference(i.key,t),e.Ma.containsKey(i.key)||Ud(e,i.key)):vo()}function Vd(e,t){const n=t.key,i=n.path.canonicalString();e.va.get(n)||e.Ca.has(i)||(po("SyncEngine","New document in limbo: "+n),e.Ca.add(i),zd(e))}function zd(e){for(;e.Ca.size>0&&e.va.size<e.maxConcurrentLimboResolutions;){const t=e.Ca.values().next().value;e.Ca.delete(t);const n=new zo(Uo.fromString(t)),i=e.Na.next();e.Fa.set(i,new Sd(n)),e.va=e.va.insert(n,i),Au(e.remoteStore,new Ec(Tl(wl(n.path)),i,"TargetPurposeLimboResolution",ea.oe))}}async function jd(e,t,n){const i=bo(e),r=[],s=[],o=[];i.ba.isEmpty()||(i.ba.forEach(((e,a)=>{o.push(i.Ba(a,t,n).then((e=>{var t;if((e||n)&&i.isPrimaryClient){const r=e?!e.fromCache:null===(t=null==n?void 0:n.targetChanges.get(a.targetId))||void 0===t?void 0:t.current;i.sharedClientState.updateQueryState(a.targetId,r?"current":"not-current")}if(e){r.push(e);const t=Hc.Ki(a.targetId,e);s.push(t)}})))})),await Promise.all(o),i.Sa.h_(r),await async function(e,t){const n=bo(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(e=>Ho.forEach(t,(t=>Ho.forEach(t.qi,(i=>n.persistence.referenceDelegate.addReference(e,t.targetId,i))).next((()=>Ho.forEach(t.Qi,(i=>n.persistence.referenceDelegate.removeReference(e,t.targetId,i)))))))))}catch(e){if(!Jo(e))throw e;po("LocalStore","Failed to update sequence numbers: "+e)}for(const i of t){const e=i.targetId;if(!i.fromCache){const t=n.ns.get(e),i=t.snapshotVersion,r=t.withLastLimboFreeSnapshotVersion(i);n.ns=n.ns.insert(e,r)}}}(i.localStore,s))}async function Bd(e,t){const n=bo(e);if(!n.currentUser.isEqual(t)){po("SyncEngine","User change. New user:",t.toKey());const e=await nu(n.localStore,t);n.currentUser=t,function(e,t){e.Oa.forEach((e=>{e.forEach((e=>{e.reject(new ko(wo.CANCELLED,t))}))})),e.Oa.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await jd(n,e.us)}}function Fd(e,t){const n=bo(e),i=n.Fa.get(t);if(i&&i.wa)return Xl().add(i.key);{let e=Xl();const i=n.Da.get(t);if(!i)return e;for(const t of i){const i=n.ba.get(t);e=e.unionWith(i.view.Ea)}return e}}function Wd(e){const t=bo(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Ad.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Fd.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Nd.bind(null,t),t.Sa.h_=fd.bind(null,t.eventManager),t.Sa.ka=pd.bind(null,t.eventManager),t}function Xd(e){const t=bo(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Id.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Dd.bind(null,t),t}class Yd{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=wu(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return tu(this.persistence,new Jc,e.initialUser,this.serializer)}createPersistence(e){return new Yc(Zc.Hr,this.serializer)}createSharedClientState(e){return new uu}async terminate(){var e,t;null===(e=this.gcScheduler)||void 0===e||e.stop(),null===(t=this.indexBackfillerScheduler)||void 0===t||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class Gd{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>Rd(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=Bd.bind(null,this.syncEngine),await td(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new cd}createDatastore(e){const t=wu(e.databaseInfo.databaseId),n=function(e){return new yu(e)}(e.databaseInfo);return function(e,t,n,i){return new _u(e,t,n,i)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,i,r){return new Cu(e,t,n,i,r)}(this.localStore,this.datastore,e.asyncQueue,(e=>Rd(this.syncEngine,e,0)),fu.D()?new fu:new du)}createSyncEngine(e,t){return function(e,t,n,i,r,s,o){const a=new xd(e,t,n,i,r,s);return o&&(a.La=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e;await async function(e){const t=bo(e);po("RemoteStore","RemoteStore shutting down."),t.M_.add(5),await Qu(t),t.O_.shutdown(),t.N_.set("Unknown")}(this.remoteStore),null===(e=this.datastore)||void 0===e||e.terminate()}}class Zd{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ka(this.observer.next,e)}error(e){this.observer.error?this.Ka(this.observer.error,e):go("Uncaught Error in snapshot listener:",e.toString())}$a(){this.muted=!0}Ka(e,t){this.muted||setTimeout((()=>{this.muted||e(t)}),0)}}class Hd{constructor(e,t,n,i){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=i,this.user=ho.UNAUTHENTICATED,this.clientId=No.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,(async e=>{po("FirestoreClient","Received user=",e.uid),await this.authCredentialListener(e),this.user=e})),this.appCheckCredentials.start(n,(e=>(po("FirestoreClient","Received new app check token=",e),this.appCheckCredentialListener(e,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new ko(wo.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new So;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(wx){const n=sd(wx,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}async function Kd(e,t){e.asyncQueue.verifyOperationInProgress(),po("FirestoreClient","Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let i=n.initialUser;e.setCredentialChangeListener((async e=>{i.isEqual(e)||(await nu(t.localStore,e),i=e)})),t.persistence.setDatabaseDeletedListener((()=>e.terminate())),e._offlineComponents=t}async function Jd(e,t){e.asyncQueue.verifyOperationInProgress();const n=await tf(e);po("FirestoreClient","Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener((e=>ed(t.remoteStore,e))),e.setAppCheckTokenChangeListener(((e,n)=>ed(t.remoteStore,n))),e._onlineComponents=t}function ef(e){return"FirebaseError"===e.name?e.code===wo.FAILED_PRECONDITION||e.code===wo.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}async function tf(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){po("FirestoreClient","Using user provided OfflineComponentProvider");try{await Kd(e,e._uninitializedComponentsProvider._offline)}catch(wx){const n=wx;if(!ef(n))throw n;mo("Error using user provided cache. Falling back to memory cache: "+n),await Kd(e,new Yd)}}else po("FirestoreClient","Using default OfflineComponentProvider"),await Kd(e,new Yd);return e._offlineComponents}async function nf(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(po("FirestoreClient","Using user provided OnlineComponentProvider"),await Jd(e,e._uninitializedComponentsProvider._online)):(po("FirestoreClient","Using default OnlineComponentProvider"),await Jd(e,new Gd))),e._onlineComponents}function rf(e){return nf(e).then((e=>e.syncEngine))}async function sf(e){const t=await nf(e),n=t.eventManager;return n.onListen=Td.bind(null,t.syncEngine),n.onUnlisten=Ed.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=_d.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=Qd.bind(null,t.syncEngine),n}function of(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i=new So;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,i,r){const s=new Zd({next:s=>{t.enqueueAndForget((()=>dd(e,o)));const a=s.docs.has(n);!a&&s.fromCache?r.reject(new ko(wo.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&s.fromCache&&i&&"server"===i.source?r.reject(new ko(wo.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):r.resolve(s)},error:e=>r.reject(e)}),o=new vd(wl(n.path),s,{includeMetadataChanges:!0,ra:!0});return ud(e,o)}(await sf(e),e.asyncQueue,t,n,i))),i.promise}function af(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i=new So;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,i,r){const s=new Zd({next:n=>{t.enqueueAndForget((()=>dd(e,o))),n.fromCache&&"server"===i.source?r.reject(new ko(wo.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):r.resolve(n)},error:e=>r.reject(e)}),o=new vd(n,s,{includeMetadataChanges:!0,ra:!0});return ud(e,o)}(await sf(e),e.asyncQueue,t,n,i))),i.promise}function lf(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const hf=new Map;function cf(e,t,n){if(!n)throw new ko(wo.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function uf(e){if(!zo.isDocumentKey(e))throw new ko(wo.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function df(e){if(zo.isDocumentKey(e))throw new ko(wo.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function ff(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}}return"function"==typeof e?"a function":vo()}function pf(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new ko(wo.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=ff(e);throw new ko(wo.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}}return e}class gf{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new ko(wo.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new ko(wo.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function(e,t,n,i){if(!0===t&&!0===i)throw new ko(wo.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=lf(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new ko(wo.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (must not be NaN)"));if(e.timeoutSeconds<5)throw new ko(wo.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (minimum allowed value is 5)"));if(e.timeoutSeconds>30)throw new ko(wo.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class mf{constructor(e,t,n,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new gf({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new ko(wo.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new ko(wo.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new gf(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new To;switch(e.type){case"firstParty":return new Eo(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new ko(wo.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=hf.get(e);t&&(po("ComponentProvider","Removing Datastore"),hf.delete(e),t.terminate())}(this),Promise.resolve()}}class Of{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Of(this.firestore,e,this._query)}}class vf{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new yf(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new vf(this.firestore,e,this._key)}}class yf extends Of{constructor(e,t,n){super(e,t,wl(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new vf(this.firestore,null,new zo(e))}withConverter(e){return new yf(this.firestore,e,this._path)}}function bf(e,t){for(var n=arguments.length,i=new Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];if(e=Ze(e),cf("collection","path",t),e instanceof mf){const n=Uo.fromString(t,...i);return df(n),new yf(e,null,n)}{if(!(e instanceof vf||e instanceof yf))throw new ko(wo.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(Uo.fromString(t,...i));return df(n),new yf(e.firestore,null,n)}}function wf(e,t){for(var n=arguments.length,i=new Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];if(e=Ze(e),1===arguments.length&&(t=No.newId()),cf("doc","path",t),e instanceof mf){const n=Uo.fromString(t,...i);return uf(n),new vf(e,null,new zo(n))}{if(!(e instanceof vf||e instanceof yf))throw new ko(wo.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(Uo.fromString(t,...i));return uf(n),new vf(e.firestore,e instanceof yf?e.converter:null,new zo(n))}}class kf{constructor(){this.iu=Promise.resolve(),this.su=[],this.ou=!1,this._u=[],this.au=null,this.uu=!1,this.cu=!1,this.lu=[],this.Yo=new ku(this,"async_queue_retry"),this.hu=()=>{const e=bu();e&&po("AsyncQueue","Visibility state changed to "+e.visibilityState),this.Yo.Wo()};const e=bu();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.hu)}get isShuttingDown(){return this.ou}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Pu(),this.Iu(e)}enterRestrictedMode(e){if(!this.ou){this.ou=!0,this.cu=e||!1;const t=bu();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.hu)}}enqueue(e){if(this.Pu(),this.ou)return new Promise((()=>{}));const t=new So;return this.Iu((()=>this.ou&&this.cu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.su.push(e),this.Tu())))}async Tu(){if(0!==this.su.length){try{await this.su[0](),this.su.shift(),this.Yo.reset()}catch(_F){if(!Jo(_F))throw _F;po("AsyncQueue","Operation failed with retryable error: "+_F)}this.su.length>0&&this.Yo.$o((()=>this.Tu()))}}Iu(e){const t=this.iu.then((()=>(this.uu=!0,e().catch((e=>{this.au=e,this.uu=!1;const t=function(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw go("INTERNAL UNHANDLED ERROR: ",t),e})).then((e=>(this.uu=!1,e))))));return this.iu=t,t}enqueueAfterDelay(e,t,n){this.Pu(),this.lu.indexOf(e)>-1&&(t=0);const i=rd.createAndSchedule(this,e,t,n,(e=>this.Eu(e)));return this._u.push(i),i}Pu(){this.au&&vo()}verifyOperationInProgress(){}async du(){let e;do{e=this.iu,await e}while(e!==this.iu)}Au(e){for(const t of this._u)if(t.timerId===e)return!0;return!1}Ru(e){return this.du().then((()=>{this._u.sort(((e,t)=>e.targetTimeMs-t.targetTimeMs));for(const t of this._u)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.du()}))}Vu(e){this.lu.push(e)}Eu(e){const t=this._u.indexOf(e);this._u.splice(t,1)}}class Sf extends mf{constructor(e,t,n,i){super(e,t,n,i),this.type="firestore",this._queue=new kf,this._persistenceKey=(null==i?void 0:i.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||Tf(this),this._firestoreClient.terminate()}}function xf(e){return e._firestoreClient||Tf(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function Tf(e){var t,n,i;const r=e._freezeSettings(),s=function(e,t,n,i){return new Ta(e,t,n,i.host,i.ssl,i.experimentalForceLongPolling,i.experimentalAutoDetectLongPolling,lf(i.experimentalLongPollingOptions),i.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,r);e._firestoreClient=new Hd(e._authCredentials,e._appCheckCredentials,e._queue,s),(null===(n=r.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(i=r.localCache)||void 0===i?void 0:i._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:r.localCache.kind,_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider})}class _f{constructor(e){this._byteString=e}static fromBase64String(e){try{return new _f(Oa.fromBase64String(e))}catch(e){throw new ko(wo.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new _f(Oa.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Pf{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let i=0;i<t.length;++i)if(0===t[i].length)throw new ko(wo.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Vo(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Cf{constructor(e){this._methodName=e}}class Ef{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ko(wo.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ko(wo.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Io(this._lat,e._lat)||Io(this._long,e._long)}}const Qf=/^__.*__$/;class Af{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new wh(e,this.data,this.fieldMask,t,this.fieldTransforms):new bh(e,this.data,t,this.fieldTransforms)}}class Rf{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new wh(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Nf(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw vo()}}class If{constructor(e,t,n,i,r,s){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=i,void 0===r&&this.mu(),this.fieldTransforms=r||[],this.fieldMask=s||[]}get path(){return this.settings.path}get fu(){return this.settings.fu}gu(e){return new If(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}pu(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.gu({path:n,yu:!1});return i.wu(e),i}Su(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.gu({path:n,yu:!1});return i.mu(),i}bu(e){return this.gu({path:void 0,yu:!0})}Du(e){return Gf(e,this.settings.methodName,this.settings.Cu||!1,this.path,this.settings.vu)}contains(e){return void 0!==this.fieldMask.find((t=>e.isPrefixOf(t)))||void 0!==this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))}mu(){if(this.path)for(let e=0;e<this.path.length;e++)this.wu(this.path.get(e))}wu(e){if(0===e.length)throw this.Du("Document fields must not be empty");if(Nf(this.fu)&&Qf.test(e))throw this.Du('Document fields cannot begin and end with "__"')}}class Df{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||wu(e)}Fu(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new If({fu:e,methodName:t,vu:n,path:Vo.emptyPath(),yu:!1,Cu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Mf(e){const t=e._freezeSettings(),n=wu(e._databaseId);return new Df(e._databaseId,!!t.ignoreUndefinedProperties,n)}function Lf(e,t,n,i,r){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const o=e.Fu(s.merge||s.mergeFields?2:0,t,n,r);Ff("Data must be an object, but it was:",o,i);const a=jf(i,o);let l,h;if(s.merge)l=new ga(o.fieldMask),h=o.fieldTransforms;else if(s.mergeFields){const e=[];for(const i of s.mergeFields){const r=Wf(t,i,n);if(!o.contains(r))throw new ko(wo.INVALID_ARGUMENT,"Field '".concat(r,"' is specified in your field mask but missing from your input data."));Zf(e,r)||e.push(r)}l=new ga(e),h=o.fieldTransforms.filter((e=>l.covers(e.field)))}else l=null,h=o.fieldTransforms;return new Af(new ja(a),l,h)}class $f extends Cf{_toFieldTransform(e){if(2!==e.fu)throw 1===e.fu?e.Du("".concat(this._methodName,"() can only appear at the top level of your update data")):e.Du("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof $f}}function Uf(e,t,n,i){const r=e.Fu(1,t,n);Ff("Data must be an object, but it was:",r,i);const s=[],o=ja.empty();la(i,((e,i)=>{const a=Yf(t,e,n);i=Ze(i);const l=r.Su(a);if(i instanceof $f)s.push(a);else{const e=zf(i,l);null!=e&&(s.push(a),o.set(a,e))}}));const a=new ga(s);return new Rf(o,a,r.fieldTransforms)}function qf(e,t,n,i,r,s){const o=e.Fu(1,t,n),a=[Wf(t,i,n)],l=[r];if(s.length%2!=0)throw new ko(wo.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(let d=0;d<s.length;d+=2)a.push(Wf(t,s[d])),l.push(s[d+1]);const h=[],c=ja.empty();for(let d=a.length-1;d>=0;--d)if(!Zf(h,a[d])){const e=a[d];let t=l[d];t=Ze(t);const n=o.Su(e);if(t instanceof $f)h.push(e);else{const i=zf(t,n);null!=i&&(h.push(e),c.set(e,i))}}const u=new ga(h);return new Rf(c,u,o.fieldTransforms)}function Vf(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return zf(n,e.Fu(i?4:3,t))}function zf(e,t){if(Bf(e=Ze(e)))return Ff("Unsupported field value:",t,e),jf(e,t);if(e instanceof Cf)return function(e,t){if(!Nf(t.fu))throw t.Du("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.Du("".concat(e._methodName,"() is not currently supported inside arrays"));const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.yu&&4!==t.fu)throw t.Du("Nested arrays are not supported");return function(e,t){const n=[];let i=0;for(const r of e){let e=zf(r,t.bu(i));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),i++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=Ze(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return Kl(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=Mo.fromDate(e);return{timestampValue:nc(t.serializer,n)}}if(e instanceof Mo){const n=new Mo(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:nc(t.serializer,n)}}if(e instanceof Ef)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof _f)return{bytesValue:ic(t.serializer,e._byteString)};if(e instanceof vf){const n=t.databaseId,i=e.firestore._databaseId;if(!i.isEqual(n))throw t.Du("Document reference is for database ".concat(i.projectId,"/").concat(i.database," but should be for database ").concat(n.projectId,"/").concat(n.database));return{referenceValue:oc(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.Du("Unsupported field value: ".concat(ff(e)))}(e,t)}function jf(e,t){const n={};return ha(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):la(e,((e,i)=>{const r=zf(i,t.pu(e));null!=r&&(n[e]=r)})),{mapValue:{fields:n}}}function Bf(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Mo||e instanceof Ef||e instanceof _f||e instanceof vf||e instanceof Cf)}function Ff(e,t,n){if(!Bf(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){const i=ff(n);throw"an object"===i?t.Du(e+" a custom object"):t.Du(e+" "+i)}}function Wf(e,t,n){if((t=Ze(t))instanceof Pf)return t._internalPath;if("string"==typeof t)return Yf(e,t);throw Gf("Field path arguments must be of type string or ",e,!1,void 0,n)}const Xf=new RegExp("[~\\*/\\[\\]]");function Yf(e,t,n){if(t.search(Xf)>=0)throw Gf("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return new Pf(...t.split("."))._internalPath}catch(i){throw Gf("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function Gf(e,t,n,i,r){const s=i&&!i.isEmpty(),o=void 0!==r;let a="Function ".concat(t,"() called with invalid data");n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=" in field ".concat(i)),o&&(l+=" in document ".concat(r)),l+=")"),new ko(wo.INVALID_ARGUMENT,a+e+l)}function Zf(e,t){return e.some((e=>e.isEqual(t)))}class Hf{constructor(e,t,n,i,r){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=i,this._converter=r}get id(){return this._key.path.lastSegment()}get ref(){return new vf(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Kf(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Jf("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Kf extends Hf{data(){return super.data()}}function Jf(e,t){return"string"==typeof t?Yf(e,t):t instanceof Pf?t._internalPath:t._delegate._internalPath}function ep(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new ko(wo.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class tp{}class np extends tp{}function ip(e,t){let n=[];for(var i=arguments.length,r=new Array(i>2?i-2:0),s=2;s<i;s++)r[s-2]=arguments[s];t instanceof tp&&n.push(t),n=n.concat(r),function(e){const t=e.filter((e=>e instanceof op)).length,n=e.filter((e=>e instanceof rp)).length;if(t>1||t>0&&n>0)throw new ko(wo.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const o of n)e=o._apply(e);return e}class rp extends np{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new rp(e,t,n)}_apply(e){const t=this._parse(e);return up(e._query,t),new Of(e.firestore,e.converter,Pl(e._query,t))}_parse(e){const t=Mf(e.firestore),n=function(e,t,n,i,r,s,o){let a;if(r.isKeyField()){if("array-contains"===s||"array-contains-any"===s)throw new ko(wo.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(s,"' queries on documentId()."));if("in"===s||"not-in"===s){cp(o,s);const t=[];for(const n of o)t.push(hp(i,e,n));a={arrayValue:{values:t}}}else a=hp(i,e,o)}else"in"!==s&&"not-in"!==s&&"array-contains-any"!==s||cp(o,s),a=Vf(n,t,o,"in"===s||"not-in"===s);return Ka.create(r,s,a)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value);return n}}function sp(e,t,n){const i=t,r=Jf("where",e);return rp._create(r,i,n)}class op extends tp{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new op(e,t)}_parse(e){const t=this._queryConstraints.map((t=>t._parse(e))).filter((e=>e.getFilters().length>0));return 1===t.length?t[0]:Ja.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const i=t.getFlattenedFilters();for(const r of i)up(n,r),n=Pl(n,r)}(e._query,t),new Of(e.firestore,e.converter,Pl(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class ap extends np{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new ap(e,t)}_apply(e){const t=function(e,t,n){if(null!==e.startAt)throw new ko(wo.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new ko(wo.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Ga(t,n)}(e._query,this._field,this._direction);return new Of(e.firestore,e.converter,function(e,t){const n=e.explicitOrderBy.concat([t]);return new yl(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}function lp(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=Jf("orderBy",e);return ap._create(n,t)}function hp(e,t,n){if("string"==typeof(n=Ze(n))){if(""===n)throw new ko(wo.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Sl(t)&&-1!==n.indexOf("/"))throw new ko(wo.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));const i=t.path.child(Uo.fromString(n));if(!zo.isDocumentKey(i))throw new ko(wo.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(i,"' is not because it has an odd number of segments (").concat(i.length,")."));return Da(e,new zo(i))}if(n instanceof vf)return Da(e,n._key);throw new ko(wo.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(ff(n),"."))}function cp(e,t){if(!Array.isArray(e)||0===e.length)throw new ko(wo.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."))}function up(e,t){const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new ko(wo.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new ko(wo.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(n.toString(),"' filters."))}class dp{convertValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(Ca(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ba(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(wa(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw vo()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const n={};return la(e,((e,i)=>{n[e]=this.convertValue(i,t)})),n}convertGeoPoint(e){return new Ef(ba(e.latitude),ba(e.longitude))}convertArray(e,t){return(e.values||[]).map((e=>this.convertValue(e,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const n=Sa(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(xa(e));default:return null}}convertTimestamp(e){const t=ya(e);return new Mo(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=Uo.fromString(e);yo(Cc(n));const i=new _a(n.get(1),n.get(3)),r=new zo(n.popFirst(5));return i.isEqual(t)||go("Document ".concat(r," contains a document reference within a different database (").concat(i.projectId,"/").concat(i.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),r}}function fp(e,t,n){let i;return i=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,i}class pp{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class gp extends Hf{constructor(e,t,n,i,r,s){super(e,t,n,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=r}exists(){return super.exists()}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const t=new mp(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(Jf("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class mp extends gp{data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(e)}}class Op{constructor(e,t,n,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new pp(i.hasPendingWrites,i.fromCache),this.query=n}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach((n=>{e.call(t,new mp(this._firestore,this._userDataWriter,n.key,n,new pp(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(){const e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new ko(wo.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map((n=>{const i=new mp(e._firestore,e._userDataWriter,n.doc.key,n.doc,new pp(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:i,oldIndex:-1,newIndex:t++}}))}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((e=>t||3!==e.type)).map((t=>{const i=new mp(e._firestore,e._userDataWriter,t.doc.key,t.doc,new pp(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let r=-1,s=-1;return 0!==t.type&&(r=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),s=n.indexOf(t.doc.key)),{type:vp(t.type),doc:i,oldIndex:r,newIndex:s}}))}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function vp(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return vo()}}function yp(e){e=pf(e,vf);const t=pf(e.firestore,Sf);return of(xf(t),e._key).then((n=>Pp(t,e,n)))}class bp extends dp{constructor(e){super(),this.firestore=e}convertBytes(e){return new _f(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new vf(this.firestore,null,t)}}function wp(e){e=pf(e,Of);const t=pf(e.firestore,Sf),n=xf(t),i=new bp(t);return ep(e._query),af(n,e._query).then((n=>new Op(t,i,e,n)))}function kp(e,t,n){e=pf(e,vf);const i=pf(e.firestore,Sf),r=fp(e.converter,t,n);return _p(i,[Lf(Mf(i),"setDoc",e._key,r,null!==e.converter,n).toMutation(e._key,dh.none())])}function Sp(e,t,n){e=pf(e,vf);const i=pf(e.firestore,Sf),r=Mf(i);let s;for(var o=arguments.length,a=new Array(o>3?o-3:0),l=3;l<o;l++)a[l-3]=arguments[l];return s="string"==typeof(t=Ze(t))||t instanceof Pf?qf(r,"updateDoc",e._key,t,n,a):Uf(r,"updateDoc",e._key,t),_p(i,[s.toMutation(e._key,dh.exists(!0))])}function xp(e){return _p(pf(e.firestore,Sf),[new Th(e._key,dh.none())])}function Tp(e,t){const n=pf(e.firestore,Sf),i=wf(e),r=fp(e.converter,t);return _p(n,[Lf(Mf(e.firestore),"addDoc",i._key,r,null!==e.converter,{}).toMutation(i._key,dh.exists(!1))]).then((()=>i))}function _p(e,t){return function(e,t){const n=new So;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){const i=Xd(e);try{const e=await function(e,t){const n=bo(e),i=Mo.now(),r=t.reduce(((e,t)=>e.add(t.key)),Xl());let s,o;return n.persistence.runTransaction("Locally write mutations","readwrite",(e=>{let a=$l(),l=Xl();return n.os.getEntries(e,r).next((e=>{a=e,a.forEach(((e,t)=>{t.isValidDocument()||(l=l.add(e))}))})).next((()=>n.localDocuments.getOverlayedDocuments(e,a))).next((r=>{s=r;const o=[];for(const e of t){const t=vh(e,s.get(e.key).overlayedDocument);null!=t&&o.push(new wh(e.key,t,Ba(t.value.mapValue),dh.exists(!0)))}return n.mutationQueue.addMutationBatch(e,i,o,t)})).next((t=>{o=t;const i=t.applyToLocalDocumentSet(s,l);return n.documentOverlayCache.saveOverlays(e,t.batchId,i)}))})).then((()=>({batchId:o.batchId,changes:Vl(s)})))}(i.localStore,t);i.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let i=e.xa[e.currentUser.toKey()];i||(i=new ca(Io)),i=i.insert(t,n),e.xa[e.currentUser.toKey()]=i}(i,e.batchId,n),await jd(i,e.changes),await Fu(i.remoteStore)}catch(e){const t=sd(e,"Failed to persist write");n.reject(t)}}(await rf(e),t,n))),n.promise}(xf(e),t)}function Pp(e,t,n){const i=n.docs.get(t._key),r=new bp(e);return new gp(e,r,t._key,i,new pp(n.hasPendingWrites,n.fromCache),t.converter)}new WeakMap;!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){co=e}(dn),an(new He("firestore",((e,n)=>{let{instanceIdentifier:i,options:r}=n;const s=e.getProvider("app").getImmediate(),o=new Sf(new Po(e.getProvider("auth-internal")),new Ao(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new ko(wo.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new _a(e.options.projectId,t)}(s,i),s);return r=Object.assign({useFetchStreams:t},r),o._setSettings(r),o}),"PUBLIC").setMultipleInstances(!0)),gn(lo,"4.6.4",e),gn(lo,"4.6.4","esm2017")}();const Cp="firebasestorage.googleapis.com",Ep="storageBucket";class Qp extends qe{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;super(Np(e),"Firebase Storage: ".concat(t," (").concat(Np(e),")")),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Qp.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Np(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message="".concat(this._baseMessage,"\n").concat(this.customData.serverResponse):this.message=this._baseMessage}}var Ap,Rp;function Np(e){return"storage/"+e}function Ip(){return new Qp(Ap.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function Dp(){return new Qp(Ap.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Mp(){return new Qp(Ap.CANCELED,"User canceled the upload/download.")}function Lp(){return new Qp(Ap.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function $p(e){return new Qp(Ap.INVALID_ARGUMENT,e)}function Up(){return new Qp(Ap.APP_DELETED,"The Firebase app was deleted.")}function qp(e,t){return new Qp(Ap.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function Vp(e){throw new Qp(Ap.INTERNAL_ERROR,"Internal error: "+e)}!function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"}(Ap||(Ap={}));class zp{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let n;try{n=zp.makeFromUrl(e,t)}catch(_F){return new zp(e,"")}if(""===n.path)return n;throw i=e,new Qp(Ap.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+i+"'.");var i}static makeFromUrl(e,t){let n=null;const i="([A-Za-z0-9.\\-_]+)";const r=new RegExp("^gs://"+i+"(/(.*))?$","i");function s(e){e.path_=decodeURIComponent(e.path)}const o=t.replace(/[.]/g,"\\."),a=[{regex:r,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp("^https?://".concat(o,"/").concat("v[A-Za-z0-9_]+","/b/").concat(i,"/o").concat("(/([^?#]*).*)?$"),"i"),indices:{bucket:1,path:3},postModify:s},{regex:new RegExp("^https?://".concat(t===Cp?"(?:storage.googleapis.com|storage.cloud.google.com)":t,"/").concat(i,"/").concat("([^?#]*)"),"i"),indices:{bucket:1,path:2},postModify:s}];for(let l=0;l<a.length;l++){const t=a[l],i=t.regex.exec(e);if(i){const e=i[t.indices.bucket];let r=i[t.indices.path];r||(r=""),n=new zp(e,r),t.postModify(n);break}}if(null==n)throw function(e){return new Qp(Ap.INVALID_URL,"Invalid URL '"+e+"'.")}(e);return n}}class jp{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(){}}function Bp(e){return"string"===typeof e||e instanceof String}function Fp(e){return Wp()&&e instanceof Blob}function Wp(){return"undefined"!==typeof Blob}function Xp(e,t,n,i){if(i<t)throw $p("Invalid value for '".concat(e,"'. Expected ").concat(t," or greater."));if(i>n)throw $p("Invalid value for '".concat(e,"'. Expected ").concat(n," or less."))}function Yp(e,t,n){let i=t;return null==n&&(i="https://".concat(t)),"".concat(n,"://").concat(i,"/v0").concat(e)}function Gp(e){const t=encodeURIComponent;let n="?";for(const i in e)if(e.hasOwnProperty(i)){n=n+(t(i)+"="+t(e[i]))+"&"}return n=n.slice(0,-1),n}function Zp(e,t){const n=e>=500&&e<600,i=-1!==[408,429].indexOf(e),r=-1!==t.indexOf(e);return n||i||r}!function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"}(Rp||(Rp={}));class Hp{constructor(e,t,n,i,r,s,o,a,l,h,c){let u=!(arguments.length>11&&void 0!==arguments[11])||arguments[11];this.url_=e,this.method_=t,this.headers_=n,this.body_=i,this.successCodes_=r,this.additionalRetryCodes_=s,this.callback_=o,this.errorCallback_=a,this.timeout_=l,this.progressCallback_=h,this.connectionFactory_=c,this.retry=u,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise(((e,t)=>{this.resolve_=e,this.reject_=t,this.start_()}))}start_(){const e=(e,t)=>{if(t)return void e(!1,new Kp(!1,null,!0));const n=this.connectionFactory_();this.pendingConnection_=n;const i=e=>{const t=e.loaded,n=e.lengthComputable?e.total:-1;null!==this.progressCallback_&&this.progressCallback_(t,n)};null!==this.progressCallback_&&n.addUploadProgressListener(i),n.send(this.url_,this.method_,this.body_,this.headers_).then((()=>{null!==this.progressCallback_&&n.removeUploadProgressListener(i),this.pendingConnection_=null;const t=n.getErrorCode()===Rp.NO_ERROR,r=n.getStatus();if(!t||Zp(r,this.additionalRetryCodes_)&&this.retry){const t=n.getErrorCode()===Rp.ABORT;return void e(!1,new Kp(!1,null,t))}const s=-1!==this.successCodes_.indexOf(r);e(!0,new Kp(s,n))}))},t=(e,t)=>{const n=this.resolve_,i=this.reject_,r=t.connection;if(t.wasSuccessCode)try{const e=this.callback_(r,r.getResponse());!function(e){return void 0!==e}(e)?n():n(e)}catch(_F){i(_F)}else if(null!==r){const e=Ip();e.serverResponse=r.getErrorText(),this.errorCallback_?i(this.errorCallback_(r,e)):i(e)}else if(t.canceled){i(this.appDelete_?Up():Mp())}else{i(Dp())}};this.canceled_?t(0,new Kp(!1,null,!0)):this.backoffId_=function(e,t,n){let i=1,r=null,s=null,o=!1,a=0;function l(){return 2===a}let h=!1;function c(){if(!h){h=!0;for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];t.apply(null,n)}}function u(t){r=setTimeout((()=>{r=null,e(f,l())}),t)}function d(){s&&clearTimeout(s)}function f(e){if(h)return void d();for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if(e)return d(),void c.call(null,e,...n);if(l()||o)return d(),void c.call(null,e,...n);let s;i<64&&(i*=2),1===a?(a=2,s=0):s=1e3*(i+Math.random()),u(s)}let p=!1;function g(e){p||(p=!0,d(),h||(null!==r?(e||(a=2),clearTimeout(r),u(0)):e||(a=1)))}return u(0),s=setTimeout((()=>{o=!0,g(!0)}),n),g}(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function(e){e(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class Kp{constructor(e,t,n){this.wasSuccessCode=e,this.connection=t,this.canceled=!!n}}function Jp(){return"undefined"!==typeof BlobBuilder?BlobBuilder:"undefined"!==typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function eg(){const e=Jp();for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];if(void 0!==e){const t=new e;for(let e=0;e<n.length;e++)t.append(n[e]);return t.getBlob()}if(Wp())return new Blob(n);throw new Qp(Ap.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}function tg(e){if("undefined"===typeof atob)throw t="base-64",new Qp(Ap.UNSUPPORTED_ENVIRONMENT,"".concat(t," is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information."));var t;return atob(e)}const ng={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class ig{constructor(e,t){this.data=e,this.contentType=t||null}}function rg(e,t){switch(e){case ng.RAW:return new ig(sg(t));case ng.BASE64:case ng.BASE64URL:return new ig(og(e,t));case ng.DATA_URL:return new ig(function(e){const t=new ag(e);return t.base64?og(ng.BASE64,t.rest):function(e){let t;try{t=decodeURIComponent(e)}catch(_F){throw qp(ng.DATA_URL,"Malformed data URL.")}return sg(t)}(t.rest)}(t),function(e){const t=new ag(e);return t.contentType}(t))}throw Ip()}function sg(e){const t=[];for(let n=0;n<e.length;n++){let i=e.charCodeAt(n);if(i<=127)t.push(i);else if(i<=2047)t.push(192|i>>6,128|63&i);else if(55296===(64512&i)){if(n<e.length-1&&56320===(64512&e.charCodeAt(n+1))){i=65536|(1023&i)<<10|1023&e.charCodeAt(++n),t.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|63&i)}else t.push(239,191,189)}else 56320===(64512&i)?t.push(239,191,189):t.push(224|i>>12,128|i>>6&63,128|63&i)}return new Uint8Array(t)}function og(e,t){switch(e){case ng.BASE64:{const n=-1!==t.indexOf("-"),i=-1!==t.indexOf("_");if(n||i){throw qp(e,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?")}break}case ng.BASE64URL:{const n=-1!==t.indexOf("+"),i=-1!==t.indexOf("/");if(n||i){throw qp(e,"Invalid character '"+(n?"+":"/")+"' found: is it base64 encoded?")}t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=tg(t)}catch(_F){if(_F.message.includes("polyfill"))throw _F;throw qp(e,"Invalid character found")}const i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i}class ag{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw qp(ng.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const n=t[1]||null;null!=n&&(this.base64=function(e,t){if(!(e.length>=t.length))return!1;return e.substring(e.length-t.length)===t}(n,";base64"),this.contentType=this.base64?n.substring(0,n.length-7):n),this.rest=e.substring(e.indexOf(",")+1)}}class lg{constructor(e,t){let n=0,i="";Fp(e)?(this.data_=e,n=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),n=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),n=e.length),this.size_=n,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if(Fp(this.data_)){const n=function(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}(this.data_,e,t);return null===n?null:new lg(n)}{const n=new Uint8Array(this.data_.buffer,e,t-e);return new lg(n,!0)}}static getBlob(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(Wp()){const e=t.map((e=>e instanceof lg?e.data_:e));return new lg(eg.apply(null,e))}{const e=t.map((e=>Bp(e)?rg(ng.RAW,e).data:e.data_));let n=0;e.forEach((e=>{n+=e.byteLength}));const i=new Uint8Array(n);let r=0;return e.forEach((e=>{for(let t=0;t<e.length;t++)i[r++]=e[t]})),new lg(i,!0)}}uploadData(){return this.data_}}function hg(e){let t;try{t=JSON.parse(e)}catch(_F){return null}return function(e){return"object"===typeof e&&!Array.isArray(e)}(t)?t:null}function cg(e){const t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}function ug(e,t){return t}class dg{constructor(e,t,n,i){this.server=e,this.local=t||e,this.writable=!!n,this.xform=i||ug}}let fg=null;function pg(){if(fg)return fg;const e=[];e.push(new dg("bucket")),e.push(new dg("generation")),e.push(new dg("metageneration")),e.push(new dg("name","fullPath",!0));const t=new dg("name");t.xform=function(e,t){return function(e){return!Bp(e)||e.length<2?e:cg(e)}(t)},e.push(t);const n=new dg("size");return n.xform=function(e,t){return void 0!==t?Number(t):t},e.push(n),e.push(new dg("timeCreated")),e.push(new dg("updated")),e.push(new dg("md5Hash",null,!0)),e.push(new dg("cacheControl",null,!0)),e.push(new dg("contentDisposition",null,!0)),e.push(new dg("contentEncoding",null,!0)),e.push(new dg("contentLanguage",null,!0)),e.push(new dg("contentType",null,!0)),e.push(new dg("metadata","customMetadata",!0)),fg=e,fg}function gg(e,t,n){const i={type:"file"},r=n.length;for(let s=0;s<r;s++){const e=n[s];i[e.local]=e.xform(i,t[e.server])}return function(e,t){Object.defineProperty(e,"ref",{get:function(){const n=e.bucket,i=e.fullPath,r=new zp(n,i);return t._makeStorageReference(r)}})}(i,e),i}function mg(e,t,n){const i=hg(t);if(null===i)return null;return gg(e,i,n)}function Og(e,t){const n={},i=t.length;for(let r=0;r<i;r++){const i=t[r];i.writable&&(n[i.server]=e[i.local])}return JSON.stringify(n)}class vg{constructor(e,t,n,i){this.url=e,this.method=t,this.handler=n,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function yg(e){if(!e)throw Ip()}function bg(e,t){return function(n,i){const r=mg(e,i,t);return yg(null!==r),r}}function wg(e,t){return function(n,i){const r=mg(e,i,t);return yg(null!==r),function(e,t,n,i){const r=hg(t);if(null===r)return null;if(!Bp(r.downloadTokens))return null;const s=r.downloadTokens;if(0===s.length)return null;const o=encodeURIComponent;return s.split(",").map((t=>{const r=e.bucket,s=e.fullPath;return Yp("/b/"+o(r)+"/o/"+o(s),n,i)+Gp({alt:"media",token:t})}))[0]}(r,i,e.host,e._protocol)}}function kg(e){return function(t,n){let i;var r,s;return 401===t.getStatus()?i=t.getErrorText().includes("Firebase App Check token is invalid")?new Qp(Ap.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project."):new Qp(Ap.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?(s=e.bucket,i=new Qp(Ap.QUOTA_EXCEEDED,"Quota for bucket '"+s+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===t.getStatus()?(r=e.path,i=new Qp(Ap.UNAUTHORIZED,"User does not have permission to access '"+r+"'.")):i=n,i.status=t.getStatus(),i.serverResponse=n.serverResponse,i}}function Sg(e){const t=kg(e);return function(n,i){let r=t(n,i);var s;return 404===n.getStatus()&&(s=e.path,r=new Qp(Ap.OBJECT_NOT_FOUND,"Object '"+s+"' does not exist.")),r.serverResponse=i.serverResponse,r}}function xg(e,t,n){const i=Object.assign({},n);return i.fullPath=e.path,i.size=t.size(),i.contentType||(i.contentType=function(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}(null,t)),i}function Tg(e,t,n,i,r){const s=t.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};const a=function(){let e="";for(let t=0;t<2;t++)e+=Math.random().toString().slice(2);return e}();o["Content-Type"]="multipart/related; boundary="+a;const l=xg(t,i,r),h="--"+a+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+Og(l,n)+"\r\n--"+a+"\r\nContent-Type: "+l.contentType+"\r\n\r\n",c="\r\n--"+a+"--",u=lg.getBlob(h,i,c);if(null===u)throw Lp();const d={name:l.fullPath},f=Yp(s,e.host,e._protocol),p=e.maxUploadRetryTime,g=new vg(f,"POST",bg(e,n),p);return g.urlParams=d,g.headers=o,g.body=u.uploadData(),g.errorHandler=kg(t),g}let _g=null;class Pg{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Rp.NO_ERROR,this.sendPromise_=new Promise((e=>{this.xhr_.addEventListener("abort",(()=>{this.errorCode_=Rp.ABORT,e()})),this.xhr_.addEventListener("error",(()=>{this.errorCode_=Rp.NETWORK_ERROR,e()})),this.xhr_.addEventListener("load",(()=>{e()}))}))}send(e,t,n,i){if(this.sent_)throw Vp("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==i)for(const r in i)i.hasOwnProperty(r)&&this.xhr_.setRequestHeader(r,i[r].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Vp("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Vp("cannot .getStatus() before sending");try{return this.xhr_.status}catch(_F){return-1}}getResponse(){if(!this.sent_)throw Vp("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Vp("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}class Cg extends Pg{initXhr(){this.xhr_.responseType="text"}}function Eg(){return _g?_g():new Cg}class Qg{constructor(e,t){this._service=e,this._location=t instanceof zp?t:zp.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Qg(e,t)}get root(){const e=new zp(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return cg(this._location.path)}get storage(){return this._service}get parent(){const e=function(e){if(0===e.length)return null;const t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this._location.path);if(null===e)return null;const t=new zp(this._location.bucket,e);return new Qg(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw function(e){return new Qp(Ap.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}(e)}}function Ag(e,t,n){e._throwIfRoot("uploadBytes");const i=Tg(e.storage,e._location,pg(),new lg(t,!0),n);return e.storage.makeRequestWithTokens(i,Eg).then((t=>({metadata:t,ref:e})))}function Rg(e){e._throwIfRoot("getDownloadURL");const t=function(e,t,n){const i=Yp(t.fullServerUrl(),e.host,e._protocol),r=e.maxOperationRetryTime,s=new vg(i,"GET",wg(e,n),r);return s.errorHandler=Sg(t),s}(e.storage,e._location,pg());return e.storage.makeRequestWithTokens(t,Eg).then((e=>{if(null===e)throw new Qp(Ap.NO_DOWNLOAD_URL,"The given file does not have any download URLs.");return e}))}function Ng(e,t){const n=function(e,t){const n=t.split("/").filter((e=>e.length>0)).join("/");return 0===e.length?n:e+"/"+n}(e._location.path,t),i=new zp(e._location.bucket,n);return new Qg(e.storage,i)}function Ig(e,t){if(e instanceof Lg){const n=e;if(null==n._bucket)throw new Qp(Ap.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+Ep+"' property when initializing the app?");const i=new Qg(n,n._bucket);return null!=t?Ig(i,t):i}return void 0!==t?Ng(e,t):e}function Dg(e,t){if(t&&/^[A-Za-z]+:\/\//.test(t)){if(e instanceof Lg)return function(e,t){return new Qg(e,t)}(e,t);throw $p("To use ref(service, url), the first argument must be a Storage instance.")}return Ig(e,t)}function Mg(e,t){const n=null===t||void 0===t?void 0:t[Ep];return null==n?null:zp.makeFromBucketSpec(n,e)}class Lg{constructor(e,t,n,i,r){this.app=e,this._authProvider=t,this._appCheckProvider=n,this._url=i,this._firebaseVersion=r,this._bucket=null,this._host=Cp,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?zp.makeFromBucketSpec(i,this._host):Mg(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,null!=this._url?this._bucket=zp.makeFromBucketSpec(this._url,e):this._bucket=Mg(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Xp("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Xp("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(null!==t)return t.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});if(e){return(await e.getToken()).token}return null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach((e=>e.cancel())),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Qg(this,e)}_makeRequest(e,t,n,i){let r=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(this._deleted)return new jp(Up());{const s=function(e,t,n,i,r,s){let o=!(arguments.length>6&&void 0!==arguments[6])||arguments[6];const a=Gp(e.urlParams),l=e.url+a,h=Object.assign({},e.headers);return function(e,t){t&&(e["X-Firebase-GMPID"]=t)}(h,t),function(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}(h,n),function(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(null!==t&&void 0!==t?t:"AppManager")}(h,s),function(e,t){null!==t&&(e["X-Firebase-AppCheck"]=t)}(h,i),new Hp(l,e.method,h,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,r,o)}(e,this._appId,n,i,t,this._firebaseVersion,r);return this._requests.add(s),s.getPromise().then((()=>this._requests.delete(s)),(()=>this._requests.delete(s))),s}}async makeRequestWithTokens(e,t){const[n,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,n,i).getPromise()}}const $g="@firebase/storage",Ug="0.12.6",qg="storage";function Vg(e,t){let{instanceIdentifier:n}=t;const i=e.getProvider("app").getImmediate(),r=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return new Lg(i,r,s,n,dn)}an(new He(qg,Vg,"PUBLIC").setMultipleInstances(!0)),gn($g,Ug,""),gn($g,Ug,"esm2017");const zg=JSON.parse('{"A":[{"title":"Basic Math Operations","description":"Complete these coding tasks to test basic math operations.","questions":[{"id":"q1","codingQuestion":"Write a Python function to add two numbers.","functionName":"add","lesson":"Addition Function"},{"id":"q2","codingQuestion":"Write a Python function to subtract two numbers.","functionName":"subtract","lesson":"Subtraction Function"},{"id":"q3","codingQuestion":"Write a Python function to multiply two numbers.","functionName":"multiply","lesson":"Multiplication Function"},{"id":"q4","codingQuestion":"Write a Python function to divide two numbers.","functionName":"divide","lesson":"Division Function"},{"id":"q5","codingQuestion":"Write a Python function to find the power of a number.","functionName":"power","lesson":"Power Function"},{"id":"q6","codingQuestion":"Write a Python function to find the modulo of two numbers.","functionName":"mod","lesson":"Modulo Function"}]},{"title":"String Operations","description":"Complete these coding tasks to test string operations.","questions":[{"id":"q7","codingQuestion":"Write a Python function to concatenate two strings.","functionName":"concat_strings"}]},{"title":"Number Properties","description":"Complete these coding tasks to test number properties.","questions":[{"id":"q8","codingQuestion":"Write a Python function to find the maximum of two numbers.","functionName":"find_max"},{"id":"q9","codingQuestion":"Write a Python function to check if a number is even.","functionName":"is_even"},{"id":"q10","codingQuestion":"Write a Python function to calculate the factorial of a number.","functionName":"factorial"}]},{"title":"Another Section 4"},{"title":"Another Section 5"},{"title":"Another Section 6"},{"title":"Another Section 7"},{"title":"Another Section 8"}]}'),jg=JSON.parse('{"I":[{"title":"Basic Math Operations","description":"Complete these coding tasks to test basic math operations.","objective":"Understand and implement basic mathematical operations in Python.","materials":["Computer with Python installed","Text editor or IDE"],"steps":[{"title":"Addition Function","instruction":"Write a Python function to add two numbers.","steps":["Open your text editor or IDE.","Create a new Python file named \'math_operations.py\'.","Define a function named \'add\' that takes two parameters.","Inside the function, return the sum of the two parameters.","Save the file.","Example function implementation:\\n\\ndef add(a, b):\\n    return a + b"]},{"title":"Subtraction Function","instruction":"Write a Python function to subtract two numbers.","steps":["In \'math_operations.py\', define a function named \'subtract\' that takes two parameters.","Inside the function, return the difference between the first and second parameter.","Save the file.","Example function implementation:\\n\\ndef subtract(a, b):\\n    return a - b"]},{"title":"Multiplication Function","instruction":"Write a Python function to multiply two numbers.","steps":["In \'math_operations.py\', define a function named \'multiply\' that takes two parameters.","Inside the function, return the product of the two parameters.","Save the file.","Example function implementation:\\n\\ndef multiply(a, b):\\n    return a * b"]},{"title":"Division Function","instruction":"Write a Python function to divide two numbers.","steps":["In \'math_operations.py\', define a function named \'divide\' that takes two parameters.","Inside the function, return the result of dividing the first parameter by the second.","Save the file.","Example function implementation:\\n\\ndef divide(a, b):\\n    return a / b"]},{"title":"Power Function","instruction":"Write a Python function to find the power of a number.","steps":["In \'math_operations.py\', define a function named \'power\' that takes two parameters.","Inside the function, return the result of raising the first parameter to the power of the second.","Save the file.","Example function implementation:\\n\\ndef power(a, b):\\n    return a ** b"]},{"title":"Modulo Function","instruction":"Write a Python function to find the modulo of two numbers.","steps":["In \'math_operations.py\', define a function named \'mod\' that takes two parameters.","Inside the function, return the result of the modulo operation between the first and second parameters.","Save the file.","Example function implementation:\\n\\ndef mod(a, b):\\n    return a % b"]}]},{"title":"String Operations","description":"Complete these coding tasks to test string operations.","objective":"Understand and implement basic string operations in Python.","materials":["Computer with Python installed","Text editor or IDE"],"steps":[{"title":"Concatenate Strings","instruction":"Write a Python function to concatenate two strings.","steps":["Open your text editor or IDE.","Create a new Python file named \'string_operations.py\'.","Define a function named \'concat_strings\' that takes two parameters.","Inside the function, return the concatenation of the two strings.","Save the file.","Example function implementation:\\n\\ndef concat_strings(str1, str2):\\n    return str1 + str2"]}]},{"title":"Number Properties","description":"Complete these coding tasks to test number properties.","objective":"Understand and implement functions to check number properties in Python.","materials":["Computer with Python installed","Text editor or IDE"],"steps":[{"title":"Find Maximum","instruction":"Write a Python function to find the maximum of two numbers.","steps":["Open your text editor or IDE.","Create a new Python file named \'number_properties.py\'.","Define a function named \'find_max\' that takes two parameters.","Inside the function, use an if-else statement to return the larger of the two numbers.","Save the file.","Example function implementation:\\n\\ndef find_max(a, b):\\n    return a if a > b else b"]},{"title":"Check Even Number","instruction":"Write a Python function to check if a number is even.","steps":["In \'number_properties.py\', define a function named \'is_even\' that takes one parameter.","Inside the function, use the modulo operator to check if the number is even and return True or False.","Save the file.","Example function implementation:\\n\\ndef is_even(n):\\n    return n % 2 == 0"]},{"title":"Calculate Factorial","instruction":"Write a Python function to calculate the factorial of a number.","steps":["In \'number_properties.py\', define a function named \'factorial\' that takes one parameter.","Inside the function, use a loop or recursion to calculate the factorial of the number.","Save the file.","Example function implementation:\\n\\ndef factorial(n):\\n    if n == 0:\\n        return 1\\n    else:\\n        return n * factorial(n - 1)"]}]}]}'),Bg=JSON.parse('{"A":[{"title":"Basic Math Operations","description":"Complete these coding tasks to test basic math operations.","questions":[{"id":"q1","codingQuestion":"Write a Java function to add two numbers.","functionName":"add"},{"id":"q2","codingQuestion":"Write a Java function to subtract two numbers.","functionName":"subtract"},{"id":"q3","codingQuestion":"Write a Java function to multiply two numbers.","functionName":"multiply"},{"id":"q4","codingQuestion":"Write a Java function to divide two numbers.","functionName":"divide"},{"id":"q5","codingQuestion":"Write a Java function to find the power of a number.","functionName":"power"},{"id":"q6","codingQuestion":"Write a Java function to find the modulo of two numbers.","functionName":"mod"}]},{"title":"String Operations","description":"Complete these coding tasks to test string operations.","questions":[{"id":"q7","codingQuestion":"Write a Java function to concatenate two strings.","functionName":"concatStrings"}]},{"title":"Number Properties","description":"Complete these coding tasks to test number properties.","questions":[{"id":"q8","codingQuestion":"Write a Java function to find the maximum of two numbers.","functionName":"findMax"},{"id":"q9","codingQuestion":"Write a Java function to check if a number is even.","functionName":"isEven"},{"id":"q10","codingQuestion":"Write a Java function to calculate the factorial of a number.","functionName":"factorial"}]}]}'),Fg=fn({apiKey:"AIzaSyBI37lzWhWSv7VQif5mlNbZm0Bso5W05OA",authDomain:"dyakidswebsite-ab5f1.firebaseapp.com",projectId:"dyakidswebsite-ab5f1",storageBucket:"dyakidswebsite-ab5f1.appspot.com",messagingSenderId:"79577052767",appId:"1:79577052767:web:c68ca99c2a73b59f5ecdea"}),Wg=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pn();const t=ln(e,"auth");if(t.isInitialized())return t.getImmediate();const n=function(e,t){const n=ln(e,"auth");if(n.isInitialized()){const e=n.getImmediate();if(je(n.getOptions(),null!==t&&void 0!==t?t:{}))return e;In(e,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:Us,persistence:[Xr,Qr,Rr]}),i=Ie("authTokenSyncURL");if(i&&"boolean"===typeof isSecureContext&&isSecureContext){const e=new URL(i,location.origin);if(location.origin===e.origin){const t=(e=>async t=>{const n=t&&await t.getIdTokenResult(),i=n&&((new Date).getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>js)return;const r=null===n||void 0===n?void 0:n.token;Bs!==r&&(Bs=r,await fetch(e,{method:r?"POST":"DELETE",headers:r?{Authorization:"Bearer ".concat(r)}:{}}))})(e.toString());!function(e,t,n){Ze(e).beforeAuthStateChanged(t,n)}(n,t,(()=>t(n.currentUser))),function(e,t,n,i){Ze(e).onIdTokenChanged(t,n,i)}(n,(e=>t(e)))}}const r=Ae("auth");return r&&Hi(n,"http://".concat(r)),n}(Fg),Xg=function(e,t){const n="string"==typeof e?e:t||"(default)",i=ln("object"==typeof e?e:pn(),"firestore").getImmediate({identifier:n});if(!i._initialized){const e=Re("firestore");e&&function(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};var r;const s=(e=pf(e,mf))._getSettings(),o="".concat(t,":").concat(n);if("firestore.googleapis.com"!==s.host&&s.host!==o&&mo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),i.mockUserToken){let t,n;if("string"==typeof i.mockUserToken)t=i.mockUserToken,n=ho.MOCK_USER;else{t=Me(i.mockUserToken,null===(r=e._app)||void 0===r?void 0:r.options.projectId);const s=i.mockUserToken.sub||i.mockUserToken.user_id;if(!s)throw new ko(wo.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new ho(s)}e._authCredentials=new _o(new xo(t,n))}}(i,...e)}return i}(Fg),Yg=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pn(),t=arguments.length>1?arguments[1]:void 0;e=Ze(e);const n=ln(e,qg).getImmediate({identifier:t}),i=Re("storage");return i&&function(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};!function(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e.host="".concat(t,":").concat(n),e._protocol="http";const{mockUserToken:r}=i;r&&(e._overrideAuthToken="string"===typeof r?r:Me(r,e.app.options.projectId))}(e,t,n,i)}(n,...i),n}(Fg);(async()=>{try{const e=bf(Xg,"activitiesPython"),t=await wp(e);console.log("Found ".concat(t.docs.length," existing Python activities. Deleting them..."));const n=t.docs.map((e=>xp(e.ref)));await Promise.all(n),console.log("All existing Python activities deleted");const i=zg.A.map(((t,n)=>{const i={...t,order:n};return Tp(e,i)}));await Promise.all(i),console.log("New Python activities added to Firestore")}catch(e){console.error("Error initializing Python activities:",e)}})(),(async()=>{try{const e=bf(Xg,"activitiesJava"),t=await wp(e);console.log("Found ".concat(t.docs.length," existing Java activities. Deleting them..."));const n=t.docs.map((e=>xp(e.ref)));await Promise.all(n),console.log("All existing Java activities deleted");const i=Bg.A.map(((t,n)=>{const i={...t,order:n};return Tp(e,i)}));await Promise.all(i),console.log("New Java activities added to Firestore")}catch(e){console.error("Error initializing Java activities:",e)}})(),(async()=>{try{const e=bf(Xg,"LessonPython"),t=await wp(e);console.log("Found ".concat(t.docs.length," existing lessons. Deleting them..."));const n=t.docs.map((e=>xp(e.ref)));await Promise.all(n),console.log("All existing lessons deleted");const i=jg.I.map(((t,n)=>{const i={...t,order:n};return Tp(e,i)}));await Promise.all(i),console.log("New lessons added to Firestore")}catch(e){console.error("Error initializing lessons:",e)}})();var Gg=n(723);function Zg(e){const{close:t}=e,{uid:n}=ie(),[i,s]=(0,r.useState)(10),[o,a]=(0,r.useState)({name:"",username:"",email:"",profilePicture:"",programmingLanguages:[],currentActivity:0}),[l,h]=(0,r.useState)(!1);(0,r.useEffect)((()=>{(async()=>{try{const e=wf(Xg,"users",n),t=await yp(e);if(t.exists()){const e=t.data();a({name:e.name,username:e.username,email:e.email,profilePicture:e.profilePicture||"".concat("/DYA","/profile-avatar.png"),programmingLanguages:e.programmingLanguages||[],currentActivity:e.currentActivity||0})}}catch(e){console.log(e)}})(),(async()=>{try{const e=bf(Xg,"activities"),t=(await wp(e)).size;s(t)}catch(e){console.log(e)}})()}),[n]);const c=e=>{a({...o,[e.target.name]:e.target.value})},u=o.currentActivity/i*100;return(0,Gg.jsx)("div",{className:"profile-window-overlay",children:(0,Gg.jsxs)("div",{className:"profile-window-content",onClick:e=>e.stopPropagation(),children:[(0,Gg.jsxs)("div",{className:"user-data-container-left",children:[(0,Gg.jsx)("button",{className:"close-btn",onClick:t,children:"X"}),(0,Gg.jsxs)("div",{className:"user-picture",children:[(0,Gg.jsx)("img",{src:o.profilePicture,alt:"Profile Avatar",onClick:()=>document.getElementById("fileInput").click()}),(0,Gg.jsx)("input",{type:"file",id:"fileInput",style:{display:"none"},onChange:async e=>{const t=e.target.files[0];if(t){const e=(i=Yg,r="profilePictures/".concat(n),Dg(i=Ze(i),r));await function(e,t,n){return Ag(e=Ze(e),t,n)}(e,t);const l=await function(e){return Rg(e=Ze(e))}(e);a({...o,profilePicture:l});try{await Sp(wf(Xg,"users",n),{profilePicture:l})}catch(s){console.log(s)}}var i,r}})]}),(0,Gg.jsxs)("div",{className:"user-data",children:[(0,Gg.jsxs)("div",{className:"head",children:[(0,Gg.jsx)("h2",{children:"My profile"}),!l&&(0,Gg.jsx)("i",{className:"fa-solid fa-pen-to-square",onClick:()=>{h(!0)}})]}),l?(0,Gg.jsxs)(Gg.Fragment,{children:[(0,Gg.jsx)("input",{type:"text",name:"name",value:o.name,onChange:c}),(0,Gg.jsx)("div",{className:"border-gray"}),(0,Gg.jsx)("input",{type:"text",name:"username",value:o.username,onChange:c}),(0,Gg.jsx)("div",{className:"border-gray"}),(0,Gg.jsx)("input",{type:"text",name:"email",value:o.email,onChange:c}),(0,Gg.jsx)("i",{className:"fa-solid fa-check",onClick:async()=>{try{await Sp(wf(Xg,"users",n),{name:o.name,username:o.username,email:o.email,profilePicture:o.profilePicture})}catch(e){console.log(e)}h(!1)}})]}):(0,Gg.jsxs)(Gg.Fragment,{children:[(0,Gg.jsx)("p",{className:"data",children:o.name}),(0,Gg.jsx)("div",{className:"border-gray"}),(0,Gg.jsx)("p",{className:"data",children:o.username||"data not found"}),(0,Gg.jsx)("div",{className:"border-gray"}),(0,Gg.jsx)("p",{className:"data",children:o.email})]})]})]}),(0,Gg.jsxs)("div",{className:"user-data-container-right",children:[(0,Gg.jsxs)("div",{className:"user-languages-container",children:[(0,Gg.jsx)("h2",{children:"My languages"}),(0,Gg.jsx)("div",{className:"border-gray"}),(0,Gg.jsx)("p",{children:o.programmingLanguages.join(", ")})]}),(0,Gg.jsxs)("div",{className:"user-language-progress",children:[(0,Gg.jsx)("h2",{children:"My progress in..."}),o.programmingLanguages.length>0?o.programmingLanguages.map(((e,t)=>(0,Gg.jsxs)("div",{className:"progress-container",children:[(0,Gg.jsx)("div",{className:"border-gray"}),(0,Gg.jsxs)("p",{children:[e,": ",o.currentActivity," of ",i," sections completed"]}),(0,Gg.jsx)("div",{className:"progress-bar",style:{width:"".concat(u,"%")}})]},t))):(0,Gg.jsx)("p",{children:"No programming languages found."})]})]})]})})}function Hg(e){const{uid:t}=ie(),n=ne(),[i,s]=(0,r.useState)(!1),o=()=>{s(!i)},a=e=>{(function(e){return Ze(e).signOut()})(e).then((()=>{n("/")})).catch((e=>{e.message}))};return(0,Gg.jsxs)("div",{className:"side-nav",children:[(0,Gg.jsx)("div",{className:"mascot-container",children:(0,Gg.jsx)("p",{children:"Add mascot here or something else"})}),(0,Gg.jsxs)("div",{className:"btn-container",children:[(0,Gg.jsx)("button",{onClick:()=>{return e="/roadmap/".concat(t),void n(e);var e},children:"Roadmap"}),(0,Gg.jsx)("button",{onClick:o,children:"Profile"}),(0,Gg.jsx)("button",{className:"logout-btn",onClick:()=>a(Wg),children:(0,Gg.jsx)("i",{className:"fa-solid fa-arrow-right-from-bracket"})})]}),i&&e&&(0,Gg.jsx)(Zg,{userData:e,close:o})]})}const Kg=function(e){let{uid:t,onLanguageChange:n}=e;const[i,s]=(0,r.useState)([]),[o,a]=(0,r.useState)(null),[l,h]=(0,r.useState)(!1),[c]=(0,r.useState)(["Java","Python","HTML/CSS"]),u=(0,r.useRef)(null);(0,r.useEffect)((()=>{(async()=>{try{const e=wf(Xg,"users",t),n=(await yp(e)).data(),i=ip(bf(Xg,"programmingLanguages"),lp("name")),r=(await wp(i)).docs.map((e=>({id:e.id,...e.data()})));a(n.currentLanguage),s(r)}catch(e){console.error("Error fetching languages:",e)}})()}),[t]),(0,r.useEffect)((()=>{if(l&&u.current){const e=u.current.getBoundingClientRect();e.right>window.innerWidth&&(u.current.style.left="auto",u.current.style.right="0"),e.bottom>window.innerHeight&&(u.current.style.top="auto",u.current.style.bottom="100%")}}),[l]);const d=async e=>{try{const i=wf(Xg,"users",t),r=(await yp(i)).data(),s=r.programmingLanguages?[...new Set([...r.programmingLanguages,e.name])]:[e.name];await Sp(i,{currentLanguage:e.name,programmingLanguages:s}),a(e.name),h(!1),n(e.name)}catch(i){console.error("Error updating language:",i)}};return(0,Gg.jsxs)("div",{className:"language-dropdown",children:[(0,Gg.jsx)("button",{onClick:()=>h(!l),children:o||"Select Language"}),l&&(0,Gg.jsxs)("div",{ref:u,className:"language-dropdown-content",children:[i.map((e=>(0,Gg.jsx)("div",{className:"language-item ".concat(e.name===o?"current":""),onClick:()=>d(e),children:e.name},e.id))),(0,Gg.jsx)("hr",{}),c.map(((e,t)=>(0,Gg.jsx)("div",{className:"language-item ".concat(e===o?"current":""),onClick:()=>d({id:t,name:e}),children:e},t)))]})]})};const Jg=function(){const{uid:e}=ie(),[t,n]=(0,r.useState)(null),[i,s]=(0,r.useState)([]),[o,a]=(0,r.useState)([]),[l,h]=(0,r.useState)(!0),[c,u]=(0,r.useState)(null),[d,f]=(0,r.useState)(!1),p=ne();if((0,r.useEffect)((()=>{const t=setTimeout((async()=>{try{if(!e)return void u("Missing user ID");const t=wf(Xg,"users",e),i=await yp(t);if(!i.exists())return void u("User not found");const r=i.data();if(console.log(r),!r.currentLanguage){const e=ip(bf(Xg,"programmingLanguages"),lp("name")),n=(await wp(e)).docs[0].data();await Sp(t,{currentLanguage:n.name}),r.currentLanguage=n.name}const o="activities".concat(r.currentLanguage),a=ip(bf(Xg,o),lp("order"));let l=(await wp(a)).docs.map((e=>({id:e.id,...e.data()})));if(l=l.sort(((e,t)=>e.order-t.order)),n(r),s(l),1===r.currentActivity&&l.length>0){const e=l[0];if(!e.unlocked){f(!0);const t=wf(Xg,o,e.id);await Sp(t,{unlocked:!0}),setTimeout((()=>f(!1)),3e3)}}}catch(t){u(t.message)}finally{h(!1)}}),2e3);return()=>clearTimeout(t)}),[e]),l)return(0,Gg.jsx)("div",{className:"loading",children:"Loading..."});if(c)return(0,Gg.jsxs)("div",{className:"error",children:["Error: ",c]});const g=(e,t,n)=>e%2===0?t<n-1?"right":"down":t>0?"left":"down",m=((e,t)=>{const n=[];for(let i=0;i<e.length;i+=t)n.push(e.slice(i,i+t));return n})(i,3);return console.log(o),console.log(i[0].title),(0,Gg.jsxs)(Gg.Fragment,{children:[(0,Gg.jsx)(Hg,{userData:t}),(0,Gg.jsxs)("div",{className:"roadmap-page",children:[(0,Gg.jsxs)("div",{className:"roadmap-header",children:[(0,Gg.jsxs)("h2",{className:"roadmap-title",children:[t.username,"'s Roadmap"]}),(0,Gg.jsx)(Kg,{uid:e})]}),d&&(0,Gg.jsx)("div",{className:"unlock-animation",children:"New Activity Unlocked!"}),t&&(0,Gg.jsx)("div",{className:"roadmap-container",children:m.map(((n,i)=>(0,Gg.jsx)("div",{className:"roadmap-row",children:(i%2===1?n.reverse():n).map(((r,s)=>(0,Gg.jsxs)("div",{className:"activity-container",children:[(0,Gg.jsx)("div",{className:"activity-title",children:(0,Gg.jsxs)("h2",{children:[s," ",r.title]})}),r.order>t.currentActivity?(0,Gg.jsx)("p",{className:"locked-message",children:"Locked"}):(0,Gg.jsxs)("div",{className:"activity-buttons",children:[(0,Gg.jsx)("button",{onClick:()=>((n,i)=>{if(!i)return;const r=i.replace(/\s+/g,"-");n<=t.currentActivity?p("/lessons/".concat(e,"/").concat(t.currentLanguage,"/").concat(r)):alert("You need to complete the previous activities first!")})(r.order,r.title),children:"Learn It!"}),(0,Gg.jsx)("button",{onClick:()=>(n=>{if(!n||!n.title)return void console.error("Activity or activity title is undefined.");const i=n.title.replace(/\s+/g,"-");n.order<=t.currentActivity?p("/activity/".concat(e,"/").concat(i,"/").concat(n.order)):alert("You need to complete the previous activities first!")})(r),children:"Complete Task!"})]}),!(i===m.length-1&&s===n.length-1)&&(0,Gg.jsx)("div",{className:"connection ".concat(g(i,s,n.length))})]},s)))},i)))})]})]})};function em(){return em=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},em.apply(null,arguments)}class tm{lineAt(e){if(e<0||e>this.length)throw new RangeError("Invalid position ".concat(e," in document of length ").concat(this.length));return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError("Invalid line number ".concat(e," in ").concat(this.lines,"-line document"));return this.lineInner(e,!0,1,0)}replace(e,t,n){[e,t]=cm(this,e,t);let i=[];return this.decompose(0,e,i,2),n.length&&n.decompose(0,n.length,i,3),this.decompose(t,this.length,i,1),im.from(i,this.length-(t-e)+n.length)}append(e){return this.replace(this.length,this.length,e)}slice(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.length;[e,t]=cm(this,e,t);let n=[];return this.decompose(e,t,n,0),im.from(n,t-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let t=this.scanIdentical(e,1),n=this.length-this.scanIdentical(e,-1),i=new om(this),r=new om(e);for(let s=t,o=t;;){if(i.next(s),r.next(s),s=0,i.lineBreak!=r.lineBreak||i.done!=r.done||i.value!=r.value)return!1;if(o+=i.value.length,i.done||o>=n)return!0}}iter(){return new om(this,arguments.length>0&&void 0!==arguments[0]?arguments[0]:1)}iterRange(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.length;return new am(this,e,t)}iterLines(e,t){let n;if(null==e)n=this.iter();else{null==t&&(t=this.lines+1);let i=this.line(e).from;n=this.iterRange(i,Math.max(i,t==this.lines+1?this.length:t<=1?0:this.line(t-1).to))}return new lm(n)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}constructor(){}static of(e){if(0==e.length)throw new RangeError("A document must have at least one line");return 1!=e.length||e[0]?e.length<=32?new nm(e):im.from(nm.split(e,[])):tm.empty}}class nm extends tm{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e){let t=-1;for(let n of e)t+=n.length+1;return t}(e);super(),this.text=e,this.length=t}get lines(){return this.text.length}get children(){return null}lineInner(e,t,n,i){for(let r=0;;r++){let s=this.text[r],o=i+s.length;if((t?n:o)>=e)return new hm(i,o,n,s);i=o+1,n++}}decompose(e,t,n,i){let r=e<=0&&t>=this.length?this:new nm(sm(this.text,e,t),Math.min(t,this.length)-Math.max(0,e));if(1&i){let e=n.pop(),t=rm(r.text,e.text.slice(),0,r.length);if(t.length<=32)n.push(new nm(t,e.length+r.length));else{let e=t.length>>1;n.push(new nm(t.slice(0,e)),new nm(t.slice(e)))}}else n.push(r)}replace(e,t,n){if(!(n instanceof nm))return super.replace(e,t,n);[e,t]=cm(this,e,t);let i=rm(this.text,rm(n.text,sm(this.text,0,e)),t),r=this.length+n.length-(t-e);return i.length<=32?new nm(i,r):im.from(nm.split(i,[]),r)}sliceString(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.length,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"\n";[e,t]=cm(this,e,t);let i="";for(let r=0,s=0;r<=t&&s<this.text.length;s++){let o=this.text[s],a=r+o.length;r>e&&s&&(i+=n),e<a&&t>r&&(i+=o.slice(Math.max(0,e-r),t-r)),r=a+1}return i}flatten(e){for(let t of this.text)e.push(t)}scanIdentical(){return 0}static split(e,t){let n=[],i=-1;for(let r of e)n.push(r),i+=r.length+1,32==n.length&&(t.push(new nm(n,i)),n=[],i=-1);return i>-1&&t.push(new nm(n,i)),t}}class im extends tm{constructor(e,t){super(),this.children=e,this.length=t,this.lines=0;for(let n of e)this.lines+=n.lines}lineInner(e,t,n,i){for(let r=0;;r++){let s=this.children[r],o=i+s.length,a=n+s.lines-1;if((t?a:o)>=e)return s.lineInner(e,t,n,i);i=o+1,n=a+1}}decompose(e,t,n,i){for(let r=0,s=0;s<=t&&r<this.children.length;r++){let o=this.children[r],a=s+o.length;if(e<=a&&t>=s){let r=i&((s<=e?1:0)|(a>=t?2:0));s>=e&&a<=t&&!r?n.push(o):o.decompose(e-s,t-s,n,r)}s=a+1}}replace(e,t,n){if([e,t]=cm(this,e,t),n.lines<this.lines)for(let i=0,r=0;i<this.children.length;i++){let s=this.children[i],o=r+s.length;if(e>=r&&t<=o){let a=s.replace(e-r,t-r,n),l=this.lines-s.lines+a.lines;if(a.lines<l>>4&&a.lines>l>>6){let r=this.children.slice();return r[i]=a,new im(r,this.length-(t-e)+n.length)}return super.replace(r,o,a)}r=o+1}return super.replace(e,t,n)}sliceString(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.length,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"\n";[e,t]=cm(this,e,t);let i="";for(let r=0,s=0;r<this.children.length&&s<=t;r++){let o=this.children[r],a=s+o.length;s>e&&r&&(i+=n),e<a&&t>s&&(i+=o.sliceString(e-s,t-s,n)),s=a+1}return i}flatten(e){for(let t of this.children)t.flatten(e)}scanIdentical(e,t){if(!(e instanceof im))return 0;let n=0,[i,r,s,o]=t>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;i+=t,r+=t){if(i==s||r==o)return n;let a=this.children[i],l=e.children[r];if(a!=l)return n+a.scanIdentical(l,t);n+=a.length+1}}static from(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.reduce(((e,t)=>e+t.length+1),-1),n=0;for(let d of e)n+=d.lines;if(n<32){let n=[];for(let t of e)t.flatten(n);return new nm(n,t)}let i=Math.max(32,n>>5),r=i<<1,s=i>>1,o=[],a=0,l=-1,h=[];function c(e){let t;if(e.lines>r&&e instanceof im)for(let n of e.children)c(n);else e.lines>s&&(a>s||!a)?(u(),o.push(e)):e instanceof nm&&a&&(t=h[h.length-1])instanceof nm&&e.lines+t.lines<=32?(a+=e.lines,l+=e.length+1,h[h.length-1]=new nm(t.text.concat(e.text),t.length+1+e.length)):(a+e.lines>i&&u(),a+=e.lines,l+=e.length+1,h.push(e))}function u(){0!=a&&(o.push(1==h.length?h[0]:im.from(h,l)),l=-1,a=h.length=0)}for(let d of e)c(d);return u(),1==o.length?o[0]:new im(o,t)}}function rm(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e9;for(let r=0,s=0,o=!0;s<e.length&&r<=i;s++){let a=e[s],l=r+a.length;l>=n&&(l>i&&(a=a.slice(0,i-r)),r<n&&(a=a.slice(n-r)),o?(t[t.length-1]+=a,o=!1):t.push(a)),r=l+1}return t}function sm(e,t,n){return rm(e,[""],t,n)}tm.empty=new nm([""],0);class om{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this.dir=t,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[t>0?1:(e instanceof nm?e.text.length:e.children.length)<<1]}nextInner(e,t){for(this.done=this.lineBreak=!1;;){let n=this.nodes.length-1,i=this.nodes[n],r=this.offsets[n],s=r>>1,o=i instanceof nm?i.text.length:i.children.length;if(s==(t>0?o:0)){if(0==n)return this.done=!0,this.value="",this;t>0&&this.offsets[n-1]++,this.nodes.pop(),this.offsets.pop()}else if((1&r)==(t>0?0:1)){if(this.offsets[n]+=t,0==e)return this.lineBreak=!0,this.value="\n",this;e--}else if(i instanceof nm){let r=i.text[s+(t<0?-1:0)];if(this.offsets[n]+=t,r.length>Math.max(0,e))return this.value=0==e?r:t>0?r.slice(e):r.slice(0,r.length-e),this;e-=r.length}else{let r=i.children[s+(t<0?-1:0)];e>r.length?(e-=r.length,this.offsets[n]+=t):(t<0&&this.offsets[n]--,this.nodes.push(r),this.offsets.push(t>0?1:(r instanceof nm?r.text.length:r.children.length)<<1))}}}next(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}}class am{constructor(e,t,n){this.value="",this.done=!1,this.cursor=new om(e,t>n?-1:1),this.pos=t>n?e.length:0,this.from=Math.min(t,n),this.to=Math.max(t,n)}nextInner(e,t){if(t<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,t<0?this.pos-this.to:this.from-this.pos);let n=t<0?this.pos-this.from:this.to-this.pos;e>n&&(e=n),n-=e;let{value:i}=this.cursor.next(e);return this.pos+=(i.length+e)*t,this.value=i.length<=n?i:t<0?i.slice(i.length-n):i.slice(0,n),this.done=!this.value,this}next(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&""!=this.value}}class lm{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,{done:t,lineBreak:n,value:i}=this.inner.next(e);return t&&this.afterBreak?(this.value="",this.afterBreak=!1):t?(this.done=!0,this.value=""):n?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=i,this.afterBreak=!1),this}get lineBreak(){return!1}}"undefined"!=typeof Symbol&&(tm.prototype[Symbol.iterator]=function(){return this.iter()},om.prototype[Symbol.iterator]=am.prototype[Symbol.iterator]=lm.prototype[Symbol.iterator]=function(){return this});class hm{constructor(e,t,n,i){this.from=e,this.to=t,this.number=n,this.text=i}get length(){return this.to-this.from}}function cm(e,t,n){return[t=Math.max(0,Math.min(e.length,t)),Math.max(t,Math.min(e.length,n))]}let um="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map((e=>e?parseInt(e,36):1));for(let n=1;n<um.length;n++)um[n]+=um[n-1];function dm(e){for(let t=1;t<um.length;t+=2)if(um[t]>e)return um[t-1]<=e;return!1}function fm(e){return e>=127462&&e<=127487}const pm=8205;function gm(e,t){return(!(arguments.length>2&&void 0!==arguments[2])||arguments[2]?mm:Om)(e,t,!(arguments.length>3&&void 0!==arguments[3])||arguments[3])}function mm(e,t,n){if(t==e.length)return t;t&&vm(e.charCodeAt(t))&&ym(e.charCodeAt(t-1))&&t--;let i=bm(e,t);for(t+=km(i);t<e.length;){let r=bm(e,t);if(i==pm||r==pm||n&&dm(r))t+=km(r),i=r;else{if(!fm(r))break;{let n=0,i=t-2;for(;i>=0&&fm(bm(e,i));)n++,i-=2;if(n%2==0)break;t+=2}}}return t}function Om(e,t,n){for(;t>0;){let i=mm(e,t-2,n);if(i<t)return i;t--}return 0}function vm(e){return e>=56320&&e<57344}function ym(e){return e>=55296&&e<56320}function bm(e,t){let n=e.charCodeAt(t);if(!ym(n)||t+1==e.length)return n;let i=e.charCodeAt(t+1);return vm(i)?i-56320+(n-55296<<10)+65536:n}function wm(e){return e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode(55296+(e>>10),56320+(1023&e)))}function km(e){return e<65536?1:2}const Sm=/\r\n?|\n/;var xm=function(e){return e[e.Simple=0]="Simple",e[e.TrackDel=1]="TrackDel",e[e.TrackBefore=2]="TrackBefore",e[e.TrackAfter=3]="TrackAfter",e}(xm||(xm={}));class Tm{constructor(e){this.sections=e}get length(){let e=0;for(let t=0;t<this.sections.length;t+=2)e+=this.sections[t];return e}get newLength(){let e=0;for(let t=0;t<this.sections.length;t+=2){let n=this.sections[t+1];e+=n<0?this.sections[t]:n}return e}get empty(){return 0==this.sections.length||2==this.sections.length&&this.sections[1]<0}iterGaps(e){for(let t=0,n=0,i=0;t<this.sections.length;){let r=this.sections[t++],s=this.sections[t++];s<0?(e(n,i,r),i+=r):i+=s,n+=r}}iterChangedRanges(e){Em(this,e,arguments.length>1&&void 0!==arguments[1]&&arguments[1])}get invertedDesc(){let e=[];for(let t=0;t<this.sections.length;){let n=this.sections[t++],i=this.sections[t++];i<0?e.push(n,i):e.push(i,n)}return new Tm(e)}composeDesc(e){return this.empty?e:e.empty?this:Am(this,e)}mapDesc(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e.empty?this:Qm(this,e,t)}mapPos(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:xm.Simple,i=0,r=0;for(let s=0;s<this.sections.length;){let o=this.sections[s++],a=this.sections[s++],l=i+o;if(a<0){if(l>e)return r+(e-i);r+=o}else{if(n!=xm.Simple&&l>=e&&(n==xm.TrackDel&&i<e&&l>e||n==xm.TrackBefore&&i<e||n==xm.TrackAfter&&l>e))return null;if(l>e||l==e&&t<0&&!o)return e==i||t<0?r:r+a;r+=a}i=l}if(e>i)throw new RangeError("Position ".concat(e," is out of range for changeset of length ").concat(i));return r}touchesRange(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e;for(let n=0,i=0;n<this.sections.length&&i<=t;){let r=i+this.sections[n++];if(this.sections[n++]>=0&&i<=t&&r>=e)return!(i<e&&r>t)||"cover";i=r}return!1}toString(){let e="";for(let t=0;t<this.sections.length;){let n=this.sections[t++],i=this.sections[t++];e+=(e?" ":"")+n+(i>=0?":"+i:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some((e=>"number"!=typeof e)))throw new RangeError("Invalid JSON representation of ChangeDesc");return new Tm(e)}static create(e){return new Tm(e)}}class _m extends Tm{constructor(e,t){super(e),this.inserted=t}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return Em(this,((t,n,i,r,s)=>e=e.replace(i,i+(n-t),s)),!1),e}mapDesc(e){return Qm(this,e,arguments.length>1&&void 0!==arguments[1]&&arguments[1],!0)}invert(e){let t=this.sections.slice(),n=[];for(let i=0,r=0;i<t.length;i+=2){let s=t[i],o=t[i+1];if(o>=0){t[i]=o,t[i+1]=s;let a=i>>1;for(;n.length<a;)n.push(tm.empty);n.push(s?e.slice(r,r+s):tm.empty)}r+=s}return new _m(t,n)}compose(e){return this.empty?e:e.empty?this:Am(this,e,!0)}map(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e.empty?this:Qm(this,e,t,!0)}iterChanges(e){Em(this,e,arguments.length>1&&void 0!==arguments[1]&&arguments[1])}get desc(){return Tm.create(this.sections)}filter(e){let t=[],n=[],i=[],r=new Rm(this);e:for(let s=0,o=0;;){let a=s==e.length?1e9:e[s++];for(;o<a||o==a&&0==r.len;){if(r.done)break e;let e=Math.min(r.len,a-o);Pm(i,e,-1);let s=-1==r.ins?-1:0==r.off?r.ins:0;Pm(t,e,s),s>0&&Cm(n,t,r.text),r.forward(e),o+=e}let l=e[s++];for(;o<l;){if(r.done)break e;let e=Math.min(r.len,l-o);Pm(t,e,-1),Pm(i,e,-1==r.ins?-1:0==r.off?r.ins:0),r.forward(e),o+=e}}return{changes:new _m(t,n),filtered:Tm.create(i)}}toJSON(){let e=[];for(let t=0;t<this.sections.length;t+=2){let n=this.sections[t],i=this.sections[t+1];i<0?e.push(n):0==i?e.push([n]):e.push([n].concat(this.inserted[t>>1].toJSON()))}return e}static of(e,t,n){let i=[],r=[],s=0,o=null;function a(){if(!(arguments.length>0&&void 0!==arguments[0]&&arguments[0])&&!i.length)return;s<t&&Pm(i,t-s,-1);let e=new _m(i,r);o=o?o.compose(e.map(o)):e,i=[],r=[],s=0}return function e(l){if(Array.isArray(l))for(let t of l)e(t);else if(l instanceof _m){if(l.length!=t)throw new RangeError("Mismatched change set length (got ".concat(l.length,", expected ").concat(t,")"));a(),o=o?o.compose(l.map(o)):l}else{let{from:e,to:o=e,insert:h}=l;if(e>o||e<0||o>t)throw new RangeError("Invalid change range ".concat(e," to ").concat(o," (in doc of length ").concat(t,")"));let c=h?"string"==typeof h?tm.of(h.split(n||Sm)):h:tm.empty,u=c.length;if(e==o&&0==u)return;e<s&&a(),e>s&&Pm(i,e-s,-1),Pm(i,o-e,u),Cm(r,i,c),s=o}}(e),a(!o),o}static empty(e){return new _m(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let t=[],n=[];for(let i=0;i<e.length;i++){let r=e[i];if("number"==typeof r)t.push(r,-1);else{if(!Array.isArray(r)||"number"!=typeof r[0]||r.some(((e,t)=>t&&"string"!=typeof e)))throw new RangeError("Invalid JSON representation of ChangeSet");if(1==r.length)t.push(r[0],0);else{for(;n.length<i;)n.push(tm.empty);n[i]=tm.of(r.slice(1)),t.push(r[0],n[i].length)}}}return new _m(t,n)}static createSet(e,t){return new _m(e,t)}}function Pm(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(0==t&&n<=0)return;let r=e.length-2;r>=0&&n<=0&&n==e[r+1]?e[r]+=t:0==t&&0==e[r]?e[r+1]+=n:i?(e[r]+=t,e[r+1]+=n):e.push(t,n)}function Cm(e,t,n){if(0==n.length)return;let i=t.length-2>>1;if(i<e.length)e[e.length-1]=e[e.length-1].append(n);else{for(;e.length<i;)e.push(tm.empty);e.push(n)}}function Em(e,t,n){let i=e.inserted;for(let r=0,s=0,o=0;o<e.sections.length;){let a=e.sections[o++],l=e.sections[o++];if(l<0)r+=a,s+=a;else{let h=r,c=s,u=tm.empty;for(;h+=a,c+=l,l&&i&&(u=u.append(i[o-2>>1])),!(n||o==e.sections.length||e.sections[o+1]<0);)a=e.sections[o++],l=e.sections[o++];t(r,h,s,c,u),r=h,s=c}}}function Qm(e,t,n){let i=[],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3]?[]:null,s=new Rm(e),o=new Rm(t);for(let a=-1;;)if(-1==s.ins&&-1==o.ins){let e=Math.min(s.len,o.len);Pm(i,e,-1),s.forward(e),o.forward(e)}else if(o.ins>=0&&(s.ins<0||a==s.i||0==s.off&&(o.len<s.len||o.len==s.len&&!n))){let e=o.len;for(Pm(i,o.ins,-1);e;){let t=Math.min(s.len,e);s.ins>=0&&a<s.i&&s.len<=t&&(Pm(i,0,s.ins),r&&Cm(r,i,s.text),a=s.i),s.forward(t),e-=t}o.next()}else{if(!(s.ins>=0)){if(s.done&&o.done)return r?_m.createSet(i,r):Tm.create(i);throw new Error("Mismatched change set lengths")}{let e=0,t=s.len;for(;t;)if(-1==o.ins){let n=Math.min(t,o.len);e+=n,t-=n,o.forward(n)}else{if(!(0==o.ins&&o.len<t))break;t-=o.len,o.next()}Pm(i,e,a<s.i?s.ins:0),r&&a<s.i&&Cm(r,i,s.text),a=s.i,s.forward(s.len-t)}}}function Am(e,t){let n=[],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2]?[]:null,r=new Rm(e),s=new Rm(t);for(let o=!1;;){if(r.done&&s.done)return i?_m.createSet(n,i):Tm.create(n);if(0==r.ins)Pm(n,r.len,0,o),r.next();else if(0!=s.len||s.done){if(r.done||s.done)throw new Error("Mismatched change set lengths");{let e=Math.min(r.len2,s.len),t=n.length;if(-1==r.ins){let t=-1==s.ins?-1:s.off?0:s.ins;Pm(n,e,t,o),i&&t&&Cm(i,n,s.text)}else-1==s.ins?(Pm(n,r.off?0:r.len,e,o),i&&Cm(i,n,r.textBit(e))):(Pm(n,r.off?0:r.len,s.off?0:s.ins,o),i&&!s.off&&Cm(i,n,s.text));o=(r.ins>e||s.ins>=0&&s.len>e)&&(o||n.length>t),r.forward2(e),s.forward(e)}}else Pm(n,0,s.ins,o),i&&Cm(i,n,s.text),s.next()}}class Rm{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return-2==this.ins}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,t=this.i-2>>1;return t>=e.length?tm.empty:e[t]}textBit(e){let{inserted:t}=this.set,n=this.i-2>>1;return n>=t.length&&!e?tm.empty:t[n].slice(this.off,null==e?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){-1==this.ins?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}}class Nm{constructor(e,t,n){this.from=e,this.to=t,this.flags=n}get anchor(){return 32&this.flags?this.to:this.from}get head(){return 32&this.flags?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return 8&this.flags?-1:16&this.flags?1:0}get bidiLevel(){let e=7&this.flags;return 7==e?null:e}get goalColumn(){let e=this.flags>>6;return 16777215==e?void 0:e}map(e){let t,n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;return this.empty?t=n=e.mapPos(this.from,i):(t=e.mapPos(this.from,1),n=e.mapPos(this.to,-1)),t==this.from&&n==this.to?this:new Nm(t,n,this.flags)}extend(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e;if(e<=this.anchor&&t>=this.anchor)return Im.range(e,t);let n=Math.abs(e-this.anchor)>Math.abs(t-this.anchor)?e:t;return Im.range(this.anchor,n)}eq(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.anchor==e.anchor&&this.head==e.head&&(!t||!this.empty||this.assoc==e.assoc)}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||"number"!=typeof e.anchor||"number"!=typeof e.head)throw new RangeError("Invalid JSON representation for SelectionRange");return Im.range(e.anchor,e.head)}static create(e,t,n){return new Nm(e,t,n)}}class Im{constructor(e,t){this.ranges=e,this.mainIndex=t}map(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;return e.empty?this:Im.create(this.ranges.map((n=>n.map(e,t))),this.mainIndex)}eq(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let n=0;n<this.ranges.length;n++)if(!this.ranges[n].eq(e.ranges[n],t))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return 1==this.ranges.length?this:new Im([this.main],0)}addRange(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return Im.create([e].concat(this.ranges),t?0:this.mainIndex+1)}replaceRange(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.mainIndex,n=this.ranges.slice();return n[t]=e,Im.create(n,this.mainIndex)}toJSON(){return{ranges:this.ranges.map((e=>e.toJSON())),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||"number"!=typeof e.main||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new Im(e.ranges.map((e=>Nm.fromJSON(e))),e.main)}static single(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e;return new Im([Im.range(e,t)],0)}static create(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(0==e.length)throw new RangeError("A selection needs at least one range");for(let n=0,i=0;i<e.length;i++){let r=e[i];if(r.empty?r.from<=n:r.from<n)return Im.normalized(e.slice(),t);n=r.to}return new Im(e,t)}static cursor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0;return Nm.create(e,e,(0==t?0:t<0?8:16)|(null==n?7:Math.min(6,n))|(null!==i&&void 0!==i?i:16777215)<<6)}static range(e,t,n,i){let r=(null!==n&&void 0!==n?n:16777215)<<6|(null==i?7:Math.min(6,i));return t<e?Nm.create(t,e,48|r):Nm.create(e,t,(t>e?8:0)|r)}static normalized(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=e[t];e.sort(((e,t)=>e.from-t.from)),t=e.indexOf(n);for(let i=1;i<e.length;i++){let n=e[i],r=e[i-1];if(n.empty?n.from<=r.to:n.from<r.to){let s=r.from,o=Math.max(n.to,r.to);i<=t&&t--,e.splice(--i,2,n.anchor>n.head?Im.range(o,s):Im.range(s,o))}}return new Im(e,t)}}function Dm(e,t){for(let n of e.ranges)if(n.to>t)throw new RangeError("Selection points outside of document")}let Mm=0;class Lm{constructor(e,t,n,i,r){this.combine=e,this.compareInput=t,this.compare=n,this.isStatic=i,this.id=Mm++,this.default=e([]),this.extensions="function"==typeof r?r(this):r}get reader(){return this}static define(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Lm(e.combine||(e=>e),e.compareInput||((e,t)=>e===t),e.compare||(e.combine?(e,t)=>e===t:$m),!!e.static,e.enables)}of(e){return new Um([],this,0,e)}compute(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new Um(e,this,1,t)}computeN(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new Um(e,this,2,t)}from(e,t){return t||(t=e=>e),this.compute([e],(n=>t(n.field(e))))}}function $m(e,t){return e==t||e.length==t.length&&e.every(((e,n)=>e===t[n]))}class Um{constructor(e,t,n,i){this.dependencies=e,this.facet=t,this.type=n,this.value=i,this.id=Mm++}dynamicSlot(e){var t;let n=this.value,i=this.facet.compareInput,r=this.id,s=e[r]>>1,o=2==this.type,a=!1,l=!1,h=[];for(let c of this.dependencies)"doc"==c?a=!0:"selection"==c?l=!0:0==(1&(null!==(t=e[c.id])&&void 0!==t?t:1))&&h.push(e[c.id]);return{create:e=>(e.values[s]=n(e),1),update(e,t){if(a&&t.docChanged||l&&(t.docChanged||t.selection)||Vm(e,h)){let t=n(e);if(o?!qm(t,e.values[s],i):!i(t,e.values[s]))return e.values[s]=t,1}return 0},reconfigure:(e,t)=>{let a,l=t.config.address[r];if(null!=l){let r=nO(t,l);if(this.dependencies.every((n=>n instanceof Lm?t.facet(n)===e.facet(n):!(n instanceof Bm)||t.field(n,!1)==e.field(n,!1)))||(o?qm(a=n(e),r,i):i(a=n(e),r)))return e.values[s]=r,0}else a=n(e);return e.values[s]=a,1}}}}function qm(e,t,n){if(e.length!=t.length)return!1;for(let i=0;i<e.length;i++)if(!n(e[i],t[i]))return!1;return!0}function Vm(e,t){let n=!1;for(let i of t)1&tO(e,i)&&(n=!0);return n}function zm(e,t,n){let i=n.map((t=>e[t.id])),r=n.map((e=>e.type)),s=i.filter((e=>!(1&e))),o=e[t.id]>>1;function a(e){let n=[];for(let t=0;t<i.length;t++){let s=nO(e,i[t]);if(2==r[t])for(let e of s)n.push(e);else n.push(s)}return t.combine(n)}return{create(e){for(let t of i)tO(e,t);return e.values[o]=a(e),1},update(e,n){if(!Vm(e,s))return 0;let i=a(e);return t.compare(i,e.values[o])?0:(e.values[o]=i,1)},reconfigure(e,r){let s=Vm(e,i),l=r.config.facets[t.id],h=r.facet(t);if(l&&!s&&$m(n,l))return e.values[o]=h,0;let c=a(e);return t.compare(c,h)?(e.values[o]=h,0):(e.values[o]=c,1)}}}const jm=Lm.define({static:!0});class Bm{constructor(e,t,n,i,r){this.id=e,this.createF=t,this.updateF=n,this.compareF=i,this.spec=r,this.provides=void 0}static define(e){let t=new Bm(Mm++,e.create,e.update,e.compare||((e,t)=>e===t),e);return e.provide&&(t.provides=e.provide(t)),t}create(e){let t=e.facet(jm).find((e=>e.field==this));return((null===t||void 0===t?void 0:t.create)||this.createF)(e)}slot(e){let t=e[this.id]>>1;return{create:e=>(e.values[t]=this.create(e),1),update:(e,n)=>{let i=e.values[t],r=this.updateF(i,n);return this.compareF(i,r)?0:(e.values[t]=r,1)},reconfigure:(e,n)=>null!=n.config.address[this.id]?(e.values[t]=n.field(this),0):(e.values[t]=this.create(e),1)}}init(e){return[this,jm.of({field:this,create:e})]}get extension(){return this}}const Fm=4,Wm=3,Xm=2,Ym=1;function Gm(e){return t=>new Hm(t,e)}const Zm={highest:Gm(0),high:Gm(Ym),default:Gm(Xm),low:Gm(Wm),lowest:Gm(Fm)};class Hm{constructor(e,t){this.inner=e,this.prec=t}}class Km{of(e){return new Jm(this,e)}reconfigure(e){return Km.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}}class Jm{constructor(e,t){this.compartment=e,this.inner=t}}class eO{constructor(e,t,n,i,r,s){for(this.base=e,this.compartments=t,this.dynamicSlots=n,this.address=i,this.staticValues=r,this.facets=s,this.statusTemplate=[];this.statusTemplate.length<n.length;)this.statusTemplate.push(0)}staticFacet(e){let t=this.address[e.id];return null==t?e.default:this.staticValues[t>>1]}static resolve(e,t,n){let i=[],r=Object.create(null),s=new Map;for(let u of function(e,t,n){let i=[[],[],[],[],[]],r=new Map;function s(e,o){let a=r.get(e);if(null!=a){if(a<=o)return;let t=i[a].indexOf(e);t>-1&&i[a].splice(t,1),e instanceof Jm&&n.delete(e.compartment)}if(r.set(e,o),Array.isArray(e))for(let t of e)s(t,o);else if(e instanceof Jm){if(n.has(e.compartment))throw new RangeError("Duplicate use of compartment in extensions");let i=t.get(e.compartment)||e.inner;n.set(e.compartment,i),s(i,o)}else if(e instanceof Hm)s(e.inner,e.prec);else if(e instanceof Bm)i[o].push(e),e.provides&&s(e.provides,o);else if(e instanceof Um)i[o].push(e),e.facet.extensions&&s(e.facet.extensions,Xm);else{let t=e.extension;if(!t)throw new Error("Unrecognized extension value in extension set (".concat(e,"). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks."));s(t,o)}}return s(e,Xm),i.reduce(((e,t)=>e.concat(t)))}(e,t,s))u instanceof Bm?i.push(u):(r[u.facet.id]||(r[u.facet.id]=[])).push(u);let o=Object.create(null),a=[],l=[];for(let u of i)o[u.id]=l.length<<1,l.push((e=>u.slot(e)));let h=null===n||void 0===n?void 0:n.config.facets;for(let u in r){let e=r[u],t=e[0].facet,i=h&&h[u]||[];if(e.every((e=>0==e.type)))if(o[t.id]=a.length<<1|1,$m(i,e))a.push(n.facet(t));else{let i=t.combine(e.map((e=>e.value)));a.push(n&&t.compare(i,n.facet(t))?n.facet(t):i)}else{for(let t of e)0==t.type?(o[t.id]=a.length<<1|1,a.push(t.value)):(o[t.id]=l.length<<1,l.push((e=>t.dynamicSlot(e))));o[t.id]=l.length<<1,l.push((n=>zm(n,t,e)))}}let c=l.map((e=>e(o)));return new eO(e,s,c,o,a,r)}}function tO(e,t){if(1&t)return 2;let n=t>>1,i=e.status[n];if(4==i)throw new Error("Cyclic dependency between fields and/or facets");if(2&i)return i;e.status[n]=4;let r=e.computeSlot(e,e.config.dynamicSlots[n]);return e.status[n]=2|r}function nO(e,t){return 1&t?e.config.staticValues[t>>1]:e.values[t>>1]}const iO=Lm.define(),rO=Lm.define({combine:e=>e.some((e=>e)),static:!0}),sO=Lm.define({combine:e=>e.length?e[0]:void 0,static:!0}),oO=Lm.define(),aO=Lm.define(),lO=Lm.define(),hO=Lm.define({combine:e=>!!e.length&&e[0]});class cO{constructor(e,t){this.type=e,this.value=t}static define(){return new uO}}class uO{of(e){return new cO(this,e)}}class dO{constructor(e){this.map=e}of(e){return new fO(this,e)}}class fO{constructor(e,t){this.type=e,this.value=t}map(e){let t=this.type.map(this.value,e);return void 0===t?void 0:t==this.value?this:new fO(this.type,t)}is(e){return this.type==e}static define(){return new dO((arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).map||(e=>e))}static mapEffects(e,t){if(!e.length)return e;let n=[];for(let i of e){let e=i.map(t);e&&n.push(e)}return n}}fO.reconfigure=fO.define(),fO.appendConfig=fO.define();class pO{constructor(e,t,n,i,r,s){this.startState=e,this.changes=t,this.selection=n,this.effects=i,this.annotations=r,this.scrollIntoView=s,this._doc=null,this._state=null,n&&Dm(n,t.newLength),r.some((e=>e.type==pO.time))||(this.annotations=r.concat(pO.time.of(Date.now())))}static create(e,t,n,i,r,s){return new pO(e,t,n,i,r,s)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let t of this.annotations)if(t.type==e)return t.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let t=this.annotation(pO.userEvent);return!(!t||!(t==e||t.length>e.length&&t.slice(0,e.length)==e&&"."==t[e.length]))}}function gO(e,t){let n=[];for(let i=0,r=0;;){let s,o;if(i<e.length&&(r==t.length||t[r]>=e[i]))s=e[i++],o=e[i++];else{if(!(r<t.length))return n;s=t[r++],o=t[r++]}!n.length||n[n.length-1]<s?n.push(s,o):n[n.length-1]<o&&(n[n.length-1]=o)}}function mO(e,t,n){var i;let r,s,o;return n?(r=t.changes,s=_m.empty(t.changes.length),o=e.changes.compose(t.changes)):(r=t.changes.map(e.changes),s=e.changes.mapDesc(t.changes,!0),o=e.changes.compose(r)),{changes:o,selection:t.selection?t.selection.map(s):null===(i=e.selection)||void 0===i?void 0:i.map(r),effects:fO.mapEffects(e.effects,r).concat(fO.mapEffects(t.effects,s)),annotations:e.annotations.length?e.annotations.concat(t.annotations):t.annotations,scrollIntoView:e.scrollIntoView||t.scrollIntoView}}function OO(e,t,n){let i=t.selection,r=bO(t.annotations);return t.userEvent&&(r=r.concat(pO.userEvent.of(t.userEvent))),{changes:t.changes instanceof _m?t.changes:_m.of(t.changes||[],n,e.facet(sO)),selection:i&&(i instanceof Im?i:Im.single(i.anchor,i.head)),effects:bO(t.effects),annotations:r,scrollIntoView:!!t.scrollIntoView}}function vO(e,t,n){let i=OO(e,t.length?t[0]:{},e.doc.length);t.length&&!1===t[0].filter&&(n=!1);for(let s=1;s<t.length;s++){!1===t[s].filter&&(n=!1);let r=!!t[s].sequential;i=mO(i,OO(e,t[s],r?i.changes.newLength:e.doc.length),r)}let r=pO.create(e,i.changes,i.selection,i.effects,i.annotations,i.scrollIntoView);return function(e){let t=e.startState,n=t.facet(lO),i=e;for(let r=n.length-1;r>=0;r--){let s=n[r](e);s&&Object.keys(s).length&&(i=mO(i,OO(t,s,e.changes.newLength),!0))}return i==e?e:pO.create(t,e.changes,e.selection,i.effects,i.annotations,i.scrollIntoView)}(n?function(e){let t=e.startState,n=!0;for(let r of t.facet(oO)){let t=r(e);if(!1===t){n=!1;break}Array.isArray(t)&&(n=!0===n?t:gO(n,t))}if(!0!==n){let i,r;if(!1===n)r=e.changes.invertedDesc,i=_m.empty(t.doc.length);else{let t=e.changes.filter(n);i=t.changes,r=t.filtered.mapDesc(t.changes).invertedDesc}e=pO.create(t,i,e.selection&&e.selection.map(r),fO.mapEffects(e.effects,r),e.annotations,e.scrollIntoView)}let i=t.facet(aO);for(let r=i.length-1;r>=0;r--){let n=i[r](e);e=n instanceof pO?n:Array.isArray(n)&&1==n.length&&n[0]instanceof pO?n[0]:vO(t,bO(n),!1)}return e}(r):r)}pO.time=cO.define(),pO.userEvent=cO.define(),pO.addToHistory=cO.define(),pO.remote=cO.define();const yO=[];function bO(e){return null==e?yO:Array.isArray(e)?e:[e]}var wO=function(e){return e[e.Word=0]="Word",e[e.Space=1]="Space",e[e.Other=2]="Other",e}(wO||(wO={}));const kO=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let SO;try{SO=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch(PF){}function xO(e){return t=>{if(!/\S/.test(t))return wO.Space;if(function(e){if(SO)return SO.test(e);for(let t=0;t<e.length;t++){let n=e[t];if(/\w/.test(n)||n>"\x80"&&(n.toUpperCase()!=n.toLowerCase()||kO.test(n)))return!0}return!1}(t))return wO.Word;for(let n=0;n<e.length;n++)if(t.indexOf(e[n])>-1)return wO.Word;return wO.Other}}class TO{constructor(e,t,n,i,r,s){this.config=e,this.doc=t,this.selection=n,this.values=i,this.status=e.statusTemplate.slice(),this.computeSlot=r,s&&(s._state=this);for(let o=0;o<this.config.dynamicSlots.length;o++)tO(this,o<<1);this.computeSlot=null}field(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this.config.address[e.id];if(null!=n)return tO(this,n),nO(this,n);if(t)throw new RangeError("Field is not present in this state")}update(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return vO(this,t,!0)}applyTransaction(e){let t,n=this.config,{base:i,compartments:r}=n;for(let o of e.effects)o.is(Km.reconfigure)?(n&&(r=new Map,n.compartments.forEach(((e,t)=>r.set(t,e))),n=null),r.set(o.value.compartment,o.value.extension)):o.is(fO.reconfigure)?(n=null,i=o.value):o.is(fO.appendConfig)&&(n=null,i=bO(i).concat(o.value));if(n)t=e.startState.values.slice();else{n=eO.resolve(i,r,this),t=new TO(n,this.doc,this.selection,n.dynamicSlots.map((()=>null)),((e,t)=>t.reconfigure(e,this)),null).values}let s=e.startState.facet(rO)?e.newSelection:e.newSelection.asSingle();new TO(n,e.newDoc,s,t,((t,n)=>n.update(t,e)),e)}replaceSelection(e){return"string"==typeof e&&(e=this.toText(e)),this.changeByRange((t=>({changes:{from:t.from,to:t.to,insert:e},range:Im.cursor(t.from+e.length)})))}changeByRange(e){let t=this.selection,n=e(t.ranges[0]),i=this.changes(n.changes),r=[n.range],s=bO(n.effects);for(let o=1;o<t.ranges.length;o++){let n=e(t.ranges[o]),a=this.changes(n.changes),l=a.map(i);for(let e=0;e<o;e++)r[e]=r[e].map(l);let h=i.mapDesc(a,!0);r.push(n.range.map(h)),i=i.compose(l),s=fO.mapEffects(s,l).concat(fO.mapEffects(bO(n.effects),h))}return{changes:i,selection:Im.create(r,t.mainIndex),effects:s}}changes(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e instanceof _m?e:_m.of(e,this.doc.length,this.facet(TO.lineSeparator))}toText(e){return tm.of(e.split(this.facet(TO.lineSeparator)||Sm))}sliceDoc(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.doc.length;return this.doc.sliceString(e,t,this.lineBreak)}facet(e){let t=this.config.address[e.id];return null==t?e.default:(tO(this,t),nO(this,t))}toJSON(e){let t={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let n in e){let i=e[n];i instanceof Bm&&null!=this.config.address[i.id]&&(t[n]=i.spec.toJSON(this.field(e[n]),this))}return t}static fromJSON(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;if(!e||"string"!=typeof e.doc)throw new RangeError("Invalid JSON representation for EditorState");let i=[];if(n)for(let r in n)if(Object.prototype.hasOwnProperty.call(e,r)){let t=n[r],s=e[r];i.push(t.init((e=>t.spec.fromJSON(s,e))))}return TO.create({doc:e.doc,selection:Im.fromJSON(e.selection),extensions:t.extensions?i.concat([t.extensions]):i})}static create(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=eO.resolve(e.extensions||[],new Map),n=e.doc instanceof tm?e.doc:tm.of((e.doc||"").split(t.staticFacet(TO.lineSeparator)||Sm)),i=e.selection?e.selection instanceof Im?e.selection:Im.single(e.selection.anchor,e.selection.head):Im.single(0);return Dm(i,n.length),t.staticFacet(rO)||(i=i.asSingle()),new TO(t,n,i,t.dynamicSlots.map((()=>null)),((e,t)=>t.create(e)),null)}get tabSize(){return this.facet(TO.tabSize)}get lineBreak(){return this.facet(TO.lineSeparator)||"\n"}get readOnly(){return this.facet(hO)}phrase(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];for(let r of this.facet(TO.phrases))if(Object.prototype.hasOwnProperty.call(r,e)){e=r[e];break}return n.length&&(e=e.replace(/\$(\$|\d*)/g,((e,t)=>{if("$"==t)return"$";let i=+(t||1);return!i||i>n.length?e:n[i-1]}))),e}languageDataAt(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1,i=[];for(let r of this.facet(iO))for(let s of r(this,t,n))Object.prototype.hasOwnProperty.call(s,e)&&i.push(s[e]);return i}charCategorizer(e){return xO(this.languageDataAt("wordChars",e).join(""))}wordAt(e){let{text:t,from:n,length:i}=this.doc.lineAt(e),r=this.charCategorizer(e),s=e-n,o=e-n;for(;s>0;){let e=gm(t,s,!1);if(r(t.slice(e,s))!=wO.Word)break;s=e}for(;o<i;){let e=gm(t,o);if(r(t.slice(o,e))!=wO.Word)break;o=e}return s==o?null:Im.range(s+n,o+n)}}function _O(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i={};for(let r of e)for(let e of Object.keys(r)){let t=r[e],s=i[e];if(void 0===s)i[e]=t;else if(s===t||void 0===t);else{if(!Object.hasOwnProperty.call(n,e))throw new Error("Config merge conflict for field "+e);i[e]=n[e](s,t)}}for(let r in t)void 0===i[r]&&(i[r]=t[r]);return i}TO.allowMultipleSelections=rO,TO.tabSize=Lm.define({combine:e=>e.length?e[0]:4}),TO.lineSeparator=sO,TO.readOnly=hO,TO.phrases=Lm.define({compare(e,t){let n=Object.keys(e),i=Object.keys(t);return n.length==i.length&&n.every((n=>e[n]==t[n]))}}),TO.languageData=iO,TO.changeFilter=oO,TO.transactionFilter=aO,TO.transactionExtender=lO,Km.reconfigure=fO.define();class PO{eq(e){return this==e}range(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e;return CO.create(e,t,this)}}PO.prototype.startSide=PO.prototype.endSide=0,PO.prototype.point=!1,PO.prototype.mapMode=xm.TrackDel;class CO{constructor(e,t,n){this.from=e,this.to=t,this.value=n}static create(e,t,n){return new CO(e,t,n)}}function EO(e,t){return e.from-t.from||e.value.startSide-t.value.startSide}class QO{constructor(e,t,n,i){this.from=e,this.to=t,this.value=n,this.maxPoint=i}get length(){return this.to[this.to.length-1]}findIndex(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=n?this.to:this.from;for(let s=i,o=r.length;;){if(s==o)return s;let i=s+o>>1,a=r[i]-e||(n?this.value[i].endSide:this.value[i].startSide)-t;if(i==s)return a>=0?s:o;a>=0?o=i:s=i+1}}between(e,t,n,i){for(let r=this.findIndex(t,-1e9,!0),s=this.findIndex(n,1e9,!1,r);r<s;r++)if(!1===i(this.from[r]+e,this.to[r]+e,this.value[r]))return!1}map(e,t){let n=[],i=[],r=[],s=-1,o=-1;for(let a=0;a<this.value.length;a++){let l,h,c=this.value[a],u=this.from[a]+e,d=this.to[a]+e;if(u==d){let e=t.mapPos(u,c.startSide,c.mapMode);if(null==e)continue;if(l=h=e,c.startSide!=c.endSide&&(h=t.mapPos(u,c.endSide),h<l))continue}else if(l=t.mapPos(u,c.startSide),h=t.mapPos(d,c.endSide),l>h||l==h&&c.startSide>0&&c.endSide<=0)continue;(h-l||c.endSide-c.startSide)<0||(s<0&&(s=l),c.point&&(o=Math.max(o,h-l)),n.push(c),i.push(l-s),r.push(h-s))}return{mapped:n.length?new QO(i,r,n,o):null,pos:s}}}class AO{constructor(e,t,n,i){this.chunkPos=e,this.chunk=t,this.nextLayer=n,this.maxPoint=i}static create(e,t,n,i){return new AO(e,t,n,i)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let t of this.chunk)e+=t.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:t=[],sort:n=!1,filterFrom:i=0,filterTo:r=this.length}=e,s=e.filter;if(0==t.length&&!s)return this;if(n&&(t=t.slice().sort(EO)),this.isEmpty)return t.length?AO.of(t):this;let o=new IO(this,null,-1).goto(0),a=0,l=[],h=new RO;for(;o.value||a<t.length;)if(a<t.length&&(o.from-t[a].from||o.startSide-t[a].value.startSide)>=0){let e=t[a++];h.addInner(e.from,e.to,e.value)||l.push(e)}else 1==o.rangeIndex&&o.chunkIndex<this.chunk.length&&(a==t.length||this.chunkEnd(o.chunkIndex)<t[a].from)&&(!s||i>this.chunkEnd(o.chunkIndex)||r<this.chunkPos[o.chunkIndex])&&h.addChunk(this.chunkPos[o.chunkIndex],this.chunk[o.chunkIndex])?o.nextChunk():((!s||i>o.to||r<o.from||s(o.from,o.to,o.value))&&(h.addInner(o.from,o.to,o.value)||l.push(CO.create(o.from,o.to,o.value))),o.next());return h.finishInner(this.nextLayer.isEmpty&&!l.length?AO.empty:this.nextLayer.update({add:l,filter:s,filterFrom:i,filterTo:r}))}map(e){if(e.empty||this.isEmpty)return this;let t=[],n=[],i=-1;for(let s=0;s<this.chunk.length;s++){let r=this.chunkPos[s],o=this.chunk[s],a=e.touchesRange(r,r+o.length);if(!1===a)i=Math.max(i,o.maxPoint),t.push(o),n.push(e.mapPos(r));else if(!0===a){let{mapped:s,pos:a}=o.map(r,e);s&&(i=Math.max(i,s.maxPoint),t.push(s),n.push(a))}}let r=this.nextLayer.map(e);return 0==t.length?r:new AO(n,t,r||AO.empty,i)}between(e,t,n){if(!this.isEmpty){for(let i=0;i<this.chunk.length;i++){let r=this.chunkPos[i],s=this.chunk[i];if(t>=r&&e<=r+s.length&&!1===s.between(r,e-r,t-r,n))return}this.nextLayer.between(e,t,n)}}iter(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return DO.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return DO.from(e).goto(t)}static compare(e,t,n,i){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:-1,s=e.filter((e=>e.maxPoint>0||!e.isEmpty&&e.maxPoint>=r)),o=t.filter((e=>e.maxPoint>0||!e.isEmpty&&e.maxPoint>=r)),a=NO(s,o,n),l=new LO(s,a,r),h=new LO(o,a,r);n.iterGaps(((e,t,n)=>$O(l,e,h,t,n,i))),n.empty&&0==n.length&&$O(l,0,h,0,0,i)}static eq(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3?arguments[3]:void 0;null==i&&(i=999999999);let r=e.filter((e=>!e.isEmpty&&t.indexOf(e)<0)),s=t.filter((t=>!t.isEmpty&&e.indexOf(t)<0));if(r.length!=s.length)return!1;if(!r.length)return!0;let o=NO(r,s),a=new LO(r,o,0).goto(n),l=new LO(s,o,0).goto(n);for(;;){if(a.to!=l.to||!UO(a.active,l.active)||a.point&&(!l.point||!a.point.eq(l.point)))return!1;if(a.to>i)return!0;a.next(),l.next()}}static spans(e,t,n,i){let r=new LO(e,null,arguments.length>4&&void 0!==arguments[4]?arguments[4]:-1).goto(t),s=t,o=r.openStart;for(;;){let e=Math.min(r.to,n);if(r.point){let n=r.activeForPoint(r.to),a=r.pointFrom<t?n.length+1:r.point.startSide<0?n.length:Math.min(n.length,o);i.point(s,e,r.point,n,a,r.pointRank),o=Math.min(r.openEnd(e),n.length)}else e>s&&(i.span(s,e,r.active,o),o=r.openEnd(e));if(r.to>n)return o+(r.point&&r.to>n?1:0);s=r.to,r.next()}}static of(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=new RO;for(let i of e instanceof CO?[e]:t?function(e){if(e.length>1)for(let t=e[0],n=1;n<e.length;n++){let i=e[n];if(EO(t,i)>0)return e.slice().sort(EO);t=i}return e}(e):e)n.add(i.from,i.to,i.value);return n.finish()}static join(e){if(!e.length)return AO.empty;let t=e[e.length-1];for(let n=e.length-2;n>=0;n--)for(let i=e[n];i!=AO.empty;i=i.nextLayer)t=new AO(i.chunkPos,i.chunk,t,Math.max(i.maxPoint,t.maxPoint));return t}}AO.empty=new AO([],[],null,-1),AO.empty.nextLayer=AO.empty;class RO{finishChunk(e){this.chunks.push(new QO(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(e,t,n){this.addInner(e,t,n)||(this.nextLayer||(this.nextLayer=new RO)).add(e,t,n)}addInner(e,t,n){let i=e-this.lastTo||n.startSide-this.last.endSide;if(i<=0&&(e-this.lastFrom||n.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return!(i<0)&&(250==this.from.length&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(t-this.chunkStart),this.last=n,this.lastFrom=e,this.lastTo=t,this.value.push(n),n.point&&(this.maxPoint=Math.max(this.maxPoint,t-e)),!0)}addChunk(e,t){if((e-this.lastTo||t.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,t.maxPoint),this.chunks.push(t),this.chunkPos.push(e);let n=t.value.length-1;return this.last=t.value[n],this.lastFrom=t.from[n]+e,this.lastTo=t.to[n]+e,!0}finish(){return this.finishInner(AO.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),0==this.chunks.length)return e;let t=AO.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,t}}function NO(e,t,n){let i=new Map;for(let s of e)for(let e=0;e<s.chunk.length;e++)s.chunk[e].maxPoint<=0&&i.set(s.chunk[e],s.chunkPos[e]);let r=new Set;for(let s of t)for(let e=0;e<s.chunk.length;e++){let t=i.get(s.chunk[e]);null==t||(n?n.mapPos(t):t)!=s.chunkPos[e]||(null===n||void 0===n?void 0:n.touchesRange(t,t+s.chunk[e].length))||r.add(s.chunk[e])}return r}class IO{constructor(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;this.layer=e,this.skip=t,this.minPoint=n,this.rank=i}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1e9;return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,t,!1),this}gotoInner(e,t,n){for(;this.chunkIndex<this.layer.chunk.length;){let t=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(t)||this.layer.chunkEnd(this.chunkIndex)<e||t.maxPoint<this.minPoint))break;this.chunkIndex++,n=!1}if(this.chunkIndex<this.layer.chunk.length){let i=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],t,!0);(!n||this.rangeIndex<i)&&this.setRangeIndex(i)}this.next()}forward(e,t){(this.to-e||this.endSide-t)<0&&this.gotoInner(e,t,!0)}next(){for(;;){if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}{let e=this.layer.chunkPos[this.chunkIndex],t=this.layer.chunk[this.chunkIndex],n=e+t.from[this.rangeIndex];if(this.from=n,this.to=e+t.to[this.rangeIndex],this.value=t.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}}class DO{constructor(e){this.heap=e}static from(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1,i=[];for(let r=0;r<e.length;r++)for(let s=e[r];!s.isEmpty;s=s.nextLayer)s.maxPoint>=n&&i.push(new IO(s,t,n,r));return 1==i.length?i[0]:new DO(i)}get startSide(){return this.value?this.value.startSide:0}goto(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1e9;for(let n of this.heap)n.goto(e,t);for(let n=this.heap.length>>1;n>=0;n--)MO(this.heap,n);return this.next(),this}forward(e,t){for(let n of this.heap)n.forward(e,t);for(let n=this.heap.length>>1;n>=0;n--)MO(this.heap,n);(this.to-e||this.value.endSide-t)<0&&this.next()}next(){if(0==this.heap.length)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),MO(this.heap,0)}}}function MO(e,t){for(let n=e[t];;){let i=1+(t<<1);if(i>=e.length)break;let r=e[i];if(i+1<e.length&&r.compare(e[i+1])>=0&&(r=e[i+1],i++),n.compare(r)<0)break;e[i]=n,e[t]=r,t=i}}class LO{constructor(e,t,n){this.minPoint=n,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=DO.from(e,t,n)}goto(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1e9;return this.cursor.goto(e,t),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=t,this.openStart=-1,this.next(),this}forward(e,t){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-t)<0;)this.removeActive(this.minActive);this.cursor.forward(e,t)}removeActive(e){qO(this.active,e),qO(this.activeTo,e),qO(this.activeRank,e),this.minActive=zO(this.active,this.activeTo)}addActive(e){let t=0,{value:n,to:i,rank:r}=this.cursor;for(;t<this.activeRank.length&&(r-this.activeRank[t]||i-this.activeTo[t])>0;)t++;VO(this.active,t,n),VO(this.activeTo,t,i),VO(this.activeRank,t,r),e&&VO(e,t,this.cursor.from),this.minActive=zO(this.active,this.activeTo)}next(){let e=this.to,t=this.point;this.point=null;let n=this.openStart<0?[]:null;for(;;){let i=this.minActive;if(i>-1&&(this.activeTo[i]-this.cursor.from||this.active[i].endSide-this.cursor.startSide)<0){if(this.activeTo[i]>e){this.to=this.activeTo[i],this.endSide=this.active[i].endSide;break}this.removeActive(i),n&&qO(n,i)}else{if(!this.cursor.value){this.to=this.endSide=1e9;break}if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}{let e=this.cursor.value;if(e.point){if(!(t&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)){this.point=e,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=e.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}this.cursor.next()}else this.addActive(n),this.cursor.next()}}}if(n){this.openStart=0;for(let t=n.length-1;t>=0&&n[t]<e;t--)this.openStart++}}activeForPoint(e){if(!this.active.length)return this.active;let t=[];for(let n=this.active.length-1;n>=0&&!(this.activeRank[n]<this.pointRank);n--)(this.activeTo[n]>e||this.activeTo[n]==e&&this.active[n].endSide>=this.point.endSide)&&t.push(this.active[n]);return t.reverse()}openEnd(e){let t=0;for(let n=this.activeTo.length-1;n>=0&&this.activeTo[n]>e;n--)t++;return t}}function $O(e,t,n,i,r,s){e.goto(t),n.goto(i);let o=i+r,a=i,l=i-t;for(;;){let t=e.to+l-n.to||e.endSide-n.endSide,i=t<0?e.to+l:n.to,r=Math.min(i,o);if(e.point||n.point?e.point&&n.point&&(e.point==n.point||e.point.eq(n.point))&&UO(e.activeForPoint(e.to),n.activeForPoint(n.to))||s.comparePoint(a,r,e.point,n.point):r>a&&!UO(e.active,n.active)&&s.compareRange(a,r,e.active,n.active),i>o)break;a=i,t<=0&&e.next(),t>=0&&n.next()}}function UO(e,t){if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!=t[n]&&!e[n].eq(t[n]))return!1;return!0}function qO(e,t){for(let n=t,i=e.length-1;n<i;n++)e[n]=e[n+1];e.pop()}function VO(e,t,n){for(let i=e.length-1;i>=t;i--)e[i+1]=e[i];e[t]=n}function zO(e,t){let n=-1,i=1e9;for(let r=0;r<t.length;r++)(t[r]-i||e[r].endSide-e[n].endSide)<0&&(n=r,i=t[r]);return n}function jO(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.length,i=0;for(let r=0;r<n;)9==e.charCodeAt(r)?(i+=t-i%t,r++):(i++,r=gm(e,r));return i}function BO(e,t,n,i){for(let r=0,s=0;;){if(s>=t)return r;if(r==e.length)break;s+=9==e.charCodeAt(r)?n-s%n:1,r=gm(e,r)}return!0===i?-1:e.length}const FO="undefined"==typeof Symbol?"__\u037c":Symbol.for("\u037c"),WO="undefined"==typeof Symbol?"__styleSet"+Math.floor(1e8*Math.random()):Symbol("styleSet"),XO="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:{};class YO{constructor(e,t){this.rules=[];let{finish:n}=t||{};function i(e){return/^@/.test(e)?[e]:e.split(/,\s*/)}function r(e,t,s,o){let a=[],l=/^@(\w+)\b/.exec(e[0]),h=l&&"keyframes"==l[1];if(l&&null==t)return s.push(e[0]+";");for(let n in t){let o=t[n];if(/&/.test(n))r(n.split(/,\s*/).map((t=>e.map((e=>t.replace(/&/,e))))).reduce(((e,t)=>e.concat(t))),o,s);else if(o&&"object"==typeof o){if(!l)throw new RangeError("The value of a property ("+n+") should be a primitive value.");r(i(n),o,a,h)}else null!=o&&a.push(n.replace(/_.*/,"").replace(/[A-Z]/g,(e=>"-"+e.toLowerCase()))+": "+o+";")}(a.length||h)&&s.push((!n||l||o?e:e.map(n)).join(", ")+" {"+a.join(" ")+"}")}for(let s in e)r(i(s),e[s],this.rules)}getRules(){return this.rules.join("\n")}static newName(){let e=XO[FO]||1;return XO[FO]=e+1,"\u037c"+e.toString(36)}static mount(e,t,n){let i=e[WO],r=n&&n.nonce;i?r&&i.setNonce(r):i=new ZO(e,r),i.mount(Array.isArray(t)?t:[t],e)}}let GO=new Map;class ZO{constructor(e,t){let n=e.ownerDocument||e,i=n.defaultView;if(!e.head&&e.adoptedStyleSheets&&i.CSSStyleSheet){let t=GO.get(n);if(t)return e[WO]=t;this.sheet=new i.CSSStyleSheet,GO.set(n,this)}else this.styleTag=n.createElement("style"),t&&this.styleTag.setAttribute("nonce",t);this.modules=[],e[WO]=this}mount(e,t){let n=this.sheet,i=0,r=0;for(let s=0;s<e.length;s++){let t=e[s],o=this.modules.indexOf(t);if(o<r&&o>-1&&(this.modules.splice(o,1),r--,o=-1),-1==o){if(this.modules.splice(r++,0,t),n)for(let e=0;e<t.rules.length;e++)n.insertRule(t.rules[e],i++)}else{for(;r<o;)i+=this.modules[r++].rules.length;i+=t.rules.length,r++}}if(n)t.adoptedStyleSheets.indexOf(this.sheet)<0&&(t.adoptedStyleSheets=[this.sheet,...t.adoptedStyleSheets]);else{let e="";for(let t=0;t<this.modules.length;t++)e+=this.modules[t].getRules()+"\n";this.styleTag.textContent=e;let n=t.head||t;this.styleTag.parentNode!=n&&n.insertBefore(this.styleTag,n.firstChild)}}setNonce(e){this.styleTag&&this.styleTag.getAttribute("nonce")!=e&&this.styleTag.setAttribute("nonce",e)}}for(var HO={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},KO={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},JO="undefined"!=typeof navigator&&/Mac/.test(navigator.platform),ev="undefined"!=typeof navigator&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),tv=0;tv<10;tv++)HO[48+tv]=HO[96+tv]=String(tv);for(tv=1;tv<=24;tv++)HO[tv+111]="F"+tv;for(tv=65;tv<=90;tv++)HO[tv]=String.fromCharCode(tv+32),KO[tv]=String.fromCharCode(tv);for(var nv in HO)KO.hasOwnProperty(nv)||(KO[nv]=HO[nv]);function iv(e){let t;return t=11==e.nodeType?e.getSelection?e:e.ownerDocument:e,t.getSelection()}function rv(e,t){return!!t&&(e==t||e.contains(1!=t.nodeType?t.parentNode:t))}function sv(e,t){if(!t.anchorNode)return!1;try{return rv(e,t.anchorNode)}catch(PF){return!1}}function ov(e){return 3==e.nodeType?yv(e,0,e.nodeValue.length).getClientRects():1==e.nodeType?e.getClientRects():[]}function av(e,t,n,i){return!!n&&(cv(e,t,n,i,-1)||cv(e,t,n,i,1))}function lv(e){for(var t=0;;t++)if(!(e=e.previousSibling))return t}function hv(e){return 1==e.nodeType&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(e.nodeName)}function cv(e,t,n,i,r){for(;;){if(e==n&&t==i)return!0;if(t==(r<0?0:uv(e))){if("DIV"==e.nodeName)return!1;let n=e.parentNode;if(!n||1!=n.nodeType)return!1;t=lv(e)+(r<0?0:1),e=n}else{if(1!=e.nodeType)return!1;if(1==(e=e.childNodes[t+(r<0?-1:0)]).nodeType&&"false"==e.contentEditable)return!1;t=r<0?uv(e):0}}}function uv(e){return 3==e.nodeType?e.nodeValue.length:e.childNodes.length}function dv(e,t){let n=t?e.left:e.right;return{left:n,right:n,top:e.top,bottom:e.bottom}}function fv(e){let t=e.visualViewport;return t?{left:0,right:t.width,top:0,bottom:t.height}:{left:0,right:e.innerWidth,top:0,bottom:e.innerHeight}}function pv(e,t){let n=t.width/e.offsetWidth,i=t.height/e.offsetHeight;return(n>.995&&n<1.005||!isFinite(n)||Math.abs(t.width-e.offsetWidth)<1)&&(n=1),(i>.995&&i<1.005||!isFinite(i)||Math.abs(t.height-e.offsetHeight)<1)&&(i=1),{scaleX:n,scaleY:i}}class gv{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){let{anchorNode:t,focusNode:n}=e;this.set(t,Math.min(e.anchorOffset,t?uv(t):0),n,Math.min(e.focusOffset,n?uv(n):0))}set(e,t,n,i){this.anchorNode=e,this.anchorOffset=t,this.focusNode=n,this.focusOffset=i}}let mv,Ov=null;function vv(e){if(e.setActive)return e.setActive();if(Ov)return e.focus(Ov);let t=[];for(let n=e;n&&(t.push(n,n.scrollTop,n.scrollLeft),n!=n.ownerDocument);n=n.parentNode);if(e.focus(null==Ov?{get preventScroll(){return Ov={preventScroll:!0},!0}}:void 0),!Ov){Ov=!1;for(let e=0;e<t.length;){let n=t[e++],i=t[e++],r=t[e++];n.scrollTop!=i&&(n.scrollTop=i),n.scrollLeft!=r&&(n.scrollLeft=r)}}}function yv(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t,i=mv||(mv=document.createRange());return i.setEnd(e,n),i.setStart(e,t),i}function bv(e,t,n,i){let r={key:t,code:t,keyCode:n,which:n,cancelable:!0};i&&({altKey:r.altKey,ctrlKey:r.ctrlKey,shiftKey:r.shiftKey,metaKey:r.metaKey}=i);let s=new KeyboardEvent("keydown",r);s.synthetic=!0,e.dispatchEvent(s);let o=new KeyboardEvent("keyup",r);return o.synthetic=!0,e.dispatchEvent(o),s.defaultPrevented||o.defaultPrevented}function wv(e){for(;e.attributes.length;)e.removeAttributeNode(e.attributes[0])}function kv(e){return e.scrollTop>Math.max(1,e.scrollHeight-e.clientHeight-4)}function Sv(e,t){for(let n=e,i=t;;){if(3==n.nodeType&&i>0)return{node:n,offset:i};if(1==n.nodeType&&i>0){if("false"==n.contentEditable)return null;n=n.childNodes[i-1],i=uv(n)}else{if(!n.parentNode||hv(n))return null;i=lv(n),n=n.parentNode}}}function xv(e,t){for(let n=e,i=t;;){if(3==n.nodeType&&i<n.nodeValue.length)return{node:n,offset:i};if(1==n.nodeType&&i<n.childNodes.length){if("false"==n.contentEditable)return null;n=n.childNodes[i],i=0}else{if(!n.parentNode||hv(n))return null;i=lv(n)+1,n=n.parentNode}}}class Tv{constructor(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];this.node=e,this.offset=t,this.precise=n}static before(e,t){return new Tv(e.parentNode,lv(e),t)}static after(e,t){return new Tv(e.parentNode,lv(e)+1,t)}}const _v=[];class Pv{constructor(){this.parent=null,this.dom=null,this.flags=2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e){let t=this.posAtStart;for(let n of this.children){if(n==e)return t;t+=n.length+n.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}sync(e,t){if(2&this.flags){let n,i=this.dom,r=null;for(let s of this.children){if(7&s.flags){if(!s.dom&&(n=r?r.nextSibling:i.firstChild)){let e=Pv.get(n);(!e||!e.parent&&e.canReuseDOM(s))&&s.reuseDOM(n)}s.sync(e,t),s.flags&=-8}if(n=r?r.nextSibling:i.firstChild,t&&!t.written&&t.node==i&&n!=s.dom&&(t.written=!0),s.dom.parentNode==i)for(;n&&n!=s.dom;)n=Cv(n);else i.insertBefore(s.dom,n);r=s.dom}for(n=r?r.nextSibling:i.firstChild,n&&t&&t.node==i&&(t.written=!0);n;)n=Cv(n)}else if(1&this.flags)for(let n of this.children)7&n.flags&&(n.sync(e,t),n.flags&=-8)}reuseDOM(e){}localPosFromDOM(e,t){let n;if(e==this.dom)n=this.dom.childNodes[t];else{let i=0==uv(e)?0:0==t?-1:1;for(;;){let t=e.parentNode;if(t==this.dom)break;0==i&&t.firstChild!=t.lastChild&&(i=e==t.firstChild?-1:1),e=t}n=i<0?e:e.nextSibling}if(n==this.dom.firstChild)return 0;for(;n&&!Pv.get(n);)n=n.nextSibling;if(!n)return this.length;for(let i=0,r=0;;i++){let e=this.children[i];if(e.dom==n)return r;r+=e.length+e.breakAfter}}domBoundsAround(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=-1,r=-1,s=-1,o=-1;for(let a=0,l=n,h=n;a<this.children.length;a++){let n=this.children[a],c=l+n.length;if(l<e&&c>t)return n.domBoundsAround(e,t,l);if(c>=e&&-1==i&&(i=a,r=l),l>t&&n.dom.parentNode==this.dom){s=a,o=h;break}h=c,l=c+n.breakAfter}return{from:r,to:o<0?n+this.length:o,startDOM:(i?this.children[i-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:s<this.children.length&&s>=0?this.children[s].dom:null}}markDirty(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.flags|=2,this.markParentsDirty(e)}markParentsDirty(e){for(let t=this.parent;t;t=t.parent){if(e&&(t.flags|=2),1&t.flags)return;t.flags|=1,e=!1}}setParent(e){this.parent!=e&&(this.parent=e,7&this.flags&&this.markParentsDirty(!0))}setDOM(e){this.dom!=e&&(this.dom&&(this.dom.cmView=null),this.dom=e,e.cmView=this)}get rootView(){for(let e=this;;){let t=e.parent;if(!t)return e;e=t}}replaceChildren(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:_v;this.markDirty();for(let i=e;i<t;i++){let e=this.children[i];e.parent==this&&n.indexOf(e)<0&&e.destroy()}this.children.splice(e,t-e,...n);for(let i=0;i<n.length;i++)n[i].setParent(this)}ignoreMutation(e){return!1}ignoreEvent(e){return!1}childCursor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.length;return new Ev(this.children,e,this.children.length)}childPos(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return this.childCursor().findPos(e,t)}toString(){let e=this.constructor.name.replace("View","");return e+(this.children.length?"("+this.children.join()+")":this.length?"["+("Text"==e?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(e){return e.cmView}get isEditable(){return!0}get isWidget(){return!1}get isHidden(){return!1}merge(e,t,n,i,r,s){return!1}become(e){return!1}canReuseDOM(e){return e.constructor==this.constructor&&!(8&(this.flags|e.flags))}getSide(){return 0}destroy(){for(let e of this.children)e.parent==this&&e.destroy();this.parent=null}}function Cv(e){let t=e.nextSibling;return e.parentNode.removeChild(e),t}Pv.prototype.breakAfter=0;class Ev{constructor(e,t,n){this.children=e,this.pos=t,this.i=n,this.off=0}findPos(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;for(;;){if(e>this.pos||e==this.pos&&(t>0||0==this.i||this.children[this.i-1].breakAfter))return this.off=e-this.pos,this;let n=this.children[--this.i];this.pos-=n.length+n.breakAfter}}}function Qv(e,t,n,i,r,s,o,a,l){let{children:h}=e,c=h.length?h[t]:null,u=s.length?s[s.length-1]:null,d=u?u.breakAfter:o;if(!(t==i&&c&&!o&&!d&&s.length<2&&c.merge(n,r,s.length?u:null,0==n,a,l))){if(i<h.length){let e=h[i];e&&(r<e.length||e.breakAfter&&(null===u||void 0===u?void 0:u.breakAfter))?(t==i&&(e=e.split(r),r=0),!d&&u&&e.merge(0,r,u,!0,0,l)?s[s.length-1]=e:((r||e.children.length&&!e.children[0].length)&&e.merge(0,r,null,!1,0,l),s.push(e))):(null===e||void 0===e?void 0:e.breakAfter)&&(u?u.breakAfter=1:o=1),i++}for(c&&(c.breakAfter=o,n>0&&(!o&&s.length&&c.merge(n,c.length,s[0],!1,a,0)?c.breakAfter=s.shift().breakAfter:(n<c.length||c.children.length&&0==c.children[c.children.length-1].length)&&c.merge(n,c.length,null,!1,a,0),t++));t<i&&s.length;)if(h[i-1].become(s[s.length-1]))i--,s.pop(),l=s.length?0:a;else{if(!h[t].become(s[0]))break;t++,s.shift(),a=s.length?0:l}!s.length&&t&&i<h.length&&!h[t-1].breakAfter&&h[i].merge(0,0,h[t-1],!1,a,l)&&t--,(t<i||s.length)&&e.replaceChildren(t,i,s)}}function Av(e,t,n,i,r,s){let o=e.childCursor(),{i:a,off:l}=o.findPos(n,1),{i:h,off:c}=o.findPos(t,-1),u=t-n;for(let d of i)u+=d.length;e.length+=u,Qv(e,h,c,a,l,i,0,r,s)}let Rv="undefined"!=typeof navigator?navigator:{userAgent:"",vendor:"",platform:""},Nv="undefined"!=typeof document?document:{documentElement:{style:{}}};const Iv=/Edge\/(\d+)/.exec(Rv.userAgent),Dv=/MSIE \d/.test(Rv.userAgent),Mv=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Rv.userAgent),Lv=!!(Dv||Mv||Iv),$v=!Lv&&/gecko\/(\d+)/i.test(Rv.userAgent),Uv=!Lv&&/Chrome\/(\d+)/.exec(Rv.userAgent),qv="webkitFontSmoothing"in Nv.documentElement.style,Vv=!Lv&&/Apple Computer/.test(Rv.vendor),zv=Vv&&(/Mobile\/\w+/.test(Rv.userAgent)||Rv.maxTouchPoints>2);var jv={mac:zv||/Mac/.test(Rv.platform),windows:/Win/.test(Rv.platform),linux:/Linux|X11/.test(Rv.platform),ie:Lv,ie_version:Dv?Nv.documentMode||6:Mv?+Mv[1]:Iv?+Iv[1]:0,gecko:$v,gecko_version:$v?+(/Firefox\/(\d+)/.exec(Rv.userAgent)||[0,0])[1]:0,chrome:!!Uv,chrome_version:Uv?+Uv[1]:0,ios:zv,android:/Android\b/.test(Rv.userAgent),webkit:qv,safari:Vv,webkit_version:qv?+(/\bAppleWebKit\/(\d+)/.exec(Rv.userAgent)||[0,0])[1]:0,tabSize:null!=Nv.documentElement.style.tabSize?"tab-size":"-moz-tab-size"};class Bv extends Pv{constructor(e){super(),this.text=e}get length(){return this.text.length}createDOM(e){this.setDOM(e||document.createTextNode(this.text))}sync(e,t){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(t&&t.node==this.dom&&(t.written=!0),this.dom.nodeValue=this.text)}reuseDOM(e){3==e.nodeType&&this.createDOM(e)}merge(e,t,n){return!(8&this.flags||n&&(!(n instanceof Bv)||this.length-(t-e)+n.length>256||8&n.flags))&&(this.text=this.text.slice(0,e)+(n?n.text:"")+this.text.slice(t),this.markDirty(),!0)}split(e){let t=new Bv(this.text.slice(e));return this.text=this.text.slice(0,e),this.markDirty(),t.flags|=8&this.flags,t}localPosFromDOM(e,t){return e==this.dom?t:t?this.text.length:0}domAtPos(e){return new Tv(this.dom,e)}domBoundsAround(e,t,n){return{from:n,to:n+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(e,t){return function(e,t,n){let i=e.nodeValue.length;t>i&&(t=i);let r=t,s=t,o=0;0==t&&n<0||t==i&&n>=0?jv.chrome||jv.gecko||(t?(r--,o=1):s<i&&(s++,o=-1)):n<0?r--:s<i&&s++;let a=yv(e,r,s).getClientRects();if(!a.length)return null;let l=a[(o?o<0:n>=0)?0:a.length-1];jv.safari&&!o&&0==l.width&&(l=Array.prototype.find.call(a,(e=>e.width))||l);return o?dv(l,o<0):l||null}(this.dom,e,t)}}class Fv extends Pv{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;super(),this.mark=e,this.children=t,this.length=n;for(let i of t)i.setParent(this)}setAttrs(e){if(wv(e),this.mark.class&&(e.className=this.mark.class),this.mark.attrs)for(let t in this.mark.attrs)e.setAttribute(t,this.mark.attrs[t]);return e}canReuseDOM(e){return super.canReuseDOM(e)&&!(8&(this.flags|e.flags))}reuseDOM(e){e.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(e),this.flags|=6)}sync(e,t){this.dom?4&this.flags&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(e,t)}merge(e,t,n,i,r,s){return(!n||!(!(n instanceof Fv&&n.mark.eq(this.mark))||e&&r<=0||t<this.length&&s<=0))&&(Av(this,e,t,n?n.children.slice():[],r-1,s-1),this.markDirty(),!0)}split(e){let t=[],n=0,i=-1,r=0;for(let o of this.children){let s=n+o.length;s>e&&t.push(n<e?o.split(e-n):o),i<0&&n>=e&&(i=r),n=s,r++}let s=this.length-e;return this.length=e,i>-1&&(this.children.length=i,this.markDirty()),new Fv(this.mark,t,s)}domAtPos(e){return Yv(this,e)}coordsAt(e,t){return Zv(this,e,t)}}class Wv extends Pv{static create(e,t,n){return new Wv(e,t,n)}constructor(e,t,n){super(),this.widget=e,this.length=t,this.side=n,this.prevWidget=null}split(e){let t=Wv.create(this.widget,this.length-e,this.side);return this.length-=e,t}sync(e){this.dom&&this.widget.updateDOM(this.dom,e)||(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}getSide(){return this.side}merge(e,t,n,i,r,s){return!(n&&(!(n instanceof Wv&&this.widget.compare(n.widget))||e>0&&r<=0||t<this.length&&s<=0))&&(this.length=e+(n?n.length:0)+(this.length-t),!0)}become(e){return e instanceof Wv&&e.side==this.side&&this.widget.constructor==e.widget.constructor&&(this.widget.compare(e.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,!0)}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get overrideDOMText(){if(0==this.length)return tm.empty;let e=this;for(;e.parent;)e=e.parent;let{view:t}=e,n=t&&t.state.doc,i=this.posAtStart;return n?n.slice(i,i+this.length):tm.empty}domAtPos(e){return(this.length?0==e:this.side>0)?Tv.before(this.dom):Tv.after(this.dom,e==this.length)}domBoundsAround(){return null}coordsAt(e,t){let n=this.widget.coordsAt(this.dom,e,t);if(n)return n;let i=this.dom.getClientRects(),r=null;if(!i.length)return null;let s=this.side?this.side<0:e>0;for(let o=s?i.length-1:0;r=i[o],!(e>0?0==o:o==i.length-1||r.top<r.bottom);o+=s?-1:1);return dv(r,!s)}get isEditable(){return!1}get isWidget(){return!0}get isHidden(){return this.widget.isHidden}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class Xv extends Pv{constructor(e){super(),this.side=e}get length(){return 0}merge(){return!1}become(e){return e instanceof Xv&&e.side==this.side}split(){return new Xv(this.side)}sync(){if(!this.dom){let e=document.createElement("img");e.className="cm-widgetBuffer",e.setAttribute("aria-hidden","true"),this.setDOM(e)}}getSide(){return this.side}domAtPos(e){return this.side>0?Tv.before(this.dom):Tv.after(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(e){return this.dom.getBoundingClientRect()}get overrideDOMText(){return tm.empty}get isHidden(){return!0}}function Yv(e,t){let n=e.dom,{children:i}=e,r=0;for(let s=0;r<i.length;r++){let e=i[r],o=s+e.length;if(!(o==s&&e.getSide()<=0)){if(t>s&&t<o&&e.dom.parentNode==n)return e.domAtPos(t-s);if(t<=s)break;s=o}}for(let s=r;s>0;s--){let e=i[s-1];if(e.dom.parentNode==n)return e.domAtPos(e.length)}for(let s=r;s<i.length;s++){let e=i[s];if(e.dom.parentNode==n)return e.domAtPos(0)}return new Tv(n,0)}function Gv(e,t,n){let i,{children:r}=e;n>0&&t instanceof Fv&&r.length&&(i=r[r.length-1])instanceof Fv&&i.mark.eq(t.mark)?Gv(i,t.children[0],n-1):(r.push(t),t.setParent(e)),e.length+=t.length}function Zv(e,t,n){let i=null,r=-1,s=null,o=-1;!function e(t,a){for(let l=0,h=0;l<t.children.length&&h<=a;l++){let c=t.children[l],u=h+c.length;u>=a&&(c.children.length?e(c,a-h):(!s||s.isHidden&&n>0)&&(u>a||h==u&&c.getSide()>0)?(s=c,o=a-h):(h<a||h==u&&c.getSide()<0&&!c.isHidden)&&(i=c,r=a-h)),h=u}}(e,t);let a=(n<0?i:s)||i||s;return a?a.coordsAt(Math.max(0,a==i?r:o),n):function(e){let t=e.dom.lastChild;if(!t)return e.dom.getBoundingClientRect();let n=ov(t);return n[n.length-1]||null}(e)}function Hv(e,t){for(let n in e)"class"==n&&t.class?t.class+=" "+e.class:"style"==n&&t.style?t.style+=";"+e.style:t[n]=e[n];return t}Bv.prototype.children=Wv.prototype.children=Xv.prototype.children=_v;const Kv=Object.create(null);function Jv(e,t,n){if(e==t)return!0;e||(e=Kv),t||(t=Kv);let i=Object.keys(e),r=Object.keys(t);if(i.length-(n&&i.indexOf(n)>-1?1:0)!=r.length-(n&&r.indexOf(n)>-1?1:0))return!1;for(let s of i)if(s!=n&&(-1==r.indexOf(s)||e[s]!==t[s]))return!1;return!0}function ey(e,t,n){let i=!1;if(t)for(let r in t)n&&r in n||(i=!0,"style"==r?e.style.cssText="":e.removeAttribute(r));if(n)for(let r in n)t&&t[r]==n[r]||(i=!0,"style"==r?e.style.cssText=n[r]:e.setAttribute(r,n[r]));return i}function ty(e){let t=Object.create(null);for(let n=0;n<e.attributes.length;n++){let i=e.attributes[n];t[i.name]=i.value}return t}class ny extends Pv{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(e,t,n,i,r,s){if(n){if(!(n instanceof ny))return!1;this.dom||n.transferDOM(this)}return i&&this.setDeco(n?n.attrs:null),Av(this,e,t,n?n.children.slice():[],r,s),!0}split(e){let t=new ny;if(t.breakAfter=this.breakAfter,0==this.length)return t;let{i:n,off:i}=this.childPos(e);i&&(t.append(this.children[n].split(i),0),this.children[n].merge(i,this.children[n].length,null,!1,0,0),n++);for(let r=n;r<this.children.length;r++)t.append(this.children[r],0);for(;n>0&&0==this.children[n-1].length;)this.children[--n].destroy();return this.children.length=n,this.markDirty(),this.length=e,t}transferDOM(e){this.dom&&(this.markDirty(),e.setDOM(this.dom),e.prevAttrs=void 0===this.prevAttrs?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(e){Jv(this.attrs,e)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=e)}append(e,t){Gv(this,e,t)}addLineDeco(e){let t=e.spec.attributes,n=e.spec.class;t&&(this.attrs=Hv(t,this.attrs||{})),n&&(this.attrs=Hv({class:n},this.attrs||{}))}domAtPos(e){return Yv(this,e)}reuseDOM(e){"DIV"==e.nodeName&&(this.setDOM(e),this.flags|=6)}sync(e,t){var n;this.dom?4&this.flags&&(wv(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),void 0!==this.prevAttrs&&(ey(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(e,t);let i=this.dom.lastChild;for(;i&&Pv.get(i)instanceof Fv;)i=i.lastChild;if(!i||!this.length||"BR"!=i.nodeName&&0==(null===(n=Pv.get(i))||void 0===n?void 0:n.isEditable)&&(!jv.ios||!this.children.some((e=>e instanceof Bv)))){let e=document.createElement("BR");e.cmIgnore=!0,this.dom.appendChild(e)}}measureTextSize(){if(0==this.children.length||this.length>20)return null;let e,t=0;for(let n of this.children){if(!(n instanceof Bv)||/[^ -~]/.test(n.text))return null;let i=ov(n.dom);if(1!=i.length)return null;t+=i[0].width,e=i[0].height}return t?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:t/this.length,textHeight:e}:null}coordsAt(e,t){let n=Zv(this,e,t);if(!this.children.length&&n&&this.parent){let{heightOracle:e}=this.parent.view.viewState,t=n.bottom-n.top;if(Math.abs(t-e.lineHeight)<2&&e.textHeight<t){let i=(t-e.textHeight)/2;return{top:n.top+i,bottom:n.bottom-i,left:n.left,right:n.left}}}return n}become(e){return e instanceof ny&&0==this.children.length&&0==e.children.length&&Jv(this.attrs,e.attrs)&&this.breakAfter==e.breakAfter}covers(){return!0}static find(e,t){for(let n=0,i=0;n<e.children.length;n++){let r=e.children[n],s=i+r.length;if(s>=t){if(r instanceof ny)return r;if(s>t)break}i=s+r.breakAfter}return null}}class iy extends Pv{constructor(e,t,n){super(),this.widget=e,this.length=t,this.deco=n,this.breakAfter=0,this.prevWidget=null}merge(e,t,n,i,r,s){return!(n&&(!(n instanceof iy&&this.widget.compare(n.widget))||e>0&&r<=0||t<this.length&&s<=0))&&(this.length=e+(n?n.length:0)+(this.length-t),!0)}domAtPos(e){return 0==e?Tv.before(this.dom):Tv.after(this.dom,e==this.length)}split(e){let t=this.length-e;this.length=e;let n=new iy(this.widget,t,this.deco);return n.breakAfter=this.breakAfter,n}get children(){return _v}sync(e){this.dom&&this.widget.updateDOM(this.dom,e)||(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):tm.empty}domBoundsAround(){return null}become(e){return e instanceof iy&&e.widget.constructor==this.widget.constructor&&(e.widget.compare(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,this.deco=e.deco,this.breakAfter=e.breakAfter,!0)}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get isEditable(){return!1}get isWidget(){return!0}coordsAt(e,t){return this.widget.coordsAt(this.dom,e,t)}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}covers(e){let{startSide:t,endSide:n}=this.deco;return t!=n&&(e<0?t<0:n>0)}}class ry{eq(e){return!1}updateDOM(e,t){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(e){return!0}coordsAt(e,t,n){return null}get isHidden(){return!1}get editable(){return!1}destroy(e){}}var sy=function(e){return e[e.Text=0]="Text",e[e.WidgetBefore=1]="WidgetBefore",e[e.WidgetAfter=2]="WidgetAfter",e[e.WidgetRange=3]="WidgetRange",e}(sy||(sy={}));class oy extends PO{constructor(e,t,n,i){super(),this.startSide=e,this.endSide=t,this.widget=n,this.spec=i}get heightRelevant(){return!1}static mark(e){return new ay(e)}static widget(e){let t=Math.max(-1e4,Math.min(1e4,e.side||0)),n=!!e.block;return t+=n&&!e.inlineOrder?t>0?3e8:-4e8:t>0?1e8:-1e8,new hy(e,t,t,n,e.widget||null,!1)}static replace(e){let t,n,i=!!e.block;if(e.isBlockGap)t=-5e8,n=4e8;else{let{start:r,end:s}=cy(e,i);t=(r?i?-3e8:-1:5e8)-1,n=1+(s?i?2e8:1:-6e8)}return new hy(e,t,n,i,e.widget||null,!0)}static line(e){return new ly(e)}static set(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return AO.of(e,t)}hasHeight(){return!!this.widget&&this.widget.estimatedHeight>-1}}oy.none=AO.empty;class ay extends oy{constructor(e){let{start:t,end:n}=cy(e);super(t?-1:5e8,n?1:-6e8,null,e),this.tagName=e.tagName||"span",this.class=e.class||"",this.attrs=e.attributes||null}eq(e){var t,n;return this==e||e instanceof ay&&this.tagName==e.tagName&&(this.class||(null===(t=this.attrs)||void 0===t?void 0:t.class))==(e.class||(null===(n=e.attrs)||void 0===n?void 0:n.class))&&Jv(this.attrs,e.attrs,"class")}range(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e;if(e>=t)throw new RangeError("Mark decorations may not be empty");return super.range(e,t)}}ay.prototype.point=!1;class ly extends oy{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof ly&&this.spec.class==e.spec.class&&Jv(this.spec.attributes,e.spec.attributes)}range(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e;if(t!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,t)}}ly.prototype.mapMode=xm.TrackBefore,ly.prototype.point=!0;class hy extends oy{constructor(e,t,n,i,r,s){super(t,n,r,e),this.block=i,this.isReplace=s,this.mapMode=i?t<=0?xm.TrackBefore:xm.TrackAfter:xm.TrackDel}get type(){return this.startSide!=this.endSide?sy.WidgetRange:this.startSide<=0?sy.WidgetBefore:sy.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(e){return e instanceof hy&&function(e,t){return e==t||!!(e&&t&&e.compare(t))}(this.widget,e.widget)&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide}range(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e;if(this.isReplace&&(e>t||e==t&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&t!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,t)}}function cy(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],{inclusiveStart:n,inclusiveEnd:i}=e;return null==n&&(n=e.inclusive),null==i&&(i=e.inclusive),{start:null!==n&&void 0!==n?n:t,end:null!==i&&void 0!==i?i:t}}function uy(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=n.length-1;r>=0&&n[r]+i>=e?n[r]=Math.max(n[r],t):n.push(e,t)}hy.prototype.point=!0;class dy{constructor(e,t,n,i){this.doc=e,this.pos=t,this.end=n,this.disallowBlockEffectsFor=i,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=e.iter(),this.skip=t}posCovered(){if(0==this.content.length)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let e=this.content[this.content.length-1];return!(e.breakAfter||e instanceof iy&&e.deco.endSide<0)}getLine(){return this.curLine||(this.content.push(this.curLine=new ny),this.atCursorPos=!0),this.curLine}flushBuffer(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.bufferMarks;this.pendingBuffer&&(this.curLine.append(fy(new Xv(-1),e),e.length),this.pendingBuffer=0)}addBlockWidget(e){this.flushBuffer(),this.curLine=null,this.content.push(e)}finish(e){this.pendingBuffer&&e<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,this.posCovered()||e&&this.content.length&&this.content[this.content.length-1]instanceof iy||this.getLine()}buildText(e,t,n){for(;e>0;){if(this.textOff==this.text.length){let{value:t,lineBreak:n,done:i}=this.cursor.next(this.skip);if(this.skip=0,i)throw new Error("Ran out of text content when drawing inline views");if(n){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,e--;continue}this.text=t,this.textOff=0}let i=Math.min(this.text.length-this.textOff,e,512);this.flushBuffer(t.slice(t.length-n)),this.getLine().append(fy(new Bv(this.text.slice(this.textOff,this.textOff+i)),t),n),this.atCursorPos=!0,this.textOff+=i,e-=i,n=0}}span(e,t,n,i){this.buildText(t-e,n,i),this.pos=t,this.openStart<0&&(this.openStart=i)}point(e,t,n,i,r,s){if(this.disallowBlockEffectsFor[s]&&n instanceof hy){if(n.block)throw new RangeError("Block decorations may not be specified via plugins");if(t>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let o=t-e;if(n instanceof hy)if(n.block)n.startSide>0&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new iy(n.widget||py.block,o,n));else{let s=Wv.create(n.widget||py.inline,o,o?0:n.startSide),a=this.atCursorPos&&!s.isEditable&&r<=i.length&&(e<t||n.startSide>0),l=!s.isEditable&&(e<t||r>i.length||n.startSide<=0),h=this.getLine();2!=this.pendingBuffer||a||s.isEditable||(this.pendingBuffer=0),this.flushBuffer(i),a&&(h.append(fy(new Xv(1),i),r),r=i.length+Math.max(0,r-i.length)),h.append(fy(s,i),r),this.atCursorPos=l,this.pendingBuffer=l?e<t||r>i.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=i.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(n);o&&(this.textOff+o<=this.text.length?this.textOff+=o:(this.skip+=o-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=t),this.openStart<0&&(this.openStart=r)}static build(e,t,n,i,r){let s=new dy(e,t,n,r);return s.openEnd=AO.spans(i,t,n,s),s.openStart<0&&(s.openStart=s.openEnd),s.finish(s.openEnd),s}}function fy(e,t){for(let n of t)e=new Fv(n,[e],e.length);return e}class py extends ry{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}py.inline=new py("span"),py.block=new py("div");var gy=function(e){return e[e.LTR=0]="LTR",e[e.RTL=1]="RTL",e}(gy||(gy={}));const my=gy.LTR,Oy=gy.RTL;function vy(e){let t=[];for(let n=0;n<e.length;n++)t.push(1<<+e[n]);return t}const yy=vy("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),by=vy("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),wy=Object.create(null),ky=[];for(let n of["()","[]","{}"]){let e=n.charCodeAt(0),t=n.charCodeAt(1);wy[e]=t,wy[t]=-e}function Sy(e){return e<=247?yy[e]:1424<=e&&e<=1524?2:1536<=e&&e<=1785?by[e-1536]:1774<=e&&e<=2220?4:8192<=e&&e<=8204?256:64336<=e&&e<=65023?4:1}const xy=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class Ty{get dir(){return this.level%2?Oy:my}constructor(e,t,n){this.from=e,this.to=t,this.level=n}side(e,t){return this.dir==t==e?this.to:this.from}forward(e,t){return e==(this.dir==t)}static find(e,t,n,i){let r=-1;for(let s=0;s<e.length;s++){let o=e[s];if(o.from<=t&&o.to>=t){if(o.level==n)return s;(r<0||(0!=i?i<0?o.from<t:o.to>t:e[r].level>o.level))&&(r=s)}}if(r<0)throw new RangeError("Index out of range");return r}}function _y(e,t){if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++){let i=e[n],r=t[n];if(i.from!=r.from||i.to!=r.to||i.direction!=r.direction||!_y(i.inner,r.inner))return!1}return!0}const Py=[];function Cy(e,t,n,i,r,s,o){let a=i%2?2:1;if(i%2==r%2)for(let l=t,h=0;l<n;){let t=!0,c=!1;if(h==s.length||l<s[h].from){let e=Py[l];e!=a&&(t=!1,c=16==e)}let u=t||1!=a?null:[],d=t?i:i+1,f=l;e:for(;;)if(h<s.length&&f==s[h].from){if(c)break e;let p=s[h];if(!t)for(let e=p.to,t=h+1;;){if(e==n)break e;if(!(t<s.length&&s[t].from==e)){if(Py[e]==a)break e;break}e=s[t++].to}if(h++,u)u.push(p);else{p.from>l&&o.push(new Ty(l,p.from,d)),Ey(e,p.direction==my!=!(d%2)?i+1:i,r,p.inner,p.from,p.to,o),l=p.to}f=p.to}else{if(f==n||(t?Py[f]!=a:Py[f]==a))break;f++}u?Cy(e,l,f,i+1,r,u,o):l<f&&o.push(new Ty(l,f,d)),l=f}else for(let l=n,h=s.length;l>t;){let n=!0,c=!1;if(!h||l>s[h-1].to){let e=Py[l-1];e!=a&&(n=!1,c=16==e)}let u=n||1!=a?null:[],d=n?i:i+1,f=l;e:for(;;)if(h&&f==s[h-1].to){if(c)break e;let p=s[--h];if(!n)for(let e=p.from,n=h;;){if(e==t)break e;if(!n||s[n-1].to!=e){if(Py[e-1]==a)break e;break}e=s[--n].from}if(u)u.push(p);else{p.to<l&&o.push(new Ty(p.to,l,d)),Ey(e,p.direction==my!=!(d%2)?i+1:i,r,p.inner,p.from,p.to,o),l=p.from}f=p.from}else{if(f==t||(n?Py[f-1]!=a:Py[f-1]==a))break;f--}u?Cy(e,f,l,i+1,r,u,o):f<l&&o.push(new Ty(f,l,d)),l=f}}function Ey(e,t,n,i,r,s,o){let a=t%2?2:1;!function(e,t,n,i,r){for(let s=0;s<=i.length;s++){let o=s?i[s-1].to:t,a=s<i.length?i[s].from:n,l=s?256:r;for(let t=o,n=l,i=l;t<a;t++){let r=Sy(e.charCodeAt(t));512==r?r=n:8==r&&4==i&&(r=16),Py[t]=4==r?2:r,7&r&&(i=r),n=r}for(let e=o,t=l,i=l;e<a;e++){let r=Py[e];if(128==r)e<a-1&&t==Py[e+1]&&24&t?r=Py[e]=t:Py[e]=256;else if(64==r){let r=e+1;for(;r<a&&64==Py[r];)r++;let s=e&&8==t||r<n&&8==Py[r]?1==i?1:8:256;for(let t=e;t<r;t++)Py[t]=s;e=r-1}else 8==r&&1==i&&(Py[e]=1);t=r,7&r&&(i=r)}}}(e,r,s,i,a),function(e,t,n,i,r){let s=1==r?2:1;for(let o=0,a=0,l=0;o<=i.length;o++){let h=o?i[o-1].to:t,c=o<i.length?i[o].from:n;for(let t,n,i,o=h;o<c;o++)if(n=wy[t=e.charCodeAt(o)])if(n<0){for(let e=a-3;e>=0;e-=3)if(ky[e+1]==-n){let t=ky[e+2],n=2&t?r:4&t?1&t?s:r:0;n&&(Py[o]=Py[ky[e]]=n),a=e;break}}else{if(189==ky.length)break;ky[a++]=o,ky[a++]=t,ky[a++]=l}else if(2==(i=Py[o])||1==i){let e=i==r;l=e?0:1;for(let t=a-3;t>=0;t-=3){let n=ky[t+2];if(2&n)break;if(e)ky[t+2]|=2;else{if(4&n)break;ky[t+2]|=4}}}}}(e,r,s,i,a),function(e,t,n,i){for(let r=0,s=i;r<=n.length;r++){let o=r?n[r-1].to:e,a=r<n.length?n[r].from:t;for(let l=o;l<a;){let o=Py[l];if(256==o){let o=l+1;for(;;)if(o==a){if(r==n.length)break;o=n[r++].to,a=r<n.length?n[r].from:t}else{if(256!=Py[o])break;o++}let h=1==s,c=h==(1==(o<t?Py[o]:i))?h?1:2:i;for(let t=o,i=r,s=i?n[i-1].to:e;t>l;)t==s&&(t=n[--i].from,s=i?n[i-1].to:e),Py[--t]=c;l=o}else s=o,l++}}}(r,s,i,a),Cy(e,r,s,t,n,i,o)}function Qy(e,t,n){if(!e)return[new Ty(0,0,t==Oy?1:0)];if(t==my&&!n.length&&!xy.test(e))return Ay(e.length);if(n.length)for(;e.length>Py.length;)Py[Py.length]=256;let i=[],r=t==my?0:1;return Ey(e,r,r,n,0,e.length,i),i}function Ay(e){return[new Ty(0,e,0)]}let Ry="";function Ny(e,t,n,i,r){var s;let o=i.head-e.from,a=Ty.find(t,o,null!==(s=i.bidiLevel)&&void 0!==s?s:-1,i.assoc),l=t[a],h=l.side(r,n);if(o==h){let e=a+=r?1:-1;if(e<0||e>=t.length)return null;l=t[a=e],o=l.side(!r,n),h=l.side(r,n)}let c=gm(e.text,o,l.forward(r,n));(c<l.from||c>l.to)&&(c=h),Ry=e.text.slice(Math.min(o,c),Math.max(o,c));let u=a==(r?t.length-1:0)?null:t[a+(r?1:-1)];return u&&c==h&&u.level+(r?0:1)<l.level?Im.cursor(u.side(!r,n)+e.from,u.forward(r,n)?1:-1,u.level):Im.cursor(c+e.from,l.forward(r,n)?-1:1,l.level)}function Iy(e,t,n){for(let i=t;i<n;i++){let t=Sy(e.charCodeAt(i));if(1==t)return my;if(2==t||4==t)return Oy}return my}const Dy=Lm.define(),My=Lm.define(),Ly=Lm.define(),$y=Lm.define(),Uy=Lm.define(),qy=Lm.define(),Vy=Lm.define(),zy=Lm.define({combine:e=>e.some((e=>e))}),jy=Lm.define({combine:e=>e.some((e=>e))}),By=Lm.define();class Fy{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"nearest",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"nearest",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:5,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:5,s=arguments.length>5&&void 0!==arguments[5]&&arguments[5];this.range=e,this.y=t,this.x=n,this.yMargin=i,this.xMargin=r,this.isSnapshot=s}map(e){return e.empty?this:new Fy(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}clip(e){return this.range.to<=e.doc.length?this:new Fy(Im.cursor(e.doc.length),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}}const Wy=fO.define({map:(e,t)=>e.map(t)}),Xy=fO.define();function Yy(e,t,n){let i=e.facet($y);i.length?i[0](t):window.onerror?window.onerror(String(t),n,void 0,void 0,t):n?console.error(n+":",t):console.error(t)}const Gy=Lm.define({combine:e=>!e.length||e[0]});let Zy=0;const Hy=Lm.define();class Ky{constructor(e,t,n,i,r){this.id=e,this.create=t,this.domEventHandlers=n,this.domEventObservers=i,this.extension=r(this)}static define(e,t){const{eventHandlers:n,eventObservers:i,provide:r,decorations:s}=t||{};return new Ky(Zy++,e,n,i,(e=>{let t=[Hy.of(e)];return s&&t.push(nb.of((t=>{let n=t.plugin(e);return n?s(n):oy.none}))),r&&t.push(r(e)),t}))}static fromClass(e,t){return Ky.define((t=>new e(t)),t)}}class Jy{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}update(e){if(this.value){if(this.mustUpdate){let e=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(e)}catch(_F){if(Yy(e.state,_F,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch(PF){}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.create(e)}catch(_F){Yy(e.state,_F,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var t;if(null===(t=this.value)||void 0===t?void 0:t.destroy)try{this.value.destroy()}catch(_F){Yy(e.state,_F,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const eb=Lm.define(),tb=Lm.define(),nb=Lm.define(),ib=Lm.define(),rb=Lm.define(),sb=Lm.define();function ob(e,t){let n=e.state.facet(sb);if(!n.length)return n;let i=n.map((t=>t instanceof Function?t(e):t)),r=[];return AO.spans(i,t.from,t.to,{point(){},span(e,n,i,s){let o=e-t.from,a=n-t.from,l=r;for(let r=i.length-1;r>=0;r--,s--){let e,n=i[r].spec.bidiIsolate;if(null==n&&(n=Iy(t.text,o,a)),s>0&&l.length&&(e=l[l.length-1]).to==o&&e.direction==n)e.to=a,l=e.inner;else{let e={from:o,to:a,direction:n,inner:[]};l.push(e),l=e.inner}}}}),r}const ab=Lm.define();function lb(e){let t=0,n=0,i=0,r=0;for(let s of e.state.facet(ab)){let o=s(e);o&&(null!=o.left&&(t=Math.max(t,o.left)),null!=o.right&&(n=Math.max(n,o.right)),null!=o.top&&(i=Math.max(i,o.top)),null!=o.bottom&&(r=Math.max(r,o.bottom)))}return{left:t,right:n,top:i,bottom:r}}const hb=Lm.define();class cb{constructor(e,t,n,i){this.fromA=e,this.toA=t,this.fromB=n,this.toB=i}join(e){return new cb(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let t=e.length,n=this;for(;t>0;t--){let i=e[t-1];if(!(i.fromA>n.toA)){if(i.toA<n.fromA)break;n=n.join(i),e.splice(t-1,1)}}return e.splice(t,0,n),e}static extendWithRanges(e,t){if(0==t.length)return e;let n=[];for(let i=0,r=0,s=0,o=0;;i++){let a=i==e.length?null:e[i],l=s-o,h=a?a.fromB:1e9;for(;r<t.length&&t[r]<h;){let e=t[r],i=t[r+1],s=Math.max(o,e),a=Math.min(h,i);if(s<=a&&new cb(s+l,a+l,s,a).addToSet(n),i>h)break;r+=2}if(!a)return n;new cb(a.fromA,a.toA,a.fromB,a.toB).addToSet(n),s=a.toA,o=a.toB}}}class ub{constructor(e,t,n){this.view=e,this.state=t,this.transactions=n,this.flags=0,this.startState=e.state,this.changes=_m.empty(this.startState.doc.length);for(let r of n)this.changes=this.changes.compose(r.changes);let i=[];this.changes.iterChangedRanges(((e,t,n,r)=>i.push(new cb(e,t,n,r)))),this.changedRanges=i}static create(e,t,n){return new ub(e,t,n)}get viewportChanged(){return(4&this.flags)>0}get heightChanged(){return(2&this.flags)>0}get geometryChanged(){return this.docChanged||(10&this.flags)>0}get focusChanged(){return(1&this.flags)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some((e=>e.selection))}get empty(){return 0==this.flags&&0==this.transactions.length}}class db extends Pv{get length(){return this.view.state.doc.length}constructor(e){super(),this.view=e,this.decorations=[],this.dynamicDecorationMap=[!1],this.domChanged=null,this.hasComposition=null,this.markedForComposition=new Set,this.editContextFormatting=oy.none,this.lastCompositionAfterCursor=!1,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(e.contentDOM),this.children=[new ny],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new cb(0,0,0,e.state.doc.length)],0,null)}update(e){var t;let n=e.changedRanges;this.minWidth>0&&n.length&&(n.every((e=>{let{fromA:t,toA:n}=e;return n<this.minWidthFrom||t>this.minWidthTo}))?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.updateEditContextFormatting(e);let i=-1;this.view.inputState.composing>=0&&!this.view.observer.editContext&&((null===(t=this.domChanged)||void 0===t?void 0:t.newSel)?i=this.domChanged.newSel.head:function(e,t){let n=!1;t&&e.iterChangedRanges(((e,i)=>{e<t.to&&i>t.from&&(n=!0)}));return n}(e.changes,this.hasComposition)||e.selectionSet||(i=e.state.selection.main.head));let r=i>-1?function(e,t,n){let i=pb(e,n);if(!i)return null;let{node:r,from:s,to:o}=i,a=r.nodeValue;if(/[\n\r]/.test(a))return null;if(e.state.doc.sliceString(i.from,i.to)!=a)return null;let l=t.invertedDesc,h=new cb(l.mapPos(s),l.mapPos(o),s,o),c=[];for(let u=r.parentNode;;u=u.parentNode){let t=Pv.get(u);if(t instanceof Fv)c.push({node:u,deco:t.mark});else{if(t instanceof ny||"DIV"==u.nodeName&&u.parentNode==e.contentDOM)return{range:h,text:r,marks:c,line:u};if(u==e.contentDOM)return null;c.push({node:u,deco:new ay({inclusive:!0,attributes:ty(u),tagName:u.tagName.toLowerCase()})})}}}(this.view,e.changes,i):null;if(this.domChanged=null,this.hasComposition){this.markedForComposition.clear();let{from:t,to:i}=this.hasComposition;n=new cb(t,i,e.changes.mapPos(t,-1),e.changes.mapPos(i,1)).addToSet(n.slice())}this.hasComposition=r?{from:r.range.fromB,to:r.range.toB}:null,(jv.ie||jv.chrome)&&!r&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let s=function(e,t,n){let i=new gb;return AO.compare(e,t,n,i),i.changes}(this.decorations,this.updateDeco(),e.changes);return n=cb.extendWithRanges(n,s),!!(7&this.flags||0!=n.length)&&(this.updateInner(n,e.startState.doc.length,r),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,t,n){this.view.viewState.mustMeasureContent=!0,this.updateChildren(e,t,n);let{observer:i}=this.view;i.ignore((()=>{this.dom.style.height=this.view.viewState.contentHeight/this.view.scaleY+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let e=jv.chrome||jv.ios?{node:i.selectionRange.focusNode,written:!1}:void 0;this.sync(this.view,e),this.flags&=-8,e&&(e.written||i.selectionRange.focusNode!=e.node)&&(this.forceSelection=!0),this.dom.style.height=""})),this.markedForComposition.forEach((e=>e.flags&=-9));let r=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let s of this.children)s instanceof iy&&s.widget instanceof fb&&r.push(s.dom);i.updateGaps(r)}updateChildren(e,t,n){let i=n?n.range.addToSet(e.slice()):e,r=this.childCursor(t);for(let s=i.length-1;;s--){let e=s>=0?i[s]:null;if(!e)break;let t,o,a,l,{fromA:h,toA:c,fromB:u,toB:d}=e;if(n&&n.range.fromB<d&&n.range.toB>u){let e=dy.build(this.view.state.doc,u,n.range.fromB,this.decorations,this.dynamicDecorationMap),i=dy.build(this.view.state.doc,n.range.toB,d,this.decorations,this.dynamicDecorationMap);o=e.breakAtStart,a=e.openStart,l=i.openEnd;let r=this.compositionView(n);i.breakAtStart?r.breakAfter=1:i.content.length&&r.merge(r.length,r.length,i.content[0],!1,i.openStart,0)&&(r.breakAfter=i.content[0].breakAfter,i.content.shift()),e.content.length&&r.merge(0,0,e.content[e.content.length-1],!0,0,e.openEnd)&&e.content.pop(),t=e.content.concat(r).concat(i.content)}else({content:t,breakAtStart:o,openStart:a,openEnd:l}=dy.build(this.view.state.doc,u,d,this.decorations,this.dynamicDecorationMap));let{i:f,off:p}=r.findPos(c,1),{i:g,off:m}=r.findPos(h,-1);Qv(this,g,m,f,p,t,o,a,l)}n&&this.fixCompositionDOM(n)}updateEditContextFormatting(e){this.editContextFormatting=this.editContextFormatting.map(e.changes);for(let t of e.transactions)for(let e of t.effects)e.is(Xy)&&(this.editContextFormatting=e.value)}compositionView(e){let t=new Bv(e.text.nodeValue);t.flags|=8;for(let{deco:i}of e.marks)t=new Fv(i,[t],t.length);let n=new ny;return n.append(t,0),n}fixCompositionDOM(e){let t=(e,t)=>{t.flags|=8|(t.children.some((e=>7&e.flags))?1:0),this.markedForComposition.add(t);let n=Pv.get(e);n&&n!=t&&(n.dom=null),t.setDOM(e)},n=this.childPos(e.range.fromB,1),i=this.children[n.i];t(e.line,i);for(let r=e.marks.length-1;r>=-1;r--)n=i.childPos(n.off,1),i=i.children[n.i],t(r>=0?e.marks[r].node:e.text,i)}updateSelection(){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];!(arguments.length>0&&void 0!==arguments[0]&&arguments[0])&&this.view.observer.selectionRange.focusNode||this.view.observer.readSelectionRange();let t=this.view.root.activeElement,n=t==this.dom,i=!n&&sv(this.dom,this.view.observer.selectionRange)&&!(t&&this.dom.contains(t));if(!(n||e||i))return;let r=this.forceSelection;this.forceSelection=!1;let s=this.view.state.selection.main,o=this.moveToLine(this.domAtPos(s.anchor)),a=s.empty?o:this.moveToLine(this.domAtPos(s.head));if(jv.gecko&&s.empty&&!this.hasComposition&&(1==(l=o).node.nodeType&&l.node.firstChild&&(0==l.offset||"false"==l.node.childNodes[l.offset-1].contentEditable)&&(l.offset==l.node.childNodes.length||"false"==l.node.childNodes[l.offset].contentEditable))){let e=document.createTextNode("");this.view.observer.ignore((()=>o.node.insertBefore(e,o.node.childNodes[o.offset]||null))),o=a=new Tv(e,0),r=!0}var l;let h=this.view.observer.selectionRange;!r&&h.focusNode&&(av(o.node,o.offset,h.anchorNode,h.anchorOffset)&&av(a.node,a.offset,h.focusNode,h.focusOffset)||this.suppressWidgetCursorChange(h,s))||(this.view.observer.ignore((()=>{jv.android&&jv.chrome&&this.dom.contains(h.focusNode)&&function(e,t){for(let n=e;n&&n!=t;n=n.assignedSlot||n.parentNode)if(1==n.nodeType&&"false"==n.contentEditable)return!0;return!1}(h.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let e=iv(this.view.root);if(e)if(s.empty){if(jv.gecko){let e=(n=o.node,r=o.offset,1!=n.nodeType?0:(r&&"false"==n.childNodes[r-1].contentEditable?1:0)|(r<n.childNodes.length&&"false"==n.childNodes[r].contentEditable?2:0));if(e&&3!=e){let t=(1==e?Sv:xv)(o.node,o.offset);t&&(o=new Tv(t.node,t.offset))}}e.collapse(o.node,o.offset),null!=s.bidiLevel&&void 0!==e.caretBidiLevel&&(e.caretBidiLevel=s.bidiLevel)}else if(e.extend){e.collapse(o.node,o.offset);try{e.extend(a.node,a.offset)}catch(PF){}}else{let t=document.createRange();s.anchor>s.head&&([o,a]=[a,o]),t.setEnd(a.node,a.offset),t.setStart(o.node,o.offset),e.removeAllRanges(),e.addRange(t)}else;var n,r;i&&this.view.root.activeElement==this.dom&&(this.dom.blur(),t&&t.focus())})),this.view.observer.setSelectionRange(o,a)),this.impreciseAnchor=o.precise?null:new Tv(h.anchorNode,h.anchorOffset),this.impreciseHead=a.precise?null:new Tv(h.focusNode,h.focusOffset)}suppressWidgetCursorChange(e,t){return this.hasComposition&&t.empty&&av(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)&&this.posFromDOM(e.focusNode,e.focusOffset)==t.head}enforceCursorAssoc(){if(this.hasComposition)return;let{view:e}=this,t=e.state.selection.main,n=iv(e.root),{anchorNode:i,anchorOffset:r}=e.observer.selectionRange;if(!n||!t.empty||!t.assoc||!n.modify)return;let s=ny.find(this,t.head);if(!s)return;let o=s.posAtStart;if(t.head==o||t.head==o+s.length)return;let a=this.coordsAt(t.head,-1),l=this.coordsAt(t.head,1);if(!a||!l||a.bottom>l.top)return;let h=this.domAtPos(t.head+t.assoc);n.collapse(h.node,h.offset),n.modify("move",t.assoc<0?"forward":"backward","lineboundary"),e.observer.readSelectionRange();let c=e.observer.selectionRange;e.docView.posFromDOM(c.anchorNode,c.anchorOffset)!=t.from&&n.collapse(i,r)}moveToLine(e){let t,n=this.dom;if(e.node!=n)return e;for(let i=e.offset;!t&&i<n.childNodes.length;i++){let e=Pv.get(n.childNodes[i]);e instanceof ny&&(t=e.domAtPos(0))}for(let i=e.offset-1;!t&&i>=0;i--){let e=Pv.get(n.childNodes[i]);e instanceof ny&&(t=e.domAtPos(e.length))}return t?new Tv(t.node,t.offset,!0):e}nearest(e){for(let t=e;t;){let e=Pv.get(t);if(e&&e.rootView==this)return e;t=t.parentNode}return null}posFromDOM(e,t){let n=this.nearest(e);if(!n)throw new RangeError("Trying to find position for a DOM position outside of the document");return n.localPosFromDOM(e,t)+n.posAtStart}domAtPos(e){let{i:t,off:n}=this.childCursor().findPos(e,-1);for(;t<this.children.length-1;){let e=this.children[t];if(n<e.length||e instanceof ny)break;t++,n=0}return this.children[t].domAtPos(n)}coordsAt(e,t){let n=null,i=0;for(let r=this.length,s=this.children.length-1;s>=0;s--){let o=this.children[s],a=r-o.breakAfter,l=a-o.length;if(a<e)break;if(l<=e&&(l<e||o.covers(-1))&&(a>e||o.covers(1))&&(!n||o instanceof ny&&!(n instanceof ny&&t>=0)))n=o,i=l;else if(n&&l==e&&a==e&&o instanceof iy&&Math.abs(t)<2){if(o.deco.startSide<0)break;s&&(n=null)}r=l}return n?n.coordsAt(e-i,t):null}coordsForChar(e){let{i:t,off:n}=this.childPos(e,1),i=this.children[t];if(!(i instanceof ny))return null;for(;i.children.length;){let{i:e,off:t}=i.childPos(n,1);for(;;e++){if(e==i.children.length)return null;if((i=i.children[e]).length)break}n=t}if(!(i instanceof Bv))return null;let r=gm(i.text,n);if(r==n)return null;let s=yv(i.dom,n,r).getClientRects();for(let o=0;o<s.length;o++){let e=s[o];if(o==s.length-1||e.top<e.bottom&&e.left<e.right)return e}return null}measureVisibleLineHeights(e){let t=[],{from:n,to:i}=e,r=this.view.contentDOM.clientWidth,s=r>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,o=-1,a=this.view.textDirection==gy.LTR;for(let l=0,h=0;h<this.children.length;h++){let e=this.children[h],c=l+e.length;if(c>i)break;if(l>=n){let n=e.dom.getBoundingClientRect();if(t.push(n.height),s){let t=e.dom.lastChild,i=t?ov(t):[];if(i.length){let e=i[i.length-1],t=a?e.right-n.left:n.right-e.left;t>o&&(o=t,this.minWidth=r,this.minWidthFrom=l,this.minWidthTo=c)}}}l=c+e.breakAfter}return t}textDirectionAt(e){let{i:t}=this.childPos(e,1);return"rtl"==getComputedStyle(this.children[t].dom).direction?gy.RTL:gy.LTR}measureTextSize(){for(let r of this.children)if(r instanceof ny){let e=r.measureTextSize();if(e)return e}let e,t,n,i=document.createElement("div");return i.className="cm-line",i.style.width="99999px",i.style.position="absolute",i.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore((()=>{this.dom.appendChild(i);let r=ov(i.firstChild)[0];e=i.getBoundingClientRect().height,t=r?r.width/27:7,n=r?r.height:e,i.remove()})),{lineHeight:e,charWidth:t,textHeight:n}}childCursor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.length,t=this.children.length;return t&&(e-=this.children[--t].length),new Ev(this.children,e,t)}computeBlockGapDeco(){let e=[],t=this.view.viewState;for(let n=0,i=0;;i++){let r=i==t.viewports.length?null:t.viewports[i],s=r?r.from-1:this.length;if(s>n){let i=(t.lineBlockAt(s).bottom-t.lineBlockAt(n).top)/this.view.scaleY;e.push(oy.replace({widget:new fb(i),block:!0,inclusive:!0,isBlockGap:!0}).range(n,s))}if(!r)break;n=r.to+1}return oy.set(e)}updateDeco(){let e=1,t=this.view.state.facet(nb).map((t=>(this.dynamicDecorationMap[e++]="function"==typeof t)?t(this.view):t)),n=!1,i=this.view.state.facet(ib).map(((e,t)=>{let i="function"==typeof e;return i&&(n=!0),i?e(this.view):e}));for(i.length&&(this.dynamicDecorationMap[e++]=n,t.push(AO.join(i))),this.decorations=[this.editContextFormatting,...t,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco];e<this.decorations.length;)this.dynamicDecorationMap[e++]=!1;return this.decorations}scrollIntoView(e){if(e.isSnapshot){let t=this.view.viewState.lineBlockAt(e.range.head);return this.view.scrollDOM.scrollTop=t.top-e.yMargin,void(this.view.scrollDOM.scrollLeft=e.xMargin)}for(let l of this.view.state.facet(By))try{if(l(this.view,e.range,e))return!0}catch(_F){Yy(this.view.state,_F,"scroll handler")}let t,{range:n}=e,i=this.coordsAt(n.head,n.empty?n.assoc:n.head>n.anchor?-1:1);if(!i)return;!n.empty&&(t=this.coordsAt(n.anchor,n.anchor>n.head?-1:1))&&(i={left:Math.min(i.left,t.left),top:Math.min(i.top,t.top),right:Math.max(i.right,t.right),bottom:Math.max(i.bottom,t.bottom)});let r=lb(this.view),s={left:i.left-r.left,top:i.top-r.top,right:i.right+r.right,bottom:i.bottom+r.bottom},{offsetWidth:o,offsetHeight:a}=this.view.scrollDOM;!function(e,t,n,i,r,s,o,a){let l=e.ownerDocument,h=l.defaultView||window;for(let c=e,u=!1;c&&!u;)if(1==c.nodeType){let e,d=c==l.body,f=1,p=1;if(d)e=fv(h);else{if(/^(fixed|sticky)$/.test(getComputedStyle(c).position)&&(u=!0),c.scrollHeight<=c.clientHeight&&c.scrollWidth<=c.clientWidth){c=c.assignedSlot||c.parentNode;continue}let t=c.getBoundingClientRect();({scaleX:f,scaleY:p}=pv(c,t)),e={left:t.left,right:t.left+c.clientWidth*f,top:t.top,bottom:t.top+c.clientHeight*p}}let g=0,m=0;if("nearest"==r)t.top<e.top?(m=-(e.top-t.top+o),n>0&&t.bottom>e.bottom+m&&(m=t.bottom-e.bottom+m+o)):t.bottom>e.bottom&&(m=t.bottom-e.bottom+o,n<0&&t.top-m<e.top&&(m=-(e.top+m-t.top+o)));else{let i=t.bottom-t.top,s=e.bottom-e.top;m=("center"==r&&i<=s?t.top+i/2-s/2:"start"==r||"center"==r&&n<0?t.top-o:t.bottom-s+o)-e.top}if("nearest"==i?t.left<e.left?(g=-(e.left-t.left+s),n>0&&t.right>e.right+g&&(g=t.right-e.right+g+s)):t.right>e.right&&(g=t.right-e.right+s,n<0&&t.left<e.left+g&&(g=-(e.left+g-t.left+s))):g=("center"==i?t.left+(t.right-t.left)/2-(e.right-e.left)/2:"start"==i==a?t.left-s:t.right-(e.right-e.left)+s)-e.left,g||m)if(d)h.scrollBy(g,m);else{let e=0,n=0;if(m){let e=c.scrollTop;c.scrollTop+=m/p,n=(c.scrollTop-e)*p}if(g){let t=c.scrollLeft;c.scrollLeft+=g/f,e=(c.scrollLeft-t)*f}t={left:t.left-e,top:t.top-n,right:t.right-e,bottom:t.bottom-n},e&&Math.abs(e-g)<1&&(i="nearest"),n&&Math.abs(n-m)<1&&(r="nearest")}if(d)break;c=c.assignedSlot||c.parentNode}else{if(11!=c.nodeType)break;c=c.host}}(this.view.scrollDOM,s,n.head<n.anchor?-1:1,e.x,e.y,Math.max(Math.min(e.xMargin,o),-o),Math.max(Math.min(e.yMargin,a),-a),this.view.textDirection==gy.LTR)}}class fb extends ry{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return e.className="cm-gap",this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get editable(){return!0}get estimatedHeight(){return this.height}ignoreEvent(){return!1}}function pb(e,t){let n=e.observer.selectionRange;if(!n.focusNode)return null;let i=Sv(n.focusNode,n.focusOffset),r=xv(n.focusNode,n.focusOffset),s=i||r;if(r&&i&&r.node!=i.node){let t=Pv.get(r.node);if(!t||t instanceof Bv&&t.text!=r.node.nodeValue)s=r;else if(e.docView.lastCompositionAfterCursor){let e=Pv.get(i.node);!e||e instanceof Bv&&e.text!=i.node.nodeValue||(s=r)}}if(e.docView.lastCompositionAfterCursor=s!=i,!s)return null;let o=t-s.offset;return{from:o,to:o+s.node.nodeValue.length,node:s.node}}let gb=class{constructor(){this.changes=[]}compareRange(e,t){uy(e,t,this.changes)}comparePoint(e,t){uy(e,t,this.changes)}};function mb(e,t){return t.left>e?t.left-e:Math.max(0,e-t.right)}function Ob(e,t){return t.top>e?t.top-e:Math.max(0,e-t.bottom)}function vb(e,t){return e.top<t.bottom-1&&e.bottom>t.top+1}function yb(e,t){return t<e.top?{top:t,left:e.left,right:e.right,bottom:e.bottom}:e}function bb(e,t){return t>e.bottom?{top:e.top,left:e.left,right:e.right,bottom:t}:e}function wb(e,t,n){let i,r,s,o,a,l,h,c,u=!1;for(let f=e.firstChild;f;f=f.nextSibling){let e=ov(f);for(let d=0;d<e.length;d++){let p=e[d];r&&vb(r,p)&&(p=yb(bb(p,r.bottom),r.top));let g=mb(t,p),m=Ob(n,p);if(0==g&&0==m)return 3==f.nodeType?kb(f,t,n):wb(f,t,n);if(!i||o>m||o==m&&s>g){i=f,r=p,s=g,o=m;let a=m?n<p.top?-1:1:g?t<p.left?-1:1:0;u=!a||(a>0?d<e.length-1:d>0)}0==g?n>p.bottom&&(!h||h.bottom<p.bottom)?(a=f,h=p):n<p.top&&(!c||c.top>p.top)&&(l=f,c=p):h&&vb(h,p)?h=bb(h,p.bottom):c&&vb(c,p)&&(c=yb(c,p.top))}}if(h&&h.bottom>=n?(i=a,r=h):c&&c.top<=n&&(i=l,r=c),!i)return{node:e,offset:0};let d=Math.max(r.left,Math.min(r.right,t));return 3==i.nodeType?kb(i,d,n):u&&"false"!=i.contentEditable?wb(i,d,n):{node:e,offset:Array.prototype.indexOf.call(e.childNodes,i)+(t>=(r.left+r.right)/2?1:0)}}function kb(e,t,n){let i=e.nodeValue.length,r=-1,s=1e9,o=0;for(let a=0;a<i;a++){let i=yv(e,a,a+1).getClientRects();for(let l=0;l<i.length;l++){let h=i[l];if(h.top==h.bottom)continue;o||(o=t-h.left);let c=(h.top>n?h.top-n:n-h.bottom)-1;if(h.left-1<=t&&h.right+1>=t&&c<s){let n=t>=(h.left+h.right)/2,i=n;if(jv.chrome||jv.gecko){yv(e,a).getBoundingClientRect().left==h.right&&(i=!n)}if(c<=0)return{node:e,offset:a+(i?1:0)};r=a+(i?1:0),s=c}}}return{node:e,offset:r>-1?r:o>0?e.nodeValue.length:0}}function Sb(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1;var r,s;let o,a=e.contentDOM.getBoundingClientRect(),l=a.top+e.viewState.paddingTop,{docHeight:h}=e.viewState,{x:c,y:u}=t,d=u-l;if(d<0)return 0;if(d>h)return e.state.doc.length;for(let b=e.viewState.heightOracle.textHeight/2,w=!1;o=e.elementAtHeight(d),o.type!=sy.Text;)for(;d=i>0?o.bottom+b:o.top-b,!(d>=0&&d<=h);){if(w)return n?null:0;w=!0,i=-i}u=l+d;let f=o.from;if(f<e.viewport.from)return 0==e.viewport.from?0:n?null:xb(e,a,o,c,u);if(f>e.viewport.to)return e.viewport.to==e.state.doc.length?e.state.doc.length:n?null:xb(e,a,o,c,u);let p=e.dom.ownerDocument,g=e.root.elementFromPoint?e.root:p,m=g.elementFromPoint(c,u);m&&!e.contentDOM.contains(m)&&(m=null),m||(c=Math.max(a.left+1,Math.min(a.right-1,c)),m=g.elementFromPoint(c,u),m&&!e.contentDOM.contains(m)&&(m=null));let O,v=-1;if(m&&0!=(null===(r=e.docView.nearest(m))||void 0===r?void 0:r.isEditable))if(p.caretPositionFromPoint){let e=p.caretPositionFromPoint(c,u);e&&({offsetNode:O,offset:v}=e)}else if(p.caretRangeFromPoint){let t=p.caretRangeFromPoint(c,u);t&&(({startContainer:O,startOffset:v}=t),(!e.contentDOM.contains(O)||jv.safari&&function(e,t,n){let i;if(3!=e.nodeType||t!=(i=e.nodeValue.length))return!1;for(let r=e.nextSibling;r;r=r.nextSibling)if(1!=r.nodeType||"BR"!=r.nodeName)return!1;return yv(e,i-1,i).getBoundingClientRect().left>n}(O,v,c)||jv.chrome&&function(e,t,n){if(0!=t)return!1;for(let r=e;;){let e=r.parentNode;if(!e||1!=e.nodeType||e.firstChild!=r)return!1;if(e.classList.contains("cm-line"))break;r=e}let i=1==e.nodeType?e.getBoundingClientRect():yv(e,0,Math.max(e.nodeValue.length,1)).getBoundingClientRect();return n-i.left>5}(O,v,c))&&(O=void 0))}if(!O||!e.docView.dom.contains(O)){let t=ny.find(e.docView,f);if(!t)return d>o.top+o.height/2?o.to:o.from;({node:O,offset:v}=wb(t.dom,c,u))}let y=e.docView.nearest(O);if(!y)return null;if(y.isWidget&&1==(null===(s=y.dom)||void 0===s?void 0:s.nodeType)){let e=y.dom.getBoundingClientRect();return t.y<e.top||t.y<=e.bottom&&t.x<=(e.left+e.right)/2?y.posAtStart:y.posAtEnd}return y.localPosFromDOM(O,v)+y.posAtStart}function xb(e,t,n,i,r){let s=Math.round((i-t.left)*e.defaultCharacterWidth);if(e.lineWrapping&&n.height>1.5*e.defaultLineHeight){let t=e.viewState.heightOracle.textHeight;s+=Math.floor((r-n.top-.5*(e.defaultLineHeight-t))/t)*e.viewState.heightOracle.lineLength}let o=e.state.sliceDoc(n.from,n.to);return n.from+BO(o,s,e.state.tabSize)}function Tb(e,t){let n=e.lineBlockAt(t);if(Array.isArray(n.type))for(let i of n.type)if(i.to>t||i.to==t&&(i.to==n.to||i.type==sy.Text))return i;return n}function _b(e,t,n,i){let r=e.state.doc.lineAt(t.head),s=e.bidiSpans(r),o=e.textDirectionAt(r.from);for(let a=t,l=null;;){let t=Ny(r,s,o,a,n),h=Ry;if(!t){if(r.number==(n?e.state.doc.lines:1))return a;h="\n",r=e.state.doc.line(r.number+(n?1:-1)),s=e.bidiSpans(r),t=e.visualLineSide(r,!n)}if(l){if(!l(h))return a}else{if(!i)return t;l=i(h)}a=t}}function Pb(e,t,n){for(;;){let i=0;for(let r of e)r.between(t-1,t+1,((e,r,s)=>{if(t>e&&t<r){let s=i||n||(t-e<r-t?-1:1);t=s<0?e:r,i=s}}));if(!i)return t}}function Cb(e,t,n){let i=Pb(e.state.facet(rb).map((t=>t(e))),n.from,t.head>n.from?-1:1);return i==n.from?n:Im.cursor(i,i<n.from?1:-1)}class Eb{setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}constructor(e){this.view=e,this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.pendingIOSKey=void 0,this.tabFocusMode=-1,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastContextMenu=0,this.scrollHandlers=[],this.handlers=Object.create(null),this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.mouseSelection=null,this.draggedContent=null,this.handleEvent=this.handleEvent.bind(this),this.notifiedFocused=e.hasFocus,jv.safari&&e.contentDOM.addEventListener("input",(()=>null)),jv.gecko&&function(e){nw.has(e)||(nw.add(e),e.addEventListener("copy",(()=>{})),e.addEventListener("cut",(()=>{})))}(e.contentDOM.ownerDocument)}handleEvent(e){(function(e,t){if(!t.bubbles)return!0;if(t.defaultPrevented)return!1;for(let n,i=t.target;i!=e.contentDOM;i=i.parentNode)if(!i||11==i.nodeType||(n=Pv.get(i))&&n.ignoreEvent(t))return!1;return!0})(this.view,e)&&!this.ignoreDuringComposition(e)&&("keydown"==e.type&&this.keydown(e)||this.runHandlers(e.type,e))}runHandlers(e,t){let n=this.handlers[e];if(n){for(let e of n.observers)e(this.view,t);for(let e of n.handlers){if(t.defaultPrevented)break;if(e(this.view,t)){t.preventDefault();break}}}}ensureHandlers(e){let t=Ab(e),n=this.handlers,i=this.view.contentDOM;for(let r in t)if("scroll"!=r){let e=!t[r].handlers.length,s=n[r];s&&e!=!s.handlers.length&&(i.removeEventListener(r,this.handleEvent),s=null),s||i.addEventListener(r,this.handleEvent,{passive:e})}for(let r in n)"scroll"==r||t[r]||i.removeEventListener(r,this.handleEvent);this.handlers=t}keydown(e){if(this.lastKeyCode=e.keyCode,this.lastKeyTime=Date.now(),9==e.keyCode&&this.tabFocusMode>-1&&(!this.tabFocusMode||Date.now()<=this.tabFocusMode))return!0;if(this.tabFocusMode>0&&27!=e.keyCode&&Ib.indexOf(e.keyCode)<0&&(this.tabFocusMode=-1),jv.android&&jv.chrome&&!e.synthetic&&(13==e.keyCode||8==e.keyCode))return this.view.observer.delayAndroidKey(e.key,e.keyCode),!0;let t;return!jv.ios||e.synthetic||e.altKey||e.metaKey||!((t=Rb.find((t=>t.keyCode==e.keyCode)))&&!e.ctrlKey||Nb.indexOf(e.key)>-1&&e.ctrlKey&&!e.shiftKey)?(229!=e.keyCode&&this.view.observer.forceFlush(),!1):(this.pendingIOSKey=t||e,setTimeout((()=>this.flushIOSKey()),250),!0)}flushIOSKey(e){let t=this.pendingIOSKey;return!!t&&(!("Enter"==t.key&&e&&e.from<e.to&&/^\S+$/.test(e.insert.toString()))&&(this.pendingIOSKey=void 0,bv(this.view.contentDOM,t.key,t.keyCode,t instanceof KeyboardEvent?t:void 0)))}ignoreDuringComposition(e){return!!/^key/.test(e.type)&&(this.composing>0||!!(jv.safari&&!jv.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100)&&(this.compositionPendingKey=!1,!0))}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.view.observer.update(e),this.mouseSelection&&this.mouseSelection.update(e),this.draggedContent&&e.docChanged&&(this.draggedContent=this.draggedContent.map(e.changes)),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}function Qb(e,t){return(n,i)=>{try{return t.call(e,i,n)}catch(_F){Yy(n.state,_F)}}}function Ab(e){let t=Object.create(null);function n(e){return t[e]||(t[e]={observers:[],handlers:[]})}for(let i of e){let e=i.spec;if(e&&e.domEventHandlers)for(let t in e.domEventHandlers){let r=e.domEventHandlers[t];r&&n(t).handlers.push(Qb(i.value,r))}if(e&&e.domEventObservers)for(let t in e.domEventObservers){let r=e.domEventObservers[t];r&&n(t).observers.push(Qb(i.value,r))}}for(let i in Lb)n(i).handlers.push(Lb[i]);for(let i in $b)n(i).observers.push($b[i]);return t}const Rb=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],Nb="dthko",Ib=[16,17,18,20,91,92,224,225];function Db(e){return.7*Math.max(0,e)+8}class Mb{constructor(e,t,n,i){this.view=e,this.startEvent=t,this.style=n,this.mustSelect=i,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=t,this.scrollParents=function(e){let t,n,i=e.ownerDocument;for(let r=e.parentNode;r&&!(r==i.body||t&&n);)if(1==r.nodeType)!n&&r.scrollHeight>r.clientHeight&&(n=r),!t&&r.scrollWidth>r.clientWidth&&(t=r),r=r.assignedSlot||r.parentNode;else{if(11!=r.nodeType)break;r=r.host}return{x:t,y:n}}(e.contentDOM),this.atoms=e.state.facet(rb).map((t=>t(e)));let r=e.contentDOM.ownerDocument;r.addEventListener("mousemove",this.move=this.move.bind(this)),r.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=t.shiftKey,this.multiple=e.state.facet(TO.allowMultipleSelections)&&function(e,t){let n=e.state.facet(Dy);return n.length?n[0](t):jv.mac?t.metaKey:t.ctrlKey}(e,t),this.dragging=!(!function(e,t){let{main:n}=e.state.selection;if(n.empty)return!1;let i=iv(e.root);if(!i||0==i.rangeCount)return!0;let r=i.getRangeAt(0).getClientRects();for(let s=0;s<r.length;s++){let e=r[s];if(e.left<=t.clientX&&e.right>=t.clientX&&e.top<=t.clientY&&e.bottom>=t.clientY)return!0}return!1}(e,t)||1!=Zb(t))&&null}start(e){!1===this.dragging&&this.select(e)}move(e){if(0==e.buttons)return this.destroy();if(this.dragging||null==this.dragging&&function(e,t){return Math.max(Math.abs(e.clientX-t.clientX),Math.abs(e.clientY-t.clientY))}(this.startEvent,e)<10)return;this.select(this.lastEvent=e);let t=0,n=0,i=0,r=0,s=this.view.win.innerWidth,o=this.view.win.innerHeight;this.scrollParents.x&&({left:i,right:s}=this.scrollParents.x.getBoundingClientRect()),this.scrollParents.y&&({top:r,bottom:o}=this.scrollParents.y.getBoundingClientRect());let a=lb(this.view);e.clientX-a.left<=i+6?t=-Db(i-e.clientX):e.clientX+a.right>=s-6&&(t=Db(e.clientX-s)),e.clientY-a.top<=r+6?n=-Db(r-e.clientY):e.clientY+a.bottom>=o-6&&(n=Db(e.clientY-o)),this.setScrollSpeed(t,n)}up(e){null==this.dragging&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=this.view.inputState.draggedContent=null}setScrollSpeed(e,t){this.scrollSpeed={x:e,y:t},e||t?this.scrolling<0&&(this.scrolling=setInterval((()=>this.scroll()),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){let{x:e,y:t}=this.scrollSpeed;e&&this.scrollParents.x&&(this.scrollParents.x.scrollLeft+=e,e=0),t&&this.scrollParents.y&&(this.scrollParents.y.scrollTop+=t,t=0),(e||t)&&this.view.win.scrollBy(e,t),!1===this.dragging&&this.select(this.lastEvent)}skipAtoms(e){let t=null;for(let n=0;n<e.ranges.length;n++){let i=e.ranges[n],r=null;if(i.empty){let e=Pb(this.atoms,i.from,0);e!=i.from&&(r=Im.cursor(e,-1))}else{let e=Pb(this.atoms,i.from,-1),t=Pb(this.atoms,i.to,1);e==i.from&&t==i.to||(r=Im.range(i.from==i.anchor?e:t,i.from==i.head?e:t))}r&&(t||(t=e.ranges.slice()),t[n]=r)}return t?Im.create(t,e.mainIndex):e}select(e){let{view:t}=this,n=this.skipAtoms(this.style.get(e,this.extend,this.multiple));!this.mustSelect&&n.eq(t.state.selection,!1===this.dragging)||this.view.dispatch({selection:n,userEvent:"select.pointer"}),this.mustSelect=!1}update(e){e.transactions.some((e=>e.isUserEvent("input.type")))?this.destroy():this.style.update(e)&&setTimeout((()=>this.select(this.lastEvent)),20)}}const Lb=Object.create(null),$b=Object.create(null),Ub=jv.ie&&jv.ie_version<15||jv.ios&&jv.webkit_version<604;function qb(e,t){let n,{state:i}=e,r=1,s=i.toText(t),o=s.lines==i.selection.ranges.length;if(null!=Kb&&i.selection.ranges.every((e=>e.empty))&&Kb==s.toString()){let e=-1;n=i.changeByRange((n=>{let a=i.doc.lineAt(n.from);if(a.from==e)return{range:n};e=a.from;let l=i.toText((o?s.line(r++).text:t)+i.lineBreak);return{changes:{from:a.from,insert:l},range:Im.cursor(n.from+l.length)}}))}else n=o?i.changeByRange((e=>{let t=s.line(r++);return{changes:{from:e.from,to:e.to,insert:t.text},range:Im.cursor(e.from+t.length)}})):i.replaceSelection(s);e.dispatch(n,{userEvent:"input.paste",scrollIntoView:!0})}function Vb(e,t,n,i){if(1==i)return Im.cursor(t,n);if(2==i)return function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=e.charCategorizer(t),r=e.doc.lineAt(t),s=t-r.from;if(0==r.length)return Im.cursor(t);0==s?n=1:s==r.length&&(n=-1);let o=s,a=s;n<0?o=gm(r.text,s,!1):a=gm(r.text,s);let l=i(r.text.slice(o,a));for(;o>0;){let e=gm(r.text,o,!1);if(i(r.text.slice(e,o))!=l)break;o=e}for(;a<r.length;){let e=gm(r.text,a);if(i(r.text.slice(a,e))!=l)break;a=e}return Im.range(o+r.from,a+r.from)}(e.state,t,n);{let n=ny.find(e.docView,t),i=e.state.doc.lineAt(n?n.posAtEnd:t),r=n?n.posAtStart:i.from,s=n?n.posAtEnd:i.to;return s<e.state.doc.length&&s==i.to&&s++,Im.range(r,s)}}$b.scroll=e=>{e.inputState.lastScrollTop=e.scrollDOM.scrollTop,e.inputState.lastScrollLeft=e.scrollDOM.scrollLeft},Lb.keydown=(e,t)=>(e.inputState.setSelectionOrigin("select"),27==t.keyCode&&0!=e.inputState.tabFocusMode&&(e.inputState.tabFocusMode=Date.now()+2e3),!1),$b.touchstart=(e,t)=>{e.inputState.lastTouchTime=Date.now(),e.inputState.setSelectionOrigin("select.pointer")},$b.touchmove=e=>{e.inputState.setSelectionOrigin("select.pointer")},Lb.mousedown=(e,t)=>{if(e.observer.flush(),e.inputState.lastTouchTime>Date.now()-2e3)return!1;let n=null;for(let i of e.state.facet(Ly))if(n=i(e,t),n)break;if(n||0!=t.button||(n=function(e,t){let n=Fb(e,t),i=Zb(t),r=e.state.selection;return{update(e){e.docChanged&&(n.pos=e.changes.mapPos(n.pos),r=r.map(e.changes))},get(t,s,o){let a,l=Fb(e,t),h=Vb(e,l.pos,l.bias,i);if(n.pos!=l.pos&&!s){let t=Vb(e,n.pos,n.bias,i),r=Math.min(t.from,h.from),s=Math.max(t.to,h.to);h=r<h.from?Im.range(r,s):Im.range(s,r)}return s?r.replaceRange(r.main.extend(h.from,h.to)):o&&1==i&&r.ranges.length>1&&(a=function(e,t){for(let n=0;n<e.ranges.length;n++){let{from:i,to:r}=e.ranges[n];if(i<=t&&r>=t)return Im.create(e.ranges.slice(0,n).concat(e.ranges.slice(n+1)),e.mainIndex==n?0:e.mainIndex-(e.mainIndex>n?1:0))}return null}(r,l.pos))?a:o?r.addRange(h):Im.create([h])}}}(e,t)),n){let i=!e.hasFocus;e.inputState.startMouseSelection(new Mb(e,t,n,i)),i&&e.observer.ignore((()=>{vv(e.contentDOM);let t=e.root.activeElement;t&&!t.contains(e.contentDOM)&&t.blur()}));let r=e.inputState.mouseSelection;if(r)return r.start(t),!1===r.dragging}return!1};let zb=(e,t)=>e>=t.top&&e<=t.bottom,jb=(e,t,n)=>zb(t,n)&&e>=n.left&&e<=n.right;function Bb(e,t,n,i){let r=ny.find(e.docView,t);if(!r)return 1;let s=t-r.posAtStart;if(0==s)return 1;if(s==r.length)return-1;let o=r.coordsAt(s,-1);if(o&&jb(n,i,o))return-1;let a=r.coordsAt(s,1);return a&&jb(n,i,a)?1:o&&zb(i,o)?-1:1}function Fb(e,t){let n=e.posAtCoords({x:t.clientX,y:t.clientY},!1);return{pos:n,bias:Bb(e,n,t.clientX,t.clientY)}}const Wb=jv.ie&&jv.ie_version<=11;let Xb=null,Yb=0,Gb=0;function Zb(e){if(!Wb)return e.detail;let t=Xb,n=Gb;return Xb=e,Gb=Date.now(),Yb=!t||n>Date.now()-400&&Math.abs(t.clientX-e.clientX)<2&&Math.abs(t.clientY-e.clientY)<2?(Yb+1)%3:1}function Hb(e,t,n,i){if(!n)return;let r=e.posAtCoords({x:t.clientX,y:t.clientY},!1),{draggedContent:s}=e.inputState,o=i&&s&&function(e,t){let n=e.state.facet(My);return n.length?n[0](t):jv.mac?!t.altKey:!t.ctrlKey}(e,t)?{from:s.from,to:s.to}:null,a={from:r,insert:n},l=e.state.changes(o?[o,a]:a);e.focus(),e.dispatch({changes:l,selection:{anchor:l.mapPos(r,-1),head:l.mapPos(r,1)},userEvent:o?"move.drop":"input.drop"}),e.inputState.draggedContent=null}Lb.dragstart=(e,t)=>{let{selection:{main:n}}=e.state;if(t.target.draggable){let i=e.docView.nearest(t.target);if(i&&i.isWidget){let e=i.posAtStart,t=e+i.length;(e>=n.to||t<=n.from)&&(n=Im.range(e,t))}}let{inputState:i}=e;return i.mouseSelection&&(i.mouseSelection.dragging=!0),i.draggedContent=n,t.dataTransfer&&(t.dataTransfer.setData("Text",e.state.sliceDoc(n.from,n.to)),t.dataTransfer.effectAllowed="copyMove"),!1},Lb.dragend=e=>(e.inputState.draggedContent=null,!1),Lb.drop=(e,t)=>{if(!t.dataTransfer)return!1;if(e.state.readOnly)return!0;let n=t.dataTransfer.files;if(n&&n.length){let i=Array(n.length),r=0,s=()=>{++r==n.length&&Hb(e,t,i.filter((e=>null!=e)).join(e.state.lineBreak),!1)};for(let e=0;e<n.length;e++){let t=new FileReader;t.onerror=s,t.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(t.result)||(i[e]=t.result),s()},t.readAsText(n[e])}return!0}{let n=t.dataTransfer.getData("Text");if(n)return Hb(e,t,n,!0),!0}return!1},Lb.paste=(e,t)=>{if(e.state.readOnly)return!0;e.observer.flush();let n=Ub?null:t.clipboardData;return n?(qb(e,n.getData("text/plain")||n.getData("text/uri-list")),!0):(function(e){let t=e.dom.parentNode;if(!t)return;let n=t.appendChild(document.createElement("textarea"));n.style.cssText="position: fixed; left: -10000px; top: 10px",n.focus(),setTimeout((()=>{e.focus(),n.remove(),qb(e,n.value)}),50)}(e),!1)};let Kb=null;Lb.copy=Lb.cut=(e,t)=>{let{text:n,ranges:i,linewise:r}=function(e){let t=[],n=[],i=!1;for(let r of e.selection.ranges)r.empty||(t.push(e.sliceDoc(r.from,r.to)),n.push(r));if(!t.length){let r=-1;for(let{from:i}of e.selection.ranges){let s=e.doc.lineAt(i);s.number>r&&(t.push(s.text),n.push({from:s.from,to:Math.min(e.doc.length,s.to+1)})),r=s.number}i=!0}return{text:t.join(e.lineBreak),ranges:n,linewise:i}}(e.state);if(!n&&!r)return!1;Kb=r?n:null,"cut"!=t.type||e.state.readOnly||e.dispatch({changes:i,scrollIntoView:!0,userEvent:"delete.cut"});let s=Ub?null:t.clipboardData;return s?(s.clearData(),s.setData("text/plain",n),!0):(function(e,t){let n=e.dom.parentNode;if(!n)return;let i=n.appendChild(document.createElement("textarea"));i.style.cssText="position: fixed; left: -10000px; top: 10px",i.value=t,i.focus(),i.selectionEnd=t.length,i.selectionStart=0,setTimeout((()=>{i.remove(),e.focus()}),50)}(e,n),!1)};const Jb=cO.define();function ew(e,t){let n=[];for(let i of e.facet(Vy)){let r=i(e,t);r&&n.push(r)}return n?e.update({effects:n,annotations:Jb.of(!0)}):null}function tw(e){setTimeout((()=>{let t=e.hasFocus;if(t!=e.inputState.notifiedFocused){let n=ew(e.state,t);n?e.dispatch(n):e.update([])}}),10)}$b.focus=e=>{e.inputState.lastFocusTime=Date.now(),e.scrollDOM.scrollTop||!e.inputState.lastScrollTop&&!e.inputState.lastScrollLeft||(e.scrollDOM.scrollTop=e.inputState.lastScrollTop,e.scrollDOM.scrollLeft=e.inputState.lastScrollLeft),tw(e)},$b.blur=e=>{e.observer.clearSelectionRange(),tw(e)},$b.compositionstart=$b.compositionupdate=e=>{e.observer.editContext||(null==e.inputState.compositionFirstChange&&(e.inputState.compositionFirstChange=!0),e.inputState.composing<0&&(e.inputState.composing=0))},$b.compositionend=e=>{e.observer.editContext||(e.inputState.composing=-1,e.inputState.compositionEndedAt=Date.now(),e.inputState.compositionPendingKey=!0,e.inputState.compositionPendingChange=e.observer.pendingRecords().length>0,e.inputState.compositionFirstChange=null,jv.chrome&&jv.android?e.observer.flushSoon():e.inputState.compositionPendingChange?Promise.resolve().then((()=>e.observer.flush())):setTimeout((()=>{e.inputState.composing<0&&e.docView.hasComposition&&e.update([])}),50))},$b.contextmenu=e=>{e.inputState.lastContextMenu=Date.now()},Lb.beforeinput=(e,t)=>{var n;let i;if(jv.chrome&&jv.android&&(i=Rb.find((e=>e.inputType==t.inputType)))&&(e.observer.delayAndroidKey(i.key,i.keyCode),"Backspace"==i.key||"Delete"==i.key)){let t=(null===(n=window.visualViewport)||void 0===n?void 0:n.height)||0;setTimeout((()=>{var n;((null===(n=window.visualViewport)||void 0===n?void 0:n.height)||0)>t+10&&e.hasFocus&&(e.contentDOM.blur(),e.focus())}),100)}return jv.ios&&"deleteContentForward"==t.inputType&&e.observer.flushSoon(),jv.safari&&"insertText"==t.inputType&&e.inputState.composing>=0&&setTimeout((()=>$b.compositionend(e,t)),20),!1};const nw=new Set;const iw=["pre-wrap","normal","pre-line","break-spaces"];class rw{constructor(e){this.lineWrapping=e,this.doc=tm.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30,this.heightChanged=!1}heightForGap(e,t){let n=this.doc.lineAt(t).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(n+=Math.max(0,Math.ceil((t-e-n*this.lineLength*.5)/this.lineLength))),this.lineHeight*n}heightForLine(e){if(!this.lineWrapping)return this.lineHeight;return(1+Math.max(0,Math.ceil((e-this.lineLength)/(this.lineLength-5))))*this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return iw.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let t=!1;for(let n=0;n<e.length;n++){let i=e[n];i<0?n++:this.heightSamples[Math.floor(10*i)]||(t=!0,this.heightSamples[Math.floor(10*i)]=!0)}return t}refresh(e,t,n,i,r,s){let o=iw.indexOf(e)>-1,a=Math.round(t)!=Math.round(this.lineHeight)||this.lineWrapping!=o;if(this.lineWrapping=o,this.lineHeight=t,this.charWidth=n,this.textHeight=i,this.lineLength=r,a){this.heightSamples={};for(let e=0;e<s.length;e++){let t=s[e];t<0?e++:this.heightSamples[Math.floor(10*t)]=!0}}return a}}class sw{constructor(e,t){this.from=e,this.heights=t,this.index=0}get more(){return this.index<this.heights.length}}class ow{constructor(e,t,n,i,r){this.from=e,this.length=t,this.top=n,this.height=i,this._content=r}get type(){return"number"==typeof this._content?sy.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof hy?this._content.widget:null}get widgetLineBreaks(){return"number"==typeof this._content?this._content:0}join(e){let t=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(e._content)?e._content:[e]);return new ow(this.from,this.length+e.length,this.top,this.height+e.height,t)}}var aw=function(e){return e[e.ByPos=0]="ByPos",e[e.ByHeight=1]="ByHeight",e[e.ByPosNoHeight=2]="ByPosNoHeight",e}(aw||(aw={}));const lw=.001;class hw{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2;this.length=e,this.height=t,this.flags=n}get outdated(){return(2&this.flags)>0}set outdated(e){this.flags=(e?2:0)|-3&this.flags}setHeight(e,t){this.height!=t&&(Math.abs(this.height-t)>lw&&(e.heightChanged=!0),this.height=t)}replace(e,t,n){return hw.of(n)}decomposeLeft(e,t){t.push(this)}decomposeRight(e,t){t.push(this)}applyChanges(e,t,n,i){let r=this,s=n.doc;for(let o=i.length-1;o>=0;o--){let{fromA:a,toA:l,fromB:h,toB:c}=i[o],u=r.lineAt(a,aw.ByPosNoHeight,n.setDoc(t),0,0),d=u.to>=l?u:r.lineAt(l,aw.ByPosNoHeight,n,0,0);for(c+=d.to-l,l=d.to;o>0&&u.from<=i[o-1].toA;)a=i[o-1].fromA,h=i[o-1].fromB,o--,a<u.from&&(u=r.lineAt(a,aw.ByPosNoHeight,n,0,0));h+=u.from-a,a=u.from;let f=gw.build(n.setDoc(s),e,h,c);r=r.replace(a,l,f)}return r.updateHeight(n,0)}static empty(){return new uw(0,0)}static of(e){if(1==e.length)return e[0];let t=0,n=e.length,i=0,r=0;for(;;)if(t==n)if(i>2*r){let r=e[t-1];r.break?e.splice(--t,1,r.left,null,r.right):e.splice(--t,1,r.left,r.right),n+=1+r.break,i-=r.size}else{if(!(r>2*i))break;{let t=e[n];t.break?e.splice(n,1,t.left,null,t.right):e.splice(n,1,t.left,t.right),n+=2+t.break,r-=t.size}}else if(i<r){let n=e[t++];n&&(i+=n.size)}else{let t=e[--n];t&&(r+=t.size)}let s=0;return null==e[t-1]?(s=1,t--):null==e[t]&&(s=1,n++),new fw(hw.of(e.slice(0,t)),s,hw.of(e.slice(n)))}}hw.prototype.size=1;class cw extends hw{constructor(e,t,n){super(e,t),this.deco=n}blockAt(e,t,n,i){return new ow(i,this.length,n,this.height,this.deco||0)}lineAt(e,t,n,i,r){return this.blockAt(0,n,i,r)}forEachLine(e,t,n,i,r,s){e<=r+this.length&&t>=r&&s(this.blockAt(0,n,i,r))}updateHeight(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>3?arguments[3]:void 0;return n&&n.from<=t&&n.more&&this.setHeight(e,n.heights[n.index++]),this.outdated=!1,this}toString(){return"block(".concat(this.length,")")}}class uw extends cw{constructor(e,t){super(e,t,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0}blockAt(e,t,n,i){return new ow(i,this.length,n,this.height,this.breaks)}replace(e,t,n){let i=n[0];return 1==n.length&&(i instanceof uw||i instanceof dw&&4&i.flags)&&Math.abs(this.length-i.length)<10?(i instanceof dw?i=new uw(i.length,this.height):i.height=this.height,this.outdated||(i.outdated=!1),i):hw.of(n)}updateHeight(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3?arguments[3]:void 0;return i&&i.from<=t&&i.more?this.setHeight(e,i.heights[i.index++]):(n||this.outdated)&&this.setHeight(e,Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))+this.breaks*e.lineHeight),this.outdated=!1,this}toString(){return"line(".concat(this.length).concat(this.collapsed?-this.collapsed:"").concat(this.widgetHeight?":"+this.widgetHeight:"",")")}}class dw extends hw{constructor(e){super(e,0)}heightMetrics(e,t){let n,i=e.doc.lineAt(t).number,r=e.doc.lineAt(t+this.length).number,s=r-i+1,o=0;if(e.lineWrapping){let t=Math.min(this.height,e.lineHeight*s);n=t/s,this.length>s+1&&(o=(this.height-t)/(this.length-s-1))}else n=this.height/s;return{firstLine:i,lastLine:r,perLine:n,perChar:o}}blockAt(e,t,n,i){let{firstLine:r,lastLine:s,perLine:o,perChar:a}=this.heightMetrics(t,i);if(t.lineWrapping){let r=i+(e<t.lineHeight?0:Math.round(Math.max(0,Math.min(1,(e-n)/this.height))*this.length)),s=t.doc.lineAt(r),l=o+s.length*a,h=Math.max(n,e-l/2);return new ow(s.from,s.length,h,l,0)}{let i=Math.max(0,Math.min(s-r,Math.floor((e-n)/o))),{from:a,length:l}=t.doc.line(r+i);return new ow(a,l,n+o*i,o,0)}}lineAt(e,t,n,i,r){if(t==aw.ByHeight)return this.blockAt(e,n,i,r);if(t==aw.ByPosNoHeight){let{from:t,to:i}=n.doc.lineAt(e);return new ow(t,i-t,0,0,0)}let{firstLine:s,perLine:o,perChar:a}=this.heightMetrics(n,r),l=n.doc.lineAt(e),h=o+l.length*a,c=l.number-s,u=i+o*c+a*(l.from-r-c);return new ow(l.from,l.length,Math.max(i,Math.min(u,i+this.height-h)),h,0)}forEachLine(e,t,n,i,r,s){e=Math.max(e,r),t=Math.min(t,r+this.length);let{firstLine:o,perLine:a,perChar:l}=this.heightMetrics(n,r);for(let h=e,c=i;h<=t;){let t=n.doc.lineAt(h);if(h==e){let n=t.number-o;c+=a*n+l*(e-r-n)}let i=a+l*t.length;s(new ow(t.from,t.length,c,i,0)),c+=i,h=t.to+1}}replace(e,t,n){let i=this.length-t;if(i>0){let e=n[n.length-1];e instanceof dw?n[n.length-1]=new dw(e.length+i):n.push(null,new dw(i-1))}if(e>0){let t=n[0];t instanceof dw?n[0]=new dw(e+t.length):n.unshift(new dw(e-1),null)}return hw.of(n)}decomposeLeft(e,t){t.push(new dw(e-1),null)}decomposeRight(e,t){t.push(null,new dw(this.length-e-1))}updateHeight(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3?arguments[3]:void 0,r=t+this.length;if(i&&i.from<=t+this.length&&i.more){let n=[],s=Math.max(t,i.from),o=-1;for(i.from>t&&n.push(new dw(i.from-t-1).updateHeight(e,t));s<=r&&i.more;){let t=e.doc.lineAt(s).length;n.length&&n.push(null);let r=i.heights[i.index++];-1==o?o=r:Math.abs(r-o)>=lw&&(o=-2);let a=new uw(t,r);a.outdated=!1,n.push(a),s+=t+1}s<=r&&n.push(null,new dw(r-s).updateHeight(e,s));let a=hw.of(n);return(o<0||Math.abs(a.height-this.height)>=lw||Math.abs(o-this.heightMetrics(e,t).perLine)>=lw)&&(e.heightChanged=!0),a}return(n||this.outdated)&&(this.setHeight(e,e.heightForGap(t,t+this.length)),this.outdated=!1),this}toString(){return"gap(".concat(this.length,")")}}class fw extends hw{constructor(e,t,n){super(e.length+t+n.length,e.height+n.height,t|(e.outdated||n.outdated?2:0)),this.left=e,this.right=n,this.size=e.size+n.size}get break(){return 1&this.flags}blockAt(e,t,n,i){let r=n+this.left.height;return e<r?this.left.blockAt(e,t,n,i):this.right.blockAt(e,t,r,i+this.left.length+this.break)}lineAt(e,t,n,i,r){let s=i+this.left.height,o=r+this.left.length+this.break,a=t==aw.ByHeight?e<s:e<o,l=a?this.left.lineAt(e,t,n,i,r):this.right.lineAt(e,t,n,s,o);if(this.break||(a?l.to<o:l.from>o))return l;let h=t==aw.ByPosNoHeight?aw.ByPosNoHeight:aw.ByPos;return a?l.join(this.right.lineAt(o,h,n,s,o)):this.left.lineAt(o,h,n,i,r).join(l)}forEachLine(e,t,n,i,r,s){let o=i+this.left.height,a=r+this.left.length+this.break;if(this.break)e<a&&this.left.forEachLine(e,t,n,i,r,s),t>=a&&this.right.forEachLine(e,t,n,o,a,s);else{let l=this.lineAt(a,aw.ByPos,n,i,r);e<l.from&&this.left.forEachLine(e,l.from-1,n,i,r,s),l.to>=e&&l.from<=t&&s(l),t>l.to&&this.right.forEachLine(l.to+1,t,n,o,a,s)}}replace(e,t,n){let i=this.left.length+this.break;if(t<i)return this.balanced(this.left.replace(e,t,n),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-i,t-i,n));let r=[];e>0&&this.decomposeLeft(e,r);let s=r.length;for(let o of n)r.push(o);if(e>0&&pw(r,s-1),t<this.length){let e=r.length;this.decomposeRight(t,r),pw(r,e)}return hw.of(r)}decomposeLeft(e,t){let n=this.left.length;if(e<=n)return this.left.decomposeLeft(e,t);t.push(this.left),this.break&&(n++,e>=n&&t.push(null)),e>n&&this.right.decomposeLeft(e-n,t)}decomposeRight(e,t){let n=this.left.length,i=n+this.break;if(e>=i)return this.right.decomposeRight(e-i,t);e<n&&this.left.decomposeRight(e,t),this.break&&e<i&&t.push(null),t.push(this.right)}balanced(e,t){return e.size>2*t.size||t.size>2*e.size?hw.of(this.break?[e,null,t]:[e,t]):(this.left=e,this.right=t,this.height=e.height+t.height,this.outdated=e.outdated||t.outdated,this.size=e.size+t.size,this.length=e.length+this.break+t.length,this)}updateHeight(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3?arguments[3]:void 0,{left:r,right:s}=this,o=t+r.length+this.break,a=null;return i&&i.from<=t+r.length&&i.more?a=r=r.updateHeight(e,t,n,i):r.updateHeight(e,t,n),i&&i.from<=o+s.length&&i.more?a=s=s.updateHeight(e,o,n,i):s.updateHeight(e,o,n),a?this.balanced(r,s):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function pw(e,t){let n,i;null==e[t]&&(n=e[t-1])instanceof dw&&(i=e[t+1])instanceof dw&&e.splice(t-1,3,new dw(n.length+1+i.length))}class gw{constructor(e,t){this.pos=e,this.oracle=t,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,t){if(this.lineStart>-1){let e=Math.min(t,this.lineEnd),n=this.nodes[this.nodes.length-1];n instanceof uw?n.length+=e-this.pos:(e>this.pos||!this.isCovered)&&this.nodes.push(new uw(e-this.pos,-1)),this.writtenTo=e,t>e&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=t}point(e,t,n){if(e<t||n.heightRelevant){let i=n.widget?n.widget.estimatedHeight:0,r=n.widget?n.widget.lineBreaks:0;i<0&&(i=this.oracle.lineHeight);let s=t-e;n.block?this.addBlock(new cw(s,i,n)):(s||r||i>=5)&&this.addLineDeco(i,r,s)}else t>e&&this.span(e,t);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:t}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=t,this.writtenTo<e&&((this.writtenTo<e-1||null==this.nodes[this.nodes.length-1])&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new uw(this.pos-e,-1)),this.writtenTo=this.pos}blankContent(e,t){let n=new dw(t-e);return this.oracle.doc.lineAt(e).to==t&&(n.flags|=4),n}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof uw)return e;let t=new uw(0,-1);return this.nodes.push(t),t}addBlock(e){this.enterLine();let t=e.deco;t&&t.startSide>0&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,t&&t.endSide>0&&(this.covering=e)}addLineDeco(e,t,n){let i=this.ensureLine();i.length+=n,i.collapsed+=n,i.widgetHeight=Math.max(i.widgetHeight,e),i.breaks+=t,this.writtenTo=this.pos=this.pos+n}finish(e){let t=0==this.nodes.length?null:this.nodes[this.nodes.length-1];!(this.lineStart>-1)||t instanceof uw||this.isCovered?(this.writtenTo<this.pos||null==t)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos)):this.nodes.push(new uw(0,-1));let n=e;for(let i of this.nodes)i instanceof uw&&i.updateHeight(this.oracle,n),n+=i?i.length:1;return this.nodes}static build(e,t,n,i){let r=new gw(n,e);return AO.spans(t,n,i,r,0),r.finish(n)}}class mw{constructor(){this.changes=[]}compareRange(){}comparePoint(e,t,n,i){(e<t||n&&n.heightRelevant||i&&i.heightRelevant)&&uy(e,t,this.changes,5)}}function Ow(e,t){let n=e.getBoundingClientRect(),i=e.ownerDocument,r=i.defaultView||window,s=Math.max(0,n.left),o=Math.min(r.innerWidth,n.right),a=Math.max(0,n.top),l=Math.min(r.innerHeight,n.bottom);for(let h=e.parentNode;h&&h!=i.body;)if(1==h.nodeType){let t=h,n=window.getComputedStyle(t);if((t.scrollHeight>t.clientHeight||t.scrollWidth>t.clientWidth)&&"visible"!=n.overflow){let n=t.getBoundingClientRect();s=Math.max(s,n.left),o=Math.min(o,n.right),a=Math.max(a,n.top),l=h==e.parentNode?n.bottom:Math.min(l,n.bottom)}h="absolute"==n.position||"fixed"==n.position?t.offsetParent:t.parentNode}else{if(11!=h.nodeType)break;h=h.host}return{left:s-n.left,right:Math.max(s,o)-n.left,top:a-(n.top+t),bottom:Math.max(a,l)-(n.top+t)}}function vw(e,t){let n=e.getBoundingClientRect();return{left:0,right:n.right-n.left,top:t,bottom:n.bottom-(n.top+t)}}class yw{constructor(e,t,n){this.from=e,this.to=t,this.size=n}static same(e,t){if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++){let i=e[n],r=t[n];if(i.from!=r.from||i.to!=r.to||i.size!=r.size)return!1}return!0}draw(e,t){return oy.replace({widget:new bw(this.size*(t?e.scaleY:e.scaleX),t)}).range(this.from,this.to)}}class bw extends ry{constructor(e,t){super(),this.size=e,this.vertical=t}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class ww{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!1,this.scaleX=1,this.scaleY=1,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=Tw,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=gy.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let t=e.facet(tb).some((e=>"function"!=typeof e&&"cm-lineWrapping"==e.class));this.heightOracle=new rw(t),this.stateDeco=e.facet(nb).filter((e=>"function"!=typeof e)),this.heightMap=hw.empty().applyChanges(this.stateDeco,tm.empty,this.heightOracle.setDoc(e.doc),[new cb(0,0,0,e.doc.length)]);for(let n=0;n<2&&(this.viewport=this.getViewport(0,null),this.updateForViewport());n++);this.updateViewportLines(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=oy.set(this.lineGaps.map((e=>e.draw(this,!1)))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:t}=this.state.selection;for(let n=0;n<=1;n++){let i=n?t.head:t.anchor;if(!e.some((e=>{let{from:t,to:n}=e;return i>=t&&i<=n}))){let{from:t,to:n}=this.lineBlockAt(i);e.push(new kw(t,n))}}return this.viewports=e.sort(((e,t)=>e.from-t.from)),this.updateScaler()}updateScaler(){let e=this.scaler;return this.scaler=this.heightMap.height<=7e6?Tw:new _w(this.heightOracle,this.heightMap,this.viewports),e.eq(this.scaler)?0:2}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,(e=>{this.viewportLines.push(Pw(e,this.scaler))}))}update(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.state=e.state;let n=this.stateDeco;this.stateDeco=this.state.facet(nb).filter((e=>"function"!=typeof e));let i=e.changedRanges,r=cb.extendWithRanges(i,function(e,t,n){let i=new mw;return AO.compare(e,t,n,i,0),i.changes}(n,this.stateDeco,e?e.changes:_m.empty(this.state.doc.length))),s=this.heightMap.height,o=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),r),this.heightMap.height!=s&&(e.flags|=2),o?(this.scrollAnchorPos=e.changes.mapPos(o.from,-1),this.scrollAnchorHeight=o.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=this.heightMap.height);let a=r.length?this.mapViewport(this.viewport,e.changes):this.viewport;(t&&(t.range.head<a.from||t.range.head>a.to)||!this.viewportIsAppropriate(a))&&(a=this.getViewport(0,t));let l=a.from!=this.viewport.from||a.to!=this.viewport.to;this.viewport=a,e.flags|=this.updateForViewport(),(l||!e.changes.empty||2&e.flags)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(),t&&(this.scrollTarget=t),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&!e.state.facet(jy)&&(this.mustEnforceCursorAssoc=!0)}measure(e){let t=e.contentDOM,n=window.getComputedStyle(t),i=this.heightOracle,r=n.whiteSpace;this.defaultTextDirection="rtl"==n.direction?gy.RTL:gy.LTR;let s=this.heightOracle.mustRefreshForWrapping(r),o=t.getBoundingClientRect(),a=s||this.mustMeasureContent||this.contentDOMHeight!=o.height;this.contentDOMHeight=o.height,this.mustMeasureContent=!1;let l=0,h=0;if(o.width&&o.height){let{scaleX:e,scaleY:n}=pv(t,o);(e>.005&&Math.abs(this.scaleX-e)>.005||n>.005&&Math.abs(this.scaleY-n)>.005)&&(this.scaleX=e,this.scaleY=n,l|=8,s=a=!0)}let c=(parseInt(n.paddingTop)||0)*this.scaleY,u=(parseInt(n.paddingBottom)||0)*this.scaleY;this.paddingTop==c&&this.paddingBottom==u||(this.paddingTop=c,this.paddingBottom=u,l|=10),this.editorWidth!=e.scrollDOM.clientWidth&&(i.lineWrapping&&(a=!0),this.editorWidth=e.scrollDOM.clientWidth,l|=8);let d=e.scrollDOM.scrollTop*this.scaleY;this.scrollTop!=d&&(this.scrollAnchorHeight=-1,this.scrollTop=d),this.scrolledToBottom=kv(e.scrollDOM);let f=(this.printing?vw:Ow)(t,this.paddingTop),p=f.top-this.pixelViewport.top,g=f.bottom-this.pixelViewport.bottom;this.pixelViewport=f;let m=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(m!=this.inView&&(this.inView=m,m&&(a=!0)),!this.inView&&!this.scrollTarget)return 0;let O=o.width;if(this.contentDOMWidth==O&&this.editorHeight==e.scrollDOM.clientHeight||(this.contentDOMWidth=o.width,this.editorHeight=e.scrollDOM.clientHeight,l|=8),a){let t=e.docView.measureVisibleLineHeights(this.viewport);if(i.mustRefreshForHeights(t)&&(s=!0),s||i.lineWrapping&&Math.abs(O-this.contentDOMWidth)>i.charWidth){let{lineHeight:n,charWidth:o,textHeight:a}=e.docView.measureTextSize();s=n>0&&i.refresh(r,n,o,a,O/o,t),s&&(e.docView.minWidth=0,l|=8)}p>0&&g>0?h=Math.max(p,g):p<0&&g<0&&(h=Math.min(p,g)),i.heightChanged=!1;for(let n of this.viewports){let r=n.from==this.viewport.from?t:e.docView.measureVisibleLineHeights(n);this.heightMap=(s?hw.empty().applyChanges(this.stateDeco,tm.empty,this.heightOracle,[new cb(0,0,0,e.state.doc.length)]):this.heightMap).updateHeight(i,0,s,new sw(n.from,r))}i.heightChanged&&(l|=2)}let v=!this.viewportIsAppropriate(this.viewport,h)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return v&&(2&l&&(l|=this.updateScaler()),this.viewport=this.getViewport(h,this.scrollTarget),l|=this.updateForViewport()),(2&l||v)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(s?[]:this.lineGaps,e)),l|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),l}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,t){let n=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),i=this.heightMap,r=this.heightOracle,{visibleTop:s,visibleBottom:o}=this,a=new kw(i.lineAt(s-1e3*n,aw.ByHeight,r,0,0).from,i.lineAt(o+1e3*(1-n),aw.ByHeight,r,0,0).to);if(t){let{head:e}=t.range;if(e<a.from||e>a.to){let n,s=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),o=i.lineAt(e,aw.ByPos,r,0,0);n="center"==t.y?(o.top+o.bottom)/2-s/2:"start"==t.y||"nearest"==t.y&&e<a.from?o.top:o.bottom-s,a=new kw(i.lineAt(n-500,aw.ByHeight,r,0,0).from,i.lineAt(n+s+500,aw.ByHeight,r,0,0).to)}}return a}mapViewport(e,t){let n=t.mapPos(e.from,-1),i=t.mapPos(e.to,1);return new kw(this.heightMap.lineAt(n,aw.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(i,aw.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate(e){let{from:t,to:n}=e,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(!this.inView)return!0;let{top:r}=this.heightMap.lineAt(t,aw.ByPos,this.heightOracle,0,0),{bottom:s}=this.heightMap.lineAt(n,aw.ByPos,this.heightOracle,0,0),{visibleTop:o,visibleBottom:a}=this;return(0==t||r<=o-Math.max(10,Math.min(-i,250)))&&(n==this.state.doc.length||s>=a+Math.max(10,Math.min(i,250)))&&r>o-2e3&&s<a+2e3}mapLineGaps(e,t){if(!e.length||t.empty)return e;let n=[];for(let i of e)t.touchesRange(i.from,i.to)||n.push(new yw(t.mapPos(i.from),t.mapPos(i.to),i.size));return n}ensureLineGaps(e,t){let n=this.heightOracle.lineWrapping,i=n?1e4:2e3,r=i>>1,s=i<<1;if(this.defaultTextDirection!=gy.LTR&&!n)return[];let o=[],a=(i,s,l,h)=>{if(s-i<r)return;let c=this.state.selection.main,u=[c.from];c.empty||u.push(c.to);for(let e of u)if(e>i&&e<s)return a(i,e-10,l,h),void a(e+10,s,l,h);let d=function(e,t){for(let n of e)if(t(n))return n;return}(e,(e=>e.from>=l.from&&e.to<=l.to&&Math.abs(e.from-i)<r&&Math.abs(e.to-s)<r&&!u.some((t=>e.from<t&&e.to>t))));if(!d){if(s<l.to&&t&&n&&t.visibleRanges.some((e=>e.from<=s&&e.to>=s))){let e=t.moveToLineBoundary(Im.cursor(s),!1,!0).head;e>i&&(s=e)}d=new yw(i,s,this.gapSize(l,i,s,h))}o.push(d)},l=e=>{if(e.length<s||e.type!=sy.Text)return;let t=function(e,t,n){let i=[],r=e,s=0;AO.spans(n,e,t,{span(){},point(e,t){e>r&&(i.push({from:r,to:e}),s+=e-r),r=t}},20),r<t&&(i.push({from:r,to:t}),s+=t-r);return{total:s,ranges:i}}(e.from,e.to,this.stateDeco);if(t.total<s)return;let r,o,l=this.scrollTarget?this.scrollTarget.range.head:null;if(n){let n,s,a=i/this.heightOracle.lineLength*this.heightOracle.lineHeight;if(null!=l){let i=xw(t,l),r=((this.visibleBottom-this.visibleTop)/2+a)/e.height;n=i-r,s=i+r}else n=(this.visibleTop-e.top-a)/e.height,s=(this.visibleBottom-e.top+a)/e.height;r=Sw(t,n),o=Sw(t,s)}else{let e,n,s=t.total*this.heightOracle.charWidth,a=i*this.heightOracle.charWidth;if(null!=l){let i=xw(t,l),r=((this.pixelViewport.right-this.pixelViewport.left)/2+a)/s;e=i-r,n=i+r}else e=(this.pixelViewport.left-a)/s,n=(this.pixelViewport.right+a)/s;r=Sw(t,e),o=Sw(t,n)}r>e.from&&a(e.from,r,e,t),o<e.to&&a(o,e.to,e,t)};for(let h of this.viewportLines)Array.isArray(h.type)?h.type.forEach(l):l(h);return o}gapSize(e,t,n,i){let r=xw(i,n)-xw(i,t);return this.heightOracle.lineWrapping?e.height*r:i.total*this.heightOracle.charWidth*r}updateLineGaps(e){yw.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=oy.set(e.map((e=>e.draw(this,this.heightOracle.lineWrapping)))))}computeVisibleRanges(){let e=this.stateDeco;this.lineGaps.length&&(e=e.concat(this.lineGapDeco));let t=[];AO.spans(e,this.viewport.from,this.viewport.to,{span(e,n){t.push({from:e,to:n})},point(){}},20);let n=t.length!=this.visibleRanges.length||this.visibleRanges.some(((e,n)=>e.from!=t[n].from||e.to!=t[n].to));return this.visibleRanges=t,n?4:0}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find((t=>t.from<=e&&t.to>=e))||Pw(this.heightMap.lineAt(e,aw.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(e){return e>=this.viewportLines[0].top&&e<=this.viewportLines[this.viewportLines.length-1].bottom&&this.viewportLines.find((t=>t.top<=e&&t.bottom>=e))||Pw(this.heightMap.lineAt(this.scaler.fromDOM(e),aw.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(e){let t=this.lineBlockAtHeight(e+8);return t.from>=this.viewport.from||this.viewportLines[0].top-e>200?t:this.viewportLines[0]}elementAtHeight(e){return Pw(this.heightMap.blockAt(this.scaler.fromDOM(e),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class kw{constructor(e,t){this.from=e,this.to=t}}function Sw(e,t){let{total:n,ranges:i}=e;if(t<=0)return i[0].from;if(t>=1)return i[i.length-1].to;let r=Math.floor(n*t);for(let s=0;;s++){let{from:e,to:t}=i[s],n=t-e;if(r<=n)return e+r;r-=n}}function xw(e,t){let n=0;for(let{from:i,to:r}of e.ranges){if(t<=r){n+=t-i;break}n+=r-i}return n/e.total}const Tw={toDOM:e=>e,fromDOM:e=>e,scale:1,eq(e){return e==this}};class _w{constructor(e,t,n){let i=0,r=0,s=0;this.viewports=n.map((n=>{let{from:r,to:s}=n,o=t.lineAt(r,aw.ByPos,e,0,0).top,a=t.lineAt(s,aw.ByPos,e,0,0).bottom;return i+=a-o,{from:r,to:s,top:o,bottom:a,domTop:0,domBottom:0}})),this.scale=(7e6-i)/(t.height-i);for(let o of this.viewports)o.domTop=s+(o.top-r)*this.scale,s=o.domBottom=o.domTop+(o.bottom-o.top),r=o.bottom}toDOM(e){for(let t=0,n=0,i=0;;t++){let r=t<this.viewports.length?this.viewports[t]:null;if(!r||e<r.top)return i+(e-n)*this.scale;if(e<=r.bottom)return r.domTop+(e-r.top);n=r.bottom,i=r.domBottom}}fromDOM(e){for(let t=0,n=0,i=0;;t++){let r=t<this.viewports.length?this.viewports[t]:null;if(!r||e<r.domTop)return n+(e-i)/this.scale;if(e<=r.domBottom)return r.top+(e-r.domTop);n=r.bottom,i=r.domBottom}}eq(e){return e instanceof _w&&(this.scale==e.scale&&this.viewports.length==e.viewports.length&&this.viewports.every(((t,n)=>t.from==e.viewports[n].from&&t.to==e.viewports[n].to)))}}function Pw(e,t){if(1==t.scale)return e;let n=t.toDOM(e.top),i=t.toDOM(e.bottom);return new ow(e.from,e.length,n,i-n,Array.isArray(e._content)?e._content.map((e=>Pw(e,t))):e._content)}const Cw=Lm.define({combine:e=>e.join(" ")}),Ew=Lm.define({combine:e=>e.indexOf(!0)>-1}),Qw=YO.newName(),Aw=YO.newName(),Rw=YO.newName(),Nw={"&light":"."+Aw,"&dark":"."+Rw};function Iw(e,t,n){return new YO(t,{finish:t=>/&/.test(t)?t.replace(/&\w*/,(t=>{if("&"==t)return e;if(!n||!n[t])throw new RangeError("Unsupported selector: ".concat(t));return n[t]})):e+" "+t})}const Dw=Iw("."+Qw,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",minHeight:"100%",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#444"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},".cm-iso":{unicodeBidi:"isolate"},".cm-announced":{position:"fixed",top:"-10000px"},"@media print":{".cm-announced":{display:"none"}},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",insetInlineStart:0,zIndex:200},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",borderRight:"1px solid #ddd"},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top"},".cm-highlightSpace:before":{content:"attr(data-display)",position:"absolute",pointerEvents:"none",color:"#888"},".cm-highlightTab":{backgroundImage:'url(\'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>\')',backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},Nw),Mw="\uffff";class Lw{constructor(e,t){this.points=e,this.text="",this.lineSeparator=t.facet(TO.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=Mw}readRange(e,t){if(!e)return this;let n=e.parentNode;for(let i=e;;){this.findPointBefore(n,i);let e=this.text.length;this.readNode(i);let r=i.nextSibling;if(r==t)break;let s=Pv.get(i),o=Pv.get(r);(s&&o?s.breakAfter:(s?s.breakAfter:hv(i))||hv(r)&&("BR"!=i.nodeName||i.cmIgnore)&&this.text.length>e)&&this.lineBreak(),i=r}return this.findPointBefore(n,t),this}readTextNode(e){let t=e.nodeValue;for(let n of this.points)n.node==e&&(n.pos=this.text.length+Math.min(n.offset,t.length));for(let n=0,i=this.lineSeparator?null:/\r\n?|\n/g;;){let r,s=-1,o=1;if(this.lineSeparator?(s=t.indexOf(this.lineSeparator,n),o=this.lineSeparator.length):(r=i.exec(t))&&(s=r.index,o=r[0].length),this.append(t.slice(n,s<0?t.length:s)),s<0)break;if(this.lineBreak(),o>1)for(let t of this.points)t.node==e&&t.pos>this.text.length&&(t.pos-=o-1);n=s+o}}readNode(e){if(e.cmIgnore)return;let t=Pv.get(e),n=t&&t.overrideDOMText;if(null!=n){this.findPointInside(e,n.length);for(let e=n.iter();!e.next().done;)e.lineBreak?this.lineBreak():this.append(e.value)}else 3==e.nodeType?this.readTextNode(e):"BR"==e.nodeName?e.nextSibling&&this.lineBreak():1==e.nodeType&&this.readRange(e.firstChild,null)}findPointBefore(e,t){for(let n of this.points)n.node==e&&e.childNodes[n.offset]==t&&(n.pos=this.text.length)}findPointInside(e,t){for(let n of this.points)(3==e.nodeType?n.node==e:e.contains(n.node))&&(n.pos=this.text.length+($w(e,n.node,n.offset)?t:0))}}function $w(e,t,n){for(;;){if(!t||n<uv(t))return!1;if(t==e)return!0;n=lv(t)+1,t=t.parentNode}}class Uw{constructor(e,t){this.node=e,this.offset=t,this.pos=-1}}class qw{constructor(e,t,n,i){this.typeOver=i,this.bounds=null,this.text="",this.domChanged=t>-1;let{impreciseHead:r,impreciseAnchor:s}=e.docView;if(e.state.readOnly&&t>-1)this.newSel=null;else if(t>-1&&(this.bounds=e.docView.domBoundsAround(t,n,0))){let t=r||s?[]:function(e){let t=[];if(e.root.activeElement!=e.contentDOM)return t;let{anchorNode:n,anchorOffset:i,focusNode:r,focusOffset:s}=e.observer.selectionRange;n&&(t.push(new Uw(n,i)),r==n&&s==i||t.push(new Uw(r,s)));return t}(e),n=new Lw(t,e.state);n.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=n.text,this.newSel=function(e,t){if(0==e.length)return null;let n=e[0].pos,i=2==e.length?e[1].pos:n;return n>-1&&i>-1?Im.single(n+t,i+t):null}(t,this.bounds.from)}else{let t=e.observer.selectionRange,n=r&&r.node==t.focusNode&&r.offset==t.focusOffset||!rv(e.contentDOM,t.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(t.focusNode,t.focusOffset),i=s&&s.node==t.anchorNode&&s.offset==t.anchorOffset||!rv(e.contentDOM,t.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(t.anchorNode,t.anchorOffset),o=e.viewport;if((jv.ios||jv.chrome)&&e.state.selection.main.empty&&n!=i&&(o.from>0||o.to<e.state.doc.length)){let t=Math.min(n,i),r=Math.max(n,i),s=o.from-t,a=o.to-r;0!=s&&1!=s&&0!=t||0!=a&&-1!=a&&r!=e.state.doc.length||(n=0,i=e.state.doc.length)}this.newSel=Im.single(i,n)}}}function Vw(e,t){let n,{newSel:i}=t,r=e.state.selection.main,s=e.inputState.lastKeyTime>Date.now()-100?e.inputState.lastKeyCode:-1;if(t.bounds){let{from:i,to:o}=t.bounds,a=r.from,l=null;(8===s||jv.android&&t.text.length<o-i)&&(a=r.to,l="end");let h=function(e,t,n,i){let r=Math.min(e.length,t.length),s=0;for(;s<r&&e.charCodeAt(s)==t.charCodeAt(s);)s++;if(s==r&&e.length==t.length)return null;let o=e.length,a=t.length;for(;o>0&&a>0&&e.charCodeAt(o-1)==t.charCodeAt(a-1);)o--,a--;if("end"==i){n-=o+Math.max(0,s-Math.min(o,a))-s}if(o<s&&e.length<t.length){s-=n<=s&&n>=o?s-n:0,a=s+(a-o),o=s}else if(a<s){s-=n<=s&&n>=a?s-n:0,o=s+(o-a),a=s}return{from:s,toA:o,toB:a}}(e.state.doc.sliceString(i,o,Mw),t.text,a-i,l);h&&(jv.chrome&&13==s&&h.toB==h.from+2&&t.text.slice(h.from,h.toB)==Mw+Mw&&h.toB--,n={from:i+h.from,to:i+h.toA,insert:tm.of(t.text.slice(h.from,h.toB).split(Mw))})}else i&&(!e.hasFocus&&e.state.facet(Gy)||i.main.eq(r))&&(i=null);if(!n&&!i)return!1;if(!n&&t.typeOver&&!r.empty&&i&&i.main.empty?n={from:r.from,to:r.to,insert:e.state.doc.slice(r.from,r.to)}:n&&n.from>=r.from&&n.to<=r.to&&(n.from!=r.from||n.to!=r.to)&&r.to-r.from-(n.to-n.from)<=4?n={from:r.from,to:r.to,insert:e.state.doc.slice(r.from,n.from).append(n.insert).append(e.state.doc.slice(n.to,r.to))}:(jv.mac||jv.android)&&n&&n.from==n.to&&n.from==r.head-1&&/^\. ?$/.test(n.insert.toString())&&"off"==e.contentDOM.getAttribute("autocorrect")?(i&&2==n.insert.length&&(i=Im.single(i.main.anchor-1,i.main.head-1)),n={from:r.from,to:r.to,insert:tm.of([" "])}):jv.chrome&&n&&n.from==n.to&&n.from==r.head&&"\n "==n.insert.toString()&&e.lineWrapping&&(i&&(i=Im.single(i.main.anchor-1,i.main.head-1)),n={from:r.from,to:r.to,insert:tm.of([" "])}),n)return zw(e,n,i,s);if(i&&!i.main.eq(r)){let t=!1,n="select";return e.inputState.lastSelectionTime>Date.now()-50&&("select"==e.inputState.lastSelectionOrigin&&(t=!0),n=e.inputState.lastSelectionOrigin),e.dispatch({selection:i,scrollIntoView:t,userEvent:n}),!0}return!1}function zw(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1;if(jv.ios&&e.inputState.flushIOSKey(t))return!0;let r=e.state.selection.main;if(jv.android&&(t.to==r.to&&(t.from==r.from||t.from==r.from-1&&" "==e.state.sliceDoc(t.from,r.from))&&1==t.insert.length&&2==t.insert.lines&&bv(e.contentDOM,"Enter",13)||(t.from==r.from-1&&t.to==r.to&&0==t.insert.length||8==i&&t.insert.length<t.to-t.from&&t.to>r.head)&&bv(e.contentDOM,"Backspace",8)||t.from==r.from&&t.to==r.to+1&&0==t.insert.length&&bv(e.contentDOM,"Delete",46)))return!0;let s,o=t.insert.toString();e.inputState.composing>=0&&e.inputState.composing++;let a=()=>s||(s=function(e,t,n){let i,r=e.state,s=r.selection.main;if(t.from>=s.from&&t.to<=s.to&&t.to-t.from>=(s.to-s.from)/3&&(!n||n.main.empty&&n.main.from==t.from+t.insert.length)&&e.inputState.composing<0){let n=s.from<t.from?r.sliceDoc(s.from,t.from):"",o=s.to>t.to?r.sliceDoc(t.to,s.to):"";i=r.replaceSelection(e.state.toText(n+t.insert.sliceString(0,void 0,e.state.lineBreak)+o))}else{let o=r.changes(t),a=n&&n.main.to<=o.newLength?n.main:void 0;if(r.selection.ranges.length>1&&e.inputState.composing>=0&&t.to<=s.to&&t.to>=s.to-10){let l,h=e.state.sliceDoc(t.from,t.to),c=n&&pb(e,n.main.head);if(c){let e=t.insert.length-(t.to-t.from);l={from:c.from,to:c.to-e}}else l=e.state.doc.lineAt(s.head);let u=s.to-t.to,d=s.to-s.from;i=r.changeByRange((n=>{if(n.from==s.from&&n.to==s.to)return{changes:o,range:a||n.map(o)};let i=n.to-u,c=i-h.length;if(n.to-n.from!=d||e.state.sliceDoc(c,i)!=h||n.to>=l.from&&n.from<=l.to)return{range:n};let f=r.changes({from:c,to:i,insert:t.insert}),p=n.to-s.to;return{changes:f,range:a?Im.range(Math.max(0,a.anchor+p),Math.max(0,a.head+p)):n.map(f)}}))}else i={changes:o,selection:a&&r.selection.replaceRange(a)}}let o="input.type";(e.composing||e.inputState.compositionPendingChange&&e.inputState.compositionEndedAt>Date.now()-50)&&(e.inputState.compositionPendingChange=!1,o+=".compose",e.inputState.compositionFirstChange&&(o+=".start",e.inputState.compositionFirstChange=!1));return r.update(i,{userEvent:o,scrollIntoView:!0})}(e,t,n));return e.state.facet(qy).some((n=>n(e,t.from,t.to,o,a)))||e.dispatch(a()),!0}const jw={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},Bw=jv.ie&&jv.ie_version<=11;class Fw{constructor(e){this.view=e,this.active=!1,this.editContext=null,this.selectionRange=new gv,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.printQuery=null,this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver((t=>{for(let e of t)this.queue.push(e);(jv.ie&&jv.ie_version<=11||jv.ios&&e.composing)&&t.some((e=>"childList"==e.type&&e.removedNodes.length||"characterData"==e.type&&e.oldValue.length>e.target.nodeValue.length))?this.flushSoon():this.flush()})),!window.EditContext||!1===e.constructor.EDIT_CONTEXT||jv.chrome&&jv.chrome_version<126||(this.editContext=new Yw(e),e.state.facet(Gy)&&(e.contentDOM.editContext=this.editContext.editContext)),Bw&&(this.onCharData=e=>{this.queue.push({target:e.target,type:"characterData",oldValue:e.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),window.matchMedia&&(this.printQuery=window.matchMedia("print")),"function"==typeof ResizeObserver&&(this.resizeScroll=new ResizeObserver((()=>{var e;(null===(e=this.view.docView)||void 0===e?void 0:e.lastUpdate)<Date.now()-75&&this.onResize()})),this.resizeScroll.observe(e.scrollDOM)),this.addWindowListeners(this.win=e.win),this.start(),"function"==typeof IntersectionObserver&&(this.intersection=new IntersectionObserver((e=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),e.length>0&&e[e.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))}),{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver((e=>{e.length>0&&e[e.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))}),{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(e){this.view.inputState.runHandlers("scroll",e),this.intersecting&&this.view.measure()}onScroll(e){this.intersecting&&this.flush(!1),this.editContext&&this.view.requestMeasure(this.editContext.measureReq),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout((()=>{this.resizeTimeout=-1,this.view.requestMeasure()}),50))}onPrint(e){("change"!=e.type||e.matches)&&(this.view.viewState.printing=!0,this.view.measure(),setTimeout((()=>{this.view.viewState.printing=!1,this.view.requestMeasure()}),500))}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some(((t,n)=>t!=e[n])))){this.gapIntersection.disconnect();for(let t of e)this.gapIntersection.observe(t);this.gaps=e}}onSelectionChange(e){let t=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:n}=this,i=this.selectionRange;if(n.state.facet(Gy)?n.root.activeElement!=this.dom:!sv(n.dom,i))return;let r=i.anchorNode&&n.docView.nearest(i.anchorNode);r&&r.ignoreEvent(e)?t||(this.selectionChanged=!1):(jv.ie&&jv.ie_version<=11||jv.android&&jv.chrome)&&!n.state.selection.main.empty&&i.focusNode&&av(i.focusNode,i.focusOffset,i.anchorNode,i.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:e}=this,t=iv(e.root);if(!t)return!1;let n=jv.safari&&11==e.root.nodeType&&function(e){let t=e.activeElement;for(;t&&t.shadowRoot;)t=t.shadowRoot.activeElement;return t}(this.dom.ownerDocument)==this.dom&&function(e,t){if(t.getComposedRanges){let n=t.getComposedRanges(e.root)[0];if(n)return Xw(e,n)}let n=null;function i(e){e.preventDefault(),e.stopImmediatePropagation(),n=e.getTargetRanges()[0]}return e.contentDOM.addEventListener("beforeinput",i,!0),e.dom.ownerDocument.execCommand("indent"),e.contentDOM.removeEventListener("beforeinput",i,!0),n?Xw(e,n):null}(this.view,t)||t;if(!n||this.selectionRange.eq(n))return!1;let i=sv(this.dom,n);return i&&!this.selectionChanged&&e.inputState.lastFocusTime>Date.now()-200&&e.inputState.lastTouchTime<Date.now()-300&&function(e,t){let n=t.focusNode,i=t.focusOffset;if(!n||t.anchorNode!=n||t.anchorOffset!=i)return!1;for(i=Math.min(i,uv(n));;)if(i){if(1!=n.nodeType)return!1;let e=n.childNodes[i-1];"false"==e.contentEditable?i--:(n=e,i=uv(n))}else{if(n==e)return!0;i=lv(n),n=n.parentNode}}(this.dom,n)?(this.view.inputState.lastFocusTime=0,e.docView.updateSelection(),!1):(this.selectionRange.setRange(n),i&&(this.selectionChanged=!0),!0)}setSelectionRange(e,t){this.selectionRange.set(e.node,e.offset,t.node,t.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,t=null;for(let n=this.dom;n;)if(1==n.nodeType)!t&&e<this.scrollTargets.length&&this.scrollTargets[e]==n?e++:t||(t=this.scrollTargets.slice(0,e)),t&&t.push(n),n=n.assignedSlot||n.parentNode;else{if(11!=n.nodeType)break;n=n.host}if(e<this.scrollTargets.length&&!t&&(t=this.scrollTargets.slice(0,e)),t){for(let e of this.scrollTargets)e.removeEventListener("scroll",this.onScroll);for(let e of this.scrollTargets=t)e.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,jw),Bw&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),Bw&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,t){var n;if(!this.delayedAndroidKey){let e=()=>{let e=this.delayedAndroidKey;if(e){this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=e.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&e.force&&bv(this.dom,e.key,e.keyCode)}};this.flushingAndroidKey=this.view.win.requestAnimationFrame(e)}this.delayedAndroidKey&&"Enter"!=e||(this.delayedAndroidKey={key:e,keyCode:t,force:this.lastChange<Date.now()-50||!!(null===(n=this.delayedAndroidKey)||void 0===n?void 0:n.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame((()=>{this.delayedFlush=-1,this.flush()})))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}processRecords(){let e=this.pendingRecords();e.length&&(this.queue=[]);let t=-1,n=-1,i=!1;for(let r of e){let e=this.readMutation(r);e&&(e.typeOver&&(i=!0),-1==t?({from:t,to:n}=e):(t=Math.min(e.from,t),n=Math.max(e.to,n)))}return{from:t,to:n,typeOver:i}}readChange(){let{from:e,to:t,typeOver:n}=this.processRecords(),i=this.selectionChanged&&sv(this.dom,this.selectionRange);if(e<0&&!i)return null;e>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let r=new qw(this.view,e,t,n);return this.view.docView.domChanged={newSel:r.newSel?r.newSel.main:null},r}flush(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;e&&this.readSelectionRange();let t=this.readChange();if(!t)return this.view.requestMeasure(),!1;let n=this.view.state,i=Vw(this.view,t);return this.view.state==n&&(t.domChanged||t.newSel&&!t.newSel.main.eq(this.view.state.selection.main))&&this.view.update([]),i}readMutation(e){let t=this.view.docView.nearest(e.target);if(!t||t.ignoreMutation(e))return null;if(t.markDirty("attributes"==e.type),"attributes"==e.type&&(t.flags|=4),"childList"==e.type){let n=Ww(t,e.previousSibling||e.target.previousSibling,-1),i=Ww(t,e.nextSibling||e.target.nextSibling,1);return{from:n?t.posAfter(n):t.posAtStart,to:i?t.posBefore(i):t.posAtEnd,typeOver:!1}}return"characterData"==e.type?{from:t.posAtStart,to:t.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}setWindow(e){e!=this.win&&(this.removeWindowListeners(this.win),this.win=e,this.addWindowListeners(this.win))}addWindowListeners(e){e.addEventListener("resize",this.onResize),this.printQuery?this.printQuery.addEventListener("change",this.onPrint):e.addEventListener("beforeprint",this.onPrint),e.addEventListener("scroll",this.onScroll),e.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(e){e.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onResize),this.printQuery?this.printQuery.removeEventListener("change",this.onPrint):e.removeEventListener("beforeprint",this.onPrint),e.document.removeEventListener("selectionchange",this.onSelectionChange)}update(e){this.editContext&&(this.editContext.update(e),e.startState.facet(Gy)!=e.state.facet(Gy)&&(e.view.contentDOM.editContext=e.state.facet(Gy)?this.editContext.editContext:null))}destroy(){var e,t,n;this.stop(),null===(e=this.intersection)||void 0===e||e.disconnect(),null===(t=this.gapIntersection)||void 0===t||t.disconnect(),null===(n=this.resizeScroll)||void 0===n||n.disconnect();for(let i of this.scrollTargets)i.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey),this.editContext&&(this.view.contentDOM.editContext=null,this.editContext.destroy())}}function Ww(e,t,n){for(;t;){let i=Pv.get(t);if(i&&i.parent==e)return i;let r=t.parentNode;t=r!=e.dom?r:n>0?t.nextSibling:t.previousSibling}return null}function Xw(e,t){let n=t.startContainer,i=t.startOffset,r=t.endContainer,s=t.endOffset,o=e.docView.domAtPos(e.state.selection.main.anchor);return av(o.node,o.offset,r,s)&&([n,i,r,s]=[r,s,n,i]),{anchorNode:n,anchorOffset:i,focusNode:r,focusOffset:s}}class Yw{constructor(e){this.from=0,this.to=0,this.pendingContextChange=null,this.handlers=Object.create(null),this.resetRange(e.state);let t=this.editContext=new window.EditContext({text:e.state.doc.sliceString(this.from,this.to),selectionStart:this.toContextPos(Math.max(this.from,Math.min(this.to,e.state.selection.main.anchor))),selectionEnd:this.toContextPos(e.state.selection.main.head)});this.handlers.textupdate=t=>{let{anchor:n}=e.state.selection.main,i={from:this.toEditorPos(t.updateRangeStart),to:this.toEditorPos(t.updateRangeEnd),insert:tm.of(t.text.split("\n"))};i.from==this.from&&n<this.from?i.from=n:i.to==this.to&&n>this.to&&(i.to=n),(i.from!=i.to||i.insert.length)&&(this.pendingContextChange=i,zw(e,i,Im.single(this.toEditorPos(t.selectionStart),this.toEditorPos(t.selectionEnd))),this.pendingContextChange&&(this.revertPending(e.state),this.setSelection(e.state)))},this.handlers.characterboundsupdate=n=>{let i=[],r=null;for(let t=this.toEditorPos(n.rangeStart),s=this.toEditorPos(n.rangeEnd);t<s;t++){let n=e.coordsForChar(t);r=n&&new DOMRect(n.left,n.top,n.right-n.left,n.bottom-n.top)||r||new DOMRect,i.push(r)}t.updateCharacterBounds(n.rangeStart,i)},this.handlers.textformatupdate=t=>{let n=[];for(let e of t.getTextFormats()){let t=e.underlineStyle,i=e.underlineThickness;if("None"!=t&&"None"!=i){let r="text-decoration: underline ".concat("Dashed"==t?"dashed ":"Squiggle"==t?"wavy ":"").concat("Thin"==i?1:2,"px");n.push(oy.mark({attributes:{style:r}}).range(this.toEditorPos(e.rangeStart),this.toEditorPos(e.rangeEnd)))}}e.dispatch({effects:Xy.of(oy.set(n))})},this.handlers.compositionstart=()=>{e.inputState.composing<0&&(e.inputState.composing=0,e.inputState.compositionFirstChange=!0)},this.handlers.compositionend=()=>{e.inputState.composing=-1,e.inputState.compositionFirstChange=null};for(let n in this.handlers)t.addEventListener(n,this.handlers[n]);this.measureReq={read:e=>{this.editContext.updateControlBounds(e.contentDOM.getBoundingClientRect());let t=iv(e.root);t&&t.rangeCount&&this.editContext.updateSelectionBounds(t.getRangeAt(0).getBoundingClientRect())}}}applyEdits(e){let t=0,n=!1,i=this.pendingContextChange;return e.changes.iterChanges(((r,s,o,a,l)=>{if(n)return;let h=l.length-(s-r);if(i&&s>=i.to){if(i.from==r&&i.to==s&&i.insert.eq(l))return i=this.pendingContextChange=null,t+=h,void(this.to+=h);i=null,this.revertPending(e.state)}if(r+=t,(s+=t)<=this.from)this.from+=h,this.to+=h;else if(r<this.to){if(r<this.from||s>this.to||this.to-this.from+l.length>3e4)return void(n=!0);this.editContext.updateText(this.toContextPos(r),this.toContextPos(s),l.toString()),this.to+=h}t+=h})),i&&!n&&this.revertPending(e.state),!n}update(e){let t=this.pendingContextChange;this.applyEdits(e)&&this.rangeIsValid(e.state)?(e.docChanged||e.selectionSet||t)&&this.setSelection(e.state):(this.pendingContextChange=null,this.resetRange(e.state),this.editContext.updateText(0,this.editContext.text.length,e.state.doc.sliceString(this.from,this.to)),this.setSelection(e.state)),(e.geometryChanged||e.docChanged||e.selectionSet)&&e.view.requestMeasure(this.measureReq)}resetRange(e){let{head:t}=e.selection.main;this.from=Math.max(0,t-1e4),this.to=Math.min(e.doc.length,t+1e4)}revertPending(e){let t=this.pendingContextChange;this.pendingContextChange=null,this.editContext.updateText(this.toContextPos(t.from),this.toContextPos(t.from+t.insert.length),e.doc.sliceString(t.from,t.to))}setSelection(e){let{main:t}=e.selection,n=this.toContextPos(Math.max(this.from,Math.min(this.to,t.anchor))),i=this.toContextPos(t.head);this.editContext.selectionStart==n&&this.editContext.selectionEnd==i||this.editContext.updateSelection(n,i)}rangeIsValid(e){let{head:t}=e.selection.main;return!(this.from>0&&t-this.from<500||this.to<e.doc.length&&this.to-t<500||this.to-this.from>3e4)}toEditorPos(e){return e+this.from}toContextPos(e){return e-this.from}destroy(){for(let e in this.handlers)this.editContext.removeEventListener(e,this.handlers[e])}}class Gw{get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return this.inputState.composing>0}get compositionStarted(){return this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.className="cm-announced",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),e.parent&&e.parent.appendChild(this.dom);let{dispatch:t}=e;this.dispatchTransactions=e.dispatchTransactions||t&&(e=>e.forEach((e=>t(e,this))))||(e=>this.update(e)),this.dispatch=this.dispatch.bind(this),this._root=e.root||function(e){for(;e;){if(e&&(9==e.nodeType||11==e.nodeType&&e.host))return e;e=e.assignedSlot||e.parentNode}return null}(e.parent)||document,this.viewState=new ww(e.state||TO.create(e)),e.scrollTo&&e.scrollTo.is(Wy)&&(this.viewState.scrollTarget=e.scrollTo.value.clip(this.viewState.state)),this.plugins=this.state.facet(Hy).map((e=>new Jy(e)));for(let n of this.plugins)n.update(this);this.observer=new Fw(this),this.inputState=new Eb(this),this.inputState.ensureHandlers(this.plugins),this.docView=new db(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure()}dispatch(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];let i=1==t.length&&t[0]instanceof pO?t:1==t.length&&Array.isArray(t[0])?t[0]:[this.state.update(...t)];this.dispatchTransactions(i,this)}update(e){if(0!=this.updateState)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let t,n=!1,i=!1,r=this.state;for(let u of e){if(u.startState!=r)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");r=u.state}if(this.destroyed)return void(this.viewState.state=r);let s=this.hasFocus,o=0,a=null;e.some((e=>e.annotation(Jb)))?(this.inputState.notifiedFocused=s,o=1):s!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=s,a=ew(r,s),a||(o=1));let l=this.observer.delayedAndroidKey,h=null;if(l?(this.observer.clearDelayedAndroidKey(),h=this.observer.readChange(),(h&&!this.state.doc.eq(r.doc)||!this.state.selection.eq(r.selection))&&(h=null)):this.observer.clear(),r.facet(TO.phrases)!=this.state.facet(TO.phrases))return this.setState(r);t=ub.create(this,r,e),t.flags|=o;let c=this.viewState.scrollTarget;try{this.updateState=2;for(let t of e){if(c&&(c=c.map(t.changes)),t.scrollIntoView){let{main:e}=t.state.selection;c=new Fy(e.empty?e:Im.cursor(e.head,e.head>e.anchor?-1:1))}for(let e of t.effects)e.is(Wy)&&(c=e.value.clip(this.state))}this.viewState.update(t,c),this.bidiCache=Kw.update(this.bidiCache,t.changes),t.empty||(this.updatePlugins(t),this.inputState.update(t)),n=this.docView.update(t),this.state.facet(hb)!=this.styleModules&&this.mountStyles(),i=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(n,e.some((e=>e.isUserEvent("select.pointer"))))}finally{this.updateState=0}if(t.startState.facet(Cw)!=t.state.facet(Cw)&&(this.viewState.mustMeasureContent=!0),(n||i||c||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),n&&this.docViewUpdate(),!t.empty)for(let u of this.state.facet(Uy))try{u(t)}catch(_F){Yy(this.state,_F,"update listener")}(a||h)&&Promise.resolve().then((()=>{a&&this.state==a.startState&&this.dispatch(a),h&&!Vw(this,h)&&l.force&&bv(this.contentDOM,l.key,l.keyCode)}))}setState(e){if(0!=this.updateState)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed)return void(this.viewState.state=e);this.updateState=2;let t=this.hasFocus;try{for(let e of this.plugins)e.destroy(this);this.viewState=new ww(e),this.plugins=e.facet(Hy).map((e=>new Jy(e))),this.pluginMap.clear();for(let e of this.plugins)e.update(this);this.docView.destroy(),this.docView=new db(this),this.inputState.ensureHandlers(this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}t&&this.focus(),this.requestMeasure()}updatePlugins(e){let t=e.startState.facet(Hy),n=e.state.facet(Hy);if(t!=n){let i=[];for(let r of n){let n=t.indexOf(r);if(n<0)i.push(new Jy(r));else{let t=this.plugins[n];t.mustUpdate=e,i.push(t)}}for(let t of this.plugins)t.mustUpdate!=e&&t.destroy(this);this.plugins=i,this.pluginMap.clear()}else for(let i of this.plugins)i.mustUpdate=e;for(let i=0;i<this.plugins.length;i++)this.plugins[i].update(this);t!=n&&this.inputState.ensureHandlers(this.plugins)}docViewUpdate(){for(let e of this.plugins){let t=e.value;if(t&&t.docViewUpdate)try{t.docViewUpdate(this)}catch(_F){Yy(this.state,_F,"doc view update listener")}}}measure(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(this.destroyed)return;if(this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.observer.delayedAndroidKey)return this.measureScheduled=-1,void this.requestMeasure();this.measureScheduled=0,e&&this.observer.forceFlush();let t=null,n=this.scrollDOM,i=n.scrollTop*this.scaleY,{scrollAnchorPos:r,scrollAnchorHeight:s}=this.viewState;Math.abs(i-this.viewState.scrollTop)>1&&(s=-1),this.viewState.scrollAnchorHeight=-1;try{for(let e=0;;e++){if(s<0)if(kv(n))r=-1,s=this.viewState.heightMap.height;else{let e=this.viewState.scrollAnchorAt(i);r=e.from,s=e.top}this.updateState=1;let o=this.viewState.measure(this);if(!o&&!this.measureRequests.length&&null==this.viewState.scrollTarget)break;if(e>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let a=[];4&o||([this.measureRequests,a]=[a,this.measureRequests]);let l=a.map((e=>{try{return e.read(this)}catch(_F){return Yy(this.state,_F),Hw}})),h=ub.create(this,this.state,[]),c=!1;h.flags|=o,t?t.flags|=o:t=h,this.updateState=2,h.empty||(this.updatePlugins(h),this.inputState.update(h),this.updateAttrs(),c=this.docView.update(h),c&&this.docViewUpdate());for(let e=0;e<a.length;e++)if(l[e]!=Hw)try{let t=a[e];t.write&&t.write(l[e],this)}catch(_F){Yy(this.state,_F)}if(c&&this.docView.updateSelection(!0),!h.viewportChanged&&0==this.measureRequests.length){if(this.viewState.editorHeight){if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,s=-1;continue}{let e=(r<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(r).top)-s;if(e>1||e<-1){i+=e,n.scrollTop=i/this.scaleY,s=-1;continue}}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(t&&!t.empty)for(let o of this.state.facet(Uy))o(t)}get themeClasses(){return Qw+" "+(this.state.facet(Ew)?Rw:Aw)+" "+this.state.facet(Cw)}updateAttrs(){let e=Jw(this,eb,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),t={spellcheck:"false",autocorrect:"off",autocapitalize:"off",translate:"no",contenteditable:this.state.facet(Gy)?"true":"false",class:"cm-content",style:"".concat(jv.tabSize,": ").concat(this.state.tabSize),role:"textbox","aria-multiline":"true"};this.state.readOnly&&(t["aria-readonly"]="true"),Jw(this,tb,t);let n=this.observer.ignore((()=>{let n=ey(this.contentDOM,this.contentAttrs,t),i=ey(this.dom,this.editorAttrs,e);return n||i}));return this.editorAttrs=e,this.contentAttrs=t,n}showAnnouncements(e){let t=!0;for(let n of e)for(let e of n.effects)if(e.is(Gw.announce)){t&&(this.announceDOM.textContent=""),t=!1,this.announceDOM.appendChild(document.createElement("div")).textContent=e.value}}mountStyles(){this.styleModules=this.state.facet(hb);let e=this.state.facet(Gw.cspNonce);YO.mount(this.root,this.styleModules.concat(Dw).reverse(),e?{nonce:e}:void 0)}readMeasured(){if(2==this.updateState)throw new Error("Reading the editor layout isn't allowed during an update");0==this.updateState&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame((()=>this.measure()))),e){if(this.measureRequests.indexOf(e)>-1)return;if(null!=e.key)for(let t=0;t<this.measureRequests.length;t++)if(this.measureRequests[t].key===e.key)return void(this.measureRequests[t]=e);this.measureRequests.push(e)}}plugin(e){let t=this.pluginMap.get(e);return(void 0===t||t&&t.spec!=e)&&this.pluginMap.set(e,t=this.plugins.find((t=>t.spec==e))||null),t&&t.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}get scaleX(){return this.viewState.scaleX}get scaleY(){return this.viewState.scaleY}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,t,n){return Cb(this,e,_b(this,e,t,n))}moveByGroup(e,t){return Cb(this,e,_b(this,e,t,(t=>function(e,t,n){let i=e.state.charCategorizer(t),r=i(n);return e=>{let t=i(e);return r==wO.Space&&(r=t),r==t}}(this,e.head,t))))}visualLineSide(e,t){let n=this.bidiSpans(e),i=this.textDirectionAt(e.from),r=n[t?n.length-1:0];return Im.cursor(r.side(t,i)+e.from,r.forward(!t,i)?1:-1)}moveToLineBoundary(e,t){return function(e,t,n,i){let r=Tb(e,t.head),s=i&&r.type==sy.Text&&(e.lineWrapping||r.widgetLineBreaks)?e.coordsAtPos(t.assoc<0&&t.head>r.from?t.head-1:t.head):null;if(s){let t=e.dom.getBoundingClientRect(),i=e.textDirectionAt(r.from),o=e.posAtCoords({x:n==(i==gy.LTR)?t.right-1:t.left+1,y:(s.top+s.bottom)/2});if(null!=o)return Im.cursor(o,n?-1:1)}return Im.cursor(n?r.to:r.from,n?-1:1)}(this,e,t,!(arguments.length>2&&void 0!==arguments[2])||arguments[2])}moveVertically(e,t,n){return Cb(this,e,function(e,t,n,i){let r=t.head,s=n?1:-1;if(r==(n?e.state.doc.length:0))return Im.cursor(r,t.assoc);let o,a=t.goalColumn,l=e.contentDOM.getBoundingClientRect(),h=e.coordsAtPos(r,t.assoc||-1),c=e.documentTop;if(h)null==a&&(a=h.left-l.left),o=s<0?h.top:h.bottom;else{let t=e.viewState.lineBlockAt(r);null==a&&(a=Math.min(l.right-l.left,e.defaultCharacterWidth*(r-t.from))),o=(s<0?t.top:t.bottom)+c}let u=l.left+a,d=null!==i&&void 0!==i?i:e.viewState.heightOracle.textHeight>>1;for(let f=0;;f+=10){let t=o+(d+f)*s,n=Sb(e,{x:u,y:t},!1,s);if(t<l.top||t>l.bottom||(s<0?n<r:n>r)){let i=e.docView.coordsForChar(n),r=!i||t<i.top?-1:1;return Im.cursor(n,r,void 0,a)}}}(this,e,t,n))}domAtPos(e){return this.docView.domAtPos(e)}posAtDOM(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.docView.posFromDOM(e,t)}posAtCoords(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return this.readMeasured(),Sb(this,e,t)}coordsAtPos(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this.readMeasured();let n=this.docView.coordsAt(e,t);if(!n||n.left==n.right)return n;let i=this.state.doc.lineAt(e),r=this.bidiSpans(i);return dv(n,r[Ty.find(r,e-i.from,-1,t)].dir==gy.LTR==t>0)}coordsForChar(e){return this.readMeasured(),this.docView.coordsForChar(e)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet(zy)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>Zw)return Ay(e.length);let t,n=this.textDirectionAt(e.from);for(let r of this.bidiCache)if(r.from==e.from&&r.dir==n&&(r.fresh||_y(r.isolates,t=ob(this,e))))return r.order;t||(t=ob(this,e));let i=Qy(e.text,n,t);return this.bidiCache.push(new Kw(e.from,e.to,n,t,!0,i)),i}get hasFocus(){var e;return(this.dom.ownerDocument.hasFocus()||jv.safari&&(null===(e=this.inputState)||void 0===e?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore((()=>{vv(this.contentDOM),this.docView.updateSelection()}))}setRoot(e){this._root!=e&&(this._root=e,this.observer.setWindow((9==e.nodeType?e:e.ownerDocument).defaultView||window),this.mountStyles())}destroy(){this.root.activeElement==this.contentDOM&&this.contentDOM.blur();for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.docView.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Wy.of(new Fy("number"==typeof e?Im.cursor(e):e,t.y,t.x,t.yMargin,t.xMargin))}scrollSnapshot(){let{scrollTop:e,scrollLeft:t}=this.scrollDOM,n=this.viewState.scrollAnchorAt(e);return Wy.of(new Fy(Im.cursor(n.from),"start","start",n.top-e,t,!0))}setTabFocusMode(e){null==e?this.inputState.tabFocusMode=this.inputState.tabFocusMode<0?0:-1:"boolean"==typeof e?this.inputState.tabFocusMode=e?0:-1:0!=this.inputState.tabFocusMode&&(this.inputState.tabFocusMode=Date.now()+e)}static domEventHandlers(e){return Ky.define((()=>({})),{eventHandlers:e})}static domEventObservers(e){return Ky.define((()=>({})),{eventObservers:e})}static theme(e,t){let n=YO.newName(),i=[Cw.of(n),hb.of(Iw(".".concat(n),e))];return t&&t.dark&&i.push(Ew.of(!0)),i}static baseTheme(e){return Zm.lowest(hb.of(Iw("."+Qw,e,Nw)))}static findFromDOM(e){var t;let n=e.querySelector(".cm-content"),i=n&&Pv.get(n)||Pv.get(e);return(null===(t=null===i||void 0===i?void 0:i.rootView)||void 0===t?void 0:t.view)||null}}Gw.styleModule=hb,Gw.inputHandler=qy,Gw.scrollHandler=By,Gw.focusChangeEffect=Vy,Gw.perLineTextDirection=zy,Gw.exceptionSink=$y,Gw.updateListener=Uy,Gw.editable=Gy,Gw.mouseSelectionStyle=Ly,Gw.dragMovesSelection=My,Gw.clickAddsSelectionRange=Dy,Gw.decorations=nb,Gw.outerDecorations=ib,Gw.atomicRanges=rb,Gw.bidiIsolatedRanges=sb,Gw.scrollMargins=ab,Gw.darkTheme=Ew,Gw.cspNonce=Lm.define({combine:e=>e.length?e[0]:""}),Gw.contentAttributes=tb,Gw.editorAttributes=eb,Gw.lineWrapping=Gw.contentAttributes.of({class:"cm-lineWrapping"}),Gw.announce=fO.define();const Zw=4096,Hw={};class Kw{constructor(e,t,n,i,r,s){this.from=e,this.to=t,this.dir=n,this.isolates=i,this.fresh=r,this.order=s}static update(e,t){if(t.empty&&!e.some((e=>e.fresh)))return e;let n=[],i=e.length?e[e.length-1].dir:gy.LTR;for(let r=Math.max(0,e.length-10);r<e.length;r++){let s=e[r];s.dir!=i||t.touchesRange(s.from,s.to)||n.push(new Kw(t.mapPos(s.from,1),t.mapPos(s.to,-1),s.dir,s.isolates,!1,s.order))}return n}}function Jw(e,t,n){for(let i=e.state.facet(t),r=i.length-1;r>=0;r--){let t=i[r],s="function"==typeof t?t(e):t;s&&Hv(s,n)}return n}const ek=jv.mac?"mac":jv.windows?"win":jv.linux?"linux":"key";function tk(e,t,n){return t.altKey&&(e="Alt-"+e),t.ctrlKey&&(e="Ctrl-"+e),t.metaKey&&(e="Meta-"+e),!1!==n&&t.shiftKey&&(e="Shift-"+e),e}const nk=Zm.default(Gw.domEventHandlers({keydown:(e,t)=>hk(sk(t.state),e,t,"editor")})),ik=Lm.define({enables:nk}),rk=new WeakMap;function sk(e){let t=e.facet(ik),n=rk.get(t);return n||rk.set(t,n=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ek,n=Object.create(null),i=Object.create(null),r=(e,t)=>{let n=i[e];if(null==n)i[e]=t;else if(n!=t)throw new Error("Key binding "+e+" is used both as a regular binding and as a multi-stroke prefix")},s=(e,i,s,o,a)=>{var l,h;let c=n[e]||(n[e]=Object.create(null)),u=i.split(/ (?!$)/).map((e=>function(e,t){const n=e.split(/-(?!$)/);let i,r,s,o,a=n[n.length-1];"Space"==a&&(a=" ");for(let l=0;l<n.length-1;++l){const e=n[l];if(/^(cmd|meta|m)$/i.test(e))o=!0;else if(/^a(lt)?$/i.test(e))i=!0;else if(/^(c|ctrl|control)$/i.test(e))r=!0;else if(/^s(hift)?$/i.test(e))s=!0;else{if(!/^mod$/i.test(e))throw new Error("Unrecognized modifier name: "+e);"mac"==t?o=!0:r=!0}}return i&&(a="Alt-"+a),r&&(a="Ctrl-"+a),o&&(a="Meta-"+a),s&&(a="Shift-"+a),a}(e,t)));for(let t=1;t<u.length;t++){let n=u.slice(0,t).join(" ");r(n,!0),c[n]||(c[n]={preventDefault:!0,stopPropagation:!1,run:[t=>{let i=ok={view:t,prefix:n,scope:e};return setTimeout((()=>{ok==i&&(ok=null)}),ak),!0}]})}let d=u.join(" ");r(d,!1);let f=c[d]||(c[d]={preventDefault:!1,stopPropagation:!1,run:(null===(h=null===(l=c._any)||void 0===l?void 0:l.run)||void 0===h?void 0:h.slice())||[]});s&&f.run.push(s),o&&(f.preventDefault=!0),a&&(f.stopPropagation=!0)};for(let o of e){let e=o.scope?o.scope.split(" "):["editor"];if(o.any)for(let t of e){let e=n[t]||(n[t]=Object.create(null));e._any||(e._any={preventDefault:!1,stopPropagation:!1,run:[]});let{any:i}=o;for(let t in e)e[t].run.push((e=>i(e,lk)))}let i=o[t]||o.key;if(i)for(let t of e)s(t,i,o.run,o.preventDefault,o.stopPropagation),o.shift&&s(t,"Shift-"+i,o.shift,o.preventDefault,o.stopPropagation)}return n}(t.reduce(((e,t)=>e.concat(t)),[]))),n}let ok=null;const ak=4e3;let lk=null;function hk(e,t,n,i){lk=t;let r=function(e){var t=!(JO&&e.metaKey&&e.shiftKey&&!e.ctrlKey&&!e.altKey||ev&&e.shiftKey&&e.key&&1==e.key.length||"Unidentified"==e.key)&&e.key||(e.shiftKey?KO:HO)[e.keyCode]||e.key||"Unidentified";return"Esc"==t&&(t="Escape"),"Del"==t&&(t="Delete"),"Left"==t&&(t="ArrowLeft"),"Up"==t&&(t="ArrowUp"),"Right"==t&&(t="ArrowRight"),"Down"==t&&(t="ArrowDown"),t}(t),s=km(bm(r,0))==r.length&&" "!=r,o="",a=!1,l=!1,h=!1;ok&&ok.view==n&&ok.scope==i&&(o=ok.prefix+" ",Ib.indexOf(t.keyCode)<0&&(l=!0,ok=null));let c,u,d=new Set,f=e=>{if(e){for(let t of e.run)if(!d.has(t)&&(d.add(t),t(n)))return e.stopPropagation&&(h=!0),!0;e.preventDefault&&(e.stopPropagation&&(h=!0),l=!0)}return!1},p=e[i];return p&&(f(p[o+tk(r,t,!s)])?a=!0:s&&(t.altKey||t.metaKey||t.ctrlKey)&&!(jv.windows&&t.ctrlKey&&t.altKey)&&(c=HO[t.keyCode])&&c!=r?(f(p[o+tk(c,t,!0)])||t.shiftKey&&(u=KO[t.keyCode])!=r&&u!=c&&f(p[o+tk(u,t,!1)]))&&(a=!0):s&&t.shiftKey&&f(p[o+tk(r,t,!0)])&&(a=!0),!a&&f(p._any)&&(a=!0)),l&&(a=!0),a&&h&&t.stopPropagation(),lk=null,a}class ck{constructor(e,t,n,i,r){this.className=e,this.left=t,this.top=n,this.width=i,this.height=r}draw(){let e=document.createElement("div");return e.className=this.className,this.adjust(e),e}update(e,t){return t.className==this.className&&(this.adjust(e),!0)}adjust(e){e.style.left=this.left+"px",e.style.top=this.top+"px",null!=this.width&&(e.style.width=this.width+"px"),e.style.height=this.height+"px"}eq(e){return this.left==e.left&&this.top==e.top&&this.width==e.width&&this.height==e.height&&this.className==e.className}static forRange(e,t,n){if(n.empty){let i=e.coordsAtPos(n.head,n.assoc||1);if(!i)return[];let r=uk(e);return[new ck(t,i.left-r.left,i.top-r.top,null,i.bottom-i.top)]}return function(e,t,n){if(n.to<=e.viewport.from||n.from>=e.viewport.to)return[];let i=Math.max(n.from,e.viewport.from),r=Math.min(n.to,e.viewport.to),s=e.textDirection==gy.LTR,o=e.contentDOM,a=o.getBoundingClientRect(),l=uk(e),h=o.querySelector(".cm-line"),c=h&&window.getComputedStyle(h),u=a.left+(c?parseInt(c.paddingLeft)+Math.min(0,parseInt(c.textIndent)):0),d=a.right-(c?parseInt(c.paddingRight):0),f=Tb(e,i),p=Tb(e,r),g=f.type==sy.Text?f:null,m=p.type==sy.Text?p:null;g&&(e.lineWrapping||f.widgetLineBreaks)&&(g=dk(e,i,1,g));m&&(e.lineWrapping||p.widgetLineBreaks)&&(m=dk(e,r,-1,m));if(g&&m&&g.from==m.from&&g.to==m.to)return v(y(n.from,n.to,g));{let t=g?y(n.from,null,g):b(f,!1),i=m?y(null,n.to,m):b(p,!0),r=[];return(g||f).to<(m||p).from-(g&&m?1:0)||f.widgetLineBreaks>1&&t.bottom+e.defaultLineHeight/2<i.top?r.push(O(u,t.bottom,d,i.top)):t.bottom<i.top&&e.elementAtHeight((t.bottom+i.top)/2).type==sy.Text&&(t.bottom=i.top=(t.bottom+i.top)/2),v(t).concat(r).concat(v(i))}function O(e,n,i,r){return new ck(t,e-l.left,n-l.top-.01,i-e,r-n+.01)}function v(e){let{top:t,bottom:n,horizontal:i}=e,r=[];for(let s=0;s<i.length;s+=2)r.push(O(i[s],t,i[s+1],n));return r}function y(t,n,i){let r=1e9,o=-1e9,a=[];function l(t,n,l,h,c){let f=e.coordsAtPos(t,t==i.to?-2:2),p=e.coordsAtPos(l,l==i.from?2:-2);f&&p&&(r=Math.min(f.top,p.top,r),o=Math.max(f.bottom,p.bottom,o),c==gy.LTR?a.push(s&&n?u:f.left,s&&h?d:p.right):a.push(!s&&h?u:p.left,!s&&n?d:f.right))}let h=null!==t&&void 0!==t?t:i.from,c=null!==n&&void 0!==n?n:i.to;for(let s of e.visibleRanges)if(s.to>h&&s.from<c)for(let i=Math.max(s.from,h),r=Math.min(s.to,c);;){let s=e.state.doc.lineAt(i);for(let o of e.bidiSpans(s)){let e=o.from+s.from,a=o.to+s.from;if(e>=r)break;a>i&&l(Math.max(e,i),null==t&&e<=h,Math.min(a,r),null==n&&a>=c,o.dir)}if(i=s.to+1,i>=r)break}return 0==a.length&&l(h,null==t,c,null==n,e.textDirection),{top:r,bottom:o,horizontal:a}}function b(e,t){let n=a.top+(t?e.top:e.bottom);return{top:n,bottom:n,horizontal:[]}}}(e,t,n)}}function uk(e){let t=e.scrollDOM.getBoundingClientRect();return{left:(e.textDirection==gy.LTR?t.left:t.right-e.scrollDOM.clientWidth*e.scaleX)-e.scrollDOM.scrollLeft*e.scaleX,top:t.top-e.scrollDOM.scrollTop*e.scaleY}}function dk(e,t,n,i){let r=e.coordsAtPos(t,2*n);if(!r)return i;let s=e.dom.getBoundingClientRect(),o=(r.top+r.bottom)/2,a=e.posAtCoords({x:s.left+1,y:o}),l=e.posAtCoords({x:s.right-1,y:o});return null==a||null==l?i:{from:Math.max(i.from,Math.min(a,l)),to:Math.min(i.to,Math.max(a,l))}}class fk{constructor(e,t){this.view=e,this.layer=t,this.drawn=[],this.scaleX=1,this.scaleY=1,this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=e.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),t.above&&this.dom.classList.add("cm-layer-above"),t.class&&this.dom.classList.add(t.class),this.scale(),this.dom.setAttribute("aria-hidden","true"),this.setOrder(e.state),e.requestMeasure(this.measureReq),t.mount&&t.mount(this.dom,e)}update(e){e.startState.facet(pk)!=e.state.facet(pk)&&this.setOrder(e.state),(this.layer.update(e,this.dom)||e.geometryChanged)&&(this.scale(),e.view.requestMeasure(this.measureReq))}docViewUpdate(e){!1!==this.layer.updateOnDocViewUpdate&&e.requestMeasure(this.measureReq)}setOrder(e){let t=0,n=e.facet(pk);for(;t<n.length&&n[t]!=this.layer;)t++;this.dom.style.zIndex=String((this.layer.above?150:-1)-t)}measure(){return this.layer.markers(this.view)}scale(){let{scaleX:e,scaleY:t}=this.view;e==this.scaleX&&t==this.scaleY||(this.scaleX=e,this.scaleY=t,this.dom.style.transform="scale(".concat(1/e,", ").concat(1/t,")"))}draw(e){if(e.length!=this.drawn.length||e.some(((e,t)=>!function(e,t){return e.constructor==t.constructor&&e.eq(t)}(e,this.drawn[t])))){let t=this.dom.firstChild,n=0;for(let i of e)i.update&&t&&i.constructor&&this.drawn[n].constructor&&i.update(t,this.drawn[n])?(t=t.nextSibling,n++):this.dom.insertBefore(i.draw(),t);for(;t;){let e=t.nextSibling;t.remove(),t=e}this.drawn=e}}destroy(){this.layer.destroy&&this.layer.destroy(this.dom,this.view),this.dom.remove()}}const pk=Lm.define();function gk(e){return[Ky.define((t=>new fk(t,e))),pk.of(e)]}const mk=!jv.ios,Ok=Lm.define({combine:e=>_O(e,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(e,t)=>Math.min(e,t),drawRangeCursor:(e,t)=>e||t})});function vk(e){return e.startState.facet(Ok)!=e.state.facet(Ok)}const yk=gk({above:!0,markers(e){let{state:t}=e,n=t.facet(Ok),i=[];for(let r of t.selection.ranges){let s=r==t.selection.main;if(r.empty?!s||mk:n.drawRangeCursor){let t=s?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",n=r.empty?r:Im.cursor(r.head,r.head>r.anchor?-1:1);for(let r of ck.forRange(e,t,n))i.push(r)}}return i},update(e,t){e.transactions.some((e=>e.selection))&&(t.style.animationName="cm-blink"==t.style.animationName?"cm-blink2":"cm-blink");let n=vk(e);return n&&bk(e.state,t),e.docChanged||e.selectionSet||n},mount(e,t){bk(t.state,e)},class:"cm-cursorLayer"});function bk(e,t){t.style.animationDuration=e.facet(Ok).cursorBlinkRate+"ms"}const wk=gk({above:!1,markers:e=>e.state.selection.ranges.map((t=>t.empty?[]:ck.forRange(e,"cm-selectionBackground",t))).reduce(((e,t)=>e.concat(t))),update:(e,t)=>e.docChanged||e.selectionSet||e.viewportChanged||vk(e),class:"cm-selectionLayer"}),kk={".cm-line":{"& ::selection, &::selection":{backgroundColor:"transparent !important"}},".cm-content":{"& :focus":{caretColor:"initial !important","&::selection, & ::selection":{backgroundColor:"Highlight !important"}}}};mk&&(kk[".cm-line"].caretColor=kk[".cm-content"].caretColor="transparent !important");const xk=Zm.highest(Gw.theme(kk)),Tk=fO.define({map:(e,t)=>null==e?null:t.mapPos(e)}),_k=Bm.define({create:()=>null,update:(e,t)=>(null!=e&&(e=t.changes.mapPos(e)),t.effects.reduce(((e,t)=>t.is(Tk)?t.value:e),e))}),Pk=Ky.fromClass(class{constructor(e){this.view=e,this.cursor=null,this.measureReq={read:this.readPos.bind(this),write:this.drawCursor.bind(this)}}update(e){var t;let n=e.state.field(_k);null==n?null!=this.cursor&&(null===(t=this.cursor)||void 0===t||t.remove(),this.cursor=null):(this.cursor||(this.cursor=this.view.scrollDOM.appendChild(document.createElement("div")),this.cursor.className="cm-dropCursor"),(e.startState.field(_k)!=n||e.docChanged||e.geometryChanged)&&this.view.requestMeasure(this.measureReq))}readPos(){let{view:e}=this,t=e.state.field(_k),n=null!=t&&e.coordsAtPos(t);if(!n)return null;let i=e.scrollDOM.getBoundingClientRect();return{left:n.left-i.left+e.scrollDOM.scrollLeft*e.scaleX,top:n.top-i.top+e.scrollDOM.scrollTop*e.scaleY,height:n.bottom-n.top}}drawCursor(e){if(this.cursor){let{scaleX:t,scaleY:n}=this.view;e?(this.cursor.style.left=e.left/t+"px",this.cursor.style.top=e.top/n+"px",this.cursor.style.height=e.height/n+"px"):this.cursor.style.left="-100000px"}}destroy(){this.cursor&&this.cursor.remove()}setDropPos(e){this.view.state.field(_k)!=e&&this.view.dispatch({effects:Tk.of(e)})}},{eventObservers:{dragover(e){this.setDropPos(this.view.posAtCoords({x:e.clientX,y:e.clientY}))},dragleave(e){e.target!=this.view.contentDOM&&this.view.contentDOM.contains(e.relatedTarget)||this.setDropPos(null)},dragend(){this.setDropPos(null)},drop(){this.setDropPos(null)}}});function Ck(e,t,n,i,r){t.lastIndex=0;for(let s,o=e.iterRange(n,i),a=n;!o.next().done;a+=o.value.length)if(!o.lineBreak)for(;s=t.exec(o.value);)r(a+s.index,s)}class Ek{constructor(e){const{regexp:t,decoration:n,decorate:i,boundary:r,maxLength:s=1e3}=e;if(!t.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=t,i)this.addMatch=(e,t,n,r)=>i(r,n,n+e[0].length,e,t);else if("function"==typeof n)this.addMatch=(e,t,i,r)=>{let s=n(e,t,i);s&&r(i,i+e[0].length,s)};else{if(!n)throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.addMatch=(e,t,i,r)=>r(i,i+e[0].length,n)}this.boundary=r,this.maxLength=s}createDeco(e){let t=new RO,n=t.add.bind(t);for(let{from:i,to:r}of function(e,t){let n=e.visibleRanges;if(1==n.length&&n[0].from==e.viewport.from&&n[0].to==e.viewport.to)return n;let i=[];for(let{from:r,to:s}of n)r=Math.max(e.state.doc.lineAt(r).from,r-t),s=Math.min(e.state.doc.lineAt(s).to,s+t),i.length&&i[i.length-1].to>=r?i[i.length-1].to=s:i.push({from:r,to:s});return i}(e,this.maxLength))Ck(e.state.doc,this.regexp,i,r,((t,i)=>this.addMatch(i,e,t,n)));return t.finish()}updateDeco(e,t){let n=1e9,i=-1;return e.docChanged&&e.changes.iterChanges(((t,r,s,o)=>{o>e.view.viewport.from&&s<e.view.viewport.to&&(n=Math.min(s,n),i=Math.max(o,i))})),e.viewportChanged||i-n>1e3?this.createDeco(e.view):i>-1?this.updateRange(e.view,t.map(e.changes),n,i):t}updateRange(e,t,n,i){for(let r of e.visibleRanges){let s=Math.max(r.from,n),o=Math.min(r.to,i);if(o>s){let n=e.state.doc.lineAt(s),i=n.to<o?e.state.doc.lineAt(o):n,a=Math.max(r.from,n.from),l=Math.min(r.to,i.to);if(this.boundary){for(;s>n.from;s--)if(this.boundary.test(n.text[s-1-n.from])){a=s;break}for(;o<i.to;o++)if(this.boundary.test(i.text[o-i.from])){l=o;break}}let h,c=[],u=(e,t,n)=>c.push(n.range(e,t));if(n==i)for(this.regexp.lastIndex=a-n.from;(h=this.regexp.exec(n.text))&&h.index<l-n.from;)this.addMatch(h,e,h.index+n.from,u);else Ck(e.state.doc,this.regexp,a,l,((t,n)=>this.addMatch(n,e,t,u)));t=t.update({filterFrom:a,filterTo:l,filter:(e,t)=>e<a||t>l,add:c})}}return t}}const Qk=null!=/x/.unicode?"gu":"g",Ak=new RegExp("[\0-\b\n-\x1f\x7f-\x9f\xad\u061c\u200b\u200e\u200f\u2028\u2029\u202d\u202e\u2066\u2067\u2069\ufeff\ufff9-\ufffc]",Qk),Rk={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};let Nk=null;const Ik=Lm.define({combine(e){let t=_O(e,{render:null,specialChars:Ak,addSpecialChars:null});return(t.replaceTabs=!function(){var e;if(null==Nk&&"undefined"!=typeof document&&document.body){let t=document.body.style;Nk=null!=(null!==(e=t.tabSize)&&void 0!==e?e:t.MozTabSize)}return Nk||!1}())&&(t.specialChars=new RegExp("\t|"+t.specialChars.source,Qk)),t.addSpecialChars&&(t.specialChars=new RegExp(t.specialChars.source+"|"+t.addSpecialChars.source,Qk)),t}});let Dk=null;class Mk extends ry{constructor(e,t){super(),this.options=e,this.code=t}eq(e){return e.code==this.code}toDOM(e){let t=function(e){return e>=32?"\u2022":10==e?"\u2424":String.fromCharCode(9216+e)}(this.code),n=e.state.phrase("Control character")+" "+(Rk[this.code]||"0x"+this.code.toString(16)),i=this.options.render&&this.options.render(this.code,n,t);if(i)return i;let r=document.createElement("span");return r.textContent=t,r.title=n,r.setAttribute("aria-label",n),r.className="cm-specialChar",r}ignoreEvent(){return!1}}class Lk extends ry{constructor(e){super(),this.width=e}eq(e){return e.width==this.width}toDOM(){let e=document.createElement("span");return e.textContent="\t",e.className="cm-tab",e.style.width=this.width+"px",e}ignoreEvent(){return!1}}const $k=oy.line({class:"cm-activeLine"}),Uk=Ky.fromClass(class{constructor(e){this.decorations=this.getDeco(e)}update(e){(e.docChanged||e.selectionSet)&&(this.decorations=this.getDeco(e.view))}getDeco(e){let t=-1,n=[];for(let i of e.state.selection.ranges){let r=e.lineBlockAt(i.head);r.from>t&&(n.push($k.range(r.from)),t=r.from)}return oy.set(n)}},{decorations:e=>e.decorations});class qk extends ry{constructor(e){super(),this.content=e}toDOM(){let e=document.createElement("span");return e.className="cm-placeholder",e.style.pointerEvents="none",e.appendChild("string"==typeof this.content?document.createTextNode(this.content):this.content),"string"==typeof this.content?e.setAttribute("aria-label","placeholder "+this.content):e.setAttribute("aria-hidden","true"),e}coordsAt(e){let t=e.firstChild?ov(e.firstChild):[];if(!t.length)return null;let n=window.getComputedStyle(e.parentNode),i=dv(t[0],"rtl"!=n.direction),r=parseInt(n.lineHeight);return i.bottom-i.top>1.5*r?{left:i.left,right:i.right,top:i.top,bottom:i.top+r}:i}ignoreEvent(){return!1}}const Vk=2e3;function zk(e,t){let n=e.posAtCoords({x:t.clientX,y:t.clientY},!1),i=e.state.doc.lineAt(n),r=n-i.from,s=r>Vk?-1:r==i.length?function(e,t){let n=e.coordsAtPos(e.viewport.from);return n?Math.round(Math.abs((n.left-t)/e.defaultCharacterWidth)):-1}(e,t.clientX):jO(i.text,e.state.tabSize,n-i.from);return{line:i.number,col:s,off:r}}function jk(e,t){let n=zk(e,t),i=e.state.selection;return n?{update(e){if(e.docChanged){let t=e.changes.mapPos(e.startState.doc.line(n.line).from),r=e.state.doc.lineAt(t);n={line:r.number,col:n.col,off:Math.min(n.off,r.length)},i=i.map(e.changes)}},get(t,r,s){let o=zk(e,t);if(!o)return i;let a=function(e,t,n){let i=Math.min(t.line,n.line),r=Math.max(t.line,n.line),s=[];if(t.off>Vk||n.off>Vk||t.col<0||n.col<0){let o=Math.min(t.off,n.off),a=Math.max(t.off,n.off);for(let t=i;t<=r;t++){let n=e.doc.line(t);n.length<=a&&s.push(Im.range(n.from+o,n.to+a))}}else{let o=Math.min(t.col,n.col),a=Math.max(t.col,n.col);for(let t=i;t<=r;t++){let n=e.doc.line(t),i=BO(n.text,o,e.tabSize,!0);if(i<0)s.push(Im.cursor(n.to));else{let t=BO(n.text,a,e.tabSize);s.push(Im.range(n.from+i,n.from+t))}}}return s}(e.state,n,o);return a.length?s?Im.create(a.concat(i.ranges)):Im.create(a):i}}:null}const Bk={Alt:[18,e=>!!e.altKey],Control:[17,e=>!!e.ctrlKey],Shift:[16,e=>!!e.shiftKey],Meta:[91,e=>!!e.metaKey]},Fk={style:"cursor: crosshair"};const Wk="-10000px";class Xk{constructor(e,t,n,i){this.facet=t,this.createTooltipView=n,this.removeTooltipView=i,this.input=e.state.facet(t),this.tooltips=this.input.filter((e=>e));let r=null;this.tooltipViews=this.tooltips.map((e=>r=n(e,r)))}update(e,t){var n;let i=e.state.facet(this.facet),r=i.filter((e=>e));if(i===this.input){for(let t of this.tooltipViews)t.update&&t.update(e);return!1}let s=[],o=t?[]:null;for(let a=0;a<r.length;a++){let n=r[a],i=-1;if(n){for(let e=0;e<this.tooltips.length;e++){let t=this.tooltips[e];t&&t.create==n.create&&(i=e)}if(i<0)s[a]=this.createTooltipView(n,a?s[a-1]:null),o&&(o[a]=!!n.above);else{let n=s[a]=this.tooltipViews[i];o&&(o[a]=t[i]),n.update&&n.update(e)}}}for(let a of this.tooltipViews)s.indexOf(a)<0&&(this.removeTooltipView(a),null===(n=a.destroy)||void 0===n||n.call(a));return t&&(o.forEach(((e,n)=>t[n]=e)),t.length=o.length),this.input=i,this.tooltips=r,this.tooltipViews=s,!0}}function Yk(e){let{win:t}=e;return{top:0,left:0,bottom:t.innerHeight,right:t.innerWidth}}const Gk=Lm.define({combine:e=>{var t,n,i;return{position:jv.ios?"absolute":(null===(t=e.find((e=>e.position)))||void 0===t?void 0:t.position)||"fixed",parent:(null===(n=e.find((e=>e.parent)))||void 0===n?void 0:n.parent)||null,tooltipSpace:(null===(i=e.find((e=>e.tooltipSpace)))||void 0===i?void 0:i.tooltipSpace)||Yk}}}),Zk=new WeakMap,Hk=Ky.fromClass(class{constructor(e){this.view=e,this.above=[],this.inView=!0,this.madeAbsolute=!1,this.lastTransaction=0,this.measureTimeout=-1;let t=e.state.facet(Gk);this.position=t.position,this.parent=t.parent,this.classes=e.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.resizeObserver="function"==typeof ResizeObserver?new ResizeObserver((()=>this.measureSoon())):null,this.manager=new Xk(e,eS,((e,t)=>this.createTooltip(e,t)),(e=>{this.resizeObserver&&this.resizeObserver.unobserve(e.dom),e.dom.remove()})),this.above=this.manager.tooltips.map((e=>!!e.above)),this.intersectionObserver="function"==typeof IntersectionObserver?new IntersectionObserver((e=>{Date.now()>this.lastTransaction-50&&e.length>0&&e[e.length-1].intersectionRatio<1&&this.measureSoon()}),{threshold:[1]}):null,this.observeIntersection(),e.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let e of this.manager.tooltipViews)this.intersectionObserver.observe(e.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout((()=>{this.measureTimeout=-1,this.maybeMeasure()}),50))}update(e){e.transactions.length&&(this.lastTransaction=Date.now());let t=this.manager.update(e,this.above);t&&this.observeIntersection();let n=t||e.geometryChanged,i=e.state.facet(Gk);if(i.position!=this.position&&!this.madeAbsolute){this.position=i.position;for(let e of this.manager.tooltipViews)e.dom.style.position=this.position;n=!0}if(i.parent!=this.parent){this.parent&&this.container.remove(),this.parent=i.parent,this.createContainer();for(let e of this.manager.tooltipViews)this.container.appendChild(e.dom);n=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);n&&this.maybeMeasure()}createTooltip(e,t){let n=e.create(this.view),i=t?t.dom:null;if(n.dom.classList.add("cm-tooltip"),e.arrow&&!n.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let e=document.createElement("div");e.className="cm-tooltip-arrow",n.dom.appendChild(e)}return n.dom.style.position=this.position,n.dom.style.top=Wk,n.dom.style.left="0px",this.container.insertBefore(n.dom,i),n.mount&&n.mount(this.view),this.resizeObserver&&this.resizeObserver.observe(n.dom),n}destroy(){var e,t,n;this.view.win.removeEventListener("resize",this.measureSoon);for(let i of this.manager.tooltipViews)i.dom.remove(),null===(e=i.destroy)||void 0===e||e.call(i);this.parent&&this.container.remove(),null===(t=this.resizeObserver)||void 0===t||t.disconnect(),null===(n=this.intersectionObserver)||void 0===n||n.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let e=this.view.dom.getBoundingClientRect(),t=1,n=1,i=!1;if("fixed"==this.position&&this.manager.tooltipViews.length){let{dom:e}=this.manager.tooltipViews[0];if(jv.gecko)i=e.offsetParent!=this.container.ownerDocument.body;else if(e.style.top==Wk&&"0px"==e.style.left){let t=e.getBoundingClientRect();i=Math.abs(t.top+1e4)>1||Math.abs(t.left)>1}}if(i||"absolute"==this.position)if(this.parent){let e=this.parent.getBoundingClientRect();e.width&&e.height&&(t=e.width/this.parent.offsetWidth,n=e.height/this.parent.offsetHeight)}else({scaleX:t,scaleY:n}=this.view.viewState);return{editor:e,parent:this.parent?this.container.getBoundingClientRect():e,pos:this.manager.tooltips.map(((e,t)=>{let n=this.manager.tooltipViews[t];return n.getCoords?n.getCoords(e.pos):this.view.coordsAtPos(e.pos)})),size:this.manager.tooltipViews.map((e=>{let{dom:t}=e;return t.getBoundingClientRect()})),space:this.view.state.facet(Gk).tooltipSpace(this.view),scaleX:t,scaleY:n,makeAbsolute:i}}writeMeasure(e){var t;if(e.makeAbsolute){this.madeAbsolute=!0,this.position="absolute";for(let e of this.manager.tooltipViews)e.dom.style.position="absolute"}let{editor:n,space:i,scaleX:r,scaleY:s}=e,o=[];for(let a=0;a<this.manager.tooltips.length;a++){let l=this.manager.tooltips[a],h=this.manager.tooltipViews[a],{dom:c}=h,u=e.pos[a],d=e.size[a];if(!u||u.bottom<=Math.max(n.top,i.top)||u.top>=Math.min(n.bottom,i.bottom)||u.right<Math.max(n.left,i.left)-.1||u.left>Math.min(n.right,i.right)+.1){c.style.top=Wk;continue}let f=l.arrow?h.dom.querySelector(".cm-tooltip-arrow"):null,p=f?7:0,g=d.right-d.left,m=null!==(t=Zk.get(h))&&void 0!==t?t:d.bottom-d.top,O=h.offset||Jk,v=this.view.textDirection==gy.LTR,y=d.width>i.right-i.left?v?i.left:i.right-d.width:v?Math.min(u.left-(f?14:0)+O.x,i.right-g):Math.max(i.left,u.left-g+(f?14:0)-O.x),b=this.above[a];!l.strictSide&&(b?u.top-(d.bottom-d.top)-O.y<i.top:u.bottom+(d.bottom-d.top)+O.y>i.bottom)&&b==i.bottom-u.bottom>u.top-i.top&&(b=this.above[a]=!b);let w=(b?u.top-i.top:i.bottom-u.bottom)-p;if(w<m&&!1!==h.resize){if(w<this.view.defaultLineHeight){c.style.top=Wk;continue}Zk.set(h,m),c.style.height=(m=w)/s+"px"}else c.style.height&&(c.style.height="");let k=b?u.top-m-p-O.y:u.bottom+p+O.y,S=y+g;if(!0!==h.overlap)for(let e of o)e.left<S&&e.right>y&&e.top<k+m&&e.bottom>k&&(k=b?e.top-m-2-p:e.bottom+p+2);if("absolute"==this.position?(c.style.top=(k-e.parent.top)/s+"px",c.style.left=(y-e.parent.left)/r+"px"):(c.style.top=k/s+"px",c.style.left=y/r+"px"),f){let e=u.left+(v?O.x:-O.x)-(y+14-7);f.style.left=e/r+"px"}!0!==h.overlap&&o.push({left:y,top:k,right:S,bottom:k+m}),c.classList.toggle("cm-tooltip-above",b),c.classList.toggle("cm-tooltip-below",!b),h.positioned&&h.positioned(e.space)}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let e of this.manager.tooltipViews)e.dom.style.top=Wk}},{eventObservers:{scroll(){this.maybeMeasure()}}}),Kk=Gw.baseTheme({".cm-tooltip":{zIndex:100,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"".concat(7,"px"),width:"".concat(14,"px"),position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"".concat(7,"px solid transparent"),borderRight:"".concat(7,"px solid transparent")},".cm-tooltip-above &":{bottom:"-".concat(7,"px"),"&:before":{borderTop:"".concat(7,"px solid #bbb")},"&:after":{borderTop:"".concat(7,"px solid #f5f5f5"),bottom:"1px"}},".cm-tooltip-below &":{top:"-".concat(7,"px"),"&:before":{borderBottom:"".concat(7,"px solid #bbb")},"&:after":{borderBottom:"".concat(7,"px solid #f5f5f5"),top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),Jk={x:0,y:0},eS=Lm.define({enables:[Hk,Kk]}),tS=Lm.define({combine:e=>e.reduce(((e,t)=>e.concat(t)),[])});class nS{static create(e){return new nS(e)}constructor(e){this.view=e,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new Xk(e,tS,((e,t)=>this.createHostedView(e,t)),(e=>e.dom.remove()))}createHostedView(e,t){let n=e.create(this.view);return n.dom.classList.add("cm-tooltip-section"),this.dom.insertBefore(n.dom,t?t.dom.nextSibling:this.dom.firstChild),this.mounted&&n.mount&&n.mount(this.view),n}mount(e){for(let t of this.manager.tooltipViews)t.mount&&t.mount(e);this.mounted=!0}positioned(e){for(let t of this.manager.tooltipViews)t.positioned&&t.positioned(e)}update(e){this.manager.update(e)}destroy(){var e;for(let t of this.manager.tooltipViews)null===(e=t.destroy)||void 0===e||e.call(t)}passProp(e){let t;for(let n of this.manager.tooltipViews){let i=n[e];if(void 0!==i)if(void 0===t)t=i;else if(t!==i)return}return t}get offset(){return this.passProp("offset")}get getCoords(){return this.passProp("getCoords")}get overlap(){return this.passProp("overlap")}get resize(){return this.passProp("resize")}}const iS=eS.compute([tS],(e=>{let t=e.facet(tS);return 0===t.length?null:{pos:Math.min(...t.map((e=>e.pos))),end:Math.max(...t.map((e=>{var t;return null!==(t=e.end)&&void 0!==t?t:e.pos}))),create:nS.create,above:t[0].above,arrow:t.some((e=>e.arrow))}}));class rS{constructor(e,t,n,i,r){this.view=e,this.source=t,this.field=n,this.setHover=i,this.hoverTime=r,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:e.dom,time:0},this.checkHover=this.checkHover.bind(this),e.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),e.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout((()=>this.startHover()),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active.length)return;let e=Date.now()-this.lastMove.time;e<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-e):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{view:e,lastMove:t}=this,n=e.docView.nearest(t.target);if(!n)return;let i,r=1;if(n instanceof Wv)i=n.posAtStart;else{if(i=e.posAtCoords(t),null==i)return;let n=e.coordsAtPos(i);if(!n||t.y<n.top||t.y>n.bottom||t.x<n.left-e.defaultCharacterWidth||t.x>n.right+e.defaultCharacterWidth)return;let s=e.bidiSpans(e.state.doc.lineAt(i)).find((e=>e.from<=i&&e.to>=i)),o=s&&s.dir==gy.RTL?-1:1;r=t.x<n.left?-o:o}let s=this.source(e,i,r);if(null===s||void 0===s?void 0:s.then){let t=this.pending={pos:i};s.then((n=>{this.pending==t&&(this.pending=null,!n||Array.isArray(n)&&!n.length||e.dispatch({effects:this.setHover.of(Array.isArray(n)?n:[n])}))}),(t=>Yy(e.state,t,"hover tooltip")))}else!s||Array.isArray(s)&&!s.length||e.dispatch({effects:this.setHover.of(Array.isArray(s)?s:[s])})}get tooltip(){let e=this.view.plugin(Hk),t=e?e.manager.tooltips.findIndex((e=>e.create==nS.create)):-1;return t>-1?e.manager.tooltipViews[t]:null}mousemove(e){var t,n;this.lastMove={x:e.clientX,y:e.clientY,target:e.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let{active:i,tooltip:r}=this;if(i.length&&r&&!function(e,t){let n=e.getBoundingClientRect();return t.clientX>=n.left-sS&&t.clientX<=n.right+sS&&t.clientY>=n.top-sS&&t.clientY<=n.bottom+sS}(r.dom,e)||this.pending){let{pos:r}=i[0]||this.pending,s=null!==(n=null===(t=i[0])||void 0===t?void 0:t.end)&&void 0!==n?n:r;(r==s?this.view.posAtCoords(this.lastMove)==r:function(e,t,n,i,r){let s=e.scrollDOM.getBoundingClientRect(),o=e.documentTop+e.documentPadding.top+e.contentHeight;if(s.left>i||s.right<i||s.top>r||Math.min(s.bottom,o)<r)return!1;let a=e.posAtCoords({x:i,y:r},!1);return a>=t&&a<=n}(this.view,r,s,e.clientX,e.clientY))||(this.view.dispatch({effects:this.setHover.of([])}),this.pending=null)}}mouseleave(e){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1;let{active:t}=this;if(t.length){let{tooltip:t}=this;t&&t.dom.contains(e.relatedTarget)?this.watchTooltipLeave(t.dom):this.view.dispatch({effects:this.setHover.of([])})}}watchTooltipLeave(e){let t=n=>{e.removeEventListener("mouseleave",t),this.active.length&&!this.view.dom.contains(n.relatedTarget)&&this.view.dispatch({effects:this.setHover.of([])})};e.addEventListener("mouseleave",t)}destroy(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}const sS=4;function oS(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=fO.define(),i=Bm.define({create:()=>[],update(e,i){if(e.length&&(t.hideOnChange&&(i.docChanged||i.selection)?e=[]:t.hideOn&&(e=e.filter((e=>!t.hideOn(i,e)))),i.docChanged)){let t=[];for(let n of e){let e=i.changes.mapPos(n.pos,-1,xm.TrackDel);if(null!=e){let r=Object.assign(Object.create(null),n);r.pos=e,null!=r.end&&(r.end=i.changes.mapPos(r.end)),t.push(r)}}e=t}for(let t of i.effects)t.is(n)&&(e=t.value),t.is(lS)&&(e=[]);return e},provide:e=>tS.from(e)});return[i,Ky.define((r=>new rS(r,e,i,n,t.hoverTime||300))),iS]}function aS(e,t){let n=e.plugin(Hk);if(!n)return null;let i=n.manager.tooltips.indexOf(t);return i<0?null:n.manager.tooltipViews[i]}const lS=fO.define();const hS=Lm.define({combine(e){let t,n;for(let i of e)t=t||i.topContainer,n=n||i.bottomContainer;return{topContainer:t,bottomContainer:n}}});function cS(e,t){let n=e.plugin(uS),i=n?n.specs.indexOf(t):-1;return i>-1?n.panels[i]:null}const uS=Ky.fromClass(class{constructor(e){this.input=e.state.facet(pS),this.specs=this.input.filter((e=>e)),this.panels=this.specs.map((t=>t(e)));let t=e.state.facet(hS);this.top=new dS(e,!0,t.topContainer),this.bottom=new dS(e,!1,t.bottomContainer),this.top.sync(this.panels.filter((e=>e.top))),this.bottom.sync(this.panels.filter((e=>!e.top)));for(let n of this.panels)n.dom.classList.add("cm-panel"),n.mount&&n.mount()}update(e){let t=e.state.facet(hS);this.top.container!=t.topContainer&&(this.top.sync([]),this.top=new dS(e.view,!0,t.topContainer)),this.bottom.container!=t.bottomContainer&&(this.bottom.sync([]),this.bottom=new dS(e.view,!1,t.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let n=e.state.facet(pS);if(n!=this.input){let t=n.filter((e=>e)),i=[],r=[],s=[],o=[];for(let n of t){let t,a=this.specs.indexOf(n);a<0?(t=n(e.view),o.push(t)):(t=this.panels[a],t.update&&t.update(e)),i.push(t),(t.top?r:s).push(t)}this.specs=t,this.panels=i,this.top.sync(r),this.bottom.sync(s);for(let e of o)e.dom.classList.add("cm-panel"),e.mount&&e.mount()}else for(let i of this.panels)i.update&&i.update(e)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:e=>Gw.scrollMargins.of((t=>{let n=t.plugin(e);return n&&{top:n.top.scrollMargin(),bottom:n.bottom.scrollMargin()}}))});class dS{constructor(e,t,n){this.view=e,this.top=t,this.container=n,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(e){for(let t of this.panels)t.destroy&&e.indexOf(t)<0&&t.destroy();this.panels=e,this.syncDOM()}syncDOM(){if(0==this.panels.length)return void(this.dom&&(this.dom.remove(),this.dom=void 0));if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let e=this.container||this.view.dom;e.insertBefore(this.dom,this.top?e.firstChild:null)}let e=this.dom.firstChild;for(let t of this.panels)if(t.dom.parentNode==this.dom){for(;e!=t.dom;)e=fS(e);e=e.nextSibling}else this.dom.insertBefore(t.dom,e);for(;e;)e=fS(e)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(this.container&&this.classes!=this.view.themeClasses){for(let e of this.classes.split(" "))e&&this.container.classList.remove(e);for(let e of(this.classes=this.view.themeClasses).split(" "))e&&this.container.classList.add(e)}}}function fS(e){let t=e.nextSibling;return e.remove(),t}const pS=Lm.define({enables:uS});class gS extends PO{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}}gS.prototype.elementClass="",gS.prototype.toDOM=void 0,gS.prototype.mapMode=xm.TrackBefore,gS.prototype.startSide=gS.prototype.endSide=-1,gS.prototype.point=!0;const mS=Lm.define(),OS={class:"",renderEmptyElements:!1,elementStyle:"",markers:()=>AO.empty,lineMarker:()=>null,widgetMarker:()=>null,lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{}},vS=Lm.define();function yS(e){return[wS(),vS.of(Object.assign(Object.assign({},OS),e))]}const bS=Lm.define({combine:e=>e.some((e=>e))});function wS(e){let t=[kS];return e&&!1===e.fixed&&t.push(bS.of(!0)),t}const kS=Ky.fromClass(class{constructor(e){this.view=e,this.prevViewport=e.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.gutters=e.state.facet(vS).map((t=>new _S(e,t)));for(let t of this.gutters)this.dom.appendChild(t.dom);this.fixed=!e.state.facet(bS),this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),e.scrollDOM.insertBefore(this.dom,e.contentDOM)}update(e){if(this.updateGutters(e)){let t=this.prevViewport,n=e.view.viewport,i=Math.min(t.to,n.to)-Math.max(t.from,n.from);this.syncGutters(i<.8*(n.to-n.from))}e.geometryChanged&&(this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px"),this.view.state.facet(bS)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":""),this.prevViewport=e.view.viewport}syncGutters(e){let t=this.dom.nextSibling;e&&this.dom.remove();let n=AO.iter(this.view.state.facet(mS),this.view.viewport.from),i=[],r=this.gutters.map((e=>new TS(e,this.view.viewport,-this.view.documentPadding.top)));for(let s of this.view.viewportLineBlocks)if(i.length&&(i=[]),Array.isArray(s.type)){let e=!0;for(let t of s.type)if(t.type==sy.Text&&e){xS(n,i,t.from);for(let e of r)e.line(this.view,t,i);e=!1}else if(t.widget)for(let e of r)e.widget(this.view,t)}else if(s.type==sy.Text){xS(n,i,s.from);for(let e of r)e.line(this.view,s,i)}else if(s.widget)for(let e of r)e.widget(this.view,s);for(let s of r)s.finish();e&&this.view.scrollDOM.insertBefore(this.dom,t)}updateGutters(e){let t=e.startState.facet(vS),n=e.state.facet(vS),i=e.docChanged||e.heightChanged||e.viewportChanged||!AO.eq(e.startState.facet(mS),e.state.facet(mS),e.view.viewport.from,e.view.viewport.to);if(t==n)for(let r of this.gutters)r.update(e)&&(i=!0);else{i=!0;let r=[];for(let i of n){let n=t.indexOf(i);n<0?r.push(new _S(this.view,i)):(this.gutters[n].update(e),r.push(this.gutters[n]))}for(let e of this.gutters)e.dom.remove(),r.indexOf(e)<0&&e.destroy();for(let e of r)this.dom.appendChild(e.dom);this.gutters=r}return i}destroy(){for(let e of this.gutters)e.destroy();this.dom.remove()}},{provide:e=>Gw.scrollMargins.of((t=>{let n=t.plugin(e);return n&&0!=n.gutters.length&&n.fixed?t.textDirection==gy.LTR?{left:n.dom.offsetWidth*t.scaleX}:{right:n.dom.offsetWidth*t.scaleX}:null}))});function SS(e){return Array.isArray(e)?e:[e]}function xS(e,t,n){for(;e.value&&e.from<=n;)e.from==n&&t.push(e.value),e.next()}class TS{constructor(e,t,n){this.gutter=e,this.height=n,this.i=0,this.cursor=AO.iter(e.markers,t.from)}addElement(e,t,n){let{gutter:i}=this,r=(t.top-this.height)/e.scaleY,s=t.height/e.scaleY;if(this.i==i.elements.length){let t=new PS(e,s,r,n);i.elements.push(t),i.dom.appendChild(t.dom)}else i.elements[this.i].update(e,s,r,n);this.height=t.bottom,this.i++}line(e,t,n){let i=[];xS(this.cursor,i,t.from),n.length&&(i=i.concat(n));let r=this.gutter.config.lineMarker(e,t,i);r&&i.unshift(r);let s=this.gutter;(0!=i.length||s.config.renderEmptyElements)&&this.addElement(e,t,i)}widget(e,t){let n=this.gutter.config.widgetMarker(e,t.widget,t);n&&this.addElement(e,t,[n])}finish(){let e=this.gutter;for(;e.elements.length>this.i;){let t=e.elements.pop();e.dom.removeChild(t.dom),t.destroy()}}}class _S{constructor(e,t){this.view=e,this.config=t,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let n in t.domEventHandlers)this.dom.addEventListener(n,(i=>{let r,s=i.target;if(s!=this.dom&&this.dom.contains(s)){for(;s.parentNode!=this.dom;)s=s.parentNode;let e=s.getBoundingClientRect();r=(e.top+e.bottom)/2}else r=i.clientY;let o=e.lineBlockAtHeight(r-e.documentTop);t.domEventHandlers[n](e,o,i)&&i.preventDefault()}));this.markers=SS(t.markers(e)),t.initialSpacer&&(this.spacer=new PS(e,0,0,[t.initialSpacer(e)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(e){let t=this.markers;if(this.markers=SS(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){let t=this.config.updateSpacer(this.spacer.markers[0],e);t!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[t])}let n=e.view.viewport;return!AO.eq(this.markers,t,n.from,n.to)||!!this.config.lineMarkerChange&&this.config.lineMarkerChange(e)}destroy(){for(let e of this.elements)e.destroy()}}class PS{constructor(e,t,n,i){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(e,t,n,i)}update(e,t,n,i){this.height!=t&&(this.height=t,this.dom.style.height=t+"px"),this.above!=n&&(this.dom.style.marginTop=(this.above=n)?n+"px":""),function(e,t){if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++)if(!e[n].compare(t[n]))return!1;return!0}(this.markers,i)||this.setMarkers(e,i)}setMarkers(e,t){let n="cm-gutterElement",i=this.dom.firstChild;for(let r=0,s=0;;){let o=s,a=r<t.length?t[r++]:null,l=!1;if(a){let e=a.elementClass;e&&(n+=" "+e);for(let t=s;t<this.markers.length;t++)if(this.markers[t].compare(a)){o=t,l=!0;break}}else o=this.markers.length;for(;s<o;){let e=this.markers[s++];if(e.toDOM){e.destroy(i);let t=i.nextSibling;i.remove(),i=t}}if(!a)break;a.toDOM&&(l?i=i.nextSibling:this.dom.insertBefore(a.toDOM(e),i)),l&&s++}this.dom.className=n,this.markers=t}destroy(){this.setMarkers(null,[])}}const CS=Lm.define(),ES=Lm.define({combine:e=>_O(e,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(e,t){let n=Object.assign({},e);for(let i in t){let e=n[i],r=t[i];n[i]=e?(t,n,i)=>e(t,n,i)||r(t,n,i):r}return n}})});class QS extends gS{constructor(e){super(),this.number=e}eq(e){return this.number==e.number}toDOM(){return document.createTextNode(this.number)}}function AS(e,t){return e.state.facet(ES).formatNumber(t,e.state)}const RS=vS.compute([ES],(e=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers:e=>e.state.facet(CS),lineMarker:(e,t,n)=>n.some((e=>e.toDOM))?null:new QS(AS(e,e.state.doc.lineAt(t.from).number)),widgetMarker:()=>null,lineMarkerChange:e=>e.startState.facet(ES)!=e.state.facet(ES),initialSpacer:e=>new QS(AS(e,NS(e.state.doc.lines))),updateSpacer(e,t){let n=AS(t.view,NS(t.view.state.doc.lines));return n==e.number?e:new QS(n)},domEventHandlers:e.facet(ES).domEventHandlers})));function NS(e){let t=9;for(;t<e;)t=10*t+9;return t}const IS=new class extends gS{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},DS=mS.compute(["selection"],(e=>{let t=[],n=-1;for(let i of e.selection.ranges){let r=e.doc.lineAt(i.head).from;r>n&&(n=r,t.push(IS.range(r)))}return AO.of(t)}));const MS=1024;let LS=0;class $S{constructor(e,t){this.from=e,this.to=t}}class US{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.id=LS++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return"function"!=typeof e&&(e=zS.match(e)),t=>{let n=e(t);return void 0===n?null:[this,n]}}}US.closedBy=new US({deserialize:e=>e.split(" ")}),US.openedBy=new US({deserialize:e=>e.split(" ")}),US.group=new US({deserialize:e=>e.split(" ")}),US.isolate=new US({deserialize:e=>{if(e&&"rtl"!=e&&"ltr"!=e&&"auto"!=e)throw new RangeError("Invalid value for isolate: "+e);return e||"auto"}}),US.contextHash=new US({perNode:!0}),US.lookAhead=new US({perNode:!0}),US.mounted=new US({perNode:!0});class qS{constructor(e,t,n){this.tree=e,this.overlay=t,this.parser=n}static get(e){return e&&e.props&&e.props[US.mounted.id]}}const VS=Object.create(null);class zS{constructor(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;this.name=e,this.props=t,this.id=n,this.flags=i}static define(e){let t=e.props&&e.props.length?Object.create(null):VS,n=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(null==e.name?8:0),i=new zS(e.name||"",t,e.id,n);if(e.props)for(let r of e.props)if(Array.isArray(r)||(r=r(i)),r){if(r[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");t[r[0].id]=r[1]}return i}prop(e){return this.props[e.id]}get isTop(){return(1&this.flags)>0}get isSkipped(){return(2&this.flags)>0}get isError(){return(4&this.flags)>0}get isAnonymous(){return(8&this.flags)>0}is(e){if("string"==typeof e){if(this.name==e)return!0;let t=this.prop(US.group);return!!t&&t.indexOf(e)>-1}return this.id==e}static match(e){let t=Object.create(null);for(let n in e)for(let i of n.split(" "))t[i]=e[n];return e=>{for(let n=e.prop(US.group),i=-1;i<(n?n.length:0);i++){let r=t[i<0?e.name:n[i]];if(r)return r}}}}zS.none=new zS("",Object.create(null),0,8);const jS=new WeakMap,BS=new WeakMap;var FS;!function(e){e[e.ExcludeBuffers=1]="ExcludeBuffers",e[e.IncludeAnonymous=2]="IncludeAnonymous",e[e.IgnoreMounts=4]="IgnoreMounts",e[e.IgnoreOverlays=8]="IgnoreOverlays"}(FS||(FS={}));class WS{constructor(e,t,n,i,r){if(this.type=e,this.children=t,this.positions=n,this.length=i,this.props=null,r&&r.length){this.props=Object.create(null);for(let[e,t]of r)this.props["number"==typeof e?e:e.id]=t}}toString(){let e=qS.get(this);if(e&&!e.overlay)return e.tree.toString();let t="";for(let n of this.children){let e=n.toString();e&&(t&&(t+=","),t+=e)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(t.length?"("+t+")":""):t}cursor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return new sx(this.topNode,e)}cursorAt(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=jS.get(this)||this.topNode,i=new sx(n);return i.moveTo(e,t),jS.set(this,i._tree),i}get topNode(){return new KS(this,0,0,null)}resolve(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=ZS(jS.get(this)||this.topNode,e,t,!1);return jS.set(this,n),n}resolveInner(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=ZS(BS.get(this)||this.topNode,e,t,!0);return BS.set(this,n),n}resolveStack(e){return function(e,t,n){let i=e.resolveInner(t,n),r=null;for(let s=i instanceof KS?i:i.context.parent;s;s=s.parent)if(s.index<0){let e=s.parent;(r||(r=[i])).push(e.resolve(t,n)),s=e}else{let e=qS.get(s.tree);if(e&&e.overlay&&e.overlay[0].from<=t&&e.overlay[e.overlay.length-1].to>=t){let o=new KS(e.tree,e.overlay[0].from+s.from,-1,s);(r||(r=[i])).push(ZS(o,t,n,!1))}}return r?ix(r):i}(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0)}iterate(e){let{enter:t,leave:n,from:i=0,to:r=this.length}=e,s=e.mode||0,o=(s&FS.IncludeAnonymous)>0;for(let a=this.cursor(s|FS.IncludeAnonymous);;){let e=!1;if(a.from<=r&&a.to>=i&&(!o&&a.type.isAnonymous||!1!==t(a))){if(a.firstChild())continue;e=!0}for(;e&&n&&(o||!a.type.isAnonymous)&&n(a),!a.nextSibling();){if(!a.parent())return;e=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let t in this.props)e.push([+t,this.props[t]]);return e}balance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.children.length<=8?this:hx(zS.none,this.children,this.positions,0,this.children.length,0,this.length,((e,t,n)=>new WS(this.type,e,t,n,this.propValues)),e.makeTree||((e,t,n)=>new WS(zS.none,e,t,n)))}static build(e){return function(e){var t;let{buffer:n,nodeSet:i,maxBufferLength:r=MS,reused:s=[],minRepeatType:o=i.types.length}=e,a=Array.isArray(n)?new XS(n,n.length):n,l=i.types,h=0,c=0;function u(e,t,n,v,y,b){let{id:w,start:k,end:S,size:x}=a,T=c;for(;x<0;){if(a.next(),-1==x){let t=s[w];return n.push(t),void v.push(k-e)}if(-3==x)return void(h=w);if(-4==x)return void(c=w);throw new RangeError("Unrecognized record size: ".concat(x))}let _,P,C=l[w],E=k-e;if(S-k<=r&&(P=m(a.pos-t,y))){let t=new Uint16Array(P.size-P.skip),n=a.pos-P.size,r=t.length;for(;a.pos>n;)r=O(P.start,t,r);_=new YS(t,S-P.start,i),E=P.start-e}else{let e=a.pos-x;a.next();let t=[],n=[],i=w>=o?w:-1,s=0,l=S;for(;a.pos>e;)i>=0&&a.id==i&&a.size>=0?(a.end<=l-r&&(p(t,n,k,s,a.end,l,i,T),s=t.length,l=a.end),a.next()):b>2500?d(k,e,t,n):u(k,e,t,n,i,b+1);if(i>=0&&s>0&&s<t.length&&p(t,n,k,s,k,l,i,T),t.reverse(),n.reverse(),i>-1&&s>0){let e=f(C);_=hx(C,t,n,0,t.length,0,S-k,e,e)}else _=g(C,t,n,S-k,T-S)}n.push(_),v.push(E)}function d(e,t,n,s){let o=[],l=0,h=-1;for(;a.pos>t;){let{id:e,start:t,end:n,size:i}=a;if(i>4)a.next();else{if(h>-1&&t<h)break;h<0&&(h=n-r),o.push(e,t,n),l++,a.next()}}if(l){let t=new Uint16Array(4*l),r=o[o.length-2];for(let e=o.length-3,n=0;e>=0;e-=3)t[n++]=o[e],t[n++]=o[e+1]-r,t[n++]=o[e+2]-r,t[n++]=n;n.push(new YS(t,o[2]-r,i)),s.push(r-e)}}function f(e){return(t,n,i)=>{let r,s,o=0,a=t.length-1;if(a>=0&&(r=t[a])instanceof WS){if(!a&&r.type==e&&r.length==i)return r;(s=r.prop(US.lookAhead))&&(o=n[a]+r.length+s)}return g(e,t,n,i,o)}}function p(e,t,n,r,s,o,a,l){let h=[],c=[];for(;e.length>r;)h.push(e.pop()),c.push(t.pop()+n-s);e.push(g(i.types[a],h,c,o-s,l-o)),t.push(s-n)}function g(e,t,n,i){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,s=arguments.length>5?arguments[5]:void 0;if(h){let e=[US.contextHash,h];s=s?[e].concat(s):[e]}if(r>25){let e=[US.lookAhead,r];s=s?[e].concat(s):[e]}return new WS(e,t,n,i,s)}function m(e,t){let n=a.fork(),i=0,s=0,l=0,h=n.end-r,c={size:0,start:0,skip:0};e:for(let r=n.pos-e;n.pos>r;){let e=n.size;if(n.id==t&&e>=0){c.size=i,c.start=s,c.skip=l,l+=4,i+=4,n.next();continue}let a=n.pos-e;if(e<0||a<r||n.start<h)break;let u=n.id>=o?4:0,d=n.start;for(n.next();n.pos>a;){if(n.size<0){if(-3!=n.size)break e;u+=4}else n.id>=o&&(u+=4);n.next()}s=d,i+=e,l+=u}return(t<0||i==e)&&(c.size=i,c.start=s,c.skip=l),c.size>4?c:void 0}function O(e,t,n){let{id:i,start:r,end:s,size:l}=a;if(a.next(),l>=0&&i<o){let o=n;if(l>4){let i=a.pos-(l-4);for(;a.pos>i;)n=O(e,t,n)}t[--n]=o,t[--n]=s-e,t[--n]=r-e,t[--n]=i}else-3==l?h=i:-4==l&&(c=i);return n}let v=[],y=[];for(;a.pos>0;)u(e.start||0,e.bufferStart||0,v,y,-1,0);let b=null!==(t=e.length)&&void 0!==t?t:v.length?y[0]+v[0].length:0;return new WS(l[e.topID],v.reverse(),y.reverse(),b)}(e)}}WS.empty=new WS(zS.none,[],[],0);class XS{constructor(e,t){this.buffer=e,this.index=t}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new XS(this.buffer,this.index)}}class YS{constructor(e,t,n){this.buffer=e,this.length=t,this.set=n}get type(){return zS.none}toString(){let e=[];for(let t=0;t<this.buffer.length;)e.push(this.childString(t)),t=this.buffer[t+3];return e.join(",")}childString(e){let t=this.buffer[e],n=this.buffer[e+3],i=this.set.types[t],r=i.name;if(/\W/.test(r)&&!i.isError&&(r=JSON.stringify(r)),n==(e+=4))return r;let s=[];for(;e<n;)s.push(this.childString(e)),e=this.buffer[e+3];return r+"("+s.join(",")+")"}findChild(e,t,n,i,r){let{buffer:s}=this,o=-1;for(let a=e;a!=t&&!(GS(r,i,s[a+1],s[a+2])&&(o=a,n>0));a=s[a+3]);return o}slice(e,t,n){let i=this.buffer,r=new Uint16Array(t-e),s=0;for(let o=e,a=0;o<t;){r[a++]=i[o++],r[a++]=i[o++]-n;let t=r[a++]=i[o++]-n;r[a++]=i[o++]-e,s=Math.max(s,t)}return new YS(r,s,this.set)}}function GS(e,t,n,i){switch(e){case-2:return n<t;case-1:return i>=t&&n<t;case 0:return n<t&&i>t;case 1:return n<=t&&i>t;case 2:return i>t;case 4:return!0}}function ZS(e,t,n,i){for(var r;e.from==e.to||(n<1?e.from>=t:e.from>t)||(n>-1?e.to<=t:e.to<t);){let t=!i&&e instanceof KS&&e.index<0?null:e.parent;if(!t)return e;e=t}let s=i?0:FS.IgnoreOverlays;if(i)for(let o=e,a=o.parent;a;o=a,a=o.parent)o instanceof KS&&o.index<0&&(null===(r=a.enter(t,n,s))||void 0===r?void 0:r.from)!=o.from&&(e=a);for(;;){let i=e.enter(t,n,s);if(!i)return e;e=i}}class HS{cursor(){return new sx(this,arguments.length>0&&void 0!==arguments[0]?arguments[0]:0)}getChild(e){let t=JS(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:null);return t.length?t[0]:null}getChildren(e){return JS(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}resolve(e){return ZS(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,!1)}resolveInner(e){return ZS(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,!0)}matchContext(e){return ex(this,e)}enterUnfinishedNodesBefore(e){let t=this.childBefore(e),n=this;for(;t;){let e=t.lastChild;if(!e||e.to!=t.to)break;e.type.isError&&e.from==e.to?(n=t,t=e.prevSibling):t=e}return n}get node(){return this}get next(){return this.parent}}class KS extends HS{constructor(e,t,n,i){super(),this._tree=e,this.from=t,this.index=n,this._parent=i}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,t,n,i){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;for(let s=this;;){for(let{children:o,positions:a}=s._tree,l=t>0?o.length:-1;e!=l;e+=t){let l=o[e],h=a[e]+s.from;if(GS(i,n,h,h+l.length))if(l instanceof YS){if(r&FS.ExcludeBuffers)continue;let o=l.findChild(0,l.buffer.length,t,n-h,i);if(o>-1)return new nx(new tx(s,l,e,h),null,o)}else if(r&FS.IncludeAnonymous||!l.type.isAnonymous||ox(l)){let o;if(!(r&FS.IgnoreMounts)&&(o=qS.get(l))&&!o.overlay)return new KS(o.tree,h,e,s);let a=new KS(l,h,e,s);return r&FS.IncludeAnonymous||!a.type.isAnonymous?a:a.nextChild(t<0?l.children.length-1:0,t,n,i)}}if(r&FS.IncludeAnonymous||!s.type.isAnonymous)return null;if(e=s.index>=0?s.index+t:t<0?-1:s._parent._tree.children.length,s=s._parent,!s)return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,t){let n,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(!(i&FS.IgnoreOverlays)&&(n=qS.get(this._tree))&&n.overlay){let i=e-this.from;for(let{from:e,to:r}of n.overlay)if((t>0?e<=i:e<i)&&(t<0?r>=i:r>i))return new KS(n.tree,n.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,t,i)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}}function JS(e,t,n,i){let r=e.cursor(),s=[];if(!r.firstChild())return s;if(null!=n)for(let o=!1;!o;)if(o=r.type.is(n),!r.nextSibling())return s;for(;;){if(null!=i&&r.type.is(i))return s;if(r.type.is(t)&&s.push(r.node),!r.nextSibling())return null==i?s:[]}}function ex(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.length-1;for(let i=e.parent;n>=0;i=i.parent){if(!i)return!1;if(!i.type.isAnonymous){if(t[n]&&t[n]!=i.name)return!1;n--}}return!0}class tx{constructor(e,t,n,i){this.parent=e,this.buffer=t,this.index=n,this.start=i}}class nx extends HS{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,t,n){super(),this.context=e,this._parent=t,this.index=n,this.type=e.buffer.set.types[e.buffer.buffer[n]]}child(e,t,n){let{buffer:i}=this.context,r=i.findChild(this.index+4,i.buffer[this.index+3],e,t-this.context.start,n);return r<0?null:new nx(this.context,this,r)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,t){if((arguments.length>2&&void 0!==arguments[2]?arguments[2]:0)&FS.ExcludeBuffers)return null;let{buffer:n}=this.context,i=n.findChild(this.index+4,n.buffer[this.index+3],t>0?1:-1,e-this.context.start,t);return i<0?null:new nx(this.context,this,i)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,t=e.buffer[this.index+3];return t<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new nx(this.context,this._parent,t):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,t=this._parent?this._parent.index+4:0;return this.index==t?this.externalSibling(-1):new nx(this.context,this._parent,e.findChild(t,this.index,-1,0,4))}get tree(){return null}toTree(){let e=[],t=[],{buffer:n}=this.context,i=this.index+4,r=n.buffer[this.index+3];if(r>i){let s=n.buffer[this.index+1];e.push(n.slice(i,r,s)),t.push(0)}return new WS(this.type,e,t,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}}function ix(e){if(!e.length)return null;let t=0,n=e[0];for(let s=1;s<e.length;s++){let i=e[s];(i.from>n.from||i.to<n.to)&&(n=i,t=s)}let i=n instanceof KS&&n.index<0?null:n.parent,r=e.slice();return i?r[t]=i:r.splice(t,1),new rx(r,n)}class rx{constructor(e,t){this.heads=e,this.node=t}get next(){return ix(this.heads)}}class sx{get name(){return this.type.name}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(this.mode=t,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof KS)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let t=e._parent;t;t=t._parent)this.stack.unshift(t.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return!!e&&(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0)}yieldBuf(e,t){this.index=e;let{start:n,buffer:i}=this.buffer;return this.type=t||i.set.types[i.buffer[e]],this.from=n+i.buffer[e+1],this.to=n+i.buffer[e+2],!0}yield(e){return!!e&&(e instanceof KS?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)))}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,t,n){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,t,n,this.mode));let{buffer:i}=this.buffer,r=i.findChild(this.index+4,i.buffer[this.index+3],e,t-this.buffer.start,n);return!(r<0)&&(this.stack.push(this.index),this.yieldBuf(r))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.mode;return this.buffer?!(n&FS.ExcludeBuffers)&&this.enterChild(1,e,t):this.yield(this._tree.enter(e,t,n))}parent(){if(!this.buffer)return this.yieldNode(this.mode&FS.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&FS.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return!!this._tree._parent&&this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode));let{buffer:t}=this.buffer,n=this.stack.length-1;if(e<0){let e=n<0?0:this.stack[n]+4;if(this.index!=e)return this.yieldBuf(t.findChild(e,this.index,-1,0,4))}else{let e=t.buffer[this.index+3];if(e<(n<0?t.buffer.length:t.buffer[this.stack[n]+3]))return this.yieldBuf(e)}return n<0&&this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode))}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let t,n,{buffer:i}=this;if(i){if(e>0){if(this.index<i.buffer.buffer.length)return!1}else for(let e=0;e<this.index;e++)if(i.buffer.buffer[e+3]<this.index)return!1;({index:t,parent:n}=i)}else({index:t,_parent:n}=this._tree);for(;n;({index:t,_parent:n}=n))if(t>-1)for(let i=t+e,r=e<0?-1:n._tree.children.length;i!=r;i+=e){let e=n._tree.children[i];if(this.mode&FS.IncludeAnonymous||e instanceof YS||!e.type.isAnonymous||ox(e))return!1}return!0}move(e,t){if(t&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.move(1,e)}prev(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.move(-1,e)}moveTo(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;for(;(this.from==this.to||(t<1?this.from>=e:this.from>e)||(t>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,t););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,t=null,n=0;if(e&&e.context==this.buffer)e:for(let i=this.index,r=this.stack.length;r>=0;){for(let s=e;s;s=s._parent)if(s.index==i){if(i==this.index)return s;t=s,n=r+1;break e}i=this.stack[--r]}for(let i=n;i<this.stack.length;i++)t=new nx(this.buffer,t,this.stack[i]);return this.bufferNode=new nx(this.buffer,t,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,t){for(let n=0;;){let i=!1;if(this.type.isAnonymous||!1!==e(this)){if(this.firstChild()){n++;continue}this.type.isAnonymous||(i=!0)}for(;i&&t&&t(this),i=this.type.isAnonymous,!this.nextSibling();){if(!n)return;this.parent(),n--,i=!0}}}matchContext(e){if(!this.buffer)return ex(this.node,e);let{buffer:t}=this.buffer,{types:n}=t.set;for(let i=e.length-1,r=this.stack.length-1;i>=0;r--){if(r<0)return ex(this.node,e,i);let s=n[t.buffer[this.stack[r]]];if(!s.isAnonymous){if(e[i]&&e[i]!=s.name)return!1;i--}}return!0}}function ox(e){return e.children.some((e=>e instanceof YS||!e.type.isAnonymous||ox(e)))}const ax=new WeakMap;function lx(e,t){if(!e.isAnonymous||t instanceof YS||t.type!=e)return 1;let n=ax.get(t);if(null==n){n=1;for(let i of t.children){if(i.type!=e||!(i instanceof WS)){n=1;break}n+=lx(e,i)}ax.set(t,n)}return n}function hx(e,t,n,i,r,s,o,a,l){let h=0;for(let f=i;f<r;f++)h+=lx(e,t[f]);let c=Math.ceil(1.5*h/8),u=[],d=[];return function t(n,i,r,o,a){for(let h=r;h<o;){let r=h,f=i[h],p=lx(e,n[h]);for(h++;h<o;h++){let t=lx(e,n[h]);if(p+t>=c)break;p+=t}if(h==r+1){if(p>c){let e=n[r];t(e.children,e.positions,0,e.children.length,i[r]+a);continue}u.push(n[r])}else{let t=i[h-1]+n[h-1].length-f;u.push(hx(e,n,i,r,h,f,t,null,l))}d.push(f+a-s)}}(t,n,i,r,0),(a||l)(u,d,o)}class cx{constructor(e,t,n,i){let r=arguments.length>4&&void 0!==arguments[4]&&arguments[4],s=arguments.length>5&&void 0!==arguments[5]&&arguments[5];this.from=e,this.to=t,this.tree=n,this.offset=i,this.open=(r?1:0)|(s?2:0)}get openStart(){return(1&this.open)>0}get openEnd(){return(2&this.open)>0}static addTree(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=[new cx(0,e.length,e,0,!1,n)];for(let r of t)r.to>e.length&&i.push(r);return i}static applyChanges(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:128;if(!t.length)return e;let i=[],r=1,s=e.length?e[0]:null;for(let o=0,a=0,l=0;;o++){let h=o<t.length?t[o]:null,c=h?h.fromA:1e9;if(c-a>=n)for(;s&&s.from<c;){let t=s;if(a>=t.from||c<=t.to||l){let e=Math.max(t.from,a)-l,n=Math.min(t.to,c)-l;t=e>=n?null:new cx(e,n,t.tree,t.offset+l,o>0,!!h)}if(t&&i.push(t),s.to>c)break;s=r<e.length?e[r++]:null}if(!h)break;a=h.toA,l=h.toA-h.toB}return i}}class ux{startParse(e,t,n){return"string"==typeof e&&(e=new dx(e)),n=n?n.length?n.map((e=>new $S(e.from,e.to))):[new $S(0,0)]:[new $S(0,e.length)],this.createParse(e,t||[],n)}parse(e,t,n){let i=this.startParse(e,t,n);for(;;){let e=i.advance();if(e)return e}}}class dx{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,t){return this.string.slice(e,t)}}new US({perNode:!0});let fx=0;class px{constructor(e,t,n){this.set=e,this.base=t,this.modified=n,this.id=fx++}static define(e){if(null===e||void 0===e?void 0:e.base)throw new Error("Can not derive from a modified tag");let t=new px([],null,[]);if(t.set.push(t),e)for(let n of e.set)t.set.push(n);return t}static defineModifier(){let e=new mx;return t=>t.modified.indexOf(e)>-1?t:mx.get(t.base||t,t.modified.concat(e).sort(((e,t)=>e.id-t.id)))}}let gx=0;class mx{constructor(){this.instances=[],this.id=gx++}static get(e,t){if(!t.length)return e;let n=t[0].instances.find((n=>n.base==e&&function(e,t){return e.length==t.length&&e.every(((e,n)=>e==t[n]))}(t,n.modified)));if(n)return n;let i=[],r=new px(i,e,t);for(let o of t)o.instances.push(r);let s=function(e){let t=[[]];for(let n=0;n<e.length;n++)for(let i=0,r=t.length;i<r;i++)t.push(t[i].concat(e[n]));return t.sort(((e,t)=>t.length-e.length))}(t);for(let o of e.set)if(!o.modified.length)for(let e of s)i.push(mx.get(o,e));return r}}function Ox(e){let t=Object.create(null);for(let n in e){let i=e[n];Array.isArray(i)||(i=[i]);for(let e of n.split(" "))if(e){let n=[],r=2,s=e;for(let t=0;;){if("..."==s&&t>0&&t+3==e.length){r=1;break}let i=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(s);if(!i)throw new RangeError("Invalid path: "+e);if(n.push("*"==i[0]?"":'"'==i[0][0]?JSON.parse(i[0]):i[0]),t+=i[0].length,t==e.length)break;let o=e[t++];if(t==e.length&&"!"==o){r=0;break}if("/"!=o)throw new RangeError("Invalid path: "+e);s=e.slice(t)}let o=n.length-1,a=n[o];if(!a)throw new RangeError("Invalid path: "+e);let l=new yx(i,r,o>0?n.slice(0,o):null);t[a]=l.sort(t[a])}}return vx.add(t)}const vx=new US;class yx{constructor(e,t,n,i){this.tags=e,this.mode=t,this.context=n,this.next=i}get opaque(){return 0==this.mode}get inherit(){return 1==this.mode}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}function bx(e,t){let n=Object.create(null);for(let s of e)if(Array.isArray(s.tag))for(let e of s.tag)n[e.id]=s.class;else n[s.tag.id]=s.class;let{scope:i,all:r=null}=t||{};return{style:e=>{let t=r;for(let i of e)for(let e of i.set){let i=n[e.id];if(i){t=t?t+" "+i:i;break}}return t},scope:i}}yx.empty=new yx([],2,null);const wx=px.define,kx=wx(),Sx=wx(),xx=wx(Sx),Tx=wx(Sx),_x=wx(),Px=wx(_x),Cx=wx(_x),Ex=wx(),Qx=wx(Ex),Ax=wx(),Rx=wx(),Nx=wx(),Ix=wx(Nx),Dx=wx(),Mx={comment:kx,lineComment:wx(kx),blockComment:wx(kx),docComment:wx(kx),name:Sx,variableName:wx(Sx),typeName:xx,tagName:wx(xx),propertyName:Tx,attributeName:wx(Tx),className:wx(Sx),labelName:wx(Sx),namespace:wx(Sx),macroName:wx(Sx),literal:_x,string:Px,docString:wx(Px),character:wx(Px),attributeValue:wx(Px),number:Cx,integer:wx(Cx),float:wx(Cx),bool:wx(_x),regexp:wx(_x),escape:wx(_x),color:wx(_x),url:wx(_x),keyword:Ax,self:wx(Ax),null:wx(Ax),atom:wx(Ax),unit:wx(Ax),modifier:wx(Ax),operatorKeyword:wx(Ax),controlKeyword:wx(Ax),definitionKeyword:wx(Ax),moduleKeyword:wx(Ax),operator:Rx,derefOperator:wx(Rx),arithmeticOperator:wx(Rx),logicOperator:wx(Rx),bitwiseOperator:wx(Rx),compareOperator:wx(Rx),updateOperator:wx(Rx),definitionOperator:wx(Rx),typeOperator:wx(Rx),controlOperator:wx(Rx),punctuation:Nx,separator:wx(Nx),bracket:Ix,angleBracket:wx(Ix),squareBracket:wx(Ix),paren:wx(Ix),brace:wx(Ix),content:Ex,heading:Qx,heading1:wx(Qx),heading2:wx(Qx),heading3:wx(Qx),heading4:wx(Qx),heading5:wx(Qx),heading6:wx(Qx),contentSeparator:wx(Ex),list:wx(Ex),quote:wx(Ex),emphasis:wx(Ex),strong:wx(Ex),link:wx(Ex),monospace:wx(Ex),strikethrough:wx(Ex),inserted:wx(),deleted:wx(),changed:wx(),invalid:wx(),meta:Dx,documentMeta:wx(Dx),annotation:wx(Dx),processingInstruction:wx(Dx),definition:px.defineModifier(),constant:px.defineModifier(),function:px.defineModifier(),standard:px.defineModifier(),local:px.defineModifier(),special:px.defineModifier()};bx([{tag:Mx.link,class:"tok-link"},{tag:Mx.heading,class:"tok-heading"},{tag:Mx.emphasis,class:"tok-emphasis"},{tag:Mx.strong,class:"tok-strong"},{tag:Mx.keyword,class:"tok-keyword"},{tag:Mx.atom,class:"tok-atom"},{tag:Mx.bool,class:"tok-bool"},{tag:Mx.url,class:"tok-url"},{tag:Mx.labelName,class:"tok-labelName"},{tag:Mx.inserted,class:"tok-inserted"},{tag:Mx.deleted,class:"tok-deleted"},{tag:Mx.literal,class:"tok-literal"},{tag:Mx.string,class:"tok-string"},{tag:Mx.number,class:"tok-number"},{tag:[Mx.regexp,Mx.escape,Mx.special(Mx.string)],class:"tok-string2"},{tag:Mx.variableName,class:"tok-variableName"},{tag:Mx.local(Mx.variableName),class:"tok-variableName tok-local"},{tag:Mx.definition(Mx.variableName),class:"tok-variableName tok-definition"},{tag:Mx.special(Mx.variableName),class:"tok-variableName2"},{tag:Mx.definition(Mx.propertyName),class:"tok-propertyName tok-definition"},{tag:Mx.typeName,class:"tok-typeName"},{tag:Mx.namespace,class:"tok-namespace"},{tag:Mx.className,class:"tok-className"},{tag:Mx.macroName,class:"tok-macroName"},{tag:Mx.propertyName,class:"tok-propertyName"},{tag:Mx.operator,class:"tok-operator"},{tag:Mx.comment,class:"tok-comment"},{tag:Mx.meta,class:"tok-meta"},{tag:Mx.invalid,class:"tok-invalid"},{tag:Mx.punctuation,class:"tok-punctuation"}]);var Lx;const $x=new US;const Ux=new US;class qx{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";this.data=e,this.name=i,TO.prototype.hasOwnProperty("tree")||Object.defineProperty(TO.prototype,"tree",{get(){return zx(this)}}),this.parser=t,this.extension=[Hx.of(this),TO.languageData.of(((e,t,n)=>{let i=Vx(e,t,n),r=i.type.prop($x);if(!r)return[];let s=e.facet(r),o=i.type.prop(Ux);if(o){let r=i.resolve(t-i.from,n);for(let t of o)if(t.test(r,e)){let n=e.facet(t.facet);return"replace"==t.type?n:n.concat(s)}}return s}))].concat(n)}isActiveAt(e,t){return Vx(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1).type.prop($x)==this.data}findRegions(e){let t=e.facet(Hx);if((null===t||void 0===t?void 0:t.data)==this.data)return[{from:0,to:e.doc.length}];if(!t||!t.allowsNesting)return[];let n=[],i=(e,t)=>{if(e.prop($x)==this.data)return void n.push({from:t,to:t+e.length});let r=e.prop(US.mounted);if(r){if(r.tree.prop($x)==this.data){if(r.overlay)for(let e of r.overlay)n.push({from:e.from+t,to:e.to+t});else n.push({from:t,to:t+e.length});return}if(r.overlay){let e=n.length;if(i(r.tree,r.overlay[0].from+t),n.length>e)return}}for(let n=0;n<e.children.length;n++){let r=e.children[n];r instanceof WS&&i(r,e.positions[n]+t)}};return i(zx(e),0),n}get allowsNesting(){return!0}}function Vx(e,t,n){let i=e.facet(Hx),r=zx(e).topNode;if(!i||i.allowsNesting)for(let s=r;s;s=s.enter(t,n,FS.ExcludeBuffers))s.type.isTop&&(r=s);return r}qx.setState=fO.define();function zx(e){let t=e.field(qx.state,!1);return t?t.tree:WS.empty}class jx{constructor(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}get length(){return this.doc.length}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,t){let n=this.cursorPos-this.string.length;return e<n||t>=this.cursorPos?this.doc.sliceString(e,t):this.string.slice(e-n,t-n)}}let Bx=null;class Fx{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3?arguments[3]:void 0,r=arguments.length>4?arguments[4]:void 0,s=arguments.length>5?arguments[5]:void 0,o=arguments.length>6?arguments[6]:void 0,a=arguments.length>7?arguments[7]:void 0;this.parser=e,this.state=t,this.fragments=n,this.tree=i,this.treeLen=r,this.viewport=s,this.skipped=o,this.scheduleOn=a,this.parse=null,this.tempSkipped=[]}static create(e,t,n){return new Fx(e,t,[],WS.empty,0,n,[],null)}startParse(){return this.parser.startParse(new jx(this.state.doc),this.fragments)}work(e,t){return null!=t&&t>=this.state.doc.length&&(t=void 0),this.tree!=WS.empty&&this.isDone(null!==t&&void 0!==t?t:this.state.doc.length)?(this.takeTree(),!0):this.withContext((()=>{var n;if("number"==typeof e){let t=Date.now()+e;e=()=>Date.now()>t}for(this.parse||(this.parse=this.startParse()),null!=t&&(null==this.parse.stoppedAt||this.parse.stoppedAt>t)&&t<this.state.doc.length&&this.parse.stopAt(t);;){let i=this.parse.advance();if(i){if(this.fragments=this.withoutTempSkipped(cx.addTree(i,this.fragments,null!=this.parse.stoppedAt)),this.treeLen=null!==(n=this.parse.stoppedAt)&&void 0!==n?n:this.state.doc.length,this.tree=i,this.parse=null,!(this.treeLen<(null!==t&&void 0!==t?t:this.state.doc.length)))return!0;this.parse=this.startParse()}if(e())return!1}}))}takeTree(){let e,t;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((null==this.parse.stoppedAt||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext((()=>{for(;!(t=this.parse.advance()););})),this.treeLen=e,this.tree=t,this.fragments=this.withoutTempSkipped(cx.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let t=Bx;Bx=this;try{return e()}finally{Bx=t}}withoutTempSkipped(e){for(let t;t=this.tempSkipped.pop();)e=Wx(e,t.from,t.to);return e}changes(e,t){let{fragments:n,tree:i,treeLen:r,viewport:s,skipped:o}=this;if(this.takeTree(),!e.empty){let t=[];if(e.iterChangedRanges(((e,n,i,r)=>t.push({fromA:e,toA:n,fromB:i,toB:r}))),n=cx.applyChanges(n,t),i=WS.empty,r=0,s={from:e.mapPos(s.from,-1),to:e.mapPos(s.to,1)},this.skipped.length){o=[];for(let t of this.skipped){let n=e.mapPos(t.from,1),i=e.mapPos(t.to,-1);n<i&&o.push({from:n,to:i})}}}return new Fx(this.parser,t,n,i,r,s,o,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let t=this.skipped.length;for(let n=0;n<this.skipped.length;n++){let{from:t,to:i}=this.skipped[n];t<e.to&&i>e.from&&(this.fragments=Wx(this.fragments,t,i),this.skipped.splice(n--,1))}return!(this.skipped.length>=t)&&(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,t){this.skipped.push({from:e,to:t})}static getSkippingParser(e){return new class extends ux{createParse(t,n,i){let r=i[0].from,s=i[i.length-1].to;return{parsedPos:r,advance(){let t=Bx;if(t){for(let e of i)t.tempSkipped.push(e);e&&(t.scheduleOn=t.scheduleOn?Promise.all([t.scheduleOn,e]):e)}return this.parsedPos=s,new WS(zS.none,[],[],s-r)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let t=this.fragments;return this.treeLen>=e&&t.length&&0==t[0].from&&t[0].to>=e}static get(){return Bx}}function Wx(e,t,n){return cx.applyChanges(e,[{fromA:t,toA:n,fromB:t,toB:n}])}class Xx{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let t=this.context.changes(e.changes,e.state),n=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),t.viewport.to);return t.work(20,n)||t.takeTree(),new Xx(t)}static init(e){let t=Math.min(3e3,e.doc.length),n=Fx.create(e.facet(Hx).parser,e,{from:0,to:t});return n.work(20,t)||n.takeTree(),new Xx(n)}}qx.state=Bm.define({create:Xx.init,update(e,t){for(let n of t.effects)if(n.is(qx.setState))return n.value;return t.startState.facet(Hx)!=t.state.facet(Hx)?Xx.init(t.state):e.apply(t)}});let Yx=e=>{let t=setTimeout((()=>e()),500);return()=>clearTimeout(t)};"undefined"!=typeof requestIdleCallback&&(Yx=e=>{let t=-1,n=setTimeout((()=>{t=requestIdleCallback(e,{timeout:400})}),100);return()=>t<0?clearTimeout(n):cancelIdleCallback(t)});const Gx="undefined"!=typeof navigator&&(null===(Lx=navigator.scheduling)||void 0===Lx?void 0:Lx.isInputPending)?()=>navigator.scheduling.isInputPending():null,Zx=Ky.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let t=this.view.state.field(qx.state).context;(t.updateViewport(e.view.viewport)||this.view.viewport.to>t.treeLen)&&this.scheduleWork(),(e.docChanged||e.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(t)}scheduleWork(){if(this.working)return;let{state:e}=this.view,t=e.field(qx.state);t.tree==t.context.tree&&t.context.isDone(e.doc.length)||(this.working=Yx(this.work))}work(e){this.working=null;let t=Date.now();if(this.chunkEnd<t&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=t+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:n,viewport:{to:i}}=this.view,r=n.field(qx.state);if(r.tree==r.context.tree&&r.context.isDone(i+1e5))return;let s=Date.now()+Math.min(this.chunkBudget,100,e&&!Gx?Math.max(25,e.timeRemaining()-5):1e9),o=r.context.treeLen<i&&n.doc.length>i+1e3,a=r.context.work((()=>Gx&&Gx()||Date.now()>s),i+(o?0:1e5));this.chunkBudget-=Date.now()-t,(a||this.chunkBudget<=0)&&(r.context.takeTree(),this.view.dispatch({effects:qx.setState.of(new Xx(r.context))})),this.chunkBudget>0&&(!a||o)&&this.scheduleWork(),this.checkAsyncSchedule(r.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then((()=>this.scheduleWork())).catch((e=>Yy(this.view.state,e))).then((()=>this.workScheduled--)),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),Hx=Lm.define({combine:e=>e.length?e[0]:null,enables:e=>[qx.state,Zx,Gw.contentAttributes.compute([e],(t=>{let n=t.facet(e);return n&&n.name?{"data-language":n.name}:{}}))]});const Kx=Lm.define({combine:e=>{if(!e.length)return"  ";let t=e[0];if(!t||/\S/.test(t)||Array.from(t).some((e=>e!=t[0])))throw new Error("Invalid indent unit: "+JSON.stringify(e[0]));return t}});function Jx(e){let t=e.facet(Kx);return 9==t.charCodeAt(0)?e.tabSize*t.length:t.length}function eT(e,t){let n="",i=e.tabSize,r=e.facet(Kx)[0];if("\t"==r){for(;t>=i;)n+="\t",t-=i;r=" "}for(let s=0;s<t;s++)n+=r;return n}class tT{constructor(e,t){let n;function i(e){let t=YO.newName();return(n||Object.create(null))["."+t]=e,t}this.specs=e;const r="string"==typeof t.all?t.all:t.all?i(t.all):void 0,s=t.scope;this.scope=s instanceof qx?e=>e.prop($x)==s.data:s?e=>e==s:void 0,this.style=bx(e.map((e=>({tag:e.tag,class:e.class||i(Object.assign({},e,{tag:null}))}))),{all:r}).style,this.module=n?new YO(n):null,this.themeType=t.themeType}static define(e,t){return new tT(e,t||{})}}Mx.meta,Mx.link,Mx.heading,Mx.emphasis,Mx.strong,Mx.strikethrough,Mx.keyword,Mx.atom,Mx.bool,Mx.url,Mx.contentSeparator,Mx.labelName,Mx.literal,Mx.inserted,Mx.string,Mx.deleted,Mx.regexp,Mx.escape,Mx.string,Mx.variableName,Mx.variableName,Mx.typeName,Mx.namespace,Mx.className,Mx.variableName,Mx.macroName,Mx.propertyName,Mx.comment,Mx.invalid;const nT=Object.create(null),iT=[zS.none],rT=[],sT=Object.create(null),oT=Object.create(null);for(let[n,Sk]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])oT[n]=lT(nT,Sk);function aT(e,t){rT.indexOf(e)>-1||(rT.push(e),console.warn(t))}function lT(e,t){let n=[];for(let a of t.split(" ")){let t=[];for(let n of a.split(".")){let i=e[n]||Mx[n];i?"function"==typeof i?t.length?t=t.map(i):aT(n,"Modifier ".concat(n," used at start of tag")):t.length?aT(n,"Tag ".concat(n," used as modifier")):t=Array.isArray(i)?i:[i]:aT(n,"Unknown highlighting tag ".concat(n))}for(let e of t)n.push(e)}if(!n.length)return 0;let i=t.replace(/ /g,"_"),r=i+" "+n.map((e=>e.id)),s=sT[r];if(s)return s.id;let o=sT[r]=zS.define({id:iT.length,name:i,props:[Ox({[i]:n})]});return iT.push(o),o.id}gy.RTL,gy.LTR;const hT=cO.define(),cT=Lm.define();class uT{constructor(e,t,n,i,r){this.changes=e,this.effects=t,this.mapped=n,this.startSelection=i,this.selectionsAfter=r}setSelAfter(e){return new uT(this.changes,this.effects,this.mapped,this.startSelection,e)}toJSON(){var e,t,n;return{changes:null===(e=this.changes)||void 0===e?void 0:e.toJSON(),mapped:null===(t=this.mapped)||void 0===t?void 0:t.toJSON(),startSelection:null===(n=this.startSelection)||void 0===n?void 0:n.toJSON(),selectionsAfter:this.selectionsAfter.map((e=>e.toJSON()))}}static fromJSON(e){return new uT(e.changes&&_m.fromJSON(e.changes),[],e.mapped&&Tm.fromJSON(e.mapped),e.startSelection&&Im.fromJSON(e.startSelection),e.selectionsAfter.map(Im.fromJSON))}static fromTransaction(e,t){let n=pT;for(let i of e.startState.facet(cT)){let t=i(e);t.length&&(n=n.concat(t))}return!n.length&&e.changes.empty?null:new uT(e.changes.invert(e.startState.doc),n,void 0,t||e.startState.selection,pT)}static selection(e){return new uT(void 0,pT,void 0,void 0,e)}}function dT(e,t,n,i){let r=t+1>n+20?t-n-1:0,s=e.slice(r,t);return s.push(i),s}function fT(e,t){return e.length?t.length?e.concat(t):e:t}const pT=[],gT=200;function mT(e,t){if(e.length){let n=e[e.length-1],i=n.selectionsAfter.slice(Math.max(0,n.selectionsAfter.length-gT));return i.length&&i[i.length-1].eq(t)?e:(i.push(t),dT(e,e.length-1,1e9,n.setSelAfter(i)))}return[uT.selection([t])]}function OT(e){let t=e[e.length-1],n=e.slice();return n[e.length-1]=t.setSelAfter(t.selectionsAfter.slice(0,t.selectionsAfter.length-1)),n}function vT(e,t){if(!e.length)return e;let n=e.length,i=pT;for(;n;){let r=yT(e[n-1],t,i);if(r.changes&&!r.changes.empty||r.effects.length){let t=e.slice(0,n);return t[n-1]=r,t}t=r.mapped,n--,i=r.selectionsAfter}return i.length?[uT.selection(i)]:pT}function yT(e,t,n){let i=fT(e.selectionsAfter.length?e.selectionsAfter.map((e=>e.map(t))):pT,n);if(!e.changes)return uT.selection(i);let r=e.changes.map(t),s=t.mapDesc(e.changes,!0),o=e.mapped?e.mapped.composeDesc(s):s;return new uT(r,fO.mapEffects(e.effects,t),o,e.startSelection.map(s),i)}const bT=/^(input\.type|delete)($|\.)/;class wT{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0;this.done=e,this.undone=t,this.prevTime=n,this.prevUserEvent=i}isolate(){return this.prevTime?new wT(this.done,this.undone):this}addChanges(e,t,n,i,r){let s=this.done,o=s[s.length-1];return s=o&&o.changes&&!o.changes.empty&&e.changes&&(!n||bT.test(n))&&(!o.selectionsAfter.length&&t-this.prevTime<i.newGroupDelay&&i.joinToEvent(r,function(e,t){let n=[],i=!1;return e.iterChangedRanges(((e,t)=>n.push(e,t))),t.iterChangedRanges(((e,t,r,s)=>{for(let o=0;o<n.length;){let e=n[o++],t=n[o++];s>=e&&r<=t&&(i=!0)}})),i}(o.changes,e.changes))||"input.type.compose"==n)?dT(s,s.length-1,i.minDepth,new uT(e.changes.compose(o.changes),fT(e.effects,o.effects),o.mapped,o.startSelection,pT)):dT(s,s.length,i.minDepth,e),new wT(s,pT,t,n)}addSelection(e,t,n,i){let r=this.done.length?this.done[this.done.length-1].selectionsAfter:pT;return r.length>0&&t-this.prevTime<i&&n==this.prevUserEvent&&n&&/^select($|\.)/.test(n)&&function(e,t){return e.ranges.length==t.ranges.length&&0===e.ranges.filter(((e,n)=>e.empty!=t.ranges[n].empty)).length}(r[r.length-1],e)?this:new wT(mT(this.done,e),this.undone,t,n)}addMapping(e){return new wT(vT(this.done,e),vT(this.undone,e),this.prevTime,this.prevUserEvent)}pop(e,t,n){let i=0==e?this.done:this.undone;if(0==i.length)return null;let r=i[i.length-1],s=r.selectionsAfter[0]||t.selection;if(n&&r.selectionsAfter.length)return t.update({selection:r.selectionsAfter[r.selectionsAfter.length-1],annotations:hT.of({side:e,rest:OT(i),selection:s}),userEvent:0==e?"select.undo":"select.redo",scrollIntoView:!0});if(r.changes){let n=1==i.length?pT:i.slice(0,i.length-1);return r.mapped&&(n=vT(n,r.mapped)),t.update({changes:r.changes,selection:r.startSelection,effects:r.effects,annotations:hT.of({side:e,rest:n,selection:s}),filter:!1,userEvent:0==e?"undo":"redo",scrollIntoView:!0})}return null}}wT.empty=new wT(pT,pT);"undefined"!=typeof Intl&&Intl.Segmenter;function kT(e,t){let n=-1;return e.changeByRange((i=>{let r=[];for(let o=i.from;o<=i.to;){let s=e.doc.lineAt(o);s.number>n&&(i.empty||i.to>s.from)&&(t(s,r,i),n=s.number),o=s.to+1}let s=e.changes(r);return{changes:r,range:Im.range(s.mapPos(i.anchor,1),s.mapPos(i.head,1))}}))}const ST=e=>{let{state:t,dispatch:n}=e;return!t.readOnly&&(n(t.update(kT(t,((e,n)=>{n.push({from:e.from,insert:t.facet(Kx)})})),{userEvent:"input.indent"})),!0)},xT=e=>{let{state:t,dispatch:n}=e;return!t.readOnly&&(n(t.update(kT(t,((e,n)=>{let i=/^\s*/.exec(e.text)[0];if(!i)return;let r=jO(i,t.tabSize),s=0,o=eT(t,Math.max(0,r-Jx(t)));for(;s<i.length&&s<o.length&&i.charCodeAt(s)==o.charCodeAt(s);)s++;n.push({from:e.from+s,to:e.from+i.length,insert:o.slice(s)})})),{userEvent:"delete.dedent"})),!0)},TT={key:"Tab",run:ST,shift:xT},_T=1024;let PT=0;class CT{constructor(e,t){this.from=e,this.to=t}}class ET{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.id=PT++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return"function"!=typeof e&&(e=RT.match(e)),t=>{let n=e(t);return void 0===n?null:[this,n]}}}ET.closedBy=new ET({deserialize:e=>e.split(" ")}),ET.openedBy=new ET({deserialize:e=>e.split(" ")}),ET.group=new ET({deserialize:e=>e.split(" ")}),ET.isolate=new ET({deserialize:e=>{if(e&&"rtl"!=e&&"ltr"!=e&&"auto"!=e)throw new RangeError("Invalid value for isolate: "+e);return e||"auto"}}),ET.contextHash=new ET({perNode:!0}),ET.lookAhead=new ET({perNode:!0}),ET.mounted=new ET({perNode:!0});class QT{constructor(e,t,n){this.tree=e,this.overlay=t,this.parser=n}static get(e){return e&&e.props&&e.props[ET.mounted.id]}}const AT=Object.create(null);class RT{constructor(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;this.name=e,this.props=t,this.id=n,this.flags=i}static define(e){let t=e.props&&e.props.length?Object.create(null):AT,n=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(null==e.name?8:0),i=new RT(e.name||"",t,e.id,n);if(e.props)for(let r of e.props)if(Array.isArray(r)||(r=r(i)),r){if(r[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");t[r[0].id]=r[1]}return i}prop(e){return this.props[e.id]}get isTop(){return(1&this.flags)>0}get isSkipped(){return(2&this.flags)>0}get isError(){return(4&this.flags)>0}get isAnonymous(){return(8&this.flags)>0}is(e){if("string"==typeof e){if(this.name==e)return!0;let t=this.prop(ET.group);return!!t&&t.indexOf(e)>-1}return this.id==e}static match(e){let t=Object.create(null);for(let n in e)for(let i of n.split(" "))t[i]=e[n];return e=>{for(let n=e.prop(ET.group),i=-1;i<(n?n.length:0);i++){let r=t[i<0?e.name:n[i]];if(r)return r}}}}RT.none=new RT("",Object.create(null),0,8);const NT=new WeakMap,IT=new WeakMap;var DT;!function(e){e[e.ExcludeBuffers=1]="ExcludeBuffers",e[e.IncludeAnonymous=2]="IncludeAnonymous",e[e.IgnoreMounts=4]="IgnoreMounts",e[e.IgnoreOverlays=8]="IgnoreOverlays"}(DT||(DT={}));class MT{constructor(e,t,n,i,r){if(this.type=e,this.children=t,this.positions=n,this.length=i,this.props=null,r&&r.length){this.props=Object.create(null);for(let[e,t]of r)this.props["number"==typeof e?e:e.id]=t}}toString(){let e=QT.get(this);if(e&&!e.overlay)return e.tree.toString();let t="";for(let n of this.children){let e=n.toString();e&&(t&&(t+=","),t+=e)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(t.length?"("+t+")":""):t}cursor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return new GT(this.topNode,e)}cursorAt(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=NT.get(this)||this.topNode,i=new GT(n);return i.moveTo(e,t),NT.set(this,i._tree),i}get topNode(){return new zT(this,0,0,null)}resolve(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=qT(NT.get(this)||this.topNode,e,t,!1);return NT.set(this,n),n}resolveInner(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=qT(IT.get(this)||this.topNode,e,t,!0);return IT.set(this,n),n}resolveStack(e){return function(e,t,n){let i=e.resolveInner(t,n),r=null;for(let s=i instanceof zT?i:i.context.parent;s;s=s.parent)if(s.index<0){let e=s.parent;(r||(r=[i])).push(e.resolve(t,n)),s=e}else{let e=QT.get(s.tree);if(e&&e.overlay&&e.overlay[0].from<=t&&e.overlay[e.overlay.length-1].to>=t){let o=new zT(e.tree,e.overlay[0].from+s.from,-1,s);(r||(r=[i])).push(qT(o,t,n,!1))}}return r?XT(r):i}(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0)}iterate(e){let{enter:t,leave:n,from:i=0,to:r=this.length}=e,s=e.mode||0,o=(s&DT.IncludeAnonymous)>0;for(let a=this.cursor(s|DT.IncludeAnonymous);;){let e=!1;if(a.from<=r&&a.to>=i&&(!o&&a.type.isAnonymous||!1!==t(a))){if(a.firstChild())continue;e=!0}for(;e&&n&&(o||!a.type.isAnonymous)&&n(a),!a.nextSibling();){if(!a.parent())return;e=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let t in this.props)e.push([+t,this.props[t]]);return e}balance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.children.length<=8?this:JT(RT.none,this.children,this.positions,0,this.children.length,0,this.length,((e,t,n)=>new MT(this.type,e,t,n,this.propValues)),e.makeTree||((e,t,n)=>new MT(RT.none,e,t,n)))}static build(e){return function(e){var t;let{buffer:n,nodeSet:i,maxBufferLength:r=_T,reused:s=[],minRepeatType:o=i.types.length}=e,a=Array.isArray(n)?new LT(n,n.length):n,l=i.types,h=0,c=0;function u(e,t,n,v,y,b){let{id:w,start:k,end:S,size:x}=a,T=c;for(;x<0;){if(a.next(),-1==x){let t=s[w];return n.push(t),void v.push(k-e)}if(-3==x)return void(h=w);if(-4==x)return void(c=w);throw new RangeError("Unrecognized record size: ".concat(x))}let _,P,C=l[w],E=k-e;if(S-k<=r&&(P=m(a.pos-t,y))){let t=new Uint16Array(P.size-P.skip),n=a.pos-P.size,r=t.length;for(;a.pos>n;)r=O(P.start,t,r);_=new $T(t,S-P.start,i),E=P.start-e}else{let e=a.pos-x;a.next();let t=[],n=[],i=w>=o?w:-1,s=0,l=S;for(;a.pos>e;)i>=0&&a.id==i&&a.size>=0?(a.end<=l-r&&(p(t,n,k,s,a.end,l,i,T),s=t.length,l=a.end),a.next()):b>2500?d(k,e,t,n):u(k,e,t,n,i,b+1);if(i>=0&&s>0&&s<t.length&&p(t,n,k,s,k,l,i,T),t.reverse(),n.reverse(),i>-1&&s>0){let e=f(C);_=JT(C,t,n,0,t.length,0,S-k,e,e)}else _=g(C,t,n,S-k,T-S)}n.push(_),v.push(E)}function d(e,t,n,s){let o=[],l=0,h=-1;for(;a.pos>t;){let{id:e,start:t,end:n,size:i}=a;if(i>4)a.next();else{if(h>-1&&t<h)break;h<0&&(h=n-r),o.push(e,t,n),l++,a.next()}}if(l){let t=new Uint16Array(4*l),r=o[o.length-2];for(let e=o.length-3,n=0;e>=0;e-=3)t[n++]=o[e],t[n++]=o[e+1]-r,t[n++]=o[e+2]-r,t[n++]=n;n.push(new $T(t,o[2]-r,i)),s.push(r-e)}}function f(e){return(t,n,i)=>{let r,s,o=0,a=t.length-1;if(a>=0&&(r=t[a])instanceof MT){if(!a&&r.type==e&&r.length==i)return r;(s=r.prop(ET.lookAhead))&&(o=n[a]+r.length+s)}return g(e,t,n,i,o)}}function p(e,t,n,r,s,o,a,l){let h=[],c=[];for(;e.length>r;)h.push(e.pop()),c.push(t.pop()+n-s);e.push(g(i.types[a],h,c,o-s,l-o)),t.push(s-n)}function g(e,t,n,i){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,s=arguments.length>5?arguments[5]:void 0;if(h){let e=[ET.contextHash,h];s=s?[e].concat(s):[e]}if(r>25){let e=[ET.lookAhead,r];s=s?[e].concat(s):[e]}return new MT(e,t,n,i,s)}function m(e,t){let n=a.fork(),i=0,s=0,l=0,h=n.end-r,c={size:0,start:0,skip:0};e:for(let r=n.pos-e;n.pos>r;){let e=n.size;if(n.id==t&&e>=0){c.size=i,c.start=s,c.skip=l,l+=4,i+=4,n.next();continue}let a=n.pos-e;if(e<0||a<r||n.start<h)break;let u=n.id>=o?4:0,d=n.start;for(n.next();n.pos>a;){if(n.size<0){if(-3!=n.size)break e;u+=4}else n.id>=o&&(u+=4);n.next()}s=d,i+=e,l+=u}return(t<0||i==e)&&(c.size=i,c.start=s,c.skip=l),c.size>4?c:void 0}function O(e,t,n){let{id:i,start:r,end:s,size:l}=a;if(a.next(),l>=0&&i<o){let o=n;if(l>4){let i=a.pos-(l-4);for(;a.pos>i;)n=O(e,t,n)}t[--n]=o,t[--n]=s-e,t[--n]=r-e,t[--n]=i}else-3==l?h=i:-4==l&&(c=i);return n}let v=[],y=[];for(;a.pos>0;)u(e.start||0,e.bufferStart||0,v,y,-1,0);let b=null!==(t=e.length)&&void 0!==t?t:v.length?y[0]+v[0].length:0;return new MT(l[e.topID],v.reverse(),y.reverse(),b)}(e)}}MT.empty=new MT(RT.none,[],[],0);class LT{constructor(e,t){this.buffer=e,this.index=t}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new LT(this.buffer,this.index)}}class $T{constructor(e,t,n){this.buffer=e,this.length=t,this.set=n}get type(){return RT.none}toString(){let e=[];for(let t=0;t<this.buffer.length;)e.push(this.childString(t)),t=this.buffer[t+3];return e.join(",")}childString(e){let t=this.buffer[e],n=this.buffer[e+3],i=this.set.types[t],r=i.name;if(/\W/.test(r)&&!i.isError&&(r=JSON.stringify(r)),n==(e+=4))return r;let s=[];for(;e<n;)s.push(this.childString(e)),e=this.buffer[e+3];return r+"("+s.join(",")+")"}findChild(e,t,n,i,r){let{buffer:s}=this,o=-1;for(let a=e;a!=t&&!(UT(r,i,s[a+1],s[a+2])&&(o=a,n>0));a=s[a+3]);return o}slice(e,t,n){let i=this.buffer,r=new Uint16Array(t-e),s=0;for(let o=e,a=0;o<t;){r[a++]=i[o++],r[a++]=i[o++]-n;let t=r[a++]=i[o++]-n;r[a++]=i[o++]-e,s=Math.max(s,t)}return new $T(r,s,this.set)}}function UT(e,t,n,i){switch(e){case-2:return n<t;case-1:return i>=t&&n<t;case 0:return n<t&&i>t;case 1:return n<=t&&i>t;case 2:return i>t;case 4:return!0}}function qT(e,t,n,i){for(var r;e.from==e.to||(n<1?e.from>=t:e.from>t)||(n>-1?e.to<=t:e.to<t);){let t=!i&&e instanceof zT&&e.index<0?null:e.parent;if(!t)return e;e=t}let s=i?0:DT.IgnoreOverlays;if(i)for(let o=e,a=o.parent;a;o=a,a=o.parent)o instanceof zT&&o.index<0&&(null===(r=a.enter(t,n,s))||void 0===r?void 0:r.from)!=o.from&&(e=a);for(;;){let i=e.enter(t,n,s);if(!i)return e;e=i}}class VT{cursor(){return new GT(this,arguments.length>0&&void 0!==arguments[0]?arguments[0]:0)}getChild(e){let t=jT(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:null);return t.length?t[0]:null}getChildren(e){return jT(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}resolve(e){return qT(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,!1)}resolveInner(e){return qT(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,!0)}matchContext(e){return BT(this,e)}enterUnfinishedNodesBefore(e){let t=this.childBefore(e),n=this;for(;t;){let e=t.lastChild;if(!e||e.to!=t.to)break;e.type.isError&&e.from==e.to?(n=t,t=e.prevSibling):t=e}return n}get node(){return this}get next(){return this.parent}}class zT extends VT{constructor(e,t,n,i){super(),this._tree=e,this.from=t,this.index=n,this._parent=i}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,t,n,i){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;for(let s=this;;){for(let{children:o,positions:a}=s._tree,l=t>0?o.length:-1;e!=l;e+=t){let l=o[e],h=a[e]+s.from;if(UT(i,n,h,h+l.length))if(l instanceof $T){if(r&DT.ExcludeBuffers)continue;let o=l.findChild(0,l.buffer.length,t,n-h,i);if(o>-1)return new WT(new FT(s,l,e,h),null,o)}else if(r&DT.IncludeAnonymous||!l.type.isAnonymous||ZT(l)){let o;if(!(r&DT.IgnoreMounts)&&(o=QT.get(l))&&!o.overlay)return new zT(o.tree,h,e,s);let a=new zT(l,h,e,s);return r&DT.IncludeAnonymous||!a.type.isAnonymous?a:a.nextChild(t<0?l.children.length-1:0,t,n,i)}}if(r&DT.IncludeAnonymous||!s.type.isAnonymous)return null;if(e=s.index>=0?s.index+t:t<0?-1:s._parent._tree.children.length,s=s._parent,!s)return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,t){let n,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(!(i&DT.IgnoreOverlays)&&(n=QT.get(this._tree))&&n.overlay){let i=e-this.from;for(let{from:e,to:r}of n.overlay)if((t>0?e<=i:e<i)&&(t<0?r>=i:r>i))return new zT(n.tree,n.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,t,i)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}}function jT(e,t,n,i){let r=e.cursor(),s=[];if(!r.firstChild())return s;if(null!=n)for(let o=!1;!o;)if(o=r.type.is(n),!r.nextSibling())return s;for(;;){if(null!=i&&r.type.is(i))return s;if(r.type.is(t)&&s.push(r.node),!r.nextSibling())return null==i?s:[]}}function BT(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.length-1;for(let i=e.parent;n>=0;i=i.parent){if(!i)return!1;if(!i.type.isAnonymous){if(t[n]&&t[n]!=i.name)return!1;n--}}return!0}class FT{constructor(e,t,n,i){this.parent=e,this.buffer=t,this.index=n,this.start=i}}class WT extends VT{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,t,n){super(),this.context=e,this._parent=t,this.index=n,this.type=e.buffer.set.types[e.buffer.buffer[n]]}child(e,t,n){let{buffer:i}=this.context,r=i.findChild(this.index+4,i.buffer[this.index+3],e,t-this.context.start,n);return r<0?null:new WT(this.context,this,r)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,t){if((arguments.length>2&&void 0!==arguments[2]?arguments[2]:0)&DT.ExcludeBuffers)return null;let{buffer:n}=this.context,i=n.findChild(this.index+4,n.buffer[this.index+3],t>0?1:-1,e-this.context.start,t);return i<0?null:new WT(this.context,this,i)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,t=e.buffer[this.index+3];return t<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new WT(this.context,this._parent,t):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,t=this._parent?this._parent.index+4:0;return this.index==t?this.externalSibling(-1):new WT(this.context,this._parent,e.findChild(t,this.index,-1,0,4))}get tree(){return null}toTree(){let e=[],t=[],{buffer:n}=this.context,i=this.index+4,r=n.buffer[this.index+3];if(r>i){let s=n.buffer[this.index+1];e.push(n.slice(i,r,s)),t.push(0)}return new MT(this.type,e,t,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}}function XT(e){if(!e.length)return null;let t=0,n=e[0];for(let s=1;s<e.length;s++){let i=e[s];(i.from>n.from||i.to<n.to)&&(n=i,t=s)}let i=n instanceof zT&&n.index<0?null:n.parent,r=e.slice();return i?r[t]=i:r.splice(t,1),new YT(r,n)}class YT{constructor(e,t){this.heads=e,this.node=t}get next(){return XT(this.heads)}}class GT{get name(){return this.type.name}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(this.mode=t,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof zT)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let t=e._parent;t;t=t._parent)this.stack.unshift(t.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return!!e&&(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0)}yieldBuf(e,t){this.index=e;let{start:n,buffer:i}=this.buffer;return this.type=t||i.set.types[i.buffer[e]],this.from=n+i.buffer[e+1],this.to=n+i.buffer[e+2],!0}yield(e){return!!e&&(e instanceof zT?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)))}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,t,n){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,t,n,this.mode));let{buffer:i}=this.buffer,r=i.findChild(this.index+4,i.buffer[this.index+3],e,t-this.buffer.start,n);return!(r<0)&&(this.stack.push(this.index),this.yieldBuf(r))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.mode;return this.buffer?!(n&DT.ExcludeBuffers)&&this.enterChild(1,e,t):this.yield(this._tree.enter(e,t,n))}parent(){if(!this.buffer)return this.yieldNode(this.mode&DT.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&DT.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return!!this._tree._parent&&this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode));let{buffer:t}=this.buffer,n=this.stack.length-1;if(e<0){let e=n<0?0:this.stack[n]+4;if(this.index!=e)return this.yieldBuf(t.findChild(e,this.index,-1,0,4))}else{let e=t.buffer[this.index+3];if(e<(n<0?t.buffer.length:t.buffer[this.stack[n]+3]))return this.yieldBuf(e)}return n<0&&this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode))}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let t,n,{buffer:i}=this;if(i){if(e>0){if(this.index<i.buffer.buffer.length)return!1}else for(let e=0;e<this.index;e++)if(i.buffer.buffer[e+3]<this.index)return!1;({index:t,parent:n}=i)}else({index:t,_parent:n}=this._tree);for(;n;({index:t,_parent:n}=n))if(t>-1)for(let i=t+e,r=e<0?-1:n._tree.children.length;i!=r;i+=e){let e=n._tree.children[i];if(this.mode&DT.IncludeAnonymous||e instanceof $T||!e.type.isAnonymous||ZT(e))return!1}return!0}move(e,t){if(t&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.move(1,e)}prev(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.move(-1,e)}moveTo(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;for(;(this.from==this.to||(t<1?this.from>=e:this.from>e)||(t>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,t););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,t=null,n=0;if(e&&e.context==this.buffer)e:for(let i=this.index,r=this.stack.length;r>=0;){for(let s=e;s;s=s._parent)if(s.index==i){if(i==this.index)return s;t=s,n=r+1;break e}i=this.stack[--r]}for(let i=n;i<this.stack.length;i++)t=new WT(this.buffer,t,this.stack[i]);return this.bufferNode=new WT(this.buffer,t,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,t){for(let n=0;;){let i=!1;if(this.type.isAnonymous||!1!==e(this)){if(this.firstChild()){n++;continue}this.type.isAnonymous||(i=!0)}for(;i&&t&&t(this),i=this.type.isAnonymous,!this.nextSibling();){if(!n)return;this.parent(),n--,i=!0}}}matchContext(e){if(!this.buffer)return BT(this.node,e);let{buffer:t}=this.buffer,{types:n}=t.set;for(let i=e.length-1,r=this.stack.length-1;i>=0;r--){if(r<0)return BT(this.node,e,i);let s=n[t.buffer[this.stack[r]]];if(!s.isAnonymous){if(e[i]&&e[i]!=s.name)return!1;i--}}return!0}}function ZT(e){return e.children.some((e=>e instanceof $T||!e.type.isAnonymous||ZT(e)))}const HT=new WeakMap;function KT(e,t){if(!e.isAnonymous||t instanceof $T||t.type!=e)return 1;let n=HT.get(t);if(null==n){n=1;for(let i of t.children){if(i.type!=e||!(i instanceof MT)){n=1;break}n+=KT(e,i)}HT.set(t,n)}return n}function JT(e,t,n,i,r,s,o,a,l){let h=0;for(let f=i;f<r;f++)h+=KT(e,t[f]);let c=Math.ceil(1.5*h/8),u=[],d=[];return function t(n,i,r,o,a){for(let h=r;h<o;){let r=h,f=i[h],p=KT(e,n[h]);for(h++;h<o;h++){let t=KT(e,n[h]);if(p+t>=c)break;p+=t}if(h==r+1){if(p>c){let e=n[r];t(e.children,e.positions,0,e.children.length,i[r]+a);continue}u.push(n[r])}else{let t=i[h-1]+n[h-1].length-f;u.push(JT(e,n,i,r,h,f,t,null,l))}d.push(f+a-s)}}(t,n,i,r,0),(a||l)(u,d,o)}class e_{constructor(e,t,n,i){let r=arguments.length>4&&void 0!==arguments[4]&&arguments[4],s=arguments.length>5&&void 0!==arguments[5]&&arguments[5];this.from=e,this.to=t,this.tree=n,this.offset=i,this.open=(r?1:0)|(s?2:0)}get openStart(){return(1&this.open)>0}get openEnd(){return(2&this.open)>0}static addTree(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=[new e_(0,e.length,e,0,!1,n)];for(let r of t)r.to>e.length&&i.push(r);return i}static applyChanges(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:128;if(!t.length)return e;let i=[],r=1,s=e.length?e[0]:null;for(let o=0,a=0,l=0;;o++){let h=o<t.length?t[o]:null,c=h?h.fromA:1e9;if(c-a>=n)for(;s&&s.from<c;){let t=s;if(a>=t.from||c<=t.to||l){let e=Math.max(t.from,a)-l,n=Math.min(t.to,c)-l;t=e>=n?null:new e_(e,n,t.tree,t.offset+l,o>0,!!h)}if(t&&i.push(t),s.to>c)break;s=r<e.length?e[r++]:null}if(!h)break;a=h.toA,l=h.toA-h.toB}return i}}class t_{startParse(e,t,n){return"string"==typeof e&&(e=new n_(e)),n=n?n.length?n.map((e=>new CT(e.from,e.to))):[new CT(0,0)]:[new CT(0,e.length)],this.createParse(e,t||[],n)}parse(e,t,n){let i=this.startParse(e,t,n);for(;;){let e=i.advance();if(e)return e}}}class n_{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,t){return this.string.slice(e,t)}}new ET({perNode:!0});let i_=0;class r_{constructor(e,t,n){this.set=e,this.base=t,this.modified=n,this.id=i_++}static define(e){if(null===e||void 0===e?void 0:e.base)throw new Error("Can not derive from a modified tag");let t=new r_([],null,[]);if(t.set.push(t),e)for(let n of e.set)t.set.push(n);return t}static defineModifier(){let e=new o_;return t=>t.modified.indexOf(e)>-1?t:o_.get(t.base||t,t.modified.concat(e).sort(((e,t)=>e.id-t.id)))}}let s_=0;class o_{constructor(){this.instances=[],this.id=s_++}static get(e,t){if(!t.length)return e;let n=t[0].instances.find((n=>n.base==e&&function(e,t){return e.length==t.length&&e.every(((e,n)=>e==t[n]))}(t,n.modified)));if(n)return n;let i=[],r=new r_(i,e,t);for(let o of t)o.instances.push(r);let s=function(e){let t=[[]];for(let n=0;n<e.length;n++)for(let i=0,r=t.length;i<r;i++)t.push(t[i].concat(e[n]));return t.sort(((e,t)=>t.length-e.length))}(t);for(let o of e.set)if(!o.modified.length)for(let e of s)i.push(o_.get(o,e));return r}}function a_(e){let t=Object.create(null);for(let n in e){let i=e[n];Array.isArray(i)||(i=[i]);for(let e of n.split(" "))if(e){let n=[],r=2,s=e;for(let t=0;;){if("..."==s&&t>0&&t+3==e.length){r=1;break}let i=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(s);if(!i)throw new RangeError("Invalid path: "+e);if(n.push("*"==i[0]?"":'"'==i[0][0]?JSON.parse(i[0]):i[0]),t+=i[0].length,t==e.length)break;let o=e[t++];if(t==e.length&&"!"==o){r=0;break}if("/"!=o)throw new RangeError("Invalid path: "+e);s=e.slice(t)}let o=n.length-1,a=n[o];if(!a)throw new RangeError("Invalid path: "+e);let l=new h_(i,r,o>0?n.slice(0,o):null);t[a]=l.sort(t[a])}}return l_.add(t)}const l_=new ET;class h_{constructor(e,t,n,i){this.tags=e,this.mode=t,this.context=n,this.next=i}get opaque(){return 0==this.mode}get inherit(){return 1==this.mode}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}function c_(e,t){let n=Object.create(null);for(let s of e)if(Array.isArray(s.tag))for(let e of s.tag)n[e.id]=s.class;else n[s.tag.id]=s.class;let{scope:i,all:r=null}=t||{};return{style:e=>{let t=r;for(let i of e)for(let e of i.set){let i=n[e.id];if(i){t=t?t+" "+i:i;break}}return t},scope:i}}function u_(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:e.length,s=new d_(i,Array.isArray(t)?t:[t],n);s.highlightRange(e.cursor(),i,r,"",s.highlighters),s.flush(r)}h_.empty=new h_([],2,null);class d_{constructor(e,t,n){this.at=e,this.highlighters=t,this.span=n,this.class=""}startSpan(e,t){t!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=t)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,t,n,i,r){let{type:s,from:o,to:a}=e;if(o>=n||a<=t)return;s.isTop&&(r=this.highlighters.filter((e=>!e.scope||e.scope(s))));let l=i,h=function(e){let t=e.type.prop(l_);for(;t&&t.context&&!e.matchContext(t.context);)t=t.next;return t||null}(e)||h_.empty,c=function(e,t){let n=null;for(let i of e){let e=i.style(t);e&&(n=n?n+" "+e:e)}return n}(r,h.tags);if(c&&(l&&(l+=" "),l+=c,1==h.mode&&(i+=(i?" ":"")+c)),this.startSpan(Math.max(t,o),l),h.opaque)return;let u=e.tree&&e.tree.prop(ET.mounted);if(u&&u.overlay){let s=e.node.enter(u.overlay[0].from+o,1),h=this.highlighters.filter((e=>!e.scope||e.scope(u.tree.type))),c=e.firstChild();for(let d=0,f=o;;d++){let p=d<u.overlay.length?u.overlay[d]:null,g=p?p.from+o:a,m=Math.max(t,f),O=Math.min(n,g);if(m<O&&c)for(;e.from<O&&(this.highlightRange(e,m,O,i,r),this.startSpan(Math.min(O,e.to),l),!(e.to>=g)&&e.nextSibling()););if(!p||g>n)break;f=p.to+o,f>t&&(this.highlightRange(s.cursor(),Math.max(t,p.from+o),Math.min(n,f),"",h),this.startSpan(Math.min(n,f),l))}c&&e.parent()}else if(e.firstChild()){u&&(i="");do{if(!(e.to<=t)){if(e.from>=n)break;this.highlightRange(e,t,n,i,r),this.startSpan(Math.min(n,e.to),l)}}while(e.nextSibling());e.parent()}}}const f_=r_.define,p_=f_(),g_=f_(),m_=f_(g_),O_=f_(g_),v_=f_(),y_=f_(v_),b_=f_(v_),w_=f_(),k_=f_(w_),S_=f_(),x_=f_(),T_=f_(),__=f_(T_),P_=f_(),C_={comment:p_,lineComment:f_(p_),blockComment:f_(p_),docComment:f_(p_),name:g_,variableName:f_(g_),typeName:m_,tagName:f_(m_),propertyName:O_,attributeName:f_(O_),className:f_(g_),labelName:f_(g_),namespace:f_(g_),macroName:f_(g_),literal:v_,string:y_,docString:f_(y_),character:f_(y_),attributeValue:f_(y_),number:b_,integer:f_(b_),float:f_(b_),bool:f_(v_),regexp:f_(v_),escape:f_(v_),color:f_(v_),url:f_(v_),keyword:S_,self:f_(S_),null:f_(S_),atom:f_(S_),unit:f_(S_),modifier:f_(S_),operatorKeyword:f_(S_),controlKeyword:f_(S_),definitionKeyword:f_(S_),moduleKeyword:f_(S_),operator:x_,derefOperator:f_(x_),arithmeticOperator:f_(x_),logicOperator:f_(x_),bitwiseOperator:f_(x_),compareOperator:f_(x_),updateOperator:f_(x_),definitionOperator:f_(x_),typeOperator:f_(x_),controlOperator:f_(x_),punctuation:T_,separator:f_(T_),bracket:__,angleBracket:f_(__),squareBracket:f_(__),paren:f_(__),brace:f_(__),content:w_,heading:k_,heading1:f_(k_),heading2:f_(k_),heading3:f_(k_),heading4:f_(k_),heading5:f_(k_),heading6:f_(k_),contentSeparator:f_(w_),list:f_(w_),quote:f_(w_),emphasis:f_(w_),strong:f_(w_),link:f_(w_),monospace:f_(w_),strikethrough:f_(w_),inserted:f_(),deleted:f_(),changed:f_(),invalid:f_(),meta:P_,documentMeta:f_(P_),annotation:f_(P_),processingInstruction:f_(P_),definition:r_.defineModifier(),constant:r_.defineModifier(),function:r_.defineModifier(),standard:r_.defineModifier(),local:r_.defineModifier(),special:r_.defineModifier()};c_([{tag:C_.link,class:"tok-link"},{tag:C_.heading,class:"tok-heading"},{tag:C_.emphasis,class:"tok-emphasis"},{tag:C_.strong,class:"tok-strong"},{tag:C_.keyword,class:"tok-keyword"},{tag:C_.atom,class:"tok-atom"},{tag:C_.bool,class:"tok-bool"},{tag:C_.url,class:"tok-url"},{tag:C_.labelName,class:"tok-labelName"},{tag:C_.inserted,class:"tok-inserted"},{tag:C_.deleted,class:"tok-deleted"},{tag:C_.literal,class:"tok-literal"},{tag:C_.string,class:"tok-string"},{tag:C_.number,class:"tok-number"},{tag:[C_.regexp,C_.escape,C_.special(C_.string)],class:"tok-string2"},{tag:C_.variableName,class:"tok-variableName"},{tag:C_.local(C_.variableName),class:"tok-variableName tok-local"},{tag:C_.definition(C_.variableName),class:"tok-variableName tok-definition"},{tag:C_.special(C_.variableName),class:"tok-variableName2"},{tag:C_.definition(C_.propertyName),class:"tok-propertyName tok-definition"},{tag:C_.typeName,class:"tok-typeName"},{tag:C_.namespace,class:"tok-namespace"},{tag:C_.className,class:"tok-className"},{tag:C_.macroName,class:"tok-macroName"},{tag:C_.propertyName,class:"tok-propertyName"},{tag:C_.operator,class:"tok-operator"},{tag:C_.comment,class:"tok-comment"},{tag:C_.meta,class:"tok-meta"},{tag:C_.invalid,class:"tok-invalid"},{tag:C_.punctuation,class:"tok-punctuation"}]);var E_;const Q_=new ET;const A_=new ET;class R_{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";this.data=e,this.name=i,TO.prototype.hasOwnProperty("tree")||Object.defineProperty(TO.prototype,"tree",{get(){return I_(this)}}),this.parser=t,this.extension=[j_.of(this),TO.languageData.of(((e,t,n)=>{let i=N_(e,t,n),r=i.type.prop(Q_);if(!r)return[];let s=e.facet(r),o=i.type.prop(A_);if(o){let r=i.resolve(t-i.from,n);for(let t of o)if(t.test(r,e)){let n=e.facet(t.facet);return"replace"==t.type?n:n.concat(s)}}return s}))].concat(n)}isActiveAt(e,t){return N_(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1).type.prop(Q_)==this.data}findRegions(e){let t=e.facet(j_);if((null===t||void 0===t?void 0:t.data)==this.data)return[{from:0,to:e.doc.length}];if(!t||!t.allowsNesting)return[];let n=[],i=(e,t)=>{if(e.prop(Q_)==this.data)return void n.push({from:t,to:t+e.length});let r=e.prop(ET.mounted);if(r){if(r.tree.prop(Q_)==this.data){if(r.overlay)for(let e of r.overlay)n.push({from:e.from+t,to:e.to+t});else n.push({from:t,to:t+e.length});return}if(r.overlay){let e=n.length;if(i(r.tree,r.overlay[0].from+t),n.length>e)return}}for(let n=0;n<e.children.length;n++){let r=e.children[n];r instanceof MT&&i(r,e.positions[n]+t)}};return i(I_(e),0),n}get allowsNesting(){return!0}}function N_(e,t,n){let i=e.facet(j_),r=I_(e).topNode;if(!i||i.allowsNesting)for(let s=r;s;s=s.enter(t,n,DT.ExcludeBuffers))s.type.isTop&&(r=s);return r}R_.setState=fO.define();function I_(e){let t=e.field(R_.state,!1);return t?t.tree:MT.empty}class D_{constructor(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}get length(){return this.doc.length}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,t){let n=this.cursorPos-this.string.length;return e<n||t>=this.cursorPos?this.doc.sliceString(e,t):this.string.slice(e-n,t-n)}}let M_=null;class L_{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3?arguments[3]:void 0,r=arguments.length>4?arguments[4]:void 0,s=arguments.length>5?arguments[5]:void 0,o=arguments.length>6?arguments[6]:void 0,a=arguments.length>7?arguments[7]:void 0;this.parser=e,this.state=t,this.fragments=n,this.tree=i,this.treeLen=r,this.viewport=s,this.skipped=o,this.scheduleOn=a,this.parse=null,this.tempSkipped=[]}static create(e,t,n){return new L_(e,t,[],MT.empty,0,n,[],null)}startParse(){return this.parser.startParse(new D_(this.state.doc),this.fragments)}work(e,t){return null!=t&&t>=this.state.doc.length&&(t=void 0),this.tree!=MT.empty&&this.isDone(null!==t&&void 0!==t?t:this.state.doc.length)?(this.takeTree(),!0):this.withContext((()=>{var n;if("number"==typeof e){let t=Date.now()+e;e=()=>Date.now()>t}for(this.parse||(this.parse=this.startParse()),null!=t&&(null==this.parse.stoppedAt||this.parse.stoppedAt>t)&&t<this.state.doc.length&&this.parse.stopAt(t);;){let i=this.parse.advance();if(i){if(this.fragments=this.withoutTempSkipped(e_.addTree(i,this.fragments,null!=this.parse.stoppedAt)),this.treeLen=null!==(n=this.parse.stoppedAt)&&void 0!==n?n:this.state.doc.length,this.tree=i,this.parse=null,!(this.treeLen<(null!==t&&void 0!==t?t:this.state.doc.length)))return!0;this.parse=this.startParse()}if(e())return!1}}))}takeTree(){let e,t;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((null==this.parse.stoppedAt||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext((()=>{for(;!(t=this.parse.advance()););})),this.treeLen=e,this.tree=t,this.fragments=this.withoutTempSkipped(e_.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let t=M_;M_=this;try{return e()}finally{M_=t}}withoutTempSkipped(e){for(let t;t=this.tempSkipped.pop();)e=$_(e,t.from,t.to);return e}changes(e,t){let{fragments:n,tree:i,treeLen:r,viewport:s,skipped:o}=this;if(this.takeTree(),!e.empty){let t=[];if(e.iterChangedRanges(((e,n,i,r)=>t.push({fromA:e,toA:n,fromB:i,toB:r}))),n=e_.applyChanges(n,t),i=MT.empty,r=0,s={from:e.mapPos(s.from,-1),to:e.mapPos(s.to,1)},this.skipped.length){o=[];for(let t of this.skipped){let n=e.mapPos(t.from,1),i=e.mapPos(t.to,-1);n<i&&o.push({from:n,to:i})}}}return new L_(this.parser,t,n,i,r,s,o,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let t=this.skipped.length;for(let n=0;n<this.skipped.length;n++){let{from:t,to:i}=this.skipped[n];t<e.to&&i>e.from&&(this.fragments=$_(this.fragments,t,i),this.skipped.splice(n--,1))}return!(this.skipped.length>=t)&&(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,t){this.skipped.push({from:e,to:t})}static getSkippingParser(e){return new class extends t_{createParse(t,n,i){let r=i[0].from,s=i[i.length-1].to;return{parsedPos:r,advance(){let t=M_;if(t){for(let e of i)t.tempSkipped.push(e);e&&(t.scheduleOn=t.scheduleOn?Promise.all([t.scheduleOn,e]):e)}return this.parsedPos=s,new MT(RT.none,[],[],s-r)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let t=this.fragments;return this.treeLen>=e&&t.length&&0==t[0].from&&t[0].to>=e}static get(){return M_}}function $_(e,t,n){return e_.applyChanges(e,[{fromA:t,toA:n,fromB:t,toB:n}])}class U_{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let t=this.context.changes(e.changes,e.state),n=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),t.viewport.to);return t.work(20,n)||t.takeTree(),new U_(t)}static init(e){let t=Math.min(3e3,e.doc.length),n=L_.create(e.facet(j_).parser,e,{from:0,to:t});return n.work(20,t)||n.takeTree(),new U_(n)}}R_.state=Bm.define({create:U_.init,update(e,t){for(let n of t.effects)if(n.is(R_.setState))return n.value;return t.startState.facet(j_)!=t.state.facet(j_)?U_.init(t.state):e.apply(t)}});let q_=e=>{let t=setTimeout((()=>e()),500);return()=>clearTimeout(t)};"undefined"!=typeof requestIdleCallback&&(q_=e=>{let t=-1,n=setTimeout((()=>{t=requestIdleCallback(e,{timeout:400})}),100);return()=>t<0?clearTimeout(n):cancelIdleCallback(t)});const V_="undefined"!=typeof navigator&&(null===(E_=navigator.scheduling)||void 0===E_?void 0:E_.isInputPending)?()=>navigator.scheduling.isInputPending():null,z_=Ky.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let t=this.view.state.field(R_.state).context;(t.updateViewport(e.view.viewport)||this.view.viewport.to>t.treeLen)&&this.scheduleWork(),(e.docChanged||e.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(t)}scheduleWork(){if(this.working)return;let{state:e}=this.view,t=e.field(R_.state);t.tree==t.context.tree&&t.context.isDone(e.doc.length)||(this.working=q_(this.work))}work(e){this.working=null;let t=Date.now();if(this.chunkEnd<t&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=t+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:n,viewport:{to:i}}=this.view,r=n.field(R_.state);if(r.tree==r.context.tree&&r.context.isDone(i+1e5))return;let s=Date.now()+Math.min(this.chunkBudget,100,e&&!V_?Math.max(25,e.timeRemaining()-5):1e9),o=r.context.treeLen<i&&n.doc.length>i+1e3,a=r.context.work((()=>V_&&V_()||Date.now()>s),i+(o?0:1e5));this.chunkBudget-=Date.now()-t,(a||this.chunkBudget<=0)&&(r.context.takeTree(),this.view.dispatch({effects:R_.setState.of(new U_(r.context))})),this.chunkBudget>0&&(!a||o)&&this.scheduleWork(),this.checkAsyncSchedule(r.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then((()=>this.scheduleWork())).catch((e=>Yy(this.view.state,e))).then((()=>this.workScheduled--)),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),j_=Lm.define({combine:e=>e.length?e[0]:null,enables:e=>[R_.state,z_,Gw.contentAttributes.compute([e],(t=>{let n=t.facet(e);return n&&n.name?{"data-language":n.name}:{}}))]});const B_=Lm.define(),F_=Lm.define({combine:e=>{if(!e.length)return"  ";let t=e[0];if(!t||/\S/.test(t)||Array.from(t).some((e=>e!=t[0])))throw new Error("Invalid indent unit: "+JSON.stringify(e[0]));return t}});function W_(e){let t=e.facet(F_);return 9==t.charCodeAt(0)?e.tabSize*t.length:t.length}function X_(e,t){let n="",i=e.tabSize,r=e.facet(F_)[0];if("\t"==r){for(;t>=i;)n+="\t",t-=i;r=" "}for(let s=0;s<t;s++)n+=r;return n}function Y_(e,t){e instanceof TO&&(e=new G_(e));for(let i of e.state.facet(B_)){let n=i(e,t);if(void 0!==n)return n}let n=I_(e.state);return n.length>=t?function(e,t,n){let i=t.resolveStack(n),r=i.node.enterUnfinishedNodesBefore(n);if(r!=i.node){let e=[];for(let t=r;t!=i.node;t=t.parent)e.push(t);for(let t=e.length-1;t>=0;t--)i={node:e[t],next:i}}return H_(i,e,n)}(e,n,t):null}class G_{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.state=e,this.options=t,this.unit=W_(e)}lineAt(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=this.state.doc.lineAt(e),{simulateBreak:i,simulateDoubleBreak:r}=this.options;return null!=i&&i>=n.from&&i<=n.to?r&&i==e?{text:"",from:e}:(t<0?i<e:i<=e)?{text:n.text.slice(i-n.from),from:i}:{text:n.text.slice(0,i-n.from),from:n.from}:n}textAfterPos(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:n,from:i}=this.lineAt(e,t);return n.slice(e-i,Math.min(n.length,e+100-i))}column(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,{text:n,from:i}=this.lineAt(e,t),r=this.countColumn(n,e-i),s=this.options.overrideIndentation?this.options.overrideIndentation(i):-1;return s>-1&&(r+=s-this.countColumn(n,n.search(/\S|$/))),r}countColumn(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.length;return jO(e,this.state.tabSize,t)}lineIndent(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,{text:n,from:i}=this.lineAt(e,t),r=this.options.overrideIndentation;if(r){let e=r(i);if(e>-1)return e}return this.countColumn(n,n.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const Z_=new ET;function H_(e,t,n){for(let i=e;i;i=i.next){let e=K_(i.node);if(e)return e(eP.create(t,n,i))}return 0}function K_(e){let t=e.type.prop(Z_);if(t)return t;let n,i=e.firstChild;if(i&&(n=i.type.prop(ET.closedBy))){let t=e.lastChild,i=t&&n.indexOf(t.name)>-1;return e=>nP(e,!0,1,void 0,i&&!function(e){return e.pos==e.options.simulateBreak&&e.options.simulateDoubleBreak}(e)?t.from:void 0)}return null==e.parent?J_:null}function J_(){return 0}class eP extends G_{constructor(e,t,n){super(e.state,e.options),this.base=e,this.pos=t,this.context=n}get node(){return this.context.node}static create(e,t,n){return new eP(e,t,n)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(e){let t=this.state.doc.lineAt(e.from);for(;;){let n=e.resolve(t.from);for(;n.parent&&n.parent.from==n.from;)n=n.parent;if(tP(n,e))break;t=this.state.doc.lineAt(n.from)}return this.lineIndent(t.from)}continue(){return H_(this.context.next,this.base,this.pos)}}function tP(e,t){for(let n=t;n;n=n.parent)if(e==n)return!0;return!1}function nP(e,t,n,i,r){let s=e.textAfter,o=s.match(/^\s*/)[0].length,a=i&&s.slice(o,o+i.length)==i||r==e.pos+o,l=t?function(e){let t=e.node,n=t.childAfter(t.from),i=t.lastChild;if(!n)return null;let r=e.options.simulateBreak,s=e.state.doc.lineAt(n.from),o=null==r||r<=s.from?s.to:Math.min(s.to,r);for(let a=n.to;;){let e=t.childAfter(a);if(!e||e==i)return null;if(!e.type.isSkipped)return e.from<o?n:null;a=e.to}}(e):null;return l?a?e.column(l.from):e.column(l.to):e.baseIndent+(a?0:e.unit*n)}const iP=Lm.define(),rP=new ET;function sP(e){let t=e.lastChild;return t&&t.to==e.to&&t.type.isError}function oP(e,t,n){for(let i of e.facet(iP)){let r=i(e,t,n);if(r)return r}return function(e,t,n){let i=I_(e);if(i.length<n)return null;let r=null;for(let s=i.resolveStack(n,1);s;s=s.next){let o=s.node;if(o.to<=n||o.from>n)continue;if(r&&o.from<t)break;let a=o.type.prop(rP);if(a&&(o.to<i.length-50||i.length==e.doc.length||!sP(o))){let i=a(o,e);i&&i.from<=n&&i.from>=t&&i.to>n&&(r=i)}}return r}(e,t,n)}function aP(e,t){let n=t.mapPos(e.from,1),i=t.mapPos(e.to,-1);return n>=i?void 0:{from:n,to:i}}const lP=fO.define({map:aP}),hP=fO.define({map:aP});function cP(e){let t=[];for(let{head:n}of e.state.selection.ranges)t.some((e=>e.from<=n&&e.to>=n))||t.push(e.lineBlockAt(n));return t}const uP=Bm.define({create:()=>oy.none,update(e,t){e=e.map(t.changes);for(let n of t.effects)if(n.is(lP)&&!fP(e,n.value.from,n.value.to)){let{preparePlaceholder:i}=t.state.facet(vP),r=i?oy.replace({widget:new kP(i(t.state,n.value))}):wP;e=e.update({add:[r.range(n.value.from,n.value.to)]})}else n.is(hP)&&(e=e.update({filter:(e,t)=>n.value.from!=e||n.value.to!=t,filterFrom:n.value.from,filterTo:n.value.to}));if(t.selection){let n=!1,{head:i}=t.selection.main;e.between(i,i,((e,t)=>{e<i&&t>i&&(n=!0)})),n&&(e=e.update({filterFrom:i,filterTo:i,filter:(e,t)=>t<=i||e>=i}))}return e},provide:e=>Gw.decorations.from(e),toJSON(e,t){let n=[];return e.between(0,t.doc.length,((e,t)=>{n.push(e,t)})),n},fromJSON(e){if(!Array.isArray(e)||e.length%2)throw new RangeError("Invalid JSON for fold state");let t=[];for(let n=0;n<e.length;){let i=e[n++],r=e[n++];if("number"!=typeof i||"number"!=typeof r)throw new RangeError("Invalid JSON for fold state");t.push(wP.range(i,r))}return oy.set(t,!0)}});function dP(e,t,n){var i;let r=null;return null===(i=e.field(uP,!1))||void 0===i||i.between(t,n,((e,t)=>{(!r||r.from>e)&&(r={from:e,to:t})})),r}function fP(e,t,n){let i=!1;return e.between(t,t,((e,r)=>{e==t&&r==n&&(i=!0)})),i}function pP(e,t){return e.field(uP,!1)?t:t.concat(fO.appendConfig.of(yP()))}function gP(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=e.state.doc.lineAt(t.from).number,r=e.state.doc.lineAt(t.to).number;return Gw.announce.of("".concat(e.state.phrase(n?"Folded lines":"Unfolded lines")," ").concat(i," ").concat(e.state.phrase("to")," ").concat(r,"."))}const mP=[{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:e=>{for(let t of cP(e)){let n=oP(e.state,t.from,t.to);if(n)return e.dispatch({effects:pP(e.state,[lP.of(n),gP(e,n)])}),!0}return!1}},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:e=>{if(!e.state.field(uP,!1))return!1;let t=[];for(let n of cP(e)){let i=dP(e.state,n.from,n.to);i&&t.push(hP.of(i),gP(e,i,!1))}return t.length&&e.dispatch({effects:t}),t.length>0}},{key:"Ctrl-Alt-[",run:e=>{let{state:t}=e,n=[];for(let i=0;i<t.doc.length;){let r=e.lineBlockAt(i),s=oP(t,r.from,r.to);s&&n.push(lP.of(s)),i=(s?e.lineBlockAt(s.to):r).to+1}return n.length&&e.dispatch({effects:pP(e.state,n)}),!!n.length}},{key:"Ctrl-Alt-]",run:e=>{let t=e.state.field(uP,!1);if(!t||!t.size)return!1;let n=[];return t.between(0,e.state.doc.length,((e,t)=>{n.push(hP.of({from:e,to:t}))})),e.dispatch({effects:n}),!0}}],OP={placeholderDOM:null,preparePlaceholder:null,placeholderText:"\u2026"},vP=Lm.define({combine:e=>_O(e,OP)});function yP(e){let t=[uP,TP];return e&&t.push(vP.of(e)),t}function bP(e,t){let{state:n}=e,i=n.facet(vP),r=t=>{let n=e.lineBlockAt(e.posAtDOM(t.target)),i=dP(e.state,n.from,n.to);i&&e.dispatch({effects:hP.of(i)}),t.preventDefault()};if(i.placeholderDOM)return i.placeholderDOM(e,r,t);let s=document.createElement("span");return s.textContent=i.placeholderText,s.setAttribute("aria-label",n.phrase("folded code")),s.title=n.phrase("unfold"),s.className="cm-foldPlaceholder",s.onclick=r,s}const wP=oy.replace({widget:new class extends ry{toDOM(e){return bP(e,null)}}});class kP extends ry{constructor(e){super(),this.value=e}eq(e){return this.value==e.value}toDOM(e){return bP(e,this.value)}}const SP={openText:"\u2304",closedText:"\u203a",markerDOM:null,domEventHandlers:{},foldingChanged:()=>!1};class xP extends gS{constructor(e,t){super(),this.config=e,this.open=t}eq(e){return this.config==e.config&&this.open==e.open}toDOM(e){if(this.config.markerDOM)return this.config.markerDOM(this.open);let t=document.createElement("span");return t.textContent=this.open?this.config.openText:this.config.closedText,t.title=e.state.phrase(this.open?"Fold line":"Unfold line"),t}}const TP=Gw.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class _P{constructor(e,t){let n;function i(e){let t=YO.newName();return(n||(n=Object.create(null)))["."+t]=e,t}this.specs=e;const r="string"==typeof t.all?t.all:t.all?i(t.all):void 0,s=t.scope;this.scope=s instanceof R_?e=>e.prop(Q_)==s.data:s?e=>e==s:void 0,this.style=c_(e.map((e=>({tag:e.tag,class:e.class||i(Object.assign({},e,{tag:null}))}))),{all:r}).style,this.module=n?new YO(n):null,this.themeType=t.themeType}static define(e,t){return new _P(e,t||{})}}const PP=Lm.define(),CP=Lm.define({combine:e=>e.length?[e[0]]:null});function EP(e){let t=e.facet(PP);return t.length?t:e.facet(CP)}class QP{constructor(e){this.markCache=Object.create(null),this.tree=I_(e.state),this.decorations=this.buildDeco(e,EP(e.state)),this.decoratedTo=e.viewport.to}update(e){let t=I_(e.state),n=EP(e.state),i=n!=EP(e.startState),{viewport:r}=e.view,s=e.changes.mapPos(this.decoratedTo,1);t.length<r.to&&!i&&t.type==this.tree.type&&s>=r.to?(this.decorations=this.decorations.map(e.changes),this.decoratedTo=s):(t!=this.tree||e.viewportChanged||i)&&(this.tree=t,this.decorations=this.buildDeco(e.view,n),this.decoratedTo=r.to)}buildDeco(e,t){if(!t||!this.tree.length)return oy.none;let n=new RO;for(let{from:i,to:r}of e.visibleRanges)u_(this.tree,t,((e,t,i)=>{n.add(e,t,this.markCache[i]||(this.markCache[i]=oy.mark({class:i})))}),i,r);return n.finish()}}const AP=Zm.high(Ky.fromClass(QP,{decorations:e=>e.decorations})),RP=_P.define([{tag:C_.meta,color:"#404740"},{tag:C_.link,textDecoration:"underline"},{tag:C_.heading,textDecoration:"underline",fontWeight:"bold"},{tag:C_.emphasis,fontStyle:"italic"},{tag:C_.strong,fontWeight:"bold"},{tag:C_.strikethrough,textDecoration:"line-through"},{tag:C_.keyword,color:"#708"},{tag:[C_.atom,C_.bool,C_.url,C_.contentSeparator,C_.labelName],color:"#219"},{tag:[C_.literal,C_.inserted],color:"#164"},{tag:[C_.string,C_.deleted],color:"#a11"},{tag:[C_.regexp,C_.escape,C_.special(C_.string)],color:"#e40"},{tag:C_.definition(C_.variableName),color:"#00f"},{tag:C_.local(C_.variableName),color:"#30a"},{tag:[C_.typeName,C_.namespace],color:"#085"},{tag:C_.className,color:"#167"},{tag:[C_.special(C_.variableName),C_.macroName],color:"#256"},{tag:C_.definition(C_.propertyName),color:"#00c"},{tag:C_.comment,color:"#940"},{tag:C_.invalid,color:"#f00"}]),NP=Gw.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),IP=1e4,DP="()[]{}",MP=Lm.define({combine:e=>_O(e,{afterCursor:!0,brackets:DP,maxScanDistance:IP,renderMatch:UP})}),LP=oy.mark({class:"cm-matchingBracket"}),$P=oy.mark({class:"cm-nonmatchingBracket"});function UP(e){let t=[],n=e.matched?LP:$P;return t.push(n.range(e.start.from,e.start.to)),e.end&&t.push(n.range(e.end.from,e.end.to)),t}const qP=Bm.define({create:()=>oy.none,update(e,t){if(!t.docChanged&&!t.selection)return e;let n=[],i=t.state.facet(MP);for(let r of t.state.selection.ranges){if(!r.empty)continue;let e=FP(t.state,r.head,-1,i)||r.head>0&&FP(t.state,r.head-1,1,i)||i.afterCursor&&(FP(t.state,r.head,1,i)||r.head<t.state.doc.length&&FP(t.state,r.head+1,-1,i));e&&(n=n.concat(i.renderMatch(e,t.state)))}return oy.set(n,!0)},provide:e=>Gw.decorations.from(e)}),VP=[qP,NP];const zP=new ET;function jP(e,t,n){let i=e.prop(t<0?ET.openedBy:ET.closedBy);if(i)return i;if(1==e.name.length){let i=n.indexOf(e.name);if(i>-1&&i%2==(t<0?1:0))return[n[i+t]]}return null}function BP(e){let t=e.type.prop(zP);return t?t(e.node):e}function FP(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=i.maxScanDistance||IP,s=i.brackets||DP,o=I_(e),a=o.resolveInner(t,n);for(let l=a;l;l=l.parent){let i=jP(l.type,n,s);if(i&&l.from<l.to){let r=BP(l);if(r&&(n>0?t>=r.from&&t<r.to:t>r.from&&t<=r.to))return WP(e,t,n,l,r,i,s)}}return function(e,t,n,i,r,s,o){let a=n<0?e.sliceDoc(t-1,t):e.sliceDoc(t,t+1),l=o.indexOf(a);if(l<0||l%2==0!=n>0)return null;let h={from:n<0?t-1:t,to:n>0?t+1:t},c=e.doc.iterRange(t,n>0?e.doc.length:0),u=0;for(let d=0;!c.next().done&&d<=s;){let e=c.value;n<0&&(d+=e.length);let s=t+d*n;for(let t=n>0?0:e.length-1,a=n>0?e.length:-1;t!=a;t+=n){let a=o.indexOf(e[t]);if(!(a<0||i.resolveInner(s+t,1).type!=r))if(a%2==0==n>0)u++;else{if(1==u)return{start:h,end:{from:s+t,to:s+t+1},matched:a>>1==l>>1};u--}}n>0&&(d+=e.length)}return c.done?{start:h,matched:!1}:null}(e,t,n,o,a.type,r,s)}function WP(e,t,n,i,r,s,o){let a=i.parent,l={from:r.from,to:r.to},h=0,c=null===a||void 0===a?void 0:a.cursor();if(c&&(n<0?c.childBefore(i.from):c.childAfter(i.to)))do{if(n<0?c.to<=i.from:c.from>=i.to){if(0==h&&s.indexOf(c.type.name)>-1&&c.from<c.to){let e=BP(c);return{start:l,end:e?{from:e.from,to:e.to}:void 0,matched:!0}}if(jP(c.type,n,o))h++;else if(jP(c.type,-n,o)){if(0==h){let e=BP(c);return{start:l,end:e&&e.from<e.to?{from:e.from,to:e.to}:void 0,matched:!1}}h--}}}while(n<0?c.prevSibling():c.nextSibling());return{start:l,matched:!1}}const XP=Object.create(null),YP=[RT.none],GP=[],ZP=Object.create(null),HP=Object.create(null);for(let[n,Sk]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])HP[n]=JP(XP,Sk);function KP(e,t){GP.indexOf(e)>-1||(GP.push(e),console.warn(t))}function JP(e,t){let n=[];for(let a of t.split(" ")){let t=[];for(let n of a.split(".")){let i=e[n]||C_[n];i?"function"==typeof i?t.length?t=t.map(i):KP(n,"Modifier ".concat(n," used at start of tag")):t.length?KP(n,"Tag ".concat(n," used as modifier")):t=Array.isArray(i)?i:[i]:KP(n,"Unknown highlighting tag ".concat(n))}for(let e of t)n.push(e)}if(!n.length)return 0;let i=t.replace(/ /g,"_"),r=i+" "+n.map((e=>e.id)),s=ZP[r];if(s)return s.id;let o=ZP[r]=RT.define({id:YP.length,name:i,props:[a_({[i]:n})]});return YP.push(o),o.id}gy.RTL,gy.LTR;function eC(e,t){return n=>{let{state:i,dispatch:r}=n;if(i.readOnly)return!1;let s=e(t,i);return!!s&&(r(i.update(s)),!0)}}const tC=eC(aC,0),nC=eC(oC,0),iC=eC(((e,t)=>oC(e,t,function(e){let t=[];for(let n of e.selection.ranges){let i=e.doc.lineAt(n.from),r=n.to<=i.to?i:e.doc.lineAt(n.to),s=t.length-1;s>=0&&t[s].to>i.from?t[s].to=r.to:t.push({from:i.from+/^\s*/.exec(i.text)[0].length,to:r.to})}return t}(t))),0);function rC(e,t){let n=e.languageDataAt("commentTokens",t);return n.length?n[0]:{}}const sC=50;function oC(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.selection.ranges,i=n.map((e=>rC(t,e.from).block));if(!i.every((e=>e)))return null;let r=n.map(((e,n)=>function(e,t,n,i){let r,s,{open:o,close:a}=t,l=e.sliceDoc(n-sC,n),h=e.sliceDoc(i,i+sC),c=/\s*$/.exec(l)[0].length,u=/^\s*/.exec(h)[0].length,d=l.length-c;if(l.slice(d-o.length,d)==o&&h.slice(u,u+a.length)==a)return{open:{pos:n-c,margin:c&&1},close:{pos:i+u,margin:u&&1}};i-n<=2*sC?r=s=e.sliceDoc(n,i):(r=e.sliceDoc(n,n+sC),s=e.sliceDoc(i-sC,i));let f=/^\s*/.exec(r)[0].length,p=/\s*$/.exec(s)[0].length,g=s.length-p-a.length;return r.slice(f,f+o.length)==o&&s.slice(g,g+a.length)==a?{open:{pos:n+f+o.length,margin:/\s/.test(r.charAt(f+o.length))?1:0},close:{pos:i-p-a.length,margin:/\s/.test(s.charAt(g-1))?1:0}}:null}(t,i[n],e.from,e.to)));if(2!=e&&!r.every((e=>e)))return{changes:t.changes(n.map(((e,t)=>r[t]?[]:[{from:e.from,insert:i[t].open+" "},{from:e.to,insert:" "+i[t].close}])))};if(1!=e&&r.some((e=>e))){let e=[];for(let t,n=0;n<r.length;n++)if(t=r[n]){let r=i[n],{open:s,close:o}=t;e.push({from:s.pos-r.open.length,to:s.pos+s.margin},{from:o.pos-o.margin,to:o.pos+r.close.length})}return{changes:e}}return null}function aC(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.selection.ranges,i=[],r=-1;for(let{from:s,to:o}of n){let e=i.length,n=1e9,a=rC(t,s).line;if(a){for(let e=s;e<=o;){let l=t.doc.lineAt(e);if(l.from>r&&(s==o||o>l.from)){r=l.from;let e=/^\s*/.exec(l.text)[0].length,t=e==l.length,s=l.text.slice(e,e+a.length)==a?e:-1;e<l.text.length&&e<n&&(n=e),i.push({line:l,comment:s,token:a,indent:e,empty:t,single:!1})}e=l.to+1}if(n<1e9)for(let t=e;t<i.length;t++)i[t].indent<i[t].line.text.length&&(i[t].indent=n);i.length==e+1&&(i[e].single=!0)}}if(2!=e&&i.some((e=>e.comment<0&&(!e.empty||e.single)))){let e=[];for(let{line:t,token:r,indent:s,empty:o,single:a}of i)!a&&o||e.push({from:t.from+s,insert:r+" "});let n=t.changes(e);return{changes:n,selection:t.selection.map(n,1)}}if(1!=e&&i.some((e=>e.comment>=0))){let e=[];for(let{line:t,comment:n,token:r}of i)if(n>=0){let i=t.from+n,s=i+r.length;" "==t.text[s-t.from]&&s++,e.push({from:i,to:s})}return{changes:e}}return null}const lC=cO.define(),hC=cO.define(),cC=Lm.define(),uC=Lm.define({combine:e=>_O(e,{minDepth:100,newGroupDelay:500,joinToEvent:(e,t)=>t},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:(e,t)=>(n,i)=>e(n,i)||t(n,i)})}),dC=Bm.define({create:()=>CC.empty,update(e,t){let n=t.state.facet(uC),i=t.annotation(lC);if(i){let r=vC.fromTransaction(t,i.selection),s=i.side,o=0==s?e.undone:e.done;return o=r?yC(o,o.length,n.minDepth,r):SC(o,t.startState.selection),new CC(0==s?i.rest:o,0==s?o:i.rest)}let r=t.annotation(hC);if("full"!=r&&"before"!=r||(e=e.isolate()),!1===t.annotation(pO.addToHistory))return t.changes.empty?e:e.addMapping(t.changes.desc);let s=vC.fromTransaction(t),o=t.annotation(pO.time),a=t.annotation(pO.userEvent);return s?e=e.addChanges(s,o,a,n,t):t.selection&&(e=e.addSelection(t.startState.selection,o,a,n.newGroupDelay)),"full"!=r&&"after"!=r||(e=e.isolate()),e},toJSON:e=>({done:e.done.map((e=>e.toJSON())),undone:e.undone.map((e=>e.toJSON()))}),fromJSON:e=>new CC(e.done.map(vC.fromJSON),e.undone.map(vC.fromJSON))});function fC(e,t){return function(n){let{state:i,dispatch:r}=n;if(!t&&i.readOnly)return!1;let s=i.field(dC,!1);if(!s)return!1;let o=s.pop(e,i,t);return!!o&&(r(o),!0)}}const pC=fC(0,!1),gC=fC(1,!1),mC=fC(0,!0),OC=fC(1,!0);class vC{constructor(e,t,n,i,r){this.changes=e,this.effects=t,this.mapped=n,this.startSelection=i,this.selectionsAfter=r}setSelAfter(e){return new vC(this.changes,this.effects,this.mapped,this.startSelection,e)}toJSON(){var e,t,n;return{changes:null===(e=this.changes)||void 0===e?void 0:e.toJSON(),mapped:null===(t=this.mapped)||void 0===t?void 0:t.toJSON(),startSelection:null===(n=this.startSelection)||void 0===n?void 0:n.toJSON(),selectionsAfter:this.selectionsAfter.map((e=>e.toJSON()))}}static fromJSON(e){return new vC(e.changes&&_m.fromJSON(e.changes),[],e.mapped&&Tm.fromJSON(e.mapped),e.startSelection&&Im.fromJSON(e.startSelection),e.selectionsAfter.map(Im.fromJSON))}static fromTransaction(e,t){let n=wC;for(let i of e.startState.facet(cC)){let t=i(e);t.length&&(n=n.concat(t))}return!n.length&&e.changes.empty?null:new vC(e.changes.invert(e.startState.doc),n,void 0,t||e.startState.selection,wC)}static selection(e){return new vC(void 0,wC,void 0,void 0,e)}}function yC(e,t,n,i){let r=t+1>n+20?t-n-1:0,s=e.slice(r,t);return s.push(i),s}function bC(e,t){return e.length?t.length?e.concat(t):e:t}const wC=[],kC=200;function SC(e,t){if(e.length){let n=e[e.length-1],i=n.selectionsAfter.slice(Math.max(0,n.selectionsAfter.length-kC));return i.length&&i[i.length-1].eq(t)?e:(i.push(t),yC(e,e.length-1,1e9,n.setSelAfter(i)))}return[vC.selection([t])]}function xC(e){let t=e[e.length-1],n=e.slice();return n[e.length-1]=t.setSelAfter(t.selectionsAfter.slice(0,t.selectionsAfter.length-1)),n}function TC(e,t){if(!e.length)return e;let n=e.length,i=wC;for(;n;){let r=_C(e[n-1],t,i);if(r.changes&&!r.changes.empty||r.effects.length){let t=e.slice(0,n);return t[n-1]=r,t}t=r.mapped,n--,i=r.selectionsAfter}return i.length?[vC.selection(i)]:wC}function _C(e,t,n){let i=bC(e.selectionsAfter.length?e.selectionsAfter.map((e=>e.map(t))):wC,n);if(!e.changes)return vC.selection(i);let r=e.changes.map(t),s=t.mapDesc(e.changes,!0),o=e.mapped?e.mapped.composeDesc(s):s;return new vC(r,fO.mapEffects(e.effects,t),o,e.startSelection.map(s),i)}const PC=/^(input\.type|delete)($|\.)/;class CC{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0;this.done=e,this.undone=t,this.prevTime=n,this.prevUserEvent=i}isolate(){return this.prevTime?new CC(this.done,this.undone):this}addChanges(e,t,n,i,r){let s=this.done,o=s[s.length-1];return s=o&&o.changes&&!o.changes.empty&&e.changes&&(!n||PC.test(n))&&(!o.selectionsAfter.length&&t-this.prevTime<i.newGroupDelay&&i.joinToEvent(r,function(e,t){let n=[],i=!1;return e.iterChangedRanges(((e,t)=>n.push(e,t))),t.iterChangedRanges(((e,t,r,s)=>{for(let o=0;o<n.length;){let e=n[o++],t=n[o++];s>=e&&r<=t&&(i=!0)}})),i}(o.changes,e.changes))||"input.type.compose"==n)?yC(s,s.length-1,i.minDepth,new vC(e.changes.compose(o.changes),bC(e.effects,o.effects),o.mapped,o.startSelection,wC)):yC(s,s.length,i.minDepth,e),new CC(s,wC,t,n)}addSelection(e,t,n,i){let r=this.done.length?this.done[this.done.length-1].selectionsAfter:wC;return r.length>0&&t-this.prevTime<i&&n==this.prevUserEvent&&n&&/^select($|\.)/.test(n)&&function(e,t){return e.ranges.length==t.ranges.length&&0===e.ranges.filter(((e,n)=>e.empty!=t.ranges[n].empty)).length}(r[r.length-1],e)?this:new CC(SC(this.done,e),this.undone,t,n)}addMapping(e){return new CC(TC(this.done,e),TC(this.undone,e),this.prevTime,this.prevUserEvent)}pop(e,t,n){let i=0==e?this.done:this.undone;if(0==i.length)return null;let r=i[i.length-1],s=r.selectionsAfter[0]||t.selection;if(n&&r.selectionsAfter.length)return t.update({selection:r.selectionsAfter[r.selectionsAfter.length-1],annotations:lC.of({side:e,rest:xC(i),selection:s}),userEvent:0==e?"select.undo":"select.redo",scrollIntoView:!0});if(r.changes){let n=1==i.length?wC:i.slice(0,i.length-1);return r.mapped&&(n=TC(n,r.mapped)),t.update({changes:r.changes,selection:r.startSelection,effects:r.effects,annotations:lC.of({side:e,rest:n,selection:s}),filter:!1,userEvent:0==e?"undo":"redo",scrollIntoView:!0})}return null}}CC.empty=new CC(wC,wC);const EC=[{key:"Mod-z",run:pC,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:gC,preventDefault:!0},{linux:"Ctrl-Shift-z",run:gC,preventDefault:!0},{key:"Mod-u",run:mC,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:OC,preventDefault:!0}];function QC(e,t){return Im.create(e.ranges.map(t),e.mainIndex)}function AC(e,t){return e.update({selection:t,scrollIntoView:!0,userEvent:"select"})}function RC(e,t){let{state:n,dispatch:i}=e,r=QC(n.selection,t);return!r.eq(n.selection,!0)&&(i(AC(n,r)),!0)}function NC(e,t){return Im.cursor(t?e.to:e.from)}function IC(e,t){return RC(e,(n=>n.empty?e.moveByChar(n,t):NC(n,t)))}function DC(e){return e.textDirectionAt(e.state.selection.main.head)==gy.LTR}const MC=e=>IC(e,!DC(e)),LC=e=>IC(e,DC(e));function $C(e,t){return RC(e,(n=>n.empty?e.moveByGroup(n,t):NC(n,t)))}"undefined"!=typeof Intl&&Intl.Segmenter;function UC(e,t,n){if(t.type.prop(n))return!0;let i=t.to-t.from;return i&&(i>2||/[^\s,.;:]/.test(e.sliceDoc(t.from,t.to)))||t.firstChild}function qC(e,t,n){let i,r,s=I_(e).resolveInner(t.head),o=n?ET.closedBy:ET.openedBy;for(let a=t.head;;){let t=n?s.childAfter(a):s.childBefore(a);if(!t)break;UC(e,t,o)?s=t:a=n?t.to:t.from}return r=s.type.prop(o)&&(i=n?FP(e,s.from,1):FP(e,s.to,-1))&&i.matched?n?i.end.to:i.end.from:n?s.to:s.from,Im.cursor(r,n?-1:1)}function VC(e,t){return RC(e,(n=>{if(!n.empty)return NC(n,t);let i=e.moveVertically(n,t);return i.head!=n.head?i:e.moveToLineBoundary(n,t)}))}const zC=e=>VC(e,!1),jC=e=>VC(e,!0);function BC(e){let t,n=e.scrollDOM.clientHeight<e.scrollDOM.scrollHeight-2,i=0,r=0;if(n){for(let t of e.state.facet(Gw.scrollMargins)){let n=t(e);(null===n||void 0===n?void 0:n.top)&&(i=Math.max(null===n||void 0===n?void 0:n.top,i)),(null===n||void 0===n?void 0:n.bottom)&&(r=Math.max(null===n||void 0===n?void 0:n.bottom,r))}t=e.scrollDOM.clientHeight-i-r}else t=(e.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:i,marginBottom:r,selfScroll:n,height:Math.max(e.defaultLineHeight,t-5)}}function FC(e,t){let n,i=BC(e),{state:r}=e,s=QC(r.selection,(n=>n.empty?e.moveVertically(n,t,i.height):NC(n,t)));if(s.eq(r.selection))return!1;if(i.selfScroll){let t=e.coordsAtPos(r.selection.main.head),o=e.scrollDOM.getBoundingClientRect(),a=o.top+i.marginTop,l=o.bottom-i.marginBottom;t&&t.top>a&&t.bottom<l&&(n=Gw.scrollIntoView(s.main.head,{y:"start",yMargin:t.top-a}))}return e.dispatch(AC(r,s),{effects:n}),!0}const WC=e=>FC(e,!1),XC=e=>FC(e,!0);function YC(e,t,n){let i=e.lineBlockAt(t.head),r=e.moveToLineBoundary(t,n);if(r.head==t.head&&r.head!=(n?i.to:i.from)&&(r=e.moveToLineBoundary(t,n,!1)),!n&&r.head==i.from&&i.length){let n=/^\s*/.exec(e.state.sliceDoc(i.from,Math.min(i.from+100,i.to)))[0].length;n&&t.head!=i.from+n&&(r=Im.cursor(i.from+n))}return r}function GC(e,t,n){let i=!1,r=QC(e.selection,(t=>{let r=FP(e,t.head,-1)||FP(e,t.head,1)||t.head>0&&FP(e,t.head-1,1)||t.head<e.doc.length&&FP(e,t.head+1,-1);if(!r||!r.end)return t;i=!0;let s=r.start.from==t.head?r.end.to:r.end.from;return n?Im.range(t.anchor,s):Im.cursor(s)}));return!!i&&(t(AC(e,r)),!0)}function ZC(e,t){let n=QC(e.state.selection,(e=>{let n=t(e);return Im.range(e.anchor,n.head,n.goalColumn,n.bidiLevel||void 0)}));return!n.eq(e.state.selection)&&(e.dispatch(AC(e.state,n)),!0)}function HC(e,t){return ZC(e,(n=>e.moveByChar(n,t)))}const KC=e=>HC(e,!DC(e)),JC=e=>HC(e,DC(e));function eE(e,t){return ZC(e,(n=>e.moveByGroup(n,t)))}function tE(e,t){return ZC(e,(n=>e.moveVertically(n,t)))}const nE=e=>tE(e,!1),iE=e=>tE(e,!0);function rE(e,t){return ZC(e,(n=>e.moveVertically(n,t,BC(e).height)))}const sE=e=>rE(e,!1),oE=e=>rE(e,!0),aE=e=>{let{state:t,dispatch:n}=e;return n(AC(t,{anchor:0})),!0},lE=e=>{let{state:t,dispatch:n}=e;return n(AC(t,{anchor:t.doc.length})),!0},hE=e=>{let{state:t,dispatch:n}=e;return n(AC(t,{anchor:t.selection.main.anchor,head:0})),!0},cE=e=>{let{state:t,dispatch:n}=e;return n(AC(t,{anchor:t.selection.main.anchor,head:t.doc.length})),!0};function uE(e,t){if(e.state.readOnly)return!1;let n="delete.selection",{state:i}=e,r=i.changeByRange((i=>{let{from:r,to:s}=i;if(r==s){let o=t(i);o<r?(n="delete.backward",o=dE(e,o,!1)):o>r&&(n="delete.forward",o=dE(e,o,!0)),r=Math.min(r,o),s=Math.max(s,o)}else r=dE(e,r,!1),s=dE(e,s,!0);return r==s?{range:i}:{changes:{from:r,to:s},range:Im.cursor(r,r<i.head?-1:1)}}));return!r.changes.empty&&(e.dispatch(i.update(r,{scrollIntoView:!0,userEvent:n,effects:"delete.selection"==n?Gw.announce.of(i.phrase("Selection deleted")):void 0})),!0)}function dE(e,t,n){if(e instanceof Gw)for(let i of e.state.facet(Gw.atomicRanges).map((t=>t(e))))i.between(t,t,((e,i)=>{e<t&&i>t&&(t=n?i:e)}));return t}const fE=(e,t,n)=>uE(e,(i=>{let r,s,o=i.from,{state:a}=e,l=a.doc.lineAt(o);if(n&&!t&&o>l.from&&o<l.from+200&&!/[^ \t]/.test(r=l.text.slice(0,o-l.from))){if("\t"==r[r.length-1])return o-1;let e=jO(r,a.tabSize)%W_(a)||W_(a);for(let t=0;t<e&&" "==r[r.length-1-t];t++)o--;s=o}else s=gm(l.text,o-l.from,t,t)+l.from,s==o&&l.number!=(t?a.doc.lines:1)?s+=t?1:-1:!t&&/[\ufe00-\ufe0f]/.test(l.text.slice(s-l.from,o-l.from))&&(s=gm(l.text,s-l.from,!1,!1)+l.from);return s})),pE=e=>fE(e,!1,!0),gE=e=>fE(e,!0,!1),mE=(e,t)=>uE(e,(n=>{let i=n.head,{state:r}=e,s=r.doc.lineAt(i),o=r.charCategorizer(i);for(let e=null;;){if(i==(t?s.to:s.from)){i==n.head&&s.number!=(t?r.doc.lines:1)&&(i+=t?1:-1);break}let a=gm(s.text,i-s.from,t)+s.from,l=s.text.slice(Math.min(i,a)-s.from,Math.max(i,a)-s.from),h=o(l);if(null!=e&&h!=e)break;" "==l&&i==n.head||(e=h),i=a}return i})),OE=e=>mE(e,!1);function vE(e){let t=[],n=-1;for(let i of e.selection.ranges){let r=e.doc.lineAt(i.from),s=e.doc.lineAt(i.to);if(i.empty||i.to!=s.from||(s=e.doc.lineAt(i.to-1)),n>=r.number){let e=t[t.length-1];e.to=s.to,e.ranges.push(i)}else t.push({from:r.from,to:s.to,ranges:[i]});n=s.number+1}return t}function yE(e,t,n){if(e.readOnly)return!1;let i=[],r=[];for(let s of vE(e)){if(n?s.to==e.doc.length:0==s.from)continue;let t=e.doc.lineAt(n?s.to+1:s.from-1),o=t.length+1;if(n){i.push({from:s.to,to:t.to},{from:s.from,insert:t.text+e.lineBreak});for(let t of s.ranges)r.push(Im.range(Math.min(e.doc.length,t.anchor+o),Math.min(e.doc.length,t.head+o)))}else{i.push({from:t.from,to:s.from},{from:s.to,insert:e.lineBreak+t.text});for(let e of s.ranges)r.push(Im.range(e.anchor-o,e.head-o))}}return!!i.length&&(t(e.update({changes:i,scrollIntoView:!0,selection:Im.create(r,e.selection.mainIndex),userEvent:"move.line"})),!0)}function bE(e,t,n){if(e.readOnly)return!1;let i=[];for(let r of vE(e))n?i.push({from:r.from,insert:e.doc.slice(r.from,r.to)+e.lineBreak}):i.push({from:r.to,insert:e.lineBreak+e.doc.slice(r.from,r.to)});return t(e.update({changes:i,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const wE=SE(!1),kE=SE(!0);function SE(e){return t=>{let{state:n,dispatch:i}=t;if(n.readOnly)return!1;let r=n.changeByRange((t=>{let{from:i,to:r}=t,s=n.doc.lineAt(i),o=!e&&i==r&&function(e,t){if(/\(\)|\[\]|\{\}/.test(e.sliceDoc(t-1,t+1)))return{from:t,to:t};let n,i=I_(e).resolveInner(t),r=i.childBefore(t),s=i.childAfter(t);return r&&s&&r.to<=t&&s.from>=t&&(n=r.type.prop(ET.closedBy))&&n.indexOf(s.name)>-1&&e.doc.lineAt(r.to).from==e.doc.lineAt(s.from).from&&!/\S/.test(e.sliceDoc(r.to,s.from))?{from:r.to,to:s.from}:null}(n,i);e&&(i=r=(r<=s.to?s:n.doc.lineAt(r)).to);let a=new G_(n,{simulateBreak:i,simulateDoubleBreak:!!o}),l=Y_(a,i);for(null==l&&(l=jO(/^\s*/.exec(n.doc.lineAt(i).text)[0],n.tabSize));r<s.to&&/\s/.test(s.text[r-s.from]);)r++;o?({from:i,to:r}=o):i>s.from&&i<s.from+100&&!/\S/.test(s.text.slice(0,i))&&(i=s.from);let h=["",X_(n,l)];return o&&h.push(X_(n,a.lineIndent(s.from,-1))),{changes:{from:i,to:r,insert:tm.of(h)},range:Im.cursor(i+1+h[1].length)}}));return i(n.update(r,{scrollIntoView:!0,userEvent:"input"})),!0}}function xE(e,t){let n=-1;return e.changeByRange((i=>{let r=[];for(let o=i.from;o<=i.to;){let s=e.doc.lineAt(o);s.number>n&&(i.empty||i.to>s.from)&&(t(s,r,i),n=s.number),o=s.to+1}let s=e.changes(r);return{changes:r,range:Im.range(s.mapPos(i.anchor,1),s.mapPos(i.head,1))}}))}const TE=e=>{let{state:t,dispatch:n}=e;return!t.readOnly&&(n(t.update(xE(t,((e,n)=>{n.push({from:e.from,insert:t.facet(F_)})})),{userEvent:"input.indent"})),!0)},_E=e=>{let{state:t,dispatch:n}=e;return!t.readOnly&&(n(t.update(xE(t,((e,n)=>{let i=/^\s*/.exec(e.text)[0];if(!i)return;let r=jO(i,t.tabSize),s=0,o=X_(t,Math.max(0,r-W_(t)));for(;s<i.length&&s<o.length&&i.charCodeAt(s)==o.charCodeAt(s);)s++;n.push({from:e.from+s,to:e.from+i.length,insert:o.slice(s)})})),{userEvent:"delete.dedent"})),!0)},PE=[{key:"ArrowLeft",run:MC,shift:KC,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:e=>$C(e,!DC(e)),shift:e=>eE(e,!DC(e)),preventDefault:!0},{mac:"Cmd-ArrowLeft",run:e=>RC(e,(t=>YC(e,t,!DC(e)))),shift:e=>ZC(e,(t=>YC(e,t,!DC(e)))),preventDefault:!0},{key:"ArrowRight",run:LC,shift:JC,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:e=>$C(e,DC(e)),shift:e=>eE(e,DC(e)),preventDefault:!0},{mac:"Cmd-ArrowRight",run:e=>RC(e,(t=>YC(e,t,DC(e)))),shift:e=>ZC(e,(t=>YC(e,t,DC(e)))),preventDefault:!0},{key:"ArrowUp",run:zC,shift:nE,preventDefault:!0},{mac:"Cmd-ArrowUp",run:aE,shift:hE},{mac:"Ctrl-ArrowUp",run:WC,shift:sE},{key:"ArrowDown",run:jC,shift:iE,preventDefault:!0},{mac:"Cmd-ArrowDown",run:lE,shift:cE},{mac:"Ctrl-ArrowDown",run:XC,shift:oE},{key:"PageUp",run:WC,shift:sE},{key:"PageDown",run:XC,shift:oE},{key:"Home",run:e=>RC(e,(t=>YC(e,t,!1))),shift:e=>ZC(e,(t=>YC(e,t,!1))),preventDefault:!0},{key:"Mod-Home",run:aE,shift:hE},{key:"End",run:e=>RC(e,(t=>YC(e,t,!0))),shift:e=>ZC(e,(t=>YC(e,t,!0))),preventDefault:!0},{key:"Mod-End",run:lE,shift:cE},{key:"Enter",run:wE},{key:"Mod-a",run:e=>{let{state:t,dispatch:n}=e;return n(t.update({selection:{anchor:0,head:t.doc.length},userEvent:"select"})),!0}},{key:"Backspace",run:pE,shift:pE},{key:"Delete",run:gE},{key:"Mod-Backspace",mac:"Alt-Backspace",run:OE},{key:"Mod-Delete",mac:"Alt-Delete",run:e=>mE(e,!0)},{mac:"Mod-Backspace",run:e=>uE(e,(t=>{let n=e.moveToLineBoundary(t,!1).head;return t.head>n?n:Math.max(0,t.head-1)}))},{mac:"Mod-Delete",run:e=>uE(e,(t=>{let n=e.moveToLineBoundary(t,!0).head;return t.head<n?n:Math.min(e.state.doc.length,t.head+1)}))}].concat([{key:"Ctrl-b",run:MC,shift:KC,preventDefault:!0},{key:"Ctrl-f",run:LC,shift:JC},{key:"Ctrl-p",run:zC,shift:nE},{key:"Ctrl-n",run:jC,shift:iE},{key:"Ctrl-a",run:e=>RC(e,(t=>Im.cursor(e.lineBlockAt(t.head).from,1))),shift:e=>ZC(e,(t=>Im.cursor(e.lineBlockAt(t.head).from)))},{key:"Ctrl-e",run:e=>RC(e,(t=>Im.cursor(e.lineBlockAt(t.head).to,-1))),shift:e=>ZC(e,(t=>Im.cursor(e.lineBlockAt(t.head).to)))},{key:"Ctrl-d",run:gE},{key:"Ctrl-h",run:pE},{key:"Ctrl-k",run:e=>uE(e,(t=>{let n=e.lineBlockAt(t.head).to;return t.head<n?n:Math.min(e.state.doc.length,t.head+1)}))},{key:"Ctrl-Alt-h",run:OE},{key:"Ctrl-o",run:e=>{let{state:t,dispatch:n}=e;if(t.readOnly)return!1;let i=t.changeByRange((e=>({changes:{from:e.from,to:e.to,insert:tm.of(["",""])},range:Im.cursor(e.from)})));return n(t.update(i,{scrollIntoView:!0,userEvent:"input"})),!0}},{key:"Ctrl-t",run:e=>{let{state:t,dispatch:n}=e;if(t.readOnly)return!1;let i=t.changeByRange((e=>{if(!e.empty||0==e.from||e.from==t.doc.length)return{range:e};let n=e.from,i=t.doc.lineAt(n),r=n==i.from?n-1:gm(i.text,n-i.from,!1)+i.from,s=n==i.to?n+1:gm(i.text,n-i.from,!0)+i.from;return{changes:{from:r,to:s,insert:t.doc.slice(n,s).append(t.doc.slice(r,n))},range:Im.cursor(s)}}));return!i.changes.empty&&(n(t.update(i,{scrollIntoView:!0,userEvent:"move.character"})),!0)}},{key:"Ctrl-v",run:XC}].map((e=>({mac:e.key,run:e.run,shift:e.shift})))),CE=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:e=>RC(e,(t=>qC(e.state,t,!DC(e)))),shift:e=>ZC(e,(t=>qC(e.state,t,!DC(e))))},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:e=>RC(e,(t=>qC(e.state,t,DC(e)))),shift:e=>ZC(e,(t=>qC(e.state,t,DC(e))))},{key:"Alt-ArrowUp",run:e=>{let{state:t,dispatch:n}=e;return yE(t,n,!1)}},{key:"Shift-Alt-ArrowUp",run:e=>{let{state:t,dispatch:n}=e;return bE(t,n,!1)}},{key:"Alt-ArrowDown",run:e=>{let{state:t,dispatch:n}=e;return yE(t,n,!0)}},{key:"Shift-Alt-ArrowDown",run:e=>{let{state:t,dispatch:n}=e;return bE(t,n,!0)}},{key:"Escape",run:e=>{let{state:t,dispatch:n}=e,i=t.selection,r=null;return i.ranges.length>1?r=Im.create([i.main]):i.main.empty||(r=Im.create([Im.cursor(i.main.head)])),!!r&&(n(AC(t,r)),!0)}},{key:"Mod-Enter",run:kE},{key:"Alt-l",mac:"Ctrl-l",run:e=>{let{state:t,dispatch:n}=e,i=vE(t).map((e=>{let{from:n,to:i}=e;return Im.range(n,Math.min(i+1,t.doc.length))}));return n(t.update({selection:Im.create(i),userEvent:"select"})),!0}},{key:"Mod-i",run:e=>{let{state:t,dispatch:n}=e,i=QC(t.selection,(e=>{var n;for(let i=I_(t).resolveStack(e.from,1);i;i=i.next){let{node:t}=i;if((t.from<e.from&&t.to>=e.to||t.to>e.to&&t.from<=e.from)&&(null===(n=t.parent)||void 0===n?void 0:n.parent))return Im.range(t.to,t.from)}return e}));return n(AC(t,i)),!0},preventDefault:!0},{key:"Mod-[",run:_E},{key:"Mod-]",run:TE},{key:"Mod-Alt-\\",run:e=>{let{state:t,dispatch:n}=e;if(t.readOnly)return!1;let i=Object.create(null),r=new G_(t,{overrideIndentation:e=>{let t=i[e];return null==t?-1:t}}),s=xE(t,((e,n,s)=>{let o=Y_(r,e.from);if(null==o)return;/\S/.test(e.text)||(o=0);let a=/^\s*/.exec(e.text)[0],l=X_(t,o);(a!=l||s.from<e.from+a.length)&&(i[e.from]=o,n.push({from:e.from,to:e.from+a.length,insert:l}))}));return s.changes.empty||n(t.update(s,{userEvent:"indent"})),!0}},{key:"Shift-Mod-k",run:e=>{if(e.state.readOnly)return!1;let{state:t}=e,n=t.changes(vE(t).map((e=>{let{from:n,to:i}=e;return n>0?n--:i<t.doc.length&&i++,{from:n,to:i}}))),i=QC(t.selection,(t=>{let n;if(e.lineWrapping){let i=e.lineBlockAt(t.head),r=e.coordsAtPos(t.head,t.assoc||1);r&&(n=i.bottom+e.documentTop-r.bottom+e.defaultLineHeight/2)}return e.moveVertically(t,!0,n)})).map(n);return e.dispatch({changes:n,selection:i,scrollIntoView:!0,userEvent:"delete.line"}),!0}},{key:"Shift-Mod-\\",run:e=>{let{state:t,dispatch:n}=e;return GC(t,n,!1)}},{key:"Mod-/",run:e=>{let{state:t}=e,n=t.doc.lineAt(t.selection.main.from),i=rC(e.state,n.from);return i.line?tC(e):!!i.block&&iC(e)}},{key:"Alt-A",run:nC},{key:"Ctrl-m",mac:"Shift-Alt-m",run:e=>(e.setTabFocusMode(),!0)}].concat(PE);function EE(){var e=arguments[0];"string"==typeof e&&(e=document.createElement(e));var t=1,n=arguments[1];if(n&&"object"==typeof n&&null==n.nodeType&&!Array.isArray(n)){for(var i in n)if(Object.prototype.hasOwnProperty.call(n,i)){var r=n[i];"string"==typeof r?e.setAttribute(i,r):null!=r&&(e[i]=r)}t++}for(;t<arguments.length;t++)QE(e,arguments[t]);return e}function QE(e,t){if("string"==typeof t)e.appendChild(document.createTextNode(t));else if(null==t);else if(null!=t.nodeType)e.appendChild(t);else{if(!Array.isArray(t))throw new RangeError("Unsupported child node: "+t);for(var n=0;n<t.length;n++)QE(e,t[n])}}const AE="function"==typeof String.prototype.normalize?e=>e.normalize("NFKD"):e=>e;class RE{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length,r=arguments.length>4?arguments[4]:void 0,s=arguments.length>5?arguments[5]:void 0;this.test=s,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=e.iterRange(n,i),this.bufferStart=n,this.normalize=r?e=>r(AE(e)):AE,this.query=this.normalize(t)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return bm(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let e=this.peek();if(e<0)return this.done=!0,this;let t=wm(e),n=this.bufferStart+this.bufferPos;this.bufferPos+=km(e);let i=this.normalize(t);for(let r=0,s=n;;r++){let e=i.charCodeAt(r),o=this.match(e,s,this.bufferPos+this.bufferStart);if(r==i.length-1){if(o)return this.value=o,this;break}s==n&&r<t.length&&t.charCodeAt(r)==e&&s++}}}match(e,t,n){let i=null;for(let r=0;r<this.matches.length;r+=2){let t=this.matches[r],s=!1;this.query.charCodeAt(t)==e&&(t==this.query.length-1?i={from:this.matches[r+1],to:n}:(this.matches[r]++,s=!0)),s||(this.matches.splice(r,2),r-=2)}return this.query.charCodeAt(0)==e&&(1==this.query.length?i={from:t,to:n}:this.matches.push(1,t)),i&&this.test&&!this.test(i.from,i.to,this.buffer,this.bufferStart)&&(i=null),i}}"undefined"!=typeof Symbol&&(RE.prototype[Symbol.iterator]=function(){return this});const NE={from:-1,to:-1,match:/.*/.exec("")},IE="gm"+(null==/x/.unicode?"":"u");class DE{constructor(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:e.length;if(this.text=e,this.to=r,this.curLine="",this.done=!1,this.value=NE,/\\[sWDnr]|\n|\r|\[\^/.test(t))return new $E(e,t,n,i,r);this.re=new RegExp(t,IE+((null===n||void 0===n?void 0:n.ignoreCase)?"i":"")),this.test=null===n||void 0===n?void 0:n.test,this.iter=e.iter();let s=e.lineAt(i);this.curLineStart=s.from,this.matchPos=UE(e,i),this.getLine(this.curLineStart)}getLine(e){this.iter.next(e),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let e=this.matchPos-this.curLineStart;;){this.re.lastIndex=e;let t=this.matchPos<=this.to&&this.re.exec(this.curLine);if(t){let n=this.curLineStart+t.index,i=n+t[0].length;if(this.matchPos=UE(this.text,i+(n==i?1:0)),n==this.curLineStart+this.curLine.length&&this.nextLine(),(n<i||n>this.value.to)&&(!this.test||this.test(n,i,t)))return this.value={from:n,to:i,match:t},this;e=this.matchPos-this.curLineStart}else{if(!(this.curLineStart+this.curLine.length<this.to))return this.done=!0,this;this.nextLine(),e=0}}}}const ME=new WeakMap;class LE{constructor(e,t){this.from=e,this.text=t}get to(){return this.from+this.text.length}static get(e,t,n){let i=ME.get(e);if(!i||i.from>=n||i.to<=t){let i=new LE(t,e.sliceString(t,n));return ME.set(e,i),i}if(i.from==t&&i.to==n)return i;let{text:r,from:s}=i;return s>t&&(r=e.sliceString(t,s)+r,s=t),i.to<n&&(r+=e.sliceString(i.to,n)),ME.set(e,new LE(s,r)),new LE(t,r.slice(t-s,n-s))}}class $E{constructor(e,t,n,i,r){this.text=e,this.to=r,this.done=!1,this.value=NE,this.matchPos=UE(e,i),this.re=new RegExp(t,IE+((null===n||void 0===n?void 0:n.ignoreCase)?"i":"")),this.test=null===n||void 0===n?void 0:n.test,this.flat=LE.get(e,i,this.chunkEnd(i+5e3))}chunkEnd(e){return e>=this.to?this.to:this.text.lineAt(e).to}next(){for(;;){let e=this.re.lastIndex=this.matchPos-this.flat.from,t=this.re.exec(this.flat.text);if(t&&!t[0]&&t.index==e&&(this.re.lastIndex=e+1,t=this.re.exec(this.flat.text)),t){let e=this.flat.from+t.index,n=e+t[0].length;if((this.flat.to>=this.to||t.index+t[0].length<=this.flat.text.length-10)&&(!this.test||this.test(e,n,t)))return this.value={from:e,to:n,match:t},this.matchPos=UE(this.text,n+(e==n?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=LE.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+2*this.flat.text.length))}}}function UE(e,t){if(t>=e.length)return t;let n,i=e.lineAt(t);for(;t<i.to&&(n=i.text.charCodeAt(t-i.from))>=56320&&n<57344;)t++;return t}function qE(e){let t=EE("input",{class:"cm-textfield",name:"line",value:String(e.state.doc.lineAt(e.state.selection.main.head).number)});function n(){let n=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(t.value);if(!n)return;let{state:i}=e,r=i.doc.lineAt(i.selection.main.head),[,s,o,a,l]=n,h=a?+a.slice(1):0,c=o?+o:r.number;if(o&&l){let e=c/100;s&&(e=e*("-"==s?-1:1)+r.number/i.doc.lines),c=Math.round(i.doc.lines*e)}else o&&s&&(c=c*("-"==s?-1:1)+r.number);let u=i.doc.line(Math.max(1,Math.min(i.doc.lines,c))),d=Im.cursor(u.from+Math.max(0,Math.min(h,u.length)));e.dispatch({effects:[VE.of(!1),Gw.scrollIntoView(d.from,{y:"center"})],selection:d}),e.focus()}return{dom:EE("form",{class:"cm-gotoLine",onkeydown:t=>{27==t.keyCode?(t.preventDefault(),e.dispatch({effects:VE.of(!1)}),e.focus()):13==t.keyCode&&(t.preventDefault(),n())},onsubmit:e=>{e.preventDefault(),n()}},EE("label",e.state.phrase("Go to line"),": ",t)," ",EE("button",{class:"cm-button",type:"submit"},e.state.phrase("go")))}}"undefined"!=typeof Symbol&&(DE.prototype[Symbol.iterator]=$E.prototype[Symbol.iterator]=function(){return this});const VE=fO.define(),zE=Bm.define({create:()=>!0,update(e,t){for(let n of t.effects)n.is(VE)&&(e=n.value);return e},provide:e=>pS.from(e,(e=>e?qE:null))}),jE=Gw.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px","& label":{fontSize:"80%"}}}),BE={highlightWordAroundCursor:!1,minSelectionLength:1,maxMatches:100,wholeWords:!1},FE=Lm.define({combine:e=>_O(e,BE,{highlightWordAroundCursor:(e,t)=>e||t,minSelectionLength:Math.min,maxMatches:Math.min})});const WE=oy.mark({class:"cm-selectionMatch"}),XE=oy.mark({class:"cm-selectionMatch cm-selectionMatch-main"});function YE(e,t,n,i){return(0==n||e(t.sliceDoc(n-1,n))!=wO.Word)&&(i==t.doc.length||e(t.sliceDoc(i,i+1))!=wO.Word)}const GE=Ky.fromClass(class{constructor(e){this.decorations=this.getDeco(e)}update(e){(e.selectionSet||e.docChanged||e.viewportChanged)&&(this.decorations=this.getDeco(e.view))}getDeco(e){let t=e.state.facet(FE),{state:n}=e,i=n.selection;if(i.ranges.length>1)return oy.none;let r,s=i.main,o=null;if(s.empty){if(!t.highlightWordAroundCursor)return oy.none;let e=n.wordAt(s.head);if(!e)return oy.none;o=n.charCategorizer(s.head),r=n.sliceDoc(e.from,e.to)}else{let e=s.to-s.from;if(e<t.minSelectionLength||e>200)return oy.none;if(t.wholeWords){if(r=n.sliceDoc(s.from,s.to),o=n.charCategorizer(s.head),!YE(o,n,s.from,s.to)||!function(e,t,n,i){return e(t.sliceDoc(n,n+1))==wO.Word&&e(t.sliceDoc(i-1,i))==wO.Word}(o,n,s.from,s.to))return oy.none}else if(r=n.sliceDoc(s.from,s.to),!r)return oy.none}let a=[];for(let l of e.visibleRanges){let e=new RE(n.doc,r,l.from,l.to);for(;!e.next().done;){let{from:i,to:r}=e.value;if((!o||YE(o,n,i,r))&&(s.empty&&i<=s.from&&r>=s.to?a.push(XE.range(i,r)):(i>=s.to||r<=s.from)&&a.push(WE.range(i,r)),a.length>t.maxMatches))return oy.none}}return oy.set(a)}},{decorations:e=>e.decorations}),ZE=Gw.baseTheme({".cm-selectionMatch":{backgroundColor:"#99ff7780"},".cm-searchMatch .cm-selectionMatch":{backgroundColor:"transparent"}});const HE=Lm.define({combine:e=>_O(e,{top:!1,caseSensitive:!1,literal:!1,regexp:!1,wholeWord:!1,createPanel:e=>new _Q(e),scrollToMatch:e=>Gw.scrollIntoView(e)})});class KE{constructor(e){this.search=e.search,this.caseSensitive=!!e.caseSensitive,this.literal=!!e.literal,this.regexp=!!e.regexp,this.replace=e.replace||"",this.valid=!!this.search&&(!this.regexp||function(e){try{return new RegExp(e,IE),!0}catch(Lx){return!1}}(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!e.wholeWord}unquote(e){return this.literal?e:e.replace(/\\([nrt\\])/g,((e,t)=>"n"==t?"\n":"r"==t?"\r":"t"==t?"\t":"\\"))}eq(e){return this.search==e.search&&this.replace==e.replace&&this.caseSensitive==e.caseSensitive&&this.regexp==e.regexp&&this.wholeWord==e.wholeWord}create(){return this.regexp?new sQ(this):new tQ(this)}getCursor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0,i=e.doc?e:TO.create({doc:e});return null==n&&(n=i.doc.length),this.regexp?nQ(this,i,t,n):eQ(this,i,t,n)}}class JE{constructor(e){this.spec=e}}function eQ(e,t,n,i){return new RE(t.doc,e.unquoted,n,i,e.caseSensitive?void 0:e=>e.toLowerCase(),e.wholeWord?function(e,t){return(n,i,r,s)=>((s>n||s+r.length<i)&&(s=Math.max(0,n-2),r=e.sliceString(s,Math.min(e.length,i+2))),(t(iQ(r,n-s))!=wO.Word||t(rQ(r,n-s))!=wO.Word)&&(t(rQ(r,i-s))!=wO.Word||t(iQ(r,i-s))!=wO.Word))}(t.doc,t.charCategorizer(t.selection.main.head)):void 0)}class tQ extends JE{constructor(e){super(e)}nextMatch(e,t,n){let i=eQ(this.spec,e,n,e.doc.length).nextOverlapping();return i.done&&(i=eQ(this.spec,e,0,t).nextOverlapping()),i.done?null:i.value}prevMatchInRange(e,t,n){for(let i=n;;){let n=Math.max(t,i-1e4-this.spec.unquoted.length),r=eQ(this.spec,e,n,i),s=null;for(;!r.nextOverlapping().done;)s=r.value;if(s)return s;if(n==t)return null;i-=1e4}}prevMatch(e,t,n){return this.prevMatchInRange(e,0,t)||this.prevMatchInRange(e,n,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace)}matchAll(e,t){let n=eQ(this.spec,e,0,e.doc.length),i=[];for(;!n.next().done;){if(i.length>=t)return null;i.push(n.value)}return i}highlight(e,t,n,i){let r=eQ(this.spec,e,Math.max(0,t-this.spec.unquoted.length),Math.min(n+this.spec.unquoted.length,e.doc.length));for(;!r.next().done;)i(r.value.from,r.value.to)}}function nQ(e,t,n,i){return new DE(t.doc,e.search,{ignoreCase:!e.caseSensitive,test:e.wholeWord?(r=t.charCategorizer(t.selection.main.head),(e,t,n)=>!n[0].length||(r(iQ(n.input,n.index))!=wO.Word||r(rQ(n.input,n.index))!=wO.Word)&&(r(rQ(n.input,n.index+n[0].length))!=wO.Word||r(iQ(n.input,n.index+n[0].length))!=wO.Word)):void 0},n,i);var r}function iQ(e,t){return e.slice(gm(e,t,!1),t)}function rQ(e,t){return e.slice(t,gm(e,t))}class sQ extends JE{nextMatch(e,t,n){let i=nQ(this.spec,e,n,e.doc.length).next();return i.done&&(i=nQ(this.spec,e,0,t).next()),i.done?null:i.value}prevMatchInRange(e,t,n){for(let i=1;;i++){let r=Math.max(t,n-1e4*i),s=nQ(this.spec,e,r,n),o=null;for(;!s.next().done;)o=s.value;if(o&&(r==t||o.from>r+10))return o;if(r==t)return null}}prevMatch(e,t,n){return this.prevMatchInRange(e,0,t)||this.prevMatchInRange(e,n,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace).replace(/\$([$&\d+])/g,((t,n)=>"$"==n?"$":"&"==n?e.match[0]:"0"!=n&&+n<e.match.length?e.match[n]:t))}matchAll(e,t){let n=nQ(this.spec,e,0,e.doc.length),i=[];for(;!n.next().done;){if(i.length>=t)return null;i.push(n.value)}return i}highlight(e,t,n,i){let r=nQ(this.spec,e,Math.max(0,t-250),Math.min(n+250,e.doc.length));for(;!r.next().done;)i(r.value.from,r.value.to)}}const oQ=fO.define(),aQ=fO.define(),lQ=Bm.define({create:e=>new hQ(bQ(e).create(),null),update(e,t){for(let n of t.effects)n.is(oQ)?e=new hQ(n.value.create(),e.panel):n.is(aQ)&&(e=new hQ(e.query,n.value?yQ:null));return e},provide:e=>pS.from(e,(e=>e.panel))});class hQ{constructor(e,t){this.query=e,this.panel=t}}const cQ=oy.mark({class:"cm-searchMatch"}),uQ=oy.mark({class:"cm-searchMatch cm-searchMatch-selected"}),dQ=Ky.fromClass(class{constructor(e){this.view=e,this.decorations=this.highlight(e.state.field(lQ))}update(e){let t=e.state.field(lQ);(t!=e.startState.field(lQ)||e.docChanged||e.selectionSet||e.viewportChanged)&&(this.decorations=this.highlight(t))}highlight(e){let{query:t,panel:n}=e;if(!n||!t.spec.valid)return oy.none;let{view:i}=this,r=new RO;for(let s=0,o=i.visibleRanges,a=o.length;s<a;s++){let{from:e,to:n}=o[s];for(;s<a-1&&n>o[s+1].from-500;)n=o[++s].to;t.highlight(i.state,e,n,((e,t)=>{let n=i.state.selection.ranges.some((n=>n.from==e&&n.to==t));r.add(e,t,n?uQ:cQ)}))}return r.finish()}},{decorations:e=>e.decorations});function fQ(e){return t=>{let n=t.state.field(lQ,!1);return n&&n.query.spec.valid?e(t,n):SQ(t)}}const pQ=fQ(((e,t)=>{let{query:n}=t,{to:i}=e.state.selection.main,r=n.nextMatch(e.state,i,i);if(!r)return!1;let s=Im.single(r.from,r.to),o=e.state.facet(HE);return e.dispatch({selection:s,effects:[QQ(e,r),o.scrollToMatch(s.main,e)],userEvent:"select.search"}),kQ(e),!0})),gQ=fQ(((e,t)=>{let{query:n}=t,{state:i}=e,{from:r}=i.selection.main,s=n.prevMatch(i,r,r);if(!s)return!1;let o=Im.single(s.from,s.to),a=e.state.facet(HE);return e.dispatch({selection:o,effects:[QQ(e,s),a.scrollToMatch(o.main,e)],userEvent:"select.search"}),kQ(e),!0})),mQ=fQ(((e,t)=>{let{query:n}=t,i=n.matchAll(e.state,1e3);return!(!i||!i.length)&&(e.dispatch({selection:Im.create(i.map((e=>Im.range(e.from,e.to)))),userEvent:"select.search.matches"}),!0)})),OQ=fQ(((e,t)=>{let{query:n}=t,{state:i}=e,{from:r,to:s}=i.selection.main;if(i.readOnly)return!1;let o=n.nextMatch(i,r,r);if(!o)return!1;let a,l,h=[],c=[];if(o.from==r&&o.to==s&&(l=i.toText(n.getReplacement(o)),h.push({from:o.from,to:o.to,insert:l}),o=n.nextMatch(i,o.from,o.to),c.push(Gw.announce.of(i.phrase("replaced match on line $",i.doc.lineAt(r).number)+"."))),o){let t=0==h.length||h[0].from>=o.to?0:o.to-o.from-l.length;a=Im.single(o.from-t,o.to-t),c.push(QQ(e,o)),c.push(i.facet(HE).scrollToMatch(a.main,e))}return e.dispatch({changes:h,selection:a,effects:c,userEvent:"input.replace"}),!0})),vQ=fQ(((e,t)=>{let{query:n}=t;if(e.state.readOnly)return!1;let i=n.matchAll(e.state,1e9).map((e=>{let{from:t,to:i}=e;return{from:t,to:i,insert:n.getReplacement(e)}}));if(!i.length)return!1;let r=e.state.phrase("replaced $ matches",i.length)+".";return e.dispatch({changes:i,effects:Gw.announce.of(r),userEvent:"input.replace.all"}),!0}));function yQ(e){return e.state.facet(HE).createPanel(e)}function bQ(e,t){var n,i,r,s,o;let a=e.selection.main,l=a.empty||a.to>a.from+100?"":e.sliceDoc(a.from,a.to);if(t&&!l)return t;let h=e.facet(HE);return new KE({search:(null!==(n=null===t||void 0===t?void 0:t.literal)&&void 0!==n?n:h.literal)?l:l.replace(/\n/g,"\\n"),caseSensitive:null!==(i=null===t||void 0===t?void 0:t.caseSensitive)&&void 0!==i?i:h.caseSensitive,literal:null!==(r=null===t||void 0===t?void 0:t.literal)&&void 0!==r?r:h.literal,regexp:null!==(s=null===t||void 0===t?void 0:t.regexp)&&void 0!==s?s:h.regexp,wholeWord:null!==(o=null===t||void 0===t?void 0:t.wholeWord)&&void 0!==o?o:h.wholeWord})}function wQ(e){let t=cS(e,yQ);return t&&t.dom.querySelector("[main-field]")}function kQ(e){let t=wQ(e);t&&t==e.root.activeElement&&t.select()}const SQ=e=>{let t=e.state.field(lQ,!1);if(t&&t.panel){let n=wQ(e);if(n&&n!=e.root.activeElement){let i=bQ(e.state,t.query.spec);i.valid&&e.dispatch({effects:oQ.of(i)}),n.focus(),n.select()}}else e.dispatch({effects:[aQ.of(!0),t?oQ.of(bQ(e.state,t.query.spec)):fO.appendConfig.of(RQ)]});return!0},xQ=e=>{let t=e.state.field(lQ,!1);if(!t||!t.panel)return!1;let n=cS(e,yQ);return n&&n.dom.contains(e.root.activeElement)&&e.focus(),e.dispatch({effects:aQ.of(!1)}),!0},TQ=[{key:"Mod-f",run:SQ,scope:"editor search-panel"},{key:"F3",run:pQ,shift:gQ,scope:"editor search-panel",preventDefault:!0},{key:"Mod-g",run:pQ,shift:gQ,scope:"editor search-panel",preventDefault:!0},{key:"Escape",run:xQ,scope:"editor search-panel"},{key:"Mod-Shift-l",run:e=>{let{state:t,dispatch:n}=e,i=t.selection;if(i.ranges.length>1||i.main.empty)return!1;let{from:r,to:s}=i.main,o=[],a=0;for(let l=new RE(t.doc,t.sliceDoc(r,s));!l.next().done;){if(o.length>1e3)return!1;l.value.from==r&&(a=o.length),o.push(Im.range(l.value.from,l.value.to))}return n(t.update({selection:Im.create(o,a),userEvent:"select.search.matches"})),!0}},{key:"Mod-Alt-g",run:e=>{let t=cS(e,qE);if(!t){let n=[VE.of(!0)];null==e.state.field(zE,!1)&&n.push(fO.appendConfig.of([zE,jE])),e.dispatch({effects:n}),t=cS(e,qE)}return t&&t.dom.querySelector("input").select(),!0}},{key:"Mod-d",run:e=>{let{state:t,dispatch:n}=e,{ranges:i}=t.selection;if(i.some((e=>e.from===e.to)))return(e=>{let{state:t,dispatch:n}=e,{selection:i}=t,r=Im.create(i.ranges.map((e=>t.wordAt(e.head)||Im.cursor(e.head))),i.mainIndex);return!r.eq(i)&&(n(t.update({selection:r})),!0)})({state:t,dispatch:n});let r=t.sliceDoc(i[0].from,i[0].to);if(t.selection.ranges.some((e=>t.sliceDoc(e.from,e.to)!=r)))return!1;let s=function(e,t){let{main:n,ranges:i}=e.selection,r=e.wordAt(n.head),s=r&&r.from==n.from&&r.to==n.to;for(let o=!1,a=new RE(e.doc,t,i[i.length-1].to);;){if(a.next(),!a.done){if(o&&i.some((e=>e.from==a.value.from)))continue;if(s){let t=e.wordAt(a.value.from);if(!t||t.from!=a.value.from||t.to!=a.value.to)continue}return a.value}if(o)return null;a=new RE(e.doc,t,0,Math.max(0,i[i.length-1].from-1)),o=!0}}(t,r);return!!s&&(n(t.update({selection:t.selection.addRange(Im.range(s.from,s.to),!1),effects:Gw.scrollIntoView(s.to)})),!0)},preventDefault:!0}];class _Q{constructor(e){this.view=e;let t=this.query=e.state.field(lQ).query.spec;function n(e,t,n){return EE("button",{class:"cm-button",name:e,onclick:t,type:"button"},n)}this.commit=this.commit.bind(this),this.searchField=EE("input",{value:t.search,placeholder:PQ(e,"Find"),"aria-label":PQ(e,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=EE("input",{value:t.replace,placeholder:PQ(e,"Replace"),"aria-label":PQ(e,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=EE("input",{type:"checkbox",name:"case",form:"",checked:t.caseSensitive,onchange:this.commit}),this.reField=EE("input",{type:"checkbox",name:"re",form:"",checked:t.regexp,onchange:this.commit}),this.wordField=EE("input",{type:"checkbox",name:"word",form:"",checked:t.wholeWord,onchange:this.commit}),this.dom=EE("div",{onkeydown:e=>this.keydown(e),class:"cm-search"},[this.searchField,n("next",(()=>pQ(e)),[PQ(e,"next")]),n("prev",(()=>gQ(e)),[PQ(e,"previous")]),n("select",(()=>mQ(e)),[PQ(e,"all")]),EE("label",null,[this.caseField,PQ(e,"match case")]),EE("label",null,[this.reField,PQ(e,"regexp")]),EE("label",null,[this.wordField,PQ(e,"by word")]),...e.state.readOnly?[]:[EE("br"),this.replaceField,n("replace",(()=>OQ(e)),[PQ(e,"replace")]),n("replaceAll",(()=>vQ(e)),[PQ(e,"replace all")])],EE("button",{name:"close",onclick:()=>xQ(e),"aria-label":PQ(e,"close"),type:"button"},["\xd7"])])}commit(){let e=new KE({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});e.eq(this.query)||(this.query=e,this.view.dispatch({effects:oQ.of(e)}))}keydown(e){var t,n,i;t=this.view,n=e,i="search-panel",hk(sk(t.state),n,t,i)?e.preventDefault():13==e.keyCode&&e.target==this.searchField?(e.preventDefault(),(e.shiftKey?gQ:pQ)(this.view)):13==e.keyCode&&e.target==this.replaceField&&(e.preventDefault(),OQ(this.view))}update(e){for(let t of e.transactions)for(let e of t.effects)e.is(oQ)&&!e.value.eq(this.query)&&this.setQuery(e.value)}setQuery(e){this.query=e,this.searchField.value=e.search,this.replaceField.value=e.replace,this.caseField.checked=e.caseSensitive,this.reField.checked=e.regexp,this.wordField.checked=e.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(HE).top}}function PQ(e,t){return e.state.phrase(t)}const CQ=30,EQ=/[\s\.,:;?!]/;function QQ(e,t){let{from:n,to:i}=t,r=e.state.doc.lineAt(n),s=e.state.doc.lineAt(i).to,o=Math.max(r.from,n-CQ),a=Math.min(s,i+CQ),l=e.state.sliceDoc(o,a);if(o!=r.from)for(let h=0;h<CQ;h++)if(!EQ.test(l[h+1])&&EQ.test(l[h])){l=l.slice(h);break}if(a!=s)for(let h=l.length-1;h>l.length-CQ;h--)if(!EQ.test(l[h-1])&&EQ.test(l[h])){l=l.slice(0,h);break}return Gw.announce.of("".concat(e.state.phrase("current match"),". ").concat(l," ").concat(e.state.phrase("on line")," ").concat(r.number,"."))}const AQ=Gw.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),RQ=[lQ,Zm.low(dQ),AQ];class NQ{constructor(e,t,n,i){this.state=e,this.pos=t,this.explicit=n,this.view=i,this.abortListeners=[]}tokenBefore(e){let t=I_(this.state).resolveInner(this.pos,-1);for(;t&&e.indexOf(t.name)<0;)t=t.parent;return t?{from:t.from,to:this.pos,text:this.state.sliceDoc(t.from,this.pos),type:t.type}:null}matchBefore(e){let t=this.state.doc.lineAt(this.pos),n=Math.max(t.from,this.pos-250),i=t.text.slice(n-t.from,this.pos-t.from),r=i.search($Q(e,!1));return r<0?null:{from:n+r,to:this.pos,text:i.slice(r)}}get aborted(){return null==this.abortListeners}addEventListener(e,t){"abort"==e&&this.abortListeners&&this.abortListeners.push(t)}}function IQ(e){let t=Object.keys(e).join(""),n=/\w/.test(t);return n&&(t=t.replace(/\w/g,"")),"[".concat(n?"\\w":"").concat(t.replace(/[^\w\s]/g,"\\$&"),"]")}function DQ(e){let t=e.map((e=>"string"==typeof e?{label:e}:e)),[n,i]=t.every((e=>/^\w+$/.test(e.label)))?[/\w*$/,/\w+$/]:function(e){let t=Object.create(null),n=Object.create(null);for(let{label:r}of e){t[r[0]]=!0;for(let e=1;e<r.length;e++)n[r[e]]=!0}let i=IQ(t)+IQ(n)+"*$";return[new RegExp("^"+i),new RegExp(i)]}(t);return e=>{let r=e.matchBefore(i);return r||e.explicit?{from:r?r.from:e.pos,options:t,validFor:n}:null}}class MQ{constructor(e,t,n,i){this.completion=e,this.source=t,this.match=n,this.score=i}}function LQ(e){return e.selection.main.from}function $Q(e,t){var n;let{source:i}=e,r=t&&"^"!=i[0],s="$"!=i[i.length-1];return r||s?new RegExp("".concat(r?"^":"","(?:").concat(i,")").concat(s?"$":""),null!==(n=e.flags)&&void 0!==n?n:e.ignoreCase?"i":""):e}const UQ=cO.define();const qQ=new WeakMap;function VQ(e){if(!Array.isArray(e))return e;let t=qQ.get(e);return t||qQ.set(e,t=DQ(e)),t}const zQ=fO.define(),jQ=fO.define();class BQ{constructor(e){this.pattern=e,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[],this.score=0,this.matched=[];for(let t=0;t<e.length;){let n=bm(e,t),i=km(n);this.chars.push(n);let r=e.slice(t,t+i),s=r.toUpperCase();this.folded.push(bm(s==r?r.toLowerCase():s,0)),t+=i}this.astral=e.length!=this.chars.length}ret(e,t){return this.score=e,this.matched=t,this}match(e){if(0==this.pattern.length)return this.ret(-100,[]);if(e.length<this.pattern.length)return null;let{chars:t,folded:n,any:i,precise:r,byWord:s}=this;if(1==t.length){let i=bm(e,0),r=km(i),s=r==e.length?0:-100;if(i==t[0]);else{if(i!=n[0])return null;s+=-200}return this.ret(s,[0,r])}let o=e.indexOf(this.pattern);if(0==o)return this.ret(e.length==this.pattern.length?0:-100,[0,this.pattern.length]);let a=t.length,l=0;if(o<0){for(let r=0,s=Math.min(e.length,200);r<s&&l<a;){let s=bm(e,r);s!=t[l]&&s!=n[l]||(i[l++]=r),r+=km(s)}if(l<a)return null}let h=0,c=0,u=!1,d=0,f=-1,p=-1,g=/[a-z]/.test(e),m=!0;for(let O=0,v=Math.min(e.length,200),y=0;O<v&&c<a;){let i=bm(e,O);o<0&&(h<a&&i==t[h]&&(r[h++]=O),d<a&&(i==t[d]||i==n[d]?(0==d&&(f=O),p=O+1,d++):d=0));let l,v=i<255?i>=48&&i<=57||i>=97&&i<=122?2:i>=65&&i<=90?1:0:(l=wm(i))!=l.toLowerCase()?1:l!=l.toUpperCase()?2:0;(!O||1==v&&g||0==y&&0!=v)&&(t[c]==i||n[c]==i&&(u=!0)?s[c++]=O:s.length&&(m=!1)),y=v,O+=km(i)}return c==a&&0==s[0]&&m?this.result((u?-200:0)-100,s,e):d==a&&0==f?this.ret(-200-e.length+(p==e.length?0:-100),[0,p]):o>-1?this.ret(-700-e.length,[o,o+this.pattern.length]):d==a?this.ret(-900-e.length,[f,p]):c==a?this.result((u?-200:0)-100-700+(m?0:-1100),s,e):2==t.length?null:this.result((i[0]?-700:0)-200-1100,i,e)}result(e,t,n){let i=[],r=0;for(let s of t){let e=s+(this.astral?km(bm(n,s)):1);r&&i[r-1]==s?i[r-1]=e:(i[r++]=s,i[r++]=e)}return this.ret(e-n.length,i)}}class FQ{constructor(e){this.pattern=e,this.matched=[],this.score=0,this.folded=e.toLowerCase()}match(e){if(e.length<this.pattern.length)return null;let t=e.slice(0,this.pattern.length),n=t==this.pattern?0:t.toLowerCase()==this.folded?-200:null;return null==n?null:(this.matched=[0,t.length],this.score=n+(e.length==this.pattern.length?0:-100),this)}}const WQ=Lm.define({combine:e=>_O(e,{activateOnTyping:!0,activateOnCompletion:()=>!1,activateOnTypingDelay:100,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,tooltipClass:()=>"",optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],positionInfo:YQ,filterStrict:!1,compareCompletions:(e,t)=>e.label.localeCompare(t.label),interactionDelay:75,updateSyncTime:100},{defaultKeymap:(e,t)=>e&&t,closeOnBlur:(e,t)=>e&&t,icons:(e,t)=>e&&t,tooltipClass:(e,t)=>n=>XQ(e(n),t(n)),optionClass:(e,t)=>n=>XQ(e(n),t(n)),addToOptions:(e,t)=>e.concat(t),filterStrict:(e,t)=>e||t})});function XQ(e,t){return e?t?e+" "+t:e:t}function YQ(e,t,n,i,r,s){let o,a,l=e.textDirection==gy.RTL,h=l,c=!1,u="top",d=t.left-r.left,f=r.right-t.right,p=i.right-i.left,g=i.bottom-i.top;if(h&&d<Math.min(p,f)?h=!1:!h&&f<Math.min(p,d)&&(h=!0),p<=(h?d:f))o=Math.max(r.top,Math.min(n.top,r.bottom-g))-t.top,a=Math.min(400,h?d:f);else{c=!0,a=Math.min(400,(l?t.right:r.right-t.left)-30);let e=r.bottom-t.bottom;e>=g||e>t.top?o=n.bottom-t.top:(u="bottom",o=t.bottom-n.top)}let m=(t.bottom-t.top)/s.offsetHeight,O=(t.right-t.left)/s.offsetWidth;return{style:"".concat(u,": ").concat(o/m,"px; max-width: ").concat(a/O,"px"),class:"cm-completionInfo-"+(c?l?"left-narrow":"right-narrow":h?"left":"right")}}function GQ(e,t,n){if(e<=n)return{from:0,to:e};if(t<0&&(t=0),t<=e>>1){let e=Math.floor(t/n);return{from:e*n,to:(e+1)*n}}let i=Math.floor((e-t)/n);return{from:e-(i+1)*n,to:e-i*n}}class ZQ{constructor(e,t,n){this.view=e,this.stateField=t,this.applyCompletion=n,this.info=null,this.infoDestroy=null,this.placeInfoReq={read:()=>this.measureInfo(),write:e=>this.placeInfo(e),key:this},this.space=null,this.currentClass="";let i=e.state.field(t),{options:r,selected:s}=i.open,o=e.state.facet(WQ);this.optionContent=function(e){let t=e.addToOptions.slice();return e.icons&&t.push({render(e){let t=document.createElement("div");return t.classList.add("cm-completionIcon"),e.type&&t.classList.add(...e.type.split(/\s+/g).map((e=>"cm-completionIcon-"+e))),t.setAttribute("aria-hidden","true"),t},position:20}),t.push({render(e,t,n,i){let r=document.createElement("span");r.className="cm-completionLabel";let s=e.displayLabel||e.label,o=0;for(let a=0;a<i.length;){let e=i[a++],t=i[a++];e>o&&r.appendChild(document.createTextNode(s.slice(o,e)));let n=r.appendChild(document.createElement("span"));n.appendChild(document.createTextNode(s.slice(e,t))),n.className="cm-completionMatchedText",o=t}return o<s.length&&r.appendChild(document.createTextNode(s.slice(o))),r},position:50},{render(e){if(!e.detail)return null;let t=document.createElement("span");return t.className="cm-completionDetail",t.textContent=e.detail,t},position:80}),t.sort(((e,t)=>e.position-t.position)).map((e=>e.render))}(o),this.optionClass=o.optionClass,this.tooltipClass=o.tooltipClass,this.range=GQ(r.length,s,o.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.updateTooltipClass(e.state),this.dom.addEventListener("mousedown",(n=>{let{options:i}=e.state.field(t).open;for(let t,r=n.target;r&&r!=this.dom;r=r.parentNode)if("LI"==r.nodeName&&(t=/-(\d+)$/.exec(r.id))&&+t[1]<i.length)return this.applyCompletion(e,i[+t[1]]),void n.preventDefault()})),this.dom.addEventListener("focusout",(t=>{let n=e.state.field(this.stateField,!1);n&&n.tooltip&&e.state.facet(WQ).closeOnBlur&&t.relatedTarget!=e.contentDOM&&e.dispatch({effects:jQ.of(null)})})),this.showOptions(r,i.id)}mount(){this.updateSel()}showOptions(e,t){this.list&&this.list.remove(),this.list=this.dom.appendChild(this.createListBox(e,t,this.range)),this.list.addEventListener("scroll",(()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)}))}update(e){var t;let n=e.state.field(this.stateField),i=e.startState.field(this.stateField);if(this.updateTooltipClass(e.state),n!=i){let{options:r,selected:s,disabled:o}=n.open;i.open&&i.open.options==r||(this.range=GQ(r.length,s,e.state.facet(WQ).maxRenderedOptions),this.showOptions(r,n.id)),this.updateSel(),o!=(null===(t=i.open)||void 0===t?void 0:t.disabled)&&this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!!o)}}updateTooltipClass(e){let t=this.tooltipClass(e);if(t!=this.currentClass){for(let e of this.currentClass.split(" "))e&&this.dom.classList.remove(e);for(let e of t.split(" "))e&&this.dom.classList.add(e);this.currentClass=t}}positioned(e){this.space=e,this.info&&this.view.requestMeasure(this.placeInfoReq)}updateSel(){let e=this.view.state.field(this.stateField),t=e.open;if((t.selected>-1&&t.selected<this.range.from||t.selected>=this.range.to)&&(this.range=GQ(t.options.length,t.selected,this.view.state.facet(WQ).maxRenderedOptions),this.showOptions(t.options,e.id)),this.updateSelectedOption(t.selected)){this.destroyInfo();let{completion:n}=t.options[t.selected],{info:i}=n;if(!i)return;let r="string"===typeof i?document.createTextNode(i):i(n);if(!r)return;"then"in r?r.then((t=>{t&&this.view.state.field(this.stateField,!1)==e&&this.addInfoPane(t,n)})).catch((e=>Yy(this.view.state,e,"completion info"))):this.addInfoPane(r,n)}}addInfoPane(e,t){this.destroyInfo();let n=this.info=document.createElement("div");if(n.className="cm-tooltip cm-completionInfo",null!=e.nodeType)n.appendChild(e),this.infoDestroy=null;else{let{dom:t,destroy:i}=e;n.appendChild(t),this.infoDestroy=i||null}this.dom.appendChild(n),this.view.requestMeasure(this.placeInfoReq)}updateSelectedOption(e){let t=null;for(let n=this.list.firstChild,i=this.range.from;n;n=n.nextSibling,i++)"LI"==n.nodeName&&n.id?i==e?n.hasAttribute("aria-selected")||(n.setAttribute("aria-selected","true"),t=n):n.hasAttribute("aria-selected")&&n.removeAttribute("aria-selected"):i--;return t&&function(e,t){let n=e.getBoundingClientRect(),i=t.getBoundingClientRect(),r=n.height/e.offsetHeight;i.top<n.top?e.scrollTop-=(n.top-i.top)/r:i.bottom>n.bottom&&(e.scrollTop+=(i.bottom-n.bottom)/r)}(this.list,t),t}measureInfo(){let e=this.dom.querySelector("[aria-selected]");if(!e||!this.info)return null;let t=this.dom.getBoundingClientRect(),n=this.info.getBoundingClientRect(),i=e.getBoundingClientRect(),r=this.space;if(!r){let e=this.dom.ownerDocument.defaultView||window;r={left:0,top:0,right:e.innerWidth,bottom:e.innerHeight}}return i.top>Math.min(r.bottom,t.bottom)-10||i.bottom<Math.max(r.top,t.top)+10?null:this.view.state.facet(WQ).positionInfo(this.view,t,i,n,r,this.dom)}placeInfo(e){this.info&&(e?(e.style&&(this.info.style.cssText=e.style),this.info.className="cm-tooltip cm-completionInfo "+(e.class||"")):this.info.style.cssText="top: -1e6px")}createListBox(e,t,n){const i=document.createElement("ul");i.id=t,i.setAttribute("role","listbox"),i.setAttribute("aria-expanded","true"),i.setAttribute("aria-label",this.view.state.phrase("Completions"));let r=null;for(let s=n.from;s<n.to;s++){let{completion:o,match:a}=e[s],{section:l}=o;if(l){let e="string"==typeof l?l:l.name;if(e!=r&&(s>n.from||0==n.from))if(r=e,"string"!=typeof l&&l.header)i.appendChild(l.header(l));else{i.appendChild(document.createElement("completion-section")).textContent=e}}const h=i.appendChild(document.createElement("li"));h.id=t+"-"+s,h.setAttribute("role","option");let c=this.optionClass(o);c&&(h.className=c);for(let e of this.optionContent){let t=e(o,this.view.state,this.view,a);t&&h.appendChild(t)}}return n.from&&i.classList.add("cm-completionListIncompleteTop"),n.to<e.length&&i.classList.add("cm-completionListIncompleteBottom"),i}destroyInfo(){this.info&&(this.infoDestroy&&this.infoDestroy(),this.info.remove(),this.info=null)}destroy(){this.destroyInfo()}}function HQ(e,t){return n=>new ZQ(n,e,t)}function KQ(e){return 100*(e.boost||0)+(e.apply?10:0)+(e.info?5:0)+(e.type?1:0)}class JQ{constructor(e,t,n,i,r,s){this.options=e,this.attrs=t,this.tooltip=n,this.timestamp=i,this.selected=r,this.disabled=s}setSelected(e,t){return e==this.selected||e>=this.options.length?this:new JQ(this.options,iA(t,e),this.tooltip,this.timestamp,e,this.disabled)}static build(e,t,n,i,r){let s=function(e,t){let n=[],i=null,r=e=>{n.push(e);let{section:t}=e.completion;if(t){i||(i=[]);let e="string"==typeof t?t:t.name;i.some((t=>t.name==e))||i.push("string"==typeof t?{name:e}:t)}},s=t.facet(WQ);for(let h of e)if(h.hasResult()){let e=h.result.getMatch;if(!1===h.result.filter)for(let t of h.result.options)r(new MQ(t,h.source,e?e(t):[],1e9-n.length));else{let n,i=t.sliceDoc(h.from,h.to),o=s.filterStrict?new FQ(i):new BQ(i);for(let t of h.result.options)if(n=o.match(t.label)){let i=t.displayLabel?e?e(t,n.matched):[]:n.matched;r(new MQ(t,h.source,i,n.score+(t.boost||0)))}}}if(i){let e=Object.create(null),t=0,r=(e,t)=>{var n,i;return(null!==(n=e.rank)&&void 0!==n?n:1e9)-(null!==(i=t.rank)&&void 0!==i?i:1e9)||(e.name<t.name?-1:1)};for(let n of i.sort(r))t-=1e5,e[n.name]=t;for(let i of n){let{section:t}=i.completion;t&&(i.score+=e["string"==typeof t?t:t.name])}}let o=[],a=null,l=s.compareCompletions;for(let h of n.sort(((e,t)=>t.score-e.score||l(e.completion,t.completion)))){let e=h.completion;!a||a.label!=e.label||a.detail!=e.detail||null!=a.type&&null!=e.type&&a.type!=e.type||a.apply!=e.apply||a.boost!=e.boost?o.push(h):KQ(h.completion)>KQ(a)&&(o[o.length-1]=h),a=h.completion}return o}(e,t);if(!s.length)return i&&e.some((e=>1==e.state))?new JQ(i.options,i.attrs,i.tooltip,i.timestamp,i.selected,!0):null;let o=t.facet(WQ).selectOnOpen?0:-1;if(i&&i.selected!=o&&-1!=i.selected){let e=i.options[i.selected].completion;for(let t=0;t<s.length;t++)if(s[t].completion==e){o=t;break}}return new JQ(s,iA(n,o),{pos:e.reduce(((e,t)=>t.hasResult()?Math.min(e,t.from):e),1e8),create:dA,above:r.aboveCursor},i?i.timestamp:Date.now(),o,!1)}map(e){return new JQ(this.options,this.attrs,Object.assign(Object.assign({},this.tooltip),{pos:e.mapPos(this.tooltip.pos)}),this.timestamp,this.selected,this.disabled)}}class eA{constructor(e,t,n){this.active=e,this.id=t,this.open=n}static start(){return new eA(rA,"cm-ac-"+Math.floor(2e6*Math.random()).toString(36),null)}update(e){let{state:t}=e,n=t.facet(WQ),i=(n.override||t.languageDataAt("autocomplete",LQ(t)).map(VQ)).map((t=>(this.active.find((e=>e.source==t))||new oA(t,this.active.some((e=>0!=e.state))?1:0)).update(e,n)));i.length==this.active.length&&i.every(((e,t)=>e==this.active[t]))&&(i=this.active);let r=this.open;r&&e.docChanged&&(r=r.map(e.changes)),e.selection||i.some((t=>t.hasResult()&&e.changes.touchesRange(t.from,t.to)))||!function(e,t){if(e==t)return!0;for(let n=0,i=0;;){for(;n<e.length&&!e[n].hasResult;)n++;for(;i<t.length&&!t[i].hasResult;)i++;let r=n==e.length,s=i==t.length;if(r||s)return r==s;if(e[n++].result!=t[i++].result)return!1}}(i,this.active)?r=JQ.build(i,t,this.id,r,n):r&&r.disabled&&!i.some((e=>1==e.state))&&(r=null),!r&&i.every((e=>1!=e.state))&&i.some((e=>e.hasResult()))&&(i=i.map((e=>e.hasResult()?new oA(e.source,0):e)));for(let s of e.effects)s.is(hA)&&(r=r&&r.setSelected(s.value,this.id));return i==this.active&&r==this.open?this:new eA(i,this.id,r)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:this.active.length?tA:nA}}const tA={"aria-autocomplete":"list"},nA={};function iA(e,t){let n={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":e};return t>-1&&(n["aria-activedescendant"]=e+"-"+t),n}const rA=[];function sA(e,t){if(e.isUserEvent("input.complete")){let n=e.annotation(UQ);if(n&&t.activateOnCompletion(n))return 12}let n=e.isUserEvent("input.type");return n&&t.activateOnTyping?5:n?1:e.isUserEvent("delete.backward")?2:e.selection?8:e.docChanged?16:0}class oA{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;this.source=e,this.state=t,this.explicitPos=n}hasResult(){return!1}update(e,t){let n=sA(e,t),i=this;(8&n||16&n&&this.touches(e))&&(i=new oA(i.source,0)),4&n&&0==i.state&&(i=new oA(this.source,1)),i=i.updateFor(e,n);for(let r of e.effects)if(r.is(zQ))i=new oA(i.source,1,r.value?LQ(e.state):-1);else if(r.is(jQ))i=new oA(i.source,0);else if(r.is(lA))for(let e of r.value)e.source==i.source&&(i=e);return i}updateFor(e,t){return this.map(e.changes)}map(e){return e.empty||this.explicitPos<0?this:new oA(this.source,this.state,e.mapPos(this.explicitPos))}touches(e){return e.changes.touchesRange(LQ(e.state))}}class aA extends oA{constructor(e,t,n,i,r){super(e,2,t),this.result=n,this.from=i,this.to=r}hasResult(){return!0}updateFor(e,t){var n;if(!(3&t))return this.map(e.changes);let i=this.result;i.map&&!e.changes.empty&&(i=i.map(i,e.changes));let r=e.changes.mapPos(this.from),s=e.changes.mapPos(this.to,1),o=LQ(e.state);if((this.explicitPos<0?o<=r:o<this.from)||o>s||!i||2&t&&LQ(e.startState)==this.from)return new oA(this.source,4&t?1:0);let a=this.explicitPos<0?-1:e.changes.mapPos(this.explicitPos);return function(e,t,n,i){if(!e)return!1;let r=t.sliceDoc(n,i);return"function"==typeof e?e(r,n,i,t):$Q(e,!0).test(r)}(i.validFor,e.state,r,s)?new aA(this.source,a,i,r,s):i.update&&(i=i.update(i,r,s,new NQ(e.state,o,a>=0)))?new aA(this.source,a,i,i.from,null!==(n=i.to)&&void 0!==n?n:LQ(e.state)):new oA(this.source,1,a)}map(e){if(e.empty)return this;return(this.result.map?this.result.map(this.result,e):this.result)?new aA(this.source,this.explicitPos<0?-1:e.mapPos(this.explicitPos),this.result,e.mapPos(this.from),e.mapPos(this.to,1)):new oA(this.source,0)}touches(e){return e.changes.touchesRange(this.from,this.to)}}const lA=fO.define({map:(e,t)=>e.map((e=>e.map(t)))}),hA=fO.define(),cA=Bm.define({create:()=>eA.start(),update:(e,t)=>e.update(t),provide:e=>[eS.from(e,(e=>e.tooltip)),Gw.contentAttributes.from(e,(e=>e.attrs))]});function uA(e,t){const n=t.completion.apply||t.completion.label;let i=e.state.field(cA).active.find((e=>e.source==t.source));return i instanceof aA&&("string"==typeof n?e.dispatch(Object.assign(Object.assign({},function(e,t,n,i){let{main:r}=e.selection,s=n-r.from,o=i-r.from;return Object.assign(Object.assign({},e.changeByRange((a=>a!=r&&n!=i&&e.sliceDoc(a.from+s,a.from+o)!=e.sliceDoc(n,i)?{range:a}:{changes:{from:a.from+s,to:i==r.from?a.to:a.from+o,insert:t},range:Im.cursor(a.from+s+t.length)}))),{scrollIntoView:!0,userEvent:"input.complete"})}(e.state,n,i.from,i.to)),{annotations:UQ.of(t.completion)})):n(e,t.completion,i.from,i.to),!0)}const dA=HQ(cA,uA);function fA(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"option";return n=>{let i=n.state.field(cA,!1);if(!i||!i.open||i.open.disabled||Date.now()-i.open.timestamp<n.state.facet(WQ).interactionDelay)return!1;let r,s=1;"page"==t&&(r=aS(n,i.open.tooltip))&&(s=Math.max(2,Math.floor(r.dom.offsetHeight/r.dom.querySelector("li").offsetHeight)-1));let{length:o}=i.open.options,a=i.open.selected>-1?i.open.selected+s*(e?1:-1):e?0:o-1;return a<0?a="page"==t?0:o-1:a>=o&&(a="page"==t?o-1:0),n.dispatch({effects:hA.of(a)}),!0}}class pA{constructor(e,t){this.active=e,this.context=t,this.time=Date.now(),this.updates=[],this.done=void 0}}const gA=Ky.fromClass(class{constructor(e){this.view=e,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.pendingStart=!1,this.composing=0;for(let t of e.state.field(cA).active)1==t.state&&this.startQuery(t)}update(e){let t=e.state.field(cA),n=e.state.facet(WQ);if(!e.selectionSet&&!e.docChanged&&e.startState.field(cA)==t)return;let i=e.transactions.some((e=>{let t=sA(e,n);return 8&t||(e.selection||e.docChanged)&&!(3&t)}));for(let s=0;s<this.running.length;s++){let t=this.running[s];if(i||t.updates.length+e.transactions.length>50&&Date.now()-t.time>1e3){for(let e of t.context.abortListeners)try{e()}catch(_F){Yy(this.view.state,_F)}t.context.abortListeners=null,this.running.splice(s--,1)}else t.updates.push(...e.transactions)}this.debounceUpdate>-1&&clearTimeout(this.debounceUpdate),e.transactions.some((e=>e.effects.some((e=>e.is(zQ)))))&&(this.pendingStart=!0);let r=this.pendingStart?50:n.activateOnTypingDelay;if(this.debounceUpdate=t.active.some((e=>1==e.state&&!this.running.some((t=>t.active.source==e.source))))?setTimeout((()=>this.startUpdate()),r):-1,0!=this.composing)for(let s of e.transactions)s.isUserEvent("input.type")?this.composing=2:2==this.composing&&s.selection&&(this.composing=3)}startUpdate(){this.debounceUpdate=-1,this.pendingStart=!1;let{state:e}=this.view,t=e.field(cA);for(let n of t.active)1!=n.state||this.running.some((e=>e.active.source==n.source))||this.startQuery(n)}startQuery(e){let{state:t}=this.view,n=LQ(t),i=new NQ(t,n,e.explicitPos==n,this.view),r=new pA(e,i);this.running.push(r),Promise.resolve(e.source(i)).then((e=>{r.context.aborted||(r.done=e||null,this.scheduleAccept())}),(e=>{this.view.dispatch({effects:jQ.of(null)}),Yy(this.view.state,e)}))}scheduleAccept(){this.running.every((e=>void 0!==e.done))?this.accept():this.debounceAccept<0&&(this.debounceAccept=setTimeout((()=>this.accept()),this.view.state.facet(WQ).updateSyncTime))}accept(){var e;this.debounceAccept>-1&&clearTimeout(this.debounceAccept),this.debounceAccept=-1;let t=[],n=this.view.state.facet(WQ);for(let i=0;i<this.running.length;i++){let r=this.running[i];if(void 0===r.done)continue;if(this.running.splice(i--,1),r.done){let i=new aA(r.active.source,r.active.explicitPos,r.done,r.done.from,null!==(e=r.done.to)&&void 0!==e?e:LQ(r.updates.length?r.updates[0].startState:this.view.state));for(let e of r.updates)i=i.update(e,n);if(i.hasResult()){t.push(i);continue}}let s=this.view.state.field(cA).active.find((e=>e.source==r.active.source));if(s&&1==s.state)if(null==r.done){let e=new oA(r.active.source,0);for(let t of r.updates)e=e.update(t,n);1!=e.state&&t.push(e)}else this.startQuery(s)}t.length&&this.view.dispatch({effects:lA.of(t)})}},{eventHandlers:{blur(e){let t=this.view.state.field(cA,!1);if(t&&t.tooltip&&this.view.state.facet(WQ).closeOnBlur){let n=t.open&&aS(this.view,t.open.tooltip);n&&n.dom.contains(e.relatedTarget)||setTimeout((()=>this.view.dispatch({effects:jQ.of(null)})),10)}},compositionstart(){this.composing=1},compositionend(){3==this.composing&&setTimeout((()=>this.view.dispatch({effects:zQ.of(!1)})),20),this.composing=0}}}),mA="object"==typeof navigator&&/Win/.test(navigator.platform),OA=Zm.highest(Gw.domEventHandlers({keydown(e,t){let n=t.state.field(cA,!1);if(!n||!n.open||n.open.disabled||n.open.selected<0||e.key.length>1||e.ctrlKey&&(!mA||!e.altKey)||e.metaKey)return!1;let i=n.open.options[n.open.selected],r=n.active.find((e=>e.source==i.source)),s=i.completion.commitCharacters||r.result.commitCharacters;return s&&s.indexOf(e.key)>-1&&uA(t,i),!1}})),vA=Gw.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",height:"100%",listStyle:"none",margin:0,padding:0,"& > li, & > completion-section":{padding:"1px 3px",lineHeight:1.2},"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer"},"& > completion-section":{display:"list-item",borderBottom:"1px solid silver",paddingLeft:"0.5em",opacity:.7}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&light .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#777"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},"&dark .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#444"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'"\xb7\xb7\xb7"',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"".concat(400,"px"),boxSizing:"border-box"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},".cm-completionInfo.cm-completionInfo-left-narrow":{right:"".concat(30,"px")},".cm-completionInfo.cm-completionInfo-right-narrow":{left:"".concat(30,"px")},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",display:"inline-block",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6",boxSizing:"content-box"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"'\u0192'"}},".cm-completionIcon-class":{"&:after":{content:"'\u25cb'"}},".cm-completionIcon-interface":{"&:after":{content:"'\u25cc'"}},".cm-completionIcon-variable":{"&:after":{content:"'\ud835\udc65'"}},".cm-completionIcon-constant":{"&:after":{content:"'\ud835\udc36'"}},".cm-completionIcon-type":{"&:after":{content:"'\ud835\udc61'"}},".cm-completionIcon-enum":{"&:after":{content:"'\u222a'"}},".cm-completionIcon-property":{"&:after":{content:"'\u25a1'"}},".cm-completionIcon-keyword":{"&:after":{content:"'\ud83d\udd11\ufe0e'"}},".cm-completionIcon-namespace":{"&:after":{content:"'\u25a2'"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}});const yA={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},bA=fO.define({map(e,t){let n=t.mapPos(e,-1,xm.TrackAfter);return null==n?void 0:n}}),wA=new class extends PO{};wA.startSide=1,wA.endSide=-1;const kA=Bm.define({create:()=>AO.empty,update(e,t){if(e=e.map(t.changes),t.selection){let n=t.state.doc.lineAt(t.selection.main.head);e=e.update({filter:e=>e>=n.from&&e<=n.to})}for(let n of t.effects)n.is(bA)&&(e=e.update({add:[wA.range(n.value,n.value+1)]}));return e}});const SA="()[]{}<>";function xA(e){for(let t=0;t<SA.length;t+=2)if(SA.charCodeAt(t)==e)return SA.charAt(t+1);return wm(e<128?e:e+1)}function TA(e,t){return e.languageDataAt("closeBrackets",t)[0]||yA}const _A="object"==typeof navigator&&/Android\b/.test(navigator.userAgent),PA=Gw.inputHandler.of(((e,t,n,i)=>{if((_A?e.composing:e.compositionStarted)||e.state.readOnly)return!1;let r=e.state.selection.main;if(i.length>2||2==i.length&&1==km(bm(i,0))||t!=r.from||n!=r.to)return!1;let s=function(e,t){let n=TA(e,e.selection.main.head),i=n.brackets||yA.brackets;for(let r of i){let s=xA(bm(r,0));if(t==r)return s==r?NA(e,r,i.indexOf(r+r+r)>-1,n):AA(e,r,s,n.before||yA.before);if(t==s&&EA(e,e.selection.main.from))return RA(e,r,s)}return null}(e.state,i);return!!s&&(e.dispatch(s),!0)})),CA=[{key:"Backspace",run:e=>{let{state:t,dispatch:n}=e;if(t.readOnly)return!1;let i=TA(t,t.selection.main.head).brackets||yA.brackets,r=null,s=t.changeByRange((e=>{if(e.empty){let n=function(e,t){let n=e.sliceString(t-2,t);return km(bm(n,0))==n.length?n:n.slice(1)}(t.doc,e.head);for(let r of i)if(r==n&&QA(t.doc,e.head)==xA(bm(r,0)))return{changes:{from:e.head-r.length,to:e.head+r.length},range:Im.cursor(e.head-r.length)}}return{range:r=e}}));return r||n(t.update(s,{scrollIntoView:!0,userEvent:"delete.backward"})),!r}}];function EA(e,t){let n=!1;return e.field(kA).between(0,e.doc.length,(e=>{e==t&&(n=!0)})),n}function QA(e,t){let n=e.sliceString(t,t+2);return n.slice(0,km(bm(n,0)))}function AA(e,t,n,i){let r=null,s=e.changeByRange((s=>{if(!s.empty)return{changes:[{insert:t,from:s.from},{insert:n,from:s.to}],effects:bA.of(s.to+t.length),range:Im.range(s.anchor+t.length,s.head+t.length)};let o=QA(e.doc,s.head);return!o||/\s/.test(o)||i.indexOf(o)>-1?{changes:{insert:t+n,from:s.head},effects:bA.of(s.head+t.length),range:Im.cursor(s.head+t.length)}:{range:r=s}}));return r?null:e.update(s,{scrollIntoView:!0,userEvent:"input.type"})}function RA(e,t,n){let i=null,r=e.changeByRange((t=>t.empty&&QA(e.doc,t.head)==n?{changes:{from:t.head,to:t.head+n.length,insert:n},range:Im.cursor(t.head+n.length)}:i={range:t}));return i?null:e.update(r,{scrollIntoView:!0,userEvent:"input.type"})}function NA(e,t,n,i){let r=i.stringPrefixes||yA.stringPrefixes,s=null,o=e.changeByRange((i=>{if(!i.empty)return{changes:[{insert:t,from:i.from},{insert:t,from:i.to}],effects:bA.of(i.to+t.length),range:Im.range(i.anchor+t.length,i.head+t.length)};let o,a=i.head,l=QA(e.doc,a);if(l==t){if(IA(e,a))return{changes:{insert:t+t,from:a},effects:bA.of(a+t.length),range:Im.cursor(a+t.length)};if(EA(e,a)){let i=n&&e.sliceDoc(a,a+3*t.length)==t+t+t?t+t+t:t;return{changes:{from:a,to:a+i.length,insert:i},range:Im.cursor(a+i.length)}}}else{if(n&&e.sliceDoc(a-2*t.length,a)==t+t&&(o=DA(e,a-2*t.length,r))>-1&&IA(e,o))return{changes:{insert:t+t+t+t,from:a},effects:bA.of(a+t.length),range:Im.cursor(a+t.length)};if(e.charCategorizer(a)(l)!=wO.Word&&DA(e,a,r)>-1&&!function(e,t,n,i){let r=I_(e).resolveInner(t,-1),s=i.reduce(((e,t)=>Math.max(e,t.length)),0);for(let o=0;o<5;o++){let o=e.sliceDoc(r.from,Math.min(r.to,r.from+n.length+s)),a=o.indexOf(n);if(!a||a>-1&&i.indexOf(o.slice(0,a))>-1){let t=r.firstChild;for(;t&&t.from==r.from&&t.to-t.from>n.length+a;){if(e.sliceDoc(t.to-n.length,t.to)==n)return!1;t=t.firstChild}return!0}let l=r.to==t&&r.parent;if(!l)break;r=l}return!1}(e,a,t,r))return{changes:{insert:t+t,from:a},effects:bA.of(a+t.length),range:Im.cursor(a+t.length)}}return{range:s=i}}));return s?null:e.update(o,{scrollIntoView:!0,userEvent:"input.type"})}function IA(e,t){let n=I_(e).resolveInner(t+1);return n.parent&&n.from==t}function DA(e,t,n){let i=e.charCategorizer(t);if(i(e.sliceDoc(t-1,t))!=wO.Word)return t;for(let r of n){let n=t-r.length;if(e.sliceDoc(n,t)==r&&i(e.sliceDoc(n-1,n))!=wO.Word)return n}return-1}const MA=[{key:"Ctrl-Space",run:e=>!!e.state.field(cA,!1)&&(e.dispatch({effects:zQ.of(!0)}),!0)},{key:"Escape",run:e=>{let t=e.state.field(cA,!1);return!(!t||!t.active.some((e=>0!=e.state)))&&(e.dispatch({effects:jQ.of(null)}),!0)}},{key:"ArrowDown",run:fA(!0)},{key:"ArrowUp",run:fA(!1)},{key:"PageDown",run:fA(!0,"page")},{key:"PageUp",run:fA(!1,"page")},{key:"Enter",run:e=>{let t=e.state.field(cA,!1);return!(e.state.readOnly||!t||!t.open||t.open.selected<0||t.open.disabled||Date.now()-t.open.timestamp<e.state.facet(WQ).interactionDelay)&&uA(e,t.open.options[t.open.selected])}}],LA=Zm.highest(ik.computeN([WQ],(e=>e.facet(WQ).defaultKeymap?[MA]:[])));class $A{constructor(e,t,n){this.from=e,this.to=t,this.diagnostic=n}}class UA{constructor(e,t,n){this.diagnostics=e,this.panel=t,this.selected=n}static init(e,t,n){let i=e,r=n.facet(KA).markerFilter;r&&(i=r(i,n));let s=oy.set(i.map((e=>e.from==e.to||e.from==e.to-1&&n.doc.lineAt(e.from).to==e.from?oy.widget({widget:new tR(e),diagnostic:e}).range(e.from):oy.mark({attributes:{class:"cm-lintRange cm-lintRange-"+e.severity+(e.markClass?" "+e.markClass:"")},diagnostic:e}).range(e.from,e.to))),!0);return new UA(s,t,qA(s))}}function qA(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=null;return e.between(n,1e9,((e,n,r)=>{let{spec:s}=r;if(!t||s.diagnostic==t)return i=new $A(e,n,s.diagnostic),!1})),i}function VA(e,t){let n=t.pos,i=t.end||n,r=e.state.facet(KA).hideOn(e,n,i);if(null!=r)return r;let s=e.startState.doc.lineAt(t.pos);return!(!e.effects.some((e=>e.is(jA)))&&!e.changes.touchesRange(s.from,Math.max(s.to,i)))}function zA(e,t){return e.field(WA,!1)?t:t.concat(fO.appendConfig.of(aR))}const jA=fO.define(),BA=fO.define(),FA=fO.define(),WA=Bm.define({create:()=>new UA(oy.none,null,null),update(e,t){if(t.docChanged&&e.diagnostics.size){let n=e.diagnostics.map(t.changes),i=null,r=e.panel;if(e.selected){let r=t.changes.mapPos(e.selected.from,1);i=qA(n,e.selected.diagnostic,r)||qA(n,null,r)}!n.size&&r&&t.state.facet(KA).autoPanel&&(r=null),e=new UA(n,r,i)}for(let n of t.effects)if(n.is(jA)){let i=t.state.facet(KA).autoPanel?n.value.length?iR.open:null:e.panel;e=UA.init(n.value,i,t.state)}else n.is(BA)?e=new UA(e.diagnostics,n.value?iR.open:null,e.selected):n.is(FA)&&(e=new UA(e.diagnostics,e.panel,n.value));return e},provide:e=>[pS.from(e,(e=>e.panel)),Gw.decorations.from(e,(e=>e.diagnostics))]});const XA=oy.mark({class:"cm-lintRange cm-lintRange-active"});function YA(e,t,n){let{diagnostics:i}=e.state.field(WA),r=[],s=2e8,o=0;i.between(t-(n<0?1:0),t+(n>0?1:0),((e,i,a)=>{let{spec:l}=a;t>=e&&t<=i&&(e==i||(t>e||n>0)&&(t<i||n<0))&&(r.push(l.diagnostic),s=Math.min(e,s),o=Math.max(i,o))}));let a=e.state.facet(KA).tooltipFilter;return a&&(r=a(r,e.state)),r.length?{pos:s,end:o,above:e.state.doc.lineAt(s).to<o,create:()=>({dom:GA(e,r)})}:null}function GA(e,t){return EE("ul",{class:"cm-tooltip-lint"},t.map((t=>eR(e,t,!1))))}const ZA=e=>{let t=e.state.field(WA,!1);return!(!t||!t.panel)&&(e.dispatch({effects:BA.of(!1)}),!0)},HA=[{key:"Mod-Shift-m",run:e=>{let t=e.state.field(WA,!1);t&&t.panel||e.dispatch({effects:zA(e.state,[BA.of(!0)])});let n=cS(e,iR.open);return n&&n.dom.querySelector(".cm-panel-lint ul").focus(),!0},preventDefault:!0},{key:"F8",run:e=>{let t=e.state.field(WA,!1);if(!t)return!1;let n=e.state.selection.main,i=t.diagnostics.iter(n.to+1);return!(!i.value&&(i=t.diagnostics.iter(0),!i.value||i.from==n.from&&i.to==n.to))&&(e.dispatch({selection:{anchor:i.from,head:i.to},scrollIntoView:!0}),!0)}}],KA=Lm.define({combine:e=>Object.assign({sources:e.map((e=>e.source)).filter((e=>null!=e))},_O(e.map((e=>e.config)),{delay:750,markerFilter:null,tooltipFilter:null,needsRefresh:null,hideOn:()=>null},{needsRefresh:(e,t)=>e?t?n=>e(n)||t(n):e:t}))});function JA(e){let t=[];if(e)e:for(let{name:n}of e){for(let e=0;e<n.length;e++){let i=n[e];if(/[a-zA-Z]/.test(i)&&!t.some((e=>e.toLowerCase()==i.toLowerCase()))){t.push(i);continue e}}t.push("")}return t}function eR(e,t,n){var i;let r=n?JA(t.actions):[];return EE("li",{class:"cm-diagnostic cm-diagnostic-"+t.severity},EE("span",{class:"cm-diagnosticText"},t.renderMessage?t.renderMessage(e):t.message),null===(i=t.actions)||void 0===i?void 0:i.map(((n,i)=>{let s=!1,o=i=>{if(i.preventDefault(),s)return;s=!0;let r=qA(e.state.field(WA).diagnostics,t);r&&n.apply(e,r.from,r.to)},{name:a}=n,l=r[i]?a.indexOf(r[i]):-1,h=l<0?a:[a.slice(0,l),EE("u",a.slice(l,l+1)),a.slice(l+1)];return EE("button",{type:"button",class:"cm-diagnosticAction",onclick:o,onmousedown:o,"aria-label":" Action: ".concat(a).concat(l<0?"":' (access key "'.concat(r[i],')"'),".")},h)})),t.source&&EE("div",{class:"cm-diagnosticSource"},t.source))}class tR extends ry{constructor(e){super(),this.diagnostic=e}eq(e){return e.diagnostic==this.diagnostic}toDOM(){return EE("span",{class:"cm-lintPoint cm-lintPoint-"+this.diagnostic.severity})}}class nR{constructor(e,t){this.diagnostic=t,this.id="item_"+Math.floor(4294967295*Math.random()).toString(16),this.dom=eR(e,t,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}}class iR{constructor(e){this.view=e,this.items=[];this.list=EE("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:t=>{if(27==t.keyCode)ZA(this.view),this.view.focus();else if(38==t.keyCode||33==t.keyCode)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(40==t.keyCode||34==t.keyCode)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(36==t.keyCode)this.moveSelection(0);else if(35==t.keyCode)this.moveSelection(this.items.length-1);else if(13==t.keyCode)this.view.focus();else{if(!(t.keyCode>=65&&t.keyCode<=90&&this.selectedIndex>=0))return;{let{diagnostic:n}=this.items[this.selectedIndex],i=JA(n.actions);for(let r=0;r<i.length;r++)if(i[r].toUpperCase().charCodeAt(0)==t.keyCode){let t=qA(this.view.state.field(WA).diagnostics,n);t&&n.actions[r].apply(e,t.from,t.to)}}}t.preventDefault()},onclick:e=>{for(let t=0;t<this.items.length;t++)this.items[t].dom.contains(e.target)&&this.moveSelection(t)}}),this.dom=EE("div",{class:"cm-panel-lint"},this.list,EE("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>ZA(this.view)},"\xd7")),this.update()}get selectedIndex(){let e=this.view.state.field(WA).selected;if(!e)return-1;for(let t=0;t<this.items.length;t++)if(this.items[t].diagnostic==e.diagnostic)return t;return-1}update(){let{diagnostics:e,selected:t}=this.view.state.field(WA),n=0,i=!1,r=null;for(e.between(0,this.view.state.doc.length,((e,s,o)=>{let a,{spec:l}=o,h=-1;for(let t=n;t<this.items.length;t++)if(this.items[t].diagnostic==l.diagnostic){h=t;break}h<0?(a=new nR(this.view,l.diagnostic),this.items.splice(n,0,a),i=!0):(a=this.items[h],h>n&&(this.items.splice(n,h-n),i=!0)),t&&a.diagnostic==t.diagnostic?a.dom.hasAttribute("aria-selected")||(a.dom.setAttribute("aria-selected","true"),r=a):a.dom.hasAttribute("aria-selected")&&a.dom.removeAttribute("aria-selected"),n++}));n<this.items.length&&!(1==this.items.length&&this.items[0].diagnostic.from<0);)i=!0,this.items.pop();0==this.items.length&&(this.items.push(new nR(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),i=!0),r?(this.list.setAttribute("aria-activedescendant",r.id),this.view.requestMeasure({key:this,read:()=>({sel:r.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:e=>{let{sel:t,panel:n}=e,i=n.height/this.list.offsetHeight;t.top<n.top?this.list.scrollTop-=(n.top-t.top)/i:t.bottom>n.bottom&&(this.list.scrollTop+=(t.bottom-n.bottom)/i)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),i&&this.sync()}sync(){let e=this.list.firstChild;function t(){let t=e;e=t.nextSibling,t.remove()}for(let n of this.items)if(n.dom.parentNode==this.list){for(;e!=n.dom;)t();e=n.dom.nextSibling}else this.list.insertBefore(n.dom,e);for(;e;)t()}moveSelection(e){if(this.selectedIndex<0)return;let t=qA(this.view.state.field(WA).diagnostics,this.items[e].diagnostic);t&&this.view.dispatch({selection:{anchor:t.from,head:t.to},scrollIntoView:!0,effects:FA.of(t)})}static open(e){return new iR(e)}}function rR(e){return'url(\'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" '.concat(arguments.length>1&&void 0!==arguments[1]?arguments[1]:'viewBox="0 0 40 40"',">").concat(encodeURIComponent(e),"</svg>')")}function sR(e){return rR('<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="'.concat(e,'" fill="none" stroke-width=".7"/>'),'width="6" height="3"')}const oR=Gw.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnostic-hint":{borderLeft:"5px solid #66d"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px",cursor:"pointer"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:sR("#d11")},".cm-lintRange-warning":{backgroundImage:sR("orange")},".cm-lintRange-info":{backgroundImage:sR("#999")},".cm-lintRange-hint":{backgroundImage:sR("#66d")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-lintPoint-hint":{"&:after":{borderBottomColor:"#66d"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}});const aR=[WA,Gw.decorations.compute([WA],(e=>{let{selected:t,panel:n}=e.field(WA);return t&&n&&t.from!=t.to?oy.set([XA.range(t.from,t.to)]):oy.none})),oS(YA,{hideOn:VA}),oR];var lR=function(e){void 0===e&&(e={});var{crosshairCursor:t=!1}=e,n=[];!1!==e.closeBracketsKeymap&&(n=n.concat(CA)),!1!==e.defaultKeymap&&(n=n.concat(CE)),!1!==e.searchKeymap&&(n=n.concat(TQ)),!1!==e.historyKeymap&&(n=n.concat(EC)),!1!==e.foldKeymap&&(n=n.concat(mP)),!1!==e.completionKeymap&&(n=n.concat(MA)),!1!==e.lintKeymap&&(n=n.concat(HA));var i=[];return!1!==e.lineNumbers&&i.push(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return[ES.of(e),wS(),RS]}()),!1!==e.highlightActiveLineGutter&&i.push(DS),!1!==e.highlightSpecialChars&&i.push(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return[Ik.of(e),Dk||(Dk=Ky.fromClass(class{constructor(e){this.view=e,this.decorations=oy.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(e.state.facet(Ik)),this.decorations=this.decorator.createDeco(e)}makeDecorator(e){return new Ek({regexp:e.specialChars,decoration:(t,n,i)=>{let{doc:r}=n.state,s=bm(t[0],0);if(9==s){let e=r.lineAt(i),t=n.state.tabSize,s=jO(e.text,t,i-e.from);return oy.replace({widget:new Lk((t-s%t)*this.view.defaultCharacterWidth/this.view.scaleX)})}return this.decorationCache[s]||(this.decorationCache[s]=oy.replace({widget:new Mk(e,s)}))},boundary:e.replaceTabs?void 0:/[^]/})}update(e){let t=e.state.facet(Ik);e.startState.facet(Ik)!=t?(this.decorator=this.makeDecorator(t),this.decorations=this.decorator.createDeco(e.view)):this.decorations=this.decorator.updateDeco(e,this.decorations)}},{decorations:e=>e.decorations}))]}()),!1!==e.history&&i.push(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return[dC,uC.of(e),Gw.domEventHandlers({beforeinput(e,t){let n="historyUndo"==e.inputType?pC:"historyRedo"==e.inputType?gC:null;return!!n&&(e.preventDefault(),n(t))}})]}()),!1!==e.foldGutter&&i.push(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object.assign(Object.assign({},SP),e),n=new xP(t,!0),i=new xP(t,!1),r=Ky.fromClass(class{constructor(e){this.from=e.viewport.from,this.markers=this.buildMarkers(e)}update(e){(e.docChanged||e.viewportChanged||e.startState.facet(j_)!=e.state.facet(j_)||e.startState.field(uP,!1)!=e.state.field(uP,!1)||I_(e.startState)!=I_(e.state)||t.foldingChanged(e))&&(this.markers=this.buildMarkers(e.view))}buildMarkers(e){let t=new RO;for(let r of e.viewportLineBlocks){let s=dP(e.state,r.from,r.to)?i:oP(e.state,r.from,r.to)?n:null;s&&t.add(r.from,r.from,s)}return t.finish()}}),{domEventHandlers:s}=t;return[r,yS({class:"cm-foldGutter",markers(e){var t;return(null===(t=e.plugin(r))||void 0===t?void 0:t.markers)||AO.empty},initialSpacer:()=>new xP(t,!1),domEventHandlers:Object.assign(Object.assign({},s),{click:(e,t,n)=>{if(s.click&&s.click(e,t,n))return!0;let i=dP(e.state,t.from,t.to);if(i)return e.dispatch({effects:hP.of(i)}),!0;let r=oP(e.state,t.from,t.to);return!!r&&(e.dispatch({effects:lP.of(r)}),!0)}})}),yP()]}()),!1!==e.drawSelection&&i.push(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return[Ok.of(e),yk,wk,xk,jy.of(!0)]}()),!1!==e.dropCursor&&i.push([_k,Pk]),!1!==e.allowMultipleSelections&&i.push(TO.allowMultipleSelections.of(!0)),!1!==e.indentOnInput&&i.push(TO.transactionFilter.of((e=>{if(!e.docChanged||!e.isUserEvent("input.type")&&!e.isUserEvent("input.complete"))return e;let t=e.startState.languageDataAt("indentOnInput",e.startState.selection.main.head);if(!t.length)return e;let n=e.newDoc,{head:i}=e.newSelection.main,r=n.lineAt(i);if(i>r.from+200)return e;let s=n.sliceString(r.from,i);if(!t.some((e=>e.test(s))))return e;let{state:o}=e,a=-1,l=[];for(let{head:h}of o.selection.ranges){let e=o.doc.lineAt(h);if(e.from==a)continue;a=e.from;let t=Y_(o,e.from);if(null==t)continue;let n=/^\s*/.exec(e.text)[0],i=X_(o,t);n!=i&&l.push({from:e.from,to:e.from+n.length,insert:i})}return l.length?[e,{changes:l,sequential:!0}]:e}))),!1!==e.syntaxHighlighting&&i.push(function(e,t){let n,i=[AP];return e instanceof _P&&(e.module&&i.push(Gw.styleModule.of(e.module)),n=e.themeType),(null===t||void 0===t?void 0:t.fallback)?i.push(CP.of(e)):n?i.push(PP.computeN([Gw.darkTheme],(t=>t.facet(Gw.darkTheme)==("dark"==n)?[e]:[]))):i.push(PP.of(e)),i}(RP,{fallback:!0})),!1!==e.bracketMatching&&i.push(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return[MP.of(e),VP]}()),!1!==e.closeBrackets&&i.push([PA,kA]),!1!==e.autocompletion&&i.push(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return[OA,cA,WQ.of(e),gA,LA,vA]}()),!1!==e.rectangularSelection&&i.push(function(e){let t=(null===e||void 0===e?void 0:e.eventFilter)||(e=>e.altKey&&0==e.button);return Gw.mouseSelectionStyle.of(((e,n)=>t(n)?jk(e,n):null))}()),!1!==t&&i.push(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},[t,n]=Bk[e.key||"Alt"],i=Ky.fromClass(class{constructor(e){this.view=e,this.isDown=!1}set(e){this.isDown!=e&&(this.isDown=e,this.view.update([]))}},{eventObservers:{keydown(e){this.set(e.keyCode==t||n(e))},keyup(e){e.keyCode!=t&&n(e)||this.set(!1)},mousemove(e){this.set(n(e))}}});return[i,Gw.contentAttributes.of((e=>{var t;return(null===(t=e.plugin(i))||void 0===t?void 0:t.isDown)?Fk:null}))]}()),!1!==e.highlightActiveLine&&i.push(Uk),!1!==e.highlightSelectionMatches&&i.push(function(e){let t=[ZE,GE];return e&&t.push(FE.of(e)),t}()),e.tabSize&&"number"===typeof e.tabSize&&i.push(F_.of(" ".repeat(e.tabSize))),i.concat([ik.of(n.flat())]).filter(Boolean)};const hR=1024;let cR=0;class uR{constructor(e,t){this.from=e,this.to=t}}class dR{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.id=cR++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return"function"!=typeof e&&(e=gR.match(e)),t=>{let n=e(t);return void 0===n?null:[this,n]}}}dR.closedBy=new dR({deserialize:e=>e.split(" ")}),dR.openedBy=new dR({deserialize:e=>e.split(" ")}),dR.group=new dR({deserialize:e=>e.split(" ")}),dR.isolate=new dR({deserialize:e=>{if(e&&"rtl"!=e&&"ltr"!=e&&"auto"!=e)throw new RangeError("Invalid value for isolate: "+e);return e||"auto"}}),dR.contextHash=new dR({perNode:!0}),dR.lookAhead=new dR({perNode:!0}),dR.mounted=new dR({perNode:!0});class fR{constructor(e,t,n){this.tree=e,this.overlay=t,this.parser=n}static get(e){return e&&e.props&&e.props[dR.mounted.id]}}const pR=Object.create(null);class gR{constructor(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;this.name=e,this.props=t,this.id=n,this.flags=i}static define(e){let t=e.props&&e.props.length?Object.create(null):pR,n=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(null==e.name?8:0),i=new gR(e.name||"",t,e.id,n);if(e.props)for(let r of e.props)if(Array.isArray(r)||(r=r(i)),r){if(r[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");t[r[0].id]=r[1]}return i}prop(e){return this.props[e.id]}get isTop(){return(1&this.flags)>0}get isSkipped(){return(2&this.flags)>0}get isError(){return(4&this.flags)>0}get isAnonymous(){return(8&this.flags)>0}is(e){if("string"==typeof e){if(this.name==e)return!0;let t=this.prop(dR.group);return!!t&&t.indexOf(e)>-1}return this.id==e}static match(e){let t=Object.create(null);for(let n in e)for(let i of n.split(" "))t[i]=e[n];return e=>{for(let n=e.prop(dR.group),i=-1;i<(n?n.length:0);i++){let r=t[i<0?e.name:n[i]];if(r)return r}}}}gR.none=new gR("",Object.create(null),0,8);const mR=new WeakMap,OR=new WeakMap;var vR;!function(e){e[e.ExcludeBuffers=1]="ExcludeBuffers",e[e.IncludeAnonymous=2]="IncludeAnonymous",e[e.IgnoreMounts=4]="IgnoreMounts",e[e.IgnoreOverlays=8]="IgnoreOverlays"}(vR||(vR={}));class yR{constructor(e,t,n,i,r){if(this.type=e,this.children=t,this.positions=n,this.length=i,this.props=null,r&&r.length){this.props=Object.create(null);for(let[e,t]of r)this.props["number"==typeof e?e:e.id]=t}}toString(){let e=fR.get(this);if(e&&!e.overlay)return e.tree.toString();let t="";for(let n of this.children){let e=n.toString();e&&(t&&(t+=","),t+=e)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(t.length?"("+t+")":""):t}cursor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return new RR(this.topNode,e)}cursorAt(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=mR.get(this)||this.topNode,i=new RR(n);return i.moveTo(e,t),mR.set(this,i._tree),i}get topNode(){return new TR(this,0,0,null)}resolve(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=SR(mR.get(this)||this.topNode,e,t,!1);return mR.set(this,n),n}resolveInner(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=SR(OR.get(this)||this.topNode,e,t,!0);return OR.set(this,n),n}resolveStack(e){return function(e,t,n){let i=e.resolveInner(t,n),r=null;for(let s=i instanceof TR?i:i.context.parent;s;s=s.parent)if(s.index<0){let e=s.parent;(r||(r=[i])).push(e.resolve(t,n)),s=e}else{let e=fR.get(s.tree);if(e&&e.overlay&&e.overlay[0].from<=t&&e.overlay[e.overlay.length-1].to>=t){let o=new TR(e.tree,e.overlay[0].from+s.from,-1,s);(r||(r=[i])).push(SR(o,t,n,!1))}}return r?QR(r):i}(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0)}iterate(e){let{enter:t,leave:n,from:i=0,to:r=this.length}=e,s=e.mode||0,o=(s&vR.IncludeAnonymous)>0;for(let a=this.cursor(s|vR.IncludeAnonymous);;){let e=!1;if(a.from<=r&&a.to>=i&&(!o&&a.type.isAnonymous||!1!==t(a))){if(a.firstChild())continue;e=!0}for(;e&&n&&(o||!a.type.isAnonymous)&&n(a),!a.nextSibling();){if(!a.parent())return;e=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let t in this.props)e.push([+t,this.props[t]]);return e}balance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.children.length<=8?this:MR(gR.none,this.children,this.positions,0,this.children.length,0,this.length,((e,t,n)=>new yR(this.type,e,t,n,this.propValues)),e.makeTree||((e,t,n)=>new yR(gR.none,e,t,n)))}static build(e){return function(e){var t;let{buffer:n,nodeSet:i,maxBufferLength:r=hR,reused:s=[],minRepeatType:o=i.types.length}=e,a=Array.isArray(n)?new bR(n,n.length):n,l=i.types,h=0,c=0;function u(e,t,n,v,y,b){let{id:w,start:k,end:S,size:x}=a,T=c;for(;x<0;){if(a.next(),-1==x){let t=s[w];return n.push(t),void v.push(k-e)}if(-3==x)return void(h=w);if(-4==x)return void(c=w);throw new RangeError("Unrecognized record size: ".concat(x))}let _,P,C=l[w],E=k-e;if(S-k<=r&&(P=m(a.pos-t,y))){let t=new Uint16Array(P.size-P.skip),n=a.pos-P.size,r=t.length;for(;a.pos>n;)r=O(P.start,t,r);_=new wR(t,S-P.start,i),E=P.start-e}else{let e=a.pos-x;a.next();let t=[],n=[],i=w>=o?w:-1,s=0,l=S;for(;a.pos>e;)i>=0&&a.id==i&&a.size>=0?(a.end<=l-r&&(p(t,n,k,s,a.end,l,i,T),s=t.length,l=a.end),a.next()):b>2500?d(k,e,t,n):u(k,e,t,n,i,b+1);if(i>=0&&s>0&&s<t.length&&p(t,n,k,s,k,l,i,T),t.reverse(),n.reverse(),i>-1&&s>0){let e=f(C);_=MR(C,t,n,0,t.length,0,S-k,e,e)}else _=g(C,t,n,S-k,T-S)}n.push(_),v.push(E)}function d(e,t,n,s){let o=[],l=0,h=-1;for(;a.pos>t;){let{id:e,start:t,end:n,size:i}=a;if(i>4)a.next();else{if(h>-1&&t<h)break;h<0&&(h=n-r),o.push(e,t,n),l++,a.next()}}if(l){let t=new Uint16Array(4*l),r=o[o.length-2];for(let e=o.length-3,n=0;e>=0;e-=3)t[n++]=o[e],t[n++]=o[e+1]-r,t[n++]=o[e+2]-r,t[n++]=n;n.push(new wR(t,o[2]-r,i)),s.push(r-e)}}function f(e){return(t,n,i)=>{let r,s,o=0,a=t.length-1;if(a>=0&&(r=t[a])instanceof yR){if(!a&&r.type==e&&r.length==i)return r;(s=r.prop(dR.lookAhead))&&(o=n[a]+r.length+s)}return g(e,t,n,i,o)}}function p(e,t,n,r,s,o,a,l){let h=[],c=[];for(;e.length>r;)h.push(e.pop()),c.push(t.pop()+n-s);e.push(g(i.types[a],h,c,o-s,l-o)),t.push(s-n)}function g(e,t,n,i){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,s=arguments.length>5?arguments[5]:void 0;if(h){let e=[dR.contextHash,h];s=s?[e].concat(s):[e]}if(r>25){let e=[dR.lookAhead,r];s=s?[e].concat(s):[e]}return new yR(e,t,n,i,s)}function m(e,t){let n=a.fork(),i=0,s=0,l=0,h=n.end-r,c={size:0,start:0,skip:0};e:for(let r=n.pos-e;n.pos>r;){let e=n.size;if(n.id==t&&e>=0){c.size=i,c.start=s,c.skip=l,l+=4,i+=4,n.next();continue}let a=n.pos-e;if(e<0||a<r||n.start<h)break;let u=n.id>=o?4:0,d=n.start;for(n.next();n.pos>a;){if(n.size<0){if(-3!=n.size)break e;u+=4}else n.id>=o&&(u+=4);n.next()}s=d,i+=e,l+=u}return(t<0||i==e)&&(c.size=i,c.start=s,c.skip=l),c.size>4?c:void 0}function O(e,t,n){let{id:i,start:r,end:s,size:l}=a;if(a.next(),l>=0&&i<o){let o=n;if(l>4){let i=a.pos-(l-4);for(;a.pos>i;)n=O(e,t,n)}t[--n]=o,t[--n]=s-e,t[--n]=r-e,t[--n]=i}else-3==l?h=i:-4==l&&(c=i);return n}let v=[],y=[];for(;a.pos>0;)u(e.start||0,e.bufferStart||0,v,y,-1,0);let b=null!==(t=e.length)&&void 0!==t?t:v.length?y[0]+v[0].length:0;return new yR(l[e.topID],v.reverse(),y.reverse(),b)}(e)}}yR.empty=new yR(gR.none,[],[],0);class bR{constructor(e,t){this.buffer=e,this.index=t}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new bR(this.buffer,this.index)}}class wR{constructor(e,t,n){this.buffer=e,this.length=t,this.set=n}get type(){return gR.none}toString(){let e=[];for(let t=0;t<this.buffer.length;)e.push(this.childString(t)),t=this.buffer[t+3];return e.join(",")}childString(e){let t=this.buffer[e],n=this.buffer[e+3],i=this.set.types[t],r=i.name;if(/\W/.test(r)&&!i.isError&&(r=JSON.stringify(r)),n==(e+=4))return r;let s=[];for(;e<n;)s.push(this.childString(e)),e=this.buffer[e+3];return r+"("+s.join(",")+")"}findChild(e,t,n,i,r){let{buffer:s}=this,o=-1;for(let a=e;a!=t&&!(kR(r,i,s[a+1],s[a+2])&&(o=a,n>0));a=s[a+3]);return o}slice(e,t,n){let i=this.buffer,r=new Uint16Array(t-e),s=0;for(let o=e,a=0;o<t;){r[a++]=i[o++],r[a++]=i[o++]-n;let t=r[a++]=i[o++]-n;r[a++]=i[o++]-e,s=Math.max(s,t)}return new wR(r,s,this.set)}}function kR(e,t,n,i){switch(e){case-2:return n<t;case-1:return i>=t&&n<t;case 0:return n<t&&i>t;case 1:return n<=t&&i>t;case 2:return i>t;case 4:return!0}}function SR(e,t,n,i){for(var r;e.from==e.to||(n<1?e.from>=t:e.from>t)||(n>-1?e.to<=t:e.to<t);){let t=!i&&e instanceof TR&&e.index<0?null:e.parent;if(!t)return e;e=t}let s=i?0:vR.IgnoreOverlays;if(i)for(let o=e,a=o.parent;a;o=a,a=o.parent)o instanceof TR&&o.index<0&&(null===(r=a.enter(t,n,s))||void 0===r?void 0:r.from)!=o.from&&(e=a);for(;;){let i=e.enter(t,n,s);if(!i)return e;e=i}}class xR{cursor(){return new RR(this,arguments.length>0&&void 0!==arguments[0]?arguments[0]:0)}getChild(e){let t=_R(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:null);return t.length?t[0]:null}getChildren(e){return _R(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}resolve(e){return SR(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,!1)}resolveInner(e){return SR(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,!0)}matchContext(e){return PR(this,e)}enterUnfinishedNodesBefore(e){let t=this.childBefore(e),n=this;for(;t;){let e=t.lastChild;if(!e||e.to!=t.to)break;e.type.isError&&e.from==e.to?(n=t,t=e.prevSibling):t=e}return n}get node(){return this}get next(){return this.parent}}class TR extends xR{constructor(e,t,n,i){super(),this._tree=e,this.from=t,this.index=n,this._parent=i}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,t,n,i){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;for(let s=this;;){for(let{children:o,positions:a}=s._tree,l=t>0?o.length:-1;e!=l;e+=t){let l=o[e],h=a[e]+s.from;if(kR(i,n,h,h+l.length))if(l instanceof wR){if(r&vR.ExcludeBuffers)continue;let o=l.findChild(0,l.buffer.length,t,n-h,i);if(o>-1)return new ER(new CR(s,l,e,h),null,o)}else if(r&vR.IncludeAnonymous||!l.type.isAnonymous||NR(l)){let o;if(!(r&vR.IgnoreMounts)&&(o=fR.get(l))&&!o.overlay)return new TR(o.tree,h,e,s);let a=new TR(l,h,e,s);return r&vR.IncludeAnonymous||!a.type.isAnonymous?a:a.nextChild(t<0?l.children.length-1:0,t,n,i)}}if(r&vR.IncludeAnonymous||!s.type.isAnonymous)return null;if(e=s.index>=0?s.index+t:t<0?-1:s._parent._tree.children.length,s=s._parent,!s)return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,t){let n,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(!(i&vR.IgnoreOverlays)&&(n=fR.get(this._tree))&&n.overlay){let i=e-this.from;for(let{from:e,to:r}of n.overlay)if((t>0?e<=i:e<i)&&(t<0?r>=i:r>i))return new TR(n.tree,n.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,t,i)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}}function _R(e,t,n,i){let r=e.cursor(),s=[];if(!r.firstChild())return s;if(null!=n)for(let o=!1;!o;)if(o=r.type.is(n),!r.nextSibling())return s;for(;;){if(null!=i&&r.type.is(i))return s;if(r.type.is(t)&&s.push(r.node),!r.nextSibling())return null==i?s:[]}}function PR(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.length-1;for(let i=e.parent;n>=0;i=i.parent){if(!i)return!1;if(!i.type.isAnonymous){if(t[n]&&t[n]!=i.name)return!1;n--}}return!0}class CR{constructor(e,t,n,i){this.parent=e,this.buffer=t,this.index=n,this.start=i}}class ER extends xR{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,t,n){super(),this.context=e,this._parent=t,this.index=n,this.type=e.buffer.set.types[e.buffer.buffer[n]]}child(e,t,n){let{buffer:i}=this.context,r=i.findChild(this.index+4,i.buffer[this.index+3],e,t-this.context.start,n);return r<0?null:new ER(this.context,this,r)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,t){if((arguments.length>2&&void 0!==arguments[2]?arguments[2]:0)&vR.ExcludeBuffers)return null;let{buffer:n}=this.context,i=n.findChild(this.index+4,n.buffer[this.index+3],t>0?1:-1,e-this.context.start,t);return i<0?null:new ER(this.context,this,i)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,t=e.buffer[this.index+3];return t<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new ER(this.context,this._parent,t):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,t=this._parent?this._parent.index+4:0;return this.index==t?this.externalSibling(-1):new ER(this.context,this._parent,e.findChild(t,this.index,-1,0,4))}get tree(){return null}toTree(){let e=[],t=[],{buffer:n}=this.context,i=this.index+4,r=n.buffer[this.index+3];if(r>i){let s=n.buffer[this.index+1];e.push(n.slice(i,r,s)),t.push(0)}return new yR(this.type,e,t,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}}function QR(e){if(!e.length)return null;let t=0,n=e[0];for(let s=1;s<e.length;s++){let i=e[s];(i.from>n.from||i.to<n.to)&&(n=i,t=s)}let i=n instanceof TR&&n.index<0?null:n.parent,r=e.slice();return i?r[t]=i:r.splice(t,1),new AR(r,n)}class AR{constructor(e,t){this.heads=e,this.node=t}get next(){return QR(this.heads)}}class RR{get name(){return this.type.name}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(this.mode=t,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof TR)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let t=e._parent;t;t=t._parent)this.stack.unshift(t.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return!!e&&(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0)}yieldBuf(e,t){this.index=e;let{start:n,buffer:i}=this.buffer;return this.type=t||i.set.types[i.buffer[e]],this.from=n+i.buffer[e+1],this.to=n+i.buffer[e+2],!0}yield(e){return!!e&&(e instanceof TR?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)))}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,t,n){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,t,n,this.mode));let{buffer:i}=this.buffer,r=i.findChild(this.index+4,i.buffer[this.index+3],e,t-this.buffer.start,n);return!(r<0)&&(this.stack.push(this.index),this.yieldBuf(r))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.mode;return this.buffer?!(n&vR.ExcludeBuffers)&&this.enterChild(1,e,t):this.yield(this._tree.enter(e,t,n))}parent(){if(!this.buffer)return this.yieldNode(this.mode&vR.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&vR.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return!!this._tree._parent&&this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode));let{buffer:t}=this.buffer,n=this.stack.length-1;if(e<0){let e=n<0?0:this.stack[n]+4;if(this.index!=e)return this.yieldBuf(t.findChild(e,this.index,-1,0,4))}else{let e=t.buffer[this.index+3];if(e<(n<0?t.buffer.length:t.buffer[this.stack[n]+3]))return this.yieldBuf(e)}return n<0&&this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode))}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let t,n,{buffer:i}=this;if(i){if(e>0){if(this.index<i.buffer.buffer.length)return!1}else for(let e=0;e<this.index;e++)if(i.buffer.buffer[e+3]<this.index)return!1;({index:t,parent:n}=i)}else({index:t,_parent:n}=this._tree);for(;n;({index:t,_parent:n}=n))if(t>-1)for(let i=t+e,r=e<0?-1:n._tree.children.length;i!=r;i+=e){let e=n._tree.children[i];if(this.mode&vR.IncludeAnonymous||e instanceof wR||!e.type.isAnonymous||NR(e))return!1}return!0}move(e,t){if(t&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.move(1,e)}prev(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.move(-1,e)}moveTo(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;for(;(this.from==this.to||(t<1?this.from>=e:this.from>e)||(t>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,t););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,t=null,n=0;if(e&&e.context==this.buffer)e:for(let i=this.index,r=this.stack.length;r>=0;){for(let s=e;s;s=s._parent)if(s.index==i){if(i==this.index)return s;t=s,n=r+1;break e}i=this.stack[--r]}for(let i=n;i<this.stack.length;i++)t=new ER(this.buffer,t,this.stack[i]);return this.bufferNode=new ER(this.buffer,t,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,t){for(let n=0;;){let i=!1;if(this.type.isAnonymous||!1!==e(this)){if(this.firstChild()){n++;continue}this.type.isAnonymous||(i=!0)}for(;i&&t&&t(this),i=this.type.isAnonymous,!this.nextSibling();){if(!n)return;this.parent(),n--,i=!0}}}matchContext(e){if(!this.buffer)return PR(this.node,e);let{buffer:t}=this.buffer,{types:n}=t.set;for(let i=e.length-1,r=this.stack.length-1;i>=0;r--){if(r<0)return PR(this.node,e,i);let s=n[t.buffer[this.stack[r]]];if(!s.isAnonymous){if(e[i]&&e[i]!=s.name)return!1;i--}}return!0}}function NR(e){return e.children.some((e=>e instanceof wR||!e.type.isAnonymous||NR(e)))}const IR=new WeakMap;function DR(e,t){if(!e.isAnonymous||t instanceof wR||t.type!=e)return 1;let n=IR.get(t);if(null==n){n=1;for(let i of t.children){if(i.type!=e||!(i instanceof yR)){n=1;break}n+=DR(e,i)}IR.set(t,n)}return n}function MR(e,t,n,i,r,s,o,a,l){let h=0;for(let f=i;f<r;f++)h+=DR(e,t[f]);let c=Math.ceil(1.5*h/8),u=[],d=[];return function t(n,i,r,o,a){for(let h=r;h<o;){let r=h,f=i[h],p=DR(e,n[h]);for(h++;h<o;h++){let t=DR(e,n[h]);if(p+t>=c)break;p+=t}if(h==r+1){if(p>c){let e=n[r];t(e.children,e.positions,0,e.children.length,i[r]+a);continue}u.push(n[r])}else{let t=i[h-1]+n[h-1].length-f;u.push(MR(e,n,i,r,h,f,t,null,l))}d.push(f+a-s)}}(t,n,i,r,0),(a||l)(u,d,o)}class LR{constructor(e,t,n,i){let r=arguments.length>4&&void 0!==arguments[4]&&arguments[4],s=arguments.length>5&&void 0!==arguments[5]&&arguments[5];this.from=e,this.to=t,this.tree=n,this.offset=i,this.open=(r?1:0)|(s?2:0)}get openStart(){return(1&this.open)>0}get openEnd(){return(2&this.open)>0}static addTree(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=[new LR(0,e.length,e,0,!1,n)];for(let r of t)r.to>e.length&&i.push(r);return i}static applyChanges(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:128;if(!t.length)return e;let i=[],r=1,s=e.length?e[0]:null;for(let o=0,a=0,l=0;;o++){let h=o<t.length?t[o]:null,c=h?h.fromA:1e9;if(c-a>=n)for(;s&&s.from<c;){let t=s;if(a>=t.from||c<=t.to||l){let e=Math.max(t.from,a)-l,n=Math.min(t.to,c)-l;t=e>=n?null:new LR(e,n,t.tree,t.offset+l,o>0,!!h)}if(t&&i.push(t),s.to>c)break;s=r<e.length?e[r++]:null}if(!h)break;a=h.toA,l=h.toA-h.toB}return i}}class $R{startParse(e,t,n){return"string"==typeof e&&(e=new UR(e)),n=n?n.length?n.map((e=>new uR(e.from,e.to))):[new uR(0,0)]:[new uR(0,e.length)],this.createParse(e,t||[],n)}parse(e,t,n){let i=this.startParse(e,t,n);for(;;){let e=i.advance();if(e)return e}}}class UR{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,t){return this.string.slice(e,t)}}new dR({perNode:!0});let qR=0;class VR{constructor(e,t,n){this.set=e,this.base=t,this.modified=n,this.id=qR++}static define(e){if(null===e||void 0===e?void 0:e.base)throw new Error("Can not derive from a modified tag");let t=new VR([],null,[]);if(t.set.push(t),e)for(let n of e.set)t.set.push(n);return t}static defineModifier(){let e=new jR;return t=>t.modified.indexOf(e)>-1?t:jR.get(t.base||t,t.modified.concat(e).sort(((e,t)=>e.id-t.id)))}}let zR=0;class jR{constructor(){this.instances=[],this.id=zR++}static get(e,t){if(!t.length)return e;let n=t[0].instances.find((n=>n.base==e&&function(e,t){return e.length==t.length&&e.every(((e,n)=>e==t[n]))}(t,n.modified)));if(n)return n;let i=[],r=new VR(i,e,t);for(let o of t)o.instances.push(r);let s=function(e){let t=[[]];for(let n=0;n<e.length;n++)for(let i=0,r=t.length;i<r;i++)t.push(t[i].concat(e[n]));return t.sort(((e,t)=>t.length-e.length))}(t);for(let o of e.set)if(!o.modified.length)for(let e of s)i.push(jR.get(o,e));return r}}function BR(e){let t=Object.create(null);for(let n in e){let i=e[n];Array.isArray(i)||(i=[i]);for(let e of n.split(" "))if(e){let n=[],r=2,s=e;for(let t=0;;){if("..."==s&&t>0&&t+3==e.length){r=1;break}let i=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(s);if(!i)throw new RangeError("Invalid path: "+e);if(n.push("*"==i[0]?"":'"'==i[0][0]?JSON.parse(i[0]):i[0]),t+=i[0].length,t==e.length)break;let o=e[t++];if(t==e.length&&"!"==o){r=0;break}if("/"!=o)throw new RangeError("Invalid path: "+e);s=e.slice(t)}let o=n.length-1,a=n[o];if(!a)throw new RangeError("Invalid path: "+e);let l=new WR(i,r,o>0?n.slice(0,o):null);t[a]=l.sort(t[a])}}return FR.add(t)}const FR=new dR;class WR{constructor(e,t,n,i){this.tags=e,this.mode=t,this.context=n,this.next=i}get opaque(){return 0==this.mode}get inherit(){return 1==this.mode}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}function XR(e,t){let n=Object.create(null);for(let s of e)if(Array.isArray(s.tag))for(let e of s.tag)n[e.id]=s.class;else n[s.tag.id]=s.class;let{scope:i,all:r=null}=t||{};return{style:e=>{let t=r;for(let i of e)for(let e of i.set){let i=n[e.id];if(i){t=t?t+" "+i:i;break}}return t},scope:i}}function YR(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:e.length,s=new GR(i,Array.isArray(t)?t:[t],n);s.highlightRange(e.cursor(),i,r,"",s.highlighters),s.flush(r)}WR.empty=new WR([],2,null);class GR{constructor(e,t,n){this.at=e,this.highlighters=t,this.span=n,this.class=""}startSpan(e,t){t!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=t)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,t,n,i,r){let{type:s,from:o,to:a}=e;if(o>=n||a<=t)return;s.isTop&&(r=this.highlighters.filter((e=>!e.scope||e.scope(s))));let l=i,h=function(e){let t=e.type.prop(FR);for(;t&&t.context&&!e.matchContext(t.context);)t=t.next;return t||null}(e)||WR.empty,c=function(e,t){let n=null;for(let i of e){let e=i.style(t);e&&(n=n?n+" "+e:e)}return n}(r,h.tags);if(c&&(l&&(l+=" "),l+=c,1==h.mode&&(i+=(i?" ":"")+c)),this.startSpan(Math.max(t,o),l),h.opaque)return;let u=e.tree&&e.tree.prop(dR.mounted);if(u&&u.overlay){let s=e.node.enter(u.overlay[0].from+o,1),h=this.highlighters.filter((e=>!e.scope||e.scope(u.tree.type))),c=e.firstChild();for(let d=0,f=o;;d++){let p=d<u.overlay.length?u.overlay[d]:null,g=p?p.from+o:a,m=Math.max(t,f),O=Math.min(n,g);if(m<O&&c)for(;e.from<O&&(this.highlightRange(e,m,O,i,r),this.startSpan(Math.min(O,e.to),l),!(e.to>=g)&&e.nextSibling()););if(!p||g>n)break;f=p.to+o,f>t&&(this.highlightRange(s.cursor(),Math.max(t,p.from+o),Math.min(n,f),"",h),this.startSpan(Math.min(n,f),l))}c&&e.parent()}else if(e.firstChild()){u&&(i="");do{if(!(e.to<=t)){if(e.from>=n)break;this.highlightRange(e,t,n,i,r),this.startSpan(Math.min(n,e.to),l)}}while(e.nextSibling());e.parent()}}}const ZR=VR.define,HR=ZR(),KR=ZR(),JR=ZR(KR),eN=ZR(KR),tN=ZR(),nN=ZR(tN),iN=ZR(tN),rN=ZR(),sN=ZR(rN),oN=ZR(),aN=ZR(),lN=ZR(),hN=ZR(lN),cN=ZR(),uN={comment:HR,lineComment:ZR(HR),blockComment:ZR(HR),docComment:ZR(HR),name:KR,variableName:ZR(KR),typeName:JR,tagName:ZR(JR),propertyName:eN,attributeName:ZR(eN),className:ZR(KR),labelName:ZR(KR),namespace:ZR(KR),macroName:ZR(KR),literal:tN,string:nN,docString:ZR(nN),character:ZR(nN),attributeValue:ZR(nN),number:iN,integer:ZR(iN),float:ZR(iN),bool:ZR(tN),regexp:ZR(tN),escape:ZR(tN),color:ZR(tN),url:ZR(tN),keyword:oN,self:ZR(oN),null:ZR(oN),atom:ZR(oN),unit:ZR(oN),modifier:ZR(oN),operatorKeyword:ZR(oN),controlKeyword:ZR(oN),definitionKeyword:ZR(oN),moduleKeyword:ZR(oN),operator:aN,derefOperator:ZR(aN),arithmeticOperator:ZR(aN),logicOperator:ZR(aN),bitwiseOperator:ZR(aN),compareOperator:ZR(aN),updateOperator:ZR(aN),definitionOperator:ZR(aN),typeOperator:ZR(aN),controlOperator:ZR(aN),punctuation:lN,separator:ZR(lN),bracket:hN,angleBracket:ZR(hN),squareBracket:ZR(hN),paren:ZR(hN),brace:ZR(hN),content:rN,heading:sN,heading1:ZR(sN),heading2:ZR(sN),heading3:ZR(sN),heading4:ZR(sN),heading5:ZR(sN),heading6:ZR(sN),contentSeparator:ZR(rN),list:ZR(rN),quote:ZR(rN),emphasis:ZR(rN),strong:ZR(rN),link:ZR(rN),monospace:ZR(rN),strikethrough:ZR(rN),inserted:ZR(),deleted:ZR(),changed:ZR(),invalid:ZR(),meta:cN,documentMeta:ZR(cN),annotation:ZR(cN),processingInstruction:ZR(cN),definition:VR.defineModifier(),constant:VR.defineModifier(),function:VR.defineModifier(),standard:VR.defineModifier(),local:VR.defineModifier(),special:VR.defineModifier()};XR([{tag:uN.link,class:"tok-link"},{tag:uN.heading,class:"tok-heading"},{tag:uN.emphasis,class:"tok-emphasis"},{tag:uN.strong,class:"tok-strong"},{tag:uN.keyword,class:"tok-keyword"},{tag:uN.atom,class:"tok-atom"},{tag:uN.bool,class:"tok-bool"},{tag:uN.url,class:"tok-url"},{tag:uN.labelName,class:"tok-labelName"},{tag:uN.inserted,class:"tok-inserted"},{tag:uN.deleted,class:"tok-deleted"},{tag:uN.literal,class:"tok-literal"},{tag:uN.string,class:"tok-string"},{tag:uN.number,class:"tok-number"},{tag:[uN.regexp,uN.escape,uN.special(uN.string)],class:"tok-string2"},{tag:uN.variableName,class:"tok-variableName"},{tag:uN.local(uN.variableName),class:"tok-variableName tok-local"},{tag:uN.definition(uN.variableName),class:"tok-variableName tok-definition"},{tag:uN.special(uN.variableName),class:"tok-variableName2"},{tag:uN.definition(uN.propertyName),class:"tok-propertyName tok-definition"},{tag:uN.typeName,class:"tok-typeName"},{tag:uN.namespace,class:"tok-namespace"},{tag:uN.className,class:"tok-className"},{tag:uN.macroName,class:"tok-macroName"},{tag:uN.propertyName,class:"tok-propertyName"},{tag:uN.operator,class:"tok-operator"},{tag:uN.comment,class:"tok-comment"},{tag:uN.meta,class:"tok-meta"},{tag:uN.invalid,class:"tok-invalid"},{tag:uN.punctuation,class:"tok-punctuation"}]);var dN;const fN=new dR;const pN=new dR;class gN{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";this.data=e,this.name=i,TO.prototype.hasOwnProperty("tree")||Object.defineProperty(TO.prototype,"tree",{get(){return ON(this)}}),this.parser=t,this.extension=[_N.of(this),TO.languageData.of(((e,t,n)=>{let i=mN(e,t,n),r=i.type.prop(fN);if(!r)return[];let s=e.facet(r),o=i.type.prop(pN);if(o){let r=i.resolve(t-i.from,n);for(let t of o)if(t.test(r,e)){let n=e.facet(t.facet);return"replace"==t.type?n:n.concat(s)}}return s}))].concat(n)}isActiveAt(e,t){return mN(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1).type.prop(fN)==this.data}findRegions(e){let t=e.facet(_N);if((null===t||void 0===t?void 0:t.data)==this.data)return[{from:0,to:e.doc.length}];if(!t||!t.allowsNesting)return[];let n=[],i=(e,t)=>{if(e.prop(fN)==this.data)return void n.push({from:t,to:t+e.length});let r=e.prop(dR.mounted);if(r){if(r.tree.prop(fN)==this.data){if(r.overlay)for(let e of r.overlay)n.push({from:e.from+t,to:e.to+t});else n.push({from:t,to:t+e.length});return}if(r.overlay){let e=n.length;if(i(r.tree,r.overlay[0].from+t),n.length>e)return}}for(let n=0;n<e.children.length;n++){let r=e.children[n];r instanceof yR&&i(r,e.positions[n]+t)}};return i(ON(e),0),n}get allowsNesting(){return!0}}function mN(e,t,n){let i=e.facet(_N),r=ON(e).topNode;if(!i||i.allowsNesting)for(let s=r;s;s=s.enter(t,n,vR.ExcludeBuffers))s.type.isTop&&(r=s);return r}gN.setState=fO.define();function ON(e){let t=e.field(gN.state,!1);return t?t.tree:yR.empty}class vN{constructor(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}get length(){return this.doc.length}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,t){let n=this.cursorPos-this.string.length;return e<n||t>=this.cursorPos?this.doc.sliceString(e,t):this.string.slice(e-n,t-n)}}let yN=null;class bN{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3?arguments[3]:void 0,r=arguments.length>4?arguments[4]:void 0,s=arguments.length>5?arguments[5]:void 0,o=arguments.length>6?arguments[6]:void 0,a=arguments.length>7?arguments[7]:void 0;this.parser=e,this.state=t,this.fragments=n,this.tree=i,this.treeLen=r,this.viewport=s,this.skipped=o,this.scheduleOn=a,this.parse=null,this.tempSkipped=[]}static create(e,t,n){return new bN(e,t,[],yR.empty,0,n,[],null)}startParse(){return this.parser.startParse(new vN(this.state.doc),this.fragments)}work(e,t){return null!=t&&t>=this.state.doc.length&&(t=void 0),this.tree!=yR.empty&&this.isDone(null!==t&&void 0!==t?t:this.state.doc.length)?(this.takeTree(),!0):this.withContext((()=>{var n;if("number"==typeof e){let t=Date.now()+e;e=()=>Date.now()>t}for(this.parse||(this.parse=this.startParse()),null!=t&&(null==this.parse.stoppedAt||this.parse.stoppedAt>t)&&t<this.state.doc.length&&this.parse.stopAt(t);;){let i=this.parse.advance();if(i){if(this.fragments=this.withoutTempSkipped(LR.addTree(i,this.fragments,null!=this.parse.stoppedAt)),this.treeLen=null!==(n=this.parse.stoppedAt)&&void 0!==n?n:this.state.doc.length,this.tree=i,this.parse=null,!(this.treeLen<(null!==t&&void 0!==t?t:this.state.doc.length)))return!0;this.parse=this.startParse()}if(e())return!1}}))}takeTree(){let e,t;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((null==this.parse.stoppedAt||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext((()=>{for(;!(t=this.parse.advance()););})),this.treeLen=e,this.tree=t,this.fragments=this.withoutTempSkipped(LR.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let t=yN;yN=this;try{return e()}finally{yN=t}}withoutTempSkipped(e){for(let t;t=this.tempSkipped.pop();)e=wN(e,t.from,t.to);return e}changes(e,t){let{fragments:n,tree:i,treeLen:r,viewport:s,skipped:o}=this;if(this.takeTree(),!e.empty){let t=[];if(e.iterChangedRanges(((e,n,i,r)=>t.push({fromA:e,toA:n,fromB:i,toB:r}))),n=LR.applyChanges(n,t),i=yR.empty,r=0,s={from:e.mapPos(s.from,-1),to:e.mapPos(s.to,1)},this.skipped.length){o=[];for(let t of this.skipped){let n=e.mapPos(t.from,1),i=e.mapPos(t.to,-1);n<i&&o.push({from:n,to:i})}}}return new bN(this.parser,t,n,i,r,s,o,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let t=this.skipped.length;for(let n=0;n<this.skipped.length;n++){let{from:t,to:i}=this.skipped[n];t<e.to&&i>e.from&&(this.fragments=wN(this.fragments,t,i),this.skipped.splice(n--,1))}return!(this.skipped.length>=t)&&(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,t){this.skipped.push({from:e,to:t})}static getSkippingParser(e){return new class extends $R{createParse(t,n,i){let r=i[0].from,s=i[i.length-1].to;return{parsedPos:r,advance(){let t=yN;if(t){for(let e of i)t.tempSkipped.push(e);e&&(t.scheduleOn=t.scheduleOn?Promise.all([t.scheduleOn,e]):e)}return this.parsedPos=s,new yR(gR.none,[],[],s-r)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let t=this.fragments;return this.treeLen>=e&&t.length&&0==t[0].from&&t[0].to>=e}static get(){return yN}}function wN(e,t,n){return LR.applyChanges(e,[{fromA:t,toA:n,fromB:t,toB:n}])}class kN{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let t=this.context.changes(e.changes,e.state),n=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),t.viewport.to);return t.work(20,n)||t.takeTree(),new kN(t)}static init(e){let t=Math.min(3e3,e.doc.length),n=bN.create(e.facet(_N).parser,e,{from:0,to:t});return n.work(20,t)||n.takeTree(),new kN(n)}}gN.state=Bm.define({create:kN.init,update(e,t){for(let n of t.effects)if(n.is(gN.setState))return n.value;return t.startState.facet(_N)!=t.state.facet(_N)?kN.init(t.state):e.apply(t)}});let SN=e=>{let t=setTimeout((()=>e()),500);return()=>clearTimeout(t)};"undefined"!=typeof requestIdleCallback&&(SN=e=>{let t=-1,n=setTimeout((()=>{t=requestIdleCallback(e,{timeout:400})}),100);return()=>t<0?clearTimeout(n):cancelIdleCallback(t)});const xN="undefined"!=typeof navigator&&(null===(dN=navigator.scheduling)||void 0===dN?void 0:dN.isInputPending)?()=>navigator.scheduling.isInputPending():null,TN=Ky.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let t=this.view.state.field(gN.state).context;(t.updateViewport(e.view.viewport)||this.view.viewport.to>t.treeLen)&&this.scheduleWork(),(e.docChanged||e.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(t)}scheduleWork(){if(this.working)return;let{state:e}=this.view,t=e.field(gN.state);t.tree==t.context.tree&&t.context.isDone(e.doc.length)||(this.working=SN(this.work))}work(e){this.working=null;let t=Date.now();if(this.chunkEnd<t&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=t+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:n,viewport:{to:i}}=this.view,r=n.field(gN.state);if(r.tree==r.context.tree&&r.context.isDone(i+1e5))return;let s=Date.now()+Math.min(this.chunkBudget,100,e&&!xN?Math.max(25,e.timeRemaining()-5):1e9),o=r.context.treeLen<i&&n.doc.length>i+1e3,a=r.context.work((()=>xN&&xN()||Date.now()>s),i+(o?0:1e5));this.chunkBudget-=Date.now()-t,(a||this.chunkBudget<=0)&&(r.context.takeTree(),this.view.dispatch({effects:gN.setState.of(new kN(r.context))})),this.chunkBudget>0&&(!a||o)&&this.scheduleWork(),this.checkAsyncSchedule(r.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then((()=>this.scheduleWork())).catch((e=>Yy(this.view.state,e))).then((()=>this.workScheduled--)),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),_N=Lm.define({combine:e=>e.length?e[0]:null,enables:e=>[gN.state,TN,Gw.contentAttributes.compute([e],(t=>{let n=t.facet(e);return n&&n.name?{"data-language":n.name}:{}}))]});class PN{constructor(e,t){let n;function i(e){let t=YO.newName();return(n||(n=Object.create(null)))["."+t]=e,t}this.specs=e;const r="string"==typeof t.all?t.all:t.all?i(t.all):void 0,s=t.scope;this.scope=s instanceof gN?e=>e.prop(fN)==s.data:s?e=>e==s:void 0,this.style=XR(e.map((e=>({tag:e.tag,class:e.class||i(Object.assign({},e,{tag:null}))}))),{all:r}).style,this.module=n?new YO(n):null,this.themeType=t.themeType}static define(e,t){return new PN(e,t||{})}}const CN=Lm.define(),EN=Lm.define({combine:e=>e.length?[e[0]]:null});function QN(e){let t=e.facet(CN);return t.length?t:e.facet(EN)}function AN(e,t){let n,i=[NN];return e instanceof PN&&(e.module&&i.push(Gw.styleModule.of(e.module)),n=e.themeType),(null===t||void 0===t?void 0:t.fallback)?i.push(EN.of(e)):n?i.push(CN.computeN([Gw.darkTheme],(t=>t.facet(Gw.darkTheme)==("dark"==n)?[e]:[]))):i.push(CN.of(e)),i}class RN{constructor(e){this.markCache=Object.create(null),this.tree=ON(e.state),this.decorations=this.buildDeco(e,QN(e.state)),this.decoratedTo=e.viewport.to}update(e){let t=ON(e.state),n=QN(e.state),i=n!=QN(e.startState),{viewport:r}=e.view,s=e.changes.mapPos(this.decoratedTo,1);t.length<r.to&&!i&&t.type==this.tree.type&&s>=r.to?(this.decorations=this.decorations.map(e.changes),this.decoratedTo=s):(t!=this.tree||e.viewportChanged||i)&&(this.tree=t,this.decorations=this.buildDeco(e.view,n),this.decoratedTo=r.to)}buildDeco(e,t){if(!t||!this.tree.length)return oy.none;let n=new RO;for(let{from:i,to:r}of e.visibleRanges)YR(this.tree,t,((e,t,i)=>{n.add(e,t,this.markCache[i]||(this.markCache[i]=oy.mark({class:i})))}),i,r);return n.finish()}}const NN=Zm.high(Ky.fromClass(RN,{decorations:e=>e.decorations}));uN.meta,uN.link,uN.heading,uN.emphasis,uN.strong,uN.strikethrough,uN.keyword,uN.atom,uN.bool,uN.url,uN.contentSeparator,uN.labelName,uN.literal,uN.inserted,uN.string,uN.deleted,uN.regexp,uN.escape,uN.string,uN.variableName,uN.variableName,uN.typeName,uN.namespace,uN.className,uN.variableName,uN.macroName,uN.propertyName,uN.comment,uN.invalid;const IN=Object.create(null),DN=[gR.none],MN=[],LN=Object.create(null),$N=Object.create(null);for(let[n,Sk]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])$N[n]=qN(IN,Sk);function UN(e,t){MN.indexOf(e)>-1||(MN.push(e),console.warn(t))}function qN(e,t){let n=[];for(let a of t.split(" ")){let t=[];for(let n of a.split(".")){let i=e[n]||uN[n];i?"function"==typeof i?t.length?t=t.map(i):UN(n,"Modifier ".concat(n," used at start of tag")):t.length?UN(n,"Tag ".concat(n," used as modifier")):t=Array.isArray(i)?i:[i]:UN(n,"Unknown highlighting tag ".concat(n))}for(let e of t)n.push(e)}if(!n.length)return 0;let i=t.replace(/ /g,"_"),r=i+" "+n.map((e=>e.id)),s=LN[r];if(s)return s.id;let o=LN[r]=gR.define({id:DN.length,name:i,props:[BR({[i]:n})]});return DN.push(o),o.id}gy.RTL,gy.LTR;const VN="#e5c07b",zN="#e06c75",jN="#56b6c2",BN="#ffffff",FN="#abb2bf",WN="#7d8799",XN="#61afef",YN="#98c379",GN="#d19a66",ZN="#c678dd",HN="#21252b",KN="#2c313a",JN="#282c34",eI="#353a42",tI="#3E4451",nI="#528bff",iI=[Gw.theme({"&":{color:FN,backgroundColor:JN},".cm-content":{caretColor:nI},".cm-cursor, .cm-dropCursor":{borderLeftColor:nI},"&.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:tI},".cm-panels":{backgroundColor:HN,color:FN},".cm-panels.cm-panels-top":{borderBottom:"2px solid black"},".cm-panels.cm-panels-bottom":{borderTop:"2px solid black"},".cm-searchMatch":{backgroundColor:"#72a1ff59",outline:"1px solid #457dff"},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:"#6199ff2f"},".cm-activeLine":{backgroundColor:"#6699ff0b"},".cm-selectionMatch":{backgroundColor:"#aafe661a"},"&.cm-focused .cm-matchingBracket, &.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bad0f847"},".cm-gutters":{backgroundColor:JN,color:WN,border:"none"},".cm-activeLineGutter":{backgroundColor:KN},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:"#ddd"},".cm-tooltip":{border:"none",backgroundColor:eI},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"transparent",borderBottomColor:"transparent"},".cm-tooltip .cm-tooltip-arrow:after":{borderTopColor:eI,borderBottomColor:eI},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{backgroundColor:KN,color:FN}}},{dark:!0}),AN(PN.define([{tag:uN.keyword,color:ZN},{tag:[uN.name,uN.deleted,uN.character,uN.propertyName,uN.macroName],color:zN},{tag:[uN.function(uN.variableName),uN.labelName],color:XN},{tag:[uN.color,uN.constant(uN.name),uN.standard(uN.name)],color:GN},{tag:[uN.definition(uN.name),uN.separator],color:FN},{tag:[uN.typeName,uN.className,uN.number,uN.changed,uN.annotation,uN.modifier,uN.self,uN.namespace],color:VN},{tag:[uN.operator,uN.operatorKeyword,uN.url,uN.escape,uN.regexp,uN.link,uN.special(uN.string)],color:jN},{tag:[uN.meta,uN.comment],color:WN},{tag:uN.strong,fontWeight:"bold"},{tag:uN.emphasis,fontStyle:"italic"},{tag:uN.strikethrough,textDecoration:"line-through"},{tag:uN.link,color:WN,textDecoration:"underline"},{tag:uN.heading,fontWeight:"bold",color:zN},{tag:[uN.atom,uN.bool,uN.special(uN.variableName)],color:GN},{tag:[uN.processingInstruction,uN.string,uN.inserted],color:YN},{tag:uN.invalid,color:BN}]))];var rI=Gw.theme({"&":{backgroundColor:"#fff"}},{dark:!1}),sI=function(e){void 0===e&&(e={});var{indentWithTab:t=!0,editable:n=!0,readOnly:i=!1,theme:r="light",placeholder:s="",basicSetup:o=!0}=e,a=[];switch(t&&a.unshift(ik.of([TT])),o&&("boolean"===typeof o?a.unshift(lR()):a.unshift(lR(o))),s&&a.unshift(function(e){return Ky.fromClass(class{constructor(t){this.view=t,this.placeholder=e?oy.set([oy.widget({widget:new qk(e),side:1}).range(0)]):oy.none}get decorations(){return this.view.state.doc.length?oy.none:this.placeholder}},{decorations:e=>e.decorations})}(s)),r){case"light":a.push(rI);break;case"dark":a.push(iI);break;case"none":break;default:a.push(r)}return!1===n&&a.push(Gw.editable.of(!1)),i&&a.push(TO.readOnly.of(!0)),[...a]},oI=cO.define(),aI=[];function lI(e){var{value:t,selection:n,onChange:i,onStatistics:s,onCreateEditor:o,onUpdate:a,extensions:l=aI,autoFocus:h,theme:c="light",height:u=null,minHeight:d=null,maxHeight:f=null,width:p=null,minWidth:g=null,maxWidth:m=null,placeholder:O="",editable:v=!0,readOnly:y=!1,indentWithTab:b=!0,basicSetup:w=!0,root:k,initialState:S}=e,[x,T]=(0,r.useState)(),[_,P]=(0,r.useState)(),[C,E]=(0,r.useState)(),Q=Gw.theme({"&":{height:u,minHeight:d,maxHeight:f,width:p,minWidth:g,maxWidth:m},"& .cm-scroller":{height:"100% !important"}}),A=Gw.updateListener.of((e=>{if(e.docChanged&&"function"===typeof i&&!e.transactions.some((e=>e.annotation(oI)))){var t=e.state.doc.toString();i(t,e)}s&&s((e=>({line:e.state.doc.lineAt(e.state.selection.main.from),lineCount:e.state.doc.lines,lineBreak:e.state.lineBreak,length:e.state.doc.length,readOnly:e.state.readOnly,tabSize:e.state.tabSize,selection:e.state.selection,selectionAsSingle:e.state.selection.asSingle().main,ranges:e.state.selection.ranges,selectionCode:e.state.sliceDoc(e.state.selection.main.from,e.state.selection.main.to),selections:e.state.selection.ranges.map((t=>e.state.sliceDoc(t.from,t.to))),selectedText:e.state.selection.ranges.some((e=>!e.empty))}))(e))})),R=[A,Q,...sI({theme:c,editable:v,readOnly:y,placeholder:O,indentWithTab:b,basicSetup:w})];return a&&"function"===typeof a&&R.push(Gw.updateListener.of(a)),R=R.concat(l),(0,r.useEffect)((()=>{if(x&&!C){var e={doc:t,selection:n,extensions:R},i=S?TO.fromJSON(S.json,e,S.fields):TO.create(e);if(E(i),!_){var r=new Gw({state:i,parent:x,root:k});P(r),o&&o(r,i)}}return()=>{_&&(E(void 0),P(void 0))}}),[x,C]),(0,r.useEffect)((()=>T(e.container)),[e.container]),(0,r.useEffect)((()=>()=>{_&&(_.destroy(),P(void 0))}),[_]),(0,r.useEffect)((()=>{h&&_&&_.focus()}),[h,_]),(0,r.useEffect)((()=>{_&&_.dispatch({effects:fO.reconfigure.of(R)})}),[c,l,u,d,f,p,g,m,O,v,y,b,w,i,a]),(0,r.useEffect)((()=>{if(void 0!==t){var e=_?_.state.doc.toString():"";_&&t!==e&&_.dispatch({changes:{from:0,to:e.length,insert:t||""},annotations:[oI.of(!0)]})}}),[t,_]),{state:C,setState:E,view:_,setView:P,container:x,setContainer:T}}var hI=["className","value","selection","extensions","onChange","onStatistics","onCreateEditor","onUpdate","autoFocus","theme","height","minHeight","maxHeight","width","minWidth","maxWidth","basicSetup","placeholder","indentWithTab","editable","readOnly","root","initialState"],cI=(0,r.forwardRef)(((e,t)=>{var{className:n,value:i="",selection:s,extensions:o=[],onChange:a,onStatistics:l,onCreateEditor:h,onUpdate:c,autoFocus:u,theme:d="light",height:f,minHeight:p,maxHeight:g,width:m,minWidth:O,maxWidth:v,basicSetup:y,placeholder:b,indentWithTab:w,editable:k,readOnly:S,root:x,initialState:T}=e,_=function(e,t){if(null==e)return{};var n={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(t.includes(i))continue;n[i]=e[i]}return n}(e,hI),P=(0,r.useRef)(null),{state:C,view:E,container:Q}=lI({container:P.current,root:x,value:i,autoFocus:u,theme:d,height:f,minHeight:p,maxHeight:g,width:m,minWidth:O,maxWidth:v,basicSetup:y,placeholder:b,indentWithTab:w,editable:k,readOnly:S,selection:s,onChange:a,onStatistics:l,onCreateEditor:h,onUpdate:c,extensions:o,initialState:T});if((0,r.useImperativeHandle)(t,(()=>({editor:P.current,state:C,view:E})),[P,Q,C,E]),"string"!==typeof i)throw new Error("value must be typeof string but got "+typeof i);var A="string"===typeof d?"cm-theme-"+d:"cm-theme";return(0,Gg.jsx)("div",em({ref:P,className:A+(n?" "+n:"")},_))}));cI.displayName="CodeMirror";const uI=1024;let dI=0;class fI{constructor(e,t){this.from=e,this.to=t}}class pI{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.id=dI++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return"function"!=typeof e&&(e=OI.match(e)),t=>{let n=e(t);return void 0===n?null:[this,n]}}}pI.closedBy=new pI({deserialize:e=>e.split(" ")}),pI.openedBy=new pI({deserialize:e=>e.split(" ")}),pI.group=new pI({deserialize:e=>e.split(" ")}),pI.isolate=new pI({deserialize:e=>{if(e&&"rtl"!=e&&"ltr"!=e&&"auto"!=e)throw new RangeError("Invalid value for isolate: "+e);return e||"auto"}}),pI.contextHash=new pI({perNode:!0}),pI.lookAhead=new pI({perNode:!0}),pI.mounted=new pI({perNode:!0});class gI{constructor(e,t,n){this.tree=e,this.overlay=t,this.parser=n}static get(e){return e&&e.props&&e.props[pI.mounted.id]}}const mI=Object.create(null);class OI{constructor(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;this.name=e,this.props=t,this.id=n,this.flags=i}static define(e){let t=e.props&&e.props.length?Object.create(null):mI,n=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(null==e.name?8:0),i=new OI(e.name||"",t,e.id,n);if(e.props)for(let r of e.props)if(Array.isArray(r)||(r=r(i)),r){if(r[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");t[r[0].id]=r[1]}return i}prop(e){return this.props[e.id]}get isTop(){return(1&this.flags)>0}get isSkipped(){return(2&this.flags)>0}get isError(){return(4&this.flags)>0}get isAnonymous(){return(8&this.flags)>0}is(e){if("string"==typeof e){if(this.name==e)return!0;let t=this.prop(pI.group);return!!t&&t.indexOf(e)>-1}return this.id==e}static match(e){let t=Object.create(null);for(let n in e)for(let i of n.split(" "))t[i]=e[n];return e=>{for(let n=e.prop(pI.group),i=-1;i<(n?n.length:0);i++){let r=t[i<0?e.name:n[i]];if(r)return r}}}}OI.none=new OI("",Object.create(null),0,8);class vI{constructor(e){this.types=e;for(let t=0;t<e.length;t++)if(e[t].id!=t)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(){let e=[];for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];for(let r of this.types){let t=null;for(let e of n){let n=e(r);n&&(t||(t=Object.assign({},r.props)),t[n[0].id]=n[1])}e.push(t?new OI(r.name,t,r.id,r.flags):r)}return new vI(e)}}const yI=new WeakMap,bI=new WeakMap;var wI;!function(e){e[e.ExcludeBuffers=1]="ExcludeBuffers",e[e.IncludeAnonymous=2]="IncludeAnonymous",e[e.IgnoreMounts=4]="IgnoreMounts",e[e.IgnoreOverlays=8]="IgnoreOverlays"}(wI||(wI={}));class kI{constructor(e,t,n,i,r){if(this.type=e,this.children=t,this.positions=n,this.length=i,this.props=null,r&&r.length){this.props=Object.create(null);for(let[e,t]of r)this.props["number"==typeof e?e:e.id]=t}}toString(){let e=gI.get(this);if(e&&!e.overlay)return e.tree.toString();let t="";for(let n of this.children){let e=n.toString();e&&(t&&(t+=","),t+=e)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(t.length?"("+t+")":""):t}cursor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return new DI(this.topNode,e)}cursorAt(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=yI.get(this)||this.topNode,i=new DI(n);return i.moveTo(e,t),yI.set(this,i._tree),i}get topNode(){return new CI(this,0,0,null)}resolve(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=_I(yI.get(this)||this.topNode,e,t,!1);return yI.set(this,n),n}resolveInner(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=_I(bI.get(this)||this.topNode,e,t,!0);return bI.set(this,n),n}resolveStack(e){return function(e,t,n){let i=e.resolveInner(t,n),r=null;for(let s=i instanceof CI?i:i.context.parent;s;s=s.parent)if(s.index<0){let e=s.parent;(r||(r=[i])).push(e.resolve(t,n)),s=e}else{let e=gI.get(s.tree);if(e&&e.overlay&&e.overlay[0].from<=t&&e.overlay[e.overlay.length-1].to>=t){let o=new CI(e.tree,e.overlay[0].from+s.from,-1,s);(r||(r=[i])).push(_I(o,t,n,!1))}}return r?NI(r):i}(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0)}iterate(e){let{enter:t,leave:n,from:i=0,to:r=this.length}=e,s=e.mode||0,o=(s&wI.IncludeAnonymous)>0;for(let a=this.cursor(s|wI.IncludeAnonymous);;){let e=!1;if(a.from<=r&&a.to>=i&&(!o&&a.type.isAnonymous||!1!==t(a))){if(a.firstChild())continue;e=!0}for(;e&&n&&(o||!a.type.isAnonymous)&&n(a),!a.nextSibling();){if(!a.parent())return;e=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let t in this.props)e.push([+t,this.props[t]]);return e}balance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.children.length<=8?this:UI(OI.none,this.children,this.positions,0,this.children.length,0,this.length,((e,t,n)=>new kI(this.type,e,t,n,this.propValues)),e.makeTree||((e,t,n)=>new kI(OI.none,e,t,n)))}static build(e){return function(e){var t;let{buffer:n,nodeSet:i,maxBufferLength:r=uI,reused:s=[],minRepeatType:o=i.types.length}=e,a=Array.isArray(n)?new SI(n,n.length):n,l=i.types,h=0,c=0;function u(e,t,n,v,y,b){let{id:w,start:k,end:S,size:x}=a,T=c;for(;x<0;){if(a.next(),-1==x){let t=s[w];return n.push(t),void v.push(k-e)}if(-3==x)return void(h=w);if(-4==x)return void(c=w);throw new RangeError("Unrecognized record size: ".concat(x))}let _,P,C=l[w],E=k-e;if(S-k<=r&&(P=m(a.pos-t,y))){let t=new Uint16Array(P.size-P.skip),n=a.pos-P.size,r=t.length;for(;a.pos>n;)r=O(P.start,t,r);_=new xI(t,S-P.start,i),E=P.start-e}else{let e=a.pos-x;a.next();let t=[],n=[],i=w>=o?w:-1,s=0,l=S;for(;a.pos>e;)i>=0&&a.id==i&&a.size>=0?(a.end<=l-r&&(p(t,n,k,s,a.end,l,i,T),s=t.length,l=a.end),a.next()):b>2500?d(k,e,t,n):u(k,e,t,n,i,b+1);if(i>=0&&s>0&&s<t.length&&p(t,n,k,s,k,l,i,T),t.reverse(),n.reverse(),i>-1&&s>0){let e=f(C);_=UI(C,t,n,0,t.length,0,S-k,e,e)}else _=g(C,t,n,S-k,T-S)}n.push(_),v.push(E)}function d(e,t,n,s){let o=[],l=0,h=-1;for(;a.pos>t;){let{id:e,start:t,end:n,size:i}=a;if(i>4)a.next();else{if(h>-1&&t<h)break;h<0&&(h=n-r),o.push(e,t,n),l++,a.next()}}if(l){let t=new Uint16Array(4*l),r=o[o.length-2];for(let e=o.length-3,n=0;e>=0;e-=3)t[n++]=o[e],t[n++]=o[e+1]-r,t[n++]=o[e+2]-r,t[n++]=n;n.push(new xI(t,o[2]-r,i)),s.push(r-e)}}function f(e){return(t,n,i)=>{let r,s,o=0,a=t.length-1;if(a>=0&&(r=t[a])instanceof kI){if(!a&&r.type==e&&r.length==i)return r;(s=r.prop(pI.lookAhead))&&(o=n[a]+r.length+s)}return g(e,t,n,i,o)}}function p(e,t,n,r,s,o,a,l){let h=[],c=[];for(;e.length>r;)h.push(e.pop()),c.push(t.pop()+n-s);e.push(g(i.types[a],h,c,o-s,l-o)),t.push(s-n)}function g(e,t,n,i){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,s=arguments.length>5?arguments[5]:void 0;if(h){let e=[pI.contextHash,h];s=s?[e].concat(s):[e]}if(r>25){let e=[pI.lookAhead,r];s=s?[e].concat(s):[e]}return new kI(e,t,n,i,s)}function m(e,t){let n=a.fork(),i=0,s=0,l=0,h=n.end-r,c={size:0,start:0,skip:0};e:for(let r=n.pos-e;n.pos>r;){let e=n.size;if(n.id==t&&e>=0){c.size=i,c.start=s,c.skip=l,l+=4,i+=4,n.next();continue}let a=n.pos-e;if(e<0||a<r||n.start<h)break;let u=n.id>=o?4:0,d=n.start;for(n.next();n.pos>a;){if(n.size<0){if(-3!=n.size)break e;u+=4}else n.id>=o&&(u+=4);n.next()}s=d,i+=e,l+=u}return(t<0||i==e)&&(c.size=i,c.start=s,c.skip=l),c.size>4?c:void 0}function O(e,t,n){let{id:i,start:r,end:s,size:l}=a;if(a.next(),l>=0&&i<o){let o=n;if(l>4){let i=a.pos-(l-4);for(;a.pos>i;)n=O(e,t,n)}t[--n]=o,t[--n]=s-e,t[--n]=r-e,t[--n]=i}else-3==l?h=i:-4==l&&(c=i);return n}let v=[],y=[];for(;a.pos>0;)u(e.start||0,e.bufferStart||0,v,y,-1,0);let b=null!==(t=e.length)&&void 0!==t?t:v.length?y[0]+v[0].length:0;return new kI(l[e.topID],v.reverse(),y.reverse(),b)}(e)}}kI.empty=new kI(OI.none,[],[],0);class SI{constructor(e,t){this.buffer=e,this.index=t}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new SI(this.buffer,this.index)}}class xI{constructor(e,t,n){this.buffer=e,this.length=t,this.set=n}get type(){return OI.none}toString(){let e=[];for(let t=0;t<this.buffer.length;)e.push(this.childString(t)),t=this.buffer[t+3];return e.join(",")}childString(e){let t=this.buffer[e],n=this.buffer[e+3],i=this.set.types[t],r=i.name;if(/\W/.test(r)&&!i.isError&&(r=JSON.stringify(r)),n==(e+=4))return r;let s=[];for(;e<n;)s.push(this.childString(e)),e=this.buffer[e+3];return r+"("+s.join(",")+")"}findChild(e,t,n,i,r){let{buffer:s}=this,o=-1;for(let a=e;a!=t&&!(TI(r,i,s[a+1],s[a+2])&&(o=a,n>0));a=s[a+3]);return o}slice(e,t,n){let i=this.buffer,r=new Uint16Array(t-e),s=0;for(let o=e,a=0;o<t;){r[a++]=i[o++],r[a++]=i[o++]-n;let t=r[a++]=i[o++]-n;r[a++]=i[o++]-e,s=Math.max(s,t)}return new xI(r,s,this.set)}}function TI(e,t,n,i){switch(e){case-2:return n<t;case-1:return i>=t&&n<t;case 0:return n<t&&i>t;case 1:return n<=t&&i>t;case 2:return i>t;case 4:return!0}}function _I(e,t,n,i){for(var r;e.from==e.to||(n<1?e.from>=t:e.from>t)||(n>-1?e.to<=t:e.to<t);){let t=!i&&e instanceof CI&&e.index<0?null:e.parent;if(!t)return e;e=t}let s=i?0:wI.IgnoreOverlays;if(i)for(let o=e,a=o.parent;a;o=a,a=o.parent)o instanceof CI&&o.index<0&&(null===(r=a.enter(t,n,s))||void 0===r?void 0:r.from)!=o.from&&(e=a);for(;;){let i=e.enter(t,n,s);if(!i)return e;e=i}}class PI{cursor(){return new DI(this,arguments.length>0&&void 0!==arguments[0]?arguments[0]:0)}getChild(e){let t=EI(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:null);return t.length?t[0]:null}getChildren(e){return EI(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}resolve(e){return _I(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,!1)}resolveInner(e){return _I(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,!0)}matchContext(e){return QI(this,e)}enterUnfinishedNodesBefore(e){let t=this.childBefore(e),n=this;for(;t;){let e=t.lastChild;if(!e||e.to!=t.to)break;e.type.isError&&e.from==e.to?(n=t,t=e.prevSibling):t=e}return n}get node(){return this}get next(){return this.parent}}class CI extends PI{constructor(e,t,n,i){super(),this._tree=e,this.from=t,this.index=n,this._parent=i}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,t,n,i){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;for(let s=this;;){for(let{children:o,positions:a}=s._tree,l=t>0?o.length:-1;e!=l;e+=t){let l=o[e],h=a[e]+s.from;if(TI(i,n,h,h+l.length))if(l instanceof xI){if(r&wI.ExcludeBuffers)continue;let o=l.findChild(0,l.buffer.length,t,n-h,i);if(o>-1)return new RI(new AI(s,l,e,h),null,o)}else if(r&wI.IncludeAnonymous||!l.type.isAnonymous||MI(l)){let o;if(!(r&wI.IgnoreMounts)&&(o=gI.get(l))&&!o.overlay)return new CI(o.tree,h,e,s);let a=new CI(l,h,e,s);return r&wI.IncludeAnonymous||!a.type.isAnonymous?a:a.nextChild(t<0?l.children.length-1:0,t,n,i)}}if(r&wI.IncludeAnonymous||!s.type.isAnonymous)return null;if(e=s.index>=0?s.index+t:t<0?-1:s._parent._tree.children.length,s=s._parent,!s)return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,t){let n,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(!(i&wI.IgnoreOverlays)&&(n=gI.get(this._tree))&&n.overlay){let i=e-this.from;for(let{from:e,to:r}of n.overlay)if((t>0?e<=i:e<i)&&(t<0?r>=i:r>i))return new CI(n.tree,n.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,t,i)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}}function EI(e,t,n,i){let r=e.cursor(),s=[];if(!r.firstChild())return s;if(null!=n)for(let o=!1;!o;)if(o=r.type.is(n),!r.nextSibling())return s;for(;;){if(null!=i&&r.type.is(i))return s;if(r.type.is(t)&&s.push(r.node),!r.nextSibling())return null==i?s:[]}}function QI(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.length-1;for(let i=e.parent;n>=0;i=i.parent){if(!i)return!1;if(!i.type.isAnonymous){if(t[n]&&t[n]!=i.name)return!1;n--}}return!0}class AI{constructor(e,t,n,i){this.parent=e,this.buffer=t,this.index=n,this.start=i}}class RI extends PI{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,t,n){super(),this.context=e,this._parent=t,this.index=n,this.type=e.buffer.set.types[e.buffer.buffer[n]]}child(e,t,n){let{buffer:i}=this.context,r=i.findChild(this.index+4,i.buffer[this.index+3],e,t-this.context.start,n);return r<0?null:new RI(this.context,this,r)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,t){if((arguments.length>2&&void 0!==arguments[2]?arguments[2]:0)&wI.ExcludeBuffers)return null;let{buffer:n}=this.context,i=n.findChild(this.index+4,n.buffer[this.index+3],t>0?1:-1,e-this.context.start,t);return i<0?null:new RI(this.context,this,i)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,t=e.buffer[this.index+3];return t<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new RI(this.context,this._parent,t):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,t=this._parent?this._parent.index+4:0;return this.index==t?this.externalSibling(-1):new RI(this.context,this._parent,e.findChild(t,this.index,-1,0,4))}get tree(){return null}toTree(){let e=[],t=[],{buffer:n}=this.context,i=this.index+4,r=n.buffer[this.index+3];if(r>i){let s=n.buffer[this.index+1];e.push(n.slice(i,r,s)),t.push(0)}return new kI(this.type,e,t,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}}function NI(e){if(!e.length)return null;let t=0,n=e[0];for(let s=1;s<e.length;s++){let i=e[s];(i.from>n.from||i.to<n.to)&&(n=i,t=s)}let i=n instanceof CI&&n.index<0?null:n.parent,r=e.slice();return i?r[t]=i:r.splice(t,1),new II(r,n)}class II{constructor(e,t){this.heads=e,this.node=t}get next(){return NI(this.heads)}}class DI{get name(){return this.type.name}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(this.mode=t,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof CI)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let t=e._parent;t;t=t._parent)this.stack.unshift(t.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return!!e&&(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0)}yieldBuf(e,t){this.index=e;let{start:n,buffer:i}=this.buffer;return this.type=t||i.set.types[i.buffer[e]],this.from=n+i.buffer[e+1],this.to=n+i.buffer[e+2],!0}yield(e){return!!e&&(e instanceof CI?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)))}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,t,n){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,t,n,this.mode));let{buffer:i}=this.buffer,r=i.findChild(this.index+4,i.buffer[this.index+3],e,t-this.buffer.start,n);return!(r<0)&&(this.stack.push(this.index),this.yieldBuf(r))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.mode;return this.buffer?!(n&wI.ExcludeBuffers)&&this.enterChild(1,e,t):this.yield(this._tree.enter(e,t,n))}parent(){if(!this.buffer)return this.yieldNode(this.mode&wI.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&wI.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return!!this._tree._parent&&this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode));let{buffer:t}=this.buffer,n=this.stack.length-1;if(e<0){let e=n<0?0:this.stack[n]+4;if(this.index!=e)return this.yieldBuf(t.findChild(e,this.index,-1,0,4))}else{let e=t.buffer[this.index+3];if(e<(n<0?t.buffer.length:t.buffer[this.stack[n]+3]))return this.yieldBuf(e)}return n<0&&this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode))}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let t,n,{buffer:i}=this;if(i){if(e>0){if(this.index<i.buffer.buffer.length)return!1}else for(let e=0;e<this.index;e++)if(i.buffer.buffer[e+3]<this.index)return!1;({index:t,parent:n}=i)}else({index:t,_parent:n}=this._tree);for(;n;({index:t,_parent:n}=n))if(t>-1)for(let i=t+e,r=e<0?-1:n._tree.children.length;i!=r;i+=e){let e=n._tree.children[i];if(this.mode&wI.IncludeAnonymous||e instanceof xI||!e.type.isAnonymous||MI(e))return!1}return!0}move(e,t){if(t&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.move(1,e)}prev(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.move(-1,e)}moveTo(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;for(;(this.from==this.to||(t<1?this.from>=e:this.from>e)||(t>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,t););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,t=null,n=0;if(e&&e.context==this.buffer)e:for(let i=this.index,r=this.stack.length;r>=0;){for(let s=e;s;s=s._parent)if(s.index==i){if(i==this.index)return s;t=s,n=r+1;break e}i=this.stack[--r]}for(let i=n;i<this.stack.length;i++)t=new RI(this.buffer,t,this.stack[i]);return this.bufferNode=new RI(this.buffer,t,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,t){for(let n=0;;){let i=!1;if(this.type.isAnonymous||!1!==e(this)){if(this.firstChild()){n++;continue}this.type.isAnonymous||(i=!0)}for(;i&&t&&t(this),i=this.type.isAnonymous,!this.nextSibling();){if(!n)return;this.parent(),n--,i=!0}}}matchContext(e){if(!this.buffer)return QI(this.node,e);let{buffer:t}=this.buffer,{types:n}=t.set;for(let i=e.length-1,r=this.stack.length-1;i>=0;r--){if(r<0)return QI(this.node,e,i);let s=n[t.buffer[this.stack[r]]];if(!s.isAnonymous){if(e[i]&&e[i]!=s.name)return!1;i--}}return!0}}function MI(e){return e.children.some((e=>e instanceof xI||!e.type.isAnonymous||MI(e)))}const LI=new WeakMap;function $I(e,t){if(!e.isAnonymous||t instanceof xI||t.type!=e)return 1;let n=LI.get(t);if(null==n){n=1;for(let i of t.children){if(i.type!=e||!(i instanceof kI)){n=1;break}n+=$I(e,i)}LI.set(t,n)}return n}function UI(e,t,n,i,r,s,o,a,l){let h=0;for(let f=i;f<r;f++)h+=$I(e,t[f]);let c=Math.ceil(1.5*h/8),u=[],d=[];return function t(n,i,r,o,a){for(let h=r;h<o;){let r=h,f=i[h],p=$I(e,n[h]);for(h++;h<o;h++){let t=$I(e,n[h]);if(p+t>=c)break;p+=t}if(h==r+1){if(p>c){let e=n[r];t(e.children,e.positions,0,e.children.length,i[r]+a);continue}u.push(n[r])}else{let t=i[h-1]+n[h-1].length-f;u.push(UI(e,n,i,r,h,f,t,null,l))}d.push(f+a-s)}}(t,n,i,r,0),(a||l)(u,d,o)}class qI{startParse(e,t,n){return"string"==typeof e&&(e=new VI(e)),n=n?n.length?n.map((e=>new fI(e.from,e.to))):[new fI(0,0)]:[new fI(0,e.length)],this.createParse(e,t||[],n)}parse(e,t,n){let i=this.startParse(e,t,n);for(;;){let e=i.advance();if(e)return e}}}class VI{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,t){return this.string.slice(e,t)}}new pI({perNode:!0});class zI{constructor(e,t,n,i,r,s,o,a,l){let h=arguments.length>9&&void 0!==arguments[9]?arguments[9]:0,c=arguments.length>10?arguments[10]:void 0;this.p=e,this.stack=t,this.state=n,this.reducePos=i,this.pos=r,this.score=s,this.buffer=o,this.bufferBase=a,this.curContext=l,this.lookAhead=h,this.parent=c}toString(){return"[".concat(this.stack.filter(((e,t)=>t%3==0)).concat(this.state),"]@").concat(this.pos).concat(this.score?"!"+this.score:"")}static start(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=e.parser.context;return new zI(e,[],t,n,n,0,[],0,i?new jI(i,i.start):null,0,null)}get context(){return this.curContext?this.curContext.context:null}pushState(e,t){this.stack.push(this.state,t,this.bufferBase+this.buffer.length),this.state=e}reduce(e){var t;let n=e>>19,i=65535&e,{parser:r}=this.p;this.reducePos<this.pos-25&&this.setLookAhead(this.pos);let s=r.dynamicPrecedence(i);if(s&&(this.score+=s),0==n)return this.pushState(r.getGoto(this.state,i,!0),this.reducePos),i<r.minRepeatTerm&&this.storeNode(i,this.reducePos,this.reducePos,4,!0),void this.reduceContext(i,this.reducePos);let o=this.stack.length-3*(n-1)-(262144&e?6:0),a=o?this.stack[o-2]:this.p.ranges[0].from,l=this.reducePos-a;l>=2e3&&!(null===(t=this.p.parser.nodeSet.types[i])||void 0===t?void 0:t.isAnonymous)&&(a==this.p.lastBigReductionStart?(this.p.bigReductionCount++,this.p.lastBigReductionSize=l):this.p.lastBigReductionSize<l&&(this.p.bigReductionCount=1,this.p.lastBigReductionStart=a,this.p.lastBigReductionSize=l));let h=o?this.stack[o-1]:0,c=this.bufferBase+this.buffer.length-h;if(i<r.minRepeatTerm||131072&e){let e=r.stateFlag(this.state,1)?this.pos:this.reducePos;this.storeNode(i,a,e,c+4,!0)}if(262144&e)this.state=this.stack[o];else{let e=this.stack[o-3];this.state=r.getGoto(e,i,!0)}for(;this.stack.length>o;)this.stack.pop();this.reduceContext(i,a)}storeNode(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:4,r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(0==e&&(!this.stack.length||this.stack[this.stack.length-1]<this.buffer.length+this.bufferBase)){let e=this,i=this.buffer.length;if(0==i&&e.parent&&(i=e.bufferBase-e.parent.bufferBase,e=e.parent),i>0&&0==e.buffer[i-4]&&e.buffer[i-1]>-1){if(t==n)return;if(e.buffer[i-2]>=t)return void(e.buffer[i-2]=n)}}if(r&&this.pos!=n){let r=this.buffer.length;if(r>0&&0!=this.buffer[r-4])for(;r>0&&this.buffer[r-2]>n;)this.buffer[r]=this.buffer[r-4],this.buffer[r+1]=this.buffer[r-3],this.buffer[r+2]=this.buffer[r-2],this.buffer[r+3]=this.buffer[r-1],r-=4,i>4&&(i-=4);this.buffer[r]=e,this.buffer[r+1]=t,this.buffer[r+2]=n,this.buffer[r+3]=i}else this.buffer.push(e,t,n,i)}shift(e,t,n,i){if(131072&e)this.pushState(65535&e,this.pos);else if(0==(262144&e)){let r=e,{parser:s}=this.p;(i>this.pos||t<=s.maxNode)&&(this.pos=i,s.stateFlag(r,1)||(this.reducePos=i)),this.pushState(r,n),this.shiftContext(t,n),t<=s.maxNode&&this.buffer.push(t,n,i,4)}else this.pos=i,this.shiftContext(t,n),t<=this.p.parser.maxNode&&this.buffer.push(t,n,i,4)}apply(e,t,n,i){65536&e?this.reduce(e):this.shift(e,t,n,i)}useNode(e,t){let n=this.p.reused.length-1;(n<0||this.p.reused[n]!=e)&&(this.p.reused.push(e),n++);let i=this.pos;this.reducePos=this.pos=i+e.length,this.pushState(t,i),this.buffer.push(n,i,this.reducePos,-1),this.curContext&&this.updateContext(this.curContext.tracker.reuse(this.curContext.context,e,this,this.p.stream.reset(this.pos-e.length)))}split(){let e=this,t=e.buffer.length;for(;t>0&&e.buffer[t-2]>e.reducePos;)t-=4;let n=e.buffer.slice(t),i=e.bufferBase+t;for(;e&&i==e.bufferBase;)e=e.parent;return new zI(this.p,this.stack.slice(),this.state,this.reducePos,this.pos,this.score,n,i,this.curContext,this.lookAhead,e)}recoverByDelete(e,t){let n=e<=this.p.parser.maxNode;n&&this.storeNode(e,this.pos,t,4),this.storeNode(0,this.pos,t,n?8:4),this.pos=this.reducePos=t,this.score-=190}canShift(e){for(let t=new BI(this);;){let n=this.p.parser.stateSlot(t.state,4)||this.p.parser.hasAction(t.state,e);if(0==n)return!1;if(0==(65536&n))return!0;t.reduce(n)}}recoverByInsert(e){if(this.stack.length>=300)return[];let t=this.p.parser.nextStates(this.state);if(t.length>8||this.stack.length>=120){let n=[];for(let i,r=0;r<t.length;r+=2)(i=t[r+1])!=this.state&&this.p.parser.hasAction(i,e)&&n.push(t[r],i);if(this.stack.length<120)for(let e=0;n.length<8&&e<t.length;e+=2){let i=t[e+1];n.some(((e,t)=>1&t&&e==i))||n.push(t[e],i)}t=n}let n=[];for(let i=0;i<t.length&&n.length<4;i+=2){let e=t[i+1];if(e==this.state)continue;let r=this.split();r.pushState(e,this.pos),r.storeNode(0,r.pos,r.pos,4,!0),r.shiftContext(t[i],this.pos),r.reducePos=this.pos,r.score-=200,n.push(r)}return n}forceReduce(){let{parser:e}=this.p,t=e.stateSlot(this.state,5);if(0==(65536&t))return!1;if(!e.validAction(this.state,t)){let n=t>>19,i=65535&t,r=this.stack.length-3*n;if(r<0||e.getGoto(this.stack[r],i,!1)<0){let e=this.findForcedReduction();if(null==e)return!1;t=e}this.storeNode(0,this.pos,this.pos,4,!0),this.score-=100}return this.reducePos=this.pos,this.reduce(t),!0}findForcedReduction(){let{parser:e}=this.p,t=[],n=(i,r)=>{if(!t.includes(i))return t.push(i),e.allActions(i,(t=>{if(393216&t);else if(65536&t){let n=(t>>19)-r;if(n>1){let i=65535&t,r=this.stack.length-3*n;if(r>=0&&e.getGoto(this.stack[r],i,!1)>=0)return n<<19|65536|i}}else{let e=n(t,r+1);if(null!=e)return e}}))};return n(this.state,0)}forceAll(){for(;!this.p.parser.stateFlag(this.state,2);)if(!this.forceReduce()){this.storeNode(0,this.pos,this.pos,4,!0);break}return this}get deadEnd(){if(3!=this.stack.length)return!1;let{parser:e}=this.p;return 65535==e.data[e.stateSlot(this.state,1)]&&!e.stateSlot(this.state,4)}restart(){this.storeNode(0,this.pos,this.pos,4,!0),this.state=this.stack[0],this.stack.length=0}sameState(e){if(this.state!=e.state||this.stack.length!=e.stack.length)return!1;for(let t=0;t<this.stack.length;t+=3)if(this.stack[t]!=e.stack[t])return!1;return!0}get parser(){return this.p.parser}dialectEnabled(e){return this.p.parser.dialect.flags[e]}shiftContext(e,t){this.curContext&&this.updateContext(this.curContext.tracker.shift(this.curContext.context,e,this,this.p.stream.reset(t)))}reduceContext(e,t){this.curContext&&this.updateContext(this.curContext.tracker.reduce(this.curContext.context,e,this,this.p.stream.reset(t)))}emitContext(){let e=this.buffer.length-1;(e<0||-3!=this.buffer[e])&&this.buffer.push(this.curContext.hash,this.pos,this.pos,-3)}emitLookAhead(){let e=this.buffer.length-1;(e<0||-4!=this.buffer[e])&&this.buffer.push(this.lookAhead,this.pos,this.pos,-4)}updateContext(e){if(e!=this.curContext.context){let t=new jI(this.curContext.tracker,e);t.hash!=this.curContext.hash&&this.emitContext(),this.curContext=t}}setLookAhead(e){e>this.lookAhead&&(this.emitLookAhead(),this.lookAhead=e)}close(){this.curContext&&this.curContext.tracker.strict&&this.emitContext(),this.lookAhead>0&&this.emitLookAhead()}}class jI{constructor(e,t){this.tracker=e,this.context=t,this.hash=e.strict?e.hash(t):0}}class BI{constructor(e){this.start=e,this.state=e.state,this.stack=e.stack,this.base=this.stack.length}reduce(e){let t=65535&e,n=e>>19;0==n?(this.stack==this.start.stack&&(this.stack=this.stack.slice()),this.stack.push(this.state,0,0),this.base+=3):this.base-=3*(n-1);let i=this.start.p.parser.getGoto(this.stack[this.base-3],t,!0);this.state=i}}class FI{constructor(e,t,n){this.stack=e,this.pos=t,this.index=n,this.buffer=e.buffer,0==this.index&&this.maybeNext()}static create(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.bufferBase+e.buffer.length;return new FI(e,t,t-e.bufferBase)}maybeNext(){let e=this.stack.parent;null!=e&&(this.index=this.stack.bufferBase-e.bufferBase,this.stack=e,this.buffer=e.buffer)}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}next(){this.index-=4,this.pos-=4,0==this.index&&this.maybeNext()}fork(){return new FI(this.stack,this.pos,this.index)}}function WI(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Uint16Array;if("string"!=typeof e)return e;let n=null;for(let i=0,r=0;i<e.length;){let s=0;for(;;){let t=e.charCodeAt(i++),n=!1;if(126==t){s=65535;break}t>=92&&t--,t>=34&&t--;let r=t-32;if(r>=46&&(r-=46,n=!0),s+=r,n)break;s*=46}n?n[r++]=s:n=new t(s)}return n}class XI{constructor(){this.start=-1,this.value=-1,this.end=-1,this.extended=-1,this.lookAhead=0,this.mask=0,this.context=0}}const YI=new XI;class GI{constructor(e,t){this.input=e,this.ranges=t,this.chunk="",this.chunkOff=0,this.chunk2="",this.chunk2Pos=0,this.next=-1,this.token=YI,this.rangeIndex=0,this.pos=this.chunkPos=t[0].from,this.range=t[0],this.end=t[t.length-1].to,this.readNext()}resolveOffset(e,t){let n=this.range,i=this.rangeIndex,r=this.pos+e;for(;r<n.from;){if(!i)return null;let e=this.ranges[--i];r-=n.from-e.to,n=e}for(;t<0?r>n.to:r>=n.to;){if(i==this.ranges.length-1)return null;let e=this.ranges[++i];r+=e.from-n.to,n=e}return r}clipPos(e){if(e>=this.range.from&&e<this.range.to)return e;for(let t of this.ranges)if(t.to>e)return Math.max(e,t.from);return this.end}peek(e){let t,n,i=this.chunkOff+e;if(i>=0&&i<this.chunk.length)t=this.pos+e,n=this.chunk.charCodeAt(i);else{let i=this.resolveOffset(e,1);if(null==i)return-1;if(t=i,t>=this.chunk2Pos&&t<this.chunk2Pos+this.chunk2.length)n=this.chunk2.charCodeAt(t-this.chunk2Pos);else{let e=this.rangeIndex,i=this.range;for(;i.to<=t;)i=this.ranges[++e];this.chunk2=this.input.chunk(this.chunk2Pos=t),t+this.chunk2.length>i.to&&(this.chunk2=this.chunk2.slice(0,i.to-t)),n=this.chunk2.charCodeAt(0)}}return t>=this.token.lookAhead&&(this.token.lookAhead=t+1),n}acceptToken(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=t?this.resolveOffset(t,-1):this.pos;if(null==n||n<this.token.start)throw new RangeError("Token end out of bounds");this.token.value=e,this.token.end=n}acceptTokenTo(e,t){this.token.value=e,this.token.end=t}getChunk(){if(this.pos>=this.chunk2Pos&&this.pos<this.chunk2Pos+this.chunk2.length){let{chunk:e,chunkPos:t}=this;this.chunk=this.chunk2,this.chunkPos=this.chunk2Pos,this.chunk2=e,this.chunk2Pos=t,this.chunkOff=this.pos-this.chunkPos}else{this.chunk2=this.chunk,this.chunk2Pos=this.chunkPos;let e=this.input.chunk(this.pos),t=this.pos+e.length;this.chunk=t>this.range.to?e.slice(0,this.range.to-this.pos):e,this.chunkPos=this.pos,this.chunkOff=0}}readNext(){return this.chunkOff>=this.chunk.length&&(this.getChunk(),this.chunkOff==this.chunk.length)?this.next=-1:this.next=this.chunk.charCodeAt(this.chunkOff)}advance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;for(this.chunkOff+=e;this.pos+e>=this.range.to;){if(this.rangeIndex==this.ranges.length-1)return this.setDone();e-=this.range.to-this.pos,this.range=this.ranges[++this.rangeIndex],this.pos=this.range.from}return this.pos+=e,this.pos>=this.token.lookAhead&&(this.token.lookAhead=this.pos+1),this.readNext()}setDone(){return this.pos=this.chunkPos=this.end,this.range=this.ranges[this.rangeIndex=this.ranges.length-1],this.chunk="",this.next=-1}reset(e,t){if(t?(this.token=t,t.start=e,t.lookAhead=e+1,t.value=t.extended=-1):this.token=YI,this.pos!=e){if(this.pos=e,e==this.end)return this.setDone(),this;for(;e<this.range.from;)this.range=this.ranges[--this.rangeIndex];for(;e>=this.range.to;)this.range=this.ranges[++this.rangeIndex];e>=this.chunkPos&&e<this.chunkPos+this.chunk.length?this.chunkOff=e-this.chunkPos:(this.chunk="",this.chunkOff=0),this.readNext()}return this}read(e,t){if(e>=this.chunkPos&&t<=this.chunkPos+this.chunk.length)return this.chunk.slice(e-this.chunkPos,t-this.chunkPos);if(e>=this.chunk2Pos&&t<=this.chunk2Pos+this.chunk2.length)return this.chunk2.slice(e-this.chunk2Pos,t-this.chunk2Pos);if(e>=this.range.from&&t<=this.range.to)return this.input.read(e,t);let n="";for(let i of this.ranges){if(i.from>=t)break;i.to>e&&(n+=this.input.read(Math.max(i.from,e),Math.min(i.to,t)))}return n}}class ZI{constructor(e,t){this.data=e,this.id=t}token(e,t){let{parser:n}=t.p;KI(this.data,e,t,this.id,n.data,n.tokenPrecTable)}}ZI.prototype.contextual=ZI.prototype.fallback=ZI.prototype.extend=!1;ZI.prototype.fallback=ZI.prototype.extend=!1;class HI{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.token=e,this.contextual=!!t.contextual,this.fallback=!!t.fallback,this.extend=!!t.extend}}function KI(e,t,n,i,r,s){let o=0,a=1<<i,{dialect:l}=n.p.parser;e:for(;0!=(a&e[o]);){let n=e[o+1];for(let u=o+3;u<n;u+=2)if((e[u+1]&a)>0){let n=e[u];if(l.allows(n)&&(-1==t.token.value||t.token.value==n||eD(n,t.token.value,r,s))){t.acceptToken(n);break}}let i=t.next,h=0,c=e[o+2];if(!(t.next<0&&c>h&&65535==e[n+3*c-3])){for(;h<c;){let r=h+c>>1,s=n+r+(r<<1),a=e[s],l=e[s+1]||65536;if(i<a)c=r;else{if(!(i>=l)){o=e[s+2],t.advance();continue e}h=r+1}}break}o=e[n+3*c-1]}}function JI(e,t,n){for(let i,r=t;65535!=(i=e[r]);r++)if(i==n)return r-t;return-1}function eD(e,t,n,i){let r=JI(n,i,t);return r<0||JI(n,i,e)<r}const tD="undefined"!=typeof process&&{NODE_ENV:"production",PUBLIC_URL:"/DYA",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}&&/\bparse\b/.test({NODE_ENV:"production",PUBLIC_URL:"/DYA",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.LOG);let nD=null;function iD(e,t,n){let i=e.cursor(wI.IncludeAnonymous);for(i.moveTo(t);;)if(!(n<0?i.childBefore(t):i.childAfter(t)))for(;;){if((n<0?i.to<t:i.from>t)&&!i.type.isError)return n<0?Math.max(0,Math.min(i.to-1,t-25)):Math.min(e.length,Math.max(i.from+1,t+25));if(n<0?i.prevSibling():i.nextSibling())break;if(!i.parent())return n<0?0:e.length}}class rD{constructor(e,t){this.fragments=e,this.nodeSet=t,this.i=0,this.fragment=null,this.safeFrom=-1,this.safeTo=-1,this.trees=[],this.start=[],this.index=[],this.nextFragment()}nextFragment(){let e=this.fragment=this.i==this.fragments.length?null:this.fragments[this.i++];if(e){for(this.safeFrom=e.openStart?iD(e.tree,e.from+e.offset,1)-e.offset:e.from,this.safeTo=e.openEnd?iD(e.tree,e.to+e.offset,-1)-e.offset:e.to;this.trees.length;)this.trees.pop(),this.start.pop(),this.index.pop();this.trees.push(e.tree),this.start.push(-e.offset),this.index.push(0),this.nextStart=this.safeFrom}else this.nextStart=1e9}nodeAt(e){if(e<this.nextStart)return null;for(;this.fragment&&this.safeTo<=e;)this.nextFragment();if(!this.fragment)return null;for(;;){let t=this.trees.length-1;if(t<0)return this.nextFragment(),null;let n=this.trees[t],i=this.index[t];if(i==n.children.length){this.trees.pop(),this.start.pop(),this.index.pop();continue}let r=n.children[i],s=this.start[t]+n.positions[i];if(s>e)return this.nextStart=s,null;if(r instanceof kI){if(s==e){if(s<this.safeFrom)return null;let e=s+r.length;if(e<=this.safeTo){let t=r.prop(pI.lookAhead);if(!t||e+t<this.fragment.to)return r}}this.index[t]++,s+r.length>=Math.max(this.safeFrom,e)&&(this.trees.push(r),this.start.push(s),this.index.push(0))}else this.index[t]++,this.nextStart=s+r.length}}}class sD{constructor(e,t){this.stream=t,this.tokens=[],this.mainToken=null,this.actions=[],this.tokens=e.tokenizers.map((e=>new XI))}getActions(e){let t=0,n=null,{parser:i}=e.p,{tokenizers:r}=i,s=i.stateSlot(e.state,3),o=e.curContext?e.curContext.hash:0,a=0;for(let l=0;l<r.length;l++){if(0==(1<<l&s))continue;let i=r[l],h=this.tokens[l];if((!n||i.fallback)&&((i.contextual||h.start!=e.pos||h.mask!=s||h.context!=o)&&(this.updateCachedToken(h,i,e),h.mask=s,h.context=o),h.lookAhead>h.end+25&&(a=Math.max(h.lookAhead,a)),0!=h.value)){let r=t;if(h.extended>-1&&(t=this.addActions(e,h.extended,h.end,t)),t=this.addActions(e,h.value,h.end,t),!i.extend&&(n=h,t>r))break}}for(;this.actions.length>t;)this.actions.pop();return a&&e.setLookAhead(a),n||e.pos!=this.stream.end||(n=new XI,n.value=e.p.parser.eofTerm,n.start=n.end=e.pos,t=this.addActions(e,n.value,n.end,t)),this.mainToken=n,this.actions}getMainToken(e){if(this.mainToken)return this.mainToken;let t=new XI,{pos:n,p:i}=e;return t.start=n,t.end=Math.min(n+1,i.stream.end),t.value=n==i.stream.end?i.parser.eofTerm:0,t}updateCachedToken(e,t,n){let i=this.stream.clipPos(n.pos);if(t.token(this.stream.reset(i,e),n),e.value>-1){let{parser:t}=n.p;for(let i=0;i<t.specialized.length;i++)if(t.specialized[i]==e.value){let r=t.specializers[i](this.stream.read(e.start,e.end),n);if(r>=0&&n.p.parser.dialect.allows(r>>1)){0==(1&r)?e.value=r>>1:e.extended=r>>1;break}}}else e.value=0,e.end=this.stream.clipPos(i+1)}putAction(e,t,n,i){for(let r=0;r<i;r+=3)if(this.actions[r]==e)return i;return this.actions[i++]=e,this.actions[i++]=t,this.actions[i++]=n,i}addActions(e,t,n,i){let{state:r}=e,{parser:s}=e.p,{data:o}=s;for(let a=0;a<2;a++)for(let e=s.stateSlot(r,a?2:1);;e+=3){if(65535==o[e]){if(1!=o[e+1]){0==i&&2==o[e+1]&&(i=this.putAction(uD(o,e+2),t,n,i));break}e=uD(o,e+2)}o[e]==t&&(i=this.putAction(uD(o,e+1),t,n,i))}return i}}class oD{constructor(e,t,n,i){this.parser=e,this.input=t,this.ranges=i,this.recovering=0,this.nextStackID=9812,this.minStackPos=0,this.reused=[],this.stoppedAt=null,this.lastBigReductionStart=-1,this.lastBigReductionSize=0,this.bigReductionCount=0,this.stream=new GI(t,i),this.tokens=new sD(e,this.stream),this.topTerm=e.top[1];let{from:r}=i[0];this.stacks=[zI.start(this,e.top[0],r)],this.fragments=n.length&&this.stream.end-r>4*e.bufferLength?new rD(n,e.nodeSet):null}get parsedPos(){return this.minStackPos}advance(){let e,t,n=this.stacks,i=this.minStackPos,r=this.stacks=[];if(this.bigReductionCount>300&&1==n.length){let[e]=n;for(;e.forceReduce()&&e.stack.length&&e.stack[e.stack.length-2]>=this.lastBigReductionStart;);this.bigReductionCount=this.lastBigReductionSize=0}for(let s=0;s<n.length;s++){let o=n[s];for(;;){if(this.tokens.mainToken=null,o.pos>i)r.push(o);else{if(this.advanceStack(o,r,n))continue;{e||(e=[],t=[]),e.push(o);let n=this.tokens.getMainToken(o);t.push(n.value,n.end)}}break}}if(!r.length){let t=e&&function(e){let t=null;for(let n of e){let e=n.p.stoppedAt;(n.pos==n.p.stream.end||null!=e&&n.pos>e)&&n.p.parser.stateFlag(n.state,2)&&(!t||t.score<n.score)&&(t=n)}return t}(e);if(t)return tD&&console.log("Finish with "+this.stackID(t)),this.stackToTree(t);if(this.parser.strict)throw tD&&e&&console.log("Stuck with token "+(this.tokens.mainToken?this.parser.getName(this.tokens.mainToken.value):"none")),new SyntaxError("No parse at "+i);this.recovering||(this.recovering=5)}if(this.recovering&&e){let n=null!=this.stoppedAt&&e[0].pos>this.stoppedAt?e[0]:this.runRecovery(e,t,r);if(n)return tD&&console.log("Force-finish "+this.stackID(n)),this.stackToTree(n.forceAll())}if(this.recovering){let e=1==this.recovering?1:3*this.recovering;if(r.length>e)for(r.sort(((e,t)=>t.score-e.score));r.length>e;)r.pop();r.some((e=>e.reducePos>i))&&this.recovering--}else if(r.length>1){e:for(let e=0;e<r.length-1;e++){let t=r[e];for(let n=e+1;n<r.length;n++){let i=r[n];if(t.sameState(i)||t.buffer.length>500&&i.buffer.length>500){if(!((t.score-i.score||t.buffer.length-i.buffer.length)>0)){r.splice(e--,1);continue e}r.splice(n--,1)}}}r.length>12&&r.splice(12,r.length-12)}this.minStackPos=r[0].pos;for(let s=1;s<r.length;s++)r[s].pos<this.minStackPos&&(this.minStackPos=r[s].pos);return null}stopAt(e){if(null!=this.stoppedAt&&this.stoppedAt<e)throw new RangeError("Can't move stoppedAt forward");this.stoppedAt=e}advanceStack(e,t,n){let i=e.pos,{parser:r}=this,s=tD?this.stackID(e)+" -> ":"";if(null!=this.stoppedAt&&i>this.stoppedAt)return e.forceReduce()?e:null;if(this.fragments){let t=e.curContext&&e.curContext.tracker.strict,n=t?e.curContext.hash:0;for(let o=this.fragments.nodeAt(i);o;){let i=this.parser.nodeSet.types[o.type.id]==o.type?r.getGoto(e.state,o.type.id):-1;if(i>-1&&o.length&&(!t||(o.prop(pI.contextHash)||0)==n))return e.useNode(o,i),tD&&console.log(s+this.stackID(e)+" (via reuse of ".concat(r.getName(o.type.id),")")),!0;if(!(o instanceof kI)||0==o.children.length||o.positions[0]>0)break;let a=o.children[0];if(!(a instanceof kI&&0==o.positions[0]))break;o=a}}let o=r.stateSlot(e.state,4);if(o>0)return e.reduce(o),tD&&console.log(s+this.stackID(e)+" (via always-reduce ".concat(r.getName(65535&o),")")),!0;if(e.stack.length>=8400)for(;e.stack.length>6e3&&e.forceReduce(););let a=this.tokens.getActions(e);for(let l=0;l<a.length;){let o=a[l++],h=a[l++],c=a[l++],u=l==a.length||!n,d=u?e:e.split(),f=this.tokens.mainToken;if(d.apply(o,h,f?f.start:d.pos,c),tD&&console.log(s+this.stackID(d)+" (via ".concat(0==(65536&o)?"shift":"reduce of ".concat(r.getName(65535&o))," for ").concat(r.getName(h)," @ ").concat(i).concat(d==e?"":", split",")")),u)return!0;d.pos>i?t.push(d):n.push(d)}return!1}advanceFully(e,t){let n=e.pos;for(;;){if(!this.advanceStack(e,null,null))return!1;if(e.pos>n)return aD(e,t),!0}}runRecovery(e,t,n){let i=null,r=!1;for(let s=0;s<e.length;s++){let o=e[s],a=t[s<<1],l=t[1+(s<<1)],h=tD?this.stackID(o)+" -> ":"";if(o.deadEnd){if(r)continue;if(r=!0,o.restart(),tD&&console.log(h+this.stackID(o)+" (restarted)"),this.advanceFully(o,n))continue}let c=o.split(),u=h;for(let e=0;c.forceReduce()&&e<10;e++){if(tD&&console.log(u+this.stackID(c)+" (via force-reduce)"),this.advanceFully(c,n))break;tD&&(u=this.stackID(c)+" -> ")}for(let e of o.recoverByInsert(a))tD&&console.log(h+this.stackID(e)+" (via recover-insert)"),this.advanceFully(e,n);this.stream.end>o.pos?(l==o.pos&&(l++,a=0),o.recoverByDelete(a,l),tD&&console.log(h+this.stackID(o)+" (via recover-delete ".concat(this.parser.getName(a),")")),aD(o,n)):(!i||i.score<o.score)&&(i=o)}return i}stackToTree(e){return e.close(),kI.build({buffer:FI.create(e),nodeSet:this.parser.nodeSet,topID:this.topTerm,maxBufferLength:this.parser.bufferLength,reused:this.reused,start:this.ranges[0].from,length:e.pos-this.ranges[0].from,minRepeatType:this.parser.minRepeatTerm})}stackID(e){let t=(nD||(nD=new WeakMap)).get(e);return t||nD.set(e,t=String.fromCodePoint(this.nextStackID++)),t+e}}function aD(e,t){for(let n=0;n<t.length;n++){let i=t[n];if(i.pos==e.pos&&i.sameState(e))return void(t[n].score<e.score&&(t[n]=e))}t.push(e)}class lD{constructor(e,t,n){this.source=e,this.flags=t,this.disabled=n}allows(e){return!this.disabled||0==this.disabled[e]}}const hD=e=>e;class cD extends qI{constructor(e){if(super(),this.wrappers=[],14!=e.version)throw new RangeError("Parser version (".concat(e.version,") doesn't match runtime version (",14,")"));let t=e.nodeNames.split(" ");this.minRepeatTerm=t.length;for(let o=0;o<e.repeatNodeCount;o++)t.push("");let n=Object.keys(e.topRules).map((t=>e.topRules[t][1])),i=[];for(let o=0;o<t.length;o++)i.push([]);function r(e,t,n){i[e].push([t,t.deserialize(String(n))])}if(e.nodeProps)for(let o of e.nodeProps){let e=o[0];"string"==typeof e&&(e=pI[e]);for(let t=1;t<o.length;){let n=o[t++];if(n>=0)r(n,e,o[t++]);else{let i=o[t+-n];for(let s=-n;s>0;s--)r(o[t++],e,i);t++}}}this.nodeSet=new vI(t.map(((t,r)=>OI.define({name:r>=this.minRepeatTerm?void 0:t,id:r,props:i[r],top:n.indexOf(r)>-1,error:0==r,skipped:e.skippedNodes&&e.skippedNodes.indexOf(r)>-1})))),e.propSources&&(this.nodeSet=this.nodeSet.extend(...e.propSources)),this.strict=!1,this.bufferLength=uI;let s=WI(e.tokenData);this.context=e.context,this.specializerSpecs=e.specialized||[],this.specialized=new Uint16Array(this.specializerSpecs.length);for(let o=0;o<this.specializerSpecs.length;o++)this.specialized[o]=this.specializerSpecs[o].term;this.specializers=this.specializerSpecs.map(dD),this.states=WI(e.states,Uint32Array),this.data=WI(e.stateData),this.goto=WI(e.goto),this.maxTerm=e.maxTerm,this.tokenizers=e.tokenizers.map((e=>"number"==typeof e?new ZI(s,e):e)),this.topRules=e.topRules,this.dialects=e.dialects||{},this.dynamicPrecedences=e.dynamicPrecedences||null,this.tokenPrecTable=e.tokenPrec,this.termNames=e.termNames||null,this.maxNode=this.nodeSet.types.length-1,this.dialect=this.parseDialect(),this.top=this.topRules[Object.keys(this.topRules)[0]]}createParse(e,t,n){let i=new oD(this,e,t,n);for(let r of this.wrappers)i=r(i,e,t,n);return i}getGoto(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=this.goto;if(t>=i[0])return-1;for(let r=i[t+1];;){let t=i[r++],s=1&t,o=i[r++];if(s&&n)return o;for(let n=r+(t>>1);r<n;r++)if(i[r]==e)return o;if(s)return-1}}hasAction(e,t){let n=this.data;for(let i=0;i<2;i++)for(let r,s=this.stateSlot(e,i?2:1);;s+=3){if(65535==(r=n[s])){if(1!=n[s+1]){if(2==n[s+1])return uD(n,s+2);break}r=n[s=uD(n,s+2)]}if(r==t||0==r)return uD(n,s+1)}return 0}stateSlot(e,t){return this.states[6*e+t]}stateFlag(e,t){return(this.stateSlot(e,0)&t)>0}validAction(e,t){return!!this.allActions(e,(e=>e==t||null))}allActions(e,t){let n=this.stateSlot(e,4),i=n?t(n):void 0;for(let r=this.stateSlot(e,1);null==i;r+=3){if(65535==this.data[r]){if(1!=this.data[r+1])break;r=uD(this.data,r+2)}i=t(uD(this.data,r+1))}return i}nextStates(e){let t=[];for(let n=this.stateSlot(e,1);;n+=3){if(65535==this.data[n]){if(1!=this.data[n+1])break;n=uD(this.data,n+2)}if(0==(1&this.data[n+2])){let e=this.data[n+1];t.some(((t,n)=>1&n&&t==e))||t.push(this.data[n],e)}}return t}configure(e){let t=Object.assign(Object.create(cD.prototype),this);if(e.props&&(t.nodeSet=this.nodeSet.extend(...e.props)),e.top){let n=this.topRules[e.top];if(!n)throw new RangeError("Invalid top rule name ".concat(e.top));t.top=n}return e.tokenizers&&(t.tokenizers=this.tokenizers.map((t=>{let n=e.tokenizers.find((e=>e.from==t));return n?n.to:t}))),e.specializers&&(t.specializers=this.specializers.slice(),t.specializerSpecs=this.specializerSpecs.map(((n,i)=>{let r=e.specializers.find((e=>e.from==n.external));if(!r)return n;let s=Object.assign(Object.assign({},n),{external:r.to});return t.specializers[i]=dD(s),s}))),e.contextTracker&&(t.context=e.contextTracker),e.dialect&&(t.dialect=this.parseDialect(e.dialect)),null!=e.strict&&(t.strict=e.strict),e.wrap&&(t.wrappers=t.wrappers.concat(e.wrap)),null!=e.bufferLength&&(t.bufferLength=e.bufferLength),t}hasWrappers(){return this.wrappers.length>0}getName(e){return this.termNames?this.termNames[e]:String(e<=this.maxNode&&this.nodeSet.types[e].name||e)}get eofTerm(){return this.maxNode+1}get topNode(){return this.nodeSet.types[this.top[1]]}dynamicPrecedence(e){let t=this.dynamicPrecedences;return null==t?0:t[e]||0}parseDialect(e){let t=Object.keys(this.dialects),n=t.map((()=>!1));if(e)for(let r of e.split(" ")){let e=t.indexOf(r);e>=0&&(n[e]=!0)}let i=null;for(let r=0;r<t.length;r++)if(!n[r])for(let e,n=this.dialects[t[r]];65535!=(e=this.data[n++]);)(i||(i=new Uint8Array(this.maxTerm+1)))[e]=1;return new lD(e,n,i)}static deserialize(e){return new cD(e)}}function uD(e,t){return e[t]|e[t+1]<<16}function dD(e){if(e.external){let t=e.extend?1:0;return(n,i)=>e.external(n,i)<<1|t}return e.get}let fD=0;class pD{constructor(e,t,n){this.set=e,this.base=t,this.modified=n,this.id=fD++}static define(e){if(null===e||void 0===e?void 0:e.base)throw new Error("Can not derive from a modified tag");let t=new pD([],null,[]);if(t.set.push(t),e)for(let n of e.set)t.set.push(n);return t}static defineModifier(){let e=new mD;return t=>t.modified.indexOf(e)>-1?t:mD.get(t.base||t,t.modified.concat(e).sort(((e,t)=>e.id-t.id)))}}let gD=0;class mD{constructor(){this.instances=[],this.id=gD++}static get(e,t){if(!t.length)return e;let n=t[0].instances.find((n=>n.base==e&&function(e,t){return e.length==t.length&&e.every(((e,n)=>e==t[n]))}(t,n.modified)));if(n)return n;let i=[],r=new pD(i,e,t);for(let o of t)o.instances.push(r);let s=function(e){let t=[[]];for(let n=0;n<e.length;n++)for(let i=0,r=t.length;i<r;i++)t.push(t[i].concat(e[n]));return t.sort(((e,t)=>t.length-e.length))}(t);for(let o of e.set)if(!o.modified.length)for(let e of s)i.push(mD.get(o,e));return r}}const OD=new pI;class vD{constructor(e,t,n,i){this.tags=e,this.mode=t,this.context=n,this.next=i}get opaque(){return 0==this.mode}get inherit(){return 1==this.mode}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}vD.empty=new vD([],2,null);const yD=pD.define,bD=yD(),wD=yD(),kD=yD(wD),SD=yD(wD),xD=yD(),TD=yD(xD),_D=yD(xD),PD=yD(),CD=yD(PD),ED=yD(),QD=yD(),AD=yD(),RD=yD(AD),ND=yD(),ID={comment:bD,lineComment:yD(bD),blockComment:yD(bD),docComment:yD(bD),name:wD,variableName:yD(wD),typeName:kD,tagName:yD(kD),propertyName:SD,attributeName:yD(SD),className:yD(wD),labelName:yD(wD),namespace:yD(wD),macroName:yD(wD),literal:xD,string:TD,docString:yD(TD),character:yD(TD),attributeValue:yD(TD),number:_D,integer:yD(_D),float:yD(_D),bool:yD(xD),regexp:yD(xD),escape:yD(xD),color:yD(xD),url:yD(xD),keyword:ED,self:yD(ED),null:yD(ED),atom:yD(ED),unit:yD(ED),modifier:yD(ED),operatorKeyword:yD(ED),controlKeyword:yD(ED),definitionKeyword:yD(ED),moduleKeyword:yD(ED),operator:QD,derefOperator:yD(QD),arithmeticOperator:yD(QD),logicOperator:yD(QD),bitwiseOperator:yD(QD),compareOperator:yD(QD),updateOperator:yD(QD),definitionOperator:yD(QD),typeOperator:yD(QD),controlOperator:yD(QD),punctuation:AD,separator:yD(AD),bracket:RD,angleBracket:yD(RD),squareBracket:yD(RD),paren:yD(RD),brace:yD(RD),content:PD,heading:CD,heading1:yD(CD),heading2:yD(CD),heading3:yD(CD),heading4:yD(CD),heading5:yD(CD),heading6:yD(CD),contentSeparator:yD(PD),list:yD(PD),quote:yD(PD),emphasis:yD(PD),strong:yD(PD),link:yD(PD),monospace:yD(PD),strikethrough:yD(PD),inserted:yD(),deleted:yD(),changed:yD(),invalid:yD(),meta:ND,documentMeta:yD(ND),annotation:yD(ND),processingInstruction:yD(ND),definition:pD.defineModifier(),constant:pD.defineModifier(),function:pD.defineModifier(),standard:pD.defineModifier(),local:pD.defineModifier(),special:pD.defineModifier()},DD=(function(e,t){let n=Object.create(null);for(let s of e)if(Array.isArray(s.tag))for(let e of s.tag)n[e.id]=s.class;else n[s.tag.id]=s.class;let{scope:i,all:r=null}=t||{}}([{tag:ID.link,class:"tok-link"},{tag:ID.heading,class:"tok-heading"},{tag:ID.emphasis,class:"tok-emphasis"},{tag:ID.strong,class:"tok-strong"},{tag:ID.keyword,class:"tok-keyword"},{tag:ID.atom,class:"tok-atom"},{tag:ID.bool,class:"tok-bool"},{tag:ID.url,class:"tok-url"},{tag:ID.labelName,class:"tok-labelName"},{tag:ID.inserted,class:"tok-inserted"},{tag:ID.deleted,class:"tok-deleted"},{tag:ID.literal,class:"tok-literal"},{tag:ID.string,class:"tok-string"},{tag:ID.number,class:"tok-number"},{tag:[ID.regexp,ID.escape,ID.special(ID.string)],class:"tok-string2"},{tag:ID.variableName,class:"tok-variableName"},{tag:ID.local(ID.variableName),class:"tok-variableName tok-local"},{tag:ID.definition(ID.variableName),class:"tok-variableName tok-definition"},{tag:ID.special(ID.variableName),class:"tok-variableName2"},{tag:ID.definition(ID.propertyName),class:"tok-propertyName tok-definition"},{tag:ID.typeName,class:"tok-typeName"},{tag:ID.namespace,class:"tok-namespace"},{tag:ID.className,class:"tok-className"},{tag:ID.macroName,class:"tok-macroName"},{tag:ID.propertyName,class:"tok-propertyName"},{tag:ID.operator,class:"tok-operator"},{tag:ID.comment,class:"tok-comment"},{tag:ID.meta,class:"tok-meta"},{tag:ID.invalid,class:"tok-invalid"},{tag:ID.punctuation,class:"tok-punctuation"}]),10),MD=new Set([25,49,50,263,65,130,56,57,238,62,63,72,73,77,60,61,151,152,155,112]);function LD(e){return e==DD||13==e}function $D(e){return e>=48&&e<=57||e>=65&&e<=70||e>=97&&e<=102}const UD=new HI(((e,t)=>{let n;if(e.next<0)e.acceptToken(199);else if(t.context.flags&VD)LD(e.next)&&e.acceptToken(198,1);else if(((n=e.peek(-1))<0||LD(n))&&t.canShift(197)){let t=0;for(;32==e.next||9==e.next;)e.advance(),t++;e.next!=DD&&13!=e.next&&35!=e.next||e.acceptToken(197,-t)}else LD(e.next)&&e.acceptToken(196,1)}),{contextual:!0}),qD=new HI(((e,t)=>{let n=t.context;if(n.flags)return;let i=e.peek(-1);if(i==DD||13==i){let t=0,i=0;for(;;){if(32==e.next)t++;else{if(9!=e.next)break;t+=8-t%8}e.advance(),i++}t!=n.indent&&e.next!=DD&&13!=e.next&&35!=e.next&&(t<n.indent?e.acceptToken(195,-i):e.acceptToken(194))}})),VD=1,zD=4,jD=8,BD=16,FD=32;function WD(e,t,n){this.parent=e,this.indent=t,this.flags=n,this.hash=(e?e.hash+e.hash<<8:0)+t+(t<<4)+n+(n<<6)}const XD=new WD(null,0,0);const YD=new Map([[241,0],[242,zD],[243,jD],[244,jD|zD],[245,BD],[246,BD|zD],[247,BD|jD],[248,BD|jD|zD],[249,FD],[250,FD|zD],[251,FD|jD],[252,FD|jD|zD],[253,FD|BD],[254,FD|BD|zD],[255,FD|BD|jD],[256,FD|BD|jD|zD]].map((e=>{let[t,n]=e;return[t,2|n]}))),GD=new class{constructor(e){this.start=e.start,this.shift=e.shift||hD,this.reduce=e.reduce||hD,this.reuse=e.reuse||hD,this.hash=e.hash||(()=>0),this.strict=!1!==e.strict}}({start:XD,reduce:(e,t,n,i)=>e.flags&VD&&MD.has(t)||(71==t||72==t)&&2&e.flags?e.parent:e,shift:(e,t,n,i)=>194==t?new WD(e,function(e){let t=0;for(let n=0;n<e.length;n++)t+=9==e.charCodeAt(n)?8-t%8:1;return t}(i.read(i.pos,n.pos)),0):195==t?e.parent:24==t||55==t||59==t||3==t?new WD(e,0,VD):YD.has(t)?new WD(e,0,YD.get(t)|e.flags&VD):e,hash:e=>e.hash}),ZD=new HI((e=>{for(let t=0;t<5;t++){if(e.next!="print".charCodeAt(t))return;e.advance()}if(!/\w/.test(String.fromCharCode(e.next)))for(let t=0;;t++){let n=e.peek(t);if(32!=n&&9!=n)return void(40!=n&&46!=n&&n!=DD&&13!=n&&35!=n&&e.acceptToken(1))}})),HD=new HI(((e,t)=>{let{flags:n}=t.context,i=n&zD?34:39,r=(n&jD)>0,s=!(n&BD),o=(n&FD)>0,a=e.pos;for(;!(e.next<0);)if(o&&123==e.next){if(123!=e.peek(1)){if(e.pos==a)return void e.acceptToken(3,1);break}e.advance(2)}else{if(s&&92==e.next){if(e.pos==a){e.advance();let t=e.next;return t>=0&&(e.advance(),KD(e,t)),void e.acceptToken(2)}break}if(e.next==i&&(!r||e.peek(1)==i&&e.peek(2)==i)){if(e.pos==a)return void e.acceptToken(201,r?3:1);break}if(e.next==DD){if(r)e.advance();else if(e.pos==a)return void e.acceptToken(201);break}e.advance()}e.pos>a&&e.acceptToken(200)}));function KD(e,t){if(111==t)for(let n=0;n<2&&e.next>=48&&e.next<=55;n++)e.advance();else if(120==t)for(let n=0;n<2&&$D(e.next);n++)e.advance();else if(117==t)for(let n=0;n<4&&$D(e.next);n++)e.advance();else if(85==t)for(let n=0;n<8&&$D(e.next);n++)e.advance();else if(78==t&&123==e.next){for(e.advance();e.next>=0&&125!=e.next&&39!=e.next&&34!=e.next&&e.next!=DD;)e.advance();125==e.next&&e.advance()}}const JD=function(e){let t=Object.create(null);for(let n in e){let i=e[n];Array.isArray(i)||(i=[i]);for(let e of n.split(" "))if(e){let n=[],r=2,s=e;for(let t=0;;){if("..."==s&&t>0&&t+3==e.length){r=1;break}let i=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(s);if(!i)throw new RangeError("Invalid path: "+e);if(n.push("*"==i[0]?"":'"'==i[0][0]?JSON.parse(i[0]):i[0]),t+=i[0].length,t==e.length)break;let o=e[t++];if(t==e.length&&"!"==o){r=0;break}if("/"!=o)throw new RangeError("Invalid path: "+e);s=e.slice(t)}let o=n.length-1,a=n[o];if(!a)throw new RangeError("Invalid path: "+e);let l=new vD(i,r,o>0?n.slice(0,o):null);t[a]=l.sort(t[a])}}return OD.add(t)}({'async "*" "**" FormatConversion FormatSpec':ID.modifier,"for while if elif else try except finally return raise break continue with pass assert await yield match case":ID.controlKeyword,"in not and or is del":ID.operatorKeyword,"from def class global nonlocal lambda":ID.definitionKeyword,import:ID.moduleKeyword,"with as print":ID.keyword,Boolean:ID.bool,None:ID.null,VariableName:ID.variableName,"CallExpression/VariableName":ID.function(ID.variableName),"FunctionDefinition/VariableName":ID.function(ID.definition(ID.variableName)),"ClassDefinition/VariableName":ID.definition(ID.className),PropertyName:ID.propertyName,"CallExpression/MemberExpression/PropertyName":ID.function(ID.propertyName),Comment:ID.lineComment,Number:ID.number,String:ID.string,FormatString:ID.special(ID.string),Escape:ID.escape,UpdateOp:ID.updateOperator,"ArithOp!":ID.arithmeticOperator,BitOp:ID.bitwiseOperator,CompareOp:ID.compareOperator,AssignOp:ID.definitionOperator,Ellipsis:ID.punctuation,At:ID.meta,"( )":ID.paren,"[ ]":ID.squareBracket,"{ }":ID.brace,".":ID.derefOperator,", ;":ID.separator}),eM={__proto__:null,await:44,or:54,and:56,in:60,not:62,is:64,if:70,else:72,lambda:76,yield:94,from:96,async:102,for:104,None:162,True:164,False:164,del:178,pass:182,break:186,continue:190,return:194,raise:202,import:206,as:208,global:212,nonlocal:214,assert:218,type:223,elif:236,while:240,try:246,except:248,finally:250,with:254,def:258,class:268,match:279,case:285},tM=cD.deserialize({version:14,states:"##jO`QeOOP$}OSOOO&WQtO'#HUOOQS'#Co'#CoOOQS'#Cp'#CpO'vQdO'#CnO*UQtO'#HTOOQS'#HU'#HUOOQS'#DU'#DUOOQS'#HT'#HTO*rQdO'#D_O+VQdO'#DfO+gQdO'#DjO+zOWO'#DuO,VOWO'#DvO.[QtO'#GuOOQS'#Gu'#GuO'vQdO'#GtO0ZQtO'#GtOOQS'#Eb'#EbO0rQdO'#EcOOQS'#Gs'#GsO0|QdO'#GrOOQV'#Gr'#GrO1XQdO'#FYOOQS'#G^'#G^O1^QdO'#FXOOQV'#IS'#ISOOQV'#Gq'#GqOOQV'#Fq'#FqQ`QeOOO'vQdO'#CqO1lQdO'#C}O1sQdO'#DRO2RQdO'#HYO2cQtO'#EVO'vQdO'#EWOOQS'#EY'#EYOOQS'#E['#E[OOQS'#E^'#E^O2wQdO'#E`O3_QdO'#EdO3rQdO'#EfO3zQtO'#EfO1XQdO'#EiO0rQdO'#ElO1XQdO'#EnO0rQdO'#EtO0rQdO'#EwO4VQdO'#EyO4^QdO'#FOO4iQdO'#EzO0rQdO'#FOO1XQdO'#FQO1XQdO'#FVO4nQdO'#F[P4uOdO'#GpPOOO)CBd)CBdOOQS'#Ce'#CeOOQS'#Cf'#CfOOQS'#Cg'#CgOOQS'#Ch'#ChOOQS'#Ci'#CiOOQS'#Cj'#CjOOQS'#Cl'#ClO'vQdO,59OO'vQdO,59OO'vQdO,59OO'vQdO,59OO'vQdO,59OO'vQdO,59OO5QQdO'#DoOOQS,5:Y,5:YO5eQdO'#HdOOQS,5:],5:]O5rQ!fO,5:]O5wQtO,59YO1lQdO,59bO1lQdO,59bO1lQdO,59bO8gQdO,59bO8lQdO,59bO8sQdO,59jO8zQdO'#HTO:QQdO'#HSOOQS'#HS'#HSOOQS'#D['#D[O:iQdO,59aO'vQdO,59aO:wQdO,59aOOQS,59y,59yO:|QdO,5:RO'vQdO,5:ROOQS,5:Q,5:QO;[QdO,5:QO;aQdO,5:XO'vQdO,5:XO'vQdO,5:VOOQS,5:U,5:UO;rQdO,5:UO;wQdO,5:WOOOW'#Fy'#FyO;|OWO,5:aOOQS,5:a,5:aO<XQdO'#HwOOOW'#Dw'#DwOOOW'#Fz'#FzO<iOWO,5:bOOQS,5:b,5:bOOQS'#F}'#F}O<wQtO,5:iO?iQtO,5=`O@SQ#xO,5=`O@sQtO,5=`OOQS,5:},5:}OA[QeO'#GWOBnQdO,5;^OOQV,5=^,5=^OByQtO'#IPOChQdO,5;tOOQS-E:[-E:[OOQV,5;s,5;sO4dQdO'#FQOOQV-E9o-E9oOCpQtO,59]OEwQtO,59iOFbQdO'#HVOFmQdO'#HVO1XQdO'#HVOFxQdO'#DTOGQQdO,59mOGVQdO'#HZO'vQdO'#HZO0rQdO,5=tOOQS,5=t,5=tO0rQdO'#EROOQS'#ES'#ESOGtQdO'#GPOHUQdO,58|OHUQdO,58|O*xQdO,5:oOHdQtO'#H]OOQS,5:r,5:rOOQS,5:z,5:zOHwQdO,5;OOIYQdO'#IOO1XQdO'#H}OOQS,5;Q,5;QOOQS'#GT'#GTOInQtO,5;QOI|QdO,5;QOJRQdO'#IQOOQS,5;T,5;TOJaQdO'#H|OOQS,5;W,5;WOJrQdO,5;YO4iQdO,5;`O4iQdO,5;cOJzQtO'#ITO'vQdO'#ITOKUQdO,5;eO4VQdO,5;eO0rQdO,5;jO1XQdO,5;lOKZQeO'#EuOLgQgO,5;fO!!hQdO'#IUO4iQdO,5;jO!!sQdO,5;lO!!{QdO,5;qO!#WQtO,5;vO'vQdO,5;vPOOO,5=[,5=[P!#_OSO,5=[P!#dOdO,5=[O!&XQtO1G.jO!&`QtO1G.jO!)PQtO1G.jO!)ZQtO1G.jO!+tQtO1G.jO!,XQtO1G.jO!,lQdO'#HcO!,zQtO'#GuO0rQdO'#HcO!-UQdO'#HbOOQS,5:Z,5:ZO!-^QdO,5:ZO!-cQdO'#HeO!-nQdO'#HeO!.RQdO,5>OOOQS'#Ds'#DsOOQS1G/w1G/wOOQS1G.|1G.|O!/RQtO1G.|O!/YQtO1G.|O1lQdO1G.|O!/uQdO1G/UOOQS'#DZ'#DZO0rQdO,59tOOQS1G.{1G.{O!/|QdO1G/eO!0^QdO1G/eO!0fQdO1G/fO'vQdO'#H[O!0kQdO'#H[O!0pQtO1G.{O!1QQdO,59iO!2WQdO,5=zO!2hQdO,5=zO!2pQdO1G/mO!2uQtO1G/mOOQS1G/l1G/lO!3VQdO,5=uO!3|QdO,5=uO0rQdO1G/qO!4kQdO1G/sO!4pQtO1G/sO!5QQtO1G/qOOQS1G/p1G/pOOQS1G/r1G/rOOOW-E9w-E9wOOQS1G/{1G/{O!5bQdO'#HxO0rQdO'#HxO!5sQdO,5>cOOOW-E9x-E9xOOQS1G/|1G/|OOQS-E9{-E9{O!6RQ#xO1G2zO!6rQtO1G2zO'vQdO,5<jOOQS,5<j,5<jOOQS-E9|-E9|OOQS,5<r,5<rOOQS-E:U-E:UOOQV1G0x1G0xO1XQdO'#GRO!7ZQtO,5>kOOQS1G1`1G1`O!7xQdO1G1`OOQS'#DV'#DVO0rQdO,5=qOOQS,5=q,5=qO!7}QdO'#FrO!8YQdO,59oO!8bQdO1G/XO!8lQtO,5=uOOQS1G3`1G3`OOQS,5:m,5:mO!9]QdO'#GtOOQS,5<k,5<kOOQS-E9}-E9}O!9nQdO1G.hOOQS1G0Z1G0ZO!9|QdO,5=wO!:^QdO,5=wO0rQdO1G0jO0rQdO1G0jO!:oQdO,5>jO!;QQdO,5>jO1XQdO,5>jO!;cQdO,5>iOOQS-E:R-E:RO!;hQdO1G0lO!;sQdO1G0lO!;xQdO,5>lO!<WQdO,5>lO!<fQdO,5>hO!<|QdO,5>hO!=_QdO'#EpO0rQdO1G0tO!=jQdO1G0tO!=oQgO1G0zO!AmQgO1G0}O!EhQdO,5>oO!ErQdO,5>oO!EzQtO,5>oO0rQdO1G1PO!FUQdO1G1PO4iQdO1G1UO!!sQdO1G1WOOQV,5;a,5;aO!FZQfO,5;aO!F`QgO1G1QO!JaQdO'#GZO4iQdO1G1QO4iQdO1G1QO!JqQdO,5>pO!KOQdO,5>pO1XQdO,5>pOOQV1G1U1G1UO!KWQdO'#FSO!KiQ!fO1G1WO!KqQdO1G1WOOQV1G1]1G1]O4iQdO1G1]O!KvQdO1G1]O!LOQdO'#F^OOQV1G1b1G1bO!#WQtO1G1bPOOO1G2v1G2vP!LTOSO1G2vOOQS,5=},5=}OOQS'#Dp'#DpO0rQdO,5=}O!LYQdO,5=|O!LmQdO,5=|OOQS1G/u1G/uO!LuQdO,5>PO!MVQdO,5>PO!M_QdO,5>PO!MrQdO,5>PO!NSQdO,5>POOQS1G3j1G3jOOQS7+$h7+$hO!8bQdO7+$pO# uQdO1G.|O# |QdO1G.|OOQS1G/`1G/`OOQS,5<`,5<`O'vQdO,5<`OOQS7+%P7+%PO#!TQdO7+%POOQS-E9r-E9rOOQS7+%Q7+%QO#!eQdO,5=vO'vQdO,5=vOOQS7+$g7+$gO#!jQdO7+%PO#!rQdO7+%QO#!wQdO1G3fOOQS7+%X7+%XO##XQdO1G3fO##aQdO7+%XOOQS,5<_,5<_O'vQdO,5<_O##fQdO1G3aOOQS-E9q-E9qO#$]QdO7+%]OOQS7+%_7+%_O#$kQdO1G3aO#%YQdO7+%_O#%_QdO1G3gO#%oQdO1G3gO#%wQdO7+%]O#%|QdO,5>dO#&gQdO,5>dO#&gQdO,5>dOOQS'#Dx'#DxO#&xO&jO'#DzO#'TO`O'#HyOOOW1G3}1G3}O#'YQdO1G3}O#'bQdO1G3}O#'mQ#xO7+(fO#(^QtO1G2UP#(wQdO'#GOOOQS,5<m,5<mOOQS-E:P-E:POOQS7+&z7+&zOOQS1G3]1G3]OOQS,5<^,5<^OOQS-E9p-E9pOOQS7+$s7+$sO#)UQdO,5=`O#)oQdO,5=`O#*QQtO,5<aO#*eQdO1G3cOOQS-E9s-E9sOOQS7+&U7+&UO#*uQdO7+&UO#+TQdO,5<nO#+iQdO1G4UOOQS-E:Q-E:QO#+zQdO1G4UOOQS1G4T1G4TOOQS7+&W7+&WO#,]QdO7+&WOOQS,5<p,5<pO#,hQdO1G4WOOQS-E:S-E:SOOQS,5<l,5<lO#,vQdO1G4SOOQS-E:O-E:OO1XQdO'#EqO#-^QdO'#EqO#-iQdO'#IRO#-qQdO,5;[OOQS7+&`7+&`O0rQdO7+&`O#-vQgO7+&fO!JdQdO'#GXO4iQdO7+&fO4iQdO7+&iO#1tQtO,5<tO'vQdO,5<tO#2OQdO1G4ZOOQS-E:W-E:WO#2YQdO1G4ZO4iQdO7+&kO0rQdO7+&kOOQV7+&p7+&pO!KiQ!fO7+&rO!KqQdO7+&rO`QeO1G0{OOQV-E:X-E:XO4iQdO7+&lO4iQdO7+&lOOQV,5<u,5<uO#2bQdO,5<uO!JdQdO,5<uOOQV7+&l7+&lO#2mQgO7+&lO#6hQdO,5<vO#6sQdO1G4[OOQS-E:Y-E:YO#7QQdO1G4[O#7YQdO'#IWO#7hQdO'#IWO1XQdO'#IWOOQS'#IW'#IWO#7sQdO'#IVOOQS,5;n,5;nO#7{QdO,5;nO0rQdO'#FUOOQV7+&r7+&rO4iQdO7+&rOOQV7+&w7+&wO4iQdO7+&wO#8QQfO,5;xOOQV7+&|7+&|POOO7+(b7+(bO#8VQdO1G3iOOQS,5<c,5<cO#8eQdO1G3hOOQS-E9u-E9uO#8xQdO,5<dO#9TQdO,5<dO#9hQdO1G3kOOQS-E9v-E9vO#9xQdO1G3kO#:QQdO1G3kO#:bQdO1G3kO#9xQdO1G3kOOQS<<H[<<H[O#:mQtO1G1zOOQS<<Hk<<HkP#:zQdO'#FtO8sQdO1G3bO#;XQdO1G3bO#;^QdO<<HkOOQS<<Hl<<HlO#;nQdO7+)QOOQS<<Hs<<HsO#<OQtO1G1yP#<oQdO'#FsO#<|QdO7+)RO#=^QdO7+)RO#=fQdO<<HwO#=kQdO7+({OOQS<<Hy<<HyO#>bQdO,5<bO'vQdO,5<bOOQS-E9t-E9tOOQS<<Hw<<HwOOQS,5<g,5<gO0rQdO,5<gO#>gQdO1G4OOOQS-E9y-E9yO#?QQdO1G4OO<XQdO'#H{OOOO'#D{'#D{OOOO'#F|'#F|O#?cO&jO,5:fOOOW,5>e,5>eOOOW7+)i7+)iO#?nQdO7+)iO#?vQdO1G2zO#@aQdO1G2zP'vQdO'#FuO0rQdO<<IpO1XQdO1G2YP1XQdO'#GSO#@rQdO7+)pO#ATQdO7+)pOOQS<<Ir<<IrP1XQdO'#GUP0rQdO'#GQOOQS,5;],5;]O#AfQdO,5>mO#AtQdO,5>mOOQS1G0v1G0vOOQS<<Iz<<IzOOQV-E:V-E:VO4iQdO<<JQOOQV,5<s,5<sO4iQdO,5<sOOQV<<JQ<<JQOOQV<<JT<<JTO#A|QtO1G2`P#BWQdO'#GYO#B_QdO7+)uO#BiQgO<<JVO4iQdO<<JVOOQV<<J^<<J^O4iQdO<<J^O!KiQ!fO<<J^O#FdQgO7+&gOOQV<<JW<<JWO#FnQgO<<JWOOQV1G2a1G2aO1XQdO1G2aO#JiQdO1G2aO4iQdO<<JWO1XQdO1G2bP0rQdO'#G[O#JtQdO7+)vO#KRQdO7+)vOOQS'#FT'#FTO0rQdO,5>rO#KZQdO,5>rOOQS,5>r,5>rO#KfQdO,5>qO#KwQdO,5>qOOQS1G1Y1G1YOOQS,5;p,5;pOOQV<<Jc<<JcO#LPQdO1G1dOOQS7+)T7+)TP#LUQdO'#FwO#LfQdO1G2OO#LyQdO1G2OO#MZQdO1G2OP#MfQdO'#FxO#MsQdO7+)VO#NTQdO7+)VO#NTQdO7+)VO#N]QdO7+)VO#NmQdO7+(|O8sQdO7+(|OOQSAN>VAN>VO$ WQdO<<LmOOQSAN>cAN>cO0rQdO1G1|O$ hQtO1G1|P$ rQdO'#FvOOQS1G2R1G2RP$!PQdO'#F{O$!^QdO7+)jO$!wQdO,5>gOOOO-E9z-E9zOOOW<<MT<<MTO$#VQdO7+(fOOQSAN?[AN?[OOQS7+'t7+'tO$#pQdO<<M[OOQS,5<q,5<qO$$RQdO1G4XOOQS-E:T-E:TOOQVAN?lAN?lOOQV1G2_1G2_O4iQdOAN?qO$$aQgOAN?qOOQVAN?xAN?xO4iQdOAN?xOOQV<<JR<<JRO4iQdOAN?rO4iQdO7+'{OOQV7+'{7+'{O1XQdO7+'{OOQVAN?rAN?rOOQS7+'|7+'|O$([QdO<<MbOOQS1G4^1G4^O0rQdO1G4^OOQS,5<w,5<wO$(iQdO1G4]OOQS-E:Z-E:ZOOQU'#G_'#G_O$(zQfO7+'OO$)VQdO'#F_O$*^QdO7+'jO$*nQdO7+'jOOQS7+'j7+'jO$*yQdO<<LqO$+ZQdO<<LqO$+ZQdO<<LqO$+cQdO'#H^OOQS<<Lh<<LhO$+mQdO<<LhOOQS7+'h7+'hOOQS'#D|'#D|OOOO1G4R1G4RO$,WQdO1G4RO$,`QdO1G4RP!=_QdO'#GVOOQVG25]G25]O4iQdOG25]OOQVG25dG25dOOQVG25^G25^OOQV<<Kg<<KgO4iQdO<<KgOOQS7+)x7+)xP$,kQdO'#G]OOQU-E:]-E:]OOQV<<Jj<<JjO$-_QtO'#FaOOQS'#Fc'#FcO$-oQdO'#FbO$.aQdO'#FbOOQS'#Fb'#FbO$.fQdO'#IYO$)VQdO'#FiO$)VQdO'#FiO$.}QdO'#FjO$)VQdO'#FkO$/UQdO'#IZOOQS'#IZ'#IZO$/sQdO,5;yOOQS<<KU<<KUO$/{QdO<<KUO$0]QdOANB]O$0mQdOANB]O$0uQdO'#H_OOQS'#H_'#H_O1sQdO'#DcO$1`QdO,5=xOOQSANBSANBSOOOO7+)m7+)mO$1wQdO7+)mOOQVLD*wLD*wOOQVANARANARO5rQ!fO'#GaO$2PQtO,5<SO$)VQdO'#FmOOQS,5<W,5<WOOQS'#Fd'#FdO$2qQdO,5;|O$2vQdO,5;|OOQS'#Fg'#FgO$)VQdO'#G`O$3hQdO,5<QO$4SQdO,5>tO$4dQdO,5>tO1XQdO,5<PO$4uQdO,5<TO$4zQdO,5<TO$)VQdO'#I[O$5PQdO'#I[O$5UQdO,5<UOOQS,5<V,5<VO'vQdO'#FpOOQU1G1e1G1eO4iQdO1G1eOOQSAN@pAN@pO$5ZQdOG27wO$5kQdO,59}OOQS1G3d1G3dOOOO<<MX<<MXOOQS,5<{,5<{OOQS-E:_-E:_O$5pQtO'#FaO$5wQdO'#I]O$6VQdO'#I]O$6_QdO,5<XOOQS1G1h1G1hO$6dQdO1G1hO$6iQdO,5<zOOQS-E:^-E:^O$7TQdO,5=OO$7lQdO1G4`OOQS-E:b-E:bOOQS1G1k1G1kOOQS1G1o1G1oO$7|QdO,5>vO$)VQdO,5>vOOQS1G1p1G1pO$8[QtO,5<[OOQU7+'P7+'PO$+cQdO1G/iO$)VQdO,5<YO$8cQdO,5>wO$8jQdO,5>wOOQS1G1s1G1sOOQS7+'S7+'SP$)VQdO'#GdO$8rQdO1G4bO$8|QdO1G4bO$9UQdO1G4bOOQS7+%T7+%TO$9dQdO1G1tO$9rQtO'#FaO$9yQdO,5<}OOQS,5<},5<}O$:XQdO1G4cOOQS-E:a-E:aO$)VQdO,5<|O$:`QdO,5<|O$:eQdO7+)|OOQS-E:`-E:`O$:oQdO7+)|O$)VQdO,5<ZP$)VQdO'#GcO$:wQdO1G2hO$)VQdO1G2hP$;VQdO'#GbO$;^QdO<<MhO$;hQdO1G1uO$;vQdO7+(SO8sQdO'#C}O8sQdO,59bO8sQdO,59bO8sQdO,59bO$<UQtO,5=`O8sQdO1G.|O0rQdO1G/XO0rQdO7+$pP$<iQdO'#GOO'vQdO'#GtO$<vQdO,59bO$<{QdO,59bO$=SQdO,59mO$=XQdO1G/UO1sQdO'#DRO8sQdO,59j",stateData:"$=r~O%cOS%^OSSOS%]PQ~OPdOVaOfoOhYOopOs!POvqO!PrO!Q{O!T!SO!U!RO!XZO!][O!h`O!r`O!s`O!t`O!{tO!}uO#PvO#RwO#TxO#XyO#ZzO#^|O#_|O#a}O#c!OO#l!QO#o!TO#s!UO#u!VO#z!WO#}hO$P!XO%oRO%pRO%tSO%uWO&Z]O&[]O&]]O&^]O&_]O&`]O&a]O&b]O&c^O&d^O&e^O&f^O&g^O&h^O&i^O&j^O~O%]!YO~OV!aO_!aOa!bOh!iO!X!kO!f!mO%j![O%k!]O%l!^O%m!_O%n!_O%o!`O%p!`O%q!aO%r!aO%s!aO~Ok%xXl%xXm%xXn%xXo%xXp%xXs%xXz%xX{%xX!x%xX#g%xX%[%xX%_%xX%z%xXg%xX!T%xX!U%xX%{%xX!W%xX![%xX!Q%xX#[%xXt%xX!m%xX~P%SOfoOhYO!XZO!][O!h`O!r`O!s`O!t`O%oRO%pRO%tSO%uWO&Z]O&[]O&]]O&^]O&_]O&`]O&a]O&b]O&c^O&d^O&e^O&f^O&g^O&h^O&i^O&j^O~Oz%wX{%wX#g%wX%[%wX%_%wX%z%wX~Ok!pOl!qOm!oOn!oOo!rOp!sOs!tO!x%wX~P)pOV!zOg!|Oo0cOv0qO!PrO~P'vOV#OOo0cOv0qO!W#PO~P'vOV#SOa#TOo0cOv0qO![#UO~P'vOQ#XO%`#XO%a#ZO~OQ#^OR#[O%`#^O%a#`O~OV%iX_%iXa%iXh%iXk%iXl%iXm%iXn%iXo%iXp%iXs%iXz%iX!X%iX!f%iX%j%iX%k%iX%l%iX%m%iX%n%iX%o%iX%p%iX%q%iX%r%iX%s%iXg%iX!T%iX!U%iX~O&Z]O&[]O&]]O&^]O&_]O&`]O&a]O&b]O&c^O&d^O&e^O&f^O&g^O&h^O&i^O&j^O{%iX!x%iX#g%iX%[%iX%_%iX%z%iX%{%iX!W%iX![%iX!Q%iX#[%iXt%iX!m%iX~P,eOz#dO{%hX!x%hX#g%hX%[%hX%_%hX%z%hX~Oo0cOv0qO~P'vO#g#gO%[#iO%_#iO~O%uWO~O!T#nO#u!VO#z!WO#}hO~OopO~P'vOV#sOa#tO%uWO{wP~OV#xOo0cOv0qO!Q#yO~P'vO{#{O!x$QO%z#|O#g!yX%[!yX%_!yX~OV#xOo0cOv0qO#g#SX%[#SX%_#SX~P'vOo0cOv0qO#g#WX%[#WX%_#WX~P'vOh$WO%uWO~O!f$YO!r$YO%uWO~OV$eO~P'vO!U$gO#s$hO#u$iO~O{$jO~OV$qO~P'vOS$sO%[$rO%c$tO~OV$}Oa$}Og%POo0cOv0qO~P'vOo0cOv0qO{%SO~P'vO&Y%UO~Oa!bOh!iO!X!kO!f!mOVba_bakbalbambanbaobapbasbazba{ba!xba#gba%[ba%_ba%jba%kba%lba%mba%nba%oba%pba%qba%rba%sba%zbagba!Tba!Uba%{ba!Wba![ba!Qba#[batba!mba~On%ZO~Oo%ZO~P'vOo0cO~P'vOk0eOl0fOm0dOn0dOo0mOp0nOs0rOg%wX!T%wX!U%wX%{%wX!W%wX![%wX!Q%wX#[%wX!m%wX~P)pO%{%]Og%vXz%vX!T%vX!U%vX!W%vX{%vX~Og%_Oz%`O!T%dO!U%cO~Og%_O~Oz%gO!T%dO!U%cO!W&SX~O!W%kO~Oz%lO{%nO!T%dO!U%cO![%}X~O![%rO~O![%sO~OQ#XO%`#XO%a%uO~OV%wOo0cOv0qO!PrO~P'vOQ#^OR#[O%`#^O%a%zO~OV!qa_!qaa!qah!qak!qal!qam!qan!qao!qap!qas!qaz!qa{!qa!X!qa!f!qa!x!qa#g!qa%[!qa%_!qa%j!qa%k!qa%l!qa%m!qa%n!qa%o!qa%p!qa%q!qa%r!qa%s!qa%z!qag!qa!T!qa!U!qa%{!qa!W!qa![!qa!Q!qa#[!qat!qa!m!qa~P#yOz%|O{%ha!x%ha#g%ha%[%ha%_%ha%z%ha~P%SOV&OOopOvqO{%ha!x%ha#g%ha%[%ha%_%ha%z%ha~P'vOz%|O{%ha!x%ha#g%ha%[%ha%_%ha%z%ha~OPdOVaOopOvqO!PrO!Q{O!{tO!}uO#PvO#RwO#TxO#XyO#ZzO#^|O#_|O#a}O#c!OO#g$zX%[$zX%_$zX~P'vO#g#gO%[&TO%_&TO~O!f&UOh&sX%[&sXz&sX#[&sX#g&sX%_&sX#Z&sXg&sX~Oh!iO%[&WO~Okealeameaneaoeapeaseazea{ea!xea#gea%[ea%_ea%zeagea!Tea!Uea%{ea!Wea![ea!Qea#[eatea!mea~P%SOsqazqa{qa#gqa%[qa%_qa%zqa~Ok!pOl!qOm!oOn!oOo!rOp!sO!xqa~PE`O%z&YOz%yX{%yX~O%uWOz%yX{%yX~Oz&]O{wX~O{&_O~Oz%lO#g%}X%[%}X%_%}Xg%}X{%}X![%}X!m%}X%z%}X~OV0lOo0cOv0qO!PrO~P'vO%z#|O#gUa%[Ua%_Ua~Oz&hO#g&PX%[&PX%_&PXn&PX~P%SOz&kO!Q&jO#g#Wa%[#Wa%_#Wa~Oz&lO#[&nO#g&rX%[&rX%_&rXg&rX~O!f$YO!r$YO#Z&qO%uWO~O#Z&qO~Oz&sO#g&tX%[&tX%_&tX~Oz&uO#g&pX%[&pX%_&pX{&pX~O!X&wO%z&xO~Oz&|On&wX~P%SOn'PO~OPdOVaOopOvqO!PrO!Q{O!{tO!}uO#PvO#RwO#TxO#XyO#ZzO#^|O#_|O#a}O#c!OO%['UO~P'vOt'YO#p'WO#q'XOP#naV#naf#nah#nao#nas#nav#na!P#na!Q#na!T#na!U#na!X#na!]#na!h#na!r#na!s#na!t#na!{#na!}#na#P#na#R#na#T#na#X#na#Z#na#^#na#_#na#a#na#c#na#l#na#o#na#s#na#u#na#z#na#}#na$P#na%X#na%o#na%p#na%t#na%u#na&Z#na&[#na&]#na&^#na&_#na&`#na&a#na&b#na&c#na&d#na&e#na&f#na&g#na&h#na&i#na&j#na%Z#na%_#na~Oz'ZO#[']O{&xX~Oh'_O!X&wO~Oh!iO{$jO!X&wO~O{'eO~P%SO%['hO~OS'iO%['hO~OV!aO_!aOa!bOh!iO!X!kO!f!mO%l!^O%m!_O%n!_O%o!`O%p!`O%q!aO%r!aO%s!aOkWilWimWinWioWipWisWizWi{Wi!xWi#gWi%[Wi%_Wi%jWi%zWigWi!TWi!UWi%{Wi!WWi![Wi!QWi#[WitWi!mWi~O%k!]O~P!#lO%kWi~P!#lOV!aO_!aOa!bOh!iO!X!kO!f!mO%o!`O%p!`O%q!aO%r!aO%s!aOkWilWimWinWioWipWisWizWi{Wi!xWi#gWi%[Wi%_Wi%jWi%kWi%lWi%zWigWi!TWi!UWi%{Wi!WWi![Wi!QWi#[WitWi!mWi~O%m!_O%n!_O~P!&gO%mWi%nWi~P!&gOa!bOh!iO!X!kO!f!mOkWilWimWinWioWipWisWizWi{Wi!xWi#gWi%[Wi%_Wi%jWi%kWi%lWi%mWi%nWi%oWi%pWi%zWigWi!TWi!UWi%{Wi!WWi![Wi!QWi#[WitWi!mWi~OV!aO_!aO%q!aO%r!aO%s!aO~P!)eOVWi_Wi%qWi%rWi%sWi~P!)eO!T%dO!U%cOg&VXz&VX~O%z'kO%{'kO~P,eOz'mOg&UX~Og'oO~Oz'pO{'rO!W&XX~Oo0cOv0qOz'pO{'sO!W&XX~P'vO!W'uO~Om!oOn!oOo!rOp!sOkjisjizji{ji!xji#gji%[ji%_ji%zji~Ol!qO~P!.WOlji~P!.WOk0eOl0fOm0dOn0dOo0mOp0nO~Ot'wO~P!/aOV'|Og'}Oo0cOv0qO~P'vOg'}Oz(OO~Og(QO~O!U(SO~Og(TOz(OO!T%dO!U%cO~P%SOk0eOl0fOm0dOn0dOo0mOp0nOgqa!Tqa!Uqa%{qa!Wqa![qa!Qqa#[qatqa!mqa~PE`OV'|Oo0cOv0qO!W&Sa~P'vOz(WO!W&Sa~O!W(XO~Oz(WO!T%dO!U%cO!W&Sa~P%SOV(]Oo0cOv0qO![%}a#g%}a%[%}a%_%}ag%}a{%}a!m%}a%z%}a~P'vOz(^O![%}a#g%}a%[%}a%_%}ag%}a{%}a!m%}a%z%}a~O![(aO~Oz(^O!T%dO!U%cO![%}a~P%SOz(dO!T%dO!U%cO![&Ta~P%SOz(gO{&lX![&lX!m&lX%z&lX~O{(kO![(mO!m(nO%z(jO~OV&OOopOvqO{%hi!x%hi#g%hi%[%hi%_%hi%z%hi~P'vOz(pO{%hi!x%hi#g%hi%[%hi%_%hi%z%hi~O!f&UOh&sa%[&saz&sa#[&sa#g&sa%_&sa#Z&sag&sa~O%[(uO~OV#sOa#tO%uWO~Oz&]O{wa~OopOvqO~P'vOz(^O#g%}a%[%}a%_%}ag%}a{%}a![%}a!m%}a%z%}a~P%SOz(zO#g%hX%[%hX%_%hX%z%hX~O%z#|O#gUi%[Ui%_Ui~O#g&Pa%[&Pa%_&Pan&Pa~P'vOz(}O#g&Pa%[&Pa%_&Pan&Pa~O%uWO#g&ra%[&ra%_&rag&ra~Oz)SO#g&ra%[&ra%_&rag&ra~Og)VO~OV)WOh$WO%uWO~O#Z)XO~O%uWO#g&ta%[&ta%_&ta~Oz)ZO#g&ta%[&ta%_&ta~Oo0cOv0qO#g&pa%[&pa%_&pa{&pa~P'vOz)^O#g&pa%[&pa%_&pa{&pa~OV)`Oa)`O%uWO~O%z)eO~Ot)hO#j)gOP#hiV#hif#hih#hio#his#hiv#hi!P#hi!Q#hi!T#hi!U#hi!X#hi!]#hi!h#hi!r#hi!s#hi!t#hi!{#hi!}#hi#P#hi#R#hi#T#hi#X#hi#Z#hi#^#hi#_#hi#a#hi#c#hi#l#hi#o#hi#s#hi#u#hi#z#hi#}#hi$P#hi%X#hi%o#hi%p#hi%t#hi%u#hi&Z#hi&[#hi&]#hi&^#hi&_#hi&`#hi&a#hi&b#hi&c#hi&d#hi&e#hi&f#hi&g#hi&h#hi&i#hi&j#hi%Z#hi%_#hi~Ot)iOP#kiV#kif#kih#kio#kis#kiv#ki!P#ki!Q#ki!T#ki!U#ki!X#ki!]#ki!h#ki!r#ki!s#ki!t#ki!{#ki!}#ki#P#ki#R#ki#T#ki#X#ki#Z#ki#^#ki#_#ki#a#ki#c#ki#l#ki#o#ki#s#ki#u#ki#z#ki#}#ki$P#ki%X#ki%o#ki%p#ki%t#ki%u#ki&Z#ki&[#ki&]#ki&^#ki&_#ki&`#ki&a#ki&b#ki&c#ki&d#ki&e#ki&f#ki&g#ki&h#ki&i#ki&j#ki%Z#ki%_#ki~OV)kOn&wa~P'vOz)lOn&wa~Oz)lOn&wa~P%SOn)pO~O%Y)tO~Ot)wO#p'WO#q)vOP#niV#nif#nih#nio#nis#niv#ni!P#ni!Q#ni!T#ni!U#ni!X#ni!]#ni!h#ni!r#ni!s#ni!t#ni!{#ni!}#ni#P#ni#R#ni#T#ni#X#ni#Z#ni#^#ni#_#ni#a#ni#c#ni#l#ni#o#ni#s#ni#u#ni#z#ni#}#ni$P#ni%X#ni%o#ni%p#ni%t#ni%u#ni&Z#ni&[#ni&]#ni&^#ni&_#ni&`#ni&a#ni&b#ni&c#ni&d#ni&e#ni&f#ni&g#ni&h#ni&i#ni&j#ni%Z#ni%_#ni~OV)zOo0cOv0qO{$jO~P'vOo0cOv0qO{&xa~P'vOz*OO{&xa~OV*SOa*TOg*WO%q*UO%uWO~O{$jO&{*YO~Oh'_O~Oh!iO{$jO~O%[*_O~O%[*aO~OV$}Oa$}Oo0cOv0qOg&Ua~P'vOz*dOg&Ua~Oo0cOv0qO{*gO!W&Xa~P'vOz*hO!W&Xa~Oo0cOv0qOz*hO{*kO!W&Xa~P'vOo0cOv0qOz*hO!W&Xa~P'vOz*hO{*kO!W&Xa~Om0dOn0dOo0mOp0nOgjikjisjizji!Tji!Uji%{ji!Wji{ji![ji#gji%[ji%_ji!Qji#[jitji!mji%zji~Ol0fO~P!N_Olji~P!N_OV'|Og*pOo0cOv0qO~P'vOn*rO~Og*pOz*tO~Og*uO~OV'|Oo0cOv0qO!W&Si~P'vOz*vO!W&Si~O!W*wO~OV(]Oo0cOv0qO![%}i#g%}i%[%}i%_%}ig%}i{%}i!m%}i%z%}i~P'vOz*zO!T%dO!U%cO![&Ti~Oz*}O![%}i#g%}i%[%}i%_%}ig%}i{%}i!m%}i%z%}i~O![+OO~Oa+QOo0cOv0qO![&Ti~P'vOz*zO![&Ti~O![+SO~OV+UOo0cOv0qO{&la![&la!m&la%z&la~P'vOz+VO{&la![&la!m&la%z&la~O!]+YO&n+[O![!nX~O![+^O~O{(kO![+_O~O{(kO![+_O!m+`O~OV&OOopOvqO{%hq!x%hq#g%hq%[%hq%_%hq%z%hq~P'vOz$ri{$ri!x$ri#g$ri%[$ri%_$ri%z$ri~P%SOV&OOopOvqO~P'vOV&OOo0cOv0qO#g%ha%[%ha%_%ha%z%ha~P'vOz+aO#g%ha%[%ha%_%ha%z%ha~Oz$ia#g$ia%[$ia%_$ian$ia~P%SO#g&Pi%[&Pi%_&Pin&Pi~P'vOz+dO#g#Wq%[#Wq%_#Wq~O#[+eOz$va#g$va%[$va%_$vag$va~O%uWO#g&ri%[&ri%_&rig&ri~Oz+gO#g&ri%[&ri%_&rig&ri~OV+iOh$WO%uWO~O%uWO#g&ti%[&ti%_&ti~Oo0cOv0qO#g&pi%[&pi%_&pi{&pi~P'vO{#{Oz#eX!W#eX~Oz+mO!W&uX~O!W+oO~Ot+rO#j)gOP#hqV#hqf#hqh#hqo#hqs#hqv#hq!P#hq!Q#hq!T#hq!U#hq!X#hq!]#hq!h#hq!r#hq!s#hq!t#hq!{#hq!}#hq#P#hq#R#hq#T#hq#X#hq#Z#hq#^#hq#_#hq#a#hq#c#hq#l#hq#o#hq#s#hq#u#hq#z#hq#}#hq$P#hq%X#hq%o#hq%p#hq%t#hq%u#hq&Z#hq&[#hq&]#hq&^#hq&_#hq&`#hq&a#hq&b#hq&c#hq&d#hq&e#hq&f#hq&g#hq&h#hq&i#hq&j#hq%Z#hq%_#hq~On$|az$|a~P%SOV)kOn&wi~P'vOz+yOn&wi~Oz,TO{$jO#[,TO~O#q,VOP#nqV#nqf#nqh#nqo#nqs#nqv#nq!P#nq!Q#nq!T#nq!U#nq!X#nq!]#nq!h#nq!r#nq!s#nq!t#nq!{#nq!}#nq#P#nq#R#nq#T#nq#X#nq#Z#nq#^#nq#_#nq#a#nq#c#nq#l#nq#o#nq#s#nq#u#nq#z#nq#}#nq$P#nq%X#nq%o#nq%p#nq%t#nq%u#nq&Z#nq&[#nq&]#nq&^#nq&_#nq&`#nq&a#nq&b#nq&c#nq&d#nq&e#nq&f#nq&g#nq&h#nq&i#nq&j#nq%Z#nq%_#nq~O#[,WOz%Oa{%Oa~Oo0cOv0qO{&xi~P'vOz,YO{&xi~O{#{O%z,[Og&zXz&zX~O%uWOg&zXz&zX~Oz,`Og&yX~Og,bO~O%Y,eO~O!T%dO!U%cOg&Viz&Vi~OV$}Oa$}Oo0cOv0qOg&Ui~P'vO{,hOz$la!W$la~Oo0cOv0qO{,iOz$la!W$la~P'vOo0cOv0qO{*gO!W&Xi~P'vOz,lO!W&Xi~Oo0cOv0qOz,lO!W&Xi~P'vOz,lO{,oO!W&Xi~Og$hiz$hi!W$hi~P%SOV'|Oo0cOv0qO~P'vOn,qO~OV'|Og,rOo0cOv0qO~P'vOV'|Oo0cOv0qO!W&Sq~P'vOz$gi![$gi#g$gi%[$gi%_$gig$gi{$gi!m$gi%z$gi~P%SOV(]Oo0cOv0qO~P'vOa+QOo0cOv0qO![&Tq~P'vOz,sO![&Tq~O![,tO~OV(]Oo0cOv0qO![%}q#g%}q%[%}q%_%}qg%}q{%}q!m%}q%z%}q~P'vO{,uO~OV+UOo0cOv0qO{&li![&li!m&li%z&li~P'vOz,zO{&li![&li!m&li%z&li~O!]+YO&n+[O![!na~O{(kO![,}O~OV&OOo0cOv0qO#g%hi%[%hi%_%hi%z%hi~P'vOz-OO#g%hi%[%hi%_%hi%z%hi~O%uWO#g&rq%[&rq%_&rqg&rq~Oz-RO#g&rq%[&rq%_&rqg&rq~OV)`Oa)`O%uWO!W&ua~Oz-TO!W&ua~On$|iz$|i~P%SOV)kO~P'vOV)kOn&wq~P'vOt-XOP#myV#myf#myh#myo#mys#myv#my!P#my!Q#my!T#my!U#my!X#my!]#my!h#my!r#my!s#my!t#my!{#my!}#my#P#my#R#my#T#my#X#my#Z#my#^#my#_#my#a#my#c#my#l#my#o#my#s#my#u#my#z#my#}#my$P#my%X#my%o#my%p#my%t#my%u#my&Z#my&[#my&]#my&^#my&_#my&`#my&a#my&b#my&c#my&d#my&e#my&f#my&g#my&h#my&i#my&j#my%Z#my%_#my~O%Z-]O%_-]O~P`O#q-^OP#nyV#nyf#nyh#nyo#nys#nyv#ny!P#ny!Q#ny!T#ny!U#ny!X#ny!]#ny!h#ny!r#ny!s#ny!t#ny!{#ny!}#ny#P#ny#R#ny#T#ny#X#ny#Z#ny#^#ny#_#ny#a#ny#c#ny#l#ny#o#ny#s#ny#u#ny#z#ny#}#ny$P#ny%X#ny%o#ny%p#ny%t#ny%u#ny&Z#ny&[#ny&]#ny&^#ny&_#ny&`#ny&a#ny&b#ny&c#ny&d#ny&e#ny&f#ny&g#ny&h#ny&i#ny&j#ny%Z#ny%_#ny~Oz-aO{$jO#[-aO~Oo0cOv0qO{&xq~P'vOz-dO{&xq~O%z,[Og&zaz&za~OV*SOa*TO%q*UO%uWOg&ya~Oz-hOg&ya~O$S-lO~OV$}Oa$}Oo0cOv0qO~P'vOo0cOv0qO{-mOz$li!W$li~P'vOo0cOv0qOz$li!W$li~P'vO{-mOz$li!W$li~Oo0cOv0qO{*gO~P'vOo0cOv0qO{*gO!W&Xq~P'vOz-pO!W&Xq~Oo0cOv0qOz-pO!W&Xq~P'vOs-sO!T%dO!U%cOg&Oq!W&Oq![&Oqz&Oq~P!/aOa+QOo0cOv0qO![&Ty~P'vOz$ji![$ji~P%SOa+QOo0cOv0qO~P'vOV+UOo0cOv0qO~P'vOV+UOo0cOv0qO{&lq![&lq!m&lq%z&lq~P'vO{(kO![-xO!m-yO%z-wO~OV&OOo0cOv0qO#g%hq%[%hq%_%hq%z%hq~P'vO%uWO#g&ry%[&ry%_&ryg&ry~OV)`Oa)`O%uWO!W&ui~Ot-}OP#m!RV#m!Rf#m!Rh#m!Ro#m!Rs#m!Rv#m!R!P#m!R!Q#m!R!T#m!R!U#m!R!X#m!R!]#m!R!h#m!R!r#m!R!s#m!R!t#m!R!{#m!R!}#m!R#P#m!R#R#m!R#T#m!R#X#m!R#Z#m!R#^#m!R#_#m!R#a#m!R#c#m!R#l#m!R#o#m!R#s#m!R#u#m!R#z#m!R#}#m!R$P#m!R%X#m!R%o#m!R%p#m!R%t#m!R%u#m!R&Z#m!R&[#m!R&]#m!R&^#m!R&_#m!R&`#m!R&a#m!R&b#m!R&c#m!R&d#m!R&e#m!R&f#m!R&g#m!R&h#m!R&i#m!R&j#m!R%Z#m!R%_#m!R~Oo0cOv0qO{&xy~P'vOV*SOa*TO%q*UO%uWOg&yi~O$S-lO%Z.VO%_.VO~OV.aOh._O!X.^O!].`O!h.YO!s.[O!t.[O%p.XO%uWO&Z]O&[]O&]]O&^]O&_]O&`]O&a]O&b]O~Oo0cOv0qOz$lq!W$lq~P'vO{.fOz$lq!W$lq~Oo0cOv0qO{*gO!W&Xy~P'vOz.gO!W&Xy~Oo0cOv.kO~P'vOs-sO!T%dO!U%cOg&Oy!W&Oy![&Oyz&Oy~P!/aO{(kO![.nO~O{(kO![.nO!m.oO~OV*SOa*TO%q*UO%uWO~Oh.tO!f.rOz$TX#[$TX%j$TXg$TX~Os$TX{$TX!W$TX![$TX~P$,yO%o.vO%p.vOs$UXz$UX{$UX#[$UX%j$UX!W$UXg$UX![$UX~O!h.xO~Oz.|O#[/OO%j.yOs&|X{&|X!W&|Xg&|X~Oa/RO~P$)cOh.tOs&}Xz&}X{&}X#[&}X%j&}X!W&}Xg&}X![&}X~Os/VO{$jO~Oo0cOv0qOz$ly!W$ly~P'vOo0cOv0qO{*gO!W&X!R~P'vOz/ZO!W&X!R~Og&RXs&RX!T&RX!U&RX!W&RX![&RXz&RX~P!/aOs-sO!T%dO!U%cOg&Qa!W&Qa![&Qaz&Qa~O{(kO![/^O~O!f.rOh$[as$[az$[a{$[a#[$[a%j$[a!W$[ag$[a![$[a~O!h/eO~O%o.vO%p.vOs$Uaz$Ua{$Ua#[$Ua%j$Ua!W$Uag$Ua![$Ua~O%j.yOs$Yaz$Ya{$Ya#[$Ya!W$Yag$Ya![$Ya~Os&|a{&|a!W&|ag&|a~P$)VOz/jOs&|a{&|a!W&|ag&|a~O!W/mO~Og/mO~O{/oO~O![/pO~Oo0cOv0qO{*gO!W&X!Z~P'vO{/sO~O%z/tO~P$,yOz/uO#[/OO%j.yOg'PX~Oz/uOg'PX~Og/wO~O!h/xO~O#[/OOs%Saz%Sa{%Sa%j%Sa!W%Sag%Sa![%Sa~O#[/OO%j.yOs%Waz%Wa{%Wa!W%Wag%Wa~Os&|i{&|i!W&|ig&|i~P$)VOz/zO#[/OO%j.yO!['Oa~O{$da~P%SOg'Pa~P$)VOz0SOg'Pa~Oa0UO!['Oi~P$)cOz0WO!['Oi~Oz0WO#[/OO%j.yO!['Oi~O#[/OO%j.yOg$biz$bi~O%z0ZO~P$,yO#[/OO%j.yOg%Vaz%Va~Og'Pi~P$)VO{0^O~Oa0UO!['Oq~P$)cOz0`O!['Oq~O#[/OO%j.yOz%Ui![%Ui~Oa0UO~P$)cOa0UO!['Oy~P$)cO#[/OO%j.yOg$ciz$ci~O#[/OO%j.yOz%Uq![%Uq~Oz+aO#g%ha%[%ha%_%ha%z%ha~P%SOV&OOo0cOv0qO~P'vOn0hO~Oo0hO~P'vO{0iO~Ot0jO~P!/aO&]&Z&j&h&i&g&f&d&e&c&b&`&a&_&^&[%u~",goto:"!=l'QPPPPPP'RP'Z*s+]+v,b,}-kP.YP'Z.y.y'ZPPP'Z2cPPPPPP2c5VPP5VP7g7p=xPP={>m>pPP'Z'ZPP?PPP'Z'ZPP'Z'Z'Z'Z'Z?T?}'ZP@QP@WD_G{HPPHSH^Hb'ZPPPHeHn'RP'R'RP'RP'RP'RP'RP'R'R'RP'RPP'RPP'RP'RPHtIQIYPIaIgPIaPIaIaPPPIaPKuPLOLYL`KuPIaLiPIaPLpLvPLzM`M}NhLzLzNnN{LzLzLzLz! a! g! j! o! r! |!!S!!`!!r!!x!#S!#Y!#v!#|!$S!$^!$d!$j!$|!%W!%^!%d!%n!%t!%z!&Q!&W!&^!&h!&n!&x!'O!'X!'_!'n!'v!(Q!(XPPPPPPPPPPP!(_!(b!(h!(q!({!)WPPPPPPPPPPPP!-z!/`!3`!6pPP!6x!7X!7b!8Z!8Q!8d!8j!8m!8p!8s!8{!9lPPPPPPPPPPPPPPPPP!9o!9s!9yP!:_!:c!:o!:x!;U!;l!;o!;r!;x!<O!<U!<XP!<a!<j!=f!=i]eOn#g$j)t,P'}`OTYZ[adnoprtxy}!P!Q!R!U!X!c!d!e!f!g!h!i!k!o!p!q!s!t!z#O#S#T#[#d#g#x#y#{#}$Q$e$g$h$j$q$}%S%Z%^%`%c%g%l%n%w%|&O&Z&_&h&j&k&u&x&|'P'W'Z'l'm'p'r's'w'|(O(S(W(](^(d(g(p(r(z(})^)e)g)k)l)p)t)z*O*Y*d*g*h*k*q*r*t*v*y*z*}+Q+U+V+Y+a+c+d+k+x+y,P,X,Y,],g,h,i,k,l,o,q,s,u,w,y,z-O-d-f-m-p-s.f.g/V/Z/s0c0d0e0f0h0i0j0k0l0n0r}!cQ#c#p$R$d$p%e%j%p%q&`'O'g(q(|)j*o*x+w,v/q0g!P!dQ#c#p$R$d$p$u%e%j%p%q&`'O'g(q(|)j*o*x+w,v/q0g!R!eQ#c#p$R$d$p$u$v%e%j%p%q&`'O'g(q(|)j*o*x+w,v/q0g!T!fQ#c#p$R$d$p$u$v$w%e%j%p%q&`'O'g(q(|)j*o*x+w,v/q0g!V!gQ#c#p$R$d$p$u$v$w$x%e%j%p%q&`'O'g(q(|)j*o*x+w,v/q0g!X!hQ#c#p$R$d$p$u$v$w$x$y%e%j%p%q&`'O'g(q(|)j*o*x+w,v/q0g!]!hQ!n#c#p$R$d$p$u$v$w$x$y$z%e%j%p%q&`'O'g(q(|)j*o*x+w,v/q0g'}TOTYZ[adnoprtxy}!P!Q!R!U!X!c!d!e!f!g!h!i!k!o!p!q!s!t!z#O#S#T#[#d#g#x#y#{#}$Q$e$g$h$j$q$}%S%Z%^%`%c%g%l%n%w%|&O&Z&_&h&j&k&u&x&|'P'W'Z'l'm'p'r's'w'|(O(S(W(](^(d(g(p(r(z(})^)e)g)k)l)p)t)z*O*Y*d*g*h*k*q*r*t*v*y*z*}+Q+U+V+Y+a+c+d+k+x+y,P,X,Y,],g,h,i,k,l,o,q,s,u,w,y,z-O-d-f-m-p-s.f.g/V/Z/s0c0d0e0f0h0i0j0k0l0n0r&cVOYZ[dnprxy}!P!Q!U!i!k!o!p!q!s!t#[#d#g#y#{#}$Q$h$j$}%S%Z%^%`%g%l%n%w%|&Z&_&j&k&u&x'P'W'Z'l'm'p'r's'w(O(W(^(d(g(p(r(z)^)e)g)p)t)z*O*Y*d*g*h*k*q*r*t*v*y*z*}+U+V+Y+a+d+k,P,X,Y,],g,h,i,k,l,o,q,s,u,w,y,z-O-d-f-m-p-s.f.g/Z/s0c0d0e0f0h0i0j0k0n0r%mXOYZ[dnrxy}!P!Q!U!i!k#[#d#g#y#{#}$Q$h$j$}%S%^%`%g%l%n%w%|&Z&_&j&k&u&x'P'W'Z'l'm'p'r's'w(O(W(^(d(g(p(r(z)^)e)g)p)t)z*O*Y*d*g*h*k*q*t*v*y*z*}+U+V+Y+a+d+k,P,X,Y,],g,h,i,k,l,o,s,u,w,y,z-O-d-f-m-p.f.g/Z0i0j0kQ#vqQ/[.kR0o0q't`OTYZ[adnoprtxy}!P!Q!R!U!X!c!d!e!f!g!h!k!o!p!q!s!t!z#O#S#T#[#d#g#x#y#{#}$Q$e$g$h$j$q$}%S%Z%^%`%c%g%l%n%w%|&O&Z&_&h&j&k&u&x&|'P'W'Z'l'p'r's'w'|(O(S(W(](^(d(g(p(r(z(})^)e)g)k)l)p)t)z*O*Y*g*h*k*q*r*t*v*y*z*}+Q+U+V+Y+a+c+d+k+x+y,P,X,Y,],h,i,k,l,o,q,s,u,w,y,z-O-d-f-m-p-s.f.g/V/Z/s0c0d0e0f0h0i0j0k0l0n0rh#jhz{$W$Z&l&q)S)X+f+g-RW#rq&].k0qQ$]|Q$a!OQ$n!VQ$o!WW$|!i'm*d,gS&[#s#tQ'S$iQ(s&UQ)U&nU)Y&s)Z+jW)a&w+m-T-{Q*Q']W*R'_,`-h.TQ+l)`S,_*S*TQ-Q+eQ-_,TQ-c,WQ.R-al.W-l.^._.a.z.|/R/j/o/t/y0U0Z0^Q/S.`Q/a.tQ/l/OU0P/u0S0[X0V/z0W0_0`R&Z#r!_!wYZ!P!Q!k%S%`%g'p'r's(O(W)g*g*h*k*q*t*v,h,i,k,l,o-m-p.f.g/ZR%^!vQ!{YQ%x#[Q&d#}Q&g$QR,{+YT.j-s/s![!jQ!n#c#p$R$d$p$u$v$w$x$y$z%e%j%p%q&`'O'g(q(|)j*o*x+w,v/q0gQ&X#kQ'c$oR*^'dR'l$|Q%V!mR/_.r'|_OTYZ[adnoprtxy}!P!Q!R!U!X!c!d!e!f!g!h!i!k!o!p!q!s!t!z#O#S#T#[#d#g#x#y#{#}$Q$e$g$h$j$q$}%S%Z%^%`%c%g%l%n%w%|&O&Z&_&h&j&k&u&x&|'P'W'Z'l'm'p'r's'w'|(O(S(W(](^(d(g(p(r(z(})^)e)g)k)l)p)t)z*O*Y*d*g*h*k*q*r*t*v*y*z*}+Q+U+V+Y+a+c+d+k+x+y,P,X,Y,],g,h,i,k,l,o,q,s,u,w,y,z-O-d-f-m-p-s.f.g/V/Z/s0c0d0e0f0h0i0j0k0l0n0rS#a_#b!P.[-l.^._.`.a.t.z.|/R/j/o/t/u/y/z0S0U0W0Z0[0^0_0`'|_OTYZ[adnoprtxy}!P!Q!R!U!X!c!d!e!f!g!h!i!k!o!p!q!s!t!z#O#S#T#[#d#g#x#y#{#}$Q$e$g$h$j$q$}%S%Z%^%`%c%g%l%n%w%|&O&Z&_&h&j&k&u&x&|'P'W'Z'l'm'p'r's'w'|(O(S(W(](^(d(g(p(r(z(})^)e)g)k)l)p)t)z*O*Y*d*g*h*k*q*r*t*v*y*z*}+Q+U+V+Y+a+c+d+k+x+y,P,X,Y,],g,h,i,k,l,o,q,s,u,w,y,z-O-d-f-m-p-s.f.g/V/Z/s0c0d0e0f0h0i0j0k0l0n0rT#a_#bT#^^#_R(o%xa(l%x(n(o+`,{-y-z.oT+[(k+]R-z,{Q$PsQ+l)aR,^*RX#}s$O$P&fQ&y$aQ'a$nQ'd$oR)s'SQ)b&wV-S+m-T-{ZgOn$j)t,PXkOn)t,PQ$k!TQ&z$bQ&{$cQ'^$mQ'b$oQ)q'RQ)x'WQ){'XQ)|'YQ*Z'`S*]'c'dQ+s)gQ+u)hQ+v)iQ+z)oS+|)r*[Q,Q)vQ,R)wS,S)y)zQ,d*^Q-V+rQ-W+tQ-Y+{S-Z+},OQ-`,UQ-b,VQ-|-XQ.O-[Q.P-^Q.Q-_Q.p-}Q.q.RQ/W.dR/r/XWkOn)t,PR#mjQ'`$nS)r'S'aR,O)sQ,]*RR-f,^Q*['`Q+})rR-[,OZiOjn)t,PQ'f$pR*`'gT-j,e-ku.c-l.^._.a.t.z.|/R/j/o/t/u/y0S0U0Z0[0^t.c-l.^._.a.t.z.|/R/j/o/t/u/y0S0U0Z0[0^Q/S.`X0V/z0W0_0`!P.Z-l.^._.`.a.t.z.|/R/j/o/t/u/y/z0S0U0W0Z0[0^0_0`Q.w.YR/f.xg.z.].{/b/i/n/|0O0Q0]0a0bu.b-l.^._.a.t.z.|/R/j/o/t/u/y0S0U0Z0[0^X.u.W.b/a0PR/c.tV0R/u0S0[R/X.dQnOS#on,PR,P)tQ&^#uR(x&^S%m#R#wS(_%m(bT(b%p&`Q%a!yQ%h!}W(P%a%h(U(YQ(U%eR(Y%jQ&i$RR)O&iQ(e%qQ*{(`T+R(e*{Q'n%OR*e'nS'q%R%SY*i'q*j,m-q.hU*j'r's'tU,m*k*l*mS-q,n,oR.h-rQ#Y]R%t#YQ#_^R%y#_Q(h%vS+W(h+XR+X(iQ+](kR,|+]Q#b_R%{#bQ#ebQ%}#cW&Q#e%}({+bQ({&cR+b0gQ$OsS&e$O&fR&f$PQ&v$_R)_&vQ&V#jR(t&VQ&m$VS)T&m+hR+h)UQ$Z{R&p$ZQ&t$]R)[&tQ+n)bR-U+nQ#hfR&S#hQ)f&zR+q)fQ&}$dS)m&})nR)n'OQ'V$kR)u'VQ'[$lS*P'[,ZR,Z*QQ,a*VR-i,aWjOn)t,PR#ljQ-k,eR.U-kd.{.]/b/i/n/|0O0Q0]0a0bR/h.{U.s.W/a0PR/`.sQ/{/nS0X/{0YR0Y/|S/v/b/cR0T/vQ.}.]R/k.}R!ZPXmOn)t,PWlOn)t,PR'T$jYfOn$j)t,PR&R#g[sOn#g$j)t,PR&d#}&bQOYZ[dnprxy}!P!Q!U!i!k!o!p!q!s!t#[#d#g#y#{#}$Q$h$j$}%S%Z%^%`%g%l%n%w%|&Z&_&j&k&u&x'P'W'Z'l'm'p'r's'w(O(W(^(d(g(p(r(z)^)e)g)p)t)z*O*Y*d*g*h*k*q*r*t*v*y*z*}+U+V+Y+a+d+k,P,X,Y,],g,h,i,k,l,o,q,s,u,w,y,z-O-d-f-m-p-s.f.g/Z/s0c0d0e0f0h0i0j0k0n0rQ!nTQ#caQ#poU$Rt%c(SS$d!R$gQ$p!XQ$u!cQ$v!dQ$w!eQ$x!fQ$y!gQ$z!hQ%e!zQ%j#OQ%p#SQ%q#TQ&`#xQ'O$eQ'g$qQ(q&OU(|&h(}+cW)j&|)l+x+yQ*o'|Q*x(]Q+w)kQ,v+QQ/q/VR0g0lQ!yYQ!}ZQ$b!PQ$c!QQ%R!kQ't%S^'{%`%g(O(W*q*t*v^*f'p*h,k,l-p.g/ZQ*l'rQ*m'sQ+t)gQ,j*gQ,n*kQ-n,hQ-o,iQ-r,oQ.e-mR/Y.f[bOn#g$j)t,P!^!vYZ!P!Q!k%S%`%g'p'r's(O(W)g*g*h*k*q*t*v,h,i,k,l,o-m-p.f.g/ZQ#R[Q#fdS#wrxQ$UyW$_}$Q'P)pS$l!U$hW${!i'm*d,gS%v#[+Y`&P#d%|(p(r(z+a-O0kQ&a#yQ&b#{Q&c#}Q'j$}Q'z%^W([%l(^*y*}Q(`%nQ(i%wQ(v&ZS(y&_0iQ)P&jQ)Q&kU)]&u)^+kQ)d&xQ)y'WY)}'Z*O,X,Y-dQ*b'lS*n'w0jW+P(d*z,s,wW+T(g+V,y,zQ+p)eQ,U)zQ,c*YQ,x+UQ-P+dQ-e,]Q-v,uR.S-fhUOn#d#g$j%|&_'w(p(r)t,P%S!uYZ[drxy}!P!Q!U!i!k#[#y#{#}$Q$h$}%S%^%`%g%l%n%w&Z&j&k&u&x'P'W'Z'l'm'p'r's(O(W(^(d(g(z)^)e)g)p)z*O*Y*d*g*h*k*q*t*v*y*z*}+U+V+Y+a+d+k,X,Y,],g,h,i,k,l,o,s,u,w,y,z-O-d-f-m-p.f.g/Z0i0j0kQ#qpW%W!o!s0d0nQ%X!pQ%Y!qQ%[!tQ%f0cS'v%Z0hQ'x0eQ'y0fQ,p*rQ-u,qS.i-s/sR0p0rU#uq.k0qR(w&][cOn#g$j)t,PZ!xY#[#}$Q+YQ#W[Q#zrR$TxQ%b!yQ%i!}Q%o#RQ'j${Q(V%eQ(Z%jQ(c%pQ(f%qQ*|(`Q,f*bQ-t,pQ.m-uR/].lQ$StQ(R%cR*s(SQ.l-sR/}/sR#QZR#V[R%Q!iQ%O!iV*c'm*d,g!]!lQ!n#c#p$R$d$p$u$v$w$x$y$z%e%j%p%q&`'O'g(q(|)j*o*x+w,v/q0gR%T!kT#]^#_Q%x#[R,{+YQ(m%xS+_(n(oQ,}+`Q-x,{S.n-y-zR/^.oT+Z(k+]Q$`}Q&g$QQ)o'PR+{)pQ$XzQ)W&qR+i)XQ$XzQ&o$WQ)W&qR+i)XQ#khW$Vz$W&q)XQ$[{Q&r$ZZ)R&l)S+f+g-RR$^|R)c&wXlOn)t,PQ$f!RR'Q$gQ$m!UR'R$hR*X'_Q*V'_V-g,`-h.TQ.d-lQ/P.^R/Q._U.]-l.^._Q/U.aQ/b.tQ/g.zU/i.|/j/yQ/n/RQ/|/oQ0O/tU0Q/u0S0[Q0]0UQ0a0ZR0b0^R/T.`R/d.t",nodeNames:"\u26a0 print Escape { Comment Script AssignStatement * BinaryExpression BitOp BitOp BitOp BitOp ArithOp ArithOp @ ArithOp ** UnaryExpression ArithOp BitOp AwaitExpression await ) ( ParenthesizedExpression BinaryExpression or and CompareOp in not is UnaryExpression ConditionalExpression if else LambdaExpression lambda ParamList VariableName AssignOp , : NamedExpression AssignOp YieldExpression yield from TupleExpression ComprehensionExpression async for LambdaExpression ] [ ArrayExpression ArrayComprehensionExpression } { DictionaryExpression DictionaryComprehensionExpression SetExpression SetComprehensionExpression CallExpression ArgList AssignOp MemberExpression . PropertyName Number String FormatString FormatReplacement FormatSelfDoc FormatConversion FormatSpec FormatReplacement FormatSelfDoc ContinuedString Ellipsis None Boolean TypeDef AssignOp UpdateStatement UpdateOp ExpressionStatement DeleteStatement del PassStatement pass BreakStatement break ContinueStatement continue ReturnStatement return YieldStatement PrintStatement RaiseStatement raise ImportStatement import as ScopeStatement global nonlocal AssertStatement assert TypeDefinition type TypeParamList TypeParam StatementGroup ; IfStatement Body elif WhileStatement while ForStatement TryStatement try except finally WithStatement with FunctionDefinition def ParamList AssignOp TypeDef ClassDefinition class DecoratedStatement Decorator At MatchStatement match MatchBody MatchClause case CapturePattern LiteralPattern ArithOp ArithOp AsPattern OrPattern LogicOp AttributePattern SequencePattern MappingPattern StarPattern ClassPattern PatternArgList KeywordPattern KeywordPattern Guard",maxTerm:277,context:GD,nodeProps:[["isolate",-5,4,71,72,73,77,""],["group",-15,6,85,87,88,90,92,94,96,98,99,100,102,105,108,110,"Statement Statement",-22,8,18,21,25,40,49,50,56,57,60,61,62,63,64,67,70,71,72,79,80,81,82,"Expression",-10,114,116,119,121,122,126,128,133,135,138,"Statement",-9,143,144,147,148,150,151,152,153,154,"Pattern"],["openedBy",23,"(",54,"[",58,"{"],["closedBy",24,")",55,"]",59,"}"]],propSources:[JD],skippedNodes:[0,4],repeatNodeCount:34,tokenData:"!2|~R!`OX%TXY%oY[%T[]%o]p%Tpq%oqr'ars)Yst*xtu%Tuv,dvw-hwx.Uxy/tyz0[z{0r{|2S|}2p}!O3W!O!P4_!P!Q:Z!Q!R;k!R![>_![!]Do!]!^Es!^!_FZ!_!`Gk!`!aHX!a!b%T!b!cIf!c!dJU!d!eK^!e!hJU!h!i!#f!i!tJU!t!u!,|!u!wJU!w!x!.t!x!}JU!}#O!0S#O#P&o#P#Q!0j#Q#R!1Q#R#SJU#S#T%T#T#UJU#U#VK^#V#YJU#Y#Z!#f#Z#fJU#f#g!,|#g#iJU#i#j!.t#j#oJU#o#p!1n#p#q!1s#q#r!2a#r#s!2f#s$g%T$g;'SJU;'S;=`KW<%lOJU`%YT&n`O#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%T`%lP;=`<%l%To%v]&n`%c_OX%TXY%oY[%T[]%o]p%Tpq%oq#O%T#O#P&o#P#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%To&tX&n`OY%TYZ%oZ]%T]^%o^#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tc'f[&n`O!_%T!_!`([!`#T%T#T#U(r#U#f%T#f#g(r#g#h(r#h#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tc(cTmR&n`O#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tc(yT!mR&n`O#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk)aV&n`&[ZOr%Trs)vs#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk){V&n`Or%Trs*bs#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk*iT&n`&^ZO#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%To+PZS_&n`OY*xYZ%TZ]*x]^%T^#o*x#o#p+r#p#q*x#q#r+r#r;'S*x;'S;=`,^<%lO*x_+wTS_OY+rZ]+r^;'S+r;'S;=`,W<%lO+r_,ZP;=`<%l+ro,aP;=`<%l*xj,kV%rQ&n`O!_%T!_!`-Q!`#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tj-XT!xY&n`O#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tj-oV%lQ&n`O!_%T!_!`-Q!`#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk.]V&n`&ZZOw%Twx.rx#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk.wV&n`Ow%Twx/^x#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk/eT&n`&]ZO#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk/{ThZ&n`O#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tc0cTgR&n`O#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk0yXVZ&n`Oz%Tz{1f{!_%T!_!`-Q!`#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk1mVaR&n`O!_%T!_!`-Q!`#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk2ZV%oZ&n`O!_%T!_!`-Q!`#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tc2wTzR&n`O#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%To3_W%pZ&n`O!_%T!_!`-Q!`!a3w!a#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Td4OT&{S&n`O#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk4fX!fQ&n`O!O%T!O!P5R!P!Q%T!Q![6T![#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk5WV&n`O!O%T!O!P5m!P#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk5tT!rZ&n`O#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Ti6[a!hX&n`O!Q%T!Q![6T![!g%T!g!h7a!h!l%T!l!m9s!m#R%T#R#S6T#S#X%T#X#Y7a#Y#^%T#^#_9s#_#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Ti7fZ&n`O{%T{|8X|}%T}!O8X!O!Q%T!Q![8s![#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Ti8^V&n`O!Q%T!Q![8s![#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Ti8z]!hX&n`O!Q%T!Q![8s![!l%T!l!m9s!m#R%T#R#S8s#S#^%T#^#_9s#_#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Ti9zT!hX&n`O#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk:bX%qR&n`O!P%T!P!Q:}!Q!_%T!_!`-Q!`#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tj;UV%sQ&n`O!_%T!_!`-Q!`#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Ti;ro!hX&n`O!O%T!O!P=s!P!Q%T!Q![>_![!d%T!d!e?q!e!g%T!g!h7a!h!l%T!l!m9s!m!q%T!q!rA]!r!z%T!z!{Bq!{#R%T#R#S>_#S#U%T#U#V?q#V#X%T#X#Y7a#Y#^%T#^#_9s#_#c%T#c#dA]#d#l%T#l#mBq#m#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Ti=xV&n`O!Q%T!Q![6T![#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Ti>fc!hX&n`O!O%T!O!P=s!P!Q%T!Q![>_![!g%T!g!h7a!h!l%T!l!m9s!m#R%T#R#S>_#S#X%T#X#Y7a#Y#^%T#^#_9s#_#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Ti?vY&n`O!Q%T!Q!R@f!R!S@f!S#R%T#R#S@f#S#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Ti@mY!hX&n`O!Q%T!Q!R@f!R!S@f!S#R%T#R#S@f#S#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%TiAbX&n`O!Q%T!Q!YA}!Y#R%T#R#SA}#S#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%TiBUX!hX&n`O!Q%T!Q!YA}!Y#R%T#R#SA}#S#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%TiBv]&n`O!Q%T!Q![Co![!c%T!c!iCo!i#R%T#R#SCo#S#T%T#T#ZCo#Z#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%TiCv]!hX&n`O!Q%T!Q![Co![!c%T!c!iCo!i#R%T#R#SCo#S#T%T#T#ZCo#Z#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%ToDvV{_&n`O!_%T!_!`E]!`#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%TcEdT%{R&n`O#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%TkEzT#gZ&n`O#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%TkFbXmR&n`O!^%T!^!_F}!_!`([!`!a([!a#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%TjGUV%mQ&n`O!_%T!_!`-Q!`#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%TkGrV%zZ&n`O!_%T!_!`([!`#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%TkH`WmR&n`O!_%T!_!`([!`!aHx!a#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%TjIPV%nQ&n`O!_%T!_!`-Q!`#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%TkIoV_Q#}P&n`O!_%T!_!`-Q!`#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%ToJ_]&n`&YS%uZO!Q%T!Q![JU![!c%T!c!}JU!}#R%T#R#SJU#S#T%T#T#oJU#p#q%T#r$g%T$g;'SJU;'S;=`KW<%lOJUoKZP;=`<%lJUoKge&n`&YS%uZOr%Trs)Ysw%Twx.Ux!Q%T!Q![JU![!c%T!c!tJU!t!uLx!u!}JU!}#R%T#R#SJU#S#T%T#T#fJU#f#gLx#g#oJU#p#q%T#r$g%T$g;'SJU;'S;=`KW<%lOJUoMRa&n`&YS%uZOr%TrsNWsw%Twx! vx!Q%T!Q![JU![!c%T!c!}JU!}#R%T#R#SJU#S#T%T#T#oJU#p#q%T#r$g%T$g;'SJU;'S;=`KW<%lOJUkN_V&n`&`ZOr%TrsNts#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%TkNyV&n`Or%Trs! `s#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk! gT&n`&bZO#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk! }V&n`&_ZOw%Twx!!dx#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk!!iV&n`Ow%Twx!#Ox#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk!#VT&n`&aZO#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%To!#oe&n`&YS%uZOr%Trs!%Qsw%Twx!&px!Q%T!Q![JU![!c%T!c!tJU!t!u!(`!u!}JU!}#R%T#R#SJU#S#T%T#T#fJU#f#g!(`#g#oJU#p#q%T#r$g%T$g;'SJU;'S;=`KW<%lOJUk!%XV&n`&dZOr%Trs!%ns#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk!%sV&n`Or%Trs!&Ys#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk!&aT&n`&fZO#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk!&wV&n`&cZOw%Twx!'^x#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk!'cV&n`Ow%Twx!'xx#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk!(PT&n`&eZO#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%To!(ia&n`&YS%uZOr%Trs!)nsw%Twx!+^x!Q%T!Q![JU![!c%T!c!}JU!}#R%T#R#SJU#S#T%T#T#oJU#p#q%T#r$g%T$g;'SJU;'S;=`KW<%lOJUk!)uV&n`&hZOr%Trs!*[s#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk!*aV&n`Or%Trs!*vs#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk!*}T&n`&jZO#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk!+eV&n`&gZOw%Twx!+zx#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk!,PV&n`Ow%Twx!,fx#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk!,mT&n`&iZO#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%To!-Vi&n`&YS%uZOr%TrsNWsw%Twx! vx!Q%T!Q![JU![!c%T!c!dJU!d!eLx!e!hJU!h!i!(`!i!}JU!}#R%T#R#SJU#S#T%T#T#UJU#U#VLx#V#YJU#Y#Z!(`#Z#oJU#p#q%T#r$g%T$g;'SJU;'S;=`KW<%lOJUo!.}a&n`&YS%uZOr%Trs)Ysw%Twx.Ux!Q%T!Q![JU![!c%T!c!}JU!}#R%T#R#SJU#S#T%T#T#oJU#p#q%T#r$g%T$g;'SJU;'S;=`KW<%lOJUk!0ZT!XZ&n`O#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tc!0qT!WR&n`O#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tj!1XV%kQ&n`O!_%T!_!`-Q!`#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%T~!1sO!]~k!1zV%jR&n`O!_%T!_!`-Q!`#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%T~!2fO![~i!2mT%tX&n`O#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%T",tokenizers:[ZD,qD,UD,HD,0,1,2,3,4],topRules:{Script:[0,5]},specialized:[{term:221,get:e=>eM[e]||-1}],tokenPrec:7652}),nM=1024;let iM=0;class rM{constructor(e,t){this.from=e,this.to=t}}class sM{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.id=iM++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return"function"!=typeof e&&(e=lM.match(e)),t=>{let n=e(t);return void 0===n?null:[this,n]}}}sM.closedBy=new sM({deserialize:e=>e.split(" ")}),sM.openedBy=new sM({deserialize:e=>e.split(" ")}),sM.group=new sM({deserialize:e=>e.split(" ")}),sM.isolate=new sM({deserialize:e=>{if(e&&"rtl"!=e&&"ltr"!=e&&"auto"!=e)throw new RangeError("Invalid value for isolate: "+e);return e||"auto"}}),sM.contextHash=new sM({perNode:!0}),sM.lookAhead=new sM({perNode:!0}),sM.mounted=new sM({perNode:!0});class oM{constructor(e,t,n){this.tree=e,this.overlay=t,this.parser=n}static get(e){return e&&e.props&&e.props[sM.mounted.id]}}const aM=Object.create(null);class lM{constructor(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;this.name=e,this.props=t,this.id=n,this.flags=i}static define(e){let t=e.props&&e.props.length?Object.create(null):aM,n=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(null==e.name?8:0),i=new lM(e.name||"",t,e.id,n);if(e.props)for(let r of e.props)if(Array.isArray(r)||(r=r(i)),r){if(r[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");t[r[0].id]=r[1]}return i}prop(e){return this.props[e.id]}get isTop(){return(1&this.flags)>0}get isSkipped(){return(2&this.flags)>0}get isError(){return(4&this.flags)>0}get isAnonymous(){return(8&this.flags)>0}is(e){if("string"==typeof e){if(this.name==e)return!0;let t=this.prop(sM.group);return!!t&&t.indexOf(e)>-1}return this.id==e}static match(e){let t=Object.create(null);for(let n in e)for(let i of n.split(" "))t[i]=e[n];return e=>{for(let n=e.prop(sM.group),i=-1;i<(n?n.length:0);i++){let r=t[i<0?e.name:n[i]];if(r)return r}}}}lM.none=new lM("",Object.create(null),0,8);const hM=new WeakMap,cM=new WeakMap;var uM;!function(e){e[e.ExcludeBuffers=1]="ExcludeBuffers",e[e.IncludeAnonymous=2]="IncludeAnonymous",e[e.IgnoreMounts=4]="IgnoreMounts",e[e.IgnoreOverlays=8]="IgnoreOverlays"}(uM||(uM={}));class dM{constructor(e,t,n,i,r){if(this.type=e,this.children=t,this.positions=n,this.length=i,this.props=null,r&&r.length){this.props=Object.create(null);for(let[e,t]of r)this.props["number"==typeof e?e:e.id]=t}}toString(){let e=oM.get(this);if(e&&!e.overlay)return e.tree.toString();let t="";for(let n of this.children){let e=n.toString();e&&(t&&(t+=","),t+=e)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(t.length?"("+t+")":""):t}cursor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return new TM(this.topNode,e)}cursorAt(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=hM.get(this)||this.topNode,i=new TM(n);return i.moveTo(e,t),hM.set(this,i._tree),i}get topNode(){return new vM(this,0,0,null)}resolve(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=mM(hM.get(this)||this.topNode,e,t,!1);return hM.set(this,n),n}resolveInner(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=mM(cM.get(this)||this.topNode,e,t,!0);return cM.set(this,n),n}resolveStack(e){return function(e,t,n){let i=e.resolveInner(t,n),r=null;for(let s=i instanceof vM?i:i.context.parent;s;s=s.parent)if(s.index<0){let e=s.parent;(r||(r=[i])).push(e.resolve(t,n)),s=e}else{let e=oM.get(s.tree);if(e&&e.overlay&&e.overlay[0].from<=t&&e.overlay[e.overlay.length-1].to>=t){let o=new vM(e.tree,e.overlay[0].from+s.from,-1,s);(r||(r=[i])).push(mM(o,t,n,!1))}}return r?SM(r):i}(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0)}iterate(e){let{enter:t,leave:n,from:i=0,to:r=this.length}=e,s=e.mode||0,o=(s&uM.IncludeAnonymous)>0;for(let a=this.cursor(s|uM.IncludeAnonymous);;){let e=!1;if(a.from<=r&&a.to>=i&&(!o&&a.type.isAnonymous||!1!==t(a))){if(a.firstChild())continue;e=!0}for(;e&&n&&(o||!a.type.isAnonymous)&&n(a),!a.nextSibling();){if(!a.parent())return;e=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let t in this.props)e.push([+t,this.props[t]]);return e}balance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.children.length<=8?this:EM(lM.none,this.children,this.positions,0,this.children.length,0,this.length,((e,t,n)=>new dM(this.type,e,t,n,this.propValues)),e.makeTree||((e,t,n)=>new dM(lM.none,e,t,n)))}static build(e){return function(e){var t;let{buffer:n,nodeSet:i,maxBufferLength:r=nM,reused:s=[],minRepeatType:o=i.types.length}=e,a=Array.isArray(n)?new fM(n,n.length):n,l=i.types,h=0,c=0;function u(e,t,n,v,y,b){let{id:w,start:k,end:S,size:x}=a,T=c;for(;x<0;){if(a.next(),-1==x){let t=s[w];return n.push(t),void v.push(k-e)}if(-3==x)return void(h=w);if(-4==x)return void(c=w);throw new RangeError("Unrecognized record size: ".concat(x))}let _,P,C=l[w],E=k-e;if(S-k<=r&&(P=m(a.pos-t,y))){let t=new Uint16Array(P.size-P.skip),n=a.pos-P.size,r=t.length;for(;a.pos>n;)r=O(P.start,t,r);_=new pM(t,S-P.start,i),E=P.start-e}else{let e=a.pos-x;a.next();let t=[],n=[],i=w>=o?w:-1,s=0,l=S;for(;a.pos>e;)i>=0&&a.id==i&&a.size>=0?(a.end<=l-r&&(p(t,n,k,s,a.end,l,i,T),s=t.length,l=a.end),a.next()):b>2500?d(k,e,t,n):u(k,e,t,n,i,b+1);if(i>=0&&s>0&&s<t.length&&p(t,n,k,s,k,l,i,T),t.reverse(),n.reverse(),i>-1&&s>0){let e=f(C);_=EM(C,t,n,0,t.length,0,S-k,e,e)}else _=g(C,t,n,S-k,T-S)}n.push(_),v.push(E)}function d(e,t,n,s){let o=[],l=0,h=-1;for(;a.pos>t;){let{id:e,start:t,end:n,size:i}=a;if(i>4)a.next();else{if(h>-1&&t<h)break;h<0&&(h=n-r),o.push(e,t,n),l++,a.next()}}if(l){let t=new Uint16Array(4*l),r=o[o.length-2];for(let e=o.length-3,n=0;e>=0;e-=3)t[n++]=o[e],t[n++]=o[e+1]-r,t[n++]=o[e+2]-r,t[n++]=n;n.push(new pM(t,o[2]-r,i)),s.push(r-e)}}function f(e){return(t,n,i)=>{let r,s,o=0,a=t.length-1;if(a>=0&&(r=t[a])instanceof dM){if(!a&&r.type==e&&r.length==i)return r;(s=r.prop(sM.lookAhead))&&(o=n[a]+r.length+s)}return g(e,t,n,i,o)}}function p(e,t,n,r,s,o,a,l){let h=[],c=[];for(;e.length>r;)h.push(e.pop()),c.push(t.pop()+n-s);e.push(g(i.types[a],h,c,o-s,l-o)),t.push(s-n)}function g(e,t,n,i){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,s=arguments.length>5?arguments[5]:void 0;if(h){let e=[sM.contextHash,h];s=s?[e].concat(s):[e]}if(r>25){let e=[sM.lookAhead,r];s=s?[e].concat(s):[e]}return new dM(e,t,n,i,s)}function m(e,t){let n=a.fork(),i=0,s=0,l=0,h=n.end-r,c={size:0,start:0,skip:0};e:for(let r=n.pos-e;n.pos>r;){let e=n.size;if(n.id==t&&e>=0){c.size=i,c.start=s,c.skip=l,l+=4,i+=4,n.next();continue}let a=n.pos-e;if(e<0||a<r||n.start<h)break;let u=n.id>=o?4:0,d=n.start;for(n.next();n.pos>a;){if(n.size<0){if(-3!=n.size)break e;u+=4}else n.id>=o&&(u+=4);n.next()}s=d,i+=e,l+=u}return(t<0||i==e)&&(c.size=i,c.start=s,c.skip=l),c.size>4?c:void 0}function O(e,t,n){let{id:i,start:r,end:s,size:l}=a;if(a.next(),l>=0&&i<o){let o=n;if(l>4){let i=a.pos-(l-4);for(;a.pos>i;)n=O(e,t,n)}t[--n]=o,t[--n]=s-e,t[--n]=r-e,t[--n]=i}else-3==l?h=i:-4==l&&(c=i);return n}let v=[],y=[];for(;a.pos>0;)u(e.start||0,e.bufferStart||0,v,y,-1,0);let b=null!==(t=e.length)&&void 0!==t?t:v.length?y[0]+v[0].length:0;return new dM(l[e.topID],v.reverse(),y.reverse(),b)}(e)}}dM.empty=new dM(lM.none,[],[],0);class fM{constructor(e,t){this.buffer=e,this.index=t}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new fM(this.buffer,this.index)}}class pM{constructor(e,t,n){this.buffer=e,this.length=t,this.set=n}get type(){return lM.none}toString(){let e=[];for(let t=0;t<this.buffer.length;)e.push(this.childString(t)),t=this.buffer[t+3];return e.join(",")}childString(e){let t=this.buffer[e],n=this.buffer[e+3],i=this.set.types[t],r=i.name;if(/\W/.test(r)&&!i.isError&&(r=JSON.stringify(r)),n==(e+=4))return r;let s=[];for(;e<n;)s.push(this.childString(e)),e=this.buffer[e+3];return r+"("+s.join(",")+")"}findChild(e,t,n,i,r){let{buffer:s}=this,o=-1;for(let a=e;a!=t&&!(gM(r,i,s[a+1],s[a+2])&&(o=a,n>0));a=s[a+3]);return o}slice(e,t,n){let i=this.buffer,r=new Uint16Array(t-e),s=0;for(let o=e,a=0;o<t;){r[a++]=i[o++],r[a++]=i[o++]-n;let t=r[a++]=i[o++]-n;r[a++]=i[o++]-e,s=Math.max(s,t)}return new pM(r,s,this.set)}}function gM(e,t,n,i){switch(e){case-2:return n<t;case-1:return i>=t&&n<t;case 0:return n<t&&i>t;case 1:return n<=t&&i>t;case 2:return i>t;case 4:return!0}}function mM(e,t,n,i){for(var r;e.from==e.to||(n<1?e.from>=t:e.from>t)||(n>-1?e.to<=t:e.to<t);){let t=!i&&e instanceof vM&&e.index<0?null:e.parent;if(!t)return e;e=t}let s=i?0:uM.IgnoreOverlays;if(i)for(let o=e,a=o.parent;a;o=a,a=o.parent)o instanceof vM&&o.index<0&&(null===(r=a.enter(t,n,s))||void 0===r?void 0:r.from)!=o.from&&(e=a);for(;;){let i=e.enter(t,n,s);if(!i)return e;e=i}}class OM{cursor(){return new TM(this,arguments.length>0&&void 0!==arguments[0]?arguments[0]:0)}getChild(e){let t=yM(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:null);return t.length?t[0]:null}getChildren(e){return yM(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}resolve(e){return mM(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,!1)}resolveInner(e){return mM(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,!0)}matchContext(e){return bM(this,e)}enterUnfinishedNodesBefore(e){let t=this.childBefore(e),n=this;for(;t;){let e=t.lastChild;if(!e||e.to!=t.to)break;e.type.isError&&e.from==e.to?(n=t,t=e.prevSibling):t=e}return n}get node(){return this}get next(){return this.parent}}class vM extends OM{constructor(e,t,n,i){super(),this._tree=e,this.from=t,this.index=n,this._parent=i}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,t,n,i){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;for(let s=this;;){for(let{children:o,positions:a}=s._tree,l=t>0?o.length:-1;e!=l;e+=t){let l=o[e],h=a[e]+s.from;if(gM(i,n,h,h+l.length))if(l instanceof pM){if(r&uM.ExcludeBuffers)continue;let o=l.findChild(0,l.buffer.length,t,n-h,i);if(o>-1)return new kM(new wM(s,l,e,h),null,o)}else if(r&uM.IncludeAnonymous||!l.type.isAnonymous||_M(l)){let o;if(!(r&uM.IgnoreMounts)&&(o=oM.get(l))&&!o.overlay)return new vM(o.tree,h,e,s);let a=new vM(l,h,e,s);return r&uM.IncludeAnonymous||!a.type.isAnonymous?a:a.nextChild(t<0?l.children.length-1:0,t,n,i)}}if(r&uM.IncludeAnonymous||!s.type.isAnonymous)return null;if(e=s.index>=0?s.index+t:t<0?-1:s._parent._tree.children.length,s=s._parent,!s)return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,t){let n,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(!(i&uM.IgnoreOverlays)&&(n=oM.get(this._tree))&&n.overlay){let i=e-this.from;for(let{from:e,to:r}of n.overlay)if((t>0?e<=i:e<i)&&(t<0?r>=i:r>i))return new vM(n.tree,n.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,t,i)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}}function yM(e,t,n,i){let r=e.cursor(),s=[];if(!r.firstChild())return s;if(null!=n)for(let o=!1;!o;)if(o=r.type.is(n),!r.nextSibling())return s;for(;;){if(null!=i&&r.type.is(i))return s;if(r.type.is(t)&&s.push(r.node),!r.nextSibling())return null==i?s:[]}}function bM(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.length-1;for(let i=e.parent;n>=0;i=i.parent){if(!i)return!1;if(!i.type.isAnonymous){if(t[n]&&t[n]!=i.name)return!1;n--}}return!0}class wM{constructor(e,t,n,i){this.parent=e,this.buffer=t,this.index=n,this.start=i}}class kM extends OM{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,t,n){super(),this.context=e,this._parent=t,this.index=n,this.type=e.buffer.set.types[e.buffer.buffer[n]]}child(e,t,n){let{buffer:i}=this.context,r=i.findChild(this.index+4,i.buffer[this.index+3],e,t-this.context.start,n);return r<0?null:new kM(this.context,this,r)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,t){if((arguments.length>2&&void 0!==arguments[2]?arguments[2]:0)&uM.ExcludeBuffers)return null;let{buffer:n}=this.context,i=n.findChild(this.index+4,n.buffer[this.index+3],t>0?1:-1,e-this.context.start,t);return i<0?null:new kM(this.context,this,i)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,t=e.buffer[this.index+3];return t<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new kM(this.context,this._parent,t):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,t=this._parent?this._parent.index+4:0;return this.index==t?this.externalSibling(-1):new kM(this.context,this._parent,e.findChild(t,this.index,-1,0,4))}get tree(){return null}toTree(){let e=[],t=[],{buffer:n}=this.context,i=this.index+4,r=n.buffer[this.index+3];if(r>i){let s=n.buffer[this.index+1];e.push(n.slice(i,r,s)),t.push(0)}return new dM(this.type,e,t,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}}function SM(e){if(!e.length)return null;let t=0,n=e[0];for(let s=1;s<e.length;s++){let i=e[s];(i.from>n.from||i.to<n.to)&&(n=i,t=s)}let i=n instanceof vM&&n.index<0?null:n.parent,r=e.slice();return i?r[t]=i:r.splice(t,1),new xM(r,n)}class xM{constructor(e,t){this.heads=e,this.node=t}get next(){return SM(this.heads)}}class TM{get name(){return this.type.name}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(this.mode=t,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof vM)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let t=e._parent;t;t=t._parent)this.stack.unshift(t.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return!!e&&(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0)}yieldBuf(e,t){this.index=e;let{start:n,buffer:i}=this.buffer;return this.type=t||i.set.types[i.buffer[e]],this.from=n+i.buffer[e+1],this.to=n+i.buffer[e+2],!0}yield(e){return!!e&&(e instanceof vM?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)))}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,t,n){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,t,n,this.mode));let{buffer:i}=this.buffer,r=i.findChild(this.index+4,i.buffer[this.index+3],e,t-this.buffer.start,n);return!(r<0)&&(this.stack.push(this.index),this.yieldBuf(r))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.mode;return this.buffer?!(n&uM.ExcludeBuffers)&&this.enterChild(1,e,t):this.yield(this._tree.enter(e,t,n))}parent(){if(!this.buffer)return this.yieldNode(this.mode&uM.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&uM.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return!!this._tree._parent&&this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode));let{buffer:t}=this.buffer,n=this.stack.length-1;if(e<0){let e=n<0?0:this.stack[n]+4;if(this.index!=e)return this.yieldBuf(t.findChild(e,this.index,-1,0,4))}else{let e=t.buffer[this.index+3];if(e<(n<0?t.buffer.length:t.buffer[this.stack[n]+3]))return this.yieldBuf(e)}return n<0&&this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode))}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let t,n,{buffer:i}=this;if(i){if(e>0){if(this.index<i.buffer.buffer.length)return!1}else for(let e=0;e<this.index;e++)if(i.buffer.buffer[e+3]<this.index)return!1;({index:t,parent:n}=i)}else({index:t,_parent:n}=this._tree);for(;n;({index:t,_parent:n}=n))if(t>-1)for(let i=t+e,r=e<0?-1:n._tree.children.length;i!=r;i+=e){let e=n._tree.children[i];if(this.mode&uM.IncludeAnonymous||e instanceof pM||!e.type.isAnonymous||_M(e))return!1}return!0}move(e,t){if(t&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.move(1,e)}prev(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.move(-1,e)}moveTo(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;for(;(this.from==this.to||(t<1?this.from>=e:this.from>e)||(t>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,t););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,t=null,n=0;if(e&&e.context==this.buffer)e:for(let i=this.index,r=this.stack.length;r>=0;){for(let s=e;s;s=s._parent)if(s.index==i){if(i==this.index)return s;t=s,n=r+1;break e}i=this.stack[--r]}for(let i=n;i<this.stack.length;i++)t=new kM(this.buffer,t,this.stack[i]);return this.bufferNode=new kM(this.buffer,t,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,t){for(let n=0;;){let i=!1;if(this.type.isAnonymous||!1!==e(this)){if(this.firstChild()){n++;continue}this.type.isAnonymous||(i=!0)}for(;i&&t&&t(this),i=this.type.isAnonymous,!this.nextSibling();){if(!n)return;this.parent(),n--,i=!0}}}matchContext(e){if(!this.buffer)return bM(this.node,e);let{buffer:t}=this.buffer,{types:n}=t.set;for(let i=e.length-1,r=this.stack.length-1;i>=0;r--){if(r<0)return bM(this.node,e,i);let s=n[t.buffer[this.stack[r]]];if(!s.isAnonymous){if(e[i]&&e[i]!=s.name)return!1;i--}}return!0}}function _M(e){return e.children.some((e=>e instanceof pM||!e.type.isAnonymous||_M(e)))}const PM=new WeakMap;function CM(e,t){if(!e.isAnonymous||t instanceof pM||t.type!=e)return 1;let n=PM.get(t);if(null==n){n=1;for(let i of t.children){if(i.type!=e||!(i instanceof dM)){n=1;break}n+=CM(e,i)}PM.set(t,n)}return n}function EM(e,t,n,i,r,s,o,a,l){let h=0;for(let f=i;f<r;f++)h+=CM(e,t[f]);let c=Math.ceil(1.5*h/8),u=[],d=[];return function t(n,i,r,o,a){for(let h=r;h<o;){let r=h,f=i[h],p=CM(e,n[h]);for(h++;h<o;h++){let t=CM(e,n[h]);if(p+t>=c)break;p+=t}if(h==r+1){if(p>c){let e=n[r];t(e.children,e.positions,0,e.children.length,i[r]+a);continue}u.push(n[r])}else{let t=i[h-1]+n[h-1].length-f;u.push(EM(e,n,i,r,h,f,t,null,l))}d.push(f+a-s)}}(t,n,i,r,0),(a||l)(u,d,o)}class QM{constructor(){this.map=new WeakMap}setBuffer(e,t,n){let i=this.map.get(e);i||this.map.set(e,i=new Map),i.set(t,n)}getBuffer(e,t){let n=this.map.get(e);return n&&n.get(t)}set(e,t){e instanceof kM?this.setBuffer(e.context.buffer,e.index,t):e instanceof vM&&this.map.set(e.tree,t)}get(e){return e instanceof kM?this.getBuffer(e.context.buffer,e.index):e instanceof vM?this.map.get(e.tree):void 0}cursorSet(e,t){e.buffer?this.setBuffer(e.buffer.buffer,e.index,t):this.map.set(e.tree,t)}cursorGet(e){return e.buffer?this.getBuffer(e.buffer.buffer,e.index):this.map.get(e.tree)}}class AM{constructor(e,t,n,i){let r=arguments.length>4&&void 0!==arguments[4]&&arguments[4],s=arguments.length>5&&void 0!==arguments[5]&&arguments[5];this.from=e,this.to=t,this.tree=n,this.offset=i,this.open=(r?1:0)|(s?2:0)}get openStart(){return(1&this.open)>0}get openEnd(){return(2&this.open)>0}static addTree(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=[new AM(0,e.length,e,0,!1,n)];for(let r of t)r.to>e.length&&i.push(r);return i}static applyChanges(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:128;if(!t.length)return e;let i=[],r=1,s=e.length?e[0]:null;for(let o=0,a=0,l=0;;o++){let h=o<t.length?t[o]:null,c=h?h.fromA:1e9;if(c-a>=n)for(;s&&s.from<c;){let t=s;if(a>=t.from||c<=t.to||l){let e=Math.max(t.from,a)-l,n=Math.min(t.to,c)-l;t=e>=n?null:new AM(e,n,t.tree,t.offset+l,o>0,!!h)}if(t&&i.push(t),s.to>c)break;s=r<e.length?e[r++]:null}if(!h)break;a=h.toA,l=h.toA-h.toB}return i}}class RM{startParse(e,t,n){return"string"==typeof e&&(e=new NM(e)),n=n?n.length?n.map((e=>new rM(e.from,e.to))):[new rM(0,0)]:[new rM(0,e.length)],this.createParse(e,t||[],n)}parse(e,t,n){let i=this.startParse(e,t,n);for(;;){let e=i.advance();if(e)return e}}}class NM{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,t){return this.string.slice(e,t)}}new sM({perNode:!0});let IM=0;class DM{constructor(e,t,n){this.set=e,this.base=t,this.modified=n,this.id=IM++}static define(e){if(null===e||void 0===e?void 0:e.base)throw new Error("Can not derive from a modified tag");let t=new DM([],null,[]);if(t.set.push(t),e)for(let n of e.set)t.set.push(n);return t}static defineModifier(){let e=new LM;return t=>t.modified.indexOf(e)>-1?t:LM.get(t.base||t,t.modified.concat(e).sort(((e,t)=>e.id-t.id)))}}let MM=0;class LM{constructor(){this.instances=[],this.id=MM++}static get(e,t){if(!t.length)return e;let n=t[0].instances.find((n=>n.base==e&&function(e,t){return e.length==t.length&&e.every(((e,n)=>e==t[n]))}(t,n.modified)));if(n)return n;let i=[],r=new DM(i,e,t);for(let o of t)o.instances.push(r);let s=function(e){let t=[[]];for(let n=0;n<e.length;n++)for(let i=0,r=t.length;i<r;i++)t.push(t[i].concat(e[n]));return t.sort(((e,t)=>t.length-e.length))}(t);for(let o of e.set)if(!o.modified.length)for(let e of s)i.push(LM.get(o,e));return r}}function $M(e){let t=Object.create(null);for(let n in e){let i=e[n];Array.isArray(i)||(i=[i]);for(let e of n.split(" "))if(e){let n=[],r=2,s=e;for(let t=0;;){if("..."==s&&t>0&&t+3==e.length){r=1;break}let i=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(s);if(!i)throw new RangeError("Invalid path: "+e);if(n.push("*"==i[0]?"":'"'==i[0][0]?JSON.parse(i[0]):i[0]),t+=i[0].length,t==e.length)break;let o=e[t++];if(t==e.length&&"!"==o){r=0;break}if("/"!=o)throw new RangeError("Invalid path: "+e);s=e.slice(t)}let o=n.length-1,a=n[o];if(!a)throw new RangeError("Invalid path: "+e);let l=new qM(i,r,o>0?n.slice(0,o):null);t[a]=l.sort(t[a])}}return UM.add(t)}const UM=new sM;class qM{constructor(e,t,n,i){this.tags=e,this.mode=t,this.context=n,this.next=i}get opaque(){return 0==this.mode}get inherit(){return 1==this.mode}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}function VM(e,t){let n=Object.create(null);for(let s of e)if(Array.isArray(s.tag))for(let e of s.tag)n[e.id]=s.class;else n[s.tag.id]=s.class;let{scope:i,all:r=null}=t||{};return{style:e=>{let t=r;for(let i of e)for(let e of i.set){let i=n[e.id];if(i){t=t?t+" "+i:i;break}}return t},scope:i}}qM.empty=new qM([],2,null);const zM=DM.define,jM=zM(),BM=zM(),FM=zM(BM),WM=zM(BM),XM=zM(),YM=zM(XM),GM=zM(XM),ZM=zM(),HM=zM(ZM),KM=zM(),JM=zM(),eL=zM(),tL=zM(eL),nL=zM(),iL={comment:jM,lineComment:zM(jM),blockComment:zM(jM),docComment:zM(jM),name:BM,variableName:zM(BM),typeName:FM,tagName:zM(FM),propertyName:WM,attributeName:zM(WM),className:zM(BM),labelName:zM(BM),namespace:zM(BM),macroName:zM(BM),literal:XM,string:YM,docString:zM(YM),character:zM(YM),attributeValue:zM(YM),number:GM,integer:zM(GM),float:zM(GM),bool:zM(XM),regexp:zM(XM),escape:zM(XM),color:zM(XM),url:zM(XM),keyword:KM,self:zM(KM),null:zM(KM),atom:zM(KM),unit:zM(KM),modifier:zM(KM),operatorKeyword:zM(KM),controlKeyword:zM(KM),definitionKeyword:zM(KM),moduleKeyword:zM(KM),operator:JM,derefOperator:zM(JM),arithmeticOperator:zM(JM),logicOperator:zM(JM),bitwiseOperator:zM(JM),compareOperator:zM(JM),updateOperator:zM(JM),definitionOperator:zM(JM),typeOperator:zM(JM),controlOperator:zM(JM),punctuation:eL,separator:zM(eL),bracket:tL,angleBracket:zM(tL),squareBracket:zM(tL),paren:zM(tL),brace:zM(tL),content:ZM,heading:HM,heading1:zM(HM),heading2:zM(HM),heading3:zM(HM),heading4:zM(HM),heading5:zM(HM),heading6:zM(HM),contentSeparator:zM(ZM),list:zM(ZM),quote:zM(ZM),emphasis:zM(ZM),strong:zM(ZM),link:zM(ZM),monospace:zM(ZM),strikethrough:zM(ZM),inserted:zM(),deleted:zM(),changed:zM(),invalid:zM(),meta:nL,documentMeta:zM(nL),annotation:zM(nL),processingInstruction:zM(nL),definition:DM.defineModifier(),constant:DM.defineModifier(),function:DM.defineModifier(),standard:DM.defineModifier(),local:DM.defineModifier(),special:DM.defineModifier()};VM([{tag:iL.link,class:"tok-link"},{tag:iL.heading,class:"tok-heading"},{tag:iL.emphasis,class:"tok-emphasis"},{tag:iL.strong,class:"tok-strong"},{tag:iL.keyword,class:"tok-keyword"},{tag:iL.atom,class:"tok-atom"},{tag:iL.bool,class:"tok-bool"},{tag:iL.url,class:"tok-url"},{tag:iL.labelName,class:"tok-labelName"},{tag:iL.inserted,class:"tok-inserted"},{tag:iL.deleted,class:"tok-deleted"},{tag:iL.literal,class:"tok-literal"},{tag:iL.string,class:"tok-string"},{tag:iL.number,class:"tok-number"},{tag:[iL.regexp,iL.escape,iL.special(iL.string)],class:"tok-string2"},{tag:iL.variableName,class:"tok-variableName"},{tag:iL.local(iL.variableName),class:"tok-variableName tok-local"},{tag:iL.definition(iL.variableName),class:"tok-variableName tok-definition"},{tag:iL.special(iL.variableName),class:"tok-variableName2"},{tag:iL.definition(iL.propertyName),class:"tok-propertyName tok-definition"},{tag:iL.typeName,class:"tok-typeName"},{tag:iL.namespace,class:"tok-namespace"},{tag:iL.className,class:"tok-className"},{tag:iL.macroName,class:"tok-macroName"},{tag:iL.propertyName,class:"tok-propertyName"},{tag:iL.operator,class:"tok-operator"},{tag:iL.comment,class:"tok-comment"},{tag:iL.meta,class:"tok-meta"},{tag:iL.invalid,class:"tok-invalid"},{tag:iL.punctuation,class:"tok-punctuation"}]);var rL;const sL=new sM;function oL(e){return Lm.define({combine:e?t=>t.concat(e):void 0})}const aL=new sM;class lL{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";this.data=e,this.name=i,TO.prototype.hasOwnProperty("tree")||Object.defineProperty(TO.prototype,"tree",{get(){return uL(this)}}),this.parser=t,this.extension=[bL.of(this),TO.languageData.of(((e,t,n)=>{let i=hL(e,t,n),r=i.type.prop(sL);if(!r)return[];let s=e.facet(r),o=i.type.prop(aL);if(o){let r=i.resolve(t-i.from,n);for(let t of o)if(t.test(r,e)){let n=e.facet(t.facet);return"replace"==t.type?n:n.concat(s)}}return s}))].concat(n)}isActiveAt(e,t){return hL(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1).type.prop(sL)==this.data}findRegions(e){let t=e.facet(bL);if((null===t||void 0===t?void 0:t.data)==this.data)return[{from:0,to:e.doc.length}];if(!t||!t.allowsNesting)return[];let n=[],i=(e,t)=>{if(e.prop(sL)==this.data)return void n.push({from:t,to:t+e.length});let r=e.prop(sM.mounted);if(r){if(r.tree.prop(sL)==this.data){if(r.overlay)for(let e of r.overlay)n.push({from:e.from+t,to:e.to+t});else n.push({from:t,to:t+e.length});return}if(r.overlay){let e=n.length;if(i(r.tree,r.overlay[0].from+t),n.length>e)return}}for(let n=0;n<e.children.length;n++){let r=e.children[n];r instanceof dM&&i(r,e.positions[n]+t)}};return i(uL(e),0),n}get allowsNesting(){return!0}}function hL(e,t,n){let i=e.facet(bL),r=uL(e).topNode;if(!i||i.allowsNesting)for(let s=r;s;s=s.enter(t,n,uM.ExcludeBuffers))s.type.isTop&&(r=s);return r}lL.setState=fO.define();class cL extends lL{constructor(e,t,n){super(e,t,[],n),this.parser=t}static define(e){let t=oL(e.languageData);return new cL(t,e.parser.configure({props:[sL.add((e=>e.isTop?t:void 0))]}),e.name)}configure(e,t){return new cL(this.data,this.parser.configure(e),t||this.name)}get allowsNesting(){return this.parser.hasWrappers()}}function uL(e){let t=e.field(lL.state,!1);return t?t.tree:dM.empty}class dL{constructor(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}get length(){return this.doc.length}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,t){let n=this.cursorPos-this.string.length;return e<n||t>=this.cursorPos?this.doc.sliceString(e,t):this.string.slice(e-n,t-n)}}let fL=null;class pL{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3?arguments[3]:void 0,r=arguments.length>4?arguments[4]:void 0,s=arguments.length>5?arguments[5]:void 0,o=arguments.length>6?arguments[6]:void 0,a=arguments.length>7?arguments[7]:void 0;this.parser=e,this.state=t,this.fragments=n,this.tree=i,this.treeLen=r,this.viewport=s,this.skipped=o,this.scheduleOn=a,this.parse=null,this.tempSkipped=[]}static create(e,t,n){return new pL(e,t,[],dM.empty,0,n,[],null)}startParse(){return this.parser.startParse(new dL(this.state.doc),this.fragments)}work(e,t){return null!=t&&t>=this.state.doc.length&&(t=void 0),this.tree!=dM.empty&&this.isDone(null!==t&&void 0!==t?t:this.state.doc.length)?(this.takeTree(),!0):this.withContext((()=>{var n;if("number"==typeof e){let t=Date.now()+e;e=()=>Date.now()>t}for(this.parse||(this.parse=this.startParse()),null!=t&&(null==this.parse.stoppedAt||this.parse.stoppedAt>t)&&t<this.state.doc.length&&this.parse.stopAt(t);;){let i=this.parse.advance();if(i){if(this.fragments=this.withoutTempSkipped(AM.addTree(i,this.fragments,null!=this.parse.stoppedAt)),this.treeLen=null!==(n=this.parse.stoppedAt)&&void 0!==n?n:this.state.doc.length,this.tree=i,this.parse=null,!(this.treeLen<(null!==t&&void 0!==t?t:this.state.doc.length)))return!0;this.parse=this.startParse()}if(e())return!1}}))}takeTree(){let e,t;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((null==this.parse.stoppedAt||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext((()=>{for(;!(t=this.parse.advance()););})),this.treeLen=e,this.tree=t,this.fragments=this.withoutTempSkipped(AM.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let t=fL;fL=this;try{return e()}finally{fL=t}}withoutTempSkipped(e){for(let t;t=this.tempSkipped.pop();)e=gL(e,t.from,t.to);return e}changes(e,t){let{fragments:n,tree:i,treeLen:r,viewport:s,skipped:o}=this;if(this.takeTree(),!e.empty){let t=[];if(e.iterChangedRanges(((e,n,i,r)=>t.push({fromA:e,toA:n,fromB:i,toB:r}))),n=AM.applyChanges(n,t),i=dM.empty,r=0,s={from:e.mapPos(s.from,-1),to:e.mapPos(s.to,1)},this.skipped.length){o=[];for(let t of this.skipped){let n=e.mapPos(t.from,1),i=e.mapPos(t.to,-1);n<i&&o.push({from:n,to:i})}}}return new pL(this.parser,t,n,i,r,s,o,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let t=this.skipped.length;for(let n=0;n<this.skipped.length;n++){let{from:t,to:i}=this.skipped[n];t<e.to&&i>e.from&&(this.fragments=gL(this.fragments,t,i),this.skipped.splice(n--,1))}return!(this.skipped.length>=t)&&(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,t){this.skipped.push({from:e,to:t})}static getSkippingParser(e){return new class extends RM{createParse(t,n,i){let r=i[0].from,s=i[i.length-1].to;return{parsedPos:r,advance(){let t=fL;if(t){for(let e of i)t.tempSkipped.push(e);e&&(t.scheduleOn=t.scheduleOn?Promise.all([t.scheduleOn,e]):e)}return this.parsedPos=s,new dM(lM.none,[],[],s-r)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let t=this.fragments;return this.treeLen>=e&&t.length&&0==t[0].from&&t[0].to>=e}static get(){return fL}}function gL(e,t,n){return AM.applyChanges(e,[{fromA:t,toA:n,fromB:t,toB:n}])}class mL{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let t=this.context.changes(e.changes,e.state),n=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),t.viewport.to);return t.work(20,n)||t.takeTree(),new mL(t)}static init(e){let t=Math.min(3e3,e.doc.length),n=pL.create(e.facet(bL).parser,e,{from:0,to:t});return n.work(20,t)||n.takeTree(),new mL(n)}}lL.state=Bm.define({create:mL.init,update(e,t){for(let n of t.effects)if(n.is(lL.setState))return n.value;return t.startState.facet(bL)!=t.state.facet(bL)?mL.init(t.state):e.apply(t)}});let OL=e=>{let t=setTimeout((()=>e()),500);return()=>clearTimeout(t)};"undefined"!=typeof requestIdleCallback&&(OL=e=>{let t=-1,n=setTimeout((()=>{t=requestIdleCallback(e,{timeout:400})}),100);return()=>t<0?clearTimeout(n):cancelIdleCallback(t)});const vL="undefined"!=typeof navigator&&(null===(rL=navigator.scheduling)||void 0===rL?void 0:rL.isInputPending)?()=>navigator.scheduling.isInputPending():null,yL=Ky.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let t=this.view.state.field(lL.state).context;(t.updateViewport(e.view.viewport)||this.view.viewport.to>t.treeLen)&&this.scheduleWork(),(e.docChanged||e.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(t)}scheduleWork(){if(this.working)return;let{state:e}=this.view,t=e.field(lL.state);t.tree==t.context.tree&&t.context.isDone(e.doc.length)||(this.working=OL(this.work))}work(e){this.working=null;let t=Date.now();if(this.chunkEnd<t&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=t+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:n,viewport:{to:i}}=this.view,r=n.field(lL.state);if(r.tree==r.context.tree&&r.context.isDone(i+1e5))return;let s=Date.now()+Math.min(this.chunkBudget,100,e&&!vL?Math.max(25,e.timeRemaining()-5):1e9),o=r.context.treeLen<i&&n.doc.length>i+1e3,a=r.context.work((()=>vL&&vL()||Date.now()>s),i+(o?0:1e5));this.chunkBudget-=Date.now()-t,(a||this.chunkBudget<=0)&&(r.context.takeTree(),this.view.dispatch({effects:lL.setState.of(new mL(r.context))})),this.chunkBudget>0&&(!a||o)&&this.scheduleWork(),this.checkAsyncSchedule(r.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then((()=>this.scheduleWork())).catch((e=>Yy(this.view.state,e))).then((()=>this.workScheduled--)),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),bL=Lm.define({combine:e=>e.length?e[0]:null,enables:e=>[lL.state,yL,Gw.contentAttributes.compute([e],(t=>{let n=t.facet(e);return n&&n.name?{"data-language":n.name}:{}}))]});class wL{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];this.language=e,this.support=t,this.extension=[e,t]}}const kL=Lm.define({combine:e=>{if(!e.length)return"  ";let t=e[0];if(!t||/\S/.test(t)||Array.from(t).some((e=>e!=t[0])))throw new Error("Invalid indent unit: "+JSON.stringify(e[0]));return t}});const SL=new sM;function xL(e){let{closing:t,align:n=!0,units:i=1}=e;return e=>TL(e,n,i,t)}function TL(e,t,n,i,r){let s=e.textAfter,o=s.match(/^\s*/)[0].length,a=i&&s.slice(o,o+i.length)==i||r==e.pos+o,l=t?function(e){let t=e.node,n=t.childAfter(t.from),i=t.lastChild;if(!n)return null;let r=e.options.simulateBreak,s=e.state.doc.lineAt(n.from),o=null==r||r<=s.from?s.to:Math.min(s.to,r);for(let a=n.to;;){let e=t.childAfter(a);if(!e||e==i)return null;if(!e.type.isSkipped)return e.from<o?n:null;a=e.to}}(e):null;return l?a?e.column(l.from):e.column(l.to):e.baseIndent+(a?0:e.unit*n)}const _L=new sM;class PL{constructor(e,t){let n;function i(e){let t=YO.newName();return(n||Object.create(null))["."+t]=e,t}this.specs=e;const r="string"==typeof t.all?t.all:t.all?i(t.all):void 0,s=t.scope;this.scope=s instanceof lL?e=>e.prop(sL)==s.data:s?e=>e==s:void 0,this.style=VM(e.map((e=>({tag:e.tag,class:e.class||i(Object.assign({},e,{tag:null}))}))),{all:r}).style,this.module=n?new YO(n):null,this.themeType=t.themeType}static define(e,t){return new PL(e,t||{})}}iL.meta,iL.link,iL.heading,iL.emphasis,iL.strong,iL.strikethrough,iL.keyword,iL.atom,iL.bool,iL.url,iL.contentSeparator,iL.labelName,iL.literal,iL.inserted,iL.string,iL.deleted,iL.regexp,iL.escape,iL.string,iL.variableName,iL.variableName,iL.typeName,iL.namespace,iL.className,iL.variableName,iL.macroName,iL.propertyName,iL.comment,iL.invalid;const CL=Object.create(null),EL=[lM.none],QL=[],AL=Object.create(null),RL=Object.create(null);for(let[n,Sk]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])RL[n]=IL(CL,Sk);function NL(e,t){QL.indexOf(e)>-1||(QL.push(e),console.warn(t))}function IL(e,t){let n=[];for(let a of t.split(" ")){let t=[];for(let n of a.split(".")){let i=e[n]||iL[n];i?"function"==typeof i?t.length?t=t.map(i):NL(n,"Modifier ".concat(n," used at start of tag")):t.length?NL(n,"Tag ".concat(n," used as modifier")):t=Array.isArray(i)?i:[i]:NL(n,"Unknown highlighting tag ".concat(n))}for(let e of t)n.push(e)}if(!n.length)return 0;let i=t.replace(/ /g,"_"),r=i+" "+n.map((e=>e.id)),s=AL[r];if(s)return s.id;let o=AL[r]=lM.define({id:EL.length,name:i,props:[$M({[i]:n})]});return EL.push(o),o.id}gy.RTL,gy.LTR;function DL(e){let t=Object.keys(e).join(""),n=/\w/.test(t);return n&&(t=t.replace(/\w/g,"")),"[".concat(n?"\\w":"").concat(t.replace(/[^\w\s]/g,"\\$&"),"]")}function ML(e){let t=e.map((e=>"string"==typeof e?{label:e}:e)),[n,i]=t.every((e=>/^\w+$/.test(e.label)))?[/\w*$/,/\w+$/]:function(e){let t=Object.create(null),n=Object.create(null);for(let{label:r}of e){t[r[0]]=!0;for(let e=1;e<r.length;e++)n[r[e]]=!0}let i=DL(t)+DL(n)+"*$";return[new RegExp("^"+i),new RegExp(i)]}(t);return e=>{let r=e.matchBefore(i);return r||e.explicit?{from:r?r.from:e.pos,options:t,validFor:n}:null}}function LL(e,t){return n=>{for(let t=uL(n.state).resolveInner(n.pos,-1);t;t=t.parent){if(e.indexOf(t.name)>-1)return null;if(t.type.isTop)break}return t(n)}}const $L=cO.define();"object"==typeof navigator&&navigator.platform;const UL=Gw.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",height:"100%",listStyle:"none",margin:0,padding:0,"& > li, & > completion-section":{padding:"1px 3px",lineHeight:1.2},"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer"},"& > completion-section":{display:"list-item",borderBottom:"1px solid silver",paddingLeft:"0.5em",opacity:.7}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&light .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#777"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},"&dark .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#444"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'"\xb7\xb7\xb7"',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"".concat(400,"px"),boxSizing:"border-box"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},".cm-completionInfo.cm-completionInfo-left-narrow":{right:"".concat(30,"px")},".cm-completionInfo.cm-completionInfo-right-narrow":{left:"".concat(30,"px")},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",display:"inline-block",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6",boxSizing:"content-box"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"'\u0192'"}},".cm-completionIcon-class":{"&:after":{content:"'\u25cb'"}},".cm-completionIcon-interface":{"&:after":{content:"'\u25cc'"}},".cm-completionIcon-variable":{"&:after":{content:"'\ud835\udc65'"}},".cm-completionIcon-constant":{"&:after":{content:"'\ud835\udc36'"}},".cm-completionIcon-type":{"&:after":{content:"'\ud835\udc61'"}},".cm-completionIcon-enum":{"&:after":{content:"'\u222a'"}},".cm-completionIcon-property":{"&:after":{content:"'\u25a1'"}},".cm-completionIcon-keyword":{"&:after":{content:"'\ud83d\udd11\ufe0e'"}},".cm-completionIcon-namespace":{"&:after":{content:"'\u25a2'"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}});class qL{constructor(e,t,n,i){this.field=e,this.line=t,this.from=n,this.to=i}}class VL{constructor(e,t,n){this.field=e,this.from=t,this.to=n}map(e){let t=e.mapPos(this.from,-1,xm.TrackDel),n=e.mapPos(this.to,1,xm.TrackDel);return null==t||null==n?null:new VL(this.field,t,n)}}class zL{constructor(e,t){this.lines=e,this.fieldPositions=t}instantiate(e,t){let n=[],i=[t],r=e.doc.lineAt(t),s=/^\s*/.exec(r.text)[0];for(let a of this.lines){if(n.length){let n=s,r=/^\t*/.exec(a)[0].length;for(let t=0;t<r;t++)n+=e.facet(kL);i.push(t+n.length-r),a=n+a.slice(r)}n.push(a),t+=a.length+1}let o=this.fieldPositions.map((e=>new VL(e.field,i[e.line]+e.from,i[e.line]+e.to)));return{text:n,ranges:o}}static parse(e){let t,n=[],i=[],r=[];for(let s of e.split(/\r\n?|\n/)){for(;t=/[#$]\{(?:(\d+)(?::([^}]*))?|((?:\\[{}]|[^}])*))\}/.exec(s);){let e=t[1]?+t[1]:null,o=t[2]||t[3]||"",a=-1,l=o.replace(/\\[{}]/g,(e=>e[1]));for(let t=0;t<n.length;t++)(null!=e?n[t].seq==e:l&&n[t].name==l)&&(a=t);if(a<0){let t=0;for(;t<n.length&&(null==e||null!=n[t].seq&&n[t].seq<e);)t++;n.splice(t,0,{seq:e,name:l}),a=t;for(let e of r)e.field>=a&&e.field++}r.push(new qL(a,i.length,t.index,t.index+l.length)),s=s.slice(0,t.index)+o+s.slice(t.index+t[0].length)}s=s.replace(/\\([{}])/g,((e,t,n)=>{for(let s of r)s.line==i.length&&s.from>n&&(s.from--,s.to--);return t})),i.push(s)}return new zL(i,r)}}let jL=oy.widget({widget:new class extends ry{toDOM(){let e=document.createElement("span");return e.className="cm-snippetFieldPosition",e}ignoreEvent(){return!1}}}),BL=oy.mark({class:"cm-snippetField"});class FL{constructor(e,t){this.ranges=e,this.active=t,this.deco=oy.set(e.map((e=>(e.from==e.to?jL:BL).range(e.from,e.to))))}map(e){let t=[];for(let n of this.ranges){let i=n.map(e);if(!i)return null;t.push(i)}return new FL(t,this.active)}selectionInsideField(e){return e.ranges.every((e=>this.ranges.some((t=>t.field==this.active&&t.from<=e.from&&t.to>=e.to))))}}const WL=fO.define({map:(e,t)=>e&&e.map(t)}),XL=fO.define(),YL=Bm.define({create:()=>null,update(e,t){for(let n of t.effects){if(n.is(WL))return n.value;if(n.is(XL)&&e)return new FL(e.ranges,n.value)}return e&&t.docChanged&&(e=e.map(t.changes)),e&&t.selection&&!e.selectionInsideField(t.selection)&&(e=null),e},provide:e=>Gw.decorations.from(e,(e=>e?e.deco:oy.none))});function GL(e,t){return Im.create(e.filter((e=>e.field==t)).map((e=>Im.range(e.from,e.to))))}function ZL(e){let t=zL.parse(e);return(e,n,i,r)=>{let{text:s,ranges:o}=t.instantiate(e.state,i),a={changes:{from:i,to:r,insert:tm.of(s)},scrollIntoView:!0,annotations:n?[$L.of(n),pO.userEvent.of("input.complete")]:void 0};if(o.length&&(a.selection=GL(o,0)),o.some((e=>e.field>0))){let t=new FL(o,0),n=a.effects=[WL.of(t)];void 0===e.state.field(YL,!1)&&n.push(fO.appendConfig.of([YL,e$,n$,UL]))}e.dispatch(e.state.update(a))}}function HL(e){return t=>{let{state:n,dispatch:i}=t,r=n.field(YL,!1);if(!r||e<0&&0==r.active)return!1;let s=r.active+e,o=e>0&&!r.ranges.some((t=>t.field==s+e));return i(n.update({selection:GL(r.ranges,s),effects:WL.of(o?null:new FL(r.ranges,s)),scrollIntoView:!0})),!0}}const KL=[{key:"Tab",run:HL(1),shift:HL(-1)},{key:"Escape",run:e=>{let{state:t,dispatch:n}=e;return!!t.field(YL,!1)&&(n(t.update({effects:WL.of(null)})),!0)}}],JL=Lm.define({combine:e=>e.length?e[0]:KL}),e$=Zm.highest(ik.compute([JL],(e=>e.facet(JL))));function t$(e,t){return Object.assign(Object.assign({},t),{apply:ZL(e)})}const n$=Gw.domEventHandlers({mousedown(e,t){let n,i=t.state.field(YL,!1);if(!i||null==(n=t.posAtCoords({x:e.clientX,y:e.clientY})))return!1;let r=i.ranges.find((e=>e.from<=n&&e.to>=n));return!(!r||r.field==i.active)&&(t.dispatch({selection:GL(i.ranges,r.field),effects:WL.of(i.ranges.some((e=>e.field>r.field))?new FL(i.ranges,r.field):null),scrollIntoView:!0}),!0)}});const i$=new class extends PO{};i$.startSide=1,i$.endSide=-1;"object"==typeof navigator&&navigator.userAgent;const r$=new QM,s$=new Set(["Script","Body","FunctionDefinition","ClassDefinition","LambdaExpression","ForStatement","MatchClause"]);function o$(e){return(t,n,i)=>{if(i)return!1;let r=t.node.getChild("VariableName");return r&&n(r,e),!0}}const a$={FunctionDefinition:o$("function"),ClassDefinition:o$("class"),ForStatement(e,t,n){if(n)for(let i=e.node.firstChild;i;i=i.nextSibling)if("VariableName"==i.name)t(i,"variable");else if("in"==i.name)break},ImportStatement(e,t){var n,i;let{node:r}=e,s="from"==(null===(n=r.firstChild)||void 0===n?void 0:n.name);for(let o=r.getChild("import");o;o=o.nextSibling)"VariableName"==o.name&&"as"!=(null===(i=o.nextSibling)||void 0===i?void 0:i.name)&&t(o,s?"variable":"namespace")},AssignStatement(e,t){for(let n=e.node.firstChild;n;n=n.nextSibling)if("VariableName"==n.name)t(n,"variable");else if(":"==n.name||"AssignOp"==n.name)break},ParamList(e,t){for(let n=null,i=e.node.firstChild;i;i=i.nextSibling)"VariableName"!=i.name||n&&/\*|AssignOp/.test(n.name)||t(i,"variable"),n=i},CapturePattern:o$("variable"),AsPattern:o$("variable"),__proto__:null};function l$(e,t){let n=r$.get(t);if(n)return n;let i=[],r=!0;function s(t,n){let r=e.sliceString(t.from,t.to);i.push({label:r,type:n})}return t.cursor(uM.IncludeAnonymous).iterate((t=>{if(t.name){let e=a$[t.name];if(e&&e(t,s,r)||!r&&s$.has(t.name))return!1;r=!1}else if(t.to-t.from>8192){for(let n of l$(e,t.node))i.push(n);return!1}})),r$.set(t,i),i}const h$=/^[\w\xa1-\uffff][\w\d\xa1-\uffff]*$/,c$=["String","FormatString","Comment","PropertyName"];function u$(e){let t=uL(e.state).resolveInner(e.pos,-1);if(c$.indexOf(t.name)>-1)return null;let n="VariableName"==t.name||t.to-t.from<20&&h$.test(e.state.sliceDoc(t.from,t.to));if(!n&&!e.explicit)return null;let i=[];for(let r=t;r;r=r.parent)s$.has(r.name)&&(i=i.concat(l$(e.state.doc,r)));return{options:i,from:n?t.from:e.pos,validFor:h$}}const d$=["__annotations__","__builtins__","__debug__","__doc__","__import__","__name__","__loader__","__package__","__spec__","False","None","True"].map((e=>({label:e,type:"constant"}))).concat(["ArithmeticError","AssertionError","AttributeError","BaseException","BlockingIOError","BrokenPipeError","BufferError","BytesWarning","ChildProcessError","ConnectionAbortedError","ConnectionError","ConnectionRefusedError","ConnectionResetError","DeprecationWarning","EOFError","Ellipsis","EncodingWarning","EnvironmentError","Exception","FileExistsError","FileNotFoundError","FloatingPointError","FutureWarning","GeneratorExit","IOError","ImportError","ImportWarning","IndentationError","IndexError","InterruptedError","IsADirectoryError","KeyError","KeyboardInterrupt","LookupError","MemoryError","ModuleNotFoundError","NameError","NotADirectoryError","NotImplemented","NotImplementedError","OSError","OverflowError","PendingDeprecationWarning","PermissionError","ProcessLookupError","RecursionError","ReferenceError","ResourceWarning","RuntimeError","RuntimeWarning","StopAsyncIteration","StopIteration","SyntaxError","SyntaxWarning","SystemError","SystemExit","TabError","TimeoutError","TypeError","UnboundLocalError","UnicodeDecodeError","UnicodeEncodeError","UnicodeError","UnicodeTranslateError","UnicodeWarning","UserWarning","ValueError","Warning","ZeroDivisionError"].map((e=>({label:e,type:"type"})))).concat(["bool","bytearray","bytes","classmethod","complex","float","frozenset","int","list","map","memoryview","object","range","set","staticmethod","str","super","tuple","type"].map((e=>({label:e,type:"class"})))).concat(["abs","aiter","all","anext","any","ascii","bin","breakpoint","callable","chr","compile","delattr","dict","dir","divmod","enumerate","eval","exec","exit","filter","format","getattr","globals","hasattr","hash","help","hex","id","input","isinstance","issubclass","iter","len","license","locals","max","min","next","oct","open","ord","pow","print","property","quit","repr","reversed","round","setattr","slice","sorted","sum","vars","zip"].map((e=>({label:e,type:"function"})))),f$=[t$("def ${name}(${params}):\n\t${}",{label:"def",detail:"function",type:"keyword"}),t$("for ${name} in ${collection}:\n\t${}",{label:"for",detail:"loop",type:"keyword"}),t$("while ${}:\n\t${}",{label:"while",detail:"loop",type:"keyword"}),t$("try:\n\t${}\nexcept ${error}:\n\t${}",{label:"try",detail:"/ except block",type:"keyword"}),t$("if ${}:\n\t\n",{label:"if",detail:"block",type:"keyword"}),t$("if ${}:\n\t${}\nelse:\n\t${}",{label:"if",detail:"/ else block",type:"keyword"}),t$("class ${name}:\n\tdef __init__(self, ${params}):\n\t\t\t${}",{label:"class",detail:"definition",type:"keyword"}),t$("import ${module}",{label:"import",detail:"statement",type:"keyword"}),t$("from ${module} import ${names}",{label:"from",detail:"import",type:"keyword"})],p$=LL(c$,ML(d$.concat(f$)));function g$(e){let{node:t,pos:n}=e,i=e.lineIndent(n,-1),r=null;for(;;){let s=t.childBefore(n);if(!s)break;if("Comment"==s.name)n=s.from;else if("Body"==s.name)e.baseIndentFor(s)+e.unit<=i&&(r=s),t=s;else{if(!s.type.is("Statement"))break;t=s}}return r}function m$(e,t){let n=e.baseIndentFor(t),i=e.lineAt(e.pos,-1),r=i.from+i.text.length;return/^\s*($|#)/.test(i.text)&&e.node.to<r+100&&!/\S/.test(e.state.sliceDoc(r,e.node.to))&&e.lineIndent(e.pos,-1)<=n||/^\s*(else:|elif |except |finally:)/.test(e.textAfter)&&e.lineIndent(e.pos,-1)>n?null:n+e.unit}const O$=cL.define({name:"python",parser:tM.configure({props:[SL.add({Body:e=>{var t;return null!==(t=m$(e,g$(e)||e.node))&&void 0!==t?t:e.continue()},IfStatement:e=>/^\s*(else:|elif )/.test(e.textAfter)?e.baseIndent:e.continue(),"ForStatement WhileStatement":e=>/^\s*else:/.test(e.textAfter)?e.baseIndent:e.continue(),TryStatement:e=>/^\s*(except |finally:|else:)/.test(e.textAfter)?e.baseIndent:e.continue(),"TupleExpression ComprehensionExpression ParamList ArgList ParenthesizedExpression":xL({closing:")"}),"DictionaryExpression DictionaryComprehensionExpression SetExpression SetComprehensionExpression":xL({closing:"}"}),"ArrayExpression ArrayComprehensionExpression":xL({closing:"]"}),"String FormatString":()=>null,Script:e=>{var t;let n=g$(e);return null!==(t=n&&m$(e,n))&&void 0!==t?t:e.continue()}}),_L.add({"ArrayExpression DictionaryExpression SetExpression TupleExpression":function(e){let t=e.firstChild,n=e.lastChild;return t&&t.to<n.from?{from:t.to,to:n.type.isError?e.to:n.from}:null},Body:(e,t)=>({from:e.from+1,to:e.to-(e.to==t.doc.length?0:1)})})]}),languageData:{closeBrackets:{brackets:["(","[","{","'",'"',"'''",'"""'],stringPrefixes:["f","fr","rf","r","u","b","br","rb","F","FR","RF","R","U","B","BR","RB"]},commentTokens:{line:"#"},indentOnInput:/^\s*([\}\]\)]|else:|elif |except |finally:)$/}});const v$=1024;let y$=0;class b${constructor(e,t){this.from=e,this.to=t}}class w${constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.id=y$++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return"function"!=typeof e&&(e=x$.match(e)),t=>{let n=e(t);return void 0===n?null:[this,n]}}}w$.closedBy=new w$({deserialize:e=>e.split(" ")}),w$.openedBy=new w$({deserialize:e=>e.split(" ")}),w$.group=new w$({deserialize:e=>e.split(" ")}),w$.isolate=new w$({deserialize:e=>{if(e&&"rtl"!=e&&"ltr"!=e&&"auto"!=e)throw new RangeError("Invalid value for isolate: "+e);return e||"auto"}}),w$.contextHash=new w$({perNode:!0}),w$.lookAhead=new w$({perNode:!0}),w$.mounted=new w$({perNode:!0});class k${constructor(e,t,n){this.tree=e,this.overlay=t,this.parser=n}static get(e){return e&&e.props&&e.props[w$.mounted.id]}}const S$=Object.create(null);class x${constructor(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;this.name=e,this.props=t,this.id=n,this.flags=i}static define(e){let t=e.props&&e.props.length?Object.create(null):S$,n=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(null==e.name?8:0),i=new x$(e.name||"",t,e.id,n);if(e.props)for(let r of e.props)if(Array.isArray(r)||(r=r(i)),r){if(r[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");t[r[0].id]=r[1]}return i}prop(e){return this.props[e.id]}get isTop(){return(1&this.flags)>0}get isSkipped(){return(2&this.flags)>0}get isError(){return(4&this.flags)>0}get isAnonymous(){return(8&this.flags)>0}is(e){if("string"==typeof e){if(this.name==e)return!0;let t=this.prop(w$.group);return!!t&&t.indexOf(e)>-1}return this.id==e}static match(e){let t=Object.create(null);for(let n in e)for(let i of n.split(" "))t[i]=e[n];return e=>{for(let n=e.prop(w$.group),i=-1;i<(n?n.length:0);i++){let r=t[i<0?e.name:n[i]];if(r)return r}}}}x$.none=new x$("",Object.create(null),0,8);class T${constructor(e){this.types=e;for(let t=0;t<e.length;t++)if(e[t].id!=t)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(){let e=[];for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];for(let r of this.types){let t=null;for(let e of n){let n=e(r);n&&(t||(t=Object.assign({},r.props)),t[n[0].id]=n[1])}e.push(t?new x$(r.name,t,r.id,r.flags):r)}return new T$(e)}}const _$=new WeakMap,P$=new WeakMap;var C$;!function(e){e[e.ExcludeBuffers=1]="ExcludeBuffers",e[e.IncludeAnonymous=2]="IncludeAnonymous",e[e.IgnoreMounts=4]="IgnoreMounts",e[e.IgnoreOverlays=8]="IgnoreOverlays"}(C$||(C$={}));class E${constructor(e,t,n,i,r){if(this.type=e,this.children=t,this.positions=n,this.length=i,this.props=null,r&&r.length){this.props=Object.create(null);for(let[e,t]of r)this.props["number"==typeof e?e:e.id]=t}}toString(){let e=k$.get(this);if(e&&!e.overlay)return e.tree.toString();let t="";for(let n of this.children){let e=n.toString();e&&(t&&(t+=","),t+=e)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(t.length?"("+t+")":""):t}cursor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return new z$(this.topNode,e)}cursorAt(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=_$.get(this)||this.topNode,i=new z$(n);return i.moveTo(e,t),_$.set(this,i._tree),i}get topNode(){return new D$(this,0,0,null)}resolve(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=N$(_$.get(this)||this.topNode,e,t,!1);return _$.set(this,n),n}resolveInner(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=N$(P$.get(this)||this.topNode,e,t,!0);return P$.set(this,n),n}resolveStack(e){return function(e,t,n){let i=e.resolveInner(t,n),r=null;for(let s=i instanceof D$?i:i.context.parent;s;s=s.parent)if(s.index<0){let e=s.parent;(r||(r=[i])).push(e.resolve(t,n)),s=e}else{let e=k$.get(s.tree);if(e&&e.overlay&&e.overlay[0].from<=t&&e.overlay[e.overlay.length-1].to>=t){let o=new D$(e.tree,e.overlay[0].from+s.from,-1,s);(r||(r=[i])).push(N$(o,t,n,!1))}}return r?q$(r):i}(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0)}iterate(e){let{enter:t,leave:n,from:i=0,to:r=this.length}=e,s=e.mode||0,o=(s&C$.IncludeAnonymous)>0;for(let a=this.cursor(s|C$.IncludeAnonymous);;){let e=!1;if(a.from<=r&&a.to>=i&&(!o&&a.type.isAnonymous||!1!==t(a))){if(a.firstChild())continue;e=!0}for(;e&&n&&(o||!a.type.isAnonymous)&&n(a),!a.nextSibling();){if(!a.parent())return;e=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let t in this.props)e.push([+t,this.props[t]]);return e}balance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.children.length<=8?this:W$(x$.none,this.children,this.positions,0,this.children.length,0,this.length,((e,t,n)=>new E$(this.type,e,t,n,this.propValues)),e.makeTree||((e,t,n)=>new E$(x$.none,e,t,n)))}static build(e){return function(e){var t;let{buffer:n,nodeSet:i,maxBufferLength:r=v$,reused:s=[],minRepeatType:o=i.types.length}=e,a=Array.isArray(n)?new Q$(n,n.length):n,l=i.types,h=0,c=0;function u(e,t,n,v,y,b){let{id:w,start:k,end:S,size:x}=a,T=c;for(;x<0;){if(a.next(),-1==x){let t=s[w];return n.push(t),void v.push(k-e)}if(-3==x)return void(h=w);if(-4==x)return void(c=w);throw new RangeError("Unrecognized record size: ".concat(x))}let _,P,C=l[w],E=k-e;if(S-k<=r&&(P=m(a.pos-t,y))){let t=new Uint16Array(P.size-P.skip),n=a.pos-P.size,r=t.length;for(;a.pos>n;)r=O(P.start,t,r);_=new A$(t,S-P.start,i),E=P.start-e}else{let e=a.pos-x;a.next();let t=[],n=[],i=w>=o?w:-1,s=0,l=S;for(;a.pos>e;)i>=0&&a.id==i&&a.size>=0?(a.end<=l-r&&(p(t,n,k,s,a.end,l,i,T),s=t.length,l=a.end),a.next()):b>2500?d(k,e,t,n):u(k,e,t,n,i,b+1);if(i>=0&&s>0&&s<t.length&&p(t,n,k,s,k,l,i,T),t.reverse(),n.reverse(),i>-1&&s>0){let e=f(C);_=W$(C,t,n,0,t.length,0,S-k,e,e)}else _=g(C,t,n,S-k,T-S)}n.push(_),v.push(E)}function d(e,t,n,s){let o=[],l=0,h=-1;for(;a.pos>t;){let{id:e,start:t,end:n,size:i}=a;if(i>4)a.next();else{if(h>-1&&t<h)break;h<0&&(h=n-r),o.push(e,t,n),l++,a.next()}}if(l){let t=new Uint16Array(4*l),r=o[o.length-2];for(let e=o.length-3,n=0;e>=0;e-=3)t[n++]=o[e],t[n++]=o[e+1]-r,t[n++]=o[e+2]-r,t[n++]=n;n.push(new A$(t,o[2]-r,i)),s.push(r-e)}}function f(e){return(t,n,i)=>{let r,s,o=0,a=t.length-1;if(a>=0&&(r=t[a])instanceof E$){if(!a&&r.type==e&&r.length==i)return r;(s=r.prop(w$.lookAhead))&&(o=n[a]+r.length+s)}return g(e,t,n,i,o)}}function p(e,t,n,r,s,o,a,l){let h=[],c=[];for(;e.length>r;)h.push(e.pop()),c.push(t.pop()+n-s);e.push(g(i.types[a],h,c,o-s,l-o)),t.push(s-n)}function g(e,t,n,i){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,s=arguments.length>5?arguments[5]:void 0;if(h){let e=[w$.contextHash,h];s=s?[e].concat(s):[e]}if(r>25){let e=[w$.lookAhead,r];s=s?[e].concat(s):[e]}return new E$(e,t,n,i,s)}function m(e,t){let n=a.fork(),i=0,s=0,l=0,h=n.end-r,c={size:0,start:0,skip:0};e:for(let r=n.pos-e;n.pos>r;){let e=n.size;if(n.id==t&&e>=0){c.size=i,c.start=s,c.skip=l,l+=4,i+=4,n.next();continue}let a=n.pos-e;if(e<0||a<r||n.start<h)break;let u=n.id>=o?4:0,d=n.start;for(n.next();n.pos>a;){if(n.size<0){if(-3!=n.size)break e;u+=4}else n.id>=o&&(u+=4);n.next()}s=d,i+=e,l+=u}return(t<0||i==e)&&(c.size=i,c.start=s,c.skip=l),c.size>4?c:void 0}function O(e,t,n){let{id:i,start:r,end:s,size:l}=a;if(a.next(),l>=0&&i<o){let o=n;if(l>4){let i=a.pos-(l-4);for(;a.pos>i;)n=O(e,t,n)}t[--n]=o,t[--n]=s-e,t[--n]=r-e,t[--n]=i}else-3==l?h=i:-4==l&&(c=i);return n}let v=[],y=[];for(;a.pos>0;)u(e.start||0,e.bufferStart||0,v,y,-1,0);let b=null!==(t=e.length)&&void 0!==t?t:v.length?y[0]+v[0].length:0;return new E$(l[e.topID],v.reverse(),y.reverse(),b)}(e)}}E$.empty=new E$(x$.none,[],[],0);class Q${constructor(e,t){this.buffer=e,this.index=t}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new Q$(this.buffer,this.index)}}class A${constructor(e,t,n){this.buffer=e,this.length=t,this.set=n}get type(){return x$.none}toString(){let e=[];for(let t=0;t<this.buffer.length;)e.push(this.childString(t)),t=this.buffer[t+3];return e.join(",")}childString(e){let t=this.buffer[e],n=this.buffer[e+3],i=this.set.types[t],r=i.name;if(/\W/.test(r)&&!i.isError&&(r=JSON.stringify(r)),n==(e+=4))return r;let s=[];for(;e<n;)s.push(this.childString(e)),e=this.buffer[e+3];return r+"("+s.join(",")+")"}findChild(e,t,n,i,r){let{buffer:s}=this,o=-1;for(let a=e;a!=t&&!(R$(r,i,s[a+1],s[a+2])&&(o=a,n>0));a=s[a+3]);return o}slice(e,t,n){let i=this.buffer,r=new Uint16Array(t-e),s=0;for(let o=e,a=0;o<t;){r[a++]=i[o++],r[a++]=i[o++]-n;let t=r[a++]=i[o++]-n;r[a++]=i[o++]-e,s=Math.max(s,t)}return new A$(r,s,this.set)}}function R$(e,t,n,i){switch(e){case-2:return n<t;case-1:return i>=t&&n<t;case 0:return n<t&&i>t;case 1:return n<=t&&i>t;case 2:return i>t;case 4:return!0}}function N$(e,t,n,i){for(var r;e.from==e.to||(n<1?e.from>=t:e.from>t)||(n>-1?e.to<=t:e.to<t);){let t=!i&&e instanceof D$&&e.index<0?null:e.parent;if(!t)return e;e=t}let s=i?0:C$.IgnoreOverlays;if(i)for(let o=e,a=o.parent;a;o=a,a=o.parent)o instanceof D$&&o.index<0&&(null===(r=a.enter(t,n,s))||void 0===r?void 0:r.from)!=o.from&&(e=a);for(;;){let i=e.enter(t,n,s);if(!i)return e;e=i}}class I${cursor(){return new z$(this,arguments.length>0&&void 0!==arguments[0]?arguments[0]:0)}getChild(e){let t=M$(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:null);return t.length?t[0]:null}getChildren(e){return M$(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}resolve(e){return N$(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,!1)}resolveInner(e){return N$(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,!0)}matchContext(e){return L$(this,e)}enterUnfinishedNodesBefore(e){let t=this.childBefore(e),n=this;for(;t;){let e=t.lastChild;if(!e||e.to!=t.to)break;e.type.isError&&e.from==e.to?(n=t,t=e.prevSibling):t=e}return n}get node(){return this}get next(){return this.parent}}class D$ extends I${constructor(e,t,n,i){super(),this._tree=e,this.from=t,this.index=n,this._parent=i}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,t,n,i){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;for(let s=this;;){for(let{children:o,positions:a}=s._tree,l=t>0?o.length:-1;e!=l;e+=t){let l=o[e],h=a[e]+s.from;if(R$(i,n,h,h+l.length))if(l instanceof A$){if(r&C$.ExcludeBuffers)continue;let o=l.findChild(0,l.buffer.length,t,n-h,i);if(o>-1)return new U$(new $$(s,l,e,h),null,o)}else if(r&C$.IncludeAnonymous||!l.type.isAnonymous||j$(l)){let o;if(!(r&C$.IgnoreMounts)&&(o=k$.get(l))&&!o.overlay)return new D$(o.tree,h,e,s);let a=new D$(l,h,e,s);return r&C$.IncludeAnonymous||!a.type.isAnonymous?a:a.nextChild(t<0?l.children.length-1:0,t,n,i)}}if(r&C$.IncludeAnonymous||!s.type.isAnonymous)return null;if(e=s.index>=0?s.index+t:t<0?-1:s._parent._tree.children.length,s=s._parent,!s)return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,t){let n,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(!(i&C$.IgnoreOverlays)&&(n=k$.get(this._tree))&&n.overlay){let i=e-this.from;for(let{from:e,to:r}of n.overlay)if((t>0?e<=i:e<i)&&(t<0?r>=i:r>i))return new D$(n.tree,n.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,t,i)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}}function M$(e,t,n,i){let r=e.cursor(),s=[];if(!r.firstChild())return s;if(null!=n)for(let o=!1;!o;)if(o=r.type.is(n),!r.nextSibling())return s;for(;;){if(null!=i&&r.type.is(i))return s;if(r.type.is(t)&&s.push(r.node),!r.nextSibling())return null==i?s:[]}}function L$(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.length-1;for(let i=e.parent;n>=0;i=i.parent){if(!i)return!1;if(!i.type.isAnonymous){if(t[n]&&t[n]!=i.name)return!1;n--}}return!0}class $${constructor(e,t,n,i){this.parent=e,this.buffer=t,this.index=n,this.start=i}}class U$ extends I${get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,t,n){super(),this.context=e,this._parent=t,this.index=n,this.type=e.buffer.set.types[e.buffer.buffer[n]]}child(e,t,n){let{buffer:i}=this.context,r=i.findChild(this.index+4,i.buffer[this.index+3],e,t-this.context.start,n);return r<0?null:new U$(this.context,this,r)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,t){if((arguments.length>2&&void 0!==arguments[2]?arguments[2]:0)&C$.ExcludeBuffers)return null;let{buffer:n}=this.context,i=n.findChild(this.index+4,n.buffer[this.index+3],t>0?1:-1,e-this.context.start,t);return i<0?null:new U$(this.context,this,i)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,t=e.buffer[this.index+3];return t<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new U$(this.context,this._parent,t):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,t=this._parent?this._parent.index+4:0;return this.index==t?this.externalSibling(-1):new U$(this.context,this._parent,e.findChild(t,this.index,-1,0,4))}get tree(){return null}toTree(){let e=[],t=[],{buffer:n}=this.context,i=this.index+4,r=n.buffer[this.index+3];if(r>i){let s=n.buffer[this.index+1];e.push(n.slice(i,r,s)),t.push(0)}return new E$(this.type,e,t,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}}function q$(e){if(!e.length)return null;let t=0,n=e[0];for(let s=1;s<e.length;s++){let i=e[s];(i.from>n.from||i.to<n.to)&&(n=i,t=s)}let i=n instanceof D$&&n.index<0?null:n.parent,r=e.slice();return i?r[t]=i:r.splice(t,1),new V$(r,n)}class V${constructor(e,t){this.heads=e,this.node=t}get next(){return q$(this.heads)}}class z${get name(){return this.type.name}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(this.mode=t,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof D$)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let t=e._parent;t;t=t._parent)this.stack.unshift(t.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return!!e&&(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0)}yieldBuf(e,t){this.index=e;let{start:n,buffer:i}=this.buffer;return this.type=t||i.set.types[i.buffer[e]],this.from=n+i.buffer[e+1],this.to=n+i.buffer[e+2],!0}yield(e){return!!e&&(e instanceof D$?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)))}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,t,n){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,t,n,this.mode));let{buffer:i}=this.buffer,r=i.findChild(this.index+4,i.buffer[this.index+3],e,t-this.buffer.start,n);return!(r<0)&&(this.stack.push(this.index),this.yieldBuf(r))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.mode;return this.buffer?!(n&C$.ExcludeBuffers)&&this.enterChild(1,e,t):this.yield(this._tree.enter(e,t,n))}parent(){if(!this.buffer)return this.yieldNode(this.mode&C$.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&C$.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return!!this._tree._parent&&this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode));let{buffer:t}=this.buffer,n=this.stack.length-1;if(e<0){let e=n<0?0:this.stack[n]+4;if(this.index!=e)return this.yieldBuf(t.findChild(e,this.index,-1,0,4))}else{let e=t.buffer[this.index+3];if(e<(n<0?t.buffer.length:t.buffer[this.stack[n]+3]))return this.yieldBuf(e)}return n<0&&this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode))}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let t,n,{buffer:i}=this;if(i){if(e>0){if(this.index<i.buffer.buffer.length)return!1}else for(let e=0;e<this.index;e++)if(i.buffer.buffer[e+3]<this.index)return!1;({index:t,parent:n}=i)}else({index:t,_parent:n}=this._tree);for(;n;({index:t,_parent:n}=n))if(t>-1)for(let i=t+e,r=e<0?-1:n._tree.children.length;i!=r;i+=e){let e=n._tree.children[i];if(this.mode&C$.IncludeAnonymous||e instanceof A$||!e.type.isAnonymous||j$(e))return!1}return!0}move(e,t){if(t&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.move(1,e)}prev(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.move(-1,e)}moveTo(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;for(;(this.from==this.to||(t<1?this.from>=e:this.from>e)||(t>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,t););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,t=null,n=0;if(e&&e.context==this.buffer)e:for(let i=this.index,r=this.stack.length;r>=0;){for(let s=e;s;s=s._parent)if(s.index==i){if(i==this.index)return s;t=s,n=r+1;break e}i=this.stack[--r]}for(let i=n;i<this.stack.length;i++)t=new U$(this.buffer,t,this.stack[i]);return this.bufferNode=new U$(this.buffer,t,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,t){for(let n=0;;){let i=!1;if(this.type.isAnonymous||!1!==e(this)){if(this.firstChild()){n++;continue}this.type.isAnonymous||(i=!0)}for(;i&&t&&t(this),i=this.type.isAnonymous,!this.nextSibling();){if(!n)return;this.parent(),n--,i=!0}}}matchContext(e){if(!this.buffer)return L$(this.node,e);let{buffer:t}=this.buffer,{types:n}=t.set;for(let i=e.length-1,r=this.stack.length-1;i>=0;r--){if(r<0)return L$(this.node,e,i);let s=n[t.buffer[this.stack[r]]];if(!s.isAnonymous){if(e[i]&&e[i]!=s.name)return!1;i--}}return!0}}function j$(e){return e.children.some((e=>e instanceof A$||!e.type.isAnonymous||j$(e)))}const B$=new WeakMap;function F$(e,t){if(!e.isAnonymous||t instanceof A$||t.type!=e)return 1;let n=B$.get(t);if(null==n){n=1;for(let i of t.children){if(i.type!=e||!(i instanceof E$)){n=1;break}n+=F$(e,i)}B$.set(t,n)}return n}function W$(e,t,n,i,r,s,o,a,l){let h=0;for(let f=i;f<r;f++)h+=F$(e,t[f]);let c=Math.ceil(1.5*h/8),u=[],d=[];return function t(n,i,r,o,a){for(let h=r;h<o;){let r=h,f=i[h],p=F$(e,n[h]);for(h++;h<o;h++){let t=F$(e,n[h]);if(p+t>=c)break;p+=t}if(h==r+1){if(p>c){let e=n[r];t(e.children,e.positions,0,e.children.length,i[r]+a);continue}u.push(n[r])}else{let t=i[h-1]+n[h-1].length-f;u.push(W$(e,n,i,r,h,f,t,null,l))}d.push(f+a-s)}}(t,n,i,r,0),(a||l)(u,d,o)}class X${startParse(e,t,n){return"string"==typeof e&&(e=new Y$(e)),n=n?n.length?n.map((e=>new b$(e.from,e.to))):[new b$(0,0)]:[new b$(0,e.length)],this.createParse(e,t||[],n)}parse(e,t,n){let i=this.startParse(e,t,n);for(;;){let e=i.advance();if(e)return e}}}class Y${constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,t){return this.string.slice(e,t)}}new w$({perNode:!0});class G${constructor(e,t,n,i,r,s,o,a,l){let h=arguments.length>9&&void 0!==arguments[9]?arguments[9]:0,c=arguments.length>10?arguments[10]:void 0;this.p=e,this.stack=t,this.state=n,this.reducePos=i,this.pos=r,this.score=s,this.buffer=o,this.bufferBase=a,this.curContext=l,this.lookAhead=h,this.parent=c}toString(){return"[".concat(this.stack.filter(((e,t)=>t%3==0)).concat(this.state),"]@").concat(this.pos).concat(this.score?"!"+this.score:"")}static start(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=e.parser.context;return new G$(e,[],t,n,n,0,[],0,i?new Z$(i,i.start):null,0,null)}get context(){return this.curContext?this.curContext.context:null}pushState(e,t){this.stack.push(this.state,t,this.bufferBase+this.buffer.length),this.state=e}reduce(e){var t;let n=e>>19,i=65535&e,{parser:r}=this.p;this.reducePos<this.pos-25&&this.setLookAhead(this.pos);let s=r.dynamicPrecedence(i);if(s&&(this.score+=s),0==n)return this.pushState(r.getGoto(this.state,i,!0),this.reducePos),i<r.minRepeatTerm&&this.storeNode(i,this.reducePos,this.reducePos,4,!0),void this.reduceContext(i,this.reducePos);let o=this.stack.length-3*(n-1)-(262144&e?6:0),a=o?this.stack[o-2]:this.p.ranges[0].from,l=this.reducePos-a;l>=2e3&&!(null===(t=this.p.parser.nodeSet.types[i])||void 0===t?void 0:t.isAnonymous)&&(a==this.p.lastBigReductionStart?(this.p.bigReductionCount++,this.p.lastBigReductionSize=l):this.p.lastBigReductionSize<l&&(this.p.bigReductionCount=1,this.p.lastBigReductionStart=a,this.p.lastBigReductionSize=l));let h=o?this.stack[o-1]:0,c=this.bufferBase+this.buffer.length-h;if(i<r.minRepeatTerm||131072&e){let e=r.stateFlag(this.state,1)?this.pos:this.reducePos;this.storeNode(i,a,e,c+4,!0)}if(262144&e)this.state=this.stack[o];else{let e=this.stack[o-3];this.state=r.getGoto(e,i,!0)}for(;this.stack.length>o;)this.stack.pop();this.reduceContext(i,a)}storeNode(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:4,r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(0==e&&(!this.stack.length||this.stack[this.stack.length-1]<this.buffer.length+this.bufferBase)){let e=this,i=this.buffer.length;if(0==i&&e.parent&&(i=e.bufferBase-e.parent.bufferBase,e=e.parent),i>0&&0==e.buffer[i-4]&&e.buffer[i-1]>-1){if(t==n)return;if(e.buffer[i-2]>=t)return void(e.buffer[i-2]=n)}}if(r&&this.pos!=n){let r=this.buffer.length;if(r>0&&0!=this.buffer[r-4])for(;r>0&&this.buffer[r-2]>n;)this.buffer[r]=this.buffer[r-4],this.buffer[r+1]=this.buffer[r-3],this.buffer[r+2]=this.buffer[r-2],this.buffer[r+3]=this.buffer[r-1],r-=4,i>4&&(i-=4);this.buffer[r]=e,this.buffer[r+1]=t,this.buffer[r+2]=n,this.buffer[r+3]=i}else this.buffer.push(e,t,n,i)}shift(e,t,n,i){if(131072&e)this.pushState(65535&e,this.pos);else if(0==(262144&e)){let r=e,{parser:s}=this.p;(i>this.pos||t<=s.maxNode)&&(this.pos=i,s.stateFlag(r,1)||(this.reducePos=i)),this.pushState(r,n),this.shiftContext(t,n),t<=s.maxNode&&this.buffer.push(t,n,i,4)}else this.pos=i,this.shiftContext(t,n),t<=this.p.parser.maxNode&&this.buffer.push(t,n,i,4)}apply(e,t,n,i){65536&e?this.reduce(e):this.shift(e,t,n,i)}useNode(e,t){let n=this.p.reused.length-1;(n<0||this.p.reused[n]!=e)&&(this.p.reused.push(e),n++);let i=this.pos;this.reducePos=this.pos=i+e.length,this.pushState(t,i),this.buffer.push(n,i,this.reducePos,-1),this.curContext&&this.updateContext(this.curContext.tracker.reuse(this.curContext.context,e,this,this.p.stream.reset(this.pos-e.length)))}split(){let e=this,t=e.buffer.length;for(;t>0&&e.buffer[t-2]>e.reducePos;)t-=4;let n=e.buffer.slice(t),i=e.bufferBase+t;for(;e&&i==e.bufferBase;)e=e.parent;return new G$(this.p,this.stack.slice(),this.state,this.reducePos,this.pos,this.score,n,i,this.curContext,this.lookAhead,e)}recoverByDelete(e,t){let n=e<=this.p.parser.maxNode;n&&this.storeNode(e,this.pos,t,4),this.storeNode(0,this.pos,t,n?8:4),this.pos=this.reducePos=t,this.score-=190}canShift(e){for(let t=new H$(this);;){let n=this.p.parser.stateSlot(t.state,4)||this.p.parser.hasAction(t.state,e);if(0==n)return!1;if(0==(65536&n))return!0;t.reduce(n)}}recoverByInsert(e){if(this.stack.length>=300)return[];let t=this.p.parser.nextStates(this.state);if(t.length>8||this.stack.length>=120){let n=[];for(let i,r=0;r<t.length;r+=2)(i=t[r+1])!=this.state&&this.p.parser.hasAction(i,e)&&n.push(t[r],i);if(this.stack.length<120)for(let e=0;n.length<8&&e<t.length;e+=2){let i=t[e+1];n.some(((e,t)=>1&t&&e==i))||n.push(t[e],i)}t=n}let n=[];for(let i=0;i<t.length&&n.length<4;i+=2){let e=t[i+1];if(e==this.state)continue;let r=this.split();r.pushState(e,this.pos),r.storeNode(0,r.pos,r.pos,4,!0),r.shiftContext(t[i],this.pos),r.reducePos=this.pos,r.score-=200,n.push(r)}return n}forceReduce(){let{parser:e}=this.p,t=e.stateSlot(this.state,5);if(0==(65536&t))return!1;if(!e.validAction(this.state,t)){let n=t>>19,i=65535&t,r=this.stack.length-3*n;if(r<0||e.getGoto(this.stack[r],i,!1)<0){let e=this.findForcedReduction();if(null==e)return!1;t=e}this.storeNode(0,this.pos,this.pos,4,!0),this.score-=100}return this.reducePos=this.pos,this.reduce(t),!0}findForcedReduction(){let{parser:e}=this.p,t=[],n=(i,r)=>{if(!t.includes(i))return t.push(i),e.allActions(i,(t=>{if(393216&t);else if(65536&t){let n=(t>>19)-r;if(n>1){let i=65535&t,r=this.stack.length-3*n;if(r>=0&&e.getGoto(this.stack[r],i,!1)>=0)return n<<19|65536|i}}else{let e=n(t,r+1);if(null!=e)return e}}))};return n(this.state,0)}forceAll(){for(;!this.p.parser.stateFlag(this.state,2);)if(!this.forceReduce()){this.storeNode(0,this.pos,this.pos,4,!0);break}return this}get deadEnd(){if(3!=this.stack.length)return!1;let{parser:e}=this.p;return 65535==e.data[e.stateSlot(this.state,1)]&&!e.stateSlot(this.state,4)}restart(){this.storeNode(0,this.pos,this.pos,4,!0),this.state=this.stack[0],this.stack.length=0}sameState(e){if(this.state!=e.state||this.stack.length!=e.stack.length)return!1;for(let t=0;t<this.stack.length;t+=3)if(this.stack[t]!=e.stack[t])return!1;return!0}get parser(){return this.p.parser}dialectEnabled(e){return this.p.parser.dialect.flags[e]}shiftContext(e,t){this.curContext&&this.updateContext(this.curContext.tracker.shift(this.curContext.context,e,this,this.p.stream.reset(t)))}reduceContext(e,t){this.curContext&&this.updateContext(this.curContext.tracker.reduce(this.curContext.context,e,this,this.p.stream.reset(t)))}emitContext(){let e=this.buffer.length-1;(e<0||-3!=this.buffer[e])&&this.buffer.push(this.curContext.hash,this.pos,this.pos,-3)}emitLookAhead(){let e=this.buffer.length-1;(e<0||-4!=this.buffer[e])&&this.buffer.push(this.lookAhead,this.pos,this.pos,-4)}updateContext(e){if(e!=this.curContext.context){let t=new Z$(this.curContext.tracker,e);t.hash!=this.curContext.hash&&this.emitContext(),this.curContext=t}}setLookAhead(e){e>this.lookAhead&&(this.emitLookAhead(),this.lookAhead=e)}close(){this.curContext&&this.curContext.tracker.strict&&this.emitContext(),this.lookAhead>0&&this.emitLookAhead()}}class Z${constructor(e,t){this.tracker=e,this.context=t,this.hash=e.strict?e.hash(t):0}}class H${constructor(e){this.start=e,this.state=e.state,this.stack=e.stack,this.base=this.stack.length}reduce(e){let t=65535&e,n=e>>19;0==n?(this.stack==this.start.stack&&(this.stack=this.stack.slice()),this.stack.push(this.state,0,0),this.base+=3):this.base-=3*(n-1);let i=this.start.p.parser.getGoto(this.stack[this.base-3],t,!0);this.state=i}}class K${constructor(e,t,n){this.stack=e,this.pos=t,this.index=n,this.buffer=e.buffer,0==this.index&&this.maybeNext()}static create(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.bufferBase+e.buffer.length;return new K$(e,t,t-e.bufferBase)}maybeNext(){let e=this.stack.parent;null!=e&&(this.index=this.stack.bufferBase-e.bufferBase,this.stack=e,this.buffer=e.buffer)}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}next(){this.index-=4,this.pos-=4,0==this.index&&this.maybeNext()}fork(){return new K$(this.stack,this.pos,this.index)}}function J$(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Uint16Array;if("string"!=typeof e)return e;let n=null;for(let i=0,r=0;i<e.length;){let s=0;for(;;){let t=e.charCodeAt(i++),n=!1;if(126==t){s=65535;break}t>=92&&t--,t>=34&&t--;let r=t-32;if(r>=46&&(r-=46,n=!0),s+=r,n)break;s*=46}n?n[r++]=s:n=new t(s)}return n}class eU{constructor(){this.start=-1,this.value=-1,this.end=-1,this.extended=-1,this.lookAhead=0,this.mask=0,this.context=0}}const tU=new eU;class nU{constructor(e,t){this.input=e,this.ranges=t,this.chunk="",this.chunkOff=0,this.chunk2="",this.chunk2Pos=0,this.next=-1,this.token=tU,this.rangeIndex=0,this.pos=this.chunkPos=t[0].from,this.range=t[0],this.end=t[t.length-1].to,this.readNext()}resolveOffset(e,t){let n=this.range,i=this.rangeIndex,r=this.pos+e;for(;r<n.from;){if(!i)return null;let e=this.ranges[--i];r-=n.from-e.to,n=e}for(;t<0?r>n.to:r>=n.to;){if(i==this.ranges.length-1)return null;let e=this.ranges[++i];r+=e.from-n.to,n=e}return r}clipPos(e){if(e>=this.range.from&&e<this.range.to)return e;for(let t of this.ranges)if(t.to>e)return Math.max(e,t.from);return this.end}peek(e){let t,n,i=this.chunkOff+e;if(i>=0&&i<this.chunk.length)t=this.pos+e,n=this.chunk.charCodeAt(i);else{let i=this.resolveOffset(e,1);if(null==i)return-1;if(t=i,t>=this.chunk2Pos&&t<this.chunk2Pos+this.chunk2.length)n=this.chunk2.charCodeAt(t-this.chunk2Pos);else{let e=this.rangeIndex,i=this.range;for(;i.to<=t;)i=this.ranges[++e];this.chunk2=this.input.chunk(this.chunk2Pos=t),t+this.chunk2.length>i.to&&(this.chunk2=this.chunk2.slice(0,i.to-t)),n=this.chunk2.charCodeAt(0)}}return t>=this.token.lookAhead&&(this.token.lookAhead=t+1),n}acceptToken(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=t?this.resolveOffset(t,-1):this.pos;if(null==n||n<this.token.start)throw new RangeError("Token end out of bounds");this.token.value=e,this.token.end=n}acceptTokenTo(e,t){this.token.value=e,this.token.end=t}getChunk(){if(this.pos>=this.chunk2Pos&&this.pos<this.chunk2Pos+this.chunk2.length){let{chunk:e,chunkPos:t}=this;this.chunk=this.chunk2,this.chunkPos=this.chunk2Pos,this.chunk2=e,this.chunk2Pos=t,this.chunkOff=this.pos-this.chunkPos}else{this.chunk2=this.chunk,this.chunk2Pos=this.chunkPos;let e=this.input.chunk(this.pos),t=this.pos+e.length;this.chunk=t>this.range.to?e.slice(0,this.range.to-this.pos):e,this.chunkPos=this.pos,this.chunkOff=0}}readNext(){return this.chunkOff>=this.chunk.length&&(this.getChunk(),this.chunkOff==this.chunk.length)?this.next=-1:this.next=this.chunk.charCodeAt(this.chunkOff)}advance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;for(this.chunkOff+=e;this.pos+e>=this.range.to;){if(this.rangeIndex==this.ranges.length-1)return this.setDone();e-=this.range.to-this.pos,this.range=this.ranges[++this.rangeIndex],this.pos=this.range.from}return this.pos+=e,this.pos>=this.token.lookAhead&&(this.token.lookAhead=this.pos+1),this.readNext()}setDone(){return this.pos=this.chunkPos=this.end,this.range=this.ranges[this.rangeIndex=this.ranges.length-1],this.chunk="",this.next=-1}reset(e,t){if(t?(this.token=t,t.start=e,t.lookAhead=e+1,t.value=t.extended=-1):this.token=tU,this.pos!=e){if(this.pos=e,e==this.end)return this.setDone(),this;for(;e<this.range.from;)this.range=this.ranges[--this.rangeIndex];for(;e>=this.range.to;)this.range=this.ranges[++this.rangeIndex];e>=this.chunkPos&&e<this.chunkPos+this.chunk.length?this.chunkOff=e-this.chunkPos:(this.chunk="",this.chunkOff=0),this.readNext()}return this}read(e,t){if(e>=this.chunkPos&&t<=this.chunkPos+this.chunk.length)return this.chunk.slice(e-this.chunkPos,t-this.chunkPos);if(e>=this.chunk2Pos&&t<=this.chunk2Pos+this.chunk2.length)return this.chunk2.slice(e-this.chunk2Pos,t-this.chunk2Pos);if(e>=this.range.from&&t<=this.range.to)return this.input.read(e,t);let n="";for(let i of this.ranges){if(i.from>=t)break;i.to>e&&(n+=this.input.read(Math.max(i.from,e),Math.min(i.to,t)))}return n}}class iU{constructor(e,t){this.data=e,this.id=t}token(e,t){let{parser:n}=t.p;rU(this.data,e,t,this.id,n.data,n.tokenPrecTable)}}iU.prototype.contextual=iU.prototype.fallback=iU.prototype.extend=!1;iU.prototype.fallback=iU.prototype.extend=!1;function rU(e,t,n,i,r,s){let o=0,a=1<<i,{dialect:l}=n.p.parser;e:for(;0!=(a&e[o]);){let n=e[o+1];for(let u=o+3;u<n;u+=2)if((e[u+1]&a)>0){let n=e[u];if(l.allows(n)&&(-1==t.token.value||t.token.value==n||oU(n,t.token.value,r,s))){t.acceptToken(n);break}}let i=t.next,h=0,c=e[o+2];if(!(t.next<0&&c>h&&65535==e[n+3*c-3])){for(;h<c;){let r=h+c>>1,s=n+r+(r<<1),a=e[s],l=e[s+1]||65536;if(i<a)c=r;else{if(!(i>=l)){o=e[s+2],t.advance();continue e}h=r+1}}break}o=e[n+3*c-1]}}function sU(e,t,n){for(let i,r=t;65535!=(i=e[r]);r++)if(i==n)return r-t;return-1}function oU(e,t,n,i){let r=sU(n,i,t);return r<0||sU(n,i,e)<r}const aU="undefined"!=typeof process&&{NODE_ENV:"production",PUBLIC_URL:"/DYA",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}&&/\bparse\b/.test({NODE_ENV:"production",PUBLIC_URL:"/DYA",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.LOG);let lU=null;function hU(e,t,n){let i=e.cursor(C$.IncludeAnonymous);for(i.moveTo(t);;)if(!(n<0?i.childBefore(t):i.childAfter(t)))for(;;){if((n<0?i.to<t:i.from>t)&&!i.type.isError)return n<0?Math.max(0,Math.min(i.to-1,t-25)):Math.min(e.length,Math.max(i.from+1,t+25));if(n<0?i.prevSibling():i.nextSibling())break;if(!i.parent())return n<0?0:e.length}}class cU{constructor(e,t){this.fragments=e,this.nodeSet=t,this.i=0,this.fragment=null,this.safeFrom=-1,this.safeTo=-1,this.trees=[],this.start=[],this.index=[],this.nextFragment()}nextFragment(){let e=this.fragment=this.i==this.fragments.length?null:this.fragments[this.i++];if(e){for(this.safeFrom=e.openStart?hU(e.tree,e.from+e.offset,1)-e.offset:e.from,this.safeTo=e.openEnd?hU(e.tree,e.to+e.offset,-1)-e.offset:e.to;this.trees.length;)this.trees.pop(),this.start.pop(),this.index.pop();this.trees.push(e.tree),this.start.push(-e.offset),this.index.push(0),this.nextStart=this.safeFrom}else this.nextStart=1e9}nodeAt(e){if(e<this.nextStart)return null;for(;this.fragment&&this.safeTo<=e;)this.nextFragment();if(!this.fragment)return null;for(;;){let t=this.trees.length-1;if(t<0)return this.nextFragment(),null;let n=this.trees[t],i=this.index[t];if(i==n.children.length){this.trees.pop(),this.start.pop(),this.index.pop();continue}let r=n.children[i],s=this.start[t]+n.positions[i];if(s>e)return this.nextStart=s,null;if(r instanceof E$){if(s==e){if(s<this.safeFrom)return null;let e=s+r.length;if(e<=this.safeTo){let t=r.prop(w$.lookAhead);if(!t||e+t<this.fragment.to)return r}}this.index[t]++,s+r.length>=Math.max(this.safeFrom,e)&&(this.trees.push(r),this.start.push(s),this.index.push(0))}else this.index[t]++,this.nextStart=s+r.length}}}class uU{constructor(e,t){this.stream=t,this.tokens=[],this.mainToken=null,this.actions=[],this.tokens=e.tokenizers.map((e=>new eU))}getActions(e){let t=0,n=null,{parser:i}=e.p,{tokenizers:r}=i,s=i.stateSlot(e.state,3),o=e.curContext?e.curContext.hash:0,a=0;for(let l=0;l<r.length;l++){if(0==(1<<l&s))continue;let i=r[l],h=this.tokens[l];if((!n||i.fallback)&&((i.contextual||h.start!=e.pos||h.mask!=s||h.context!=o)&&(this.updateCachedToken(h,i,e),h.mask=s,h.context=o),h.lookAhead>h.end+25&&(a=Math.max(h.lookAhead,a)),0!=h.value)){let r=t;if(h.extended>-1&&(t=this.addActions(e,h.extended,h.end,t)),t=this.addActions(e,h.value,h.end,t),!i.extend&&(n=h,t>r))break}}for(;this.actions.length>t;)this.actions.pop();return a&&e.setLookAhead(a),n||e.pos!=this.stream.end||(n=new eU,n.value=e.p.parser.eofTerm,n.start=n.end=e.pos,t=this.addActions(e,n.value,n.end,t)),this.mainToken=n,this.actions}getMainToken(e){if(this.mainToken)return this.mainToken;let t=new eU,{pos:n,p:i}=e;return t.start=n,t.end=Math.min(n+1,i.stream.end),t.value=n==i.stream.end?i.parser.eofTerm:0,t}updateCachedToken(e,t,n){let i=this.stream.clipPos(n.pos);if(t.token(this.stream.reset(i,e),n),e.value>-1){let{parser:t}=n.p;for(let i=0;i<t.specialized.length;i++)if(t.specialized[i]==e.value){let r=t.specializers[i](this.stream.read(e.start,e.end),n);if(r>=0&&n.p.parser.dialect.allows(r>>1)){0==(1&r)?e.value=r>>1:e.extended=r>>1;break}}}else e.value=0,e.end=this.stream.clipPos(i+1)}putAction(e,t,n,i){for(let r=0;r<i;r+=3)if(this.actions[r]==e)return i;return this.actions[i++]=e,this.actions[i++]=t,this.actions[i++]=n,i}addActions(e,t,n,i){let{state:r}=e,{parser:s}=e.p,{data:o}=s;for(let a=0;a<2;a++)for(let e=s.stateSlot(r,a?2:1);;e+=3){if(65535==o[e]){if(1!=o[e+1]){0==i&&2==o[e+1]&&(i=this.putAction(mU(o,e+2),t,n,i));break}e=mU(o,e+2)}o[e]==t&&(i=this.putAction(mU(o,e+1),t,n,i))}return i}}class dU{constructor(e,t,n,i){this.parser=e,this.input=t,this.ranges=i,this.recovering=0,this.nextStackID=9812,this.minStackPos=0,this.reused=[],this.stoppedAt=null,this.lastBigReductionStart=-1,this.lastBigReductionSize=0,this.bigReductionCount=0,this.stream=new nU(t,i),this.tokens=new uU(e,this.stream),this.topTerm=e.top[1];let{from:r}=i[0];this.stacks=[G$.start(this,e.top[0],r)],this.fragments=n.length&&this.stream.end-r>4*e.bufferLength?new cU(n,e.nodeSet):null}get parsedPos(){return this.minStackPos}advance(){let e,t,n=this.stacks,i=this.minStackPos,r=this.stacks=[];if(this.bigReductionCount>300&&1==n.length){let[e]=n;for(;e.forceReduce()&&e.stack.length&&e.stack[e.stack.length-2]>=this.lastBigReductionStart;);this.bigReductionCount=this.lastBigReductionSize=0}for(let s=0;s<n.length;s++){let o=n[s];for(;;){if(this.tokens.mainToken=null,o.pos>i)r.push(o);else{if(this.advanceStack(o,r,n))continue;{e||(e=[],t=[]),e.push(o);let n=this.tokens.getMainToken(o);t.push(n.value,n.end)}}break}}if(!r.length){let t=e&&function(e){let t=null;for(let n of e){let e=n.p.stoppedAt;(n.pos==n.p.stream.end||null!=e&&n.pos>e)&&n.p.parser.stateFlag(n.state,2)&&(!t||t.score<n.score)&&(t=n)}return t}(e);if(t)return aU&&console.log("Finish with "+this.stackID(t)),this.stackToTree(t);if(this.parser.strict)throw aU&&e&&console.log("Stuck with token "+(this.tokens.mainToken?this.parser.getName(this.tokens.mainToken.value):"none")),new SyntaxError("No parse at "+i);this.recovering||(this.recovering=5)}if(this.recovering&&e){let n=null!=this.stoppedAt&&e[0].pos>this.stoppedAt?e[0]:this.runRecovery(e,t,r);if(n)return aU&&console.log("Force-finish "+this.stackID(n)),this.stackToTree(n.forceAll())}if(this.recovering){let e=1==this.recovering?1:3*this.recovering;if(r.length>e)for(r.sort(((e,t)=>t.score-e.score));r.length>e;)r.pop();r.some((e=>e.reducePos>i))&&this.recovering--}else if(r.length>1){e:for(let e=0;e<r.length-1;e++){let t=r[e];for(let n=e+1;n<r.length;n++){let i=r[n];if(t.sameState(i)||t.buffer.length>500&&i.buffer.length>500){if(!((t.score-i.score||t.buffer.length-i.buffer.length)>0)){r.splice(e--,1);continue e}r.splice(n--,1)}}}r.length>12&&r.splice(12,r.length-12)}this.minStackPos=r[0].pos;for(let s=1;s<r.length;s++)r[s].pos<this.minStackPos&&(this.minStackPos=r[s].pos);return null}stopAt(e){if(null!=this.stoppedAt&&this.stoppedAt<e)throw new RangeError("Can't move stoppedAt forward");this.stoppedAt=e}advanceStack(e,t,n){let i=e.pos,{parser:r}=this,s=aU?this.stackID(e)+" -> ":"";if(null!=this.stoppedAt&&i>this.stoppedAt)return e.forceReduce()?e:null;if(this.fragments){let t=e.curContext&&e.curContext.tracker.strict,n=t?e.curContext.hash:0;for(let o=this.fragments.nodeAt(i);o;){let i=this.parser.nodeSet.types[o.type.id]==o.type?r.getGoto(e.state,o.type.id):-1;if(i>-1&&o.length&&(!t||(o.prop(w$.contextHash)||0)==n))return e.useNode(o,i),aU&&console.log(s+this.stackID(e)+" (via reuse of ".concat(r.getName(o.type.id),")")),!0;if(!(o instanceof E$)||0==o.children.length||o.positions[0]>0)break;let a=o.children[0];if(!(a instanceof E$&&0==o.positions[0]))break;o=a}}let o=r.stateSlot(e.state,4);if(o>0)return e.reduce(o),aU&&console.log(s+this.stackID(e)+" (via always-reduce ".concat(r.getName(65535&o),")")),!0;if(e.stack.length>=8400)for(;e.stack.length>6e3&&e.forceReduce(););let a=this.tokens.getActions(e);for(let l=0;l<a.length;){let o=a[l++],h=a[l++],c=a[l++],u=l==a.length||!n,d=u?e:e.split(),f=this.tokens.mainToken;if(d.apply(o,h,f?f.start:d.pos,c),aU&&console.log(s+this.stackID(d)+" (via ".concat(0==(65536&o)?"shift":"reduce of ".concat(r.getName(65535&o))," for ").concat(r.getName(h)," @ ").concat(i).concat(d==e?"":", split",")")),u)return!0;d.pos>i?t.push(d):n.push(d)}return!1}advanceFully(e,t){let n=e.pos;for(;;){if(!this.advanceStack(e,null,null))return!1;if(e.pos>n)return fU(e,t),!0}}runRecovery(e,t,n){let i=null,r=!1;for(let s=0;s<e.length;s++){let o=e[s],a=t[s<<1],l=t[1+(s<<1)],h=aU?this.stackID(o)+" -> ":"";if(o.deadEnd){if(r)continue;if(r=!0,o.restart(),aU&&console.log(h+this.stackID(o)+" (restarted)"),this.advanceFully(o,n))continue}let c=o.split(),u=h;for(let e=0;c.forceReduce()&&e<10;e++){if(aU&&console.log(u+this.stackID(c)+" (via force-reduce)"),this.advanceFully(c,n))break;aU&&(u=this.stackID(c)+" -> ")}for(let e of o.recoverByInsert(a))aU&&console.log(h+this.stackID(e)+" (via recover-insert)"),this.advanceFully(e,n);this.stream.end>o.pos?(l==o.pos&&(l++,a=0),o.recoverByDelete(a,l),aU&&console.log(h+this.stackID(o)+" (via recover-delete ".concat(this.parser.getName(a),")")),fU(o,n)):(!i||i.score<o.score)&&(i=o)}return i}stackToTree(e){return e.close(),E$.build({buffer:K$.create(e),nodeSet:this.parser.nodeSet,topID:this.topTerm,maxBufferLength:this.parser.bufferLength,reused:this.reused,start:this.ranges[0].from,length:e.pos-this.ranges[0].from,minRepeatType:this.parser.minRepeatTerm})}stackID(e){let t=(lU||(lU=new WeakMap)).get(e);return t||lU.set(e,t=String.fromCodePoint(this.nextStackID++)),t+e}}function fU(e,t){for(let n=0;n<t.length;n++){let i=t[n];if(i.pos==e.pos&&i.sameState(e))return void(t[n].score<e.score&&(t[n]=e))}t.push(e)}class pU{constructor(e,t,n){this.source=e,this.flags=t,this.disabled=n}allows(e){return!this.disabled||0==this.disabled[e]}}class gU extends X${constructor(e){if(super(),this.wrappers=[],14!=e.version)throw new RangeError("Parser version (".concat(e.version,") doesn't match runtime version (",14,")"));let t=e.nodeNames.split(" ");this.minRepeatTerm=t.length;for(let o=0;o<e.repeatNodeCount;o++)t.push("");let n=Object.keys(e.topRules).map((t=>e.topRules[t][1])),i=[];for(let o=0;o<t.length;o++)i.push([]);function r(e,t,n){i[e].push([t,t.deserialize(String(n))])}if(e.nodeProps)for(let o of e.nodeProps){let e=o[0];"string"==typeof e&&(e=w$[e]);for(let t=1;t<o.length;){let n=o[t++];if(n>=0)r(n,e,o[t++]);else{let i=o[t+-n];for(let s=-n;s>0;s--)r(o[t++],e,i);t++}}}this.nodeSet=new T$(t.map(((t,r)=>x$.define({name:r>=this.minRepeatTerm?void 0:t,id:r,props:i[r],top:n.indexOf(r)>-1,error:0==r,skipped:e.skippedNodes&&e.skippedNodes.indexOf(r)>-1})))),e.propSources&&(this.nodeSet=this.nodeSet.extend(...e.propSources)),this.strict=!1,this.bufferLength=v$;let s=J$(e.tokenData);this.context=e.context,this.specializerSpecs=e.specialized||[],this.specialized=new Uint16Array(this.specializerSpecs.length);for(let o=0;o<this.specializerSpecs.length;o++)this.specialized[o]=this.specializerSpecs[o].term;this.specializers=this.specializerSpecs.map(OU),this.states=J$(e.states,Uint32Array),this.data=J$(e.stateData),this.goto=J$(e.goto),this.maxTerm=e.maxTerm,this.tokenizers=e.tokenizers.map((e=>"number"==typeof e?new iU(s,e):e)),this.topRules=e.topRules,this.dialects=e.dialects||{},this.dynamicPrecedences=e.dynamicPrecedences||null,this.tokenPrecTable=e.tokenPrec,this.termNames=e.termNames||null,this.maxNode=this.nodeSet.types.length-1,this.dialect=this.parseDialect(),this.top=this.topRules[Object.keys(this.topRules)[0]]}createParse(e,t,n){let i=new dU(this,e,t,n);for(let r of this.wrappers)i=r(i,e,t,n);return i}getGoto(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=this.goto;if(t>=i[0])return-1;for(let r=i[t+1];;){let t=i[r++],s=1&t,o=i[r++];if(s&&n)return o;for(let n=r+(t>>1);r<n;r++)if(i[r]==e)return o;if(s)return-1}}hasAction(e,t){let n=this.data;for(let i=0;i<2;i++)for(let r,s=this.stateSlot(e,i?2:1);;s+=3){if(65535==(r=n[s])){if(1!=n[s+1]){if(2==n[s+1])return mU(n,s+2);break}r=n[s=mU(n,s+2)]}if(r==t||0==r)return mU(n,s+1)}return 0}stateSlot(e,t){return this.states[6*e+t]}stateFlag(e,t){return(this.stateSlot(e,0)&t)>0}validAction(e,t){return!!this.allActions(e,(e=>e==t||null))}allActions(e,t){let n=this.stateSlot(e,4),i=n?t(n):void 0;for(let r=this.stateSlot(e,1);null==i;r+=3){if(65535==this.data[r]){if(1!=this.data[r+1])break;r=mU(this.data,r+2)}i=t(mU(this.data,r+1))}return i}nextStates(e){let t=[];for(let n=this.stateSlot(e,1);;n+=3){if(65535==this.data[n]){if(1!=this.data[n+1])break;n=mU(this.data,n+2)}if(0==(1&this.data[n+2])){let e=this.data[n+1];t.some(((t,n)=>1&n&&t==e))||t.push(this.data[n],e)}}return t}configure(e){let t=Object.assign(Object.create(gU.prototype),this);if(e.props&&(t.nodeSet=this.nodeSet.extend(...e.props)),e.top){let n=this.topRules[e.top];if(!n)throw new RangeError("Invalid top rule name ".concat(e.top));t.top=n}return e.tokenizers&&(t.tokenizers=this.tokenizers.map((t=>{let n=e.tokenizers.find((e=>e.from==t));return n?n.to:t}))),e.specializers&&(t.specializers=this.specializers.slice(),t.specializerSpecs=this.specializerSpecs.map(((n,i)=>{let r=e.specializers.find((e=>e.from==n.external));if(!r)return n;let s=Object.assign(Object.assign({},n),{external:r.to});return t.specializers[i]=OU(s),s}))),e.contextTracker&&(t.context=e.contextTracker),e.dialect&&(t.dialect=this.parseDialect(e.dialect)),null!=e.strict&&(t.strict=e.strict),e.wrap&&(t.wrappers=t.wrappers.concat(e.wrap)),null!=e.bufferLength&&(t.bufferLength=e.bufferLength),t}hasWrappers(){return this.wrappers.length>0}getName(e){return this.termNames?this.termNames[e]:String(e<=this.maxNode&&this.nodeSet.types[e].name||e)}get eofTerm(){return this.maxNode+1}get topNode(){return this.nodeSet.types[this.top[1]]}dynamicPrecedence(e){let t=this.dynamicPrecedences;return null==t?0:t[e]||0}parseDialect(e){let t=Object.keys(this.dialects),n=t.map((()=>!1));if(e)for(let r of e.split(" ")){let e=t.indexOf(r);e>=0&&(n[e]=!0)}let i=null;for(let r=0;r<t.length;r++)if(!n[r])for(let e,n=this.dialects[t[r]];65535!=(e=this.data[n++]);)(i||(i=new Uint8Array(this.maxTerm+1)))[e]=1;return new pU(e,n,i)}static deserialize(e){return new gU(e)}}function mU(e,t){return e[t]|e[t+1]<<16}function OU(e){if(e.external){let t=e.extend?1:0;return(n,i)=>e.external(n,i)<<1|t}return e.get}let vU=0;class yU{constructor(e,t,n){this.set=e,this.base=t,this.modified=n,this.id=vU++}static define(e){if(null===e||void 0===e?void 0:e.base)throw new Error("Can not derive from a modified tag");let t=new yU([],null,[]);if(t.set.push(t),e)for(let n of e.set)t.set.push(n);return t}static defineModifier(){let e=new wU;return t=>t.modified.indexOf(e)>-1?t:wU.get(t.base||t,t.modified.concat(e).sort(((e,t)=>e.id-t.id)))}}let bU=0;class wU{constructor(){this.instances=[],this.id=bU++}static get(e,t){if(!t.length)return e;let n=t[0].instances.find((n=>n.base==e&&function(e,t){return e.length==t.length&&e.every(((e,n)=>e==t[n]))}(t,n.modified)));if(n)return n;let i=[],r=new yU(i,e,t);for(let o of t)o.instances.push(r);let s=function(e){let t=[[]];for(let n=0;n<e.length;n++)for(let i=0,r=t.length;i<r;i++)t.push(t[i].concat(e[n]));return t.sort(((e,t)=>t.length-e.length))}(t);for(let o of e.set)if(!o.modified.length)for(let e of s)i.push(wU.get(o,e));return r}}const kU=new w$;class SU{constructor(e,t,n,i){this.tags=e,this.mode=t,this.context=n,this.next=i}get opaque(){return 0==this.mode}get inherit(){return 1==this.mode}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}SU.empty=new SU([],2,null);const xU=yU.define,TU=xU(),_U=xU(),PU=xU(_U),CU=xU(_U),EU=xU(),QU=xU(EU),AU=xU(EU),RU=xU(),NU=xU(RU),IU=xU(),DU=xU(),MU=xU(),LU=xU(MU),$U=xU(),UU={comment:TU,lineComment:xU(TU),blockComment:xU(TU),docComment:xU(TU),name:_U,variableName:xU(_U),typeName:PU,tagName:xU(PU),propertyName:CU,attributeName:xU(CU),className:xU(_U),labelName:xU(_U),namespace:xU(_U),macroName:xU(_U),literal:EU,string:QU,docString:xU(QU),character:xU(QU),attributeValue:xU(QU),number:AU,integer:xU(AU),float:xU(AU),bool:xU(EU),regexp:xU(EU),escape:xU(EU),color:xU(EU),url:xU(EU),keyword:IU,self:xU(IU),null:xU(IU),atom:xU(IU),unit:xU(IU),modifier:xU(IU),operatorKeyword:xU(IU),controlKeyword:xU(IU),definitionKeyword:xU(IU),moduleKeyword:xU(IU),operator:DU,derefOperator:xU(DU),arithmeticOperator:xU(DU),logicOperator:xU(DU),bitwiseOperator:xU(DU),compareOperator:xU(DU),updateOperator:xU(DU),definitionOperator:xU(DU),typeOperator:xU(DU),controlOperator:xU(DU),punctuation:MU,separator:xU(MU),bracket:LU,angleBracket:xU(LU),squareBracket:xU(LU),paren:xU(LU),brace:xU(LU),content:RU,heading:NU,heading1:xU(NU),heading2:xU(NU),heading3:xU(NU),heading4:xU(NU),heading5:xU(NU),heading6:xU(NU),contentSeparator:xU(RU),list:xU(RU),quote:xU(RU),emphasis:xU(RU),strong:xU(RU),link:xU(RU),monospace:xU(RU),strikethrough:xU(RU),inserted:xU(),deleted:xU(),changed:xU(),invalid:xU(),meta:$U,documentMeta:xU($U),annotation:xU($U),processingInstruction:xU($U),definition:yU.defineModifier(),constant:yU.defineModifier(),function:yU.defineModifier(),standard:yU.defineModifier(),local:yU.defineModifier(),special:yU.defineModifier()},qU=(function(e,t){let n=Object.create(null);for(let s of e)if(Array.isArray(s.tag))for(let e of s.tag)n[e.id]=s.class;else n[s.tag.id]=s.class;let{scope:i,all:r=null}=t||{}}([{tag:UU.link,class:"tok-link"},{tag:UU.heading,class:"tok-heading"},{tag:UU.emphasis,class:"tok-emphasis"},{tag:UU.strong,class:"tok-strong"},{tag:UU.keyword,class:"tok-keyword"},{tag:UU.atom,class:"tok-atom"},{tag:UU.bool,class:"tok-bool"},{tag:UU.url,class:"tok-url"},{tag:UU.labelName,class:"tok-labelName"},{tag:UU.inserted,class:"tok-inserted"},{tag:UU.deleted,class:"tok-deleted"},{tag:UU.literal,class:"tok-literal"},{tag:UU.string,class:"tok-string"},{tag:UU.number,class:"tok-number"},{tag:[UU.regexp,UU.escape,UU.special(UU.string)],class:"tok-string2"},{tag:UU.variableName,class:"tok-variableName"},{tag:UU.local(UU.variableName),class:"tok-variableName tok-local"},{tag:UU.definition(UU.variableName),class:"tok-variableName tok-definition"},{tag:UU.special(UU.variableName),class:"tok-variableName2"},{tag:UU.definition(UU.propertyName),class:"tok-propertyName tok-definition"},{tag:UU.typeName,class:"tok-typeName"},{tag:UU.namespace,class:"tok-namespace"},{tag:UU.className,class:"tok-className"},{tag:UU.macroName,class:"tok-macroName"},{tag:UU.propertyName,class:"tok-propertyName"},{tag:UU.operator,class:"tok-operator"},{tag:UU.comment,class:"tok-comment"},{tag:UU.meta,class:"tok-meta"},{tag:UU.invalid,class:"tok-invalid"},{tag:UU.punctuation,class:"tok-punctuation"}]),function(e){let t=Object.create(null);for(let n in e){let i=e[n];Array.isArray(i)||(i=[i]);for(let e of n.split(" "))if(e){let n=[],r=2,s=e;for(let t=0;;){if("..."==s&&t>0&&t+3==e.length){r=1;break}let i=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(s);if(!i)throw new RangeError("Invalid path: "+e);if(n.push("*"==i[0]?"":'"'==i[0][0]?JSON.parse(i[0]):i[0]),t+=i[0].length,t==e.length)break;let o=e[t++];if(t==e.length&&"!"==o){r=0;break}if("/"!=o)throw new RangeError("Invalid path: "+e);s=e.slice(t)}let o=n.length-1,a=n[o];if(!a)throw new RangeError("Invalid path: "+e);let l=new SU(i,r,o>0?n.slice(0,o):null);t[a]=l.sort(t[a])}}return kU.add(t)}({null:UU.null,instanceof:UU.operatorKeyword,this:UU.self,"new super assert open to with void":UU.keyword,"class interface extends implements enum var":UU.definitionKeyword,"module package import":UU.moduleKeyword,"switch while for if else case default do break continue return try catch finally throw":UU.controlKeyword,"requires exports opens uses provides public private protected static transitive abstract final strictfp synchronized native transient volatile throws":UU.modifier,IntegerLiteral:UU.integer,FloatingPointLiteral:UU.float,"StringLiteral TextBlock":UU.string,CharacterLiteral:UU.character,LineComment:UU.lineComment,BlockComment:UU.blockComment,BooleanLiteral:UU.bool,PrimitiveType:UU.standard(UU.typeName),TypeName:UU.typeName,Identifier:UU.variableName,"MethodName/Identifier":UU.function(UU.variableName),Definition:UU.definition(UU.variableName),ArithOp:UU.arithmeticOperator,LogicOp:UU.logicOperator,BitOp:UU.bitwiseOperator,CompareOp:UU.compareOperator,AssignOp:UU.definitionOperator,UpdateOp:UU.updateOperator,Asterisk:UU.punctuation,Label:UU.labelName,"( )":UU.paren,"[ ]":UU.squareBracket,"{ }":UU.brace,".":UU.derefOperator,", ;":UU.separator})),VU={__proto__:null,true:34,false:34,null:42,void:46,byte:48,short:48,int:48,long:48,char:48,float:48,double:48,boolean:48,extends:62,super:64,class:76,this:78,new:84,public:100,protected:102,private:104,abstract:106,static:108,final:110,strictfp:112,default:114,synchronized:116,native:118,transient:120,volatile:122,throws:150,implements:160,interface:166,enum:176,instanceof:238,open:267,module:269,requires:274,transitive:276,exports:278,to:280,opens:282,uses:284,provides:286,with:288,package:292,import:296,if:308,else:310,while:314,for:318,var:325,assert:332,switch:336,case:342,do:346,break:350,continue:354,return:358,throw:364,try:368,catch:372,finally:380},zU=gU.deserialize({version:14,states:"##jQ]QPOOQ$wQPOOO(bQQO'#H^O*iQQO'#CbOOQO'#Cb'#CbO*pQPO'#CaO*xOSO'#CpOOQO'#Hc'#HcOOQO'#Cu'#CuO,eQPO'#D_O-OQQO'#HmOOQO'#Hm'#HmO/gQQO'#HhO/nQQO'#HhOOQO'#Hh'#HhOOQO'#Hg'#HgO1rQPO'#DUO2PQPO'#GnO4wQPO'#D_O5OQPO'#DzO*pQPO'#E[O5qQPO'#E[OOQO'#DV'#DVO7SQQO'#HaO9^QQO'#EeO9eQPO'#EdO9jQPO'#EfOOQO'#Hb'#HbO7jQQO'#HbO:pQQO'#FhO:wQPO'#ExO:|QPO'#E}O:|QPO'#FPOOQO'#Ha'#HaOOQO'#HY'#HYOOQO'#Gh'#GhOOQO'#HX'#HXO<^QPO'#FiOOQO'#HW'#HWOOQO'#Gg'#GgQ]QPOOOOQO'#Hs'#HsO<cQPO'#HsO<hQPO'#D{O<hQPO'#EVO<hQPO'#EQO<pQPO'#HpO=RQQO'#EfO*pQPO'#C`O=ZQPO'#C`O*pQPO'#FcO=`QPO'#FeO=kQPO'#FkO=kQPO'#FnO<hQPO'#FsO=pQPO'#FpO:|QPO'#FwO=kQPO'#FyO]QPO'#GOO=uQPO'#GQO>QQPO'#GSO>]QPO'#GUO=kQPO'#GWO:|QPO'#GXO>dQPO'#GZO?QQQO'#HiO?mQQO'#CuO?tQPO'#HxO@SQPO'#D_O@rQPO'#DpO?wQPO'#DqO@|QPO'#HxOA_QPO'#DpOAgQPO'#IROAlQPO'#E`OOQO'#Hr'#HrOOQO'#Gm'#GmQ$wQPOOOAtQPO'#HsOOQO'#H^'#H^OCsQQO,58{OOQO'#H['#H[OOOO'#Gi'#GiOEfOSO,59[OOQO,59[,59[OOQO'#Hi'#HiOFVQPO,59eOGXQPO,59yOOQO-E:f-E:fO*pQPO,58zOG{QPO,58zO*pQPO,5;}OHQQPO'#DQOHVQPO'#DQOOQO'#Gk'#GkOIVQQO,59jOOQO'#Dm'#DmOJqQPO'#HuOJ{QPO'#DlOKZQPO'#HtOKcQPO,5<_OKhQPO,59^OLRQPO'#CxOOQO,59c,59cOLYQPO,59bOLeQQO'#H^ONgQQO'#CbO!!iQPO'#D_O!#nQQO'#HmO!$OQQO,59pO!$VQPO'#DvO!$eQPO'#H|O!$mQPO,5:`O!$rQPO,5:`O!%YQPO,5;nO!%eQPO'#ITO!%pQPO,5;eO!%uQPO,5=YOOQO-E:l-E:lOOQO,5:f,5:fO!']QPO,5:fO!'dQPO,5:vO?tQPO,5<_O*pQPO,5:vO<hQPO,5:gO<hQPO,5:qO<hQPO,5:lO<hQPO,5<_O!'zQPO,59qO:|QPO,5:}O!(RQPO,5;QO:|QPO,59TO!(aQPO'#DXOOQO,5;O,5;OOOQO'#El'#ElOOQO'#Eo'#EoO:|QPO,5;UO:|QPO,5;UO:|QPO,5;UO:|QPO,5;UO:|QPO,5;UO:|QPO,5;UO:|QPO,5;UO:|QPO,5;UO:|QPO,5;UO:|QPO,5;fOOQO,5;i,5;iOOQO,5<S,5<SO!(hQPO,5;bO!(yQPO,5;dO!(hQPO'#CyO!)QQQO'#HmO!)`QQO,5;kO]QPO,5<TOOQO-E:e-E:eOOQO,5>_,5>_O!*sQPO,5:gO!+RQPO,5:qO!+ZQPO,5:lO!+fQPO,5>[O!$VQPO,5>[O!'iQPO,59UO!+qQQO,58zO!+yQQO,5;}O!,RQQO,5<PO*pQPO,5<PO:|QPO'#DUO]QPO,5<VO]QPO,5<YO!,ZQPO'#FrO]QPO,5<[O]QPO,5<aO!,kQQO,5<cO!,uQPO,5<eO!,zQPO,5<jOOQO'#Fj'#FjOOQO,5<l,5<lO!-PQPO,5<lOOQO,5<n,5<nO!-UQPO,5<nO!-ZQQO,5<pOOQO,5<p,5<pO>gQPO,5<rO!-bQQO,5<sO!-iQPO'#GdO!.oQPO,5<uO>gQPO,5<}O!2mQPO,59jO!2zQPO'#HuO!3RQPO,59xO!3WQPO,5>dO?tQPO,59xO!3cQPO,5:[OAlQPO,5:zO!3kQPO'#DrO?wQPO'#DrO!3vQPO'#HyO!4OQPO,5:]O?tQPO,5>dO!(hQPO,5>dOAgQPO,5>mOOQO,5:[,5:[O!$rQPO'#DtOOQO,5>m,5>mO!4TQPO'#EaOOQO,5:z,5:zO!7UQPO,5:zO!(hQPO'#DxOOQO-E:k-E:kOOQO,5:y,5:yO*pQPO,58}O!7ZQPO'#ChOOQO1G.k1G.kOOOO-E:g-E:gOOQO1G.v1G.vO!+qQQO1G.fO*pQPO1G.fO!7eQQO1G1iOOQO,59l,59lO!7mQPO,59lOOQO-E:i-E:iO!7rQPO,5>aO!8ZQPO,5:WO<hQPO'#GpO!8bQPO,5>`OOQO1G1y1G1yOOQO1G.x1G.xO!8{QPO'#CyO!9kQPO'#HmO!9uQPO'#CzO!:TQPO'#HlO!:]QPO,59dOOQO1G.|1G.|OLYQPO1G.|O!:sQPO,59eO!;QQQO'#H^O!;cQQO'#CbOOQO,5:b,5:bO<hQPO,5:cOOQO,5:a,5:aO!;tQQO,5:aOOQO1G/[1G/[O!;yQPO,5:bO!<[QPO'#GsO!<oQPO,5>hOOQO1G/z1G/zO!<wQPO'#DvO!=YQPO1G/zO!(hQPO'#GqO!=_QPO1G1YO:|QPO1G1YO<hQPO'#GyO!=gQPO,5>oOOQO1G1P1G1POOQO1G0Q1G0QO!=oQPO'#E]OOQO1G0b1G0bO!>`QPO1G1yO!'dQPO1G0bO!*sQPO1G0RO!+RQPO1G0]O!+ZQPO1G0WOOQO1G/]1G/]O!>eQQO1G.pO9eQPO1G0jO*pQPO1G0jO<pQPO'#HpO!@[QQO1G.pOOQO1G.p1G.pO!@aQQO1G0iOOQO1G0l1G0lO!@hQPO1G0lO!@sQQO1G.oO!AZQQO'#HqO!AhQPO,59sO!BzQQO1G0pO!DfQQO1G0pO!DmQQO1G0pO!FUQQO1G0pO!F]QQO1G0pO!GbQQO1G0pO!I]QQO1G0pO!IdQQO1G0pO!IkQQO1G0pO!IuQQO1G1QO!I|QQO'#HmOOQO1G0|1G0|O!KSQQO1G1OOOQO1G1O1G1OOOQO1G1o1G1oO!KjQPO'#D[O!(hQPO'#D|O!(hQPO'#D}OOQO1G0R1G0RO!KqQPO1G0RO!KvQPO1G0RO!LOQPO1G0RO!LZQPO'#EXOOQO1G0]1G0]O!LnQPO1G0]O!LsQPO'#ETO!(hQPO'#ESOOQO1G0W1G0WO!MmQPO1G0WO!MrQPO1G0WO!MzQPO'#EhO!NRQPO'#EhOOQO'#Gx'#GxO!NZQQO1G0mO# }QQO1G3vO9eQPO1G3vO#$PQPO'#FXOOQO1G.f1G.fOOQO1G1i1G1iO#$WQPO1G1kOOQO1G1k1G1kO#$cQQO1G1kO#$kQPO1G1qOOQO1G1t1G1tO+QQPO'#D_O-OQQO,5<bO#(cQPO,5<bO#(tQPO,5<^O#({QPO,5<^OOQO1G1v1G1vOOQO1G1{1G1{OOQO1G1}1G1}O:|QPO1G1}O#,oQPO'#F{OOQO1G2P1G2PO=kQPO1G2UOOQO1G2W1G2WOOQO1G2Y1G2YOOQO1G2[1G2[OOQO1G2^1G2^OOQO1G2_1G2_O#,vQQO'#H^O#-aQQO'#CbO-OQQO'#HmO#-zQQOOO#.hQQO'#EeO#.VQQO'#HbO!$VQPO'#GeO#.oQPO,5=OOOQO'#HQ'#HQO#.wQPO1G2aO#2uQPO'#G]O>gQPO'#GaOOQO1G2a1G2aO#2zQPO1G2iO#6xQPO,5>gOOQO1G/d1G/dOOQO1G4O1G4OO#7ZQPO1G/dOOQO1G/v1G/vOOQO1G0f1G0fO!7UQPO1G0fOOQO,5:^,5:^O!(hQPO'#DsO#7`QPO,5:^O?wQPO'#GrO#7kQPO,5>eOOQO1G/w1G/wOAgQPO'#H{O#7sQPO1G4OO?tQPO1G4OOOQO1G4X1G4XO!#YQPO'#DvO!!iQPO'#D_OOQO,5:{,5:{O#8OQPO,5:{O#8OQPO,5:{O#8VQQO'#HaO#9hQQO'#HbO#9rQQO'#EbO#9}QPO'#EbO#:VQPO'#IOOOQO,5:d,5:dOOQO1G.i1G.iO#:bQQO'#EeO#:rQQO'#H`O#;SQPO'#FTOOQO'#H`'#H`O#;^QPO'#H`O#;{QPO'#IWO#<TQPO,59SOOQO7+$Q7+$QO!+qQQO7+$QOOQO7+'T7+'TOOQO1G/W1G/WO#<YQPO'#DoO#<dQQO'#HvOOQO'#Hv'#HvOOQO1G/r1G/rOOQO,5=[,5=[OOQO-E:n-E:nO#<tQWO,58{O#<{QPO,59fOOQO,59f,59fO!(hQPO'#HoOKmQPO'#GjO#=ZQPO,5>WOOQO1G/O1G/OOOQO7+$h7+$hOOQO1G/{1G/{O#=cQQO1G/{OOQO1G/}1G/}O#=hQPO1G/{OOQO1G/|1G/|O<hQPO1G/}OOQO,5=_,5=_OOQO-E:q-E:qOOQO7+%f7+%fOOQO,5=],5=]OOQO-E:o-E:oO:|QPO7+&tOOQO7+&t7+&tOOQO,5=e,5=eOOQO-E:w-E:wO#=mQPO'#EUO#={QPO'#EUOOQO'#Gw'#GwO#>dQPO,5:wOOQO,5:w,5:wOOQO7+'e7+'eOOQO7+%|7+%|OOQO7+%m7+%mO!KqQPO7+%mO!KvQPO7+%mO!LOQPO7+%mOOQO7+%w7+%wO!LnQPO7+%wOOQO7+%r7+%rO!MmQPO7+%rO!MrQPO7+%rOOQO7+&U7+&UOOQO'#Ee'#EeO9eQPO7+&UO9eQPO,5>[O#?TQPO7+$[OOQO7+&T7+&TOOQO7+&W7+&WO:|QPO'#GlO#?cQPO,5>]OOQO1G/_1G/_O:|QPO7+&lO#?nQQO,59eO#@tQPO,59vOOQO,59v,59vOOQO,5:h,5:hOOQO'#EP'#EPOOQO,5:i,5:iO#@{QPO'#EYO<hQPO'#EYO#A^QPO'#IPO#AiQPO,5:sO?tQPO'#HxO!(hQPO'#HxO#AqQPO'#DpOOQO'#Gu'#GuO#AxQPO,5:oOOQO,5:o,5:oOOQO,5:n,5:nOOQO,5;S,5;SO#BrQQO,5;SO#ByQPO,5;SOOQO-E:v-E:vOOQO7+&X7+&XOOQO7+)b7+)bO#CQQQO7+)bOOQO'#G|'#G|O#DqQPO,5;sOOQO,5;s,5;sO#DxQPO'#FYO*pQPO'#FYO*pQPO'#FYO*pQPO'#FYO#EWQPO7+'VO#E]QPO7+'VOOQO7+'V7+'VO]QPO7+']O#EhQPO1G1|O?tQPO1G1|O#EvQQO1G1xO!(aQPO1G1xO#E}QPO1G1xO#FUQQO7+'iOOQO'#HP'#HPO#F]QPO,5<gOOQO,5<g,5<gO#FdQPO'#HsO:|QPO'#F|O#FlQPO7+'pO#FqQPO,5=PO?tQPO,5=PO#FvQPO1G2jO#HPQPO1G2jOOQO1G2j1G2jOOQO-E;O-E;OOOQO7+'{7+'{O!<[QPO'#G_O>gQPO,5<wOOQO,5<{,5<{O#HXQPO7+(TOOQO7+(T7+(TO#LVQPO1G4ROOQO7+%O7+%OOOQO7+&Q7+&QO#LhQPO,5:_OOQO1G/x1G/xOOQO,5=^,5=^OOQO-E:p-E:pOOQO7+)j7+)jO#LsQPO7+)jO!:bQPO,5:aOOQO1G0g1G0gO#MOQPO1G0gO#MVQPO,59qO#MkQPO,5:|O9eQPO,5:|O!(hQPO'#GtO#MpQPO,5>jO#M{QPO,59TO#NSQPO'#IVO#N[QPO,5;oO*pQPO'#G{O#NaQPO,5>rOOQO1G.n1G.nOOQO<<Gl<<GlO#NiQPO'#HwO#NqQPO,5:ZOOQO1G/Q1G/QOOQO,5>Z,5>ZOOQO,5=U,5=UOOQO-E:h-E:hO#NvQPO7+%gOOQO7+%g7+%gOOQO7+%i7+%iOOQO<<J`<<J`O$ ^QPO'#H^O$ eQPO'#CbO$ lQPO,5:pO$ qQPO,5:xO#=mQPO,5:pOOQO-E:u-E:uOOQO1G0c1G0cOOQO<<IX<<IXO!KqQPO<<IXO!KvQPO<<IXOOQO<<Ic<<IcOOQO<<I^<<I^O!MmQPO<<I^OOQO<<Ip<<IpO$ vQQO<<GvO9eQPO<<IpO*pQPO<<IpOOQO<<Gv<<GvO$#mQQO,5=WOOQO-E:j-E:jO$#zQQO<<JWOOQO1G/b1G/bOOQO,5:t,5:tO$$bQPO,5:tO$$pQPO,5:tO$%RQPO'#GvO$%iQPO,5>kO$%tQPO'#EZOOQO1G0_1G0_O$%{QPO1G0_O?tQPO,5:pOOQO-E:s-E:sOOQO1G0Z1G0ZOOQO1G0n1G0nO$&QQQO1G0nOOQO<<L|<<L|OOQO-E:z-E:zOOQO1G1_1G1_O$&XQQO,5;tOOQO'#G}'#G}O#DxQPO,5;tOOQO'#IX'#IXO$&aQQO,5;tO$&rQQO,5;tOOQO<<Jq<<JqO$&zQPO<<JqOOQO<<Jw<<JwO:|QPO7+'hO$'PQPO7+'hO!(aQPO7+'dO$'_QPO7+'dO$'dQQO7+'dOOQO<<KT<<KTOOQO-E:}-E:}OOQO1G2R1G2ROOQO,5<h,5<hO$'kQQO,5<hOOQO<<K[<<K[O:|QPO1G2kO$'rQPO1G2kOOQO,5=n,5=nOOQO7+(U7+(UO$'wQPO7+(UOOQO-E;Q-E;QO$)fQWO'#HhO$)QQWO'#HhO$)mQPO'#G`O<hQPO,5<yO!$VQPO,5<yOOQO1G2c1G2cOOQO<<Ko<<KoO$*OQPO1G/yOOQO<<MU<<MUOOQO7+&R7+&RO$*ZQPO1G0jO$*fQQO1G0hOOQO1G0h1G0hO$*nQPO1G0hOOQO,5=`,5=`OOQO-E:r-E:rO$*sQQO1G.oOOQO1G1[1G1[O$*}QPO'#GzO$+[QPO,5>qOOQO1G1Z1G1ZO$+dQPO'#FUOOQO,5=g,5=gOOQO-E:y-E:yO$+iQPO'#GoO$+vQPO,5>cOOQO1G/u1G/uOOQO<<IR<<IROOQO1G0[1G0[O$,OQPO1G0dO$,TQPO1G0[O$,YQPO1G0dOOQOAN>sAN>sO!KqQPOAN>sOOQOAN>xAN>xOOQOAN?[AN?[O9eQPOAN?[OOQO1G0`1G0`O$,_QPO1G0`OOQO,5=b,5=bOOQO-E:t-E:tO$,mQPO,5:uOOQO7+%y7+%yOOQO7+&Y7+&YOOQO1G1`1G1`O$,tQQO1G1`OOQO-E:{-E:{O$,|QQO'#IYO$,wQPO1G1`O$&gQPO1G1`O*pQPO1G1`OOQOAN@]AN@]O$-XQQO<<KSO:|QPO<<KSO$-`QPO<<KOOOQO<<KO<<KOO!(aQPO<<KOOOQO1G2S1G2SO$-eQQO7+(VO:|QPO7+(VOOQO<<Kp<<KpP!-iQPO'#HSO!$VQPO'#HRO$-oQPO,5<zO$-zQPO1G2eO<hQPO1G2eO9eQPO7+&SO$.PQPO7+&SOOQO7+&S7+&SOOQO,5=f,5=fOOQO-E:x-E:xO#M{QPO,5;pOOQO,5=Z,5=ZOOQO-E:m-E:mO$.UQPO7+&OOOQO7+%v7+%vO$.dQPO7+&OOOQOG24_G24_OOQOG24vG24vOOQO7+%z7+%zOOQO7+&z7+&zO*pQPO'#HOO$.iQPO,5>tO$.qQPO7+&zO$.vQQO'#IZOOQOAN@nAN@nO$/RQQOAN@nOOQOAN@jAN@jO$/YQPOAN@jO$/_QQO<<KqO$/iQPO,5=mOOQO-E;P-E;POOQO7+(P7+(PO$/zQPO7+(PO$0PQPO<<InOOQO<<In<<InO$0UQPO<<IjOOQO<<Ij<<IjO#M{QPO<<IjO$0UQPO<<IjO$0dQQO,5=jOOQO-E:|-E:|OOQO<<Jf<<JfO$0oQPO,5>uOOQOG26YG26YOOQOG26UG26UOOQO<<Kk<<KkOOQOAN?YAN?YOOQOAN?UAN?UO#M{QPOAN?UO$0wQPOAN?UO$0|QPOAN?UO$1[QPOG24pOOQOG24pG24pO#M{QPOG24pOOQOLD*[LD*[O$1aQPOLD*[OOQO!$'Mv!$'MvO*pQPO'#CaO$1fQQO'#H^O$1yQQO'#CbO!(hQPO'#Cy",stateData:"$2f~OPOSQOS%yOS~OZ`O_VO`VOaVObVOcVOeVOg^Oh^Op!POv{OwkOz!OO}cO!PvO!SyO!TyO!UyO!VyO!WyO!XyO!YyO!ZzO![!`O!]yO!^yO!_yO!u}O!z|O#fpO#roO#tpO#upO#y!RO#z!QO$W!SO$Y!TO$`!UO$c!VO$e!XO$h!WO$l!YO$n!ZO$s![O$u!]O$w!^O$y!_O$|!aO%O!bO%}TO&PRO&RQO&XUO&tdO~Og^Oh^Ov{O}cO!P!mO!SyO!TyO!UyO!VyO!W!pO!XyO!YyO!ZzO!]yO!^yO!_yO!u}O!z|O%}TO&P!cO&R!dO&_!hO&tdO~OWiXW&QXZ&QXuiXu&QX!P&QX!b&QX#]&QX#_&QX#a&QX#b&QX#d&QX#e&QX#f&QX#g&QX#h&QX#i&QX#k&QX#o&QX#r&QX%}iX&PiX&RiX&^&QX&_iX&_&QX&n&QX&viX&v&QX&x!aX~O#p$^X~P&bOWUXW&]XZUXuUXu&]X!PUX!bUX#]UX#_UX#aUX#bUX#dUX#eUX#fUX#gUX#hUX#iUX#kUX#oUX#rUX%}&]X&P&]X&R&]X&^UX&_UX&_&]X&nUX&vUX&v&]X&x!aX~O#p$^X~P(iO&PSO&R!qO~O&W!vO&Y!tO~Og^Oh^O!SyO!TyO!UyO!VyO!WyO!XyO!YyO!ZzO!]yO!^yO!_yO%}TO&P!wO&RWOg!RXh!RX$h!RX&P!RX&R!RX~O#y!|O#z!{O$W!}Ov!RX!u!RX!z!RX&t!RX~P+QOW#XOu#OO%}TO&P#SO&R#SO&v&aX~OW#[Ou&[X%}&[X&P&[X&R&[X&v&[XY&[Xw&[X&n&[X&q&[XZ&[Xq&[X&^&[X!P&[X#_&[X#a&[X#b&[X#d&[X#e&[X#f&[X#g&[X#h&[X#i&[X#k&[X#o&[X#r&[X}&[X!r&[X#p&[Xs&[X|&[X~O&_#YO~P-dO&_&[X~P-dOZ`O_VO`VOaVObVOcVOeVOg^Oh^Op!POwkOz!OO!SyO!TyO!UyO!VyO!WyO!XyO!YyO!ZzO!]yO!^yO!_yO#fpO#roO#tpO#upO%}TO&XUO~O&P#^O&R#]OY&pP~P/uO%}TOg%bXh%bXv%bX!S%bX!T%bX!U%bX!V%bX!W%bX!X%bX!Y%bX!Z%bX!]%bX!^%bX!_%bX!u%bX!z%bX$h%bX&P%bX&R%bX&t%bX&_%bX~O!SyO!TyO!UyO!VyO!WyO!XyO!YyO!ZzO!]yO!^yO!_yOg!RXh!RXv!RX!u!RX!z!RX&P!RX&R!RX&t!RX&_!RX~O$h!RX~P3gO|#kO~P]Og^Oh^Ov#pO!u#rO!z#qO&P!wO&RWO&t#oO~O$h#sO~P5VOu#uO&v#vO!P&TX#_&TX#a&TX#b&TX#d&TX#e&TX#f&TX#g&TX#h&TX#i&TX#k&TX#o&TX#r&TX&^&TX&_&TX&n&TX~OW#tOY&TX#p&TXs&TXq&TX|&TX~P5xO!b#wO#]#wOW&UXu&UX!P&UX#_&UX#a&UX#b&UX#d&UX#e&UX#f&UX#g&UX#h&UX#i&UX#k&UX#o&UX#r&UX&^&UX&_&UX&n&UX&v&UXY&UX#p&UXs&UXq&UX|&UX~OZ#XX~P7jOZ#xO~O&v#vO~O#_#|O#a#}O#b$OO#d$QO#e$RO#f$SO#g$TO#h$UO#i$UO#k$YO#o$VO#r$WO&^#zO&_#zO&n#{O~O!P$XO~P9oO&x$ZO~OZ`O_VO`VOaVObVOcVOeVOg^Oh^Op!POwkOz!OO#fpO#roO#tpO#upO%}TO&P0qO&R0pO&XUO~O#p$_O~O![$aO~O&P#SO&R#SO~Og^Oh^O&P!wO&RWO&_#YO~OW$gO&v#vO~O#z!{O~O!W$kO&PSO&R!qO~OZ$lO~OZ$oO~O!P$vO&P$uO&R$uO~O!P$xO&P$uO&R$uO~O!P${O~P:|OZ%OO}cO~OW&]Xu&]X%}&]X&P&]X&R&]X&_&]X~OZ!aX~P>lOWiXuiX%}iX&PiX&RiX&_iX~OZ!aX~P?XOu#OO%}TO&P#SO&R#SO~O%}TO~P3gOg^Oh^Ov#pO!u#rO!z#qO&_!hO&t#oO~O&P!cO&R!dO~P@ZOg^Oh^O%}TO&P!cO&R!dO~O}cO!P%aO~OZ%bO~O}%dO!m%gO~O}cOg&gXh&gXv&gX!S&gX!T&gX!U&gX!V&gX!W&gX!X&gX!Y&gX!Z&gX!]&gX!^&gX!_&gX!u&gX!z&gX%}&gX&P&gX&R&gX&_&gX&t&gX~OW%jOZ%kOgTahTa%}Ta&PTa&RTa~OvTa!STa!TTa!UTa!VTa!WTa!XTa!YTa!ZTa!]Ta!^Ta!_Ta!uTa!zTa#yTa#zTa$WTa$hTa&tTa&_TauTaYTaqTa|Ta!PTa~PC[O&W%nO&Y!tO~Ou#OO%}TOqma&^maYma&nma!Pma~O&vma}ma!rma~PEnO!SyO!TyO!UyO!VyO!WyO!XyO!YyO!ZzO!]yO!^yO!_yO~Og!Rah!Rav!Ra!u!Ra!z!Ra$h!Ra&P!Ra&R!Ra&t!Ra&_!Ra~PFdO#z%pO~Os%rO~Ou%sO%}TO~Ou#OO%}ra&Pra&Rra&vraYrawra&nra&qra!Pra&^raqra~OWra#_ra#ara#bra#dra#era#fra#gra#hra#ira#kra#ora#rra&_ra#prasra|ra~PH_Ou#OO%}TOq&iX!P&iX!b&iX~OY&iX#p&iX~PJ`O!b%vOq!`X!P!`XY!`X~Oq%wO!P&hX~O!P%yO~Ov%zO~Og^Oh^O%}0oO&P!wO&RWO&b%}O~O&^&`P~PKmO%}TO&P!wO&RWO~OW&QXYiXY!aXY&QXZ&QXq!aXu&QXwiX!b&QX#]&QX#_&QX#a&QX#b&QX#d&QX#e&QX#f&QX#g&QX#h&QX#i&QX#k&QX#o&QX#r&QX&^&QX&_&QX&niX&n&QX&qiX&viX&v&QX&x!aX~P?XOWUXYUXY!aXY&]XZUXq!aXuUXw&]X!bUX#]UX#_UX#aUX#bUX#dUX#eUX#fUX#gUX#hUX#iUX#kUX#oUX#rUX&^UX&_UX&nUX&n&]X&q&]X&vUX&v&]X&x!aX~P>lOg^Oh^O%}TO&P!wO&RWOg!RXh!RX&P!RX&R!RX~PFdOu#OOw&XO%}TO&P&UO&R&TO&q&WO~OW#XOY&aX&n&aX&v&aX~P!#YOY&ZO~P9oOg^Oh^O&P!wO&RWO~Oq&]OY&pX~OY&_O~Og^Oh^O%}TO&P!wO&RWOY&pP~PFdOY&dO&n&bO&v#vO~Oq&eO&x$ZOY&wX~OY&gO~O%}TOg%bah%bav%ba!S%ba!T%ba!U%ba!V%ba!W%ba!X%ba!Y%ba!Z%ba!]%ba!^%ba!_%ba!u%ba!z%ba$h%ba&P%ba&R%ba&t%ba&_%ba~O|&hO~P]O}&iO~Op&uOw&vO&PSO&R!qO&_#YO~Oz&tO~P!'iOz&xO&PSO&R!qO&_#YO~OY&eP~P:|Og^Oh^O%}TO&P!wO&RWO~O}cO~P:|OW#XOu#OO%}TO&v&aX~O#r$WO!P#sa#_#sa#a#sa#b#sa#d#sa#e#sa#f#sa#g#sa#h#sa#i#sa#k#sa#o#sa&^#sa&_#sa&n#saY#sa#p#sas#saq#sa|#sa~Oo'_O}'^O!r'`O&_!hO~O}'eO!r'`O~Oo'iO}'hO&_!hO~OZ#xOu'mO%}TO~OW%jO}'sO~OW%jO!P'uO~OW'vO!P'wO~O$h!WO&P0qO&R0pO!P&eP~P/uO!P(SO#p(TO~P9oO}(UO~O$c(WO~O!P(XO~O!P(YO~O!P(ZO~P9oO!P(]O~P9oOZ$lO_VO`VOaVObVOcVOeVOg^Oh^Op!POwkOz!OO%}TO&P(_O&R(^O&XUO~PFdO%Q(hO%U(iOZ$}a_$}a`$}aa$}ab$}ac$}ae$}ag$}ah$}ap$}av$}aw$}az$}a}$}a!P$}a!S$}a!T$}a!U$}a!V$}a!W$}a!X$}a!Y$}a!Z$}a![$}a!]$}a!^$}a!_$}a!u$}a!z$}a#f$}a#r$}a#t$}a#u$}a#y$}a#z$}a$W$}a$Y$}a$`$}a$c$}a$e$}a$h$}a$l$}a$n$}a$s$}a$u$}a$w$}a$y$}a$|$}a%O$}a%w$}a%}$}a&P$}a&R$}a&X$}a&t$}a|$}a$a$}a$q$}a~O}ra!rra'Ora~PH_OZ%bO~PJ`O!P(mO~O!m%gO}&la!P&la~O}cO!P(pO~Oo(tOq!fX&^!fX~Oq(vO&^&mX~O&^(xO~OZ`O_VO`VOaVObVOcVOeVOg^Oh^Op)UOv{Ow)TOz!OO|)PO}cO!PvO![!`O!u}O!z|O#fpO#roO#tpO#upO#y!RO#z!QO$W!SO$Y!TO$`!UO$c!VO$e!XO$h!WO$l!YO$n!ZO$s![O$u!]O$w!^O$y!_O$|!aO%O!bO%}TO&PRO&RQO&XUO&_#YO&tdO~PFdO}%dO~O})]OY&zP~P:|OW%jO!P)dO~Os)eO~Ou#OO%}TOq&ia!P&ia!b&iaY&ia#p&ia~O})fO~P:|Oq%wO!P&ha~Og^Oh^O%}0oO&P!wO&RWO~O&b)mO~P!8jOu#OO%}TOq&aX&^&aXY&aX&n&aX!P&aX~O}&aX!r&aX~P!9SOo)oOp)oOqnX&^nX~Oq)pO&^&`X~O&^)rO~Ou#OOw)tO%}TO&PSO&R!qO~OYma&nma&vma~P!:bOW&QXY!aXq!aXu!aX%}!aX~OWUXY!aXq!aXu!aX%}!aX~OW)wO~Ou#OO%}TO&P#SO&R#SO&q)yO~Og^Oh^O%}TO&P!wO&RWO~PFdOq&]OY&pa~Ou#OO%}TO&P#SO&R#SO&q&WO~OY)|O~OY*PO&n&bO~Oq&eOY&wa~Og^Oh^Ov{O|*XO!u}O%}TO&P!wO&RWO&tdO~PFdO!P*YO~OW^iZ#XXu^i!P^i!b^i#]^i#_^i#a^i#b^i#d^i#e^i#f^i#g^i#h^i#i^i#k^i#o^i#r^i&^^i&_^i&n^i&v^iY^i#p^is^iq^i|^i~OW*iO~Os*jO~P9oOz*kO&PSO&R!qO~O!P]iY]i#p]is]iq]i|]i~P9oOq*lOY&eX!P&eX~P9oOY*nO~O#f$SO#g$TO#k$YO#r$WO!P#^i#_#^i#a#^i#b#^i#d#^i#e#^i#o#^i&^#^i&_#^i&n#^iY#^i#p#^is#^iq#^i|#^i~O#h$UO#i$UO~P!AmO#_#|O#d$QO#e$RO#f$SO#g$TO#h$UO#i$UO#k$YO#r$WO&^#zO&_#zO&n#{O!P#^i#b#^i#o#^iY#^i#p#^is#^iq#^i|#^i~O#a#^i~P!CUO#a#}O~P!CUO#_#|O#f$SO#g$TO#h$UO#i$UO#k$YO#r$WO&^#zO&_#zO!P#^i#a#^i#b#^i#d#^i#e#^i#o#^iY#^i#p#^is#^iq#^i|#^i~O&n#^i~P!DtO&n#{O~P!DtO#f$SO#g$TO#k$YO#r$WO!P#^i#a#^i#b#^i#e#^i#o#^iY#^i#p#^is#^iq#^i|#^i~O#_#|O#d$QO#h$UO#i$UO&^#zO&_#zO&n#{O~P!FdO#k$YO#r$WO!P#^i#_#^i#a#^i#b#^i#d#^i#e#^i#f#^i#h#^i#i#^i#o#^i&^#^i&_#^i&n#^iY#^i#p#^is#^iq#^i|#^i~O#g$TO~P!G{O#g#^i~P!G{O#h#^i#i#^i~P!AmO#p*oO~P9oO#_&aX#a&aX#b&aX#d&aX#e&aX#f&aX#g&aX#h&aX#i&aX#k&aX#o&aX#r&aX&_&aX#p&aXs&aX|&aX~P!9SO!P#liY#li#p#lis#liq#li|#li~P9oO|*rO~P$wO}'^O~O}'^O!r'`O~Oo'_O}'^O!r'`O~O%}TO&P#SO&R#SO|&sP!P&sP~PFdO}'eO~Og^Oh^Ov{O|+PO!P*}O!u}O!z|O%}TO&P!wO&RWO&_!hO&tdO~PFdO}'hO~Oo'iO}'hO~Os+RO~P:|Ou+TO%}TO~Ou'mO})fO%}TOW#Zi!P#Zi#_#Zi#a#Zi#b#Zi#d#Zi#e#Zi#f#Zi#g#Zi#h#Zi#i#Zi#k#Zi#o#Zi#r#Zi&^#Zi&_#Zi&n#Zi&v#ZiY#Zi#p#Zis#Ziq#Zi|#Zi~O}'^OW&diu&di!P&di#_&di#a&di#b&di#d&di#e&di#f&di#g&di#h&di#i&di#k&di#o&di#r&di&^&di&_&di&n&di&v&diY&di#p&dis&diq&di|&di~O#}+]O$P+^O$R+^O$S+_O$T+`O~O|+[O~P##nO$Z+aO&PSO&R!qO~OW+bO!P+cO~O$a+dOZ$_i_$_i`$_ia$_ib$_ic$_ie$_ig$_ih$_ip$_iv$_iw$_iz$_i}$_i!P$_i!S$_i!T$_i!U$_i!V$_i!W$_i!X$_i!Y$_i!Z$_i![$_i!]$_i!^$_i!_$_i!u$_i!z$_i#f$_i#r$_i#t$_i#u$_i#y$_i#z$_i$W$_i$Y$_i$`$_i$c$_i$e$_i$h$_i$l$_i$n$_i$s$_i$u$_i$w$_i$y$_i$|$_i%O$_i%w$_i%}$_i&P$_i&R$_i&X$_i&t$_i|$_i$q$_i~Og^Oh^O$h#sO&P!wO&RWO~O!P+hO~P:|O!P+iO~OZ`O_VO`VOaVObVOcVOeVOg^Oh^Op!POv{OwkOz!OO}cO!PvO!SyO!TyO!UyO!VyO!WyO!XyO!YyO!Z+nO![!`O!]yO!^yO!_yO!u}O!z|O#fpO#roO#tpO#upO#y!RO#z!QO$W!SO$Y!TO$`!UO$c!VO$e!XO$h!WO$l!YO$n!ZO$q+oO$s![O$u!]O$w!^O$y!_O$|!aO%O!bO%}TO&PRO&RQO&XUO&tdO~O|+mO~P#)QOW&QXY&QXZ&QXu&QX!P&QX&viX&v&QX~P?XOWUXYUXZUXuUX!PUX&vUX&v&]X~P>lOW#tOu#uO&v#vO~OW&UXY%XXu&UX!P%XX&v&UX~OZ#XX~P#.VOY+uO!P+sO~O%Q(hO%U(iOZ$}i_$}i`$}ia$}ib$}ic$}ie$}ig$}ih$}ip$}iv$}iw$}iz$}i}$}i!P$}i!S$}i!T$}i!U$}i!V$}i!W$}i!X$}i!Y$}i!Z$}i![$}i!]$}i!^$}i!_$}i!u$}i!z$}i#f$}i#r$}i#t$}i#u$}i#y$}i#z$}i$W$}i$Y$}i$`$}i$c$}i$e$}i$h$}i$l$}i$n$}i$s$}i$u$}i$w$}i$y$}i$|$}i%O$}i%w$}i%}$}i&P$}i&R$}i&X$}i&t$}i|$}i$a$}i$q$}i~OZ+xO~O%Q(hO%U(iOZ%Vi_%Vi`%Via%Vib%Vic%Vie%Vig%Vih%Vip%Viv%Viw%Viz%Vi}%Vi!P%Vi!S%Vi!T%Vi!U%Vi!V%Vi!W%Vi!X%Vi!Y%Vi!Z%Vi![%Vi!]%Vi!^%Vi!_%Vi!u%Vi!z%Vi#f%Vi#r%Vi#t%Vi#u%Vi#y%Vi#z%Vi$W%Vi$Y%Vi$`%Vi$c%Vi$e%Vi$h%Vi$l%Vi$n%Vi$s%Vi$u%Vi$w%Vi$y%Vi$|%Vi%O%Vi%w%Vi%}%Vi&P%Vi&R%Vi&X%Vi&t%Vi|%Vi$a%Vi$q%Vi~Ou#OO%}TO}&oa!P&oa!m&oa~O!P,OO~Oo(tOq!fa&^!fa~Oq(vO&^&ma~O!m%gO}&li!P&li~O|,XO~P]OW,ZO~P5xOW&UXu&UX#_&UX#a&UX#b&UX#d&UX#e&UX#f&UX#g&UX#h&UX#i&UX#k&UX#o&UX#r&UX&^&UX&_&UX&n&UX&v&UX~OZ#xO!P&UX~P#8^OW$gOZ#xO&v#vO~Op,]Ow,]O~Oq,^O}&rX!P&rX~O!b,`O#]#wOY&UXZ#XX~P#8^OY&SXq&SX|&SX!P&SX~P9oO})]O|&yP~P:|OY&SXg%[Xh%[X%}%[X&P%[X&R%[Xq&SX|&SX!P&SX~Oq,cOY&zX~OY,eO~O})fO|&kP~P:|Oq&jX!P&jX|&jXY&jX~P9oO&bTa~PC[Oo)oOp)oOqna&^na~Oq)pO&^&`a~OW,mO~Ow,nO~Ou#OO%}TO&P,rO&R,qO~Og^Oh^Ov#pO!u#rO&P!wO&RWO&t#oO~Og^Oh^Ov{O|,wO!u}O%}TO&P!wO&RWO&tdO~PFdOw-SO&PSO&R!qO&_#YO~Oq*lOY&ea!P&ea~O#_ma#ama#bma#dma#ema#fma#gma#hma#ima#kma#oma#rma&_ma#pmasma|ma~PEnO|-WO~P$wOZ#xO}'^Oq!|X|!|X!P!|X~Oq-[O|&sX!P&sX~O|-_O!P-^O~O&_!hO~P5VOg^Oh^Ov{O|-cO!P*}O!u}O!z|O%}TO&P!wO&RWO&_!hO&tdO~PFdOs-dO~P9oOs-dO~P:|O}'^OW&dqu&dq!P&dq#_&dq#a&dq#b&dq#d&dq#e&dq#f&dq#g&dq#h&dq#i&dq#k&dq#o&dq#r&dq&^&dq&_&dq&n&dq&v&dqY&dq#p&dqs&dqq&dq|&dq~O|-hO~P##nO!W-lO$O-lO&PSO&R!qO~O!P-oO~O$Z-pO&PSO&R!qO~O!b%vO#p-rOq!`X!P!`X~O!P-tO~P9oO!P-tO~P:|O!P-wO~P9oO|-yO~P#)QO![$aO#p-zO~O!P-|O~O!b-}O~OY.QOZ$lO_VO`VOaVObVOcVOeVOg^Oh^Op!POwkOz!OO%}TO&P(_O&R(^O&XUO~PFdOY.QO!P.RO~O%Q(hO%U(iOZ%Vq_%Vq`%Vqa%Vqb%Vqc%Vqe%Vqg%Vqh%Vqp%Vqv%Vqw%Vqz%Vq}%Vq!P%Vq!S%Vq!T%Vq!U%Vq!V%Vq!W%Vq!X%Vq!Y%Vq!Z%Vq![%Vq!]%Vq!^%Vq!_%Vq!u%Vq!z%Vq#f%Vq#r%Vq#t%Vq#u%Vq#y%Vq#z%Vq$W%Vq$Y%Vq$`%Vq$c%Vq$e%Vq$h%Vq$l%Vq$n%Vq$s%Vq$u%Vq$w%Vq$y%Vq$|%Vq%O%Vq%w%Vq%}%Vq&P%Vq&R%Vq&X%Vq&t%Vq|%Vq$a%Vq$q%Vq~Ou#OO%}TO}&oi!P&oi!m&oi~O&n&bOq!ga&^!ga~O!m%gO}&lq!P&lq~O|.^O~P]Op.`Ow&vOz&tO&PSO&R!qO&_#YO~O!P.aO~Oq,^O}&ra!P&ra~O})]O~P:|Oq.gO|&yX~O|.iO~Oq,cOY&za~Oq.mO|&kX~O|.oO~Ow.pO~Oq!aXu!aX!P!aX!b!aX%}!aX~OZ&QX~P#N{OZUX~P#N{O!P.qO~OZ.rO~OW^yZ#XXu^y!P^y!b^y#]^y#_^y#a^y#b^y#d^y#e^y#f^y#g^y#h^y#i^y#k^y#o^y#r^y&^^y&_^y&n^y&v^yY^y#p^ys^yq^y|^y~OY%`aq%`a!P%`a~P9oO!P#nyY#ny#p#nys#nyq#ny|#ny~P9oO}'^Oq!|a|!|a!P!|a~OZ#xO}'^Oq!|a|!|a!P!|a~O%}TO&P#SO&R#SOq%jX|%jX!P%jX~PFdOq-[O|&sa!P&sa~O|!}X~P$wO|/PO~Os/QO~P9oOW%jO!P/RO~OW%jO$Q/WO&PSO&R!qO!P&|P~OW%jO$U/XO~O!P/YO~O!b%vO#p/[Oq!`X!P!`X~OY/^O~O!P/_O~P9oO#p/`O~P9oO!b/bO~OY/cOZ$lO_VO`VOaVObVOcVOeVOg^Oh^Op!POwkOz!OO%}TO&P(_O&R(^O&XUO~PFdOW#[Ou&[X%}&[X&P&[X&R&[X'O&[X~O&_#YO~P$)QOu#OO%}TO'O/eO&P%SX&R%SX~O&n&bOq!gi&^!gi~Op/iO&PSO&R!qO~OW*iOZ#xO~O!P/kO~OY&SXq&SX~P9oO})]Oq%nX|%nX~P:|Oq.gO|&ya~O!b/nO~O})fOq%cX|%cX~P:|Oq.mO|&ka~OY/qO~O!P/rO~OZ/sO~O}'^Oq!|i|!|i!P!|i~O|!}a~P$wOW%jO!P/wO~OW%jOq/xO!P&|X~OY/|O~P9oOY0OO~OY%Xq!P%Xq~P9oO'O/eO&P%Sa&R%Sa~OY0TO~O!P0WO~Ou#OO!P0YO!Z0ZO%}TO~OY0[O~Oq/xO!P&|a~O!P0_O~OW%jOq/xO!P&}X~OY0aO~P9oOY0bO~OY%Xy!P%Xy~P9oOu#OO%}TO&P%ua&R%ua'O%ua~OY0cO~O!P0dO~Ou#OO!P0eO!Z0fO%}TO~OW%jOq%ra!P%ra~Oq/xO!P&}a~O!P0jO~Ou#OO!P0jO!Z0kO%}TO~O!P0lO~O!P0nO~O#p&QXY&QXs&QXq&QX|&QX~P&bO#pUXYUXsUXqUX|UX~P(iO`Q_P#g&Xc~",goto:"#+S'OPPPP'P'd*x.OP'dPP.d.h0PPPPPP1nP3ZPP4v7l:[<z=d?[PPP?bPA{PPPBu3ZPDqPPElPFcFkPPPPPPPPPPPPGvH_PKjKrLOLjLpLvNiNmNmNuP! U!!^!#R!#]P!#r!!^P!#x!$S!!y!$cP!%S!%^!%d!!^!%g!%mFcFc!%q!%{!&O3Z!'m3Z3Z!)iP.hP!)mPP!*_PPPPPP.hP.h!+O.hPP.hP.hPP.h!,g!,qPP!,w!-QPPPPPPPP'PP'PPP!-U!-U!-i!-UPP!-UP!-UP!.S!.VP!-U!.m!-UP!-UP!.p!.sP!-UP!-UP!-UP!-UP!-U!-UP!-UP!.wP!.}!/Q!/WP!-U!/d!/gP!/o!0R!4T!4Z!4a!5g!5m!5{!7R!7X!7_!7i!7o!7u!7{!8R!8X!8_!8e!8k!8q!8w!8}!9T!9_!9e!9o!9uPPP!9{!-U!:pP!>WP!?[P!Ap!BW!E]3ZPPP!F|!Jm!MaPP#!P#!SP#$`#$f#&V#&f#&n#'p#(Y#)T#)^#)a#)oP#)r#*OP#*V#*^P#*aP#*lP#*o#*r#*u#*y#+PstOcx![#l$_$m$n$p$q%d(U)Q)R+d+l,Y'urOPXY`acopx!Y![!_!a!e!f!h!i!o!x#P#T#Y#[#_#`#e#i#l#n#u#w#x#|#}$O$P$Q$R$S$T$U$V$Y$Z$[$]$_$e$l$m$n$o$p$q%O%S%V%Z%^%_%b%d%g%k%u%v%{%|&R&S&[&]&`&b&d&i'X'^'_'`'e'h'i'm'n'p'{'|(O(T(U(`(l(t(v({(})O)Q)R)])f)o)p*P*T*W*l*o*p*q*z*{+O+T+d+f+h+i+l+o+r+s+x+},W,Y,^,`,u-[-^-a-r-t-}.R.V.g.m/O/[/_/b/d/n/q0R0X0Z0[0f0h0k0r#xhO`copx!Y![!_!a#l#u#w#x#|#}$O$P$Q$R$S$T$U$V$Z$_$l$m$n$o$p$q%d%v&d'm(O(T(U)Q)R)])f*P*l*o+T+d+h+i+l+o,Y,`-r-t-}.g.m/[/_/b/n0Z0f0kt!sT!Q!S!T!{!}$k%p+]+^+_+`-k-m/W/X/x0oQ#mdS&Y#`(}Q&l#oU&q#t$g,ZQ&x#vW(b%O+s.R/dU)Y%j'v+bQ)Z%kS)u&S,WU*f&s-R._Q*k&yQ,t*TQ-P*iQ.j,cR.t,uu!sT!Q!S!T!{!}$k%p+]+^+_+`-k-m/W/X/x0oT%l!r)l#{qO`copx!Y![!_!a#l#u#w#x#|#}$O$P$Q$R$S$T$U$V$Z$_$l$m$n$o$p$q%d%k%v&d'm(O(T(U)Q)R)])f*P*l*o+T+d+h+i+l+o,Y,`-r-t-}.g.m/[/_/b/n0Z0f0k#zlO`copx!Y![!_!a#l#u#w#x#|#}$O$P$Q$R$S$T$U$V$Z$_$l$m$n$o$p$q%d%k%v&d'm(O(T(U)Q)R)])f*P*l*o+T+d+h+i+l+o,Y,`-r-t-}.g.m/[/_/b/n0Z0f0kX(c%O+s.R/d$TVO`copx!Y![!_!a#l#u#w#x#|#}$O$P$Q$R$S$T$U$V$Z$_$l$m$n$o$p$q%O%d%k%v&d'm(O(T(U)Q)R)])f*P*l*o+T+d+h+i+l+o+s,Y,`-r-t-}.R.g.m/[/_/b/d/n0Z0f0k$TkO`copx!Y![!_!a#l#u#w#x#|#}$O$P$Q$R$S$T$U$V$Z$_$l$m$n$o$p$q%O%d%k%v&d'm(O(T(U)Q)R)])f*P*l*o+T+d+h+i+l+o+s,Y,`-r-t-}.R.g.m/[/_/b/d/n0Z0f0k&O[OPX`ceopx!O!Y![!_!a!g!i!o#Y#_#b#e#l#u#w#x#|#}$O$P$Q$R$S$T$U$V$Y$Z$[$_$f$l$m$n$o$p$q%O%_%b%d%g%k%v%{&]&b&d&i&t'^'_'`'h'i'm'{'}(O(T(U(d(t)O)Q)R)])f)o)p*P*U*W*l*o*q*{*|+O+T+d+h+i+l+o+s,Y,^,`-^-r-t-}.R.g.m/O/[/_/b/d/n0Z0f0k0rQ&Q#[Q)s&RV.T+x.X/e&O[OPX`ceopx!O!Y![!_!a!g!i!o#Y#_#b#e#l#u#w#x#|#}$O$P$Q$R$S$T$U$V$Y$Z$[$_$f$l$m$n$o$p$q%O%_%b%d%g%k%v%{&]&b&d&i&t'^'_'`'h'i'm'{'}(O(T(U(d(t)O)Q)R)])f)o)p*P*U*W*l*o*q*{*|+O+T+d+h+i+l+o+s,Y,^,`-^-r-t-}.R.g.m/O/[/_/b/d/n0Z0f0k0rV.T+x.X/e&O]OPX`ceopx!O!Y![!_!a!g!i!o#Y#_#b#e#l#u#w#x#|#}$O$P$Q$R$S$T$U$V$Y$Z$[$_$f$l$m$n$o$p$q%O%_%b%d%g%k%v%{&]&b&d&i&t'^'_'`'h'i'm'{'}(O(T(U(d(t)O)Q)R)])f)o)p*P*U*W*l*o*q*{*|+O+T+d+h+i+l+o+s,Y,^,`-^-r-t-}.R.g.m/O/[/_/b/d/n0Z0f0k0rV.U+x.X/eS#Z[.TS$f!O&tS&s#t$gQ&y#vQ)V%dQ-R*iR._,Z$kZO`copx!Y![!_!a#Y#l#u#w#x#|#}$O$P$Q$R$S$T$U$V$Y$Z$_$l$m$n$o$p$q%O%d%g%k%v&b&d'_'`'i'm(O(T(U(t)Q)R)])f)o)p*P*l*o+T+d+h+i+l+o+s,Y,^,`-r-t-}.R.g.m/[/_/b/d/n0Z0f0kQ&O#YR,k)p&P_OPX`ceopx!Y![!_!a!g!i!o#Y#_#b#e#l#u#w#x#|#}$O$P$Q$R$S$T$U$V$Y$Z$[$_$l$m$n$o$p$q%O%_%b%d%g%k%v%{&]&b&d&i'^'_'`'h'i'm'{'}(O(T(U(d(t)O)Q)R)])f)o)p*P*U*W*l*o*q*{*|+O+T+d+h+i+l+o+s+x,Y,^,`-^-r-t-}.R.X.g.m/O/[/_/b/d/e/n0Z0f0k0r!o#QY!e!x#R#T#`#n$]%R%S%V%^%u%|&S&[&`'X'|(`(l({(}*T*p*z+f+r+},W,u-a.V/q0R0X0[0h$SkO`copx!Y![!_!a#l#u#w#x#|#}$O$P$Q$R$S$T$U$V$Z$_$l$m$n$o$p$q%O%d%k%v&d'm(O(T(U)Q)R)])f*P*l*o+T+d+h+i+l+o+s,Y,`-r-t-}.R.g.m/[/_/b/d/n0Z0f0kQ$m!UQ$n!VQ$s!ZQ$|!`R+p(WQ#yiS'q$e*hQ*e&rQ+X'rS,[)T)UQ-O*gQ-Y*vQ.b,]Q.x-QQ.{-ZQ/j.`Q/u.yR0V/iQ'a$bW*[&m'b'c'dQ+W'qU,x*]*^*_Q-X*vQ-f+XS.u,y,zS.z-Y-ZQ/t.vR/v.{]!mP!o'^*q-^/OreOcx![#l$_$m$n$p$q%d(U)Q)R+d+l,Y[!gP!o'^*q-^/OW#b`#e%b&]Q'}$oW(d%O+s.R/dS*U&i*WS*w'e-[S*|'h+OR.X+xh#VY!W!e#n#s%V'|*T*z+f,u-aQ)j%wQ)v&WR,o)y#xnOcopx!Y![!_!a#l#u#w#x#|#}$O$P$Q$R$S$T$U$V$Z$_$l$m$n$o$p$q%d%k%v&d'm(O(T(U)Q)R)])f*P*l*o+T+d+h+i+l+o,Y,`-r-t-}.g.m/[/_/b/n0Z0f0k^!kP!g!o'^*q-^/Ov#TY!W#`#n#s%w&W&[&`'|(`(})y*T+f+r,u.W/hQ#g`Q$b{Q$c|Q$d}W%S!e%V*z-aS%Y!h(vQ%`!iQ&m#pQ&n#qQ&o#rQ(u%ZS(y%^({Q*R&eS*v'e-[R-Z*wU)h%v)f.mR+V'p[!mP!o'^*q-^/OT*}'h+O^!iP!g!o'^*q-^/OQ'd$bQ'l$dQ*_&mQ*d&oV*{'h*|+OQ%[!hR,S(vQ(s%YR,R(u#znO`copx!Y![!_!a#l#u#w#x#|#}$O$P$Q$R$S$T$U$V$Z$_$l$m$n$o$p$q%d%k%v&d'm(O(T(U)Q)R)])f*P*l*o+T+d+h+i+l+o,Y,`-r-t-}.g.m/[/_/b/n0Z0f0kQ%c!kS(l%S(yR(|%`T#e`%bU#c`#e%bR)z&]Q%f!lQ(n%UQ(r%XQ,U(zR.],VrvOcx![#l$_$m$n$p$q%d(U)Q)R+d+l,Y[!mP!o'^*q-^/OQ%P!bQ%a!jQ%i!pQ'[$ZQ([$|Q(k%QQ(p%WQ+z(iR.Y+yrtOcx![#l$_$m$n$p$q%d(U)Q)R+d+l,Y[!mP!o'^*q-^/OS*V&i*WT*}'h+OQ'c$bS*^&m'dR,z*_Q'b$bQ'g$cU*]&m'c'dQ*a&nS,y*^*_R.v,zQ*u'`R+Q'iQ'k$dS*c&o'lR,}*dQ'j$dU*b&o'k'lS,|*c*dR.w,}rtOcx![#l$_$m$n$p$q%d(U)Q)R+d+l,Y[!mP!o'^*q-^/OT*}'h+OQ'f$cS*`&n'gR,{*aQ*x'eR.|-[R-`*yQ&j#mR*Z&lT*V&i*WQ%e!lS(q%X%fR,P(rR)R%dWk%O+s.R/d#{lO`copx!Y![!_!a#l#u#w#x#|#}$O$P$Q$R$S$T$U$V$Z$_$l$m$n$o$p$q%d%k%v&d'm(O(T(U)Q)R)])f*P*l*o+T+d+h+i+l+o,Y,`-r-t-}.g.m/[/_/b/n0Z0f0k$SiO`copx!Y![!_!a#l#u#w#x#|#}$O$P$Q$R$S$T$U$V$Z$_$l$m$n$o$p$q%O%d%k%v&d'm(O(T(U)Q)R)])f*P*l*o+T+d+h+i+l+o+s,Y,`-r-t-}.R.g.m/[/_/b/d/n0Z0f0kU&r#t$g,ZS*g&s._Q-Q*iR.y-RT'o$e'p!_#|m#a$r$z$}&w&z&{'O'P'Q'R'S'W'Z)[)g+S+g+j-T-V-e-v-{.e/Z/a/}0Q!]$Pm#a$r$z$}&w&z&{'O'P'R'S'W'Z)[)g+S+g+j-T-V-e-v-{.e/Z/a/}0Q#{nO`copx!Y![!_!a#l#u#w#x#|#}$O$P$Q$R$S$T$U$V$Z$_$l$m$n$o$p$q%d%k%v&d'm(O(T(U)Q)R)])f*P*l*o+T+d+h+i+l+o,Y,`-r-t-}.g.m/[/_/b/n0Z0f0ka)^%k)],`.g/n0Z0f0kQ)`%kR.k,cQ't$hQ)b%oR,f)cT+Y's+ZsvOcx![#l$_$m$n$p$q%d(U)Q)R+d+l,YruOcx![#l$_$m$n$p$q%d(U)Q)R+d+l,YQ$w!]R$y!^R$p!XrvOcx![#l$_$m$n$p$q%d(U)Q)R+d+l,YR(O$oR$q!XR(V$sT+k(U+lX(f%P(g(k+{R+y(hQ.W+xR/h.XQ(j%PQ+w(gQ+|(kR.Z+{R%Q!bQ(e%OV.P+s.R/dQxOQ#lcW$`x#l)Q,YQ)Q%dR,Y)RrXOcx![#l$_$m$n$p$q%d(U)Q)R+d+l,Yn!fP!o#e&]&i'^'e'h*W*q+O+x-[-^/Ol!zX!f#P#_#i$[%Z%_%{&R'n'{)O0r!j#PY!e!x#T#`#n$]%S%V%^%u%|&S&[&`'X'|(`(l({(}*T*p*z+f+r+},W,u-a.V/q0R0X0[0hQ#_`Q#ia#d$[op!Y!_!a#u#w#x#|#}$O$P$Q$R$S$T$U$V$Z$l%g%k%v&b&d'_'`'i'm(O(T(t)])f)o*P*l*o+T+h+i+o,^,`-r-t-}.g.m/[/_/b/n0Z0f0kS%Z!h(vS%_!i*{S%{#Y)pQ&R#[S'n$e'pY'{$o%O+s.R/dQ)O%bR0r$YQ!uUR%m!uQ)q&OR,l)q^#RY#`$]'X'|(`*px%R!e!x#n%V%^%|&S&[&`({(}*T*z+f+r,W,u-a.V0R[%t#R%R%u+}0X0hS%u#T%SQ+}(lQ0X/qR0h0[Q*m&{R-U*mQ!oPU%h!o*q/OQ*q'^R/O-^!pbOP`cx![!o#e#l$_$m$n$o$p$q%O%b%d&]&i'^'e'h(U)Q)R*W*q+O+d+l+s+x,Y-[-^.R/O/dY!yX!f#_'{)OT#jb!yQ.n,gR/p.nQ%x#VR)k%xQ&c#fS*O&c.[R.[,QQ(w%[R,T(wQ&^#cR){&^Q,_)WR.d,_Q+O'hR-b+OQ-]*xR.}-]Q*W&iR,v*WQ'p$eR+U'pQ&f#gR*S&fQ.h,aR/m.hQ,d)`R.l,dQ+Z'sR-g+ZQ-k+]R/T-kQ/y/US0^/y0`R0`/{Q+l(UR-x+lQ(g%PS+v(g+{R+{(kQ/f.VR0S/fQ+t(eR.S+t`wOcx#l%d)Q)R,YQ$t![Q']$_Q'y$mQ'z$nQ(Q$pQ(R$qS+k(U+lR-q+d'dsOPXY`acopx!Y![!_!a!e!f!h!i!o!x#P#T#Y#[#_#`#e#i#l#n#u#w#x#|#}$O$P$Q$R$S$T$U$V$Y$Z$[$]$_$e$l$m$n$o$p$q%O%S%V%Z%^%_%b%d%g%u%v%{%|&R&S&[&]&`&b&d&i'X'^'_'`'e'h'i'm'n'p'{'|(O(T(U(`(l(t(v({(})O)Q)R)f)o)p*P*T*W*l*o*p*q*z*{+O+T+d+f+h+i+l+o+r+s+x+},W,Y,^,u-[-^-a-r-t-}.R.V.m/O/[/_/b/d/q0R0X0[0h0ra)_%k)],`.g/n0Z0f0kQ!rTQ$h!QQ$i!SQ$j!TQ%o!{Q%q!}Q'x$kQ)c%pQ)l0oS-i+]+_Q-m+^Q-n+`Q/S-kS/U-m/WQ/{/XR0]/x%uSOT`cdopx!Q!S!T!Y![!_!a!{!}#`#l#o#t#u#v#w#x#|#}$O$P$Q$R$S$T$U$V$Z$_$g$k$l$m$n$o$p$q%O%d%j%k%p%v&S&d&s&y'm'v(O(T(U(})Q)R)])f*P*T*i*l*o+T+]+^+_+`+b+d+h+i+l+o+s,W,Y,Z,`,c,u-R-k-m-r-t-}.R._.g.m/W/X/[/_/b/d/n/x0Z0f0k0oQ)a%kQ,a)]S.f,`/nQ/l.gQ0g0ZQ0i0fR0m0krmOcx![#l$_$m$n$p$q%d(U)Q)R+d+l,YS#a`$lQ$WoQ$^pQ$r!YQ$z!_Q$}!aQ&w#uQ&z#wY&{#x$o+h-t/_Q&}#|Q'O#}Q'P$OQ'Q$PQ'R$QQ'S$RQ'T$SQ'U$TQ'V$UQ'W$VQ'Z$Z^)[%k)].g/n0Z0f0kU)g%v)f.mQ*Q&dQ+S'mQ+g(OQ+j(TQ,p*PQ-T*lQ-V*oQ-e+TQ-v+iQ-{+oQ.e,`Q/Z-rQ/a-}Q/}/[R0Q/b#xgO`copx!Y![!_!a#l#u#w#x#|#}$O$P$Q$R$S$T$U$V$Z$_$l$m$n$o$p$q%k%v&d'm(O(T(U)Q)R)])f*P*l*o+T+d+h+i+l+o,Y,`-r-t-}.g.m/[/_/b/n0Z0f0kW(a%O+s.R/dR)S%drYOcx![#l$_$m$n$p$q%d(U)Q)R+d+l,Y[!eP!o'^*q-^/OW!xX$[%{'{Q#``Q#ne#S$]op!Y!_!a#u#w#x#|#}$O$P$Q$R$S$T$U$V$Z$l%k%v&d'm(O(T)])f*P*l*o+T+h+i+o,`-r-t-}.g.m/[/_/b/n0Z0f0kQ%V!gS%^!i*{d%|#Y%g&b'_'`'i(t)o)p,^Q&S#_Q&[#bS&`#e&]Q'X$YQ'|$oW(`%O+s.R/dQ({%_Q(}%bS*T&i*WQ*p0rS*z'h+OQ+f'}Q+r(dQ,W)OQ,u*UQ-a*|S.V+x.XR0R/e&O_OPX`ceopx!Y![!_!a!g!i!o#Y#_#b#e#l#u#w#x#|#}$O$P$Q$R$S$T$U$V$Y$Z$[$_$l$m$n$o$p$q%O%_%b%d%g%k%v%{&]&b&d&i'^'_'`'h'i'm'{'}(O(T(U(d(t)O)Q)R)])f)o)p*P*U*W*l*o*q*{*|+O+T+d+h+i+l+o+s+x,Y,^,`-^-r-t-}.R.X.g.m/O/[/_/b/d/e/n0Z0f0k0rQ$e!OQ'r$fR*h&t&ZWOPX`ceopx!O!Y![!_!a!g!i!o#Y#[#_#b#e#l#u#w#x#|#}$O$P$Q$R$S$T$U$V$Y$Z$[$_$f$l$m$n$o$p$q%O%_%b%d%g%k%v%{&R&]&b&d&i&t'^'_'`'h'i'm'{'}(O(T(U(d(t)O)Q)R)])f)o)p*P*U*W*l*o*q*{*|+O+T+d+h+i+l+o+s+x,Y,^,`-^-r-t-}.R.X.g.m/O/[/_/b/d/e/n0Z0f0k0rR&P#Y$QjOcopx!Y![!_!a#l#u#w#x#|#}$O$P$Q$R$S$T$U$V$Z$_$l$m$n$o$p$q%O%d%k%v&d'm(O(T(U)Q)R)])f*P*l*o+T+d+h+i+l+o+s,Y,`-r-t-}.R.g.m/[/_/b/d/n0Z0f0kQ#f`Q&O#YQ'Y$YU)W%g'`'iQ)}&bQ*s'_Q,Q(tQ,j)oQ,k)pR.c,^Q)n%}R,i)m$SfO`copx!Y![!_!a#l#u#w#x#|#}$O$P$Q$R$S$T$U$V$Z$_$l$m$n$o$p$q%O%d%k%v&d'm(O(T(U)Q)R)])f*P*l*o+T+d+h+i+l+o+s,Y,`-r-t-}.R.g.m/[/_/b/d/n0Z0f0kT&p#t,ZQ&|#xQ(P$oQ-u+hQ/]-tR0P/_]!nP!o'^*q-^/O#PaOPX`bcx![!f!o!y#_#e#l$_$m$n$o$p$q%O%b%d&]&i'^'e'h'{(U)O)Q)R*W*q+O+d+l+s+x,Y-[-^.R/O/dU#WY!W'|Q%T!eU&k#n#s+fQ(o%VS,s*T*zT.s,u-aj#UY!W!e#n#s%V%w&W)y*T*z,u-aU&V#`&`(}Q)x&[Q+e'|Q+q(`Q-s+fQ.O+rQ/g.WR0U/hQ)i%vQ,g)fR/o.mR,h)f`!jP!o'^'h*q+O-^/OT%W!g*|R%]!hW%U!e%V*z-aQ(z%^R,V({S#d`%bR&a#eQ)X%gT*t'`'iR*y'e[!lP!o'^*q-^/OR%X!gR#h`R,b)]R)a%kT-j+]-kQ/V-mR/z/WR/z/X",nodeNames:"\u26a0 LineComment BlockComment Program ModuleDeclaration MarkerAnnotation Identifier ScopedIdentifier . Annotation ) ( AnnotationArgumentList AssignmentExpression FieldAccess IntegerLiteral FloatingPointLiteral BooleanLiteral CharacterLiteral StringLiteral TextBlock null ClassLiteral void PrimitiveType TypeName ScopedTypeName GenericType TypeArguments AnnotatedType Wildcard extends super , ArrayType ] Dimension [ class this ParenthesizedExpression ObjectCreationExpression new ArgumentList } { ClassBody ; FieldDeclaration Modifiers public protected private abstract static final strictfp default synchronized native transient volatile VariableDeclarator Definition AssignOp ArrayInitializer MethodDeclaration TypeParameters TypeParameter TypeBound FormalParameters ReceiverParameter FormalParameter SpreadParameter Throws throws Block ClassDeclaration Superclass SuperInterfaces implements InterfaceTypeList InterfaceDeclaration interface ExtendsInterfaces InterfaceBody ConstantDeclaration EnumDeclaration enum EnumBody EnumConstant EnumBodyDeclarations AnnotationTypeDeclaration AnnotationTypeBody AnnotationTypeElementDeclaration StaticInitializer ConstructorDeclaration ConstructorBody ExplicitConstructorInvocation ArrayAccess MethodInvocation MethodName MethodReference ArrayCreationExpression Dimension AssignOp BinaryExpression CompareOp CompareOp LogicOp LogicOp BitOp BitOp BitOp ArithOp ArithOp ArithOp BitOp InstanceofExpression instanceof LambdaExpression InferredParameters TernaryExpression LogicOp : UpdateExpression UpdateOp UnaryExpression LogicOp BitOp CastExpression ElementValueArrayInitializer ElementValuePair open module ModuleBody ModuleDirective requires transitive exports to opens uses provides with PackageDeclaration package ImportDeclaration import Asterisk ExpressionStatement LabeledStatement Label IfStatement if else WhileStatement while ForStatement for ForSpec LocalVariableDeclaration var EnhancedForStatement ForSpec AssertStatement assert SwitchStatement switch SwitchBlock SwitchLabel case DoStatement do BreakStatement break ContinueStatement continue ReturnStatement return SynchronizedStatement ThrowStatement throw TryStatement try CatchClause catch CatchFormalParameter CatchType FinallyClause finally TryWithResourcesStatement ResourceSpecification Resource ClassContent",maxTerm:276,nodeProps:[["isolate",-4,1,2,18,19,""],["group",-26,4,47,76,77,82,87,92,145,147,150,151,153,156,158,161,163,165,167,172,174,176,178,180,181,183,191,"Statement",-25,6,13,14,15,16,17,18,19,20,21,22,39,40,41,99,100,102,103,106,118,120,122,125,127,130,"Expression",-7,23,24,25,26,27,29,34,"Type"],["openedBy",10,"(",44,"{"],["closedBy",11,")",45,"}"]],propSources:[qU],skippedNodes:[0,1,2],repeatNodeCount:28,tokenData:"#$f_R!_OX%QXY'fYZ)bZ^'f^p%Qpq'fqr*|rs,^st%Qtu4euv5qvw7Rwx8ixyAQyzAnz{B[{|CQ|}Dh}!OEU!O!PFo!P!Q! i!Q!R!,_!R![!0V![!]!>g!]!^!?w!^!_!@e!_!`!BO!`!a!Br!a!b!D`!b!c!EO!c!}!Kz!}#O!MW#O#P%Q#P#Q!Mt#Q#R!Nb#R#S4e#S#T%Q#T#o4e#o#p# U#p#q# r#q#r##[#r#s##x#s#y%Q#y#z'f#z$f%Q$f$g'f$g#BY%Q#BY#BZ'f#BZ$IS%Q$IS$I_'f$I_$I|%Q$I|$JO'f$JO$JT%Q$JT$JU'f$JU$KV%Q$KV$KW'f$KW&FU%Q&FU&FV'f&FV;'S%Q;'S;=`&s<%lO%QS%VV&YSOY%QYZ%lZr%Qrs%qs;'S%Q;'S;=`&s<%lO%QS%qO&YSS%tVOY&ZYZ%lZr&Zrs&ys;'S&Z;'S;=`'`<%lO&ZS&^VOY%QYZ%lZr%Qrs%qs;'S%Q;'S;=`&s<%lO%QS&vP;=`<%l%QS&|UOY&ZYZ%lZr&Zs;'S&Z;'S;=`'`<%lO&ZS'cP;=`<%l&Z_'mk&YS%yZOX%QXY'fYZ)bZ^'f^p%Qpq'fqr%Qrs%qs#y%Q#y#z'f#z$f%Q$f$g'f$g#BY%Q#BY#BZ'f#BZ$IS%Q$IS$I_'f$I_$I|%Q$I|$JO'f$JO$JT%Q$JT$JU'f$JU$KV%Q$KV$KW'f$KW&FU%Q&FU&FV'f&FV;'S%Q;'S;=`&s<%lO%Q_)iY&YS%yZX^*Xpq*X#y#z*X$f$g*X#BY#BZ*X$IS$I_*X$I|$JO*X$JT$JU*X$KV$KW*X&FU&FV*XZ*^Y%yZX^*Xpq*X#y#z*X$f$g*X#BY#BZ*X$IS$I_*X$I|$JO*X$JT$JU*X$KV$KW*X&FU&FV*XV+TX#tP&YSOY%QYZ%lZr%Qrs%qs!_%Q!_!`+p!`;'S%Q;'S;=`&s<%lO%QU+wV#_Q&YSOY%QYZ%lZr%Qrs%qs;'S%Q;'S;=`&s<%lO%QT,aXOY,|YZ%lZr,|rs3Ys#O,|#O#P2d#P;'S,|;'S;=`3S<%lO,|T-PXOY-lYZ%lZr-lrs.^s#O-l#O#P.x#P;'S-l;'S;=`2|<%lO-lT-qX&YSOY-lYZ%lZr-lrs.^s#O-l#O#P.x#P;'S-l;'S;=`2|<%lO-lT.cVcPOY&ZYZ%lZr&Zrs&ys;'S&Z;'S;=`'`<%lO&ZT.}V&YSOY-lYZ/dZr-lrs1]s;'S-l;'S;=`2|<%lO-lT/iW&YSOY0RZr0Rrs0ns#O0R#O#P0s#P;'S0R;'S;=`1V<%lO0RP0UWOY0RZr0Rrs0ns#O0R#O#P0s#P;'S0R;'S;=`1V<%lO0RP0sOcPP0vTOY0RYZ0RZ;'S0R;'S;=`1V<%lO0RP1YP;=`<%l0RT1`XOY,|YZ%lZr,|rs1{s#O,|#O#P2d#P;'S,|;'S;=`3S<%lO,|T2QUcPOY&ZYZ%lZr&Zs;'S&Z;'S;=`'`<%lO&ZT2gVOY-lYZ/dZr-lrs1]s;'S-l;'S;=`2|<%lO-lT3PP;=`<%l-lT3VP;=`<%l,|T3_VcPOY&ZYZ%lZr&Zrs3ts;'S&Z;'S;=`'`<%lO&ZT3yR&WSXY4SYZ4`pq4SP4VRXY4SYZ4`pq4SP4eO&XP_4la&PZ&YSOY%QYZ%lZr%Qrs%qst%Qtu4eu!Q%Q!Q![4e![!c%Q!c!}4e!}#R%Q#R#S4e#S#T%Q#T#o4e#o;'S%Q;'S;=`&s<%lO%QU5xX#hQ&YSOY%QYZ%lZr%Qrs%qs!_%Q!_!`6e!`;'S%Q;'S;=`&s<%lO%QU6lV#]Q&YSOY%QYZ%lZr%Qrs%qs;'S%Q;'S;=`&s<%lO%QV7YZ&nR&YSOY%QYZ%lZr%Qrs%qsv%Qvw7{w!_%Q!_!`6e!`;'S%Q;'S;=`&s<%lO%QU8SV#aQ&YSOY%QYZ%lZr%Qrs%qs;'S%Q;'S;=`&s<%lO%QT8nZ&YSOY9aYZ%lZr9ars:osw9awx%Qx#O9a#O#P;y#P;'S9a;'S;=`@z<%lO9aT9fX&YSOY%QYZ%lZr%Qrs%qsw%Qwx:Rx;'S%Q;'S;=`&s<%lO%QT:YVbP&YSOY%QYZ%lZr%Qrs%qs;'S%Q;'S;=`&s<%lO%QT:rXOY&ZYZ%lZr&Zrs&ysw&Zwx;_x;'S&Z;'S;=`'`<%lO&ZT;dVbPOY%QYZ%lZr%Qrs%qs;'S%Q;'S;=`&s<%lO%QT<OZ&YSOY<qYZ%lZr<qrs=isw<qwx9ax#O<q#O#P9a#P;'S<q;'S;=`?T<%lO<qT<vZ&YSOY<qYZ%lZr<qrs=isw<qwx:Rx#O<q#O#P%Q#P;'S<q;'S;=`?T<%lO<qT=lZOY>_YZ%lZr>_rs?Zsw>_wx;_x#O>_#O#P&Z#P;'S>_;'S;=`@t<%lO>_T>bZOY<qYZ%lZr<qrs=isw<qwx:Rx#O<q#O#P%Q#P;'S<q;'S;=`?T<%lO<qT?WP;=`<%l<qT?^ZOY>_YZ%lZr>_rs@Psw>_wx;_x#O>_#O#P&Z#P;'S>_;'S;=`@t<%lO>_P@SVOY@PZw@Pwx@ix#O@P#P;'S@P;'S;=`@n<%lO@PP@nObPP@qP;=`<%l@PT@wP;=`<%l>_T@}P;=`<%l9a_AXVZZ&YSOY%QYZ%lZr%Qrs%qs;'S%Q;'S;=`&s<%lO%QVAuVYR&YSOY%QYZ%lZr%Qrs%qs;'S%Q;'S;=`&s<%lO%QVBeX$ZP&YS#gQOY%QYZ%lZr%Qrs%qs!_%Q!_!`6e!`;'S%Q;'S;=`&s<%lO%QVCXZ#fR&YSOY%QYZ%lZr%Qrs%qs{%Q{|Cz|!_%Q!_!`6e!`;'S%Q;'S;=`&s<%lO%QVDRV#rR&YSOY%QYZ%lZr%Qrs%qs;'S%Q;'S;=`&s<%lO%QVDoVqR&YSOY%QYZ%lZr%Qrs%qs;'S%Q;'S;=`&s<%lO%QVE][#fR&YSOY%QYZ%lZr%Qrs%qs}%Q}!OCz!O!_%Q!_!`6e!`!aFR!a;'S%Q;'S;=`&s<%lO%QVFYV&xR&YSOY%QYZ%lZr%Qrs%qs;'S%Q;'S;=`&s<%lO%Q_FvZWY&YSOY%QYZ%lZr%Qrs%qs!O%Q!O!PGi!P!Q%Q!Q![Hw![;'S%Q;'S;=`&s<%lO%QVGnX&YSOY%QYZ%lZr%Qrs%qs!O%Q!O!PHZ!P;'S%Q;'S;=`&s<%lO%QVHbV&qR&YSOY%QYZ%lZr%Qrs%qs;'S%Q;'S;=`&s<%lO%QTIOc&YS`POY%QYZ%lZr%Qrs%qs!Q%Q!Q![Hw![!f%Q!f!gJZ!g!hJw!h!iJZ!i#R%Q#R#SNq#S#W%Q#W#XJZ#X#YJw#Y#ZJZ#Z;'S%Q;'S;=`&s<%lO%QTJbV&YS`POY%QYZ%lZr%Qrs%qs;'S%Q;'S;=`&s<%lO%QTJ|]&YSOY%QYZ%lZr%Qrs%qs{%Q{|Ku|}%Q}!OKu!O!Q%Q!Q![Lg![;'S%Q;'S;=`&s<%lO%QTKzX&YSOY%QYZ%lZr%Qrs%qs!Q%Q!Q![Lg![;'S%Q;'S;=`&s<%lO%QTLnc&YS`POY%QYZ%lZr%Qrs%qs!Q%Q!Q![Lg![!f%Q!f!gJZ!g!h%Q!h!iJZ!i#R%Q#R#SMy#S#W%Q#W#XJZ#X#Y%Q#Y#ZJZ#Z;'S%Q;'S;=`&s<%lO%QTNOZ&YSOY%QYZ%lZr%Qrs%qs!Q%Q!Q![Lg![#R%Q#R#SMy#S;'S%Q;'S;=`&s<%lO%QTNvZ&YSOY%QYZ%lZr%Qrs%qs!Q%Q!Q![Hw![#R%Q#R#SNq#S;'S%Q;'S;=`&s<%lO%Q_! p]&YS#gQOY%QYZ%lZr%Qrs%qsz%Qz{!!i{!P%Q!P!Q!)[!Q!_%Q!_!`6e!`;'S%Q;'S;=`&s<%lO%Q_!!nX&YSOY!!iYZ!#ZZr!!irs!$vsz!!iz{!&U{;'S!!i;'S;=`!'j<%lO!!i_!#`T&YSOz!#oz{!$R{;'S!#o;'S;=`!$p<%lO!#oZ!#rTOz!#oz{!$R{;'S!#o;'S;=`!$p<%lO!#oZ!$UVOz!#oz{!$R{!P!#o!P!Q!$k!Q;'S!#o;'S;=`!$p<%lO!#oZ!$pOQZZ!$sP;=`<%l!#o_!$yXOY!%fYZ!#ZZr!%frs!'psz!%fz{!(`{;'S!%f;'S;=`!)U<%lO!%f_!%iXOY!!iYZ!#ZZr!!irs!$vsz!!iz{!&U{;'S!!i;'S;=`!'j<%lO!!i_!&ZZ&YSOY!!iYZ!#ZZr!!irs!$vsz!!iz{!&U{!P!!i!P!Q!&|!Q;'S!!i;'S;=`!'j<%lO!!i_!'TV&YSQZOY%QYZ%lZr%Qrs%qs;'S%Q;'S;=`&s<%lO%Q_!'mP;=`<%l!!i_!'sXOY!%fYZ!#ZZr!%frs!#osz!%fz{!(`{;'S!%f;'S;=`!)U<%lO!%f_!(cZOY!!iYZ!#ZZr!!irs!$vsz!!iz{!&U{!P!!i!P!Q!&|!Q;'S!!i;'S;=`!'j<%lO!!i_!)XP;=`<%l!%f_!)cV&YSPZOY!)[YZ%lZr!)[rs!)xs;'S!)[;'S;=`!+O<%lO!)[_!)}VPZOY!*dYZ%lZr!*drs!+Us;'S!*d;'S;=`!,X<%lO!*d_!*iVPZOY!)[YZ%lZr!)[rs!)xs;'S!)[;'S;=`!+O<%lO!)[_!+RP;=`<%l!)[_!+ZVPZOY!*dYZ%lZr!*drs!+ps;'S!*d;'S;=`!,X<%lO!*dZ!+uSPZOY!+pZ;'S!+p;'S;=`!,R<%lO!+pZ!,UP;=`<%l!+p_!,[P;=`<%l!*dT!,fu&YS_POY%QYZ%lZr%Qrs%qs!O%Q!O!P!.y!P!Q%Q!Q![!0V![!d%Q!d!e!3a!e!f%Q!f!gJZ!g!hJw!h!iJZ!i!n%Q!n!o!1{!o!q%Q!q!r!5_!r!z%Q!z!{!7V!{#R%Q#R#S!2i#S#U%Q#U#V!3a#V#W%Q#W#XJZ#X#YJw#Y#ZJZ#Z#`%Q#`#a!1{#a#c%Q#c#d!5_#d#l%Q#l#m!7V#m;'S%Q;'S;=`&s<%lO%QT!/Qa&YS`POY%QYZ%lZr%Qrs%qs!Q%Q!Q![Hw![!f%Q!f!gJZ!g!hJw!h!iJZ!i#W%Q#W#XJZ#X#YJw#Y#ZJZ#Z;'S%Q;'S;=`&s<%lO%QT!0^i&YS_POY%QYZ%lZr%Qrs%qs!O%Q!O!P!.y!P!Q%Q!Q![!0V![!f%Q!f!gJZ!g!hJw!h!iJZ!i!n%Q!n!o!1{!o#R%Q#R#S!2i#S#W%Q#W#XJZ#X#YJw#Y#ZJZ#Z#`%Q#`#a!1{#a;'S%Q;'S;=`&s<%lO%QT!2SV&YS_POY%QYZ%lZr%Qrs%qs;'S%Q;'S;=`&s<%lO%QT!2nZ&YSOY%QYZ%lZr%Qrs%qs!Q%Q!Q![!0V![#R%Q#R#S!2i#S;'S%Q;'S;=`&s<%lO%QT!3fY&YSOY%QYZ%lZr%Qrs%qs!Q%Q!Q!R!4U!R!S!4U!S;'S%Q;'S;=`&s<%lO%QT!4]`&YS_POY%QYZ%lZr%Qrs%qs!Q%Q!Q!R!4U!R!S!4U!S!n%Q!n!o!1{!o#R%Q#R#S!3a#S#`%Q#`#a!1{#a;'S%Q;'S;=`&s<%lO%QT!5dX&YSOY%QYZ%lZr%Qrs%qs!Q%Q!Q!Y!6P!Y;'S%Q;'S;=`&s<%lO%QT!6W_&YS_POY%QYZ%lZr%Qrs%qs!Q%Q!Q!Y!6P!Y!n%Q!n!o!1{!o#R%Q#R#S!5_#S#`%Q#`#a!1{#a;'S%Q;'S;=`&s<%lO%QT!7[_&YSOY%QYZ%lZr%Qrs%qs!O%Q!O!P!8Z!P!Q%Q!Q![!:i![!c%Q!c!i!:i!i#T%Q#T#Z!:i#Z;'S%Q;'S;=`&s<%lO%QT!8`]&YSOY%QYZ%lZr%Qrs%qs!Q%Q!Q![!9X![!c%Q!c!i!9X!i#T%Q#T#Z!9X#Z;'S%Q;'S;=`&s<%lO%QT!9^c&YSOY%QYZ%lZr%Qrs%qs!Q%Q!Q![!9X![!c%Q!c!i!9X!i!r%Q!r!sJw!s#R%Q#R#S!8Z#S#T%Q#T#Z!9X#Z#d%Q#d#eJw#e;'S%Q;'S;=`&s<%lO%QT!:pi&YS_POY%QYZ%lZr%Qrs%qs!O%Q!O!P!<_!P!Q%Q!Q![!:i![!c%Q!c!i!:i!i!n%Q!n!o!1{!o!r%Q!r!sJw!s#R%Q#R#S!=i#S#T%Q#T#Z!:i#Z#`%Q#`#a!1{#a#d%Q#d#eJw#e;'S%Q;'S;=`&s<%lO%QT!<da&YSOY%QYZ%lZr%Qrs%qs!Q%Q!Q![!9X![!c%Q!c!i!9X!i!r%Q!r!sJw!s#T%Q#T#Z!9X#Z#d%Q#d#eJw#e;'S%Q;'S;=`&s<%lO%QT!=n]&YSOY%QYZ%lZr%Qrs%qs!Q%Q!Q![!:i![!c%Q!c!i!:i!i#T%Q#T#Z!:i#Z;'S%Q;'S;=`&s<%lO%QV!>nX#pR&YSOY%QYZ%lZr%Qrs%qs![%Q![!]!?Z!];'S%Q;'S;=`&s<%lO%QV!?bV&vR&YSOY%QYZ%lZr%Qrs%qs;'S%Q;'S;=`&s<%lO%QV!@OV!PR&YSOY%QYZ%lZr%Qrs%qs;'S%Q;'S;=`&s<%lO%Q_!@lY&_Z&YSOY%QYZ%lZr%Qrs%qs!^%Q!^!_!A[!_!`+p!`;'S%Q;'S;=`&s<%lO%QU!AcX#iQ&YSOY%QYZ%lZr%Qrs%qs!_%Q!_!`6e!`;'S%Q;'S;=`&s<%lO%QV!BVX!bR&YSOY%QYZ%lZr%Qrs%qs!_%Q!_!`+p!`;'S%Q;'S;=`&s<%lO%QV!ByY&^R&YSOY%QYZ%lZr%Qrs%qs!_%Q!_!`+p!`!a!Ci!a;'S%Q;'S;=`&s<%lO%QU!CpY#iQ&YSOY%QYZ%lZr%Qrs%qs!_%Q!_!`6e!`!a!A[!a;'S%Q;'S;=`&s<%lO%Q_!DiV&bX#oQ&YSOY%QYZ%lZr%Qrs%qs;'S%Q;'S;=`&s<%lO%Q_!EVX%}Z&YSOY%QYZ%lZr%Qrs%qs#]%Q#]#^!Er#^;'S%Q;'S;=`&s<%lO%QV!EwX&YSOY%QYZ%lZr%Qrs%qs#b%Q#b#c!Fd#c;'S%Q;'S;=`&s<%lO%QV!FiX&YSOY%QYZ%lZr%Qrs%qs#h%Q#h#i!GU#i;'S%Q;'S;=`&s<%lO%QV!GZX&YSOY%QYZ%lZr%Qrs%qs#X%Q#X#Y!Gv#Y;'S%Q;'S;=`&s<%lO%QV!G{X&YSOY%QYZ%lZr%Qrs%qs#f%Q#f#g!Hh#g;'S%Q;'S;=`&s<%lO%QV!HmX&YSOY%QYZ%lZr%Qrs%qs#Y%Q#Y#Z!IY#Z;'S%Q;'S;=`&s<%lO%QV!I_X&YSOY%QYZ%lZr%Qrs%qs#T%Q#T#U!Iz#U;'S%Q;'S;=`&s<%lO%QV!JPX&YSOY%QYZ%lZr%Qrs%qs#V%Q#V#W!Jl#W;'S%Q;'S;=`&s<%lO%QV!JqX&YSOY%QYZ%lZr%Qrs%qs#X%Q#X#Y!K^#Y;'S%Q;'S;=`&s<%lO%QV!KeV&tR&YSOY%QYZ%lZr%Qrs%qs;'S%Q;'S;=`&s<%lO%Q_!LRa&RZ&YSOY%QYZ%lZr%Qrs%qst%Qtu!Kzu!Q%Q!Q![!Kz![!c%Q!c!}!Kz!}#R%Q#R#S!Kz#S#T%Q#T#o!Kz#o;'S%Q;'S;=`&s<%lO%Q_!M_VuZ&YSOY%QYZ%lZr%Qrs%qs;'S%Q;'S;=`&s<%lO%QV!M{VsR&YSOY%QYZ%lZr%Qrs%qs;'S%Q;'S;=`&s<%lO%QU!NiX#eQ&YSOY%QYZ%lZr%Qrs%qs!_%Q!_!`6e!`;'S%Q;'S;=`&s<%lO%QV# ]V}R&YSOY%QYZ%lZr%Qrs%qs;'S%Q;'S;=`&s<%lO%Q_# {Z'OX#dQ&YSOY%QYZ%lZr%Qrs%qs!_%Q!_!`6e!`#p%Q#p#q#!n#q;'S%Q;'S;=`&s<%lO%QU#!uV#bQ&YSOY%QYZ%lZr%Qrs%qs;'S%Q;'S;=`&s<%lO%QV##cV|R&YSOY%QYZ%lZr%Qrs%qs;'S%Q;'S;=`&s<%lO%QT#$PV#uP&YSOY%QYZ%lZr%Qrs%qs;'S%Q;'S;=`&s<%lO%Q",tokenizers:[0,1,2,3],topRules:{Program:[0,3],ClassContent:[1,194]},dynamicPrecedences:{27:1,232:-1,243:-1},specialized:[{term:231,get:e=>VU[e]||-1}],tokenPrec:7144}),jU=1024;let BU=0;class FU{constructor(e,t){this.from=e,this.to=t}}class WU{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.id=BU++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return"function"!=typeof e&&(e=GU.match(e)),t=>{let n=e(t);return void 0===n?null:[this,n]}}}WU.closedBy=new WU({deserialize:e=>e.split(" ")}),WU.openedBy=new WU({deserialize:e=>e.split(" ")}),WU.group=new WU({deserialize:e=>e.split(" ")}),WU.isolate=new WU({deserialize:e=>{if(e&&"rtl"!=e&&"ltr"!=e&&"auto"!=e)throw new RangeError("Invalid value for isolate: "+e);return e||"auto"}}),WU.contextHash=new WU({perNode:!0}),WU.lookAhead=new WU({perNode:!0}),WU.mounted=new WU({perNode:!0});class XU{constructor(e,t,n){this.tree=e,this.overlay=t,this.parser=n}static get(e){return e&&e.props&&e.props[WU.mounted.id]}}const YU=Object.create(null);class GU{constructor(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;this.name=e,this.props=t,this.id=n,this.flags=i}static define(e){let t=e.props&&e.props.length?Object.create(null):YU,n=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(null==e.name?8:0),i=new GU(e.name||"",t,e.id,n);if(e.props)for(let r of e.props)if(Array.isArray(r)||(r=r(i)),r){if(r[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");t[r[0].id]=r[1]}return i}prop(e){return this.props[e.id]}get isTop(){return(1&this.flags)>0}get isSkipped(){return(2&this.flags)>0}get isError(){return(4&this.flags)>0}get isAnonymous(){return(8&this.flags)>0}is(e){if("string"==typeof e){if(this.name==e)return!0;let t=this.prop(WU.group);return!!t&&t.indexOf(e)>-1}return this.id==e}static match(e){let t=Object.create(null);for(let n in e)for(let i of n.split(" "))t[i]=e[n];return e=>{for(let n=e.prop(WU.group),i=-1;i<(n?n.length:0);i++){let r=t[i<0?e.name:n[i]];if(r)return r}}}}GU.none=new GU("",Object.create(null),0,8);const ZU=new WeakMap,HU=new WeakMap;var KU;!function(e){e[e.ExcludeBuffers=1]="ExcludeBuffers",e[e.IncludeAnonymous=2]="IncludeAnonymous",e[e.IgnoreMounts=4]="IgnoreMounts",e[e.IgnoreOverlays=8]="IgnoreOverlays"}(KU||(KU={}));class JU{constructor(e,t,n,i,r){if(this.type=e,this.children=t,this.positions=n,this.length=i,this.props=null,r&&r.length){this.props=Object.create(null);for(let[e,t]of r)this.props["number"==typeof e?e:e.id]=t}}toString(){let e=XU.get(this);if(e&&!e.overlay)return e.tree.toString();let t="";for(let n of this.children){let e=n.toString();e&&(t&&(t+=","),t+=e)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(t.length?"("+t+")":""):t}cursor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return new dq(this.topNode,e)}cursorAt(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=ZU.get(this)||this.topNode,i=new dq(n);return i.moveTo(e,t),ZU.set(this,i._tree),i}get topNode(){return new sq(this,0,0,null)}resolve(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=iq(ZU.get(this)||this.topNode,e,t,!1);return ZU.set(this,n),n}resolveInner(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=iq(HU.get(this)||this.topNode,e,t,!0);return HU.set(this,n),n}resolveStack(e){return function(e,t,n){let i=e.resolveInner(t,n),r=null;for(let s=i instanceof sq?i:i.context.parent;s;s=s.parent)if(s.index<0){let e=s.parent;(r||(r=[i])).push(e.resolve(t,n)),s=e}else{let e=XU.get(s.tree);if(e&&e.overlay&&e.overlay[0].from<=t&&e.overlay[e.overlay.length-1].to>=t){let o=new sq(e.tree,e.overlay[0].from+s.from,-1,s);(r||(r=[i])).push(iq(o,t,n,!1))}}return r?cq(r):i}(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0)}iterate(e){let{enter:t,leave:n,from:i=0,to:r=this.length}=e,s=e.mode||0,o=(s&KU.IncludeAnonymous)>0;for(let a=this.cursor(s|KU.IncludeAnonymous);;){let e=!1;if(a.from<=r&&a.to>=i&&(!o&&a.type.isAnonymous||!1!==t(a))){if(a.firstChild())continue;e=!0}for(;e&&n&&(o||!a.type.isAnonymous)&&n(a),!a.nextSibling();){if(!a.parent())return;e=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let t in this.props)e.push([+t,this.props[t]]);return e}balance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.children.length<=8?this:mq(GU.none,this.children,this.positions,0,this.children.length,0,this.length,((e,t,n)=>new JU(this.type,e,t,n,this.propValues)),e.makeTree||((e,t,n)=>new JU(GU.none,e,t,n)))}static build(e){return function(e){var t;let{buffer:n,nodeSet:i,maxBufferLength:r=jU,reused:s=[],minRepeatType:o=i.types.length}=e,a=Array.isArray(n)?new eq(n,n.length):n,l=i.types,h=0,c=0;function u(e,t,n,v,y,b){let{id:w,start:k,end:S,size:x}=a,T=c;for(;x<0;){if(a.next(),-1==x){let t=s[w];return n.push(t),void v.push(k-e)}if(-3==x)return void(h=w);if(-4==x)return void(c=w);throw new RangeError("Unrecognized record size: ".concat(x))}let _,P,C=l[w],E=k-e;if(S-k<=r&&(P=m(a.pos-t,y))){let t=new Uint16Array(P.size-P.skip),n=a.pos-P.size,r=t.length;for(;a.pos>n;)r=O(P.start,t,r);_=new tq(t,S-P.start,i),E=P.start-e}else{let e=a.pos-x;a.next();let t=[],n=[],i=w>=o?w:-1,s=0,l=S;for(;a.pos>e;)i>=0&&a.id==i&&a.size>=0?(a.end<=l-r&&(p(t,n,k,s,a.end,l,i,T),s=t.length,l=a.end),a.next()):b>2500?d(k,e,t,n):u(k,e,t,n,i,b+1);if(i>=0&&s>0&&s<t.length&&p(t,n,k,s,k,l,i,T),t.reverse(),n.reverse(),i>-1&&s>0){let e=f(C);_=mq(C,t,n,0,t.length,0,S-k,e,e)}else _=g(C,t,n,S-k,T-S)}n.push(_),v.push(E)}function d(e,t,n,s){let o=[],l=0,h=-1;for(;a.pos>t;){let{id:e,start:t,end:n,size:i}=a;if(i>4)a.next();else{if(h>-1&&t<h)break;h<0&&(h=n-r),o.push(e,t,n),l++,a.next()}}if(l){let t=new Uint16Array(4*l),r=o[o.length-2];for(let e=o.length-3,n=0;e>=0;e-=3)t[n++]=o[e],t[n++]=o[e+1]-r,t[n++]=o[e+2]-r,t[n++]=n;n.push(new tq(t,o[2]-r,i)),s.push(r-e)}}function f(e){return(t,n,i)=>{let r,s,o=0,a=t.length-1;if(a>=0&&(r=t[a])instanceof JU){if(!a&&r.type==e&&r.length==i)return r;(s=r.prop(WU.lookAhead))&&(o=n[a]+r.length+s)}return g(e,t,n,i,o)}}function p(e,t,n,r,s,o,a,l){let h=[],c=[];for(;e.length>r;)h.push(e.pop()),c.push(t.pop()+n-s);e.push(g(i.types[a],h,c,o-s,l-o)),t.push(s-n)}function g(e,t,n,i){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,s=arguments.length>5?arguments[5]:void 0;if(h){let e=[WU.contextHash,h];s=s?[e].concat(s):[e]}if(r>25){let e=[WU.lookAhead,r];s=s?[e].concat(s):[e]}return new JU(e,t,n,i,s)}function m(e,t){let n=a.fork(),i=0,s=0,l=0,h=n.end-r,c={size:0,start:0,skip:0};e:for(let r=n.pos-e;n.pos>r;){let e=n.size;if(n.id==t&&e>=0){c.size=i,c.start=s,c.skip=l,l+=4,i+=4,n.next();continue}let a=n.pos-e;if(e<0||a<r||n.start<h)break;let u=n.id>=o?4:0,d=n.start;for(n.next();n.pos>a;){if(n.size<0){if(-3!=n.size)break e;u+=4}else n.id>=o&&(u+=4);n.next()}s=d,i+=e,l+=u}return(t<0||i==e)&&(c.size=i,c.start=s,c.skip=l),c.size>4?c:void 0}function O(e,t,n){let{id:i,start:r,end:s,size:l}=a;if(a.next(),l>=0&&i<o){let o=n;if(l>4){let i=a.pos-(l-4);for(;a.pos>i;)n=O(e,t,n)}t[--n]=o,t[--n]=s-e,t[--n]=r-e,t[--n]=i}else-3==l?h=i:-4==l&&(c=i);return n}let v=[],y=[];for(;a.pos>0;)u(e.start||0,e.bufferStart||0,v,y,-1,0);let b=null!==(t=e.length)&&void 0!==t?t:v.length?y[0]+v[0].length:0;return new JU(l[e.topID],v.reverse(),y.reverse(),b)}(e)}}JU.empty=new JU(GU.none,[],[],0);class eq{constructor(e,t){this.buffer=e,this.index=t}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new eq(this.buffer,this.index)}}class tq{constructor(e,t,n){this.buffer=e,this.length=t,this.set=n}get type(){return GU.none}toString(){let e=[];for(let t=0;t<this.buffer.length;)e.push(this.childString(t)),t=this.buffer[t+3];return e.join(",")}childString(e){let t=this.buffer[e],n=this.buffer[e+3],i=this.set.types[t],r=i.name;if(/\W/.test(r)&&!i.isError&&(r=JSON.stringify(r)),n==(e+=4))return r;let s=[];for(;e<n;)s.push(this.childString(e)),e=this.buffer[e+3];return r+"("+s.join(",")+")"}findChild(e,t,n,i,r){let{buffer:s}=this,o=-1;for(let a=e;a!=t&&!(nq(r,i,s[a+1],s[a+2])&&(o=a,n>0));a=s[a+3]);return o}slice(e,t,n){let i=this.buffer,r=new Uint16Array(t-e),s=0;for(let o=e,a=0;o<t;){r[a++]=i[o++],r[a++]=i[o++]-n;let t=r[a++]=i[o++]-n;r[a++]=i[o++]-e,s=Math.max(s,t)}return new tq(r,s,this.set)}}function nq(e,t,n,i){switch(e){case-2:return n<t;case-1:return i>=t&&n<t;case 0:return n<t&&i>t;case 1:return n<=t&&i>t;case 2:return i>t;case 4:return!0}}function iq(e,t,n,i){for(var r;e.from==e.to||(n<1?e.from>=t:e.from>t)||(n>-1?e.to<=t:e.to<t);){let t=!i&&e instanceof sq&&e.index<0?null:e.parent;if(!t)return e;e=t}let s=i?0:KU.IgnoreOverlays;if(i)for(let o=e,a=o.parent;a;o=a,a=o.parent)o instanceof sq&&o.index<0&&(null===(r=a.enter(t,n,s))||void 0===r?void 0:r.from)!=o.from&&(e=a);for(;;){let i=e.enter(t,n,s);if(!i)return e;e=i}}class rq{cursor(){return new dq(this,arguments.length>0&&void 0!==arguments[0]?arguments[0]:0)}getChild(e){let t=oq(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:null);return t.length?t[0]:null}getChildren(e){return oq(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}resolve(e){return iq(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,!1)}resolveInner(e){return iq(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,!0)}matchContext(e){return aq(this,e)}enterUnfinishedNodesBefore(e){let t=this.childBefore(e),n=this;for(;t;){let e=t.lastChild;if(!e||e.to!=t.to)break;e.type.isError&&e.from==e.to?(n=t,t=e.prevSibling):t=e}return n}get node(){return this}get next(){return this.parent}}class sq extends rq{constructor(e,t,n,i){super(),this._tree=e,this.from=t,this.index=n,this._parent=i}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,t,n,i){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;for(let s=this;;){for(let{children:o,positions:a}=s._tree,l=t>0?o.length:-1;e!=l;e+=t){let l=o[e],h=a[e]+s.from;if(nq(i,n,h,h+l.length))if(l instanceof tq){if(r&KU.ExcludeBuffers)continue;let o=l.findChild(0,l.buffer.length,t,n-h,i);if(o>-1)return new hq(new lq(s,l,e,h),null,o)}else if(r&KU.IncludeAnonymous||!l.type.isAnonymous||fq(l)){let o;if(!(r&KU.IgnoreMounts)&&(o=XU.get(l))&&!o.overlay)return new sq(o.tree,h,e,s);let a=new sq(l,h,e,s);return r&KU.IncludeAnonymous||!a.type.isAnonymous?a:a.nextChild(t<0?l.children.length-1:0,t,n,i)}}if(r&KU.IncludeAnonymous||!s.type.isAnonymous)return null;if(e=s.index>=0?s.index+t:t<0?-1:s._parent._tree.children.length,s=s._parent,!s)return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,t){let n,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(!(i&KU.IgnoreOverlays)&&(n=XU.get(this._tree))&&n.overlay){let i=e-this.from;for(let{from:e,to:r}of n.overlay)if((t>0?e<=i:e<i)&&(t<0?r>=i:r>i))return new sq(n.tree,n.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,t,i)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}}function oq(e,t,n,i){let r=e.cursor(),s=[];if(!r.firstChild())return s;if(null!=n)for(let o=!1;!o;)if(o=r.type.is(n),!r.nextSibling())return s;for(;;){if(null!=i&&r.type.is(i))return s;if(r.type.is(t)&&s.push(r.node),!r.nextSibling())return null==i?s:[]}}function aq(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.length-1;for(let i=e.parent;n>=0;i=i.parent){if(!i)return!1;if(!i.type.isAnonymous){if(t[n]&&t[n]!=i.name)return!1;n--}}return!0}class lq{constructor(e,t,n,i){this.parent=e,this.buffer=t,this.index=n,this.start=i}}class hq extends rq{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,t,n){super(),this.context=e,this._parent=t,this.index=n,this.type=e.buffer.set.types[e.buffer.buffer[n]]}child(e,t,n){let{buffer:i}=this.context,r=i.findChild(this.index+4,i.buffer[this.index+3],e,t-this.context.start,n);return r<0?null:new hq(this.context,this,r)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,t){if((arguments.length>2&&void 0!==arguments[2]?arguments[2]:0)&KU.ExcludeBuffers)return null;let{buffer:n}=this.context,i=n.findChild(this.index+4,n.buffer[this.index+3],t>0?1:-1,e-this.context.start,t);return i<0?null:new hq(this.context,this,i)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,t=e.buffer[this.index+3];return t<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new hq(this.context,this._parent,t):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,t=this._parent?this._parent.index+4:0;return this.index==t?this.externalSibling(-1):new hq(this.context,this._parent,e.findChild(t,this.index,-1,0,4))}get tree(){return null}toTree(){let e=[],t=[],{buffer:n}=this.context,i=this.index+4,r=n.buffer[this.index+3];if(r>i){let s=n.buffer[this.index+1];e.push(n.slice(i,r,s)),t.push(0)}return new JU(this.type,e,t,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}}function cq(e){if(!e.length)return null;let t=0,n=e[0];for(let s=1;s<e.length;s++){let i=e[s];(i.from>n.from||i.to<n.to)&&(n=i,t=s)}let i=n instanceof sq&&n.index<0?null:n.parent,r=e.slice();return i?r[t]=i:r.splice(t,1),new uq(r,n)}class uq{constructor(e,t){this.heads=e,this.node=t}get next(){return cq(this.heads)}}class dq{get name(){return this.type.name}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(this.mode=t,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof sq)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let t=e._parent;t;t=t._parent)this.stack.unshift(t.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return!!e&&(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0)}yieldBuf(e,t){this.index=e;let{start:n,buffer:i}=this.buffer;return this.type=t||i.set.types[i.buffer[e]],this.from=n+i.buffer[e+1],this.to=n+i.buffer[e+2],!0}yield(e){return!!e&&(e instanceof sq?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)))}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,t,n){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,t,n,this.mode));let{buffer:i}=this.buffer,r=i.findChild(this.index+4,i.buffer[this.index+3],e,t-this.buffer.start,n);return!(r<0)&&(this.stack.push(this.index),this.yieldBuf(r))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.mode;return this.buffer?!(n&KU.ExcludeBuffers)&&this.enterChild(1,e,t):this.yield(this._tree.enter(e,t,n))}parent(){if(!this.buffer)return this.yieldNode(this.mode&KU.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&KU.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return!!this._tree._parent&&this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode));let{buffer:t}=this.buffer,n=this.stack.length-1;if(e<0){let e=n<0?0:this.stack[n]+4;if(this.index!=e)return this.yieldBuf(t.findChild(e,this.index,-1,0,4))}else{let e=t.buffer[this.index+3];if(e<(n<0?t.buffer.length:t.buffer[this.stack[n]+3]))return this.yieldBuf(e)}return n<0&&this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode))}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let t,n,{buffer:i}=this;if(i){if(e>0){if(this.index<i.buffer.buffer.length)return!1}else for(let e=0;e<this.index;e++)if(i.buffer.buffer[e+3]<this.index)return!1;({index:t,parent:n}=i)}else({index:t,_parent:n}=this._tree);for(;n;({index:t,_parent:n}=n))if(t>-1)for(let i=t+e,r=e<0?-1:n._tree.children.length;i!=r;i+=e){let e=n._tree.children[i];if(this.mode&KU.IncludeAnonymous||e instanceof tq||!e.type.isAnonymous||fq(e))return!1}return!0}move(e,t){if(t&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.move(1,e)}prev(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.move(-1,e)}moveTo(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;for(;(this.from==this.to||(t<1?this.from>=e:this.from>e)||(t>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,t););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,t=null,n=0;if(e&&e.context==this.buffer)e:for(let i=this.index,r=this.stack.length;r>=0;){for(let s=e;s;s=s._parent)if(s.index==i){if(i==this.index)return s;t=s,n=r+1;break e}i=this.stack[--r]}for(let i=n;i<this.stack.length;i++)t=new hq(this.buffer,t,this.stack[i]);return this.bufferNode=new hq(this.buffer,t,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,t){for(let n=0;;){let i=!1;if(this.type.isAnonymous||!1!==e(this)){if(this.firstChild()){n++;continue}this.type.isAnonymous||(i=!0)}for(;i&&t&&t(this),i=this.type.isAnonymous,!this.nextSibling();){if(!n)return;this.parent(),n--,i=!0}}}matchContext(e){if(!this.buffer)return aq(this.node,e);let{buffer:t}=this.buffer,{types:n}=t.set;for(let i=e.length-1,r=this.stack.length-1;i>=0;r--){if(r<0)return aq(this.node,e,i);let s=n[t.buffer[this.stack[r]]];if(!s.isAnonymous){if(e[i]&&e[i]!=s.name)return!1;i--}}return!0}}function fq(e){return e.children.some((e=>e instanceof tq||!e.type.isAnonymous||fq(e)))}const pq=new WeakMap;function gq(e,t){if(!e.isAnonymous||t instanceof tq||t.type!=e)return 1;let n=pq.get(t);if(null==n){n=1;for(let i of t.children){if(i.type!=e||!(i instanceof JU)){n=1;break}n+=gq(e,i)}pq.set(t,n)}return n}function mq(e,t,n,i,r,s,o,a,l){let h=0;for(let f=i;f<r;f++)h+=gq(e,t[f]);let c=Math.ceil(1.5*h/8),u=[],d=[];return function t(n,i,r,o,a){for(let h=r;h<o;){let r=h,f=i[h],p=gq(e,n[h]);for(h++;h<o;h++){let t=gq(e,n[h]);if(p+t>=c)break;p+=t}if(h==r+1){if(p>c){let e=n[r];t(e.children,e.positions,0,e.children.length,i[r]+a);continue}u.push(n[r])}else{let t=i[h-1]+n[h-1].length-f;u.push(mq(e,n,i,r,h,f,t,null,l))}d.push(f+a-s)}}(t,n,i,r,0),(a||l)(u,d,o)}class Oq{constructor(e,t,n,i){let r=arguments.length>4&&void 0!==arguments[4]&&arguments[4],s=arguments.length>5&&void 0!==arguments[5]&&arguments[5];this.from=e,this.to=t,this.tree=n,this.offset=i,this.open=(r?1:0)|(s?2:0)}get openStart(){return(1&this.open)>0}get openEnd(){return(2&this.open)>0}static addTree(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=[new Oq(0,e.length,e,0,!1,n)];for(let r of t)r.to>e.length&&i.push(r);return i}static applyChanges(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:128;if(!t.length)return e;let i=[],r=1,s=e.length?e[0]:null;for(let o=0,a=0,l=0;;o++){let h=o<t.length?t[o]:null,c=h?h.fromA:1e9;if(c-a>=n)for(;s&&s.from<c;){let t=s;if(a>=t.from||c<=t.to||l){let e=Math.max(t.from,a)-l,n=Math.min(t.to,c)-l;t=e>=n?null:new Oq(e,n,t.tree,t.offset+l,o>0,!!h)}if(t&&i.push(t),s.to>c)break;s=r<e.length?e[r++]:null}if(!h)break;a=h.toA,l=h.toA-h.toB}return i}}class vq{startParse(e,t,n){return"string"==typeof e&&(e=new yq(e)),n=n?n.length?n.map((e=>new FU(e.from,e.to))):[new FU(0,0)]:[new FU(0,e.length)],this.createParse(e,t||[],n)}parse(e,t,n){let i=this.startParse(e,t,n);for(;;){let e=i.advance();if(e)return e}}}class yq{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,t){return this.string.slice(e,t)}}new WU({perNode:!0});let bq=0;class wq{constructor(e,t,n){this.set=e,this.base=t,this.modified=n,this.id=bq++}static define(e){if(null===e||void 0===e?void 0:e.base)throw new Error("Can not derive from a modified tag");let t=new wq([],null,[]);if(t.set.push(t),e)for(let n of e.set)t.set.push(n);return t}static defineModifier(){let e=new Sq;return t=>t.modified.indexOf(e)>-1?t:Sq.get(t.base||t,t.modified.concat(e).sort(((e,t)=>e.id-t.id)))}}let kq=0;class Sq{constructor(){this.instances=[],this.id=kq++}static get(e,t){if(!t.length)return e;let n=t[0].instances.find((n=>n.base==e&&function(e,t){return e.length==t.length&&e.every(((e,n)=>e==t[n]))}(t,n.modified)));if(n)return n;let i=[],r=new wq(i,e,t);for(let o of t)o.instances.push(r);let s=function(e){let t=[[]];for(let n=0;n<e.length;n++)for(let i=0,r=t.length;i<r;i++)t.push(t[i].concat(e[n]));return t.sort(((e,t)=>t.length-e.length))}(t);for(let o of e.set)if(!o.modified.length)for(let e of s)i.push(Sq.get(o,e));return r}}function xq(e){let t=Object.create(null);for(let n in e){let i=e[n];Array.isArray(i)||(i=[i]);for(let e of n.split(" "))if(e){let n=[],r=2,s=e;for(let t=0;;){if("..."==s&&t>0&&t+3==e.length){r=1;break}let i=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(s);if(!i)throw new RangeError("Invalid path: "+e);if(n.push("*"==i[0]?"":'"'==i[0][0]?JSON.parse(i[0]):i[0]),t+=i[0].length,t==e.length)break;let o=e[t++];if(t==e.length&&"!"==o){r=0;break}if("/"!=o)throw new RangeError("Invalid path: "+e);s=e.slice(t)}let o=n.length-1,a=n[o];if(!a)throw new RangeError("Invalid path: "+e);let l=new _q(i,r,o>0?n.slice(0,o):null);t[a]=l.sort(t[a])}}return Tq.add(t)}const Tq=new WU;class _q{constructor(e,t,n,i){this.tags=e,this.mode=t,this.context=n,this.next=i}get opaque(){return 0==this.mode}get inherit(){return 1==this.mode}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}function Pq(e,t){let n=Object.create(null);for(let s of e)if(Array.isArray(s.tag))for(let e of s.tag)n[e.id]=s.class;else n[s.tag.id]=s.class;let{scope:i,all:r=null}=t||{};return{style:e=>{let t=r;for(let i of e)for(let e of i.set){let i=n[e.id];if(i){t=t?t+" "+i:i;break}}return t},scope:i}}_q.empty=new _q([],2,null);const Cq=wq.define,Eq=Cq(),Qq=Cq(),Aq=Cq(Qq),Rq=Cq(Qq),Nq=Cq(),Iq=Cq(Nq),Dq=Cq(Nq),Mq=Cq(),Lq=Cq(Mq),$q=Cq(),Uq=Cq(),qq=Cq(),Vq=Cq(qq),zq=Cq(),jq={comment:Eq,lineComment:Cq(Eq),blockComment:Cq(Eq),docComment:Cq(Eq),name:Qq,variableName:Cq(Qq),typeName:Aq,tagName:Cq(Aq),propertyName:Rq,attributeName:Cq(Rq),className:Cq(Qq),labelName:Cq(Qq),namespace:Cq(Qq),macroName:Cq(Qq),literal:Nq,string:Iq,docString:Cq(Iq),character:Cq(Iq),attributeValue:Cq(Iq),number:Dq,integer:Cq(Dq),float:Cq(Dq),bool:Cq(Nq),regexp:Cq(Nq),escape:Cq(Nq),color:Cq(Nq),url:Cq(Nq),keyword:$q,self:Cq($q),null:Cq($q),atom:Cq($q),unit:Cq($q),modifier:Cq($q),operatorKeyword:Cq($q),controlKeyword:Cq($q),definitionKeyword:Cq($q),moduleKeyword:Cq($q),operator:Uq,derefOperator:Cq(Uq),arithmeticOperator:Cq(Uq),logicOperator:Cq(Uq),bitwiseOperator:Cq(Uq),compareOperator:Cq(Uq),updateOperator:Cq(Uq),definitionOperator:Cq(Uq),typeOperator:Cq(Uq),controlOperator:Cq(Uq),punctuation:qq,separator:Cq(qq),bracket:Vq,angleBracket:Cq(Vq),squareBracket:Cq(Vq),paren:Cq(Vq),brace:Cq(Vq),content:Mq,heading:Lq,heading1:Cq(Lq),heading2:Cq(Lq),heading3:Cq(Lq),heading4:Cq(Lq),heading5:Cq(Lq),heading6:Cq(Lq),contentSeparator:Cq(Mq),list:Cq(Mq),quote:Cq(Mq),emphasis:Cq(Mq),strong:Cq(Mq),link:Cq(Mq),monospace:Cq(Mq),strikethrough:Cq(Mq),inserted:Cq(),deleted:Cq(),changed:Cq(),invalid:Cq(),meta:zq,documentMeta:Cq(zq),annotation:Cq(zq),processingInstruction:Cq(zq),definition:wq.defineModifier(),constant:wq.defineModifier(),function:wq.defineModifier(),standard:wq.defineModifier(),local:wq.defineModifier(),special:wq.defineModifier()};Pq([{tag:jq.link,class:"tok-link"},{tag:jq.heading,class:"tok-heading"},{tag:jq.emphasis,class:"tok-emphasis"},{tag:jq.strong,class:"tok-strong"},{tag:jq.keyword,class:"tok-keyword"},{tag:jq.atom,class:"tok-atom"},{tag:jq.bool,class:"tok-bool"},{tag:jq.url,class:"tok-url"},{tag:jq.labelName,class:"tok-labelName"},{tag:jq.inserted,class:"tok-inserted"},{tag:jq.deleted,class:"tok-deleted"},{tag:jq.literal,class:"tok-literal"},{tag:jq.string,class:"tok-string"},{tag:jq.number,class:"tok-number"},{tag:[jq.regexp,jq.escape,jq.special(jq.string)],class:"tok-string2"},{tag:jq.variableName,class:"tok-variableName"},{tag:jq.local(jq.variableName),class:"tok-variableName tok-local"},{tag:jq.definition(jq.variableName),class:"tok-variableName tok-definition"},{tag:jq.special(jq.variableName),class:"tok-variableName2"},{tag:jq.definition(jq.propertyName),class:"tok-propertyName tok-definition"},{tag:jq.typeName,class:"tok-typeName"},{tag:jq.namespace,class:"tok-namespace"},{tag:jq.className,class:"tok-className"},{tag:jq.macroName,class:"tok-macroName"},{tag:jq.propertyName,class:"tok-propertyName"},{tag:jq.operator,class:"tok-operator"},{tag:jq.comment,class:"tok-comment"},{tag:jq.meta,class:"tok-meta"},{tag:jq.invalid,class:"tok-invalid"},{tag:jq.punctuation,class:"tok-punctuation"}]);var Bq;const Fq=new WU;function Wq(e){return Lm.define({combine:e?t=>t.concat(e):void 0})}const Xq=new WU;class Yq{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";this.data=e,this.name=i,TO.prototype.hasOwnProperty("tree")||Object.defineProperty(TO.prototype,"tree",{get(){return Hq(this)}}),this.parser=t,this.extension=[oV.of(this),TO.languageData.of(((e,t,n)=>{let i=Gq(e,t,n),r=i.type.prop(Fq);if(!r)return[];let s=e.facet(r),o=i.type.prop(Xq);if(o){let r=i.resolve(t-i.from,n);for(let t of o)if(t.test(r,e)){let n=e.facet(t.facet);return"replace"==t.type?n:n.concat(s)}}return s}))].concat(n)}isActiveAt(e,t){return Gq(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1).type.prop(Fq)==this.data}findRegions(e){let t=e.facet(oV);if((null===t||void 0===t?void 0:t.data)==this.data)return[{from:0,to:e.doc.length}];if(!t||!t.allowsNesting)return[];let n=[],i=(e,t)=>{if(e.prop(Fq)==this.data)return void n.push({from:t,to:t+e.length});let r=e.prop(WU.mounted);if(r){if(r.tree.prop(Fq)==this.data){if(r.overlay)for(let e of r.overlay)n.push({from:e.from+t,to:e.to+t});else n.push({from:t,to:t+e.length});return}if(r.overlay){let e=n.length;if(i(r.tree,r.overlay[0].from+t),n.length>e)return}}for(let n=0;n<e.children.length;n++){let r=e.children[n];r instanceof JU&&i(r,e.positions[n]+t)}};return i(Hq(e),0),n}get allowsNesting(){return!0}}function Gq(e,t,n){let i=e.facet(oV),r=Hq(e).topNode;if(!i||i.allowsNesting)for(let s=r;s;s=s.enter(t,n,KU.ExcludeBuffers))s.type.isTop&&(r=s);return r}Yq.setState=fO.define();class Zq extends Yq{constructor(e,t,n){super(e,t,[],n),this.parser=t}static define(e){let t=Wq(e.languageData);return new Zq(t,e.parser.configure({props:[Fq.add((e=>e.isTop?t:void 0))]}),e.name)}configure(e,t){return new Zq(this.data,this.parser.configure(e),t||this.name)}get allowsNesting(){return this.parser.hasWrappers()}}function Hq(e){let t=e.field(Yq.state,!1);return t?t.tree:JU.empty}class Kq{constructor(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}get length(){return this.doc.length}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,t){let n=this.cursorPos-this.string.length;return e<n||t>=this.cursorPos?this.doc.sliceString(e,t):this.string.slice(e-n,t-n)}}let Jq=null;class eV{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3?arguments[3]:void 0,r=arguments.length>4?arguments[4]:void 0,s=arguments.length>5?arguments[5]:void 0,o=arguments.length>6?arguments[6]:void 0,a=arguments.length>7?arguments[7]:void 0;this.parser=e,this.state=t,this.fragments=n,this.tree=i,this.treeLen=r,this.viewport=s,this.skipped=o,this.scheduleOn=a,this.parse=null,this.tempSkipped=[]}static create(e,t,n){return new eV(e,t,[],JU.empty,0,n,[],null)}startParse(){return this.parser.startParse(new Kq(this.state.doc),this.fragments)}work(e,t){return null!=t&&t>=this.state.doc.length&&(t=void 0),this.tree!=JU.empty&&this.isDone(null!==t&&void 0!==t?t:this.state.doc.length)?(this.takeTree(),!0):this.withContext((()=>{var n;if("number"==typeof e){let t=Date.now()+e;e=()=>Date.now()>t}for(this.parse||(this.parse=this.startParse()),null!=t&&(null==this.parse.stoppedAt||this.parse.stoppedAt>t)&&t<this.state.doc.length&&this.parse.stopAt(t);;){let i=this.parse.advance();if(i){if(this.fragments=this.withoutTempSkipped(Oq.addTree(i,this.fragments,null!=this.parse.stoppedAt)),this.treeLen=null!==(n=this.parse.stoppedAt)&&void 0!==n?n:this.state.doc.length,this.tree=i,this.parse=null,!(this.treeLen<(null!==t&&void 0!==t?t:this.state.doc.length)))return!0;this.parse=this.startParse()}if(e())return!1}}))}takeTree(){let e,t;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((null==this.parse.stoppedAt||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext((()=>{for(;!(t=this.parse.advance()););})),this.treeLen=e,this.tree=t,this.fragments=this.withoutTempSkipped(Oq.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let t=Jq;Jq=this;try{return e()}finally{Jq=t}}withoutTempSkipped(e){for(let t;t=this.tempSkipped.pop();)e=tV(e,t.from,t.to);return e}changes(e,t){let{fragments:n,tree:i,treeLen:r,viewport:s,skipped:o}=this;if(this.takeTree(),!e.empty){let t=[];if(e.iterChangedRanges(((e,n,i,r)=>t.push({fromA:e,toA:n,fromB:i,toB:r}))),n=Oq.applyChanges(n,t),i=JU.empty,r=0,s={from:e.mapPos(s.from,-1),to:e.mapPos(s.to,1)},this.skipped.length){o=[];for(let t of this.skipped){let n=e.mapPos(t.from,1),i=e.mapPos(t.to,-1);n<i&&o.push({from:n,to:i})}}}return new eV(this.parser,t,n,i,r,s,o,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let t=this.skipped.length;for(let n=0;n<this.skipped.length;n++){let{from:t,to:i}=this.skipped[n];t<e.to&&i>e.from&&(this.fragments=tV(this.fragments,t,i),this.skipped.splice(n--,1))}return!(this.skipped.length>=t)&&(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,t){this.skipped.push({from:e,to:t})}static getSkippingParser(e){return new class extends vq{createParse(t,n,i){let r=i[0].from,s=i[i.length-1].to;return{parsedPos:r,advance(){let t=Jq;if(t){for(let e of i)t.tempSkipped.push(e);e&&(t.scheduleOn=t.scheduleOn?Promise.all([t.scheduleOn,e]):e)}return this.parsedPos=s,new JU(GU.none,[],[],s-r)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let t=this.fragments;return this.treeLen>=e&&t.length&&0==t[0].from&&t[0].to>=e}static get(){return Jq}}function tV(e,t,n){return Oq.applyChanges(e,[{fromA:t,toA:n,fromB:t,toB:n}])}class nV{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let t=this.context.changes(e.changes,e.state),n=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),t.viewport.to);return t.work(20,n)||t.takeTree(),new nV(t)}static init(e){let t=Math.min(3e3,e.doc.length),n=eV.create(e.facet(oV).parser,e,{from:0,to:t});return n.work(20,t)||n.takeTree(),new nV(n)}}Yq.state=Bm.define({create:nV.init,update(e,t){for(let n of t.effects)if(n.is(Yq.setState))return n.value;return t.startState.facet(oV)!=t.state.facet(oV)?nV.init(t.state):e.apply(t)}});let iV=e=>{let t=setTimeout((()=>e()),500);return()=>clearTimeout(t)};"undefined"!=typeof requestIdleCallback&&(iV=e=>{let t=-1,n=setTimeout((()=>{t=requestIdleCallback(e,{timeout:400})}),100);return()=>t<0?clearTimeout(n):cancelIdleCallback(t)});const rV="undefined"!=typeof navigator&&(null===(Bq=navigator.scheduling)||void 0===Bq?void 0:Bq.isInputPending)?()=>navigator.scheduling.isInputPending():null,sV=Ky.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let t=this.view.state.field(Yq.state).context;(t.updateViewport(e.view.viewport)||this.view.viewport.to>t.treeLen)&&this.scheduleWork(),(e.docChanged||e.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(t)}scheduleWork(){if(this.working)return;let{state:e}=this.view,t=e.field(Yq.state);t.tree==t.context.tree&&t.context.isDone(e.doc.length)||(this.working=iV(this.work))}work(e){this.working=null;let t=Date.now();if(this.chunkEnd<t&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=t+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:n,viewport:{to:i}}=this.view,r=n.field(Yq.state);if(r.tree==r.context.tree&&r.context.isDone(i+1e5))return;let s=Date.now()+Math.min(this.chunkBudget,100,e&&!rV?Math.max(25,e.timeRemaining()-5):1e9),o=r.context.treeLen<i&&n.doc.length>i+1e3,a=r.context.work((()=>rV&&rV()||Date.now()>s),i+(o?0:1e5));this.chunkBudget-=Date.now()-t,(a||this.chunkBudget<=0)&&(r.context.takeTree(),this.view.dispatch({effects:Yq.setState.of(new nV(r.context))})),this.chunkBudget>0&&(!a||o)&&this.scheduleWork(),this.checkAsyncSchedule(r.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then((()=>this.scheduleWork())).catch((e=>Yy(this.view.state,e))).then((()=>this.workScheduled--)),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),oV=Lm.define({combine:e=>e.length?e[0]:null,enables:e=>[Yq.state,sV,Gw.contentAttributes.compute([e],(t=>{let n=t.facet(e);return n&&n.name?{"data-language":n.name}:{}}))]});class aV{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];this.language=e,this.support=t,this.extension=[e,t]}}const lV=new WU;function hV(e){let{closing:t,align:n=!0,units:i=1}=e;return e=>cV(e,n,i,t)}function cV(e,t,n,i,r){let s=e.textAfter,o=s.match(/^\s*/)[0].length,a=i&&s.slice(o,o+i.length)==i||r==e.pos+o,l=t?function(e){let t=e.node,n=t.childAfter(t.from),i=t.lastChild;if(!n)return null;let r=e.options.simulateBreak,s=e.state.doc.lineAt(n.from),o=null==r||r<=s.from?s.to:Math.min(s.to,r);for(let a=n.to;;){let e=t.childAfter(a);if(!e||e==i)return null;if(!e.type.isSkipped)return e.from<o?n:null;a=e.to}}(e):null;return l?a?e.column(l.from):e.column(l.to):e.baseIndent+(a?0:e.unit*n)}function uV(){let{except:e,units:t=1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n=>{let i=e&&e.test(n.textAfter);return n.baseIndent+(i?0:t*n.unit)}}const dV=new WU;class fV{constructor(e,t){let n;function i(e){let t=YO.newName();return(n||Object.create(null))["."+t]=e,t}this.specs=e;const r="string"==typeof t.all?t.all:t.all?i(t.all):void 0,s=t.scope;this.scope=s instanceof Yq?e=>e.prop(Fq)==s.data:s?e=>e==s:void 0,this.style=Pq(e.map((e=>({tag:e.tag,class:e.class||i(Object.assign({},e,{tag:null}))}))),{all:r}).style,this.module=n?new YO(n):null,this.themeType=t.themeType}static define(e,t){return new fV(e,t||{})}}jq.meta,jq.link,jq.heading,jq.emphasis,jq.strong,jq.strikethrough,jq.keyword,jq.atom,jq.bool,jq.url,jq.contentSeparator,jq.labelName,jq.literal,jq.inserted,jq.string,jq.deleted,jq.regexp,jq.escape,jq.string,jq.variableName,jq.variableName,jq.typeName,jq.namespace,jq.className,jq.variableName,jq.macroName,jq.propertyName,jq.comment,jq.invalid;const pV=Object.create(null),gV=[GU.none],mV=[],OV=Object.create(null),vV=Object.create(null);for(let[n,Sk]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])vV[n]=bV(pV,Sk);function yV(e,t){mV.indexOf(e)>-1||(mV.push(e),console.warn(t))}function bV(e,t){let n=[];for(let a of t.split(" ")){let t=[];for(let n of a.split(".")){let i=e[n]||jq[n];i?"function"==typeof i?t.length?t=t.map(i):yV(n,"Modifier ".concat(n," used at start of tag")):t.length?yV(n,"Tag ".concat(n," used as modifier")):t=Array.isArray(i)?i:[i]:yV(n,"Unknown highlighting tag ".concat(n))}for(let e of t)n.push(e)}if(!n.length)return 0;let i=t.replace(/ /g,"_"),r=i+" "+n.map((e=>e.id)),s=OV[r];if(s)return s.id;let o=OV[r]=GU.define({id:gV.length,name:i,props:[xq({[i]:n})]});return gV.push(o),o.id}gy.RTL,gy.LTR;const wV=Zq.define({name:"java",parser:zU.configure({props:[lV.add({IfStatement:uV({except:/^\s*({|else\b)/}),TryStatement:uV({except:/^\s*({|catch|finally)\b/}),LabeledStatement:e=>e.baseIndent,SwitchBlock:e=>{let t=e.textAfter,n=/^\s*\}/.test(t),i=/^\s*(case|default)\b/.test(t);return e.baseIndent+(n?0:i?1:2)*e.unit},Block:hV({closing:"}"}),BlockComment:()=>null,Statement:uV({except:/^{/})}),dV.add({"Block SwitchBlock ClassBody ElementValueArrayInitializer ModuleBody EnumBody ConstructorBody InterfaceBody ArrayInitializer":function(e){let t=e.firstChild,n=e.lastChild;return t&&t.to<n.from?{from:t.to,to:n.type.isError?e.to:n.from}:null},BlockComment:e=>({from:e.from+2,to:e.to-2})})]}),languageData:{commentTokens:{line:"//",block:{open:"/*",close:"*/"}},indentOnInput:/^\s*(?:case |default:|\{|\})$/}});const kV=e=>{let{currentQuestion:t,onCodeSubmit:n,onCodeChange:i,userId:s,language:o,activityOrder:a,setOutput:l}=e;const[h,c]=(0,r.useState)(""),[u,d]=(0,r.useState)(""),f="Java"===o?new aV(wV):new wL(O$,[O$.data.of({autocomplete:u$}),O$.data.of({autocomplete:p$})]),{setContainer:p}=lI({value:h,theme:iI,extensions:[f],onChange:e=>{c(e),i(e)}});(0,r.useEffect)((()=>{(async()=>{const e=wf(Xg,"users",s,"activities",o,"activityOrder",a,"questions",t.id),n=await yp(e);if(n.exists()){const e=n.data().userCode;c(e)}else{const e=((e,t)=>{if("Java"===t)switch(e){case"add":return"public static int ".concat(e,"(int a, int b) {\n    return a + b;\n}");case"subtract":return"public static int ".concat(e,"(int a, int b) {\n    return a - b;\n}");case"multiply":return"public static int ".concat(e,"(int a, int b) {\n    return a * b;\n}");case"divide":return"public static int ".concat(e,"(int a, int b) {\n    return a / b;\n}");case"power":return"public static int ".concat(e,"(int a, int b) {\n    return (int) Math.pow(a, b);\n}");case"mod":return"public static int ".concat(e,"(int a, int b) {\n    return a % b;\n}");case"concat_strings":return"public static String ".concat(e,"(String a, String b) {\n    return a + b;\n}");case"find_max":return"public static int ".concat(e,"(int a, int b) {\n    return Math.max(a, b);\n}");case"is_even":return"public static boolean ".concat(e,"(int a) {\n    return a % 2 == 0;\n}");case"factorial":return"public static int ".concat(e,"(int n) {\n    if (n == 0) return 1;\n    return n * factorial(n - 1);\n}");default:return"// Write your code here\n// You can start coding right away\n// The editor will scroll if the content gets too long\n"}else switch(e){case"add":case"subtract":case"multiply":case"divide":case"power":case"mod":case"concat_strings":case"find_max":return"def ".concat(e,"(a, b):\n    # Write your code here\n    pass");case"is_even":return"def ".concat(e,"(a):\n    # Write your code here\n    pass");case"factorial":return"def ".concat(e,"(n):\n    # Write your code here\n    pass");default:return"# Write your code here\n# You can start coding right away\n# The editor will scroll if the content gets too long\n"}})(t.functionName,o);c(e),d(e)}})()}),[t,s,o,a]);return(0,Gg.jsxs)("div",{className:"coding-section",children:[(0,Gg.jsx)("p",{className:"coding-question",children:t.codingQuestion}),(0,Gg.jsx)("div",{ref:p,className:"code-editor"}),(0,Gg.jsx)("button",{onClick:()=>{if("Python"===o){const e=e=>{l((t=>t+e+"\n"))},t=e=>{if(void 0===Sk.builtinFiles||void 0===Sk.builtinFiles.files[e])throw new Error("File not found: '"+e+"'");return Sk.builtinFiles.files[e]};Sk.pre="output",Sk.configure({output:e,read:t}),(Sk.TurtleGraphics||(Sk.TurtleGraphics={})).target="mycanvas",Sk.misceval.asyncToPromise((()=>Sk.importMainWithBody("<stdin>",!1,h,!0))).catch((t=>{e(t.toString())}))}else l("Running Java code is not supported in this demo. Please set up a server-side environment to compile and run Java code.")},children:"Run"}),(0,Gg.jsx)("button",{onClick:()=>n(h),children:"Submit"}),(0,Gg.jsx)("button",{onClick:()=>{c(u)},children:"Restart"})]})};function SV(e,t){return function(){return e.apply(t,arguments)}}const{toString:xV}=Object.prototype,{getPrototypeOf:TV}=Object,_V=(e=>t=>{const n=xV.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),PV=e=>(e=e.toLowerCase(),t=>_V(t)===e),CV=e=>t=>typeof t===e,{isArray:EV}=Array,QV=CV("undefined");const AV=PV("ArrayBuffer");const RV=CV("string"),NV=CV("function"),IV=CV("number"),DV=e=>null!==e&&"object"===typeof e,MV=e=>{if("object"!==_V(e))return!1;const t=TV(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},LV=PV("Date"),$V=PV("File"),UV=PV("Blob"),qV=PV("FileList"),VV=PV("URLSearchParams"),[zV,jV,BV,FV]=["ReadableStream","Request","Response","Headers"].map(PV);function WV(e,t){let n,i,{allOwnKeys:r=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(null!==e&&"undefined"!==typeof e)if("object"!==typeof e&&(e=[e]),EV(e))for(n=0,i=e.length;n<i;n++)t.call(null,e[n],n,e);else{const i=r?Object.getOwnPropertyNames(e):Object.keys(e),s=i.length;let o;for(n=0;n<s;n++)o=i[n],t.call(null,e[o],o,e)}}function XV(e,t){t=t.toLowerCase();const n=Object.keys(e);let i,r=n.length;for(;r-- >0;)if(i=n[r],t===i.toLowerCase())return i;return null}const YV="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:global,GV=e=>!QV(e)&&e!==YV;const ZV=(HV="undefined"!==typeof Uint8Array&&TV(Uint8Array),e=>HV&&e instanceof HV);var HV;const KV=PV("HTMLFormElement"),JV=(e=>{let{hasOwnProperty:t}=e;return(e,n)=>t.call(e,n)})(Object.prototype),ez=PV("RegExp"),tz=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),i={};WV(n,((n,r)=>{let s;!1!==(s=t(n,r,e))&&(i[r]=s||n)})),Object.defineProperties(e,i)},nz="abcdefghijklmnopqrstuvwxyz",iz="0123456789",rz={DIGIT:iz,ALPHA:nz,ALPHA_DIGIT:nz+nz.toUpperCase()+iz};const sz=PV("AsyncFunction"),oz={isArray:EV,isArrayBuffer:AV,isBuffer:function(e){return null!==e&&!QV(e)&&null!==e.constructor&&!QV(e.constructor)&&NV(e.constructor.isBuffer)&&e.constructor.isBuffer(e)},isFormData:e=>{let t;return e&&("function"===typeof FormData&&e instanceof FormData||NV(e.append)&&("formdata"===(t=_V(e))||"object"===t&&NV(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){let t;return t="undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&AV(e.buffer),t},isString:RV,isNumber:IV,isBoolean:e=>!0===e||!1===e,isObject:DV,isPlainObject:MV,isReadableStream:zV,isRequest:jV,isResponse:BV,isHeaders:FV,isUndefined:QV,isDate:LV,isFile:$V,isBlob:UV,isRegExp:ez,isFunction:NV,isStream:e=>DV(e)&&NV(e.pipe),isURLSearchParams:VV,isTypedArray:ZV,isFileList:qV,forEach:WV,merge:function e(){const{caseless:t}=GV(this)&&this||{},n={},i=(i,r)=>{const s=t&&XV(n,r)||r;MV(n[s])&&MV(i)?n[s]=e(n[s],i):MV(i)?n[s]=e({},i):EV(i)?n[s]=i.slice():n[s]=i};for(let r=0,s=arguments.length;r<s;r++)arguments[r]&&WV(arguments[r],i);return n},extend:function(e,t,n){let{allOwnKeys:i}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return WV(t,((t,i)=>{n&&NV(t)?e[i]=SV(t,n):e[i]=t}),{allOwnKeys:i}),e},trim:e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),inherits:(e,t,n,i)=>{e.prototype=Object.create(t.prototype,i),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},toFlatObject:(e,t,n,i)=>{let r,s,o;const a={};if(t=t||{},null==e)return t;do{for(r=Object.getOwnPropertyNames(e),s=r.length;s-- >0;)o=r[s],i&&!i(o,e,t)||a[o]||(t[o]=e[o],a[o]=!0);e=!1!==n&&TV(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},kindOf:_V,kindOfTest:PV,endsWith:(e,t,n)=>{e=String(e),(void 0===n||n>e.length)&&(n=e.length),n-=t.length;const i=e.indexOf(t,n);return-1!==i&&i===n},toArray:e=>{if(!e)return null;if(EV(e))return e;let t=e.length;if(!IV(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},forEachEntry:(e,t)=>{const n=(e&&e[Symbol.iterator]).call(e);let i;for(;(i=n.next())&&!i.done;){const n=i.value;t.call(e,n[0],n[1])}},matchAll:(e,t)=>{let n;const i=[];for(;null!==(n=e.exec(t));)i.push(n);return i},isHTMLForm:KV,hasOwnProperty:JV,hasOwnProp:JV,reduceDescriptors:tz,freezeMethods:e=>{tz(e,((t,n)=>{if(NV(e)&&-1!==["arguments","caller","callee"].indexOf(n))return!1;const i=e[n];NV(i)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")}))}))},toObjectSet:(e,t)=>{const n={},i=e=>{e.forEach((e=>{n[e]=!0}))};return EV(e)?i(e):i(String(e).split(t)),n},toCamelCase:e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,(function(e,t,n){return t.toUpperCase()+n})),noop:()=>{},toFiniteNumber:(e,t)=>null!=e&&Number.isFinite(e=+e)?e:t,findKey:XV,global:YV,isContextDefined:GV,ALPHABET:rz,generateString:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:16,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:rz.ALPHA_DIGIT,n="";const{length:i}=t;for(;e--;)n+=t[Math.random()*i|0];return n},isSpecCompliantForm:function(e){return!!(e&&NV(e.append)&&"FormData"===e[Symbol.toStringTag]&&e[Symbol.iterator])},toJSONObject:e=>{const t=new Array(10),n=(e,i)=>{if(DV(e)){if(t.indexOf(e)>=0)return;if(!("toJSON"in e)){t[i]=e;const r=EV(e)?[]:{};return WV(e,((e,t)=>{const s=n(e,i+1);!QV(s)&&(r[t]=s)})),t[i]=void 0,r}}return e};return n(e,0)},isAsyncFn:sz,isThenable:e=>e&&(DV(e)||NV(e))&&NV(e.then)&&NV(e.catch)};function az(e,t,n,i,r){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),i&&(this.request=i),r&&(this.response=r)}oz.inherits(az,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:oz.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const lz=az.prototype,hz={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach((e=>{hz[e]={value:e}})),Object.defineProperties(az,hz),Object.defineProperty(lz,"isAxiosError",{value:!0}),az.from=(e,t,n,i,r,s)=>{const o=Object.create(lz);return oz.toFlatObject(e,o,(function(e){return e!==Error.prototype}),(e=>"isAxiosError"!==e)),az.call(o,e.message,t,n,i,r),o.cause=e,o.name=e.name,s&&Object.assign(o,s),o};const cz=az;function uz(e){return oz.isPlainObject(e)||oz.isArray(e)}function dz(e){return oz.endsWith(e,"[]")?e.slice(0,-2):e}function fz(e,t,n){return e?e.concat(t).map((function(e,t){return e=dz(e),!n&&t?"["+e+"]":e})).join(n?".":""):t}const pz=oz.toFlatObject(oz,{},null,(function(e){return/^is[A-Z]/.test(e)}));const gz=function(e,t,n){if(!oz.isObject(e))throw new TypeError("target must be an object");t=t||new FormData;const i=(n=oz.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,(function(e,t){return!oz.isUndefined(t[e])}))).metaTokens,r=n.visitor||h,s=n.dots,o=n.indexes,a=(n.Blob||"undefined"!==typeof Blob&&Blob)&&oz.isSpecCompliantForm(t);if(!oz.isFunction(r))throw new TypeError("visitor must be a function");function l(e){if(null===e)return"";if(oz.isDate(e))return e.toISOString();if(!a&&oz.isBlob(e))throw new cz("Blob is not supported. Use a Buffer instead.");return oz.isArrayBuffer(e)||oz.isTypedArray(e)?a&&"function"===typeof Blob?new Blob([e]):Buffer.from(e):e}function h(e,n,r){let a=e;if(e&&!r&&"object"===typeof e)if(oz.endsWith(n,"{}"))n=i?n:n.slice(0,-2),e=JSON.stringify(e);else if(oz.isArray(e)&&function(e){return oz.isArray(e)&&!e.some(uz)}(e)||(oz.isFileList(e)||oz.endsWith(n,"[]"))&&(a=oz.toArray(e)))return n=dz(n),a.forEach((function(e,i){!oz.isUndefined(e)&&null!==e&&t.append(!0===o?fz([n],i,s):null===o?n:n+"[]",l(e))})),!1;return!!uz(e)||(t.append(fz(r,n,s),l(e)),!1)}const c=[],u=Object.assign(pz,{defaultVisitor:h,convertValue:l,isVisitable:uz});if(!oz.isObject(e))throw new TypeError("data must be an object");return function e(n,i){if(!oz.isUndefined(n)){if(-1!==c.indexOf(n))throw Error("Circular reference detected in "+i.join("."));c.push(n),oz.forEach(n,(function(n,s){!0===(!(oz.isUndefined(n)||null===n)&&r.call(t,n,oz.isString(s)?s.trim():s,i,u))&&e(n,i?i.concat(s):[s])})),c.pop()}}(e),t};function mz(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,(function(e){return t[e]}))}function Oz(e,t){this._pairs=[],e&&gz(e,this,t)}const vz=Oz.prototype;vz.append=function(e,t){this._pairs.push([e,t])},vz.toString=function(e){const t=e?function(t){return e.call(this,t,mz)}:mz;return this._pairs.map((function(e){return t(e[0])+"="+t(e[1])}),"").join("&")};const yz=Oz;function bz(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function wz(e,t,n){if(!t)return e;const i=n&&n.encode||bz,r=n&&n.serialize;let s;if(s=r?r(t,n):oz.isURLSearchParams(t)?t.toString():new yz(t,n).toString(i),s){const t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+s}return e}const kz=class{constructor(){this.handlers=[]}use(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){oz.forEach(this.handlers,(function(t){null!==t&&e(t)}))}},Sz={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},xz={isBrowser:!0,classes:{URLSearchParams:"undefined"!==typeof URLSearchParams?URLSearchParams:yz,FormData:"undefined"!==typeof FormData?FormData:null,Blob:"undefined"!==typeof Blob?Blob:null},protocols:["http","https","file","blob","url","data"]},Tz="undefined"!==typeof window&&"undefined"!==typeof document,_z=(Pz="undefined"!==typeof navigator&&navigator.product,Tz&&["ReactNative","NativeScript","NS"].indexOf(Pz)<0);var Pz;const Cz="undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"===typeof self.importScripts,Ez=Tz&&window.location.href||"http://localhost",Qz={...e,...xz};const Az=function(e){function t(e,n,i,r){let s=e[r++];if("__proto__"===s)return!0;const o=Number.isFinite(+s),a=r>=e.length;if(s=!s&&oz.isArray(i)?i.length:s,a)return oz.hasOwnProp(i,s)?i[s]=[i[s],n]:i[s]=n,!o;i[s]&&oz.isObject(i[s])||(i[s]=[]);return t(e,n,i[s],r)&&oz.isArray(i[s])&&(i[s]=function(e){const t={},n=Object.keys(e);let i;const r=n.length;let s;for(i=0;i<r;i++)s=n[i],t[s]=e[s];return t}(i[s])),!o}if(oz.isFormData(e)&&oz.isFunction(e.entries)){const n={};return oz.forEachEntry(e,((e,i)=>{t(function(e){return oz.matchAll(/\w+|\[(\w*)]/g,e).map((e=>"[]"===e[0]?"":e[1]||e[0]))}(e),i,n,0)})),n}return null};const Rz={transitional:Sz,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const n=t.getContentType()||"",i=n.indexOf("application/json")>-1,r=oz.isObject(e);r&&oz.isHTMLForm(e)&&(e=new FormData(e));if(oz.isFormData(e))return i?JSON.stringify(Az(e)):e;if(oz.isArrayBuffer(e)||oz.isBuffer(e)||oz.isStream(e)||oz.isFile(e)||oz.isBlob(e)||oz.isReadableStream(e))return e;if(oz.isArrayBufferView(e))return e.buffer;if(oz.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let s;if(r){if(n.indexOf("application/x-www-form-urlencoded")>-1)return function(e,t){return gz(e,new Qz.classes.URLSearchParams,Object.assign({visitor:function(e,t,n,i){return Qz.isNode&&oz.isBuffer(e)?(this.append(t,e.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)}},t))}(e,this.formSerializer).toString();if((s=oz.isFileList(e))||n.indexOf("multipart/form-data")>-1){const t=this.env&&this.env.FormData;return gz(s?{"files[]":e}:e,t&&new t,this.formSerializer)}}return r||i?(t.setContentType("application/json",!1),function(e,t,n){if(oz.isString(e))try{return(t||JSON.parse)(e),oz.trim(e)}catch(_F){if("SyntaxError"!==_F.name)throw _F}return(n||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){const t=this.transitional||Rz.transitional,n=t&&t.forcedJSONParsing,i="json"===this.responseType;if(oz.isResponse(e)||oz.isReadableStream(e))return e;if(e&&oz.isString(e)&&(n&&!this.responseType||i)){const n=!(t&&t.silentJSONParsing)&&i;try{return JSON.parse(e)}catch(_F){if(n){if("SyntaxError"===_F.name)throw cz.from(_F,cz.ERR_BAD_RESPONSE,this,null,this.response);throw _F}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Qz.classes.FormData,Blob:Qz.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};oz.forEach(["delete","get","head","post","put","patch"],(e=>{Rz.headers[e]={}}));const Nz=Rz,Iz=oz.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Dz=Symbol("internals");function Mz(e){return e&&String(e).trim().toLowerCase()}function Lz(e){return!1===e||null==e?e:oz.isArray(e)?e.map(Lz):String(e)}function $z(e,t,n,i,r){return oz.isFunction(i)?i.call(this,t,n):(r&&(t=n),oz.isString(t)?oz.isString(i)?-1!==t.indexOf(i):oz.isRegExp(i)?i.test(t):void 0:void 0)}class Uz{constructor(e){e&&this.set(e)}set(e,t,n){const i=this;function r(e,t,n){const r=Mz(t);if(!r)throw new Error("header name must be a non-empty string");const s=oz.findKey(i,r);(!s||void 0===i[s]||!0===n||void 0===n&&!1!==i[s])&&(i[s||t]=Lz(e))}const s=(e,t)=>oz.forEach(e,((e,n)=>r(e,n,t)));if(oz.isPlainObject(e)||e instanceof this.constructor)s(e,t);else if(oz.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim()))s((e=>{const t={};let n,i,r;return e&&e.split("\n").forEach((function(e){r=e.indexOf(":"),n=e.substring(0,r).trim().toLowerCase(),i=e.substring(r+1).trim(),!n||t[n]&&Iz[n]||("set-cookie"===n?t[n]?t[n].push(i):t[n]=[i]:t[n]=t[n]?t[n]+", "+i:i)})),t})(e),t);else if(oz.isHeaders(e))for(const[o,a]of e.entries())r(a,o,n);else null!=e&&r(t,e,n);return this}get(e,t){if(e=Mz(e)){const n=oz.findKey(this,e);if(n){const e=this[n];if(!t)return e;if(!0===t)return function(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let i;for(;i=n.exec(e);)t[i[1]]=i[2];return t}(e);if(oz.isFunction(t))return t.call(this,e,n);if(oz.isRegExp(t))return t.exec(e);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=Mz(e)){const n=oz.findKey(this,e);return!(!n||void 0===this[n]||t&&!$z(0,this[n],n,t))}return!1}delete(e,t){const n=this;let i=!1;function r(e){if(e=Mz(e)){const r=oz.findKey(n,e);!r||t&&!$z(0,n[r],r,t)||(delete n[r],i=!0)}}return oz.isArray(e)?e.forEach(r):r(e),i}clear(e){const t=Object.keys(this);let n=t.length,i=!1;for(;n--;){const r=t[n];e&&!$z(0,this[r],r,e,!0)||(delete this[r],i=!0)}return i}normalize(e){const t=this,n={};return oz.forEach(this,((i,r)=>{const s=oz.findKey(n,r);if(s)return t[s]=Lz(i),void delete t[r];const o=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,((e,t,n)=>t.toUpperCase()+n))}(r):String(r).trim();o!==r&&delete t[r],t[o]=Lz(i),n[o]=!0})),this}concat(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.constructor.concat(this,...t)}toJSON(e){const t=Object.create(null);return oz.forEach(this,((n,i)=>{null!=n&&!1!==n&&(t[i]=e&&oz.isArray(n)?n.join(", "):n)})),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map((e=>{let[t,n]=e;return t+": "+n})).join("\n")}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e){const t=new this(e);for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];return i.forEach((e=>t.set(e))),t}static accessor(e){const t=(this[Dz]=this[Dz]={accessors:{}}).accessors,n=this.prototype;function i(e){const i=Mz(e);t[i]||(!function(e,t){const n=oz.toCamelCase(" "+t);["get","set","has"].forEach((i=>{Object.defineProperty(e,i+n,{value:function(e,n,r){return this[i].call(this,t,e,n,r)},configurable:!0})}))}(n,e),t[i]=!0)}return oz.isArray(e)?e.forEach(i):i(e),this}}Uz.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),oz.reduceDescriptors(Uz.prototype,((e,t)=>{let{value:n}=e,i=t[0].toUpperCase()+t.slice(1);return{get:()=>n,set(e){this[i]=e}}})),oz.freezeMethods(Uz);const qz=Uz;function Vz(e,t){const n=this||Nz,i=t||n,r=qz.from(i.headers);let s=i.data;return oz.forEach(e,(function(e){s=e.call(n,s,r.normalize(),t?t.status:void 0)})),r.normalize(),s}function zz(e){return!(!e||!e.__CANCEL__)}function jz(e,t,n){cz.call(this,null==e?"canceled":e,cz.ERR_CANCELED,t,n),this.name="CanceledError"}oz.inherits(jz,cz,{__CANCEL__:!0});const Bz=jz;function Fz(e,t,n){const i=n.config.validateStatus;n.status&&i&&!i(n.status)?t(new cz("Request failed with status code "+n.status,[cz.ERR_BAD_REQUEST,cz.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):e(n)}const Wz=function(e,t){e=e||10;const n=new Array(e),i=new Array(e);let r,s=0,o=0;return t=void 0!==t?t:1e3,function(a){const l=Date.now(),h=i[o];r||(r=l),n[s]=a,i[s]=l;let c=o,u=0;for(;c!==s;)u+=n[c++],c%=e;if(s=(s+1)%e,s===o&&(o=(o+1)%e),l-r<t)return;const d=h&&l-h;return d?Math.round(1e3*u/d):void 0}};const Xz=function(e,t){let n=0;const i=1e3/t;let r=null;return function(){const t=!0===this,s=Date.now();if(t||s-n>i)return r&&(clearTimeout(r),r=null),n=s,e.apply(null,arguments);r||(r=setTimeout((()=>(r=null,n=Date.now(),e.apply(null,arguments))),i-(s-n)))}},Yz=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,i=0;const r=Wz(50,250);return Xz((n=>{const s=n.loaded,o=n.lengthComputable?n.total:void 0,a=s-i,l=r(a);i=s;const h={loaded:s,total:o,progress:o?s/o:void 0,bytes:a,rate:l||void 0,estimated:l&&o&&s<=o?(o-s)/l:void 0,event:n,lengthComputable:null!=o};h[t?"download":"upload"]=!0,e(h)}),n)},Gz=Qz.hasStandardBrowserEnv?function(){const e=/(msie|trident)/i.test(navigator.userAgent),t=document.createElement("a");let n;function i(n){let i=n;return e&&(t.setAttribute("href",i),i=t.href),t.setAttribute("href",i),{href:t.href,protocol:t.protocol?t.protocol.replace(/:$/,""):"",host:t.host,search:t.search?t.search.replace(/^\?/,""):"",hash:t.hash?t.hash.replace(/^#/,""):"",hostname:t.hostname,port:t.port,pathname:"/"===t.pathname.charAt(0)?t.pathname:"/"+t.pathname}}return n=i(window.location.href),function(e){const t=oz.isString(e)?i(e):e;return t.protocol===n.protocol&&t.host===n.host}}():function(){return!0},Zz=Qz.hasStandardBrowserEnv?{write(e,t,n,i,r,s){const o=[e+"="+encodeURIComponent(t)];oz.isNumber(n)&&o.push("expires="+new Date(n).toGMTString()),oz.isString(i)&&o.push("path="+i),oz.isString(r)&&o.push("domain="+r),!0===s&&o.push("secure"),document.cookie=o.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read:()=>null,remove(){}};function Hz(e,t){return e&&!function(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}(t)?function(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}const Kz=e=>e instanceof qz?{...e}:e;function Jz(e,t){t=t||{};const n={};function i(e,t,n){return oz.isPlainObject(e)&&oz.isPlainObject(t)?oz.merge.call({caseless:n},e,t):oz.isPlainObject(t)?oz.merge({},t):oz.isArray(t)?t.slice():t}function r(e,t,n){return oz.isUndefined(t)?oz.isUndefined(e)?void 0:i(void 0,e,n):i(e,t,n)}function s(e,t){if(!oz.isUndefined(t))return i(void 0,t)}function o(e,t){return oz.isUndefined(t)?oz.isUndefined(e)?void 0:i(void 0,e):i(void 0,t)}function a(n,r,s){return s in t?i(n,r):s in e?i(void 0,n):void 0}const l={url:s,method:s,data:s,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(e,t)=>r(Kz(e),Kz(t),!0)};return oz.forEach(Object.keys(Object.assign({},e,t)),(function(i){const s=l[i]||r,o=s(e[i],t[i],i);oz.isUndefined(o)&&s!==a||(n[i]=o)})),n}const ej=e=>{const t=Jz({},e);let n,{data:i,withXSRFToken:r,xsrfHeaderName:s,xsrfCookieName:o,headers:a,auth:l}=t;if(t.headers=a=qz.from(a),t.url=wz(Hz(t.baseURL,t.url),e.params,e.paramsSerializer),l&&a.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):""))),oz.isFormData(i))if(Qz.hasStandardBrowserEnv||Qz.hasStandardBrowserWebWorkerEnv)a.setContentType(void 0);else if(!1!==(n=a.getContentType())){const[e,...t]=n?n.split(";").map((e=>e.trim())).filter(Boolean):[];a.setContentType([e||"multipart/form-data",...t].join("; "))}if(Qz.hasStandardBrowserEnv&&(r&&oz.isFunction(r)&&(r=r(t)),r||!1!==r&&Gz(t.url))){const e=s&&o&&Zz.read(o);e&&a.set(s,e)}return t},tj="undefined"!==typeof XMLHttpRequest&&function(e){return new Promise((function(t,n){const i=ej(e);let r=i.data;const s=qz.from(i.headers).normalize();let o,{responseType:a}=i;function l(){i.cancelToken&&i.cancelToken.unsubscribe(o),i.signal&&i.signal.removeEventListener("abort",o)}let h=new XMLHttpRequest;function c(){if(!h)return;const i=qz.from("getAllResponseHeaders"in h&&h.getAllResponseHeaders());Fz((function(e){t(e),l()}),(function(e){n(e),l()}),{data:a&&"text"!==a&&"json"!==a?h.response:h.responseText,status:h.status,statusText:h.statusText,headers:i,config:e,request:h}),h=null}h.open(i.method.toUpperCase(),i.url,!0),h.timeout=i.timeout,"onloadend"in h?h.onloadend=c:h.onreadystatechange=function(){h&&4===h.readyState&&(0!==h.status||h.responseURL&&0===h.responseURL.indexOf("file:"))&&setTimeout(c)},h.onabort=function(){h&&(n(new cz("Request aborted",cz.ECONNABORTED,i,h)),h=null)},h.onerror=function(){n(new cz("Network Error",cz.ERR_NETWORK,i,h)),h=null},h.ontimeout=function(){let e=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const t=i.transitional||Sz;i.timeoutErrorMessage&&(e=i.timeoutErrorMessage),n(new cz(e,t.clarifyTimeoutError?cz.ETIMEDOUT:cz.ECONNABORTED,i,h)),h=null},void 0===r&&s.setContentType(null),"setRequestHeader"in h&&oz.forEach(s.toJSON(),(function(e,t){h.setRequestHeader(t,e)})),oz.isUndefined(i.withCredentials)||(h.withCredentials=!!i.withCredentials),a&&"json"!==a&&(h.responseType=i.responseType),"function"===typeof i.onDownloadProgress&&h.addEventListener("progress",Yz(i.onDownloadProgress,!0)),"function"===typeof i.onUploadProgress&&h.upload&&h.upload.addEventListener("progress",Yz(i.onUploadProgress)),(i.cancelToken||i.signal)&&(o=t=>{h&&(n(!t||t.type?new Bz(null,e,h):t),h.abort(),h=null)},i.cancelToken&&i.cancelToken.subscribe(o),i.signal&&(i.signal.aborted?o():i.signal.addEventListener("abort",o)));const u=function(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}(i.url);u&&-1===Qz.protocols.indexOf(u)?n(new cz("Unsupported protocol "+u+":",cz.ERR_BAD_REQUEST,e)):h.send(r||null)}))},nj=(e,t)=>{let n,i=new AbortController;const r=function(e){if(!n){n=!0,o();const t=e instanceof Error?e:this.reason;i.abort(t instanceof cz?t:new Bz(t instanceof Error?t.message:t))}};let s=t&&setTimeout((()=>{r(new cz("timeout ".concat(t," of ms exceeded"),cz.ETIMEDOUT))}),t);const o=()=>{e&&(s&&clearTimeout(s),s=null,e.forEach((e=>{e&&(e.removeEventListener?e.removeEventListener("abort",r):e.unsubscribe(r))})),e=null)};e.forEach((e=>e&&e.addEventListener&&e.addEventListener("abort",r)));const{signal:a}=i;return a.unsubscribe=o,[a,()=>{s&&clearTimeout(s),s=null}]},ij=function*(e,t){let n=e.byteLength;if(!t||n<t)return void(yield e);let i,r=0;for(;r<n;)i=r+t,yield e.slice(r,i),r=i},rj=(e,t,n,i,r)=>{const s=async function*(e,t,n){for await(const i of e)yield*ij(ArrayBuffer.isView(i)?i:await n(String(i)),t)}(e,t,r);let o=0;return new ReadableStream({type:"bytes",async pull(e){const{done:t,value:r}=await s.next();if(t)return e.close(),void i();let a=r.byteLength;n&&n(o+=a),e.enqueue(new Uint8Array(r))},cancel:e=>(i(e),s.return())},{highWaterMark:2})},sj=(e,t)=>{const n=null!=e;return i=>setTimeout((()=>t({lengthComputable:n,total:e,loaded:i})))},oj="function"===typeof fetch&&"function"===typeof Request&&"function"===typeof Response,aj=oj&&"function"===typeof ReadableStream,lj=oj&&("function"===typeof TextEncoder?(hj=new TextEncoder,e=>hj.encode(e)):async e=>new Uint8Array(await new Response(e).arrayBuffer()));var hj;const cj=aj&&(()=>{let e=!1;const t=new Request(Qz.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t})(),uj=aj&&!!(()=>{try{return oz.isReadableStream(new Response("").body)}catch(e){}})(),dj={stream:uj&&(e=>e.body)};var fj;oj&&(fj=new Response,["text","arrayBuffer","blob","formData","stream"].forEach((e=>{!dj[e]&&(dj[e]=oz.isFunction(fj[e])?t=>t[e]():(t,n)=>{throw new cz("Response type '".concat(e,"' is not supported"),cz.ERR_NOT_SUPPORT,n)})})));const pj=async(e,t)=>{const n=oz.toFiniteNumber(e.getContentLength());return null==n?(async e=>null==e?0:oz.isBlob(e)?e.size:oz.isSpecCompliantForm(e)?(await new Request(e).arrayBuffer()).byteLength:oz.isArrayBufferView(e)?e.byteLength:(oz.isURLSearchParams(e)&&(e+=""),oz.isString(e)?(await lj(e)).byteLength:void 0))(t):n},gj=oj&&(async e=>{let{url:t,method:n,data:i,signal:r,cancelToken:s,timeout:o,onDownloadProgress:a,onUploadProgress:l,responseType:h,headers:c,withCredentials:u="same-origin",fetchOptions:d}=ej(e);h=h?(h+"").toLowerCase():"text";let f,p,[g,m]=r||s||o?nj([r,s],o):[];const O=()=>{!f&&setTimeout((()=>{g&&g.unsubscribe()})),f=!0};let v;try{if(l&&cj&&"get"!==n&&"head"!==n&&0!==(v=await pj(c,i))){let e,n=new Request(t,{method:"POST",body:i,duplex:"half"});oz.isFormData(i)&&(e=n.headers.get("content-type"))&&c.setContentType(e),n.body&&(i=rj(n.body,65536,sj(v,Yz(l)),null,lj))}oz.isString(u)||(u=u?"cors":"omit"),p=new Request(t,{...d,signal:g,method:n.toUpperCase(),headers:c.normalize().toJSON(),body:i,duplex:"half",withCredentials:u});let r=await fetch(p);const s=uj&&("stream"===h||"response"===h);if(uj&&(a||s)){const e={};["status","statusText","headers"].forEach((t=>{e[t]=r[t]}));const t=oz.toFiniteNumber(r.headers.get("content-length"));r=new Response(rj(r.body,65536,a&&sj(t,Yz(a,!0)),s&&O,lj),e)}h=h||"text";let o=await dj[oz.findKey(dj,h)||"text"](r,e);return!s&&O(),m&&m(),await new Promise(((t,n)=>{Fz(t,n,{data:o,headers:qz.from(r.headers),status:r.status,statusText:r.statusText,config:e,request:p})}))}catch(y){if(O(),y&&"TypeError"===y.name&&/fetch/i.test(y.message))throw Object.assign(new cz("Network Error",cz.ERR_NETWORK,e,p),{cause:y.cause||y});throw cz.from(y,y&&y.code,e,p)}}),mj={http:null,xhr:tj,fetch:gj};oz.forEach(mj,((e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(_F){}Object.defineProperty(e,"adapterName",{value:t})}}));const Oj=e=>"- ".concat(e),vj=e=>oz.isFunction(e)||null===e||!1===e,yj=e=>{e=oz.isArray(e)?e:[e];const{length:t}=e;let n,i;const r={};for(let s=0;s<t;s++){let t;if(n=e[s],i=n,!vj(n)&&(i=mj[(t=String(n)).toLowerCase()],void 0===i))throw new cz("Unknown adapter '".concat(t,"'"));if(i)break;r[t||"#"+s]=i}if(!i){const e=Object.entries(r).map((e=>{let[t,n]=e;return"adapter ".concat(t," ")+(!1===n?"is not supported by the environment":"is not available in the build")}));let n=t?e.length>1?"since :\n"+e.map(Oj).join("\n"):" "+Oj(e[0]):"as no adapter specified";throw new cz("There is no suitable adapter to dispatch the request "+n,"ERR_NOT_SUPPORT")}return i};function bj(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Bz(null,e)}function wj(e){bj(e),e.headers=qz.from(e.headers),e.data=Vz.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1);return yj(e.adapter||Nz.adapter)(e).then((function(t){return bj(e),t.data=Vz.call(e,e.transformResponse,t),t.headers=qz.from(t.headers),t}),(function(t){return zz(t)||(bj(e),t&&t.response&&(t.response.data=Vz.call(e,e.transformResponse,t.response),t.response.headers=qz.from(t.response.headers))),Promise.reject(t)}))}const kj="1.7.2",Sj={};["object","boolean","number","function","string","symbol"].forEach(((e,t)=>{Sj[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}}));const xj={};Sj.transitional=function(e,t,n){function i(e,t){return"[Axios v1.7.2] Transitional option '"+e+"'"+t+(n?". "+n:"")}return(n,r,s)=>{if(!1===e)throw new cz(i(r," has been removed"+(t?" in "+t:"")),cz.ERR_DEPRECATED);return t&&!xj[r]&&(xj[r]=!0,console.warn(i(r," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,r,s)}};const Tj={assertOptions:function(e,t,n){if("object"!==typeof e)throw new cz("options must be an object",cz.ERR_BAD_OPTION_VALUE);const i=Object.keys(e);let r=i.length;for(;r-- >0;){const s=i[r],o=t[s];if(o){const t=e[s],n=void 0===t||o(t,s,e);if(!0!==n)throw new cz("option "+s+" must be "+n,cz.ERR_BAD_OPTION_VALUE)}else if(!0!==n)throw new cz("Unknown option "+s,cz.ERR_BAD_OPTION)}},validators:Sj},_j=Tj.validators;class Pj{constructor(e){this.defaults=e,this.interceptors={request:new kz,response:new kz}}async request(e,t){try{return await this._request(e,t)}catch(n){if(n instanceof Error){let e;Error.captureStackTrace?Error.captureStackTrace(e={}):e=new Error;const t=e.stack?e.stack.replace(/^.+\n/,""):"";try{n.stack?t&&!String(n.stack).endsWith(t.replace(/^.+\n.+\n/,""))&&(n.stack+="\n"+t):n.stack=t}catch(_F){}}throw n}}_request(e,t){"string"===typeof e?(t=t||{}).url=e:t=e||{},t=Jz(this.defaults,t);const{transitional:n,paramsSerializer:i,headers:r}=t;void 0!==n&&Tj.assertOptions(n,{silentJSONParsing:_j.transitional(_j.boolean),forcedJSONParsing:_j.transitional(_j.boolean),clarifyTimeoutError:_j.transitional(_j.boolean)},!1),null!=i&&(oz.isFunction(i)?t.paramsSerializer={serialize:i}:Tj.assertOptions(i,{encode:_j.function,serialize:_j.function},!0)),t.method=(t.method||this.defaults.method||"get").toLowerCase();let s=r&&oz.merge(r.common,r[t.method]);r&&oz.forEach(["delete","get","head","post","put","patch","common"],(e=>{delete r[e]})),t.headers=qz.concat(s,r);const o=[];let a=!0;this.interceptors.request.forEach((function(e){"function"===typeof e.runWhen&&!1===e.runWhen(t)||(a=a&&e.synchronous,o.unshift(e.fulfilled,e.rejected))}));const l=[];let h;this.interceptors.response.forEach((function(e){l.push(e.fulfilled,e.rejected)}));let c,u=0;if(!a){const e=[wj.bind(this),void 0];for(e.unshift.apply(e,o),e.push.apply(e,l),c=e.length,h=Promise.resolve(t);u<c;)h=h.then(e[u++],e[u++]);return h}c=o.length;let d=t;for(u=0;u<c;){const e=o[u++],t=o[u++];try{d=e(d)}catch(f){t.call(this,f);break}}try{h=wj.call(this,d)}catch(f){return Promise.reject(f)}for(u=0,c=l.length;u<c;)h=h.then(l[u++],l[u++]);return h}getUri(e){return wz(Hz((e=Jz(this.defaults,e)).baseURL,e.url),e.params,e.paramsSerializer)}}oz.forEach(["delete","get","head","options"],(function(e){Pj.prototype[e]=function(t,n){return this.request(Jz(n||{},{method:e,url:t,data:(n||{}).data}))}})),oz.forEach(["post","put","patch"],(function(e){function t(t){return function(n,i,r){return this.request(Jz(r||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:n,data:i}))}}Pj.prototype[e]=t(),Pj.prototype[e+"Form"]=t(!0)}));const Cj=Pj;class Ej{constructor(e){if("function"!==typeof e)throw new TypeError("executor must be a function.");let t;this.promise=new Promise((function(e){t=e}));const n=this;this.promise.then((e=>{if(!n._listeners)return;let t=n._listeners.length;for(;t-- >0;)n._listeners[t](e);n._listeners=null})),this.promise.then=e=>{let t;const i=new Promise((e=>{n.subscribe(e),t=e})).then(e);return i.cancel=function(){n.unsubscribe(t)},i},e((function(e,i,r){n.reason||(n.reason=new Bz(e,i,r),t(n.reason))}))}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}static source(){let e;return{token:new Ej((function(t){e=t})),cancel:e}}}const Qj=Ej;const Aj={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Aj).forEach((e=>{let[t,n]=e;Aj[n]=t}));const Rj=Aj;const Nj=function e(t){const n=new Cj(t),i=SV(Cj.prototype.request,n);return oz.extend(i,Cj.prototype,n,{allOwnKeys:!0}),oz.extend(i,n,null,{allOwnKeys:!0}),i.create=function(n){return e(Jz(t,n))},i}(Nz);Nj.Axios=Cj,Nj.CanceledError=Bz,Nj.CancelToken=Qj,Nj.isCancel=zz,Nj.VERSION=kj,Nj.toFormData=gz,Nj.AxiosError=cz,Nj.Cancel=Nj.CanceledError,Nj.all=function(e){return Promise.all(e)},Nj.spread=function(e){return function(t){return e.apply(null,t)}},Nj.isAxiosError=function(e){return oz.isObject(e)&&!0===e.isAxiosError},Nj.mergeConfig=Jz,Nj.AxiosHeaders=qz,Nj.formToJSON=e=>Az(oz.isHTMLForm(e)?new FormData(e):e),Nj.getAdapter=yj,Nj.HttpStatusCode=Rj,Nj.default=Nj;const Ij=Nj;const Dj=function(e){let{results:t,onClose:n}=e;const i=(0,r.useRef)(null),s=e=>{i.current&&!i.current.contains(e.target)&&n()};return(0,r.useEffect)((()=>(document.addEventListener("mousedown",s),()=>{document.removeEventListener("mousedown",s)})),[]),(0,Gg.jsx)("div",{className:"popup",children:(0,Gg.jsxs)("div",{className:"popup-content",ref:i,children:[(0,Gg.jsx)("h2",{children:"Test Results"}),(0,Gg.jsx)("button",{onClick:n,className:"close-btn",children:"X"}),(0,Gg.jsx)("ul",{className:"results-list",children:t.map(((e,t)=>(0,Gg.jsxs)("li",{className:"result-item",children:[(0,Gg.jsxs)("div",{className:"result-inputs",children:[(0,Gg.jsxs)("p",{children:[(0,Gg.jsx)("strong",{children:"Inputs:"})," ",JSON.stringify(e.inputs)]}),(0,Gg.jsxs)("p",{children:[(0,Gg.jsx)("strong",{children:"Expected:"})," ",JSON.stringify(e.expected)]}),(0,Gg.jsxs)("p",{children:[(0,Gg.jsx)("strong",{children:"Actual:"})," ",JSON.stringify(e.actual)]})]}),(0,Gg.jsx)("div",{className:"result-status ".concat(e.passed?"passed":"failed"),children:(0,Gg.jsx)("p",{children:e.passed?"PASSED":"FAILED"})})]},t)))})]})})},Mj=Object.create(null);Mj.open="0",Mj.close="1",Mj.ping="2",Mj.pong="3",Mj.message="4",Mj.upgrade="5",Mj.noop="6";const Lj=Object.create(null);Object.keys(Mj).forEach((e=>{Lj[Mj[e]]=e}));const $j={type:"error",data:"parser error"},Uj="function"===typeof Blob||"undefined"!==typeof Blob&&"[object BlobConstructor]"===Object.prototype.toString.call(Blob),qj="function"===typeof ArrayBuffer,Vj=e=>"function"===typeof ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer,zj=(e,t,n)=>{let{type:i,data:r}=e;return Uj&&r instanceof Blob?t?n(r):jj(r,n):qj&&(r instanceof ArrayBuffer||Vj(r))?t?n(r):jj(new Blob([r]),n):n(Mj[i]+(r||""))},jj=(e,t)=>{const n=new FileReader;return n.onload=function(){const e=n.result.split(",")[1];t("b"+(e||""))},n.readAsDataURL(e)};function Bj(e){return e instanceof Uint8Array?e:e instanceof ArrayBuffer?new Uint8Array(e):new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}let Fj;const Wj="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Xj="undefined"===typeof Uint8Array?[]:new Uint8Array(256);for(let n=0;n<64;n++)Xj[Wj.charCodeAt(n)]=n;const Yj="function"===typeof ArrayBuffer,Gj=(e,t)=>{if("string"!==typeof e)return{type:"message",data:Hj(e,t)};const n=e.charAt(0);if("b"===n)return{type:"message",data:Zj(e.substring(1),t)};return Lj[n]?e.length>1?{type:Lj[n],data:e.substring(1)}:{type:Lj[n]}:$j},Zj=(e,t)=>{if(Yj){const n=(e=>{let t,n,i,r,s,o=.75*e.length,a=e.length,l=0;"="===e[e.length-1]&&(o--,"="===e[e.length-2]&&o--);const h=new ArrayBuffer(o),c=new Uint8Array(h);for(t=0;t<a;t+=4)n=Xj[e.charCodeAt(t)],i=Xj[e.charCodeAt(t+1)],r=Xj[e.charCodeAt(t+2)],s=Xj[e.charCodeAt(t+3)],c[l++]=n<<2|i>>4,c[l++]=(15&i)<<4|r>>2,c[l++]=(3&r)<<6|63&s;return h})(e);return Hj(n,t)}return{base64:!0,data:e}},Hj=(e,t)=>"blob"===t?e instanceof Blob?e:new Blob([e]):e instanceof ArrayBuffer?e:e.buffer,Kj=String.fromCharCode(30);function Jj(){return new TransformStream({transform(e,t){!function(e,t){Uj&&e.data instanceof Blob?e.data.arrayBuffer().then(Bj).then(t):qj&&(e.data instanceof ArrayBuffer||Vj(e.data))?t(Bj(e.data)):zj(e,!1,(e=>{Fj||(Fj=new TextEncoder),t(Fj.encode(e))}))}(e,(n=>{const i=n.length;let r;if(i<126)r=new Uint8Array(1),new DataView(r.buffer).setUint8(0,i);else if(i<65536){r=new Uint8Array(3);const e=new DataView(r.buffer);e.setUint8(0,126),e.setUint16(1,i)}else{r=new Uint8Array(9);const e=new DataView(r.buffer);e.setUint8(0,127),e.setBigUint64(1,BigInt(i))}e.data&&"string"!==typeof e.data&&(r[0]|=128),t.enqueue(r),t.enqueue(n)}))}})}let eB;function tB(e){return e.reduce(((e,t)=>e+t.length),0)}function nB(e,t){if(e[0].length===t)return e.shift();const n=new Uint8Array(t);let i=0;for(let r=0;r<t;r++)n[r]=e[0][i++],i===e[0].length&&(e.shift(),i=0);return e.length&&i<e[0].length&&(e[0]=e[0].slice(i)),n}function iB(e){if(e)return function(e){for(var t in iB.prototype)e[t]=iB.prototype[t];return e}(e)}iB.prototype.on=iB.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},iB.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this},iB.prototype.off=iB.prototype.removeListener=iB.prototype.removeAllListeners=iB.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n,i=this._callbacks["$"+e];if(!i)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var r=0;r<i.length;r++)if((n=i[r])===t||n.fn===t){i.splice(r,1);break}return 0===i.length&&delete this._callbacks["$"+e],this},iB.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),n=this._callbacks["$"+e],i=1;i<arguments.length;i++)t[i-1]=arguments[i];if(n){i=0;for(var r=(n=n.slice(0)).length;i<r;++i)n[i].apply(this,t)}return this},iB.prototype.emitReserved=iB.prototype.emit,iB.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},iB.prototype.hasListeners=function(e){return!!this.listeners(e).length};const rB="undefined"!==typeof self?self:"undefined"!==typeof window?window:Function("return this")();function sB(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return n.reduce(((t,n)=>(e.hasOwnProperty(n)&&(t[n]=e[n]),t)),{})}const oB=rB.setTimeout,aB=rB.clearTimeout;function lB(e,t){t.useNativeTimers?(e.setTimeoutFn=oB.bind(rB),e.clearTimeoutFn=aB.bind(rB)):(e.setTimeoutFn=rB.setTimeout.bind(rB),e.clearTimeoutFn=rB.clearTimeout.bind(rB))}class hB extends Error{constructor(e,t,n){super(e),this.description=t,this.context=n,this.type="TransportError"}}class cB extends iB{constructor(e){super(),this.writable=!1,lB(this,e),this.opts=e,this.query=e.query,this.socket=e.socket}onError(e,t,n){return super.emitReserved("error",new hB(e,t,n)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this}send(e){"open"===this.readyState&&this.write(e)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){const t=Gj(e,this.socket.binaryType);this.onPacket(t)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}pause(e){}createUri(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e+"://"+this._hostname()+this._port()+this.opts.path+this._query(t)}_hostname(){const e=this.opts.hostname;return-1===e.indexOf(":")?e:"["+e+"]"}_port(){return this.opts.port&&(this.opts.secure&&Number(443!==this.opts.port)||!this.opts.secure&&80!==Number(this.opts.port))?":"+this.opts.port:""}_query(e){const t=function(e){let t="";for(let n in e)e.hasOwnProperty(n)&&(t.length&&(t+="&"),t+=encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t}(e);return t.length?"?"+t:""}}const uB="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),dB=64,fB={};let pB,gB=0,mB=0;function OB(e){let t="";do{t=uB[e%dB]+t,e=Math.floor(e/dB)}while(e>0);return t}function vB(){const e=OB(+new Date);return e!==pB?(gB=0,pB=e):e+"."+OB(gB++)}for(;mB<dB;mB++)fB[uB[mB]]=mB;let yB=!1;try{yB="undefined"!==typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(CF){}const bB=yB;function wB(e){const t=e.xdomain;try{if("undefined"!==typeof XMLHttpRequest&&(!t||bB))return new XMLHttpRequest}catch(_F){}if(!t)try{return new(rB[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(_F){}}function kB(){}const SB=null!=new wB({xdomain:!1}).responseType;class xB extends iB{constructor(e,t){super(),lB(this,t),this.opts=t,this.method=t.method||"GET",this.uri=e,this.data=void 0!==t.data?t.data:null,this.create()}create(){var e;const t=sB(this.opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");t.xdomain=!!this.opts.xd;const n=this.xhr=new wB(t);try{n.open(this.method,this.uri,!0);try{if(this.opts.extraHeaders){n.setDisableHeaderCheck&&n.setDisableHeaderCheck(!0);for(let e in this.opts.extraHeaders)this.opts.extraHeaders.hasOwnProperty(e)&&n.setRequestHeader(e,this.opts.extraHeaders[e])}}catch(_F){}if("POST"===this.method)try{n.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(_F){}try{n.setRequestHeader("Accept","*/*")}catch(_F){}null===(e=this.opts.cookieJar)||void 0===e||e.addCookies(n),"withCredentials"in n&&(n.withCredentials=this.opts.withCredentials),this.opts.requestTimeout&&(n.timeout=this.opts.requestTimeout),n.onreadystatechange=()=>{var e;3===n.readyState&&(null===(e=this.opts.cookieJar)||void 0===e||e.parseCookies(n)),4===n.readyState&&(200===n.status||1223===n.status?this.onLoad():this.setTimeoutFn((()=>{this.onError("number"===typeof n.status?n.status:0)}),0))},n.send(this.data)}catch(_F){return void this.setTimeoutFn((()=>{this.onError(_F)}),0)}"undefined"!==typeof document&&(this.index=xB.requestsCount++,xB.requests[this.index]=this)}onError(e){this.emitReserved("error",e,this.xhr),this.cleanup(!0)}cleanup(e){if("undefined"!==typeof this.xhr&&null!==this.xhr){if(this.xhr.onreadystatechange=kB,e)try{this.xhr.abort()}catch(_F){}"undefined"!==typeof document&&delete xB.requests[this.index],this.xhr=null}}onLoad(){const e=this.xhr.responseText;null!==e&&(this.emitReserved("data",e),this.emitReserved("success"),this.cleanup())}abort(){this.cleanup()}}if(xB.requestsCount=0,xB.requests={},"undefined"!==typeof document)if("function"===typeof attachEvent)attachEvent("onunload",TB);else if("function"===typeof addEventListener){addEventListener("onpagehide"in rB?"pagehide":"unload",TB,!1)}function TB(){for(let e in xB.requests)xB.requests.hasOwnProperty(e)&&xB.requests[e].abort()}const _B="function"===typeof Promise&&"function"===typeof Promise.resolve?e=>Promise.resolve().then(e):(e,t)=>t(e,0),PB=rB.WebSocket||rB.MozWebSocket,CB="undefined"!==typeof navigator&&"string"===typeof navigator.product&&"reactnative"===navigator.product.toLowerCase();const EB={websocket:class extends cB{constructor(e){super(e),this.supportsBinary=!e.forceBase64}get name(){return"websocket"}doOpen(){if(!this.check())return;const e=this.uri(),t=this.opts.protocols,n=CB?{}:sB(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(n.headers=this.opts.extraHeaders);try{this.ws=CB?new PB(e,t,n):t?new PB(e,t):new PB(e)}catch(CF){return this.emitReserved("error",CF)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let t=0;t<e.length;t++){const n=e[t],i=t===e.length-1;zj(n,this.supportsBinary,(e=>{try{this.ws.send(e)}catch(_F){}i&&_B((()=>{this.writable=!0,this.emitReserved("drain")}),this.setTimeoutFn)}))}}doClose(){"undefined"!==typeof this.ws&&(this.ws.close(),this.ws=null)}uri(){const e=this.opts.secure?"wss":"ws",t=this.query||{};return this.opts.timestampRequests&&(t[this.opts.timestampParam]=vB()),this.supportsBinary||(t.b64=1),this.createUri(e,t)}check(){return!!PB}},webtransport:class extends cB{get name(){return"webtransport"}doOpen(){"function"===typeof WebTransport&&(this.transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name]),this.transport.closed.then((()=>{this.onClose()})).catch((e=>{this.onError("webtransport error",e)})),this.transport.ready.then((()=>{this.transport.createBidirectionalStream().then((e=>{const t=function(e,t){eB||(eB=new TextDecoder);const n=[];let i=0,r=-1,s=!1;return new TransformStream({transform(o,a){for(n.push(o);;){if(0===i){if(tB(n)<1)break;const e=nB(n,1);s=128===(128&e[0]),r=127&e[0],i=r<126?3:126===r?1:2}else if(1===i){if(tB(n)<2)break;const e=nB(n,2);r=new DataView(e.buffer,e.byteOffset,e.length).getUint16(0),i=3}else if(2===i){if(tB(n)<8)break;const e=nB(n,8),t=new DataView(e.buffer,e.byteOffset,e.length),s=t.getUint32(0);if(s>Math.pow(2,21)-1){a.enqueue($j);break}r=s*Math.pow(2,32)+t.getUint32(4),i=3}else{if(tB(n)<r)break;const e=nB(n,r);a.enqueue(Gj(s?e:eB.decode(e),t)),i=0}if(0===r||r>e){a.enqueue($j);break}}}})}(Number.MAX_SAFE_INTEGER,this.socket.binaryType),n=e.readable.pipeThrough(t).getReader(),i=Jj();i.readable.pipeTo(e.writable),this.writer=i.writable.getWriter();const r=()=>{n.read().then((e=>{let{done:t,value:n}=e;t||(this.onPacket(n),r())})).catch((e=>{}))};r();const s={type:"open"};this.query.sid&&(s.data='{"sid":"'.concat(this.query.sid,'"}')),this.writer.write(s).then((()=>this.onOpen()))}))})))}write(e){this.writable=!1;for(let t=0;t<e.length;t++){const n=e[t],i=t===e.length-1;this.writer.write(n).then((()=>{i&&_B((()=>{this.writable=!0,this.emitReserved("drain")}),this.setTimeoutFn)}))}}doClose(){var e;null===(e=this.transport)||void 0===e||e.close()}},polling:class extends cB{constructor(e){if(super(e),this.polling=!1,"undefined"!==typeof location){const t="https:"===location.protocol;let n=location.port;n||(n=t?"443":"80"),this.xd="undefined"!==typeof location&&e.hostname!==location.hostname||n!==e.port}const t=e&&e.forceBase64;this.supportsBinary=SB&&!t,this.opts.withCredentials&&(this.cookieJar=void 0)}get name(){return"polling"}doOpen(){this.poll()}pause(e){this.readyState="pausing";const t=()=>{this.readyState="paused",e()};if(this.polling||!this.writable){let e=0;this.polling&&(e++,this.once("pollComplete",(function(){--e||t()}))),this.writable||(e++,this.once("drain",(function(){--e||t()})))}else t()}poll(){this.polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){((e,t)=>{const n=e.split(Kj),i=[];for(let r=0;r<n.length;r++){const e=Gj(n[r],t);if(i.push(e),"error"===e.type)break}return i})(e,this.socket.binaryType).forEach((e=>{if("opening"===this.readyState&&"open"===e.type&&this.onOpen(),"close"===e.type)return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(e)})),"closed"!==this.readyState&&(this.polling=!1,this.emitReserved("pollComplete"),"open"===this.readyState&&this.poll())}doClose(){const e=()=>{this.write([{type:"close"}])};"open"===this.readyState?e():this.once("open",e)}write(e){this.writable=!1,((e,t)=>{const n=e.length,i=new Array(n);let r=0;e.forEach(((e,s)=>{zj(e,!1,(e=>{i[s]=e,++r===n&&t(i.join(Kj))}))}))})(e,(e=>{this.doWrite(e,(()=>{this.writable=!0,this.emitReserved("drain")}))}))}uri(){const e=this.opts.secure?"https":"http",t=this.query||{};return!1!==this.opts.timestampRequests&&(t[this.opts.timestampParam]=vB()),this.supportsBinary||t.sid||(t.b64=1),this.createUri(e,t)}request(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.assign(e,{xd:this.xd,cookieJar:this.cookieJar},this.opts),new xB(this.uri(),e)}doWrite(e,t){const n=this.request({method:"POST",data:e});n.on("success",t),n.on("error",((e,t)=>{this.onError("xhr post error",e,t)}))}doPoll(){const e=this.request();e.on("data",this.onData.bind(this)),e.on("error",((e,t)=>{this.onError("xhr poll error",e,t)})),this.pollXhr=e}}},QB=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,AB=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function RB(e){if(e.length>2e3)throw"URI too long";const t=e,n=e.indexOf("["),i=e.indexOf("]");-1!=n&&-1!=i&&(e=e.substring(0,n)+e.substring(n,i).replace(/:/g,";")+e.substring(i,e.length));let r=QB.exec(e||""),s={},o=14;for(;o--;)s[AB[o]]=r[o]||"";return-1!=n&&-1!=i&&(s.source=t,s.host=s.host.substring(1,s.host.length-1).replace(/;/g,":"),s.authority=s.authority.replace("[","").replace("]","").replace(/;/g,":"),s.ipv6uri=!0),s.pathNames=function(e,t){const n=/\/{2,9}/g,i=t.replace(n,"/").split("/");"/"!=t.slice(0,1)&&0!==t.length||i.splice(0,1);"/"==t.slice(-1)&&i.splice(i.length-1,1);return i}(0,s.path),s.queryKey=function(e,t){const n={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,(function(e,t,i){t&&(n[t]=i)})),n}(0,s.query),s}class NB extends iB{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(),this.binaryType="arraybuffer",this.writeBuffer=[],e&&"object"===typeof e&&(t=e,e=null),e?(e=RB(e),t.hostname=e.host,t.secure="https"===e.protocol||"wss"===e.protocol,t.port=e.port,e.query&&(t.query=e.query)):t.host&&(t.hostname=RB(t.host).host),lB(this,t),this.secure=null!=t.secure?t.secure:"undefined"!==typeof location&&"https:"===location.protocol,t.hostname&&!t.port&&(t.port=this.secure?"443":"80"),this.hostname=t.hostname||("undefined"!==typeof location?location.hostname:"localhost"),this.port=t.port||("undefined"!==typeof location&&location.port?location.port:this.secure?"443":"80"),this.transports=t.transports||["polling","websocket","webtransport"],this.writeBuffer=[],this.prevBufferLen=0,this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},t),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),"string"===typeof this.opts.query&&(this.opts.query=function(e){let t={},n=e.split("&");for(let i=0,r=n.length;i<r;i++){let e=n[i].split("=");t[decodeURIComponent(e[0])]=decodeURIComponent(e[1])}return t}(this.opts.query)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingTimeoutTimer=null,"function"===typeof addEventListener&&(this.opts.closeOnBeforeunload&&(this.beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this.beforeunloadEventListener,!1)),"localhost"!==this.hostname&&(this.offlineEventListener=()=>{this.onClose("transport close",{description:"network connection lost"})},addEventListener("offline",this.offlineEventListener,!1))),this.open()}createTransport(e){const t=Object.assign({},this.opts.query);t.EIO=4,t.transport=e,this.id&&(t.sid=this.id);const n=Object.assign({},this.opts,{query:t,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[e]);return new EB[e](n)}open(){let e;if(this.opts.rememberUpgrade&&NB.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket"))e="websocket";else{if(0===this.transports.length)return void this.setTimeoutFn((()=>{this.emitReserved("error","No transports available")}),0);e=this.transports[0]}this.readyState="opening";try{e=this.createTransport(e)}catch(_F){return this.transports.shift(),void this.open()}e.open(),this.setTransport(e)}setTransport(e){this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this.onDrain.bind(this)).on("packet",this.onPacket.bind(this)).on("error",this.onError.bind(this)).on("close",(e=>this.onClose("transport close",e)))}probe(e){let t=this.createTransport(e),n=!1;NB.priorWebsocketSuccess=!1;const i=()=>{n||(t.send([{type:"ping",data:"probe"}]),t.once("packet",(e=>{if(!n)if("pong"===e.type&&"probe"===e.data){if(this.upgrading=!0,this.emitReserved("upgrading",t),!t)return;NB.priorWebsocketSuccess="websocket"===t.name,this.transport.pause((()=>{n||"closed"!==this.readyState&&(h(),this.setTransport(t),t.send([{type:"upgrade"}]),this.emitReserved("upgrade",t),t=null,this.upgrading=!1,this.flush())}))}else{const e=new Error("probe error");e.transport=t.name,this.emitReserved("upgradeError",e)}})))};function r(){n||(n=!0,h(),t.close(),t=null)}const s=e=>{const n=new Error("probe error: "+e);n.transport=t.name,r(),this.emitReserved("upgradeError",n)};function o(){s("transport closed")}function a(){s("socket closed")}function l(e){t&&e.name!==t.name&&r()}const h=()=>{t.removeListener("open",i),t.removeListener("error",s),t.removeListener("close",o),this.off("close",a),this.off("upgrading",l)};t.once("open",i),t.once("error",s),t.once("close",o),this.once("close",a),this.once("upgrading",l),-1!==this.upgrades.indexOf("webtransport")&&"webtransport"!==e?this.setTimeoutFn((()=>{n||t.open()}),200):t.open()}onOpen(){if(this.readyState="open",NB.priorWebsocketSuccess="websocket"===this.transport.name,this.emitReserved("open"),this.flush(),"open"===this.readyState&&this.opts.upgrade){let e=0;const t=this.upgrades.length;for(;e<t;e++)this.probe(this.upgrades[e])}}onPacket(e){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),this.resetPingTimeout(),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this.sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong");break;case"error":const t=new Error("server error");t.code=e.data,this.onError(t);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data)}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this.upgrades=this.filterUpgrades(e.upgrades),this.pingInterval=e.pingInterval,this.pingTimeout=e.pingTimeout,this.maxPayload=e.maxPayload,this.onOpen(),"closed"!==this.readyState&&this.resetPingTimeout()}resetPingTimeout(){this.clearTimeoutFn(this.pingTimeoutTimer),this.pingTimeoutTimer=this.setTimeoutFn((()=>{this.onClose("ping timeout")}),this.pingInterval+this.pingTimeout),this.opts.autoUnref&&this.pingTimeoutTimer.unref()}onDrain(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0===this.writeBuffer.length?this.emitReserved("drain"):this.flush()}flush(){if("closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const e=this.getWritablePackets();this.transport.send(e),this.prevBufferLen=e.length,this.emitReserved("flush")}}getWritablePackets(){if(!(this.maxPayload&&"polling"===this.transport.name&&this.writeBuffer.length>1))return this.writeBuffer;let e=1;for(let n=0;n<this.writeBuffer.length;n++){const i=this.writeBuffer[n].data;if(i&&(e+="string"===typeof(t=i)?function(e){let t=0,n=0;for(let i=0,r=e.length;i<r;i++)t=e.charCodeAt(i),t<128?n+=1:t<2048?n+=2:t<55296||t>=57344?n+=3:(i++,n+=4);return n}(t):Math.ceil(1.33*(t.byteLength||t.size))),n>0&&e>this.maxPayload)return this.writeBuffer.slice(0,n);e+=2}var t;return this.writeBuffer}write(e,t,n){return this.sendPacket("message",e,t,n),this}send(e,t,n){return this.sendPacket("message",e,t,n),this}sendPacket(e,t,n,i){if("function"===typeof t&&(i=t,t=void 0),"function"===typeof n&&(i=n,n=null),"closing"===this.readyState||"closed"===this.readyState)return;(n=n||{}).compress=!1!==n.compress;const r={type:e,data:t,options:n};this.emitReserved("packetCreate",r),this.writeBuffer.push(r),i&&this.once("flush",i),this.flush()}close(){const e=()=>{this.onClose("forced close"),this.transport.close()},t=()=>{this.off("upgrade",t),this.off("upgradeError",t),e()},n=()=>{this.once("upgrade",t),this.once("upgradeError",t)};return"opening"!==this.readyState&&"open"!==this.readyState||(this.readyState="closing",this.writeBuffer.length?this.once("drain",(()=>{this.upgrading?n():e()})):this.upgrading?n():e()),this}onError(e){NB.priorWebsocketSuccess=!1,this.emitReserved("error",e),this.onClose("transport error",e)}onClose(e,t){"opening"!==this.readyState&&"open"!==this.readyState&&"closing"!==this.readyState||(this.clearTimeoutFn(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),"function"===typeof removeEventListener&&(removeEventListener("beforeunload",this.beforeunloadEventListener,!1),removeEventListener("offline",this.offlineEventListener,!1)),this.readyState="closed",this.id=null,this.emitReserved("close",e,t),this.writeBuffer=[],this.prevBufferLen=0)}filterUpgrades(e){const t=[];let n=0;const i=e.length;for(;n<i;n++)~this.transports.indexOf(e[n])&&t.push(e[n]);return t}}NB.protocol=4;NB.protocol;const IB="function"===typeof ArrayBuffer,DB=e=>"function"===typeof ArrayBuffer.isView?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer,MB=Object.prototype.toString,LB="function"===typeof Blob||"undefined"!==typeof Blob&&"[object BlobConstructor]"===MB.call(Blob),$B="function"===typeof File||"undefined"!==typeof File&&"[object FileConstructor]"===MB.call(File);function UB(e){return IB&&(e instanceof ArrayBuffer||DB(e))||LB&&e instanceof Blob||$B&&e instanceof File}function qB(e,t){if(!e||"object"!==typeof e)return!1;if(Array.isArray(e)){for(let t=0,n=e.length;t<n;t++)if(qB(e[t]))return!0;return!1}if(UB(e))return!0;if(e.toJSON&&"function"===typeof e.toJSON&&1===arguments.length)return qB(e.toJSON(),!0);for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&qB(e[n]))return!0;return!1}function VB(e){const t=[],n=e.data,i=e;return i.data=zB(n,t),i.attachments=t.length,{packet:i,buffers:t}}function zB(e,t){if(!e)return e;if(UB(e)){const n={_placeholder:!0,num:t.length};return t.push(e),n}if(Array.isArray(e)){const n=new Array(e.length);for(let i=0;i<e.length;i++)n[i]=zB(e[i],t);return n}if("object"===typeof e&&!(e instanceof Date)){const n={};for(const i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=zB(e[i],t));return n}return e}function jB(e,t){return e.data=BB(e.data,t),delete e.attachments,e}function BB(e,t){if(!e)return e;if(e&&!0===e._placeholder){if("number"===typeof e.num&&e.num>=0&&e.num<t.length)return t[e.num];throw new Error("illegal attachments")}if(Array.isArray(e))for(let n=0;n<e.length;n++)e[n]=BB(e[n],t);else if("object"===typeof e)for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(e[n]=BB(e[n],t));return e}const FB=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],WB=5;var XB;!function(e){e[e.CONNECT=0]="CONNECT",e[e.DISCONNECT=1]="DISCONNECT",e[e.EVENT=2]="EVENT",e[e.ACK=3]="ACK",e[e.CONNECT_ERROR=4]="CONNECT_ERROR",e[e.BINARY_EVENT=5]="BINARY_EVENT",e[e.BINARY_ACK=6]="BINARY_ACK"}(XB||(XB={}));class YB{constructor(e){this.replacer=e}encode(e){return e.type!==XB.EVENT&&e.type!==XB.ACK||!qB(e)?[this.encodeAsString(e)]:this.encodeAsBinary({type:e.type===XB.EVENT?XB.BINARY_EVENT:XB.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id})}encodeAsString(e){let t=""+e.type;return e.type!==XB.BINARY_EVENT&&e.type!==XB.BINARY_ACK||(t+=e.attachments+"-"),e.nsp&&"/"!==e.nsp&&(t+=e.nsp+","),null!=e.id&&(t+=e.id),null!=e.data&&(t+=JSON.stringify(e.data,this.replacer)),t}encodeAsBinary(e){const t=VB(e),n=this.encodeAsString(t.packet),i=t.buffers;return i.unshift(n),i}}function GB(e){return"[object Object]"===Object.prototype.toString.call(e)}class ZB extends iB{constructor(e){super(),this.reviver=e}add(e){let t;if("string"===typeof e){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");t=this.decodeString(e);const n=t.type===XB.BINARY_EVENT;n||t.type===XB.BINARY_ACK?(t.type=n?XB.EVENT:XB.ACK,this.reconstructor=new HB(t),0===t.attachments&&super.emitReserved("decoded",t)):super.emitReserved("decoded",t)}else{if(!UB(e)&&!e.base64)throw new Error("Unknown type: "+e);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");t=this.reconstructor.takeBinaryData(e),t&&(this.reconstructor=null,super.emitReserved("decoded",t))}}decodeString(e){let t=0;const n={type:Number(e.charAt(0))};if(void 0===XB[n.type])throw new Error("unknown packet type "+n.type);if(n.type===XB.BINARY_EVENT||n.type===XB.BINARY_ACK){const i=t+1;for(;"-"!==e.charAt(++t)&&t!=e.length;);const r=e.substring(i,t);if(r!=Number(r)||"-"!==e.charAt(t))throw new Error("Illegal attachments");n.attachments=Number(r)}if("/"===e.charAt(t+1)){const i=t+1;for(;++t;){if(","===e.charAt(t))break;if(t===e.length)break}n.nsp=e.substring(i,t)}else n.nsp="/";const i=e.charAt(t+1);if(""!==i&&Number(i)==i){const i=t+1;for(;++t;){const n=e.charAt(t);if(null==n||Number(n)!=n){--t;break}if(t===e.length)break}n.id=Number(e.substring(i,t+1))}if(e.charAt(++t)){const i=this.tryParse(e.substr(t));if(!ZB.isPayloadValid(n.type,i))throw new Error("invalid payload");n.data=i}return n}tryParse(e){try{return JSON.parse(e,this.reviver)}catch(_F){return!1}}static isPayloadValid(e,t){switch(e){case XB.CONNECT:return GB(t);case XB.DISCONNECT:return void 0===t;case XB.CONNECT_ERROR:return"string"===typeof t||GB(t);case XB.EVENT:case XB.BINARY_EVENT:return Array.isArray(t)&&("number"===typeof t[0]||"string"===typeof t[0]&&-1===FB.indexOf(t[0]));case XB.ACK:case XB.BINARY_ACK:return Array.isArray(t)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class HB{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){const e=jB(this.reconPack,this.buffers);return this.finishedReconstruction(),e}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}function KB(e,t,n){return e.on(t,n),function(){e.off(t,n)}}const JB=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class eF extends iB{constructor(e,t,n){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=t,n&&n.auth&&(this.auth=n.auth),this._opts=Object.assign({},n),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const e=this.io;this.subs=[KB(e,"open",this.onopen.bind(this)),KB(e,"packet",this.onpacket.bind(this)),KB(e,"error",this.onerror.bind(this)),KB(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected||(this.subEvents(),this.io._reconnecting||this.io.open(),"open"===this.io._readyState&&this.onopen()),this}open(){return this.connect()}send(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.unshift("message"),this.emit.apply(this,t),this}emit(e){if(JB.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];if(n.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(n),this;const r={type:XB.EVENT,data:n,options:{}};if(r.options.compress=!1!==this.flags.compress,"function"===typeof n[n.length-1]){const e=this.ids++,t=n.pop();this._registerAckCallback(e,t),r.id=e}const s=this.io.engine&&this.io.engine.transport&&this.io.engine.transport.writable;return this.flags.volatile&&(!s||!this.connected)||(this.connected?(this.notifyOutgoingListeners(r),this.packet(r)):this.sendBuffer.push(r)),this.flags={},this}_registerAckCallback(e,t){var n,i=this;const r=null!==(n=this.flags.timeout)&&void 0!==n?n:this._opts.ackTimeout;if(void 0===r)return void(this.acks[e]=t);const s=this.io.setTimeoutFn((()=>{delete this.acks[e];for(let t=0;t<this.sendBuffer.length;t++)this.sendBuffer[t].id===e&&this.sendBuffer.splice(t,1);t.call(this,new Error("operation has timed out"))}),r),o=function(){i.io.clearTimeoutFn(s);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.apply(i,n)};o.withError=!0,this.acks[e]=o}emitWithAck(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return new Promise(((t,i)=>{const r=(e,n)=>e?i(e):t(n);r.withError=!0,n.push(r),this.emit(e,...n)}))}_addToQueue(e){var t=this;let n;"function"===typeof e[e.length-1]&&(n=e.pop());const i={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push((function(e){if(i!==t._queue[0])return;if(null!==e)i.tryCount>t._opts.retries&&(t._queue.shift(),n&&n(e));else if(t._queue.shift(),n){for(var r=arguments.length,s=new Array(r>1?r-1:0),o=1;o<r;o++)s[o-1]=arguments[o];n(null,...s)}return i.pending=!1,t._drainQueue()})),this._queue.push(i),this._drainQueue()}_drainQueue(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.connected||0===this._queue.length)return;const t=this._queue[0];t.pending&&!e||(t.pending=!0,t.tryCount++,this.flags=t.flags,this.emit.apply(this,t.args))}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){"function"==typeof this.auth?this.auth((e=>{this._sendConnectPacket(e)})):this._sendConnectPacket(this.auth)}_sendConnectPacket(e){this.packet({type:XB.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,t){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,t),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach((e=>{if(!this.sendBuffer.some((t=>String(t.id)===e))){const t=this.acks[e];delete this.acks[e],t.withError&&t.call(this,new Error("socket has been disconnected"))}}))}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case XB.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case XB.EVENT:case XB.BINARY_EVENT:this.onevent(e);break;case XB.ACK:case XB.BINARY_ACK:this.onack(e);break;case XB.DISCONNECT:this.ondisconnect();break;case XB.CONNECT_ERROR:this.destroy();const t=new Error(e.data.message);t.data=e.data.data,this.emitReserved("connect_error",t)}}onevent(e){const t=e.data||[];null!=e.id&&t.push(this.ack(e.id)),this.connected?this.emitEvent(t):this.receiveBuffer.push(Object.freeze(t))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){const t=this._anyListeners.slice();for(const n of t)n.apply(this,e)}super.emit.apply(this,e),this._pid&&e.length&&"string"===typeof e[e.length-1]&&(this._lastOffset=e[e.length-1])}ack(e){const t=this;let n=!1;return function(){if(!n){n=!0;for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];t.packet({type:XB.ACK,id:e,data:r})}}}onack(e){const t=this.acks[e.id];"function"===typeof t&&(delete this.acks[e.id],t.withError&&e.data.unshift(null),t.apply(this,e.data))}onconnect(e,t){this.id=e,this.recovered=t&&this._pid===t,this._pid=t,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach((e=>this.emitEvent(e))),this.receiveBuffer=[],this.sendBuffer.forEach((e=>{this.notifyOutgoingListeners(e),this.packet(e)})),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach((e=>e())),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:XB.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){const t=this._anyListeners;for(let n=0;n<t.length;n++)if(e===t[n])return t.splice(n,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){const t=this._anyOutgoingListeners;for(let n=0;n<t.length;n++)if(e===t[n])return t.splice(n,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const t=this._anyOutgoingListeners.slice();for(const n of t)n.apply(this,e.data)}}}function tF(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}tF.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),n=Math.floor(t*this.jitter*e);e=0==(1&Math.floor(10*t))?e-n:e+n}return 0|Math.min(e,this.max)},tF.prototype.reset=function(){this.attempts=0},tF.prototype.setMin=function(e){this.ms=e},tF.prototype.setMax=function(e){this.max=e},tF.prototype.setJitter=function(e){this.jitter=e};class nF extends iB{constructor(e,n){var i;super(),this.nsps={},this.subs=[],e&&"object"===typeof e&&(n=e,e=void 0),(n=n||{}).path=n.path||"/socket.io",this.opts=n,lB(this,n),this.reconnection(!1!==n.reconnection),this.reconnectionAttempts(n.reconnectionAttempts||1/0),this.reconnectionDelay(n.reconnectionDelay||1e3),this.reconnectionDelayMax(n.reconnectionDelayMax||5e3),this.randomizationFactor(null!==(i=n.randomizationFactor)&&void 0!==i?i:.5),this.backoff=new tF({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==n.timeout?2e4:n.timeout),this._readyState="closed",this.uri=e;const r=n.parser||t;this.encoder=new r.Encoder,this.decoder=new r.Decoder,this._autoConnect=!1!==n.autoConnect,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,this):this._reconnection}reconnectionAttempts(e){return void 0===e?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var t;return void 0===e?this._reconnectionDelay:(this._reconnectionDelay=e,null===(t=this.backoff)||void 0===t||t.setMin(e),this)}randomizationFactor(e){var t;return void 0===e?this._randomizationFactor:(this._randomizationFactor=e,null===(t=this.backoff)||void 0===t||t.setJitter(e),this)}reconnectionDelayMax(e){var t;return void 0===e?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,null===(t=this.backoff)||void 0===t||t.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()}open(e){if(~this._readyState.indexOf("open"))return this;this.engine=new NB(this.uri,this.opts);const t=this.engine,n=this;this._readyState="opening",this.skipReconnect=!1;const i=KB(t,"open",(function(){n.onopen(),e&&e()})),r=t=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",t),e?e(t):this.maybeReconnectOnOpen()},s=KB(t,"error",r);if(!1!==this._timeout){const e=this._timeout,n=this.setTimeoutFn((()=>{i(),r(new Error("timeout")),t.close()}),e);this.opts.autoUnref&&n.unref(),this.subs.push((()=>{this.clearTimeoutFn(n)}))}return this.subs.push(i),this.subs.push(s),this}connect(e){return this.open(e)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const e=this.engine;this.subs.push(KB(e,"ping",this.onping.bind(this)),KB(e,"data",this.ondata.bind(this)),KB(e,"error",this.onerror.bind(this)),KB(e,"close",this.onclose.bind(this)),KB(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(_F){this.onclose("parse error",_F)}}ondecoded(e){_B((()=>{this.emitReserved("packet",e)}),this.setTimeoutFn)}onerror(e){this.emitReserved("error",e)}socket(e,t){let n=this.nsps[e];return n?this._autoConnect&&!n.active&&n.connect():(n=new eF(this,e,t),this.nsps[e]=n),n}_destroy(e){const t=Object.keys(this.nsps);for(const n of t){if(this.nsps[n].active)return}this._close()}_packet(e){const t=this.encoder.encode(e);for(let n=0;n<t.length;n++)this.engine.write(t[n],e.options)}cleanup(){this.subs.forEach((e=>e())),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close"),this.engine&&this.engine.close()}disconnect(){return this._close()}onclose(e,t){this.cleanup(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,t),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const t=this.backoff.duration();this._reconnecting=!0;const n=this.setTimeoutFn((()=>{e.skipReconnect||(this.emitReserved("reconnect_attempt",e.backoff.attempts),e.skipReconnect||e.open((t=>{t?(e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",t)):e.onreconnect()})))}),t);this.opts.autoUnref&&n.unref(),this.subs.push((()=>{this.clearTimeoutFn(n)}))}}onreconnect(){const e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}const iF={};function rF(e,t){"object"===typeof e&&(t=e,e=void 0);const n=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2?arguments[2]:void 0,i=e;n=n||"undefined"!==typeof location&&location,null==e&&(e=n.protocol+"//"+n.host),"string"===typeof e&&("/"===e.charAt(0)&&(e="/"===e.charAt(1)?n.protocol+e:n.host+e),/^(https?|wss?):\/\//.test(e)||(e="undefined"!==typeof n?n.protocol+"//"+e:"https://"+e),i=RB(e)),i.port||(/^(http|ws)$/.test(i.protocol)?i.port="80":/^(http|ws)s$/.test(i.protocol)&&(i.port="443")),i.path=i.path||"/";const r=-1!==i.host.indexOf(":")?"["+i.host+"]":i.host;return i.id=i.protocol+"://"+r+":"+i.port+t,i.href=i.protocol+"://"+r+(n&&n.port===i.port?"":":"+i.port),i}(e,(t=t||{}).path||"/socket.io"),i=n.source,r=n.id,s=n.path,o=iF[r]&&s in iF[r].nsps;let a;return t.forceNew||t["force new connection"]||!1===t.multiplex||o?a=new nF(i,t):(iF[r]||(iF[r]=new nF(i,t)),a=iF[r]),n.query&&!t.query&&(t.query=n.queryKey),a.socket(n.path,t)}Object.assign(rF,{Manager:nF,Socket:eF,io:rF,connect:rF});const sF=rF("http://localhost:5000");const oF=function(){const{uid:e,activityTitle:t,activityOrder:n}=ie(),i=ne(),[s,o]=(0,r.useState)(null),[a,l]=(0,r.useState)([]),[h,c]=(0,r.useState)(!0),[u,d]=(0,r.useState)(null),[f,p]=(0,r.useState)(""),[g,m]=(0,r.useState)(null),[O,v]=(0,r.useState)(""),[y,b]=(0,r.useState)(0),[w,k]=(0,r.useState)(0),[S,x]=(0,r.useState)(0),[T,_]=(0,r.useState)(!1),[P,C]=(0,r.useState)(!1),[E,Q]=(0,r.useState)(!1),[A,R]=(0,r.useState)([]),[N,I]=(0,r.useState)(""),[D,M]=(0,r.useState)(!1),[L,$]=(0,r.useState)(!1),[U,q]=(0,r.useState)("Python"),[V,z]=(0,r.useState)(!1);(0,r.useEffect)((()=>{(async()=>{try{if(!e||!t||!n)return void d("Missing URL parameters");const i=wf(Xg,"users",e),r=await yp(i);if(!r.exists())return void d("User not found");const s=r.data();q(s.currentLanguage||"Python");const a=bf(Xg,"activities".concat(s.currentLanguage)),h=(await wp(a)).docs.map((e=>({id:e.id,...e.data()}))),c=h.find((e=>e.title.replace(/\s+/g,"-")===t&&e.order.toString()===n));if(!c)return void d("Activity not found");o(c),l(F(c.questions)),b(0);const u=wf(Xg,"users",e,"activities",s.currentLanguage,"activityOrder",n),f=await yp(u);if(f.exists()){const e=f.data();k(e.correctCount||0),x(e.incorrectCount||0)}}catch(CF){d(CF.message)}finally{c(!1)}})()}),[e,t,n]),(0,r.useEffect)((()=>(sF.on("test_results",(e=>{console.log("Received test results:",e),R(e.testResults||[]),m(e.success?"Success! You got it right.":"Incorrect output:\n".concat(e.message)),e.success?($(!0),setTimeout((()=>$(!1)),1e3),k((e=>e+1)),j({correctCount:w+1}),w+1===5?(j({completed:!0}),_(!0),C(!0),B(),setTimeout((()=>{_(!1),alert("Congratulations! You have completed this phase."),b(a.length)}),3e3)):(b((e=>e+1)),p(""),m(null))):(M(!0),setTimeout((()=>M(!1)),1e3),x((e=>e+1)),j({incorrectCount:S+1}),S+1===3&&(alert("You have 3 incorrect answers. Restarting..."),k(0),x(0),b(0),l(F(s.questions)),p(""),m(null))),Q(!1)})),()=>{sF.off("test_results")})),[w,S,a]);const j=async t=>{const i=wf(Xg,"users",e,"activities",U,"activityOrder",n),r=await yp(i),s=r.exists()?r.data():{};await kp(i,{...s,...t})},B=async()=>{const t=wf(Xg,"users",e),i=await yp(t);if(i.exists()){const e=i.data(),r=parseInt(n)+1;await kp(t,{...e,currentActivity:r},{merge:!0}),console.log("Next activity unlocked: ".concat(r))}},F=e=>{const t=e.slice();for(let n=t.length-1;n>0;n--){const e=Math.floor(Math.random()*(n+1));[t[n],t[e]]=[t[e],t[n]]}return t},W=()=>{i("/activities/".concat(e,"/").concat(t,"/").concat(parseInt(n)+1))},X=()=>{i("/roadmap/".concat(e))};if(h)return(0,Gg.jsx)("div",{className:"loading",children:"Loading..."});if(u)return(0,Gg.jsxs)("div",{className:"error",children:["Error: ",u]});if(s&&(y>=a.length||P))return(0,Gg.jsxs)("div",{className:"activity-page",children:[(0,Gg.jsx)("h2",{className:"activity-title",children:s.title}),(0,Gg.jsx)("p",{className:"activity-description",children:"Congratulations! You've completed all the questions."}),T&&(0,Gg.jsx)("div",{className:"animation",children:"Next Activity Unlocked!"}),(0,Gg.jsxs)("div",{className:"completion-buttons",children:[(0,Gg.jsx)("button",{onClick:W,children:"Next Activity"}),(0,Gg.jsx)("button",{onClick:X,children:"Main Menu"})]})]});const Y=a[y];return(0,Gg.jsxs)("div",{className:"activity-page ".concat(D?"shake":""),children:[L&&(0,Gg.jsxs)("div",{className:"fireworks",children:[(0,Gg.jsx)("div",{}),(0,Gg.jsx)("div",{}),(0,Gg.jsx)("div",{}),(0,Gg.jsx)("div",{}),(0,Gg.jsx)("div",{}),(0,Gg.jsx)("div",{})]}),s&&(0,Gg.jsxs)(Gg.Fragment,{children:[(0,Gg.jsxs)("div",{className:"activity-header",children:[(0,Gg.jsx)("button",{onClick:()=>{i(-1)},className:"back-btn",children:(0,Gg.jsx)("i",{className:"fa-solid fa-arrow-left"})}),(0,Gg.jsx)("h2",{className:"activity-title",children:s.title})]}),(0,Gg.jsx)("p",{className:"activity-description",children:s.description}),(0,Gg.jsxs)("div",{className:"status-section",children:[(0,Gg.jsxs)("div",{className:"status correct-count",children:["Correct: ",w]}),(0,Gg.jsxs)("div",{className:"status incorrect-count",children:["Incorrect: ",S]})]}),(0,Gg.jsx)("div",{className:"activities-container ".concat(V?"slide-down":""),children:(0,Gg.jsx)(kV,{currentQuestion:Y,onCodeSubmit:async t=>{Q(!0);const i=a[y],r=i.functionName;try{if(!i.id||!e||!n)return void d("Missing parameters for Firestore document reference");await kp(wf(Xg,"users",e,"activities",U,"activityOrder",n,"questions",i.id),{functionName:r,userCode:t});const s={functionName:r,activityOrder:n,userId:e,questionId:i.id,userCode:t,language:U};await Ij.post("http://localhost:5000/test-function",s,{headers:{"Content-Type":"application/json"}})}catch(u){console.error("Error testing ".concat(r,":"),u),Q(!1)}},onCodeChange:e=>{I(e)},userId:e,language:U,activityOrder:n,setOutput:p})}),(0,Gg.jsxs)("div",{className:"output-section",children:[(0,Gg.jsx)("h3",{children:"Output:"}),(0,Gg.jsx)("pre",{id:"output",children:f})]}),g&&(0,Gg.jsx)("div",{className:"result-section",children:(0,Gg.jsx)("pre",{children:g})}),E&&(0,Gg.jsx)("div",{className:"loading",children:"Submitting..."}),(0,Gg.jsx)("div",{id:"mycanvas"}),(0,Gg.jsx)("button",{onClick:async()=>{try{const e=await Ij.get("http://localhost:5000/ping");v(e.data.message)}catch(u){v("Error: Unable to reach the server.")}},children:"Check Server Status"}),O&&(0,Gg.jsx)("div",{className:"server-status",children:O}),A.length>0&&(0,Gg.jsx)(Dj,{results:A,onClose:()=>R([])})]})]})},aF=()=>Math.random().toString(36).substring(2,12);function lF(e){const{setShowSignUpForm:t,toggleLoginPopUp:n}=e,[i,s]=(0,r.useState)(),[o,a]=(0,r.useState)(""),[l,h]=(0,r.useState)(""),[c,u]=(0,r.useState)(""),[d,f]=(0,r.useState)(1),[p,g]=(0,r.useState)(""),[m,O]=(0,r.useState)(""),[v,y]=(0,r.useState)(""),[b,w]=(0,r.useState)(""),[k,S]=(0,r.useState)(""),x=ne(),T=e=>{2!==d||p?3!==d||m?4!==d||v?d<5?(f(d+1),S("")):P(e):S("Please enter your age."):S("Please enter your username."):S("Please enter your name.")},_=async e=>{const t=aF();await kp(wf(Xg,"users",e.uid),{email:e.email,currentActivity:0,programmingLanguages:["Python"],uniqueId:t,isParent:!1,currentLanguage:"Python"},{merge:!0})},P=async e=>{try{await kp(wf(Xg,"users",i),{name:p,username:m,age:v,programmingLanguages:[e],currentLanguage:e},{merge:!0}),console.log("Programming language saved successfully"),x("/roadmap/".concat(i))}catch(k){S(k.message||"Failed to save programming language. Please try again.")}},C=new fr;C.setCustomParameters({prompt:"select_account"});return(0,Gg.jsx)(Gg.Fragment,{children:(0,Gg.jsxs)("div",{className:"main-container",children:[1===d&&(0,Gg.jsxs)("div",{className:"child-signup-container",children:[(0,Gg.jsx)("div",{className:"title",children:(0,Gg.jsx)("h1",{children:"Let's get started"})}),(0,Gg.jsxs)("div",{className:"signup-login-container",children:[(0,Gg.jsx)("h3",{children:"Already joined?"}),(0,Gg.jsx)("button",{className:"signin-button",onClick:()=>{t(!1),n()},children:"Log In"})]}),(0,Gg.jsx)("div",{className:"signup-box",children:(0,Gg.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),l===c)try{const e=(await _r(Wg,o,l)).user;await _(e),console.log("Signup successful",e.uid),s(e.uid),T()}catch(k){S(k.message||"Signup failed. Please try again.")}else S("Passwords need to match!")},children:[(0,Gg.jsx)("input",{className:"signup-input",type:"email",placeholder:"Your Email",value:o,onChange:e=>a(e.target.value),required:!0}),(0,Gg.jsx)("input",{className:"signup-input",type:"password",placeholder:"Password",value:l,onChange:e=>h(e.target.value),required:!0}),(0,Gg.jsx)("input",{className:"signup-input",type:"password",placeholder:"Confirm Password",value:c,onChange:e=>u(e.target.value),required:!0}),k&&(0,Gg.jsx)("p",{className:"error-message",children:k}),(0,Gg.jsxs)("div",{className:"signup-form-buttons",children:[(0,Gg.jsx)("button",{className:"signup-form-submit-btn",type:"submit",children:"Sign Up"}),(0,Gg.jsx)("h2",{className:"signup-form-or",children:"or"}),(0,Gg.jsxs)("button",{onClick:async()=>{try{const e=(await rs(Wg,C)).user,t=wf(Xg,"users",e.uid);(await yp(t)).exists()?x("/roadmap/".concat(e.uid)):(await _(e),s(e.uid),g(e.displayName||""),f(3))}catch(k){S(k.message)}},className:"signup-form-google-btn",children:[(0,Gg.jsx)("i",{className:"fa-brands fa-google"}),"Continue with Google"]})]})]})})]}),2===d&&(0,Gg.jsx)(hF,{step:d,type:"text",length:"30",placeholder:"Name",dataValue:p,setDataValue:g,handleNext:T,error:k}),3===d&&(0,Gg.jsx)(hF,{step:d,type:"text",length:"15",placeholder:"Username",dataValue:m,setDataValue:O,handleNext:T,error:k}),4===d&&(0,Gg.jsx)(hF,{step:d,type:"number",length:"2",placeholder:"Age",dataValue:v,setDataValue:y,handleNext:T,error:k}),5===d&&(0,Gg.jsx)(hF,{step:d,handleNext:T,error:k})]})})}function hF(e){let{step:t,type:n,length:i,placeholder:r,dataValue:s,setDataValue:o,handleNext:a,error:l}=e;return(0,Gg.jsx)("div",{className:"main-container info",children:(0,Gg.jsxs)("div",{className:"child-signup-container info",children:[(0,Gg.jsx)("div",{className:"title",children:(0,Gg.jsx)("h1",{children:"Almost there"})}),t<5&&(0,Gg.jsxs)(Gg.Fragment,{children:[(0,Gg.jsx)("input",{className:"info-input",type:n,maxLength:i,placeholder:r,value:s,onChange:e=>o(e.target.value),required:!0}),(0,Gg.jsx)("button",{className:"signup-form-submit-btn step",onClick:()=>a(),children:"Next"})]}),5===t&&(0,Gg.jsxs)(Gg.Fragment,{children:[(0,Gg.jsx)("p",{children:"Select a Fun Programming Language"}),(0,Gg.jsxs)("div",{className:"lang-selection-container",children:[(0,Gg.jsxs)("button",{type:"button",onClick:()=>a("HTML/CSS"),children:[(0,Gg.jsx)("span",{children:"\u2022"})," HTML/CSS: Create Beautiful Websites!"]}),(0,Gg.jsxs)("button",{type:"button",onClick:()=>a("Java"),children:[(0,Gg.jsx)("span",{children:"\u2022"})," Java: Build Amazing Apps!"]}),(0,Gg.jsxs)("button",{type:"button",onClick:()=>a("Python"),children:[(0,Gg.jsx)("span",{children:"\u2022"})," Python: Code Like a Pro!"]})]})]}),l&&(0,Gg.jsx)("p",{className:"error-message",children:l})]})})}const cF=()=>Math.random().toString(36).substring(2,12);function uF(e){const{handleRouteChange:t,toggleSignUpPopUp:n,toggleLoginPopUp:i}=e,[s,o]=(0,r.useState)(""),[a,l]=(0,r.useState)(""),[h,c]=(0,r.useState)("");return(0,Gg.jsxs)("div",{className:"child-signup-container",children:[(0,Gg.jsx)("div",{className:"title",children:(0,Gg.jsx)("h1",{children:"Let's get back"})}),(0,Gg.jsxs)("div",{className:"signup-login-container",children:[(0,Gg.jsx)("h3",{children:"New? Create an account here"}),(0,Gg.jsx)("button",{className:"signin-button",onClick:()=>{i(),n()},children:"Sign Up"})]}),(0,Gg.jsx)("div",{className:"signup-box",children:(0,Gg.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{const e=await function(e,t,n){return hn(e.app)?Promise.reject(Ln(e)):xr(Ze(e),hr.credential(t,n)).catch((async t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&Tr(e),t}))}(Wg,s,a),n=e.user,i=wf(Xg,"users",n.uid),r=await yp(i);if(!r.exists())return void c("User does not exist, create a new account");r.data().isParent?t("/parenthub/".concat(n.uid)):t("/roadmap/".concat(n.uid))}catch(h){c(h.message||"Login failed. Please try again.")}},children:[(0,Gg.jsx)("input",{className:"signup-input",type:"email",placeholder:"Your Email",value:s,onChange:e=>o(e.target.value),required:!0}),(0,Gg.jsx)("input",{className:"signup-input",type:"password",placeholder:"Password",value:a,onChange:e=>l(e.target.value),required:!0}),h&&(0,Gg.jsx)("p",{children:h}),(0,Gg.jsxs)("div",{className:"signup-form-buttons",children:[(0,Gg.jsx)("button",{className:"signup-form-submit-btn",type:"submit",children:"Log In"}),(0,Gg.jsx)("h2",{className:"signup-form-or",children:"or"}),(0,Gg.jsxs)("button",{onClick:async()=>{const e=new fr;e.setCustomParameters({prompt:"select_account"});try{const n=(await rs(Wg,e)).user,i=wf(Xg,"users",n.uid),r=await yp(i);if(r.exists()){r.data().isParent?t("/parenthub/".concat(n.uid)):t("/roadmap/".concat(n.uid))}else await kp(i,{email:n.email,currentActivity:0,programmingLanguages:["Python"],uniqueId:cF(),name:n.displayName||"",username:"",age:"",currentLanguage:"Python",isParent:!1}),t("/roadmap/".concat(n.uid))}catch(h){c(h.message||"Login with Google failed. Please try again.")}},className:"signup-form-google-btn",children:[(0,Gg.jsx)("i",{className:"fa-brands fa-google"}),"Continue with Google"]})]})]})})]})}const dF=()=>Math.random().toString(36).substring(2,12);function fF(e){const{setShowSignUpForm:t,toggleLoginPopUp:n}=e,[i,s]=(0,r.useState)(),[o,a]=(0,r.useState)(""),[l,h]=(0,r.useState)(""),[c,u]=(0,r.useState)(""),[d,f]=(0,r.useState)(1),[p,g]=(0,r.useState)(""),[m,O]=(0,r.useState)(""),[v,y]=(0,r.useState)(""),[b,w]=(0,r.useState)(""),k=ne(),S=async()=>{if(2!==d||p)if(3!==d||m)if(4!==d||v){if(4===d){if(!await T(v))return void w("Invalid child ID. Please enter a valid child ID.")}d<4?(f(d+1),w("")):P()}else w("Please enter a valid child ID.");else w("Please enter your age.");else w("Please enter your name.")},x=()=>f(d-1),T=async e=>{const t=ip(bf(Xg,"users"),sp("uniqueId","==",e));return!(await wp(t)).empty},_=async e=>{const t=dF();await kp(wf(Xg,"parents",e.uid),{email:e.email,name:p,age:m,childID:v,uniqueId:t,isParent:!0},{merge:!0})},P=async()=>{k("/parenthub/".concat(i))},C=new fr;C.setCustomParameters({prompt:"select_account"});return(0,Gg.jsx)(Gg.Fragment,{children:(0,Gg.jsxs)("div",{className:"main-container",children:[1===d&&(0,Gg.jsxs)("div",{className:"child-signup-container",children:[(0,Gg.jsx)("div",{className:"title",children:(0,Gg.jsx)("h1",{children:"Let's get started"})}),(0,Gg.jsxs)("div",{className:"signup-login-container",children:[(0,Gg.jsx)("h3",{children:"Already joined?"}),(0,Gg.jsx)("button",{className:"signin-button",onClick:()=>{t(!1),n()},children:"Log In"})]}),(0,Gg.jsx)("div",{className:"signup-box",children:(0,Gg.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),l===c)try{const e=(await _r(Wg,o,l)).user;await _(e),console.log("Signup successful",e.uid),s(e.uid),S()}catch(b){w(b.message||"Signup failed. Please try again.")}else w("Passwords need to match!")},children:[(0,Gg.jsx)("input",{className:"signup-input",type:"email",placeholder:"Your Email",value:o,onChange:e=>a(e.target.value),required:!0}),(0,Gg.jsx)("input",{className:"signup-input",type:"password",placeholder:"Password",value:l,onChange:e=>h(e.target.value),required:!0}),(0,Gg.jsx)("input",{className:"signup-input",type:"password",placeholder:"Confirm Password",value:c,onChange:e=>u(e.target.value),required:!0}),b&&(0,Gg.jsx)("p",{className:"error-message",children:b}),(0,Gg.jsxs)("div",{className:"signup-form-buttons",children:[(0,Gg.jsx)("button",{className:"signup-form-submit-btn",type:"submit",children:"Sign Up"}),(0,Gg.jsx)("h2",{className:"signup-form-or",children:"or"}),(0,Gg.jsxs)("button",{onClick:async()=>{try{const e=(await rs(Wg,C)).user;await _(e),s(e.uid),g(e.displayName||""),f(3)}catch(b){w(b.message)}},className:"signup-form-google-btn",children:[(0,Gg.jsx)("i",{className:"fa-brands fa-google"}),"Continue with Google"]})]})]})})]}),2===d&&(0,Gg.jsx)(pF,{step:d,type:"text",length:"30",placeholder:"Name",dataValue:p,setDataValue:g,handleNext:S,handlePrev:x,error:b}),3===d&&(0,Gg.jsx)(pF,{step:d,type:"number",length:"2",placeholder:"Age",dataValue:m,setDataValue:O,handleNext:S,handlePrev:x,error:b}),4===d&&(0,Gg.jsx)(pF,{step:d,type:"text",length:"30",placeholder:"Child ID",dataValue:v,setDataValue:y,handleNext:S,handlePrev:x,error:b})]})})}function pF(e){let{step:t,type:n,length:i,placeholder:r,dataValue:s,setDataValue:o,handleNext:a,handlePrev:l,error:h}=e;return(0,Gg.jsx)("div",{className:"main-container info",children:(0,Gg.jsxs)("div",{className:"parent-signup-container info",children:[(0,Gg.jsx)("div",{className:"title",children:(0,Gg.jsx)("h1",{children:"Almost there"})}),(0,Gg.jsx)("input",{className:"info-input",type:n,maxLength:i,placeholder:r,value:s,onChange:e=>o(e.target.value),required:!0}),(0,Gg.jsxs)("div",{className:"signup-form-buttons",children:[t>1&&(0,Gg.jsx)("button",{className:"signup-form-submit-btn step",onClick:l,children:"Back"}),(0,Gg.jsx)("button",{className:"signup-form-submit-btn step",onClick:a,children:"Next"})]}),h&&(0,Gg.jsx)("p",{className:"error-message",children:h})]})})}function gF(e){const{showSignUpForm:t}=e,[n,i]=(0,r.useState)(!1),[s,o]=(0,r.useState)(!1);ne();return(0,Gg.jsxs)("div",{className:"main-container",children:[(0,Gg.jsx)(mF,{title:"Parents, over here!",imgSrc:"".concat("/DYA","/user.png"),overlayClass:"overlay-left",desc:"Few words about parent account",handleRouteChange:()=>i(!0)}),(0,Gg.jsx)(mF,{title:"Students!",imgSrc:"".concat("/DYA","/user.png"),overlayClass:"overlay-right",desc:"Few words about student account",handleRouteChange:()=>o(!0)}),n&&(0,Gg.jsx)("div",{className:"popup-overlay",onClick:()=>i(!1),children:(0,Gg.jsx)("div",{className:"popup-content",onClick:e=>e.stopPropagation(),children:(0,Gg.jsx)(fF,{setShowSignUpForm:i,toggleLoginPopUp:()=>{}})})}),s&&(0,Gg.jsx)("div",{className:"popup-overlay",onClick:()=>o(!1),children:(0,Gg.jsx)("div",{className:"popup-content",onClick:e=>e.stopPropagation(),children:(0,Gg.jsx)(lF,{setShowSignUpForm:o,toggleLoginPopUp:()=>{}})})})]})}function mF(e){let{title:t,imgSrc:n,overlayClass:i,desc:r,handleRouteChange:s}=e;return(0,Gg.jsxs)("div",{children:[(0,Gg.jsx)("h2",{className:"container-title",children:t}),(0,Gg.jsxs)("div",{className:"container",children:[(0,Gg.jsx)("img",{src:n,alt:t,className:"image"}),(0,Gg.jsx)("div",{className:i,children:(0,Gg.jsxs)("div",{className:"desc",children:[(0,Gg.jsx)("p",{children:r}),(0,Gg.jsx)("button",{className:"overlay-btn",onClick:s,children:"Sign Up"})]})})]})]})}function OF(){return(0,Gg.jsxs)("footer",{className:"footer",children:[(0,Gg.jsxs)("section",{className:"hero",children:[(0,Gg.jsx)("img",{src:"".concat("/DYA","/branch-left.png"),alt:"left-img",className:"hero-img-left"}),(0,Gg.jsxs)("div",{className:"hero-content",children:[(0,Gg.jsx)("h2",{children:"Discover and Learn"}),(0,Gg.jsx)("p",{children:"Explore our interactive games, educational videos, and fun activities!"}),(0,Gg.jsx)("button",{className:"animated-button",children:"Get Started"})]}),(0,Gg.jsx)("img",{src:"".concat("/DYA","/branch-right.png"),alt:"right-img",className:"hero-img-right"})]}),(0,Gg.jsx)("p",{children:"\xa9 2024 DYA. All rights reserved."})]})}const vF=[{name:"Java",image:"Java.jpg",info:"Learn Java with fun activities and games."},{name:"Python",image:"Python.jpg",info:"Learn Python with fun activities and games."},{name:"HTML/CSS",image:"html.jpg",info:"Learn HTML/CSS with fun activities and games."}];function yF(){const[e,t]=(0,r.useState)(null),n=()=>{t(null)};return(0,Gg.jsxs)("section",{className:"language-slider",children:[(0,Gg.jsx)("h2",{children:"Languages We Offer"}),(0,Gg.jsx)("div",{className:"slider",children:vF.map(((e,n)=>(0,Gg.jsxs)("div",{className:"language-card",onClick:()=>(e=>{t(e)})(e),children:[(0,Gg.jsx)("img",{src:e.image,alt:e.name,className:"language-image"}),(0,Gg.jsx)("h3",{children:e.name})]},n)))}),e&&(0,Gg.jsx)("div",{className:"popup-overlay",onClick:n,children:(0,Gg.jsxs)("div",{className:"popup-content",onClick:e=>e.stopPropagation(),children:[(0,Gg.jsx)("h3",{children:e.name}),(0,Gg.jsx)("p",{children:e.info}),(0,Gg.jsx)("button",{onClick:n,children:"Close"})]})})]})}function bF(){return(0,Gg.jsxs)("section",{className:"mascot-section",children:[(0,Gg.jsx)("h2",{children:"Why You Should Learn With Us"}),(0,Gg.jsxs)("div",{className:"mascot-content",children:[(0,Gg.jsx)("img",{src:"mascot.png",alt:"Mascot",className:"mascot-image"}),(0,Gg.jsxs)("ul",{className:"reasons-list",children:[(0,Gg.jsx)("li",{children:"Interactive and fun learning experiences"}),(0,Gg.jsx)("li",{children:"Personalized learning paths"}),(0,Gg.jsx)("li",{children:"Expertly crafted educational content"}),(0,Gg.jsx)("li",{children:"Safe and child-friendly environment"}),(0,Gg.jsx)("li",{children:"Supportive community of learners"})]})]})]})}function wF(){const{uid:e,language:t,lessonTitle:n}=ie(),i=ne(),[s,o]=(0,r.useState)(),[a,l]=(0,r.useState)([]),[h,c]=(0,r.useState)("Introduction"),[u,d]=(0,r.useState)(""),[f,p]=(0,r.useState)(""),[g,m]=(0,r.useState)(n.replace(/-/g," ")),[O,v]=(0,r.useState)([]),y=e=>{c(e)};(0,r.useEffect)((()=>{(async()=>{try{if(!e||!n)return void o("Missing user ID or lesson");const i=ip(bf(Xg,"Lesson".concat(t)),sp("title","==",g)),r=(await wp(i)).docs.map((e=>({id:e.id,...e.data()})));r.length>0?(l(r[0]),v(r[0].steps)):o("Lesson not found")}catch(s){o(s.message)}})()}),[e,t,n,g]),console.log(a);const b=O.find((e=>e.title===h));return(0,Gg.jsx)(Gg.Fragment,{children:(0,Gg.jsxs)("div",{className:"lesson-page",children:[(0,Gg.jsxs)("div",{className:"lesson-page-header",children:[(0,Gg.jsx)("button",{onClick:()=>{i(-1)},className:"back-btn",children:(0,Gg.jsx)("i",{className:"fa-solid fa-arrow-left"})}),(0,Gg.jsx)("h1",{children:g})]}),(0,Gg.jsxs)("div",{className:"lesson-content-container",children:[(0,Gg.jsxs)("div",{className:"lesson-tabs",children:[(0,Gg.jsx)("button",{className:"tablinks ".concat("Introduction"===h?"active":""),onClick:()=>y("Introduction"),children:"Introduction"}),O.map(((e,t)=>(0,Gg.jsx)("button",{className:"tablinks ".concat(h===e.title?"active":""),onClick:()=>y(e.title),children:e.title},t)))]}),(0,Gg.jsx)("div",{className:"lesson-main",children:"Introduction"===h?(0,Gg.jsxs)("div",{children:[(0,Gg.jsx)("h2",{children:a.description}),(0,Gg.jsx)("h2",{children:a.objective}),(0,Gg.jsx)("p",{children:a.materials})]}):(0,Gg.jsxs)(Gg.Fragment,{children:[(0,Gg.jsx)("h2",{children:h}),(0,Gg.jsx)("h3",{children:b.instruction}),(0,Gg.jsx)("p",{children:b.steps})]})})]})]})})}var kF=n(264),SF=n.n(kF);const xF=function(){const e=ne(),t=t=>{t?e(t):console.error("Undefined route passed to handleRouteChange")},[n,i]=(0,r.useState)(!1),[s,o]=(0,r.useState)(!1),[a,l]=(0,r.useState)(!1);(0,r.useEffect)((()=>{i(!1),o(!1),l(!1)}),[e]);const h=()=>{i(!n),o(!1),l(!1)},c=()=>{i(!1),l(!a)};return(0,Gg.jsx)("div",{className:"App",children:(0,Gg.jsxs)(ve,{children:[(0,Gg.jsx)(me,{path:"/",element:(0,Gg.jsxs)("div",{children:[(0,Gg.jsxs)("header",{className:"App-header",children:[(0,Gg.jsxs)("div",{className:"auth-buttons",children:[(0,Gg.jsx)("button",{className:"auth-button",onClick:c,children:"Log In"}),(0,Gg.jsx)("button",{className:"auth-button",onClick:h,children:"Sign Up"})]}),(0,Gg.jsx)("h1",{children:"Welcome to DYA!"}),(0,Gg.jsx)("p",{children:"Your ultimate fun and learning destination for kids."})]}),(0,Gg.jsxs)("main",{children:[n&&(0,Gg.jsx)("div",{className:"popup-overlay",onClick:()=>i(!1),children:(0,Gg.jsx)("div",{className:"popup-content",onClick:e=>e.stopPropagation(),children:s?(0,Gg.jsx)(lF,{setShowSignUpForm:o,toggleLoginPopUp:c}):(0,Gg.jsx)(gF,{showSignUpForm:()=>{o(!0)},handleRouteChange:t,toggleLoginPopUp:c})})}),a&&(0,Gg.jsx)("div",{className:"popup-overlay",onClick:()=>l(!1),children:(0,Gg.jsx)("div",{className:"popup-content",onClick:e=>e.stopPropagation(),children:(0,Gg.jsx)(uF,{handleRouteChange:t,toggleSignUpPopUp:h,toggleLoginPopUp:c})})}),(0,Gg.jsxs)("div",{className:"main-content ".concat(n||a?"blur":""),children:[(0,Gg.jsxs)("section",{className:"features",children:[(0,Gg.jsxs)("div",{className:"feature feature-games",children:[(0,Gg.jsx)("h3",{children:"Games"}),(0,Gg.jsx)("p",{children:"Engage in exciting and educational games designed for kids."})]}),(0,Gg.jsxs)("div",{className:"feature feature-videos",children:[(0,Gg.jsx)("h3",{children:"Videos"}),(0,Gg.jsx)("p",{children:"Watch fun and educational videos that keep you entertained."})]}),(0,Gg.jsxs)("div",{className:"feature feature-activities",children:[(0,Gg.jsx)("h3",{children:"Activities"}),(0,Gg.jsx)("p",{children:"Participate in creative and fun activities to learn new things."})]})]}),(0,Gg.jsx)(bF,{}),(0,Gg.jsx)(yF,{})]})]}),(0,Gg.jsx)(OF,{})]})}),(0,Gg.jsx)(me,{path:"/login",element:(0,Gg.jsx)(uF,{handleRouteChange:t})}),(0,Gg.jsx)(me,{path:"/signup",element:(0,Gg.jsx)(gF,{handleRouteChange:t})}),(0,Gg.jsx)(me,{path:"/signup/child",element:(0,Gg.jsx)(lF,{handleRouteChange:t})}),(0,Gg.jsx)(me,{path:"/parenthub/:userId",element:(0,Gg.jsx)(SF(),{})}),(0,Gg.jsx)(me,{path:"/roadmap/:uid",element:(0,Gg.jsx)(Jg,{})}),(0,Gg.jsx)(me,{path:"/activity/:uid/:activityTitle/:activityOrder",element:(0,Gg.jsx)(oF,{})}),(0,Gg.jsx)(me,{path:"/lessons/:uid/:language/:lessonTitle",element:(0,Gg.jsx)(wF,{})})]})})},TF=e=>{e&&e instanceof Function&&n.e(845).then(n.bind(n,845)).then((t=>{let{getCLS:n,getFID:i,getFCP:r,getLCP:s,getTTFB:o}=t;n(e),i(e),r(e),s(e),o(e)}))};o.createRoot(document.getElementById("root")).render((0,Gg.jsx)(r.StrictMode,{children:(0,Gg.jsx)(we,{children:(0,Gg.jsx)(xF,{})})})),TF()})()})();
//# sourceMappingURL=main.b39e48e9.js.map